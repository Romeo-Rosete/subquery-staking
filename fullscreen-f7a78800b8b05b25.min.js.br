"use strict";
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="2ad8cfc2-58d5-5fc3-a2f5-d6d820a6427f")}catch(e){}}();
(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([[8840],{134293:(e,t,n)=>{n.d(t,{L:()=>r});var a=n(411855);function r(e,t,n){a.useEffect(()=>{let a=a=>{var r;let l=a.target;n&&!l.isConnected||(null==(r=e.current)?void 0:r.contains(l))||t()};return document.addEventListener("click",a),()=>{document.removeEventListener("click",a)}})}},959896:(e,t,n)=>{n.d(t,{$7:()=>w,Mt:()=>N,Ud:()=>T});var a=n(411855),r=n(188507),l=n(169614),i=n(384305),o=n(216817),s=n(611464),c=n(656927),d=n(377372),u=n(402791),m=n(579632),p=n(352604),_=n(325931),f=n(482402),h=n(950187),g=n(994192),E=n(983245),v=n(829075),y=n(21122),b=n(776871),C=n(625475);function w(){let e=(0,r.wA)(),t=(0,r.d4)(e=>e.payment);function n(n){e(p.Az({numWhiteboardEditors:t.numWhiteboardEditors+n}))}function a(n){e(p.js({numDesignEditors:t.numDesignEditors+n}))}return{increment:function(e,t){(0,i.nD)(t)||("whiteboard"===e?n(1):a(1))},decrement:function(e,t){(0,i.nD)(t)||("whiteboard"===e?n(-1):a(-1))}}}let T=(0,g.D)(({teamId:e,jamboardPromoCodeId:t})=>{let n=(0,r.wA)(),m=(0,r.d4)(e=>e.loadingState),g=(0,r.d4)(t=>e?t.teamUserByTeamId[e]:null),w=(0,r.d4)(e=>e.selectedView),T=(0,y.iZ)(),[k,S]=(0,a.useState)(!0),I=(0,o.Z)(e),A=_.Xw.loadingKeyForPayload({teamId:e}),P=(0,b.GH)(m,A),O=(0,s.DC)();(0,a.useEffect)(()=>{n(_.Xw({teamId:e}))},[n,e]);let L=function(){let e=(0,r.wA)();return(0,a.useCallback)(t=>{(0,l.sx)("Loaded Saved Cart State",{teamId:t.teamId,lastSavedAt:t.updatedAt}),e(p.eK(t))},[e])}();return(0,a.useEffect)(()=>{async function a(t){var a;try{let a=await c.Ay.post("/api/subscriptions/teams/calculate_estimate",{...t,team_id:e});n(p.i({taxes:a.data.meta.estimate}))}catch(t){let e=(0,u.Jv)(t);e&&(null==(a=null==t?void 0:t.data)?void 0:a.reason)==="PROMOTION_CODE_ID_ERROR"?n(p.Qg({error:e,errorCode:"PROMOTION_CODE_ID_ERROR"})):n(d.s.error((0,u.t)("payments.errors.estimate_calculation_error"))),n(E.$T({...w,paymentStep:h.tn.PAYMENT_AND_ADDRESS}))}S(!1)}if(void 0===I||I===e||k||(N(n),S(!0)),(!e||P)&&k){let l=(0,C.BR)(g,T),o=Object.entries(l).map(([e,t])=>{if((0,i.nD)(t.email||""))return e}).filter(e=>!!e);n(p.M2({figmaEmailTeamUsers:o}));let s=(0,v.lX)({teamId:e,userId:null==T?void 0:T.id});if(s){s.editorStatusChanges=(0,v.nt)(s.editorStatusChanges,l);let i=(0,C.Ky)(l,s.editorStatusChanges,f._Y.DESIGN),c=(0,C.Ky)(l,s.editorStatusChanges,f._Y.WHITEBOARD),d=i+s.numEmptyDesignSeats,u=c+s.numEmptyWhiteboardSeats;if(L({numDesignEditors:d,numWhiteboardEditors:u,editorStatusChanges:s.editorStatusChanges,teamId:e,updatedAt:s.updatedAt}),O){var r;let e=(r=O.billing_period,h.tY[h.tY[r]]);n(p.Lo({billingPeriod:e})),n(p.$h({vatGstId:O.vat_gst_id})),n(p.yy({legalName:O.company_name,displayName:O.display_name})),n(p.Ef({regionalVatGstId:O.regional_vat_gst_id})),a({address:O.address,editor_status_changes:s.editorStatusChanges,figma_email_team_users:o,selected_currency:O.currency,annual_quantity:(0,C.fD)(e,d),monthly_quantity:(0,C.Rq)(e,d),annual_whiteboard_quantity:(0,C.fD)(e,u),monthly_whiteboard_quantity:(0,C.Rq)(e,u),vat_gst_id:O.vat_gst_id,regional_vat_gst_id:O.regional_vat_gst_id,promotion_code_id:t})}else S(!1)}else S(!1)}},[n,P,g,I,e,T,k,O,w,L,t]),(0,a.useEffect)(()=>()=>{e&&x(n,e)},[n,e]),k}),x=(0,g.D)((e,t)=>{let n=_.Xw.loadingKeyForPayload({teamId:t});e(m.yH({key:n}))});function N(e){e(p.Je({editorStatusChanges:{upgrade:{whiteboard:[],design:[],slides:[],sites:[]},downgrade:{whiteboard:[],design:[],slides:[],sites:[]}}})),e(p.js({numDesignEditors:0})),e(p.Az({numWhiteboardEditors:0}))}},69128:(e,t,n)=>{n.r(t),n.d(t,{EmbeddedFigmaScopeView:()=>O,EmbeddedPrototypingFigmaScopeViewEnabled:()=>D});var a=n(411855),r=n(188507),l=n(395096),i=n(2783),o=n(499200),s=n(71306),c=n(536006),d=n(611464),u=n(646240),m=n(963039),p=n(659875),_=n(948993),f=n(61415),h=n(866263),g=n(198683),E=n(22583),v=n(664080),y=n(449565),b=n(829879),C=n(669234),w=n(934325),T=n(46160),x=n(955505),N=n(921370),k=n(651492),S=n(529886),I=n(523871),A=n(127692),P=n(860168);let O=a.memo(function(){return(0,d.kc)().internal_only_debug_tools?a.createElement(M,null):null});function L(e,t){a.useEffect(()=>{let n=n=>{70===n.keyCode&&n.ctrlKey&&n.altKey&&n.metaKey&&t(!e)};return document.addEventListener("keydown",n),()=>{document.removeEventListener("keydown",n)}},[e,t])}function M(){let e=(0,w.J2)((0,y.UK)().showFigmaScope),{setIsOpen:t,setClosed:n}=a.useMemo(()=>{let e=e=>(0,y.UK)().showFigmaScope.set(e);return{setIsOpen:e,setClosed:()=>e(!1)}},[]);return L(e,t),e?a.createElement(R,{onClose:n}):null}function D(){let[e,t]=a.useState(!1),n=a.useCallback(()=>{t(!1)},[t]);return L(e,t),e?a.createElement(F,{onClose:n,appSelection:void 0,setAppSelection:void 0}):null}function R({onClose:e}){let t=(0,r.wA)(),n=(0,r.d4)(U),l=a.useCallback(e=>{"canvas"===e.selectionType&&v.Egt.setSelectedNodeAndCanvas(e.guidStr,!1)&&(b.hq(e.guidStr),v.NfO.scrollAndZoomIntoView([e.guidStr])),"local_style"===e.selectionType&&(b.wr(),t(_.Bn({type:e.styleType,styleIds:new Set([e.guidStr]),folderNames:new Set})))},[t]);return a.createElement(F,{onClose:e,appSelection:n,setAppSelection:l})}function F({onClose:e,appSelection:t,setAppSelection:n}){let d=(0,N._6)(),p=(0,C.tS)(),_=(0,w.J2)(v.Hcu.sceneGeneration()),[y]=(0,l.A)(_,500,{trailing:!0}),b=(0,u.Xr)(S.o3),T=(0,r.d4)(e=>{if("prototype"===d.view)return!0;try{return null!=e.mirror.sceneGraph.getCurrentPage()}catch(e){return!1}}),x=(0,r.d4)(e=>e.mirror.appModel.pagesList);a.useEffect(()=>{if(T){let e={type:"server_file",key:p??"unknown",backend:"fullscreen"};b((0,i.NY)({resource:e,scenes:[new k.I({resource:e,sensitiveTextPolicy:"show",inPrototypeViewer:"prototype"===d.view})]}))}},[y,b,T,d.view,p]);let O=(0,E.dB)(),L=a.useRef(null);(0,g.Z)("legacy"===O?"light":O,L,d);let M=(0,h.lg)(),{windowInnerHeight:D}=(0,c.l)(),[R,F]=a.useState(window.innerHeight/2),U=a.useMemo(()=>D-(0,m.qE)(R,(0,o.hG)("design"===M?P.LdP:P.tui),D-32),[R,M,D]),H=(0,u.Xr)(I.O);a.useEffect(()=>{H(U)},[H,U]);let V=a.useCallback(e=>{F(e.clientY)},[]),[G,K]=a.useState(null);return((0,s.N)(G,V),T)?a.createElement(B,null,a.createElement("div",{style:{zIndex:3,height:U,color:"#000",position:"relative"},ref:L,className:f.Dm,tabIndex:-1},a.createElement("div",{ref:K,style:{cursor:"ns-resize",position:"absolute",left:0,right:0,top:"-3px",height:"5px"}}),a.createElement(A.J,{embedded:!0,onClose:e,appSelection:t,setAppSelection:n,pagesList:x}))):null}class B extends a.PureComponent{constructor(){super(...arguments),this.state={hasError:!1}}static getDerivedStateFromError(){return{hasError:!0}}componentDidCatch(e){console.error(e)}render(){return this.state.hasError?null:this.props.children}}let U=(0,p.P8)([x.Xt,T.nt],(e,t)=>{let n=Object.keys(e);if(n.length>0)return{selectionType:"canvas",guidStr:n[0]};if(t){let e=Array.from(t.styleIds);if(e.length>0)return{selectionType:"local_style",guidStr:e[0],styleType:t.type}}})},723110:(e,t,n)=>{let a,r,l,i,o,s,c,d,u,m,p,_,f,h,g,E,v,y,b,C,w,T,x,N,k,S,I,A,P,O,L,M,D,R,F,B,U,H,V,G,K,W,z,j,Y,Z,X,q;n.r(t),n.d(t,{FullscreenPageView:()=>ecI,SyncVotingState:()=>ecM,navigateToFileBrowserOrReloadIfNecessary:()=>eck,onFullscreenViewRender:()=>ecF}),n(137592);var J,Q=n(411855),$=n(188507),ee=n(513561),et=n(204556),en=n(629019),ea=n.n(en),er=n(169614),el=n(172169),ei=n(703473),eo=n(611464),es=n(272078),ec=n(344298);let ed=new Set(["-","="]),eu=new Set(["-","=","f","o","p","r","s"]);function em(e){if(!eu.has(e.key))return;let t=ec.Ay.mac?es.xH.META:es.xH.CONTROL;(0,es.vN)(e,t)?e.preventDefault():ed.has(e.key)&&(t|=es.xH.SHIFT,(0,es.vN)(e,t)&&e.preventDefault())}var ep=n(294608),e_=n(646240),ef=n(732326),eh=n(1705),eg=n(483469),eE=n(762208),ev=n(356378),ey=n(159849),eb=n(298381),eC=n(465),ew=n(507776),eT=n(451015),ex=n(577241),eN=n(106309),ek=n(714287),eS=n(797019);function eI(e){return(0,eN.TR)()?Q.createElement(eA,{...e}):Q.createElement(Q.Fragment,null,e.children)}function eA({name:e,trackingEnabled:t,alsoTrack:n,children:a}){let r=(0,eT.F)(n),l=(0,eN.U2)({name:e,trackingEnabled:t,alsoTrackRef:r,isNamespace:!0,autoTrackable:!1}),{trackablePath:i,error:o}=l,s=(0,eN.MF)(()=>(0,eN.ET)(i)),c=(0,ex.o3)(ex.nt.trackableDebug),d=(0,eN.MF)(()=>(0,eN.R8)({componentName:"TrackableNamespace",name:e,error:o,alsoTrackedProperties:s()}));return a=(0,eS.C)({children:a,isDebugMode:c,name:e,color:o?"red":"purple",depth:i.length,getTooltipText:d}),Q.createElement(ek.f.Provider,{value:l},a)}var eP=n(292101),eO=n(402791),eL=n(573760),eM=n(487644),eD=n(397345),eR=n(994436),eF=n(968453),eB=n(813733),eU=n(664080),eH=n(449565),eV=n(829879),eG=n(934325),eK=n(61415),eW=n(341482),ez=n(534766),ej=n(416846),eY=n(116198),eZ=n(462725),eX=n(968109),eq=n(251232),eJ=n(416014),eQ=n(348844),e$=n(313888),e0=n(531800),e1=n(142284),e2=n(660257);let e5=Q.forwardRef(function(e,t){let{boundingBox:n,isFigmaPurple:a}=e.node,r=function(e,t,n){let a=(0,ez._X)({subscribeToUpdates_expensive:!0});if(!a)return null;let r={},l=(0,ez.Yb)(a,{x:e.x,y:e.y,width:e.w,height:e.h});return r.left=l.x+a.x,r.top=l.y+a.y,t&&(r.left+=l.width/2),n&&(r.top=l.y+a.y+l.height),{containerStyle:r}}(n,e.centered,e.bottom);if(!r)return null;let{containerStyle:l}=r;return Q.createElement("div",{ref:t,className:ea()(eK.Dm,"on_canvas_pill--pillContainer--jvRgr",{"on_canvas_pill--centered--iOUXI":e.centered,"on_canvas_pill--bottom--gwvqA":e.bottom}),style:{...l,marginLeft:e.offset??0},"data-testid":e.dataTestId},Q.createElement("div",{className:ea()("on_canvas_pill--pill--fSukI",a?"on_canvas_pill--symbol--3Kz9f":"on_canvas_pill--node--xgavI")},e.children))});function e4({node:e}){let t=(0,eg.xx)((e,t)=>(0,ej.D)(e,t)),n=e?t(e.guid,e.objectsPanelThumbnailId):"",a=n?(0,eM.V)(n):function(e){let t=null;switch(e.type){case"TEXT":t=e1.A;break;case"FRAME":t=e.isGroup?eZ.A:e.isStateGroup?e$.A:(0,ej.GN)({stackMode:e.stackMode,stackCounterAlignItems:e.stackCounterAlignItems});break;case"ROUNDED_RECTANGLE":t=eJ.A;break;case"ELLIPSE":t=eY.A;break;case"STAR":t=eQ.A;break;case"VECTOR":t=e2.A;break;case"GROUP":t=eZ.A;break;case"INSTANCE":t=eX.A;break;case"SYMBOL":t=e.isState?e0.A:e$.A}return(0,eW.oY)(e.type)&&e.hasEnabledStaticImagePaint&&(t=eq.A),t}(e);return a?Q.createElement(eM.B,{className:"on_canvas_pill--iconNodeType--0xm99",svg:a}):null}var e3=n(208332);let e6="dev_handoff_canvas_pill--dimension--WEwpp",e7="dev_handoff_canvas_pill--size--9ZpSZ";var e8=n(419902);function e9(e){return e===eU.mKm.HUG_CONTENT?"Auto":e===eU.mKm.FILL_CONTAINER?"100%":"Fixed"}function te(e){let t=(0,eF.mJ)(e);if(!t)return null;let n="INSTANCE"===t.type||"SYMBOL"===t.type||t.isStateGroup||t.isInstanceSublayer||t.isSymbolSublayer,a=!0;return"TEXT"===t.type&&(t.autoRename||t.characters.substring(0,10)===t.name.substring(0,10))&&(a=!1),{guid:t.guid,name:t.name,showName:a,type:t.type,isFigmaPurple:n,boundingBox:t.absoluteBoundingBox,hasEnabledStaticImagePaint:t.hasEnabledStaticImagePaint,isState:t.isState,isStateGroup:t.isStateGroup,isUIElement:(0,eR.$F)(t)&&!t.isStateGroup,stackCounterAlignItems:t.stackCounterAlignItems,stackMode:t.stackMode,isGroup:t.isGroup,horizontalSizeMode:e9(eU.Qa7.stackHorizontalSize(t.guid)),verticalSizeMode:e9(eU.Qa7.stackVerticalSize(t.guid)),size:t.size,objectsPanelThumbnailId:t.objectsPanelThumbnailId}}function tt(e){let t=te(e.guid),n=(0,eG.J2)((0,eH.UK)().showGuids),a=Q.useRef(null);return t&&"SECTION"!==t.type?Q.createElement(e5,{ref:a,node:t,key:e.guid,offset:-2,dataTestId:"devHandoffLayerNamePill"},Q.createElement("div",{className:"dev_handoff_canvas_pill--layerName--eX5Zu"},Q.createElement(e4,{node:t}),t.showName&&Q.createElement("span",{className:"dev_handoff_canvas_pill--pillText--7B3-h ellipsis--ellipsis--Tjyfa"},t.name,n&&` (${e.guid})`))):null}let tn=e=>e.toLocaleString("en",{maximumFractionDigits:5,useGrouping:!1});function ta(e,t=0){let n=(0,eD.v4)(),a=(0,eB.qM)(n,t,tn),{variable:r,variableDisplayName:l,isSuggested:i}=(0,e3.xp)(e,t);return r?{value:l,isSuggested:i}:{value:a}}function tr(e){let t=te(e.guid),{value:n,isSuggested:a}=ta("WIDTH",(null==t?void 0:t.size.x)??0),{value:r,isSuggested:l}=ta("HEIGHT",(null==t?void 0:t.size.y)??0);return t&&t.isUIElement?Q.createElement(e5,{node:t,key:e.guid,dataTestId:"devHandoffSizePill",centered:!0,bottom:!0},Q.createElement("div",{className:"dev_handoff_canvas_pill--sizeInfo--pKiuc text--fontPos11--2LvXf text--_fontBase--QdLsd"},Q.createElement("span",{className:e6},Q.createElement(eO.Tx,{id:"fullscreen.properties_panel.transform_panel.w"})),Q.createElement("span",null,t.horizontalSizeMode),Q.createElement("span",{className:e7,"data-testid":"canvasPillWidth"},n),Q.createElement("span",null,a&&Q.createElement(eM.B,{svg:e8.A})),Q.createElement("span",{className:e6},Q.createElement(eO.Tx,{id:"fullscreen.properties_panel.transform_panel.h"})),Q.createElement("span",null,t.verticalSizeMode),Q.createElement("span",{className:e7,"data-testid":"canvasPillHeight"},r),Q.createElement("span",null,l&&Q.createElement(eM.B,{svg:e8.A})))):null}function tl(){let{hoveredNode:e,selection:t}=(0,ep.R)(e=>{let t=Object.keys(e.mirror.sceneGraphSelection)[0],n=e.mirror.appModel.hoveredNode;return{hoveredNode:n===eV.Hr?null:n,selection:t===eV.Hr?null:t}}),[n,a]=Q.useState(!1),r=Q.useCallback(e=>{e.altKey!==n&&a(e.altKey)},[n]);return(Q.useEffect(()=>(document.addEventListener("pointermove",r),document.addEventListener("keyup",r),document.addEventListener("keydown",r),()=>{document.removeEventListener("pointermove",r),document.removeEventListener("keyup",r),document.removeEventListener("keydown",r)})),n)?null:Q.createElement(Q.Fragment,null,t&&e===t&&Q.createElement(tr,{guid:t}),e&&Q.createElement(tt,{guid:e}))}var ti=n(165247),to=n(333229),ts=n(868879),tc=n(764019);let td="dev_handoff_seen_config_wizard",tu=(0,tc.Fu)(td);var tm=n(797829),tp=n(287243),t_=n(669234),tf=n(533965),th=n(721401),tg=n(254661),tE=n(194031),tv=n(949322),ty=n(933606),tb=n(320866),tC=n(821721),tw=n(959875),tT=n(43594),tx=n(22583),tN=n(742900),tk=n(513378),tS=n(905618),tI=n(146935);let tA="paywall_redesign_blocking_modal--title--4gS3G text--fontPos20--Bcz97 text--_fontBase--QdLsd",tP="paywall_redesign_blocking_modal--textContent--BrFtf text--fontPos13--xW8hS text--_fontBase--QdLsd",tO="paywall_redesign_blocking_modal--buttonLabel--qYvux text--fontPos13--xW8hS text--_fontBase--QdLsd",tL="paywall_redesign_blocking_modal--upsellListItem--27Su- text--fontPos13--xW8hS text--_fontBase--QdLsd";function tM(){let e=(0,tb.Av)(),t=tN.qo.instance.getCurrentPage(),n=(null==t?void 0:t.backgroundColor)?(0,ty.YU)({...t.backgroundColor,a:.9}):"var(--color-modalbackdrop)";return Q.createElement(Q.Fragment,null,Q.createElement("div",{className:tw.cx.fixed.top0.left0.right0.bottom0.wFull.hFull.zIndexModal.$,style:tT.sx.add({backgroundColor:"var(--color-modalbackdrop)"}).$}),Q.createElement("div",{className:tw.cx.fixed.bottom0.$,style:tT.sx.add({backgroundColor:n,left:"240px",right:"320px",top:`${e}px`,zIndex:tI.modalZ-1}).$}))}function tD({onScrimClick:e=ey.lQ,imgSrc:t,content:n,modalType:a,primaryButtonLabel:r,primaryButtonOnClick:l,primaryButtonType:i,secondaryButtonLabel:o,secondaryButtonOnClick:s,secondaryButtonType:c}){let d="light"===(0,tx.DP)(),u=(0,tm.bZ)(),m={type:a,text:i,...u},p={type:a,text:c,...u};return Q.createElement(tS.Nb,{size:392,className:tw.cx.bRadius6.cursorDefault.selectNone.$,tintedModalBackground:!1,hide:e,enableEscapeToClose:!1,"data-testid":"dev-mode-paywall-modal"},Q.createElement("div",{className:tw.cx.p8.flex.flexColumn.gap24.$},Q.createElement("div",{className:tw.cx.h150.bRadius4.overflowHidden.if(d,tw.cx.b1.colorBorder).$},Q.createElement(tk.J,{src:t,alt:"",width:328})),Q.createElement("div",{className:tw.cx.flex.flexColumn.gap6.$},n),Q.createElement("div",{className:tw.cx.flex.flexColumn.gap8.$},r&&l&&i&&Q.createElement(tR,{label:r,onClick:l,trackingProperties:m}),o&&s&&c&&Q.createElement(tF,{label:o,onClick:s,trackingProperties:p}))))}function tR({label:e,onClick:t,trackingProperties:n={}}){return Q.createElement(tC.vd,{className:tw.cx.py8.px32.h40.maxWFull.cursorPointer.$,onClick:t,"data-testid":"primary-button",trackingProperties:n},Q.createElement("div",{className:tO,"data-testid":"primary-button-label"},e))}function tF({label:e,onClick:t,trackingProperties:n={}}){return Q.createElement(tC.tM,{className:ea()(tw.cx.py8.px32.h40.maxWFull.cursorPointer.$,"paywall_redesign_blocking_modal--secondaryButtonHover--IjN6A"),style:tT.sx.add({outline:"none"}).$,onClick:t,"data-testid":"secondary-button",trackingProperties:n},Q.createElement("div",{className:tO,"data-testid":"secondary-button-label"},e))}var tB=n(346532),tU=n(119560);let tH="dev_mode_has_seen_trial_success_modal",tV=(0,tc.Fu)(tH);function tG(){var e;let t=(0,tm.Yr)()!==tm.QH.CONTROL,n=(0,$.d4)(e=>e.userTeamFlags),a=(0,ef.md)(tV),r=(0,t_.q5)(),l=null==r?void 0:r.teamId,i=null==r?void 0:r.parentOrgId,o=(0,$.wA)(),s=l&&!i?null==(e=null==n?void 0:n[l])?void 0:e[tH]:null==a?void 0:a.data,c=(0,Q.useCallback)(e=>{t&&!!s!==e&&(l&&!i?o(tU.bE({all_team_flags:[{team_id:l,flags:{[tH]:e}}]})):o(tB.b({[tH]:e})))},[o,s,t,i,l]);return[s,c]}function tK(){let e=(0,tm.Yr)()!==tm.QH.CONTROL,t=(0,ef.md)(tu),[n,a]=tG(),r=(0,t_.tS)()??"",l=(0,eh.Rs)(tf.oBY,{key:r}),i=(0,tm.bZ)(),{isShowing:o,show:s,complete:c}=(0,tp.e)({overlay:tv.VjY,priority:th.N.HIGH_PRIORITY_MODAL},[t,l]);return(0,ts.h)(()=>{e&&!n&&s({canShow:(e,t)=>{var n;return!!e&&!!(null==(n=null==t?void 0:t.file)?void 0:n.hasPermission)}})}),(0,Q.useEffect)(()=>{o&&a(!0)},[o,a]),Q.createElement(tg.h,{modalType:tE.q3.WELCOME,isShowing:o,onClickPrimaryCta:ey.lQ,onClose:c,onManualDismiss:c,trackingContextName:"Dev Mode Trial Start Modal",trackingProperties:i,trackingEnabled:(null==i?void 0:i.gracePeriod)!==void 0,element:function({dismissModal:e}){return Q.createElement(tD,{imgSrc:"https://static.figma.com/uploads/5e9bfbdf1ce7c02544ebc1a89e0245c520a8c796",content:Q.createElement(Q.Fragment,null,Q.createElement("div",{className:tA},Q.createElement(eO.Tx,{id:"dev_handoff.paywall.success_modal.grace_period.title"})),Q.createElement("div",{className:tP},Q.createElement(eO.Tx,{id:"dev_handoff.configuration_wizard.welcome_step.description_grace_period",numDays:to.Hw9}))),modalType:"trial start modal",primaryButtonLabel:Q.createElement(eO.Tx,{id:"dev_handoff.paywall.success_modal.grace_period.button"}),primaryButtonOnClick:e,primaryButtonType:"get started"})}})}var tW=n(351580),tz=n(617067),tj=n(518867);function tY({doReport:e}){let t=(0,ef.md)(tj.H),{commentsActive:n,isNodeSelected:a}=(0,ep.R)(e=>({commentsActive:e.mirror.appModel.currentTool===tz.ec.tool,isNodeSelected:Object.keys(e.mirror.sceneGraphSelection).length>0})),r=(0,eF.VW)();(0,ts.h)(()=>{let t=tW.sn.tryStop("switch_to_inspect_mode.right_panel_tti");e&&t&&(0,er.sx)("switch_to_inspect_mode.right_panel_tti",{elapsedMs:t,isNodeSelected:a},{forwardToDatadog:!0}),tW.sn.tryStop("dev_handoff.select_node_tti")}),Q.useEffect(()=>{r&&!n&&requestAnimationFrame(()=>{let n=tW.sn.tryStop("dev_handoff.select_node_tti");e&&n&&(0,er.sx)("dev_handoff.select_node_tti",{elapsedMs:n,isTopLevelFrame:r.isTopLevelFrame(),activeTab:t},{forwardToDatadog:!0})})},[r,t,n,e])}var tZ=n(917186),tX=n(170716),tq=n(704886),tJ=n(977257);let tQ=Q.forwardRef(({children:e},t)=>{let n=(0,eG.J2)((0,eH.UK)().renderRulers);return Q.createElement("div",{ref:t,className:ea()("left_panel_positioner--leftPanelPositioner--8Yehe",{"left_panel_positioner--withShowingRulers--xB1lD":n})},e)});var t$=n(949207);let t0=[0,1,2,3,4];function t1(){return Q.createElement(tQ,null,Q.createElement(tJ.$B,{width:240,disableResizing:!0},Q.createElement("div",{className:ea()(eK.Dm,"paywall_redesign_left_panel--nodesPanel--qHo6x dev_handoff_nodes_panel--nodesPanel--4Pea0"),"data-testid":"devHandoffLimitedLeftPanel"},Q.createElement("div",{className:"paywall_redesign_left_panel--panelTitle--ya0HF dev_handoff_nodes_panel--panelTitle--wcEcM text--fontPos11--2LvXf text--_fontBase--QdLsd"},Q.createElement(eO.Tx,{id:"dev_handoff.tag.ready_for_development"})),Q.createElement("div",{className:"paywall_redesign_left_panel--loadingParentRow--GdLwv"},Q.createElement(eM.B,{className:"paywall_redesign_left_panel--chevron--vDc15",svg:t$.A}),Q.createElement(tq.Wi,{animationType:tq.JR.NO_SHIMMER,primary:!0})),t0.map(e=>Q.createElement("div",{className:"paywall_redesign_left_panel--loadingThumbnailRow--VH8Hr",key:e},Q.createElement(tq.Qp,{animationType:tq.JR.NO_SHIMMER,className:"paywall_redesign_left_panel--loadingThumbnail--XfODE"}),Q.createElement("div",{className:"paywall_redesign_left_panel--loadingThumbnailTexts--iBq47"},Q.createElement(tq.Wi,{animationType:tq.JR.NO_SHIMMER,primary:!0}),Q.createElement(tq.Wi,{animationType:tq.JR.NO_SHIMMER,primary:!0})))),Q.createElement("div",{className:"paywall_redesign_left_panel--transparentPanelScrim--trKi0"}))))}var t2=n(548891),t5=n(491059),t4=n(707993),t3=n(164517),t6=n(165077),t7=n(404247),t8=n(140331);let t9=null;function ne(){let[e,t]=Q.useState(0),n=(0,t5.U)(),a=(0,t8.U)("blocking_modal"),r=(0,tm.bZ)(),l=(0,t4.BC)(),i=(0,tm.lb)(),o=(0,ef.md)(t7.R),s=(0,tm.Yr)()===tm.QH.ACTION_ORIENTED;Q.useEffect(()=>()=>{t9&&(clearTimeout(t9),t9=null)},[]);let c=Q.useCallback(()=>{n("Dev Mode Paywall clicked",{type:"Blocking Modal scrim",...r});let l=e+1;l>=5?(n("Dev Mode Paywall clicked",{type:"Blocking Modal scrim redirection",...r}),a("design")):t(l),t9||(t9=setTimeout(()=>{t(0),t9=null},1500))},[n,r,e,a]),d=Q.createElement(Q.Fragment,null,Q.createElement("div",{className:tA},o?Q.createElement(eO.Tx,{id:"dev_handoff.paywall.blocking_modal.title.direct_link"}):i?Q.createElement(eO.Tx,{id:"dev_handoff.paywall.blocking_modal.title.starter"}):Q.createElement(eO.Tx,{id:"dev_handoff.paywall.blocking_modal.title"})),Q.createElement("ul",null,Q.createElement("li",{className:tL},Q.createElement(eO.Tx,{id:"dev_handoff.paywall.blocking_modal.content.code"})),Q.createElement("li",{className:tL},Q.createElement(eO.Tx,{id:"dev_handoff.paywall.blocking_modal.content.inspection"})),Q.createElement("li",{className:tL},Q.createElement(eO.Tx,{id:"dev_handoff.paywall.blocking_modal.content.plugins"})))),u=Q.useCallback(()=>{l.hidden||l.onClick(t3.i$.BlockingModal)},[l]),m=Q.useCallback(()=>{a("design")},[a]);return Q.createElement(t6.fu,{name:"Blocking modal",properties:r,enabled:(null==r?void 0:r.gracePeriod)!==void 0},Q.createElement(tD,{onScrimClick:c,imgSrc:"https://static.figma.com/uploads/6d5e9cb0e9ec7fd5dd58425c5527dc8a78143a19",content:d,modalType:"blocking modal",primaryButtonLabel:l.hidden?void 0:l.label,primaryButtonOnClick:u,primaryButtonType:"upgrade",secondaryButtonLabel:o&&s?Q.createElement(eO.Tx,{id:"dev_handoff.paywall.blocking_modal.button.view_in_design"}):o?Q.createElement(eO.Tx,{id:"dev_handoff.paywall.blocking_modal.button.not_now"}):Q.createElement(eO.Tx,{id:"dev_handoff.paywall.blocking_modal.button.back_to_design"}),secondaryButtonOnClick:m,secondaryButtonType:"back to design"}))}function nt(){var e,t,n,a,r;let l=(0,t8.U)("blocking_modal"),i=(0,tm.bZ)(),o=(0,t_.tS)()??"",s=(0,eh.Rs)(tf.D2i,{key:o}),c=(0,eh.Rs)(tf.oBY,{key:o}),d=(null==(e=s.data)?void 0:e.file.status)!=="error"&&(null==(n=null==(t=s.data)?void 0:t.file.data)?void 0:n.hasPermission)&&(null==(r=null==(a=c.data)?void 0:a.file)?void 0:r.hasPermission)===!1,u=Q.createElement(Q.Fragment,null,Q.createElement("div",{className:tA},d?(0,eO.t)("dev_handoff.paywall.pending_modal.grace_period.title",{numDays:to.Hw9}):(0,eO.t)("dev_handoff.paywall.pending_modal.no_grace_period.title")),Q.createElement("div",{className:tP},d?(0,eO.t)("dev_handoff.paywall.pending_modal.grace_period.description"):(0,eO.t)("dev_handoff.paywall.pending_modal.no_grace_period.description"))),m=(0,Q.useCallback)(()=>{l("design")},[l]);return Q.createElement(t6.fu,{name:"Pending modal",properties:i,enabled:(null==i?void 0:i.gracePeriod)!==void 0},Q.createElement(tD,{onScrimClick:ey.lQ,imgSrc:"https://static.figma.com/uploads/4d633d6262a8b5f838196a652d687dd1c9123fda",content:u,modalType:"request pending modal",primaryButtonLabel:Q.createElement(eO.Tx,{id:"dev_handoff.paywall.blocking_modal.button.back_to_design"}),primaryButtonOnClick:m,primaryButtonType:"back to design"}))}function nn(){let e=(0,t8.U)("blocking_modal"),t=(0,tm.bZ)(),n=(0,Q.useCallback)(()=>{e("design")},[e]);return Q.createElement(t6.fu,{name:"Request sent modal",properties:t},Q.createElement(tD,{imgSrc:"https://static.figma.com/uploads/9a55aebf20fd5e927f609cc0e256f6e782b20d78",content:Q.createElement(Q.Fragment,null,Q.createElement("div",{className:tA},Q.createElement(eO.Tx,{id:"dev_handoff.paywall.success_modal.no_grace_period.title"})),Q.createElement("div",{className:tP},Q.createElement(eO.Tx,{id:"dev_handoff.paywall.success_modal.no_grace_period.description"}))),modalType:"request sent modal",primaryButtonLabel:Q.createElement(eO.Tx,{id:"dev_handoff.paywall.blocking_modal.button.back_to_design"}),primaryButtonOnClick:n,primaryButtonType:"back to design"}))}function na(){var e,t,n;!function(){var e,t,n,a,r,l;let[i,o]=(0,ef.fp)(tX.qI),s=(0,tm.Yr)()!==tm.QH.CONTROL,c=(0,t_.tS)()??"",d=(0,eh.Rs)(tf.Fol,{key:c}),u=(0,eh.Rs)(tf.Pns,{key:c}),m=(null==(e=d.data)?void 0:e.file.status)!=="error"&&!!(null==(n=null==(t=d.data)?void 0:t.file.data)?void 0:n.hasPermission),p="loading"===d.status,_=(null==(a=u.data)?void 0:a.file.status)!=="error"&&!!(null==(l=null==(r=u.data)?void 0:r.file.data)?void 0:l.hasPermission),f=(0,Q.useRef)(!1);Q.useEffect(()=>{if(!s)return;m&&!f.current&&(f.current=!0);let e=f.current;!p&&e&&!m&&_&&i===tX.cI.REQUESTED&&(o(tX.cI.DEFAULT),f.current=!1)},[i,_,m,p,s,o])}();let a=(0,ef.md)(tX.qI),r=(0,t_.tS)()??"",l=(0,tm.Yr)()!==tm.QH.CONTROL,i=(0,eh.Rs)(tf.D2i,{key:r}),o=(0,eh.Rs)(tf.Fol,{key:r}),s=l&&(null==(e=o.data)?void 0:e.file.status)!=="error"&&(null==(n=null==(t=o.data)?void 0:t.file.data)?void 0:n.hasPermission);return l&&("loading"===i.status||"loading"===o.status)?Q.createElement(nr,null):l&&a===tX.cI.REQUESTED&&s?Q.createElement(nn,null):l&&a===tX.cI.DEFAULT&&s?Q.createElement(nt,null):a===tX.cI.DEFAULT?Q.createElement(ne,null):null}function nr(){let e=tN.qo.instance.getCurrentPage(),t=(0,ty.HD)((null==e?void 0:e.backgroundColor)??"");return Q.createElement("div",{className:t?"paywall_redesign_blocking_modal--spinnerOnDarkCanvas--H713o paywall_redesign_blocking_modal--spinner--gT54g":"paywall_redesign_blocking_modal--spinnerOnLightCanvas--O4yHJ paywall_redesign_blocking_modal--spinner--gT54g"},Q.createElement(t2.kt,{size:"large"}))}function nl(){return Q.createElement(Q.Fragment,null,Q.createElement(tM,null),Q.createElement(na,null))}function ni(e){return Q.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},Q.createElement("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M10 6h4v1h-4V6ZM9 6a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1 2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H9a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2Zm0 1a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V8a1 1 0 0 0-1-1 1 1 0 0 1-1 1h-4a1 1 0 0 1-1-1Zm1 3.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 0 1h-3a.5.5 0 0 1-.5-.5Zm.5 2.5a.5.5 0 0 0 0 1h3a.5.5 0 0 0 0-1h-3Z",clipRule:"evenodd"}))}var no=n(911120),ns=n(828675),nc=n(304913),nd=n(77153),nu=n(995225),nm=n(356932),np=n(380620),n_=n(921436),nf=n(38580),nh=n(829826),ng=n(20865);let nE={trackWidth:0,trackLeft:0,scrollWidth:0,scrollLeft:0,canScroll:!0,scrollbarLeft:0,scrollbarWidth:0,startDragX:void 0,startDragScrollLeft:void 0},nv=(e,t)=>{let n={...e};if(n.trackWidth=t.clientWidth,n.scrollWidth=t.scrollWidth,n.trackLeft=t.getBoundingClientRect().left,n.scrollLeft=t.scrollLeft,n.scrollbarWidth=Math.max(n.trackWidth*(n.trackWidth/n.scrollWidth),42),n.canScroll=n.scrollWidth>n.trackWidth,n.canScroll){let e=n.scrollWidth-n.trackWidth,t=n.trackWidth-n.scrollbarWidth;n.scrollbarLeft=n.scrollLeft/e*t}return(0,$.bN)(e,n)?e:n};var ny=((d=ny||{})[d.DOM_DELTA_PIXEL=0]="DOM_DELTA_PIXEL",d[d.DOM_DELTA_LINE=1]="DOM_DELTA_LINE",d[d.DOM_DELTA_PAGE=2]="DOM_DELTA_PAGE",d);let nb=e=>{let t=0;return 0===e.deltaMode?t=e.deltaX:1===e.deltaMode?t=10*e.deltaX:2===e.deltaMode&&(t=100*e.deltaX),t},nC=(e,t,n,a)=>{let{startDragX:r,startDragScrollLeft:l,scrollWidth:i,trackWidth:o,trackLeft:s}=n;if(void 0!==r&&void 0!==l){let n=e-r;(n>0&&e>=s||n<0&&e<=s+o)&&(t.scrollLeft=l+n/o*i,a())}},nw=({scrollContainerRef:e,clipContainerRef:t,onCanScrollChanged:n,childRef:a})=>{let[r,l]=Q.useState(nE),i=Q.useRef(),[o,s]=Q.useState(null),c=void 0!==r.startDragX&&void 0!==r.startDragScrollLeft,d=Q.useCallback(()=>{let t=e.current;t&&l(e=>nv(e,t))},[e,l]);Q.useLayoutEffect(()=>{i.current!==r.canScroll&&(null==n||n(r.canScroll)),i.current=r.canScroll},[r.canScroll,n]);let u=Q.useCallback(t=>{let n=t.clientX,a=e.current;a&&(ec.Ay.safari?null===o&&s(requestAnimationFrame(()=>{nC(n,a,r,d),s(null)})):nC(n,a,r,d),d())},[d,o,e,r]),m=Q.useCallback(t=>{e.current&&(e.current.scrollLeft+=nb(t),d())},[e,d]),p=Q.useCallback(t=>{if(!e.current)return;t.stopPropagation(),t.preventDefault();let{clientX:n}=t,{trackLeft:a,scrollbarWidth:i,trackWidth:o,scrollWidth:s,scrollbarLeft:c}=r,u=n-a;u>=c&&u<=c+i||(e.current.scrollLeft=Math.min(Math.max(0,u-i/2),o)/o*s,d()),l(e=>({...e,startDragX:n,startDragScrollLeft:e.scrollLeft}))},[e,r,l,d]),_=Q.useCallback(()=>{l(e=>({...e,startDragScrollLeft:void 0,startDragX:void 0}))},[]);return(0,ng.w)(t,d),(0,ng.w)(a,d),Q.useEffect(()=>{if(c)return document.addEventListener("mousemove",u),()=>document.removeEventListener("mousemove",u)},[u,c]),Q.useEffect(()=>{if(c)return document.addEventListener("mouseup",_),()=>document.removeEventListener("mouseup",_)},[_,c]),Q.useLayoutEffect(d,[d]),{reconcileStateWithDom:d,onTrackWheel:m,onTrackMouseDown:p,scrollState:r,isDragging:c}},nT=e=>{if(!e.canScroll)return"none";let t=e.scrollLeft,n=e.trackWidth-e.scrollbarWidth-e.scrollLeft+25,a=`rgba(0, 0, 0, ${1-Math.min(t/50,1)})`,r="rgba(0, 0, 0, 1)",l=`rgba(0, 0, 0, ${1-Math.min(n/50,1)})`,i=[`${a} 0%`,`${a} 5px`,`${r} 50px`,`${r} calc(100% - 50px)`,`${l} calc(100% - 5px)`,`${l} 100%`];return`linear-gradient(to right, ${i.join(", ")})`};function nx({className:e,scrollBarAlways:t,fadeEdges:n,children:a,onCanScrollChanged:r,childRef:l}){let i=Q.useRef(null),o=Q.useRef(null),{reconcileStateWithDom:s,onTrackWheel:c,onTrackMouseDown:d,scrollState:u,isDragging:m}=nw({scrollContainerRef:i,clipContainerRef:o,childRef:l,onCanScrollChanged:r}),p={transform:`translate3d(${u.scrollbarLeft}px, 0px, 0)`,width:u.scrollbarWidth};return Q.createElement("div",{ref:o,className:ea()("horizontal_scroll_container--clipContainer--5E1FP",e)},u.canScroll&&Q.createElement("div",{className:m?"horizontal_scroll_container--trackDragging---EmpF horizontal_scroll_container--track--NB72q":"horizontal_scroll_container--track--NB72q",onMouseDown:d,onWheel:c},Q.createElement("div",{className:t?"horizontal_scroll_container--scrollBarAlways---9ddQ horizontal_scroll_container--scrollBar--2cVcj":"horizontal_scroll_container--scrollBar--2cVcj",style:p})),Q.createElement("div",{ref:i,className:"horizontal_scroll_container--scrollContainer--IkUqe",onScroll:()=>s(),style:{WebkitMaskImage:n?nT(u):void 0}},a))}var nN=n(166922),nk=n(162122);let nS=/_INTERNAL_INSTANCE_KEY_[0-9]+_/g;var nI=n(834537),nA=n(474724),nP=n(983245),nO=n(579038),nL=n(207668),nM=n(455399),nD=n(699077);function nR({hint:e,inCodeWell:t,hidden:n}){return Q.createElement(nM.K0,{svg:e8.A,"data-tooltip-type":nO.Ib.TEXT,"data-tooltip":e,"data-tooltip-show-immediately":!0,"data-tooltip-offset-x":t?-5:0,className:ea()({"code_hints--hintButton--Zdf0R":!0,"code_hints--codeLineHintButton--8Gasg":t,"code_hints--hidden\xa0--OV345":n})})}var nF=n(635321),nB=n(965830);let nU=/Color\((0x[0-9a-fA-F]{8})\)/gi,nH=/(Color\(red: (\d*\.?\d*), green: (\d*\.?\d*), blue: (\d*\.?\d*)\)(\.opacity\((\d*\.?\d*)\))?)/gi,nV=/(#([0-9a-fA-F]{6}|[0-9a-fA-F]{3})|rgba?\(\d+,\s*\d+,\s*\d+,\s*\d+(?:\.\d+)?\)|color\(\s*(srgb|srgb-linear|display-p3|a98-rgb|prophoto-rgb|rec2020|xyz|xyz-d50|xyz-d65)\s+((\d+|\d*\.\d+|%|none)\s*){3}(\/\s*(\d+|\d*\.\d+|%|none)\s*)?\))/gi;var nG=n(565358);let nK="code_panel--codeWell--9P6tu",nW="code_panel--codeWellWithLeftGutter--Tp2Pe",nz="code_panel--connected--RdXFD",nj="code_panel--manual--h-0IX";var nY=n(522157);let nZ=(0,nf.eU)(!1),nX=(e,t={})=>(0,n_.WI)(e.map(e=>e.lines.length>0?(0,nD.kt)(e.lines,!0):null)).join("\n\n").replace(nS,e=>{let n=t[e];return n?`/* ${n.name} */`:"/* unknown instance */"});function nq(e){return Q.createElement(np.E,{...e,className:ea()("code_panel--buttonReset--dOY7G","code_panel--copyButton--u-358"),as:"button"})}function nJ(e){var t;let{code:n,section:a,hasCodeDiff:r,collapseLongSections:l=!0,bottomPadding:i=!1,copyActionEnabled:o=!0,copyAllActionEnabled:s=!0,hideHints:c=!1,recordingKey:d,additionalHeaderActions:u=null,footerActions:m=null,type:p="default"}=e;a.collapseAfterIndex||(a={...a,collapseAfterIndex:15});let _=(0,$.d4)(e=>Object.keys(e.mirror.sceneGraphSelection)[0]),f=(0,$.wA)(),h=(t=a,Q.useMemo(()=>(function(e,t,n={}){let a={},r=function(e){switch(e){case"kotlin":return nU;case"swift":return nH;default:return nV}}(t),l=function(e){switch(e){case"kotlin":return e=>e.replace(/0x([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})/,"#$2$3$4$1");case"swift":let t=e=>Math.round(255*e).toString(16).padStart(2,"0");return e=>e.replace(nH,(e,...n)=>{let[a,r,l,i,o,s=1]=n;return`#${t(r)}${t(l)}${t(i)}${t(s)}`});default:return e=>e}}(t),i=0,o=(0,nD.kt)(e).replace(r,(e,n)=>e?(a[`${i}`]={highlightedColor:(0,nF.g)(t,n),cssColor:l(n)},e.replace(n,`INTERNALCHITID${i++}_`)):""),s=(0,nF.g)(t,o);return(0,nB.p)(s).split("\n").map((t,r)=>{let l=t.replace(/INTERNALCHITID([0-9]*)_/g,(e,t)=>{let n=a[t];return n?`<span class="chit-container"><span class="token chit" style="background-color: ${n.cssColor}"></span>${n.highlightedColor}</span>`:""}).replace(nS,e=>{if(!e||!Object.keys(n).includes(e))return"<span>INSTANCE_NOT_FOUND</span>";let{name:t,id:a}=n[e];return`<span class="token instance-pill" data-id="${a}">${t}</span>`});return{...e[r],code:l}})})(t.lines,t.language,t.instances),[t])),[g,E]=Q.useState(l),[v,y]=Q.useState(!1),[b,C]=(0,ef.fp)(nZ),w=s&&b;Q.useEffect(()=>{E(l)},[_,l]);let T=Q.useMemo(()=>g&&a.collapseAfterIndex?h.slice(0,a.collapseAfterIndex):h,[h,a.collapseAfterIndex,g]),x=a.collapseAfterIndex?h.length-a.collapseAfterIndex:0,N=e.codeToCopy||n,k=e.sectionToCopy||a,S=Q.useCallback(()=>{if(!w)return nX([k],k.instances);{let e=N.reduce((e,t)=>Object.assign(e,t.instances),{});return nX(N,e)}},[N,k,w]),I=Q.useCallback(()=>{let e=S();e&&f(nA.lW({stringToCopy:e,ignoreLineBreaks:!1}))},[f,S]),A=nh.rf(nh.Pt(d,"copy"),"click",I),P=Q.useCallback(()=>{var e;f(nA.lW({stringToCopy:(null==(e=window.getSelection())?void 0:e.toString())||S(),ignoreLineBreaks:!1}))},[f,S]),O=Q.useCallback(e=>{e.stopPropagation(),e.preventDefault();let{clientX:t,clientY:n}=e;f(nP.j7({type:eK.Sl,data:{clientX:t,clientY:n,onCopyText:P}}))},[P,f]),L=Q.useCallback(e=>{s&&C(e.shiftKey),y(!0)},[C,s]),M=nh.rf(nh.Pt(d,"copy"),"mouseenter",L),D=Q.useCallback(e=>{C(!1),y(!1)},[C]),R=Q.useCallback(e=>{C(v&&s&&e.shiftKey)},[v,C,s]);Q.useEffect(()=>(document.addEventListener("keydown",R),document.addEventListener("keyup",R),()=>{document.removeEventListener("keydown",R),document.removeEventListener("keyup",R)}),[R]);let F=function(e){switch(e){case"Modifier":return(0,eO.t)("inspect_panel.code.modifier");case"Code":return(0,eO.t)("inspect_panel.code.code");case"Style":return(0,eO.t)("inspect_panel.code.style");case"Variables":return(0,eO.t)("inspect_panel.code.variables");case"Layout":return(0,eO.t)("inspect_panel.properties.layout");case"Position":return(0,eO.t)("inspect_panel.code.position");case"Other":return(0,eO.t)("inspect_panel.code.other");case"Typography":return(0,eO.t)("inspect_panel.typography.title");default:return e}}(a.name),B=v||w;return Q.createElement(nL.VZ,{hideHeader:!0,padding:i?nL.UZ.DEFAULT:nL.UZ.NONE,noBorder:!0,recordingKey:`code:${a.name}`},Q.createElement(n2,{type:p,header:Q.createElement(n0,{type:p,muted:a.isTextSegment,actions:Q.createElement(Q.Fragment,null,u||Q.createElement(nk.M,null),o&&Q.createElement(nq,{onMouseEnter:M,onMouseLeave:D,onClick:A,"data-tooltip-type":nO.Ib.TEXT,"data-tooltip":s?(0,eO.t)("inspect_panel.code.copy_all_shift"):"","aria-label":(0,eO.t)("inspect_panel.copy")},Q.createElement(nd.U,{svg:nY.A},Q.createElement(ni,null)))),title:F}),content:Q.createElement(n$,{code:a,lines:T,hideHints:c||B,hasCodeDiff:r,isCopyHighlightActive:B,onInstancePillClick:e.onInstancePillClick}),shouldShowMore:g&&x>0,showMoreLinesCount:x,onShowMore:()=>E(!1),copyHoverClassName:o&&B?"code_panel--codeWellSelected--tyhKE":void 0,leftGutter:r?function(e,t=!1){return Q.createElement("div",{className:ea()("code_panel--diffIndicatorColumn--I8lZt code_panel--diffIndicatorBase--F3GaS",{"code_panel--hidden--tLzAD":t})},e.map((e,t)=>Q.createElement("div",{className:ea()({"code_panel--diffIndicator--yVnUR code_panel--diffIndicatorBase--F3GaS":!0,"code_panel--diffIndicatorAdded--LZbgl code_panel--diffIndicator--yVnUR code_panel--diffIndicatorBase--F3GaS":e.diff===nD.j5.ADDED,"code_panel--diffIndicatorRemoved--y5BTV code_panel--diffIndicator--yVnUR code_panel--diffIndicatorBase--F3GaS":e.diff===nD.j5.REMOVED}),key:t},e.diff===nD.j5.ADDED?"+":e.diff===nD.j5.REMOVED?"-":null)))}(T,B):nQ(T),onContextMenu:O,footer:m?Q.createElement(n1,{type:p},m):void 0}))}function nQ(e){return Q.createElement("div",{className:"code_panel--lineNumbersColumn--MYlJR"},e.map((e,t)=>Q.createElement("div",{className:"code_panel--lineNumber--qBF2J code_panels_shared--code--VPQ05",key:t},t+1)))}function n$({code:e,lines:t,hideHints:n,hasCodeDiff:a,isCopyHighlightActive:r=!1,onInstancePillClick:l}){let i=Q.useCallback(e=>{var t;let n;let a=e.target;a.classList.contains("instance-pill")?n=a:(null==(t=a.parentElement)?void 0:t.classList.contains("instance-pill"))&&(n=a.parentElement),n&&(null==l||l(n.dataset.id||""))},[l]),o=({index:l})=>{var o;let s=t[l],c=8*(0,nD.Gj)(s).length+16+8,d=Q.createElement("span",{style:{display:"inline-block",paddingLeft:c,paddingRight:8,textIndent:-16,flexGrow:1},key:"code",dangerouslySetInnerHTML:{__html:s.code+"\n"},"data-testid":`${e.name}${l}`,role:"none",onClick:i}),u=s.hint,m=void 0!==u&&u.type===nI.bv.Tooltip?Q.createElement(nR,{hint:function(e){switch(e.id){case nI.eo.NoStyleForColor:return(0,eO.t)("dev_handoff.code.hints.color_missing_style");case nI.eo.VariableNotResolved:return(0,eO.t)("dev_handoff.code.hints.variable_not_resolved");case nI.eo.VariableSuggested:return(0,eO.t)("dev_handoff.variables.inferred_value",{value:e.value});case nI.eo.MultipleVariables:return(0,eO.t)("dev_handoff.code.hints.multiple_variables",{value:e.value});case nI.eo.AbsolutePosition:return(0,eO.t)("dev_handoff.code.hints.absolute_position",{name:e.name});case nI.eo.BordersDontTakeUpSpace:return(0,eO.t)("dev_handoff.code.hints.borders_dont_take_up_space");case nI.eo.SinglePaint:return(0,eO.t)("dev_handoff.code.hints.single_paint");case nI.eo.UnsupportedPaint:return(0,eO.t)("dev_handoff.code.hints.unsupported_paint");case nI.eo.UnsupportedGradientPaint:return(0,eO.t)("dev_handoff.code.hints.unsupported_gradient_paint");case nI.eo.LeadingTrim:return(0,eO.t)("dev_handoff.code.hints.leading_trim");case nI.eo.BackgroundBlendModePlusLighterDarker:return(0,eO.t)("dev_handoff.code.hints.background_blend_mode_plus_lighter_darker",{value:e.value});case nI.eo.PlusDarker:return(0,eO.t)("dev_handoff.code.hints.plus_darker");case nI.eo.SwiftUISeparateBorderWidth:return(0,eO.t)("dev_handoff.code.hints.swift_ui_separate_border_width");case nI.eo.SwiftUIBlurNoSpread:return(0,eO.t)("dev_handoff.code.hints.swift_ui_blur_no_spread");case nI.eo.SwiftUIOnlySingleFillForShapes:return(0,eO.t)("dev_handoff.code.hints.swift_ui_only_single_fill_for_shapes");case nI.eo.SwiftUISeparateCornerRadius:return(0,eO.t)("dev_handoff.code.hints.swift_ui_separate_corner_radius");case nI.eo.SwiftUISpacersForSpaceBetween:return(0,eO.t)("dev_handoff.code.hints.swift_ui_spacers_for_space_between");case nI.eo.ComposeSeparateBorderWidth:return(0,eO.t)("dev_handoff.code.hints.compose_separate_border_width");case nI.eo.ComposeShadowIncompatibility:return(0,eO.t)("dev_handoff.code.hints.compose_shadow_incompatibility");case nI.eo.ComposeBlurTip:return(0,eO.t)("dev_handoff.code.hints.compose_blur_tip");case nI.eo.DisplayP3Fallback:return(0,eO.t)("dev_handoff.code.hints.display_p3_fallback")}}(u),inCodeWell:!0,hidden:n}):null,p=null==(o=e.lines[l])?void 0:o.diff;return Q.createElement("div",{key:l,className:ea()({"code_panel--line--bGKOg":!0,"code_panel--added--VL9y5":p===nD.j5.ADDED&&!r,"code_panel--removed--MFSlT":p===nD.j5.REMOVED&&!r,"code_panel--nonDiffLine--MnQtc":a&&p!==nD.j5.ADDED&&p!==nD.j5.REMOVED&&!r,"code_panel--disabled--uXTT4":a&&p===nD.j5.REMOVED&&r})},d,m)};return Q.createElement("code",{className:ea()("code_panel--generatedCode--XGoAV code_panels_shared--code--VPQ05",nG.y),"data-lang":e.language,style:{minWidth:"100%",whiteSpace:"normal"}},t.map((e,t)=>o({index:t})))}function n0({title:e,muted:t,actions:n,type:a}){return Q.createElement("div",{className:"code_panel--codePanelHeader--lCUOK"},Q.createElement("div",{className:ea()({"code_panel--codePanelHeaderWrapper--yzBFb":!0,[nz]:"connected"===a,[nj]:"manual"===a})},Q.createElement(nM.xw,{className:t?"code_panel--mutedCodePanelTitle--F27k- text--fontPos11--2LvXf text--_fontBase--QdLsd":"code_panel--codePanelTitle--00tOe text--fontPos11--2LvXf text--_fontBase--QdLsd","data-testid":"devHandoffFocusPanelTitle"},e),Q.createElement("div",{className:"code_panel--codePanelActions--aWYEs text--fontPos11--2LvXf text--_fontBase--QdLsd"},n)))}function n1({children:e,type:t}){return Q.createElement("div",{className:"code_panel--codePanelFooter--NsRyh"},Q.createElement("div",{className:ea()({"code_panel--codePanelFooterWrapper--hHhIS":!0,[nz]:"connected"===t,[nj]:"manual"===t})},e))}function n2({header:e,content:t,leftGutter:n,footer:a,type:r,shouldShowMore:l,showMoreLinesCount:i,onShowMore:o,onContextMenu:s,copyHoverClassName:c}){let[d,u]=Q.useState(null),m=d&&d.value?"code_panel--codeSectionWithScrollBar--TQtKZ code_panel--codeSection--Mb2CO":"code_panel--codeSection--Mb2CO",p=Q.useCallback(e=>{u({value:e})},[]),_=!!n,f=!!a,h=Q.useRef(null);return Q.createElement("div",{className:ea()("code_panel--codeSectionContainer--1FOYa")},e,Q.createElement("div",{className:ea()(nK,c,{[nW]:_,"code_panel--codeWellWithFooter--VMsGl":f,[nz]:"connected"===r,[nj]:"manual"===r})},_&&n,Q.createElement("div",{className:"code_panel--codeWellContent--OYA-P"},Q.createElement(nx,{onCanScrollChanged:p,className:ea()(m),scrollBarAlways:!0,childRef:h},Q.createElement("div",{onContextMenu:s,style:{width:"fit-content",minWidth:"100%"},ref:h},t)),l&&Q.createElement("div",{className:"code_panel--showMoreContainer--CD0sl"},Q.createElement(nN.d,{label:(0,eO.t)("dev_handoff.code.show_more",{count:i}),onClick:o})))),f&&a)}var n5=n(613064),n4=n(695614),n3=n(960889),n6=n(995902),n7=n(358665);let n8=(0,nf.eU)({});var n9=n(705715),ae=n(947680),at=n(21122),an=n(509952),aa=n(796695),ar=n(785341),al=n(901429),ai=n(527626),ao=n(143551),as=n(541989),ac=n(632347),ad=n(183518),au=n(550438),am=n(231387),ap=n(595682),a_=n(908334),af=n(123751),ah=n(254163),ag=n(419525),aE=n(566046),av=n(186269),ay=n(915745),ab=n(467066),aC=n(468794),aw=n(733992),aT=n(816665),ax=n(945754);let aN="content_panel--textContentSelected--7ms8o",ak={format:()=>(0,eO.t)("inspect_panel.copy_as")};function aS(){let{content:e,numSelected:t,numSelectedByType:n}=(0,ep.R)(e=>({content:e.mirror.selectionProperties.nodeText,numSelected:e.mirror.selectionProperties.numSelected,numSelectedByType:e.mirror.selectionProperties.numSelectedByType}));return 1===t&&(null==n?void 0:n.TEXT)===1&&e?Q.createElement(aA,{content:e,contentToCopy:e}):null}function aI(e){let{basisContent:t="",changeContent:n=""}=e,a=Q.useMemo(()=>(0,aC.pR)(t,n).map(e=>{let t=e.added?"content_panel--addedContent--uOvhd":e.removed?"content_panel--deletedContent--9h3wk":"";return Q.createElement("span",{key:e.value,className:t},e.value)}),[t,n]);return Q.createElement(aA,{content:Q.createElement(Q.Fragment,null,a),contentToCopy:n,showVariable:!1})}function aA({content:e,contentToCopy:t,showVariable:n=!0}){let{value:a,eventHandlers:r,isHovered:l}=(0,nL.ZQ)(aN,aN),i=(0,$.wA)(),{Dropdown:o,toggleDropdown:s,dropdownTargetRef:c,isDropdownShown:d}=(0,aw.B)("CONTENT_COPY_DROPDOWN"),u=(0,nL.SV)("inspection_panel_copy_text_variable"),m=(0,e3.oU)("TEXT_DATA",{type:eU.Z_n.STRING,resolvedType:eU.rXF.STRING,value:t}),p=m.variableDisplayName,_=!!p&&n,f=(e,t)=>{i(nA.lW({stringToCopy:e,ignoreLineBreaks:!1})),u({value:e,valueType:t})},h=[{displayText:(0,eO.t)("inspect_panel.copy_variable_name"),callback:()=>{p&&f(p,"name")}},{displayText:(0,eO.t)("inspect_panel.copy_variable_content"),callback:()=>{f(t,"value")}}],g=_?Q.createElement(Q.Fragment,null,Q.createElement(aT.uQ,{ref:c,containerClassName:ea()("content_panel--copyDropdown--yV1PF",d&&"content_panel--copyDropdownVisible--SijP0"),formatter:ak,property:null,onClick:s}),Q.createElement(o,{items:h,showPoint:!0})):Q.createElement("span",{...r,className:"content_panel--copyButton--fESrV blue_link--blueLink--9rlnd",onClick:()=>f(t,"value"),role:"button",tabIndex:0},Q.createElement(eO.Tx,{id:"inspect_panel.copy"}));return Q.createElement(nL.VZ,{title:(0,eO.t)("inspect_panel.property.content"),hideHeader:!0,padding:nL.UZ.NONE,recordingKey:"content"},Q.createElement("div",{className:"content_panel--contentPanel--mOfKM"},Q.createElement(nL.SH,{title:(0,eO.t)("inspect_panel.property.content"),isHovered:l||d,recordingKey:"contentHeader",additionalHeaders:g}),Q.createElement("div",{className:"content_panel--contentPanelContents--efLaM text--fontPos11--2LvXf text--_fontBase--QdLsd"},_&&Q.createElement(ax.w,{text:p,isInferred:m.isSuggested,disableHover:!0,dataTestId:"textVariableName",tooltip:m.isSuggested?(0,eO.t)("dev_handoff.variables.inferred_text"):t}),Q.createElement("div",{className:ea()("content_panel--textContent--uGoXz common--well--J0WtH",a),dir:"auto","data-testid":"textContent"},e))))}var aP=n(109388),aO=n(218017),aL=n(884096),aM=n(331741),aD=n(386455),aR=n(764348),aF=n(417446),aB=n(892820),aU=n(673327);function aH({plugin:e}){let[t,n]=(0,ef.fp)(tj.H),a=(0,$.wA)(),r=(0,ef.md)(aF.vT);return Q.createElement(ns.D8,{role:"button",recordingKey:nh.Pt("activePluginTab","tab"),onMouseDown:()=>{n(tj._.PLUGIN),a(tB.b({[aM.xb]:!0}))},tabIndex:0},Q.createElement(nk.Y,{width:"fill-parent",horizontalAlignItems:"space-between",verticalAlignItems:"center",padding:{left:16,right:8,top:4,bottom:4}},Q.createElement("div",{className:tw.cx.minW0.$},Q.createElement(nk.Y,{direction:"horizontal",verticalAlignItems:"center",spacing:8},Q.createElement(aU.d,{plugin:e}),Q.createElement(aL.E,{fontWeight:"bold",truncate:!0,showTooltipWhenTruncated:!0},e.name))),Q.createElement(aO.Jn,{className:tw.cx.flexShrink0.$,onClick:()=>{(function(e){switch(e){case"related-link-click":case"related-link-auth":case"codegen":case"related-link-preview":case"auto-run":return!0;default:return!1}})(r)&&n(tj._.PRIMARY),(0,aR.wY)()}})))}function aV({text:e,isActive:t,onClick:n,recordingKey:a}){return Q.createElement(ns.D8,{role:"button",recordingKey:nh.Pt(a,"tab"),onMouseDown:n,tabIndex:0,className:t?"dev_handoff_panel_tab_group--tabActive--Ex7NX pages_panel--tabActive--BitzC pages_panel--tab--Uge5B":"dev_handoff_panel_tab_group--tab--Y0iYX pages_panel--tab--Uge5B","data-label":e},e)}function aG(){let[e,t]=(0,ef.fp)(tj.H),n=(0,$.wA)();return Q.createElement(aV,{text:(0,eO.t)("dev_handoff.tab.plugins"),isActive:"plugin"===e,recordingKey:"pluginsTab",onClick:()=>{t(tj._.PLUGIN),n(tB.b({[aM.xb]:!0}))}})}function aK(){let[e,t]=(0,ef.fp)(tj.H);return Q.createElement(aV,{text:(0,eO.t)("dev_handoff.tab.inspect"),isActive:e===tj._.PRIMARY,recordingKey:"inspectTab",onClick:()=>{t(tj._.PRIMARY)}})}function aW(){return(0,aD.GS)()?Q.createElement("div",{className:tw.cx.wFull.bb1.bSolid.colorBorder.$},Q.createElement("div",{className:"dev_handoff_panel_tab_group--tabsHeaderSingle--G5OnU dev_handoff_panel_tab_group--tabsHeader--Tv3Sg pages_panel--tabsHeader--ez-pH"},Q.createElement(aV,{text:(0,eO.t)("dev_handoff.tab.comment"),isActive:!0,onClick:ey.lQ,recordingKey:"commentTab"}))):null}function az(){let e="ui3"===(0,et.DP)().version;return Q.createElement("div",{className:tw.cx.wFull.flex.flexRow.flexShrink0.itemsCenter.borderBox.bSolid.bb1.pr8.colorBorder.justifyBetween.colorBg.$},e?Q.createElement("div",{className:tw.cx.flex.flexRow.itemsStart.hFull.$},Q.createElement("div",{className:"dev_handoff_panel_tab_group--tabsHeader--Tv3Sg pages_panel--tabsHeader--ez-pH"},Q.createElement(aK,null),Q.createElement(aG,null))):Q.createElement("div",{className:tw.cx.flex.flexRow.itemsStart.hFull.$},Q.createElement(aK,null),Q.createElement(aG,null)),Q.createElement(aB.qs,null))}function aj(){let e=(0,ef.md)(aF.be),[t,n]=(0,ef.fp)(tj.H),{commentsActive:a,versionHistoryActive:r}=(0,ep.R)(e=>({commentsActive:e.mirror.appModel.currentTool===tz.ec.tool,versionHistoryActive:e.mirror.appModel.activeCanvasEditModeType===eU.m1T.DEV_HANDOFF_HISTORY}));if(r)return null;if(a)return Q.createElement(aW,null);let l=e&&t===tj._.PLUGIN?Q.createElement(aH,{plugin:e}):null;return Q.createElement("div",null,Q.createElement(az,null),l)}var aY=n(756029),aZ=n(651147),aX=n(113420),aq=n(98140),aJ=n(797795),aQ=n(672818),a$=n(999918);function a0(e){let t=(0,aQ.Q)();return Q.createElement(a1,{dropdownPrefix:e.dropdownPrefix,inspectionModeLayout:e.inspectionModeLayout,preferencesApi:t})}function a1({dropdownPrefix:e,inspectionModeLayout:t="drop-down",preferencesApi:n}){let a=(0,ti._I)(),r=e?`${e}_DEV_HANDOFF_PREFERENCES_DROPDOWN`:"DEV_HANDOFF_PREFERENCES_DROPDOWN",l=e?`${e}_DEV_HANDOFF_LANGUAGE_DROPDOWN`:"DEV_HANDOFF_LANGUAGE_DROPDOWN",i=(0,$.wA)(),{inspectionMode:o,setInspectionMode:s,supportsAlternativeUnits:c,preferenceOptions:d,preferences:u,codeLanguageApi:m,inspectionModes:p}=n,_=(0,aX.U)(),f=Q.useRef(null),h=(null==_?void 0:_.type)===r,g=aZ.z4.getIsExtension(),E=p.includes("code"),v=(g||"code"===o)&&E,y=Q.useMemo(()=>p.map(e=>Q.createElement(aT.c$,{key:e,value:e})),[p]),b="ui3"===(0,et.DP)().version;return Q.createElement(Q.Fragment,null,Q.createElement(nL.VZ,{hideHeader:!0,padding:nL.UZ.NONE,noBorder:!0,recordingKey:"preferences"},Q.createElement("div",{className:"preferences--preferencesRow--uJxcE"},!g&&("drop-down"===t?Q.createElement(aT.l6,{id:`${e}_dev_handoff_inspection_mode`,property:o,formatter:am.a9,onChange:s,dispatch:i,dropdownShown:_,className:"preferences--preferencesTitle--Hnoyt",dropdownWidth:b?"120px":"auto",onShowDropdownOverride:a?void 0:ey.lQ},y):Q.createElement(a2,{onTabClick:s,selectedTabKey:o,tabs:p.map(e=>({key:e,label:am.a9.format(e)})),recordingKey:"preferences-tabs"})),Q.createElement("div",{className:"preferences--preferencesRight--UCEaD"},v&&Q.createElement(aY.ls,{dropdownId:l,codeLanguageApi:m}),Q.createElement("div",{ref:f},Q.createElement(aJ.YW,{svg:a$.A,className:"preferences--preferencesDropdown--n0hD3",onClick:()=>{h?i(nP.oB()):a&&i(nP.j7({type:r}))},"data-tooltip-type":nO.Ib.TEXT,"data-tooltip":(0,eO.t)("dev_handoff.inspect_settings"),"data-tooltip-show-above":!0,selected:h,disabled:!v||0===d.length,recordingKey:"preferencesDropdownButton"}))))),h&&f.current&&(0,aP.createPortal)(Q.createElement(aq.j,{items:d,onSelectItem:e=>{e.callback&&e.callback("",null,i)},recordingKey:"preferencesDropdown",dispatch:i,parentRect:f.current.getBoundingClientRect(),showPoint:!1,alwaysShowCheckMarkOffset:!0,activatePathOnMount:c?u.unit===eU.tKW.PIXEL?[d[1].displayText]:[d[2].displayText]:void 0}),document.getElementById("dev-handoff-inspect-panel")))}function a2({tabs:e,onTabClick:t,selectedTabKey:n,recordingKey:a}){return Q.createElement("div",{className:ea()(tw.cx.flex.flexRow.$,"preferences--preferencesInnerRow--o6o3N")},e.map(e=>Q.createElement(aV,{key:e.key,text:e.label,isActive:n===e.key,onClick:()=>t(e.key),recordingKey:nh.Pt(a,e.key)||""})))}var a5=n(314809),a4=n(43593),a3=n(281254),a6=n(82505),a7=n(868890),a8=n(986407),a9=n(568332),re=n(794307),rt=n(422710),rn=n(185604),ra=n(574512),rr=n(944725),rl=n(480119);let ri=class{async generateCode({plugin:e,nodeId:t,handoffLanguage:n,canRunCodegenArgs:a}){var r;let l=n.pluginLanguage;if((0,au.dW)(e,l?(0,rl.X)(e,l):null),!(0,rt.Pq)(a))throw Error("Not allowed to run codegen");try{return await ra.R.instance.enqueue({runPluginArgs:{plugin:e,command:"generate",queryMode:!1,runMode:"codegen",triggeredFrom:"codegen",openFileKey:(null==(r=el.D.getState().openFile)?void 0:r.key)||"",isWidget:!1},onStart:async()=>await (0,rn.o5)(t),mode:"run-forever"})??[]}catch(e){console.error(e)}return[]}async maybeTerminatePlugin(e){let t=(0,aR.hw)();if(t)switch(e.type){case"local-plugin":(0,rr.ZQ)(t)&&e.id===String(t.localFileId)&&((0,rn.f$)(),await (0,aR.wY)());return;case"published-plugin":e.id===t.plugin_id&&((0,rn.f$)(),await (0,aR.wY)());return;case"first-party":return;default:(0,re.xb)(e)}}};ri.instance=new ri;var ro=n(164928);function rs(e,t){(0,er.sx)("dev_handoff.codegen",{elapsedMs:e,languageType:t.type},{forwardToDatadog:!0})}function rc({selectedNodeID:e,extensionLanguage:t,onFinish:n=ey.lQ,sceneGraph:a,selectedVersion:r,preferences:l,plugin:i}){let o=(0,a9.R)(),s=(0,$.d4)(e=>e.versionHistory.activeId),c=(0,ef.md)(a7.wm),d=(0,a4.zL)(),[{code:u,error:m},p]=Q.useState({code:[],error:void 0}),[_,f]=Q.useState(!1),h=Q.useRef(null),g=(0,a6.px)(a),E=(0,$.d4)(a3.S,an.c2);return Q.useEffect(()=>{g.rebuildNodeCache()},[g,s,r]),Q.useEffect(()=>{let a=!1;return(async()=>{if(!e||e===ad.AD)return;let r=tW.sn.start("dev_handoff.codegen");if("local-plugin"===t.type||"published-plugin"===t.type){if(i){let l=[],o=null,s=t,c=(0,rl.m)(i).map(({value:e})=>e);c.includes(s.pluginLanguage??"")||(s=d({...s,pluginLanguage:c[0]??""}));try{if(h.current&&(await h.current,a))return;f(!0),l=await ri.instance.generateCode({plugin:i,nodeId:e,handoffLanguage:s,canRunCodegenArgs:E})}catch(e){o=e}finally{a||f(!1)}if(a)return;let u={code:(0,ro.Z0)(l),error:o};p(u),n(u.code),rs(r.stop(),s),a8.le(l.map(e=>({code:e.code,language:e.language})))}return}let{code:o,error:s}=await g.runExtension({selectedNodeId:e,codegenPluginID:t.id,preferences:l,canRunCodegenArgs:E});a||(p({code:o,error:s}),n(o),rs(r.stop(),t))})(),()=>{a=!0}},[n,e,o,t,l,i,s,d,a,c,r,g,E]),Q.useEffect(()=>()=>{h.current=ri.instance.maybeTerminatePlugin(t)},[t]),{code:u,error:m,isLoading:_&&"first-party"!==t.type}}var rd=n(45551),ru=n(797011);let rm="compare_changes_right_panel--sidePanel--wHvM4";function rp(e){let{header:t,changedKeys:n,oldValueMap:a,newValueMap:r}=e,l=(0,$.wA)(),i=new a5._r,o=e=>e&&"Variables"===t?i.format(e):e;return Q.createElement("div",{className:"compare_changes_right_panel--propertiesTable--eA09s"},t&&Q.createElement(nL.I7,{title:t}),n.map(e=>{var t,n,i,s;return Q.createElement(nL.M6,{key:e,name:o((null==(t=a[e])?void 0:t.displayName)||(null==(n=r[e])?void 0:n.displayName)),basis:{value:(null==(i=a[e])?void 0:i.displayValue)||(0,eO.t)("collaboration.branching_node_treatments.value.empty_dash"),onClick:()=>{var t;return(0,ru.WD)(null==(t=a[e])?void 0:t.displayValue,l)}},change:{value:(null==(s=r[e])?void 0:s.displayValue)||(0,eO.t)("collaboration.branching_node_treatments.value.empty_dash"),onClick:()=>{var t;return(0,ru.WD)(null==(t=r[e])?void 0:t.displayValue,l)}}})}))}function r_({layerChangeNodeId:e,layerBasisNodeId:t,layerChangeSceneGraph:n,layerBasisSceneGraph:a,selectedVersion:r,displayableChanges:l,preferencesApi:i}){let o=(0,ae.eY)(),s=(null==a?void 0:a.get(t??""))??o.get(t??""),c=(null==n?void 0:n.get(e??""))??o.get(e??""),d=(null==s?void 0:s.type)==="TEXT"||(null==c?void 0:c.type)==="TEXT",u=!t||t===ad.AD,m=!e||e===ad.AD,p=u?(0,eO.t)("dev_handoff.compare_changes.banner.added_layer"):(0,eO.t)("dev_handoff.compare_changes.banner.removed_layer"),_="code"===i.inspectionMode,{setInspectionMode:f}=i,h=(0,Q.useCallback)(()=>{f("properties")},[f]);return Q.createElement("div",{className:rm},(u||m)&&Q.createElement("div",{className:"compare_changes_right_panel--banner--lsWBi"},Q.createElement(ay._,{dataTestId:"cc-code-panel-banner",color:u?ay.S.INFORMATION:ay.S.ERROR,text:p})),Q.createElement(a1,{dropdownPrefix:"COMPARE_CHANGES",inspectionModeLayout:"tabs",preferencesApi:i}),Q.createElement("div",{className:"compare_changes_right_panel--dividerBottom--FmR5V"}),Q.createElement(ab.P,{key:`${e}-${t}`},_?Q.createElement(rh,{layerChangeNodeId:e,layerBasisNodeId:t,layerChangeSceneGraph:n,layerBasisSceneGraph:a,selectedVersion:r,key:`${e||""}-${t||""}`,preferences:i.preferences,codeLanguage:i.codeLanguageApi.codeLanguage,plugin:i.codeLanguageApi.activeCodegenPlugin,onSwitchToPropertiesMode:h}):l&&!u&&!m&&Q.createElement(rf,{displayableChanges:l,layerBasisNodeId:t,layerChangeNodeId:e}),d?Q.createElement(aI,{basisContent:null==s?void 0:s.characters,changeContent:null==c?void 0:c.characters}):null))}function rf({displayableChanges:e,layerChangeNodeId:t,layerBasisNodeId:n}){var a;let r=(0,$.wA)(),l=null==(a=(0,rd.lE)(e,e=>(0,ad.dI)(e.basis.guid)===n||(0,ad.dI)(e.change.guid)===t))?void 0:a.changesToDisplay;if(!l)return null;let i=l.filter(e=>"textData"!==e.identifier),o=i.filter(e=>"lego-table"!==e.oldValue()),s=i.filter(e=>"lego-table"===e.oldValue());return i&&i.length>0?Q.createElement(Q.Fragment,null,o.length>0&&Q.createElement("div",{className:"compare_changes_right_panel--propertiesTableCompareChanges--NnOU6"},o.map(e=>{let t=e.oldValue(),n=e.newValue();return Q.createElement(nL.M6,{name:e.name(),basis:{value:t,onClick:()=>(0,ru.WD)(t,r)},change:{value:n,onClick:()=>(0,ru.WD)(n,r)}})})),s.map(e=>e.newValue())):null}let rh=Q.memo(({layerChangeNodeId:e,layerBasisNodeId:t,layerChangeSceneGraph:n,layerBasisSceneGraph:a,selectedVersion:r,codeLanguage:l,preferences:i,plugin:o,onSwitchToPropertiesMode:s})=>{let{code:c,codeToCopy:d,hasDiffs:u}=function({layerChangeNodeId:e,layerBasisNodeId:t,layerChangeSceneGraph:n,layerBasisSceneGraph:a,selectedVersion:r,codeLanguage:l,preferences:i,plugin:o}){let s=Q.useMemo(()=>l.id===eD.uz&&"first-party"===l.type?{id:a6.qZ.CSS,type:"first-party"}:l,[l]);return function({codeForBasisNode:e,codeForChangeNode:t}){let n=performance.now(),a={};t.code.forEach(t=>{let n=e.code.find(e=>e.name===t.name);a[t.name]={changed:t,basis:n||{...t,lines:[]}}}),e.code.forEach(e=>{a[e.name]||(a[e.name]={changed:{...e,lines:[]},basis:e})});let r=Object.values(a).map(e=>(function(e,t){let n=e.lines.map(e=>e.code).join("\n"),a=t.lines.map(e=>e.code).join("\n"),r=(0,aC.Pp)(a,n),l=0,i=0,o=[];return r.forEach(n=>{let a=n.count??0;for(let r=0;r<a;r++){let a;n.added?(a={...e.lines[l],diff:nD.j5.ADDED},l++):(n.removed?a={...t.lines[i],diff:nD.j5.REMOVED}:(a=e.lines[l],l++),i++),o.push(a)}}),{...e,lines:o}})(e.changed,e.basis)),l=r.some(e=>e.lines.some(e=>void 0!==e.diff)),i=performance.now();return(0,er.sx)("dev_mode.compare_changes.diffing",{type:"code",durationMs:Math.trunc(i-n)},{forwardToDatadog:!0}),{code:r,codeToCopy:t.code,hasDiffs:l}}({codeForBasisNode:rc({selectedNodeID:t??void 0,extensionLanguage:s,sceneGraph:a,selectedVersion:r,preferences:i,plugin:o}),codeForChangeNode:rc({selectedNodeID:e??void 0,extensionLanguage:s,sceneGraph:n,preferences:i,plugin:o})})}({selectedVersion:r,layerChangeNodeId:e,layerBasisNodeId:t,layerChangeSceneGraph:n,layerBasisSceneGraph:a,codeLanguage:l,plugin:o,preferences:i});return Q.createElement("div",{className:tw.cx.pb8.$},!u&&Q.createElement("div",{className:tw.cx.pt16.pl16.pr16.pb8.$},Q.createElement(ay._,{color:ay.S.PLAIN,text:Q.createElement(Q.Fragment,null,Q.createElement("p",null,(0,eO.t)("dev_handoff.compare_changes.banner.no_changes")),Q.createElement("div",{className:"compare_changes_right_panel--bannerLink--pPJYo",onClick:s,role:"button",tabIndex:0},(0,eO.t)("dev_handoff.compare_changes.banner.no_changes_link")))})),c.map(e=>{let t=d.find(t=>t.name===e.name);return e.lines.length>0?Q.createElement("div",{className:"compare_changes_right_panel--codeWellWrapper--IIgCk",key:e.name},Q.createElement(nJ,{code:c,codeToCopy:d,section:e,sectionToCopy:t,collapseLongSections:!1,copyActionEnabled:!!t,hasCodeDiff:!0,hideHints:!0,recordingKey:nh.Pt("styles_code_panel",e.name)})):null}))});function rg({text:e}){return Q.createElement("div",{className:rm},Q.createElement("div",{className:"compare_changes_right_panel--selectLayerText--bQQTr text--fontPos11--2LvXf text--_fontBase--QdLsd"},e))}var rE=n(469853),rv=n(801109),ry=n(99439),rb=n(208529),rC=n(48038),rw=n(540368),rT=n(499200),rx=n(625829),rN=n(944068);let rk="overlay_highlight--added--28SgH",rS="overlay_highlight--removed--9BsT-",rI="overlay_highlight--edited---lnVX",rA="overlay_highlight--interactive--f4-mM",rP="overlay_highlight--invisible--GGcha",rO=(0,rT.jz)("2px"),rL=(0,rT.jz)("1px"),rM=(0,rT.jz)("8px"),rD=(0,rT.jz)("16px"),rR=(0,Q.createContext)(null);function rF({children:e,value:t}){return Q.createElement(rR.Provider,{value:t},e)}let rB=Q.memo(function({node:e,rect:t,borderStyle:n,borderSize:a,renderTag:r,renderOverlay:l,tagValue:i,interactive:o,invisible:s,onBoxClicked:c,onBoxHovered:d,recordingKey:u}){let m=e.value,p=1===a?rL:rO,_=!!i,f=_?rD:rM,h=_&&i>99,g=_&&(i>99?"99+":i),E=(0,Q.useCallback)(t=>{t.stopPropagation(),null==c||c(e)},[c,e]),v=nh.rf(u,"click",E),y=(0,Q.useCallback)(()=>{null==d||d(m)},[m,d]),b=(0,Q.useCallback)(()=>{null==d||d(null)},[d]);return Q.createElement(Q.Fragment,null,Q.createElement("div",{role:"button",tabIndex:0,className:ea()("overlay_highlight--highlight--x-16k",{"overlay_highlight--thin--t8yeW":1===a,"overlay_highlight--dashed--Z34AW":0===n,"overlay_highlight--solid--XkPFI":1===n,"overlay_highlight--none--poZGj":2===n,[rk]:"added"===m.state,[rS]:"removed"===m.state,[rI]:"changed"===m.state,[rA]:o,[rP]:s}),style:{transform:`translate(${t.x-p}px, ${t.y-p}px)`,width:t.width,height:t.height},onMouseEnter:y,onMouseLeave:b,onClick:v},l&&Q.createElement("div",{className:"overlay_highlight--highlightOverlay--QsoQT"})),r&&m.state&&Q.createElement("div",null,Q.createElement("span",{onClick:v,onMouseEnter:y,onMouseLeave:b,tabIndex:0,role:"button","data-preferred-theme":"added"!==m.state?"light":"dark",className:ea()("overlay_highlight--actionTag--osNjG",{[rk]:"added"===m.state,[rS]:"removed"===m.state,[rI]:"changed"===m.state,"overlay_highlight--large--DPhJK":_,"overlay_highlight--wideText--lXSz9":h,[rA]:o,[rP]:s}),style:{transform:`translate(${t.x-f/2-rL}px, ${t.y-f/2-rL}px)`}},g)))});var rU=((u=rU||{})[u.DASHED=0]="DASHED",u[u.SOLID=1]="SOLID",u[u.NONE=2]="NONE",u),rH=((m=rH||{})[m.WIDE=0]="WIDE",m[m.THIN=1]="THIN",m);let rV=e=>e.beforeNodeId+":"+e.afterNodeId,rG=e=>!e.parent&&!e.value,rK=e=>{var t;return!e.parent||rG(e.parent)||!!(null==(t=e.parent.value)?void 0:t.isRootFrame)},rW=e=>e.descendantsCount>0?e.descendantsCount:void 0,rz=e=>{var t,n;return e.value&&!e.value.isSelected&&!!(null==(n=null==(t=e.parent)?void 0:t.value)?void 0:n.directParentToSelection)},rj=(e,t,n)=>{if(!e.value)return!1;let a=e.value;return!t||a.isSelected||a.ancestorOfSelectedNode||n||rK(e)||rz(e)},rY=(e,t)=>{let n=e.transformRect(new rx.r(new rN.M(t.x,t.y),new rN.M(t.width,t.height)));return{x:n.left(),y:n.top(),width:n.width(),height:n.height()}},rZ=(e,t)=>{var n;return t&&t===(null==(n=e.value)?void 0:n.state)};function rX({node:e,onBoxClicked:t,onBoxHovered:n,selectedNodeId:a,expandedLayers:r,transform:l,ignoreState:i,interactive:o,hoveredNodeIdAtom:s,recordingKey:c}){var d,u;let m=rG(e),p=rZ(e,i),_=!!(e.value&&e.value.isSelected),f=(0,Q.useMemo)(()=>(0,nf.eU)(t=>{let n=t(s);return!!(e.value&&rJ(e.value,n))}),[e,s]),h=(0,ef.md)(f),g=!p&&((null==(d=e.value)?void 0:d.ancestorOfSelectedNode)||_||!!(null==(u=e.value)?void 0:u.isRootFrame)||m),E=!!a&&a!==ad.AD,v=(0,Q.useMemo)(()=>{var t,n;if((0,rd.aR)(e)&&e.value.rect){let a=e.value,r=e.value.rect,i=rK(e),s=rz(e),c=!!(null==(n=null==(t=e.parent)?void 0:t.value)?void 0:n.isSelected),d=_?1:h||s||c||a.ancestorOfSelectedNode||i&&!a.ancestorOfSelectedNode?0:2,u=_||h?0:1,m=!_&&!g&&(c||h||i&&!E),f=h&&!_&&!g,v=rY(l,r),y=o&&(h||_);if(!p)return{rect:v,renderTag:m,borderStyle:d,borderSize:u,renderOverlay:f,tagValue:rW(a),invisible:y,node:e}}},[e,E,g,_,l,h,o,p]);return Q.createElement(Q.Fragment,null,v&&Q.createElement(rB,{key:(rV(v.node.value),"inactive"),recordingKey:nh.Pt(c,rV(v.node.value)),isSelected:_,interactive:o,node:v.node,invisible:v.invisible,rect:v.rect,renderTag:v.renderTag,borderStyle:v.borderStyle,borderSize:v.borderSize,renderOverlay:v.renderOverlay,tagValue:v.tagValue,onBoxClicked:t,onBoxHovered:n}),g&&e.children&&e.children.map(d=>{var u;return d.value&&rj(d,E,!!(null==(u=e.value)?void 0:u.isSelected))&&Q.createElement(rX,{onBoxClicked:t,onBoxHovered:n,key:rV(d.value),node:d,selectedNodeId:a,expandedLayers:r,transform:l,ignoreState:i,interactive:o,hoveredNodeIdAtom:s,recordingKey:c})}))}let rq=({box:e,isSelected:t})=>({...e,ancestorOfSelectedNode:!1,directParentToSelection:!1,isSelected:t,descendantsCount:0}),rJ=(e,t)=>!!t&&t!==ad.AD&&!!e&&(t===e.afterNodeId||t===e.beforeNodeId),rQ=(e,t)=>!!t&&t!==ad.AD&&!!e&&(t===e.afterNodeId||t===e.beforeNodeId);function r$(e){let{rootBox:t,expandedLayers:n,selectedNodeId:a,transform:r,ignoreState:l,hoveredNodeIdAtom:i,recordingKey:o}=e,s=(0,ef.md)(i),c=(0,Q.useMemo)(()=>{if(!t||!s)return;let e=(0,rd.lE)(t,e=>rJ(e,s)&&!rQ(e,a));return e&&{value:e,children:void 0}},[t,s,a]),d=(0,Q.useMemo)(()=>{if(!t||!a)return;let e=(0,rd.lE)(t,e=>rQ(e,a));return e&&{value:e,children:void 0}},[t,a]);return Q.createElement(Q.Fragment,null,d&&Q.createElement(rX,{node:d,selectedNodeId:a,expandedLayers:n,transform:r,ignoreState:l,interactive:!1,hoveredNodeIdAtom:i,recordingKey:o}),c&&Q.createElement(rX,{node:c,selectedNodeId:a,expandedLayers:n,transform:r,ignoreState:l,interactive:!1,hoveredNodeIdAtom:i,recordingKey:o}))}let r0=Q.memo(function(e){let{rootBox:t,expandedLayers:n,onBoxClicked:a,onBoxHovered:r,selectedNodeId:l,transform:i,ignoreState:o,interactive:s,hoveredNodeIdAtom:c,recordingKey:d}=e,u=(0,Q.useMemo)(()=>t?function e(t,n,a,r){var l;let i=!!t.value&&(t.value.afterNodeId===n||t.value.beforeNodeId===n),o={parent:r,value:t.value?rq({box:t.value,isSelected:i}):void 0};return o.children=t.children?null==(l=t.children)?void 0:l.map(t=>{var r,l;let i=e(t,n,a,o);return i.value&&(!a||i.value.state!==a)&&o.value&&(o.value.descendantsCount+=i.value.descendantsCount+1),(null==(r=i.value)?void 0:r.ancestorOfSelectedNode)&&o.value&&(o.value.ancestorOfSelectedNode=!0),(null==(l=i.value)?void 0:l.isSelected)&&o.value&&(o.value.directParentToSelection=!0,o.value.ancestorOfSelectedNode=!0),i}):void 0,o}(t,l,o):void 0,[t,l,o]),m=(0,Q.useRef)(void 0),p=(0,Q.useCallback)(e=>{m.current=e},[]),_=(0,Q.useCallback)(()=>{void 0!==m.current&&(null==r||r(m.current),m.current=void 0)},[r]);return Q.createElement("div",{className:"overlay_highlight--overlayContainer--XMr11",role:"group",onMouseMove:_},s&&u&&Q.createElement(rX,{node:u,onBoxClicked:a,onBoxHovered:p,selectedNodeId:l,expandedLayers:n,transform:i,ignoreState:o,interactive:!0,hoveredNodeIdAtom:c,recordingKey:nh.Pt(d,"overlays","highlight")}),Q.createElement(r$,{rootBox:u,expandedLayers:n,selectedNodeId:l,transform:i,ignoreState:o,hoveredNodeIdAtom:c,recordingKey:nh.Pt(d,"overlays","highlight","hovered-or-selected")}))});function r1(e){let t=(0,Q.useContext)(rR);return t?Q.createElement(r0,{...e,...t}):null}var r2=n(630171);let r5=[2,3,6,13,25,50,75,100,200,300,1e3];function r4(e,t,n){if(!n)return!1;let a=t.get((0,ad.dI)(e));if(!a)return!1;let r=a.absoluteBoundingBox;return!!r&&r.x<n.x+n.w&&r.x+r.w>n.x&&r.y<n.y+n.h&&r.y+r.h>n.y}function r3(e,t){return{x:e.x-t.x,y:e.y-t.y,width:e.w,height:e.h}}function r6(e,t,n=!1){if(!t)return null;let a=e.get(t);return a?n?a.absoluteRenderBounds:a.absoluteBoundingBox:null}function r7(e){var t,n;return null!=(t=null==e?void 0:e.basis)&&!!t.styleType||null!=(n=null==e?void 0:e.change)&&!!n.styleType}function r8(e,t,n){var a;let r=(null==(a=null==e?void 0:e.basis)?void 0:a.guid)?(0,ad.dI)(e.basis.guid):ad.AD,l=r7(e)?null:r6(t.scene,r,!1),i=(null==e?void 0:e.change.guid)?(0,ad.dI)(e.change.guid):ad.AD,o=(null==e?void 0:e.state)==="removed"||r7(e)?null:r6(n.scene,i,!1);return{before:{id:r,box:l&&t.baseBox?r3(l,t.baseBox):null},after:{id:i,box:o&&n.baseBox?r3(o,n.baseBox):null}}}function r9({frameId:e,historyFrameId:t,historySceneGraph:n,chunkChanges:a,discreteDiffing:r,setChunkChanges:l}){let i=(0,ae.eY)(),[o,s]=(0,ef.fp)(a_.Ib),c=Q.useMemo(()=>r?eU.Egt.getLayerGUIDMapping(t,n.scene,e,i.scene):void 0,[r,e,t,n.scene,i.scene]);return Q.useEffect(()=>{if(a)return;let o=eU.egF.getNodeTree(t,n.scene,!r),d=eU.egF.getNodeTree(e,i.scene,!r);if(!o||!d){s(new Map),l({});return}tW.sn.reset("dev_mode.compare_changes.diffing",t),tW.sn.start("dev_mode.compare_changes.diffing",{key:t});let{deltaTree:u,deltaNodeMap:m}=function(e,t,n,a,r,l,i=!0){let o;let s=new Map,c=ai.w.decodeMessage(e.nodeChanges).nodeChanges,d=ai.w.decodeMessage(t.nodeChanges).nodeChanges;if(!c||!d)return{deltaTree:{},deltaNodeMap:s};let u=new Map,m=0;!function e(t){if(m>=c.length)return(0,ar.$D)(ao.e.DEVELOPER_TOOLS,Error("History node index out of bounds")),null;for(let n of(u.set(t.id,{change:c[m],node:t}),m++,t.children))e(n)}(e.tree);let p=i?n.get((0,ad.dI)(d[0].guid)):null,_=c[0]&&i?a.get((0,ad.dI)(c[0].guid)):null,f=(null==p?void 0:p.absoluteBoundingBox)||null,h=(null==_?void 0:_.absoluteBoundingBox)||null;function g(e,t,n){s.set(e,t.value),(0,rd.NI)(n,t)}let E=0,v=function e(t,o={}){var c,m,p;let _,v;if(E>=d.length)return(0,ar.$D)(ao.e.DEVELOPER_TOOLS,Error("Node index out of bounds")),{};let y=d[E],b=0===E;E++;let C=l?l.get(t.id)??ad.AD:t.id,w=u.get(C),T={previousChange:null==w?void 0:w.change,currentChange:y,isRootNode:b};if(w){let e=function(e,t,n,a,r){var l,i,o,s;let c=new Map;for(let[d,u]of rv.AW){let m=null,p=null;if((0,av.Z7)(d)&&(e[d]&&(m=(0,ad.dI)(e[d])),t[d]&&(p=(0,ad.dI)(t[d]))),(0,av.ar)(d)&&(e[d]&&e[d].guid&&(m=(0,ad.dI)(e[d].guid)),t[d]&&t[d].guid&&(p=(0,ad.dI)(t[d].guid))),m||p){let _=function(e,t){if(t){if("inheritFillStyleIDForStroke"===d){e.strokePaints=t.fillPaints;return}for(let n of u)e[n]=t[n]}},f=p?null==(l=eU.egF.getNodeTree(p,a.scene,r))?void 0:l.nodeChanges:null,h=m?null==(i=eU.egF.getNodeTree(m,n.scene,r))?void 0:i.nodeChanges:null,g=f?null==(o=ai.w.decodeMessage(f).nodeChanges)?void 0:o[0]:null,E=h?null==(s=ai.w.decodeMessage(h).nodeChanges)?void 0:s[0]:null;if(_(t,g),_(e,E),g&&!E)c.set(d,{state:"removed",previousChange:g,currentChange:{phase:"REMOVED"}});else if(!g&&E)c.set(d,{state:"added",previousChange:{phase:"REMOVED"},currentChange:E});else if(g&&E){for(let e of["name",...u])if(!(0,an.cF)(g[e],E[e])){c.set(d,{state:"changed",previousChange:g,currentChange:E});break}}}}return c}(y,null==w?void 0:w.change,n,a,r);for(let e of rv.cs)if(!(0,an.cF)(w.change[e],y[e])&&("textData"!==e||(null==(c=w.change[e])?void 0:c.characters)!==(null==(m=y[e])?void 0:m.characters))){if("transform"===e&&b||i&&!r4(w.change.guid,a,f)&&!r4(y.guid,n,f))continue;T.state="changed";break}e.size>0&&(T.changedStyles=e)}else(!i||r4(y.guid,n,f))&&(T.state="added");for(let n of(y.guid&&(T.state||T.changedStyles)&&(v={value:T}),_=v||o,v&&g((0,ad.dI)(y.guid),v,o),t.children.forEach(t=>e(t,_)),(null==(p=null==w?void 0:w.node)?void 0:p.children)||[]))u.has(n.id)&&function({checkOverlap:e,parent:t,nodeId:n}){var r;let l=u.get(n);if(e&&!r4(null==l?void 0:l.change.guid,a,h))return;let i={value:{state:"removed",previousChange:null==l?void 0:l.change,currentChange:{phase:"REMOVED"}}};s.has((0,ad.dI)(null==(r=u.get(n))?void 0:r.change.guid))&&(0,ar.$D)(ao.e.DEVELOPER_TOOLS,Error("Error generating deleted nodes"));let o=(0,ad.dI)(null==l?void 0:l.change.guid);g(o,i,t),u.delete(o)}({checkOverlap:i,nodeId:n.id,parent:_});return u.delete(C),o}(t.tree);if(!v.value&&v.children&&1===v.children.length){let e=v.children[0];delete e.parent,o=e}else o=v;return{deltaTree:o,deltaNodeMap:s}}(o,d,i,n,!r,c,!0);s(m),l((0,rd.X$)(u,function(e){let t=e.value,n=null,a=t.state;return("added"===t.state||"changed"===t.state)&&(n={isRootNode:!!t.isRootNode,basis:t.previousChange?t.previousChange:{phase:"REMOVED"},change:t.currentChange,state:a}),"removed"===t.state&&t.previousChange&&(n={isRootNode:!!t.isRootNode,basis:t.previousChange,change:{phase:"REMOVED"},state:a}),t.changedStyles&&(n||(n={isRootNode:!!t.isRootNode,basis:t.previousChange,change:t.currentChange,state:a}),n.changedStyles=t.changedStyles),{result:n}}));let p=tW.sn.tryStop("dev_mode.compare_changes.diffing",t);p&&(0,er.sx)("dev_mode.compare_changes.diffing",{type:"node_changes",durationMs:p},{forwardToDatadog:!0})},[e,s,a,l,t,n.scene,i.scene,c,n,i,r]),Q.useEffect(()=>()=>{s(new Map)},[s]),null}function le(e,t,n){let a=el.D.getState().selectedView;t(nP.$T({...a,compareChangesVersionId:e,filterStatusVersions:n}))}function lt(e,t){var n;if(e.isState){let t=null==(n=e.parentNode)?void 0:n.name;return t?`${t}/${e.name}`:e.name}if(t.singleBackingSymbol&&t.singleBackingStateGroup){let n=t.singleBackingSymbol.name;return n?`${e.name}/${n}`:e.name}return e.name}function ln(e){return{node:(0,eF.mJ)(e),backingSymbolData:(0,rb.$)([e])}}function la({nodeId:e,detachedComponentsScene:t,documentIndex:n,showError:a}){var r;let l=n===tN.x1?tN.ju.HISTORY:t?tN.ju.DETACHED:tN.ju.CURRENT,i=(null==(r=new tN.qo(l).get(e))?void 0:r.absoluteRenderBounds)||{x:0,y:0,w:0,h:0},o=0,s=!0;return()=>({nodeBounds:{x:i.x,y:i.y,width:i.w,height:i.h},getImage:({scale:a,clipRect:r})=>{var i;let c;let d=Date.now();d-o>1e4&&(o=d,(c=new aa.jk("performance.dev_mode.compare_changes.get_image",{})).start());let u=(0,rC.L6)(e,n,t,a,r);if(c){let e=c.stop(),t=(null==(i=null==u?void 0:u.image)?void 0:i.length)??0;e&&t&&(0,er.sx)("performance.dev_mode.compare_changes.get_image",{elapsedMs:e,imageBytes:t,sceneType:l,isFirstImage:s},{forwardToDatadog:!0})}return s=!1,u&&{data:u.image,width:u.width,height:u.height,scale:u.width/u.canvasSpaceBounds.width,canvasSpaceBounds:u.canvasSpaceBounds}},showError:a})}function lr({version:e,isSection:t}){let n=new Date(e.touched_at?e.touched_at:e.created_at),a=e.label;e.frameCreated?a=t?Q.createElement(eO.Tx,{id:"collaboration.feedback.compare_changes_modal.section_created"}):Q.createElement(eO.Tx,{id:"collaboration.feedback.compare_changes_modal.frame_created"}):e.lastViewed&&(a=Q.createElement(eO.Tx,{id:"collaboration.feedback.compare_changes_modal.last_viewed_by_you"}));let r=a?Q.createElement(rw.Cr,{time:n}):null;return Q.createElement("div",{className:r2.sh},Q.createElement("div",{className:r2.dp},a||Q.createElement(rw.Cr,{time:n})),Q.createElement("div",{className:r2.m7},r))}let ll=(0,nf.eU)(null);function li(e){var t,n;let{nodeId:a,onCloseModal:r,modalTitle:l,currentImage:i,historicImage:o,historicHeader:s,currentHeader:c,versions:d,selectedVersion:u,setSelectedVersion:m,renderLoadingBar:p,modalError:_,discreteDiffingInput:f,initialSelectedNodeId:h,origin:g}=e,E=(0,$.wA)(),v=(0,t_.tS)(),y=null==(t=(0,at.iZ)())?void 0:t.id,[b,C]=Q.useState(as.Ss.SIDE_BY_SIDE),[w,T]=Q.useState(ru.q0),[x,N]=Q.useState(!0),[k,S]=Q.useState(null),[I,A]=Q.useState(null),[P,O]=Q.useState(!0),[L,M]=Q.useState(!0),D=null==(n=(0,n7.VI)())?void 0:n.isSection,[R,F]=Q.useState(()=>h?{id:h,zoomToSelection:!0}:null),[B,U]=(0,ef.fp)(ll),[H,V]=Q.useState(void 0),G=(0,ef.fp)(ac.w1)[1],K=(0,ru.t$)(u||null,a)||!!f,W=Q.useMemo(()=>(null==f?void 0:f.sceneGraph)?f.sceneGraph:new tN.qo(tN.ju.HISTORY),[null==f?void 0:f.sceneGraph]);Q.useEffect(()=>{R&&R.id!==a&&(0,er.sx)("Diff Modal New Layer Selected",{userId:y,fileKey:v,frameId:a,versionId:null==u?void 0:u.id,layer_id:R.id})},[R]);let z=Q.useRef(u);Q.useEffect(()=>{z.current!==u&&(z.current=u,V(void 0),F(null))},[u,z]);let j=void 0!==i,Y=void 0!==o,Z=Q.useCallback(e=>{"Escape"===e.key&&(R?(F(null),e.stopPropagation(),e.preventDefault()):r())},[r,R]);Q.useEffect(()=>(document.addEventListener("keydown",Z),()=>{document.removeEventListener("keydown",Z)}),[E,Z]),Q.useEffect(()=>{if("cc_versions"===g&&H&&!L){(0,rd.mf)(H)?(0,er.sx)("Diff Modal No Changes Between Versions",{userId:y,fileKey:v,frameId:a,versionId:null==u?void 0:u.id,initialVersion:P,versionMetadata:!1},{forwardToDatadog:!0}):(0,er.sx)("dev_mode.compare_changes.version_has_changes",{userId:y,fileKey:v,frameId:a,versionId:null==u?void 0:u.id,initialVersion:P,versionMetadata:!1},{forwardToDatadog:!0});let e=tW.sn.tryStop("dev_mode.compare_changes.switch_versions",null==u?void 0:u.id);e&&(0,er.sx)("dev_mode.compare_changes.switch_versions",{elapsedMs:e},{forwardToDatadog:!0})}},[g,P,L,H,u,a,v,y]),Q.useEffect(()=>{u&&null===o&&(0,er.sx)("dev_mode.compare_changes.no_image",{userId:y,fileKey:v,frameId:a,versionId:null==u?void 0:u.id},{forwardToDatadog:!0})},[o,u,a,v,y]);let X=()=>Q.createElement(as.BL,{isPreviewAvailable:j,showOptions:j,view:b,onSideBySideClick:()=>{C(as.Ss.SIDE_BY_SIDE)},onOverlayClick:()=>{C(as.Ss.OVERLAY)},additionalStyles:r2.tH}),[q,J]=Q.useState(new Set),ee=Q.useCallback((e,t)=>{t?J(t=>new Set([...t,...e])):J(t=>{let n=new Set(e);return new Set([...t].filter(e=>!n.has(e)))})},[J]),et=(0,Q.useCallback)(e=>{let t=null==e?void 0:e.value;if(t){let n="removed"===t.state?t.beforeNodeId:t.afterNodeId;F({id:n,zoomToSelection:!1}),S(t.beforeNodeId),A(t.afterNodeId);let a=[n],r=null==e?void 0:e.parent;for(;r;){let e=r.value;if(e){let t="removed"===e.state?e.beforeNodeId:e.afterNodeId;a.push(t)}r=r.parent}ee(a,!0)}else F(null),S(null),A(null)},[ee]),en=(0,Q.useCallback)(e=>{e?U("removed"===e.state?e.beforeNodeId:e.afterNodeId):U(ad.AD)},[U]),el=(0,Q.useCallback)(e=>U(e),[U]),ei=(0,Q.useCallback)((e,t)=>{e===(null==R?void 0:R.id)?(F(null),S(null),A(null)):(F({id:e,zoomToSelection:!0}),U(e),S((0,ad.dI)(t.basis.guid)),A((0,ad.dI)(t.change.guid)))},[null==R?void 0:R.id,U]),es=(0,Q.useMemo)(()=>H&&(0,rE.kF)(H,rv.FO.LEGO,void 0,rp)||{},[H]),ec=!(0,rd.mf)(es),ed=f?f.nodeId:a,{beforeBoxes:eu,afterBoxes:em}=function(e){let{frameId:t,historyFrameId:n,view:a,displayableChanges:r,historySceneGraph:l}=e;return(0,Q.useMemo)(()=>{if(!t||!n)return{};let e=function(e,t,n,a){let r=new tN.qo,l=r6(t,n,!0),i=r6(r,e,!0);return(0,rd.X$)(a,e=>{let n=r8(e.value,{scene:t,baseBox:l},{scene:r,baseBox:i});return{result:{beforeBox:n.before.box,afterBox:n.after.box,afterBoxNodeId:n.after.id,beforeBoxNodeId:n.before.id}}})}(t,l,n,r);return{beforeBoxes:(0,rd.X$)(e,e=>{let a=e.value,r=a.beforeBoxNodeId===n||a.afterBoxNodeId===t;return a.afterBox?a.beforeBox?{result:{rect:a.beforeBox,beforeNodeId:a.beforeBoxNodeId,afterNodeId:a.afterBoxNodeId,state:"changed",isRootFrame:r}}:{result:{rect:a.afterBox,beforeNodeId:a.beforeBoxNodeId,afterNodeId:a.afterBoxNodeId,state:"added",isRootFrame:r}}:{result:{rect:a.beforeBox,beforeNodeId:a.beforeBoxNodeId,afterNodeId:a.afterBoxNodeId,state:"removed",isRootFrame:r}}}),afterBoxes:(0,rd.X$)(e,e=>{let a=e.value,r=a.beforeBoxNodeId===n||a.afterBoxNodeId===t;return a.afterBox?a.beforeBox?{result:{rect:a.afterBox,beforeNodeId:a.beforeBoxNodeId,afterNodeId:a.afterBoxNodeId,state:"changed",isRootFrame:r}}:{result:{rect:a.afterBox,beforeNodeId:a.beforeBoxNodeId,afterNodeId:a.afterBoxNodeId,state:"added",isRootFrame:r}}:{result:{rect:a.beforeBox,beforeNodeId:a.beforeBoxNodeId,afterNodeId:a.afterBoxNodeId,state:"removed",isRootFrame:r}}})}},[t,n,a,r])}({frameId:a,historyFrameId:ed,historySceneGraph:W,view:b,displayableChanges:es,activeNode:B,selectedNode:R});Q.useEffect(()=>{if(!(null==R?void 0:R.id)||!(null==R?void 0:R.zoomToSelection)||!a||!ed)return;let{baseBeforeBox:e,baseAfterBox:t,resultBoxes:n}=function(e,t,n,a,r){let l=new tN.qo,i=r6(t,n,!0),o=r6(l,e,!0),s=[];for(let e of a){let n=(0,rd.lE)(r,t=>(0,ad.dI)(t.change.guid)===e||(0,ad.dI)(t.basis.guid)===e);if(n){let e=r8(n,{scene:t,baseBox:i},{scene:l,baseBox:o});s.push({beforeBox:e.before.box,afterBox:e.after.box,beforeBoxNodeId:e.before.id,afterBoxNodeId:e.after.id})}}return{baseBeforeBox:i,baseAfterBox:o,resultBoxes:s}}(a,W,ed,[R.id],es),{beforeBox:r,afterBox:l}=n[0]??{},i=1/0,o=1/0,s=-1/0,c=-1/0;r&&e&&(r.x-=e.w/2,r.y-=e.h/2,i=Math.min(i,r.x),o=Math.min(o,r.y),s=Math.max(s,r.x+r.width),c=Math.max(c,r.y+r.height)),l&&t&&(l.x-=t.w/2,l.y-=t.h/2,i=Math.min(i,l.x),o=Math.min(o,l.y),s=Math.max(s,l.x+l.width),c=Math.max(c,l.y+l.height)),i!==1/0&&G({x:i,y:o,width:s-i,height:c-o})},[R,G,a,es]),Q.useEffect(()=>()=>{G(void 0)},[G]);let ep=eu?{rootBox:eu,onBoxClicked:et,onBoxHovered:en,selectedNodeId:null==R?void 0:R.id,expandedLayers:q,ignoreState:"added",interactive:b===as.Ss.SIDE_BY_SIDE,hoveredNodeIdAtom:ll,recordingKey:"before"}:null,e_=em?{rootBox:em,onBoxClicked:et,onBoxHovered:en,selectedNodeId:null==R?void 0:R.id,expandedLayers:q,ignoreState:"removed",interactive:b===as.Ss.SIDE_BY_SIDE,hoveredNodeIdAtom:ll,recordingKey:"after"}:null,eh=!p&&!_;return Q.createElement(ru.aF,{title:l,onClose:r},Q.createElement("div",{className:r2.xZ},Q.createElement("div",{className:r2.f},p&&!_&&Q.createElement("div",{className:r2.Lq},Q.createElement(ry.G,{hasLoadedDiffs:!1})),eh&&Q.createElement("div",{className:r2.ND},(d||ec)&&Q.createElement("div",{className:ea()(r2._H,"devHandoffLeftPanel")},m&&Q.createElement("div",{className:r2.b6},Q.createElement("div",{className:ea()(r2.Zl)},Q.createElement(eO.Tx,{id:"collaboration.feedback.compare_changes_modal.history"}),(0,eo.kc)().dt_compare_changes_debug_helpers&&Q.createElement(ls,{fileKey:v,setSelectedVersion:m})),Q.createElement(rw.aS,{versions:d||[],selectedVersion:u,setVersion:e=>{e.id!==(null==u?void 0:u.id)&&(0,er.sx)("Diff Modal Selected Version Changed",{userId:y,fileKey:v,frameId:a,versionId:e.id}),tW.sn.reset("dev_mode.compare_changes.switch_versions",e.id),tW.sn.start("dev_mode.compare_changes.switch_versions",{key:e.id}),M(!0),P&&O(!1),m(e)}})),Q.createElement(rE.zg,{changesToDisplay:es,selectedNode:null==R?void 0:R.id,expandedLayers:q,setLayerExpanded:ee,onHover:el,onClick:ei})),Q.createElement("div",{className:r2.vF},b===as.Ss.SIDE_BY_SIDE&&Q.createElement("div",{className:r2.m_},Q.createElement("div",{className:r2.ZJ},s?Q.createElement("div",{className:r2.K9},Q.createElement("div",{className:r2.gO},s)):u&&Q.createElement(lr,{version:u,isSection:D})),Q.createElement("div",{className:r2.t4}),Q.createElement("div",{className:r2.ZJ},c?Q.createElement("div",{className:r2.K9},Q.createElement("div",{className:r2.gO},c)):Q.createElement("div",{className:r2.K9},Q.createElement(eO.Tx,{id:"collaboration.feedback.compare_changes_modal.current_image_header"})))),b===as.Ss.SIDE_BY_SIDE&&Q.createElement("div",{className:r2.Ik},Q.createElement(as.qW,{zoomPercentageOptions:r5,resetStateOnChangeValue:a,compareThumbnailSource:rv.FO.LEGO,zoomOnMousePointer:!0},Q.createElement("div",{className:r2.bV},Y?Q.createElement(rF,{value:ep},Q.createElement(ru.R$,{image:o,view:b,Overlay:r1})):Q.createElement(ru.Qp,null),Q.createElement("div",{className:r2.mq}),j?Q.createElement(rF,{value:e_},Q.createElement(ru.R$,{image:i,view:b,Overlay:r1})):Q.createElement(ru.Qp,null)),j&&X())),b===as.Ss.OVERLAY&&Q.createElement("div",{className:r2.Ik},Q.createElement(as.xY,{zoomPercentageOptions:r5,resetStateOnChangeValue:a,zoomOnMousePointer:!0},Q.createElement("div",{className:r2.Kk},Y?Q.createElement(rF,{value:ep},Q.createElement(ru.R$,{image:o,view:b,hideNoImageText:!0,Overlay:r1})):Q.createElement(ru.Qp,null),x&&(j?Q.createElement(rF,{value:e_},Q.createElement(ru.R$,{image:i,view:b,hideNoImageText:!0,opacity:w,Overlay:r1})):Q.createElement(ru.Qp,null))),j&&Q.createElement(as.u,{opacity:w,isAfterImageShown:x,onToggleClick:()=>N(!x),onOpacityChange:e=>T(e.a)}),j&&X())),K&&a&&ed&&Q.createElement(r9,{frameId:a,historyFrameId:ed,historySceneGraph:W,chunkChanges:H,discreteDiffing:!!f,setChunkChanges:e=>{M(!1),V(e)}}))),_&&Q.createElement("div",{className:r2.Q9},Q.createElement(eO.Tx,{id:"collaboration.feedback.compare_changes_modal.error"})),Q.createElement("div",null)),eh&&(K?H&&(0,rd.mf)(H)?Q.createElement(rg,{text:(0,eO.t)("collaboration.feedback.compare_changes_modal.no_changes")}):Q.createElement(lo,{layerChangeNodeId:I,layerBasisNodeId:k,layerBasisSceneGraph:W,selectedVersion:u||void 0,displayableChanges:es,showSelectLayerHint:!R}):Q.createElement(rg,{text:""}))))}function lo({layerChangeNodeId:e,layerBasisNodeId:t,layerBasisSceneGraph:n,selectedVersion:a,displayableChanges:r,showSelectLayerHint:l}){let i=function(){let[e]=(0,am.$h)(),[t,n]=(0,Q.useState)(e),a=(0,eD.v4)(),[r,l]=(0,Q.useState)({...a}),i=(0,eB.aq)(r),o=(0,au.ZA)(r,i),s=(0,Q.useCallback)(e=>{n(e),(0,er.sx)("dev_mode.compare_changes.change_inspection_mode",{mode:e})},[]);(0,Q.useLayoutEffect)(()=>{"first-party"!==r.type&&(l(eD.S8[eD.uz]),"properties"!==t&&n("properties"))},[r,t]);let c=(0,$.d4)(e=>e.mirror.appModel.devHandoffPreferences),[d,u]=(0,Q.useState)({...c}),m=(0,eB.wA)(r),p=(0,Q.useMemo)(()=>{var e;return(null==(e=d.codeExtensionPreferences)?void 0:e[r.id])??{}},[d,r]),_=(0,Q.useMemo)(()=>{let e=[];if(!o)return e;let t=(null==p?void 0:p.unit)||eU.tKW.PIXEL;return e.push({displayText:(0,eO.t)("dev_handoff.alternative_units.dimension_unit"),header:!0},...au.zq.map(e=>{let n=e===eU.tKW.PIXEL?(0,eO.t)("dev_handoff.alternative_units.pixel_unit"):m;return{name:e.toString(),displayText:n,isChecked:t===e,callback:()=>{var t;u({...d,codeExtensionPreferences:{...d.codeExtensionPreferences,[r.id]:{...(null==(t=d.codeExtensionPreferences)?void 0:t[r.id])||{},unit:e}}})},recordingKey:e===eU.tKW.PIXEL?"pixel":"scaled"}})),e},[o,d,p,m,r]),f=(0,eD.AC)(r),h=(0,eD.Pt)(f),g=(0,ap.Z)({codeLanguage:r,onChange:l,shouldHideLanguagesWithNoAltUnitSupport:!1,onlyShowFirstPartyLanguages:!0,formatter:h}),E={codeLanguage:r,codeLanguageOptions:g,activeCodegenPlugin:f,formatter:h,onCodeLanguageChange:ey.lQ},v=(0,am.Ar)();return{inspectionMode:v.find(e=>e===t)||v[0],setInspectionMode:s,supportsAlternativeUnits:o,preferenceOptions:_,preferences:p,codeLanguageApi:E,inspectionModes:v}}();return l?Q.createElement(rg,{text:(0,eO.t)("collaboration.feedback.compare_changes_modal.select_a_layer")}):Q.createElement(r_,{layerChangeNodeId:e,layerBasisNodeId:t,layerBasisSceneGraph:n,selectedVersion:a,displayableChanges:r,preferencesApi:i})}function ls({fileKey:e,setSelectedVersion:t}){let n=(0,Q.useRef)(null),[a,r]=(0,Q.useState)("Upload local file");return Q.createElement("label",{className:r2.$8},a,Q.createElement("input",{style:{display:"none"},ref:n,type:"file",accept:".fig",onChange:async()=>{var a,l;let i=null==(l=null==(a=n.current)?void 0:a.files)?void 0:l[0];if(i&&af.F){let n=await (0,ah._G)(el.D,(0,eo.kc)(),af.F,i),a=el.D.getState().mirror.appModel.currentPage,l=`${e}-${a}-debug`;ag.Ht.set(l,Promise.resolve({key:l,canvas:n.bytes})),r(i.name),t({id:"debug"})}}}))}let lc=(0,aE.Ju)(function(e){var t;let{nodeId:n,layerName:a}=e,r=(0,$.wA)(),l=(0,$.d4)(e=>"fullscreen"===e.selectedView.view?e.selectedView.editorType:null),{Sprig:i}=(0,al.A)(),o=(0,t_.tS)(),s=null==(t=(0,no.E1)())?void 0:t.toISOString(),c=(0,ef.fp)(a_.Ib)[1],{versions:d,versionsQueryLoaded:u}=(0,ru.DS)(n),m=(0,$.d4)(e=>e.selectedView.compareChangesVersionId??null),p=(0,Q.useMemo)(()=>m?d.find(e=>e.id===m)??null:null,[d,m]),_=Q.useCallback(e=>{e||(C(void 0),le(e,r,!1)),e!==m&&(C(void 0),function(e,t){let n=el.D.getState().selectedView;t(nP.$T({...n,compareChangesVersionId:e}))}(e,r))},[r,m]),[f,h]=(0,ef.fp)(ag.tP),[g,E]=Q.useState(!0),[v,y]=Q.useState(!1),[b,C]=Q.useState(void 0),w=void 0!==b,[T,x]=Q.useState(void 0),N=void 0!==T,k=(0,ru.t$)(p,n);Q.useEffect(()=>{if(!g||!w||!N||!u)return;E(!1);let e=tW.sn.tryStop("dev_handoff.view_history",n);e&&(0,er.sx)("dev_handoff.view_history",{elapsedMs:e,origin:"cc_versions"},{forwardToDatadog:!0}),i("track","open_compare_changes",{origin:"cc_versions"})},[i,g,w,N,u,n]);let S=(0,$.d4)(e=>{var t;return(null==(t=e.modalShown)?void 0:t.type)===lc.type});Q.useEffect(()=>{var e;if(S&&u&&!p){if(0===d.length){C(null),_(void 0);return}if(s){for(let e of d)if(e.lastViewed){_(null==e?void 0:e.id);return}}_(null==(e=d[0])?void 0:e.id)}},[S,s,p,_,d,u]),Q.useEffect(()=>{var e;if(k||!p)return;let t=performance.now();null==(e=(0,ag._t)(p,n))||e.then(({canvas:e,key:n})=>{let a=performance.now();if(n===f)return;if(!eU.glU.loadPartialHistoryScene(e))throw Error("Error loading history canvas");h(n);let r=performance.now();(0,er.sx)("version_diffing_performance_metrics",{name:"historic_nodes_load_time",fileKey:o,fetchBytesDurationMs:Math.trunc(a-t),loadNodesDurationMs:Math.trunc(r-a),canvasBytesLength:e.byteLength,fetchMode:"node",entrypoint:"lego_layer"})}).catch(e=>{(0,ar.$D)(ao.e.DEVELOPER_TOOLS,Error(`Error fetching history canvas: ${e}`)),(0,ag.w_)(p),y(!0)})},[k,p,f,h,l,o,n]),Q.useEffect(()=>{let e=setTimeout(()=>{if(!k){C(void 0);return}C(la({nodeId:n,documentIndex:tN.x1,showError:()=>{C(null)}}))},ru._W);return()=>clearTimeout(e)},[n,p,k]),Q.useEffect(()=>{let e=setTimeout(()=>{let e=()=>{x(void 0),(0,ar.$D)(ao.e.DEVELOPER_TOOLS,Error("Current image loading error")),y(!0)},t=la({nodeId:n,showError:e});if(!t){e();return}x(t)},ru._W);return()=>clearTimeout(e)},[n]);let I=Q.useCallback(()=>{c(new Map),_(void 0),r(n9.Ce())},[c,_,r]);return Q.createElement(li,{nodeId:n,onCloseModal:I,modalTitle:a?Q.createElement(eO.Tx,{id:"collaboration.feedback.compare_changes_modal.layer_name_header",layerName:a}):Q.createElement(eO.Tx,{id:"collaboration.feedback.compare_changes_modal.header"}),currentImage:T,historicImage:b,versions:d,selectedVersion:p,setSelectedVersion:e=>{_(e.id)},renderLoadingBar:g,modalError:v,origin:"cc_versions"})},"LegoCompareChangesVersionsModal",aE.ZU.YES),ld=(0,aE.Ju)(function(e){let{nodeId:t,detachedInfoStatus:n,origin:a}=e,r=(0,$.wA)(),{Sprig:l}=(0,al.A)(),[i,o]=Q.useState(!0),[s,c]=Q.useState(!1),[d,u]=Q.useState(void 0),[m,p]=Q.useState(void 0),_=void 0!==d,f=void 0!==m,h="loaded"===n.status,g=h?n.result:void 0;Q.useEffect(()=>{if(!i||!_||!f||!h)return;o(!1);let e=tW.sn.tryStop("dev_handoff.view_history",t);e&&(0,er.sx)("dev_handoff.view_history",{elapsedMs:e,origin:a},{forwardToDatadog:!0}),l("track","open_compare_changes",{origin:"cc_detached_component"})},[l,i,_,f,t,h,a]),Q.useEffect(()=>{let e=setTimeout(()=>{if(!h||!(null==g?void 0:g.dataComponentId)){u(void 0);return}u(la({nodeId:null==g?void 0:g.dataComponentId,detachedComponentsScene:(null==g?void 0:g.dataLocation)==="temp-scene",showError:()=>{u(null)}}))},ru._W);return()=>clearTimeout(e)},[h,g]),Q.useEffect(()=>{let e=setTimeout(()=>{let e=()=>{p(void 0),c(!0)},n=la({nodeId:t,showError:e});if(!n){e();return}p(n)},ru._W);return()=>clearTimeout(e)},[t]);let E=Q.useCallback(()=>{r(n9.Ce())},[r]),v=Q.createElement(eO.Tx,{id:"collaboration.feedback.compare_changes_modal.header"}),y=Q.createElement(eO.Tx,{id:"inspect_panel.node_type.main_component"}),b={nodeId:(null==g?void 0:g.dataComponentId)??ad.AD,sceneGraph:new tN.qo((null==g?void 0:g.dataLocation)==="temp-scene"?tN.ju.DETACHED:tN.ju.CURRENT)};return Q.createElement(li,{nodeId:t,onCloseModal:E,modalTitle:v,currentImage:m,historicImage:d,historicHeader:y,renderLoadingBar:i,modalError:s,discreteDiffingInput:b})},"LegoCompareChangesDetachedModal",aE.ZU.YES),lu=(0,aE.Ju)(function(e){let{changeNodeId:t,basisNodeId:n,initialSelectedNodeId:a,isComparingOverrides:r=!1}=e,l=(0,$.wA)(),{Sprig:i}=(0,al.A)(),o=ln(t),s=ln(n),[c,d]=Q.useState(!1),[u,m]=Q.useState(void 0),[p,_]=Q.useState(void 0),f=void 0!==u,h=void 0!==p;Q.useEffect(()=>{if(!f||!h)return;let e=tW.sn.tryStop("dev_handoff.view_history",t),n=r?"cc_overrides":"cc_nodes";e&&(0,er.sx)("dev_handoff.view_history",{elapsedMs:e,origin:n},{forwardToDatadog:!0}),i("track","open_compare_changes",{origin:n})},[i,r,f,h,t]),Q.useEffect(()=>{m(la({nodeId:n,showError:()=>m(null)}))},[n]),Q.useEffect(()=>{let e=()=>{_(void 0),d(!0)},n=la({nodeId:t,showError:e});if(!n){e();return}_(n)},[t]);let g=Q.useCallback(()=>{l(n9.Ce())},[l]),E=Q.createElement(eO.Tx,{id:"collaboration.feedback.compare_changes_modal.header"}),v={nodeId:n,sceneGraph:new tN.qo(tN.ju.CURRENT)};return o.node&&s.node?Q.createElement(li,{nodeId:t,onCloseModal:g,modalTitle:E,currentImage:p,historicImage:u,currentHeader:lt(o.node,o.backingSymbolData),historicHeader:lt(s.node,s.backingSymbolData),renderLoadingBar:!1,modalError:c,discreteDiffingInput:v,initialSelectedNodeId:a}):null},"LegoCompareChangesForNodesModal",aE.ZU.YES);var lm=n(383987);function lp(e){let t=(0,n6.wS)(),n=(0,n7.VI)(),a=(0,$.wA)(),r=(0,t5.U)();return Q.useCallback(()=>{n&&"loaded"===t.status&&(r("Diff Modal Compare Changes Clicked",{nodeId:n.id,origin:"cc_detached_component"}),tW.sn.reset("dev_handoff.view_history",n.id),tW.sn.start("dev_handoff.view_history",{key:n.id}),a(n9.to({type:ld,data:{nodeId:n.id,detachedInfoStatus:t,origin:e}})))},[e,t,a,n,r])}function l_(e,t){var n;let a=null==(n=(0,at.iZ)())?void 0:n.id,r=(0,n7.T1)(),l=(0,n7.An)(r),i=(0,t_.tS)(),o=(0,$.wA)(),s=(0,ef.md)(n8),c=(0,ae.eY)();return Q.useCallback(()=>{if(tW.sn.reset("dev_handoff.view_history",e||void 0),tW.sn.start("dev_handoff.view_history",{key:e||void 0}),(0,er.sx)("Diff Modal Compare Changes Clicked",{userId:a,fileKey:i,frameId:e,entrypoint:"lego_layer",analyticsEventOrigin:t}),e){let t=(0,no.BJ)(c,e,!0);if(t){let n=t.lastEditedAt;s[e]=new Date(n),ef.zl.set(n8,{...s})}}o(n9.to({type:lc,data:{nodeId:e,layerName:l}}))},[t,o,i,e,l,c,s,a])}var lf=n(244387),lh=n(292229),lg=n(57522);function lE(e,t){let n;let a=new Set;if(e.forEach(e=>{let t=lv(e);t&&a.add(t)}),0===a.size)return null;let r=Array.from(a).sort(ly).map(e=>{switch(e){case"color":return(0,eO.t)("dev_handoff.overrides.color");case"border":return(0,eO.t)("dev_handoff.overrides.border");case"text":return(0,eO.t)("dev_handoff.overrides.text");case"effect":return(0,eO.t)("dev_handoff.overrides.effect");case"layout":return(0,eO.t)("dev_handoff.overrides.layout");case"shape":return(0,eO.t)("dev_handoff.overrides.shape");case"style":return(0,eO.t)("dev_handoff.overrides.style")}});switch(r.length){case 1:n=r[0];break;case 2:n=Q.createElement(eO.Tx,{id:"dev_handoff.overrides.properties2",prop1:r[0],prop2:r[1]});break;case 3:n=Q.createElement(eO.Tx,{id:"dev_handoff.overrides.properties3",prop1:r[0],prop2:r[1],prop3:r[2]});break;default:n=Q.createElement(eO.Tx,{id:"dev_handoff.overrides.properties_more",prop1:r[0],prop2:r[1],prop3:r[2],count:r.length-3})}return Q.createElement(eO.Tx,{id:"dev_handoff.overrides.hint",layerType:t?Q.createElement(eO.Tx,{id:"dev_handoff.overrides.instance"}):Q.createElement(eO.Tx,{id:"dev_handoff.overrides.layer"}),properties:n})}let lv=e=>e.includes("prototype")||e.includes("user")||e.includes("prop")?null:e.includes("stroke")||e.includes("border")||e.includes("corner")?"border":e.includes("fill")||e.includes("background")?"color":e.includes("text")||e.includes("font")||e.includes("paragraph")||e.includes("ot-features")||"letter-spacing"===e||"line-height"===e?"text":e.includes("effect")?"effect":e.includes("size")||e.includes("stack")?"layout":"count"===e||e.includes("vector")?"shape":"opacity"===e||"visible"===e||"blend-mode"===e?"style":null;function ly(e,t){return lb.indexOf(e)-lb.indexOf(t)}let lb=["color","border","text","effect","layout","shape","style"];function lC({marginTop:e}){let t=(0,lg.kl)("overrides");return!t||(0,lh.gl)(t)?null:Q.createElement(lw,{overriddenProperties:t.overriddenProperties,instanceGuid:t.instanceGuid,isPrimary:t.isPrimary,marginTop:e})}function lw({overriddenProperties:e,instanceGuid:t,isPrimary:n,marginTop:a}){let r=(0,lf.d)(!1,ey.lQ,t),l=lE(e,n);return l&&r?Q.createElement("div",{className:ea()({[tw.cx.mt8.$]:a}),style:{alignSelf:"stretch"}},Q.createElement(ay._,{color:ay.S.FIGJAM,text:l})):null}var lT=n(131350),lx=n(921370),lN=n(787145),lk=n(998973),lS=n(19599),lI=n(640783),lA=n(989368),lP=n(563015),lO=n(544404),lL=n(693917),lM=n(258458),lD=n(955505),lR=n(474554),lF=n(134576),lB=n(42910),lU=n(191944),lH=n(613420),lV=n(695524),lG=n(296707),lK=n(857497),lW=n(228842),lz=n(772990),lj=((p=lj||{}).GENERIC="GENERIC",p.OFFLINE="OFFLINE",p.THUMBNAIL_TIMEOUT="THUMBNAIL_TIMEOUT",p);function lY(e){let[t,n]=Q.useState(),[a,r]=Q.useState(),[l,i]=Q.useState(!1),[o,s]=Q.useState(!1),[c,d]=Q.useState(!1),u=Q.useCallback(()=>{var t;let a=eU.glU.generatePlaygroundThumbnail(e??null),l=eU.glU.getPlaygroundNodeData();(null==(t=a.pixels)?void 0:t.length)>0?(n({src:(0,lW.Pv)(a.pixels,new lB.Mi(a.width,a.height)),width:a.width/a.scale,height:a.height/a.scale}),r(l),s(!1)):s(!0)},[e]),m=Q.useCallback(e=>{i(e),d(!0)},[d]),{onSetPercentImagesLoaded:p,onResetTracker:_}=function(e){let[t,n]=Q.useState(0),[a,r]=Q.useState(0),[l,i]=Q.useState(null),o=Q.useCallback(()=>{n(0),r(0),i(null)},[]);return Q.useEffect(()=>{function n(n,o){if(t>n&&t<o&&a<=n){let n=Date.now();(null===l||n-l>1e3)&&(i(n),r(t),e())}}n(.25,.5),n(.5,.75),n(.75,1)},[a,l,e,t]),Q.useEffect(()=>{1===t&&(e(),r(1))},[e,t]),Q.useMemo(()=>({onSetPercentImagesLoaded:n,onResetTracker:o}),[n,o])}(u);return Q.useEffect(()=>(0,lK.k)(m),[m]),Q.useEffect(()=>()=>eU.glU.clearPlaygroundScene(),[]),Q.useEffect(()=>{c&&setTimeout(()=>{u(),d(!1)},0)},[c,d,u]),Q.useMemo(()=>({setPlaygroundNodeData:r,onSetPercentImagesLoaded:p,onResetTracker:_,thumbnailData:t,playgroundNodeData:a,hasChangesToReset:l,hasThumbnailErrors:o,setHasChangesToReset:i}),[r,p,_,t,a,l,o,i])}var lZ=n(639061),lX=n(563438);function lq(){let e=(0,lk.lA)(),t=(0,$.wA)(),n=(0,t_.tS)(),a=Q.useMemo(()=>!!e&&eU.Egt.nodeIsSoftDeleted(e.guid),[e]),r=Q.useCallback(()=>{if(!e)return;let a=(0,lS.yW)(e);if(a&&a!==n){if(!e.publishID)return;let n=(0,lS.xl)(a,e.publishID);t(lZ.V3({url:n}))}else t(n9.AS()),eU.glU.goToSymbolOrStateGroupById(e.guid,!1)},[e,t,n]);return!e||a?null:Q.createElement(aJ.K0,{svg:lX.A,onClick:r,"data-tooltip":e.isState?(0,eO.t)("design_systems.playground.open_variant_in_library"):(0,eO.t)("design_systems.playground.open_component_in_library"),"data-tooltip-type":nO.Ib.TEXT})}var lJ=n(921325);function lQ({fill:e,modes:t,recordingKey:n}){let a=(0,eG.J2)((0,eH.UK)().showGuids),r=Object.entries(t).map(([e,t])=>({...t,setKey:e})).filter(e=>e.modeOptions.length>1).sort((e,t)=>e.collectionName.toLocaleLowerCase().localeCompare(t.collectionName.toLocaleLowerCase()));return 0===r.length?null:Q.createElement(Q.Fragment,null,Q.createElement("div",{className:"playground_modes_section--title--wPRzF text--fontPos11--2LvXf text--_fontBase--QdLsd"},Q.createElement(eO.Tx,{id:"design_systems.playground.variable_modes_title"})),r.map(t=>Q.createElement(lJ.yj,{fill:e,key:t.setKey,onChange:e=>{e!==e3.Mo&&e!==e3.Yn&&((0,an.c2)(t.explicitMode||t.inheritMode,e)||(e===e3.Ws||e===e3.UE?eU.glU.setVariableModeForPlayground(t.setKey,e):eU.glU.setVariableModeForPlayground(t.setKey,e.guid)))},showExplicitOnly:!1,variableSetName:t.collectionName,variableSetKey:t.setKey,modeOptions:t.modeOptions,explicitModeID:t.explicitMode,inheritedModeID:t.inheritMode,isShowingGuids:a,showInheritedModeOption:!1,recordingKey:nh.Pt(n,`mode-${t.setKey}`)})))}var l$=n(151584),l0=n(575446),l1=n(955766);let l2="playground_props_section--divider--I23uK";var l5=n(132208);function l4({componentProps:e,bubbledComponentId:t,productComponentGUID:n,sceneGraph:a,instanceSwapPickerInitialHeight:r,instanceSwapPickerInitialPosition:l,recordingKey:i,containerWidth:o}){let s=(0,ae.T3)(),{typedPropDefsExcludingHidden:c,variantPropDefs:d,assignmentValuesByDefId:u,allStateVariantProps:m,backingStateVariantProps:p,statePropertyValues:_}=(0,l0.n)(t,e,n,s);return c.length||d.length?Q.createElement(l$.S,{titleClassName:"playground_props_section--bubbledPropsTitle--8SBPC",isInitiallyOpen:c.length<lF.qC,title:Q.createElement(l1.iN,{canCollapse:!0,shouldHideButtons:!0,isInComponentPlayground:!0,instanceAndSublayerGUIDs:[t],containerWide:o===lR.O2.WIDE,recordingKey:i})},Q.createElement(lF.tO,{typedPropDefs:c,variantPropDefs:d,assignmentValues:u,allStateVariantProps:m,backingStateVariantProps:p,statePropertyValues:_,productComponentGUID:n,propDimension:lR.OE.ASSIGNMENT,guids:[t],forBubbledProps:!0,splitVariantAndTypedProps:!1,instanceSwapPickerInitialHeight:r,instanceSwapPickerInitialPosition:l,sceneGraph:a,inPlayground:!0,recordingKey:i,containerWidth:o})):null}function l3({componentProps:e,moduleProps:t,moduleFrameData:n,label:a,playgroundGUID:r,productComponentGUID:l,sceneGraph:i,viewOnlyMode:o,instanceSwapPickerInitialHeight:s,instanceSwapPickerInitialPosition:c,recordingKey:d,containerWidth:u,errorData:m,shouldShowDividerAboveProps:p}){let _=(0,ae.T3)(),f=r&&e,{typedPropDefsExcludingHidden:h,variantPropDefs:g,assignmentValuesByDefId:E,allStateVariantProps:v,backingStateVariantProps:y,statePropertyValues:b}=(0,l0.n)(r??"",e??{},l,_),C=Q.useMemo(()=>{var a,l,i;if(!f)return[];let o=null==(a=e[r])?void 0:a.bubbledNestedInstanceGUIDs;if(o)return o;let s=null==(l=null==t?void 0:t[r])?void 0:l.bubbledNestedInstanceGUIDs;if(s)return s;if(null==n?void 0:n.selectedFrameGUID){let e=null==(i=null==t?void 0:t[n.selectedFrameGUID])?void 0:i.bubbledNestedInstanceGUIDs;if(e)return e}return[]},[e,f,n,t,r]);return m?m.shouldHideError?null:Q.createElement(Q.Fragment,null,Q.createElement("div",{className:l2}),Q.createElement("div",{className:"playground_props_section--errorBannerContainer--d3nQO"},Q.createElement(lO.z,{orientation:"vertical",iconSrc:l5.A,onClose:()=>m.setShouldHideError(!0),variant:"warning",title:function(e){switch(e){case"GENERIC":return(0,eO.t)("design_systems.playground.unable_to_load");case"OFFLINE":return(0,eO.t)("design_systems.playground.unable_to_load_while_offline");case"THUMBNAIL_TIMEOUT":return(0,eO.t)("design_systems.playground.unable_to_load_thumbnail")}}(m.errorType)},function(e){switch(e){case"GENERIC":return(0,eO.t)("design_systems.playground.unable_to_load_help_text");case"OFFLINE":return(0,eO.t)("design_systems.playground.unable_to_load_while_offline_help_text");case"THUMBNAIL_TIMEOUT":return(0,eO.t)("design_systems.playground.unable_to_load_thumbnail_help_hext")}}(m.errorType)))):f&&(h.length||g.length||C.length)?Q.createElement(Q.Fragment,null,p&&Q.createElement("div",{className:l2}),a,Q.createElement(lF.tO,{typedPropDefs:h,variantPropDefs:g,assignmentValues:E,allStateVariantProps:v,backingStateVariantProps:y,statePropertyValues:b,productComponentGUID:l,propDimension:lR.OE.ASSIGNMENT,guids:[r],viewOnlyMode:o,forBubbledProps:!1,splitVariantAndTypedProps:!!o,instanceSwapPickerInitialHeight:s,instanceSwapPickerInitialPosition:c,sceneGraph:i,inPlayground:!0,recordingKey:d,containerWidth:u}),C.map(t=>{var n,a;let r=(null==(n=e[t])?void 0:n.backingSymbol)||"",l=(null==(a=e[r])?void 0:a.containingStateGroupGUID)||r;return l?Q.createElement(l4,{key:t,componentProps:e,bubbledComponentId:t,productComponentGUID:l,sceneGraph:i,instanceSwapPickerInitialHeight:s,instanceSwapPickerInitialPosition:c,recordingKey:d,containerWidth:u}):null})):null}var l6=n(658850),l7=n(97670),l8=n(798415);let l9=Q.memo(({guid:e})=>{let t=(0,$.wA)(),n=(0,$.d4)(lD.AF),a=(0,n6.wS)(),r="loaded"===a.status&&"temp-scene"===a.result.dataLocation?a.result:void 0,l=Q.useRef(null),i=function(){let e=(0,$.d4)(lD.AF),t=null==e?void 0:e.guid,n=(0,n6.wS)(),a="loaded"===n.status?n.result:void 0,{setPlaygroundNodeData:r,thumbnailData:l,playgroundNodeData:i,hasChangesToReset:o}=lY(),s=Q.useCallback(()=>{let e=!1;a?e=eU.glU.setPlaygroundSceneFromDetachedInfo(a.dataComponentId,"temp-scene"===a.dataLocation):t&&(e=eU.glU.setPlaygroundSceneFromSelection()),e||(eU.glU.clearPlaygroundScene(),r(void 0))},[t,a,r]);return Q.useEffect(()=>{s()},[s]),Q.useMemo(()=>i&&l?{hasChangesToReset:o,refetchAndResetScene:s,nodeData:i,thumbnailData:l}:null,[i,l,o,s])}(),o=Q.useMemo(()=>new tN.qo(r?tN.ju.DETACHED:tN.ju.PLAYGROUND),[r]),s=Q.useMemo(()=>{var e;if(!i)return"";if("loaded"===a.status)return a.result.isVariant?a.result.dataStateGroupId??a.result.dataComponentId:a.result.dataComponentId;let t=null==(e=i.nodeData)?void 0:e.playgroundGUID;return t?((0,lR.Yi)([t],o)||(0,lR.k4)([t],o))??"":""},[i,o,a]),c=Q.useMemo(()=>{var e;return(null==(e=o.get(s))?void 0:e.name)??""},[s,o]),d=(0,lL.IO)(e??s),[u,m]=Q.useState(d),p=(0,$.d4)(e=>e.userFlags.dismissed_playground_banner),_=Q.useCallback(()=>{t(tB.b({dismissed_playground_banner:!0}))},[t]),f=Q.useCallback(()=>{t((0,lM.vq)())},[t]),h=Q.useCallback(()=>{null==i||i.refetchAndResetScene()},[i]),[g,E]=Q.useState(void 0);if(Q.useLayoutEffect(()=>{E(void 0),requestAnimationFrame(()=>{var e;E(null==(e=l.current)?void 0:e.offsetHeight)})},[]),!i||!n)return null;let{thumbnailData:v,nodeData:y}=i;if(!y)return null;let{playgroundGUID:b,componentProps:C,moduleProps:w,modeData:T}=y;if(!v)return null;let x=(0,eo.kc)().dt_component_bg_improvements?u:d;return Q.createElement(tS.aF,{size:"fitContent",title:Q.createElement(ie,null),titleClassName:"playground_modal--modalTitleContainer--M7mdu",className:"playground_modal--modal--3F6xP",useModalViewScroll:!1,onHide:()=>(0,er.sx)("Playground closed"),onModalClick:f,modalRef:l,height:g},Q.createElement("div",{className:ea()("playground_modal--container--oiCFH",g?"playground_modal--hasHeight--HGbkD":null)},Q.createElement("div",{className:"playground_modal--thumbnailContainer--ZaF9V",style:(0,lL.CU)(x)},Q.createElement("img",{src:v.src,className:"playground_modal--thumbnail--JPv2M",width:v.width,height:v.height,alt:(0,eO.t)("design_systems.playground.thumbnail_alt")}),(0,eo.kc)().dt_component_bg_improvements&&Q.createElement("div",{className:"playground_modal--themeButton---BLzd","data-preferred-theme":x},Q.createElement(aJ.K0,{svg:"light"===u?l7.A:l6.A,"data-tooltip-type":nO.Ib.TEXT,"data-tooltip":(0,eO.t)("design_systems.playground.change_background"),onClick:()=>m(e=>"light"===e?"dark":"light")}))),Q.createElement("div",{className:"playground_modal--propsContainer--CAA9y"},Q.createElement("div",{className:"playground_modal--propsContainerHeader--oGDtk"},Q.createElement("div",{className:"playground_modal--propsContainerName--ZCWzH"},Q.createElement(eM.B,{className:"playground_modal--propsContainerIcon--X-SA7",svg:"INSTANCE"===n.type?eX.A:e$.A}),Q.createElement("div",{className:"playground_modal--productComponentName--NaHb9 ellipsis--ellipsis--Tjyfa"},c)),Q.createElement("div",{className:"playground_modal--propsContainerHeaderButtons--MPFZ-"},"INSTANCE"===n.type&&Q.createElement(lq,null),Q.createElement(aJ.K0,{className:"playground_modal--resetButton--ZUesP",svg:l8.A,onClick:h,"data-tooltip":(0,eO.t)("design_systems.playground.reset_properties"),"data-tooltip-type":nO.Ib.TEXT,disabled:!i.hasChangesToReset,recordingKey:"resetPlaygroundProps"}))),!p&&Q.createElement("div",{className:"playground_modal--bannerContainer--rQy3f playground_modal--_propsContainerElement--F1mOU"},Q.createElement(lO.z,{orientation:"vertical",iconSrc:l5.A,variant:"dev",title:(0,eO.t)("design_systems.playground.banner_header"),onClose:_},Q.createElement(eO.Tx,{id:"design_systems.playground.banner_content"}))),Q.createElement(ab.P,null,Q.createElement(ae.q0.Provider,{value:o},Q.createElement("div",{className:"playground_modal--propsSectionContainer--3xF-J playground_modal--_propsContainerElement--F1mOU"},Q.createElement(l3,{containerWidth:lR.O2.REGULAR,componentProps:C,moduleProps:w,moduleFrameData:void 0,playgroundGUID:b,productComponentGUID:s,sceneGraph:o,viewOnlyMode:n.isState?lF.BK.VARIANT_PROPS:void 0,recordingKey:"playgroundPicker"})),Q.createElement("div",{className:"playground_modal--modesSectionContainer--NaZ-S"},Q.createElement(lQ,{modes:T||{}})))))))});function ie(){let e=(0,$.wA)();return Q.createElement("div",{className:"playground_modal--modalTitle--e4b41"},Q.createElement("strong",null,Q.createElement(eO.Tx,{id:"design_systems.playground.component_playground"})),Q.createElement(aO.Jn,{onClick:()=>e(n9.Ce())}))}let it=(0,aE.Ju)(l9,"PlaygroundModal");var ia=n(725396),ir=n(833019),il=n(54656),ii=n(765872),io=n(118941),is=n(709744),ic=n(73550),id=n(709955);function iu({description:e,emptyStateText:t}){let n=Q.useRef(null),a=Q.useRef(void 0),[r,l]=Q.useState(!0);Q.useLayoutEffect(()=>{let t=a.current;a.current=e,n.current&&t!==e&&l(n.current.scrollHeight>96)},[e]);let i=!!e&&r;return Q.createElement("div",{className:"asset_documentation_panel--documentationSection--Uiw1f"},e?Q.createElement("div",{className:ea()("asset_documentation_panel--documentationRt--dqAKD")},Q.createElement(id.R,{fallback:null,errorFallback:null,value:e,quillClassName:ea()("asset_documentation_panel--quill--ARHQQ",{"asset_documentation_panel--quillCollapsed--ezPrQ":r}),quillInnerRef:n}),r&&Q.createElement("div",{className:"asset_documentation_panel--quillCollapsedOverlay--UlWJU"})):t?Q.createElement("div",{className:"asset_documentation_panel--documentationDescriptionDefault--vxlbl asset_documentation_panel--documentationDescription--la2iI text--fontPos11--2LvXf text--_fontBase--QdLsd",dir:"auto",ref:n},t):null,i&&Q.createElement("div",{className:"asset_documentation_panel--showMoreButtonContainer--ZkHWJ"},Q.createElement(nN.d,{label:(0,eO.t)("dev_handoff.docs.show_full"),onClick:()=>l(!1)})))}var im=n(764531),ip=n(487664),i_=n(656966);n(661743);let ih=(0,nf.eU)({});var ig=n(220485),iE=n(633470),iv=n(48688),iy=n(941898);let ib=class{async generateLinkPreview({plugin:e,link:t}){var n;try{let a=await ra.R.instance.enqueue(this.createEnqueueArgs({command:"linkpreview",plugin:e,onStart:()=>(0,rn.se)({name:t.linkName,url:t.linkUrl,isInherited:t.isInherited,nodeId:t.nodeId})}));if((null==a?void 0:a.type)==="PLAIN_TEXT")(0,iy.n7)({link:t,linkPreviewJson:a});else if((null==a?void 0:a.type)==="AUTH_REQUIRED"){let a=ef.zl.get(ih),r=(null==(n=a[e.plugin_id])?void 0:n.links)??[];ef.zl.set(ih,n=>({...n,[e.plugin_id]:{plugin:e,links:[...r,t]}}))}return a??null}catch(e){console.error(e)}return null}async runAuth({plugin:e,links:t}){ef.zl.set(tj.H,tj._.PLUGIN);try{return await ra.R.instance.enqueue(this.createEnqueueArgs({command:"auth",plugin:e,onStart:()=>(0,rn.Ut)(t)}))??null}catch(e){console.error(e)}return null}createEnqueueArgs({command:e,plugin:t,onStart:n}){var a;return{runPluginArgs:{plugin:t,command:"linkpreview",queryMode:!1,runMode:"linkpreview"===e?"linkpreview":"auth",triggeredFrom:"linkpreview"===e?"related-link-preview":"related-link-auth",openFileKey:(null==(a=el.D.getState().openFile)?void 0:a.key)||"",isWidget:!1},onStart:n,mode:"run-and-terminate"}}};ib.instance=new ib;let iC=(0,i_.Up)();function iw(e,t){if((0,rr.ZQ)(t)&&!(0,eo.kc)().plugins_related_links_local||!iC.has(t.plugin_id))return!1;let n=t.manifest.relatedLinkDomains||t.manifest.devResourceDomains;if(!n)return!1;for(let t of n){let n=(0,iE.tk)(t);if(!n)continue;let a=e.split("?")[0];if(n.exec(a))return!0}if((0,i_.P8)(t.plugin_id)){if(iT(e)&&e.match(/selectedIssue=[A-Z]+-[0-9]+/))return!0;iT(e)&&e.match(/[A-Z]+-[0-9]+/)&&(0,er.sx)("Jira Issue Url Not Matched",{url:e})}return!1}function iT(e){return!!e.match(/https?:\/\/[a-zA-Z0-9-]+\.(atlassian\.net|jira\.com)/)}var ix=((_=ix||{}).OPEN="open",_.PREVIEW="preview",_);function iN(e){let t=function(e){let t=(0,ig.$1)(),n=(0,ig.cW)(),a=(0,$.d4)(e=>e.mirror.appModel.useLocalRelatedLinkPlugin),r=Q.useMemo(()=>0===iC.size?null:Object.values(t).find(t=>!!iw(e,t)),[e,t]),l=Q.useMemo(()=>0===iC.size?null:Object.values(n).map(e=>(0,iE.uF)(e)).find(t=>!!iw(e,t)),[e,n]),i=Q.useMemo(()=>Array.from(iC),[]),o=(0,ig.uf)(i,{enabled:!l}),s=Q.useMemo(()=>o.find(t=>!!iw(e,t))??null,[e,o]);return a&&r?r:l||s||null}(e),n=(0,ig.YN)();return t&&n(t)?t:null}function ik(e){var t,n;let a=iN(e),r=(0,ef.md)(ih);if(!a||!(null==(t=a.manifest.capabilities)?void 0:t.includes("linkpreview")))return null;if(null==(n=r[a.plugin_id])?void 0:n.links.some(t=>t.linkUrl===e))return;let l=async({link:e})=>{await ib.instance.generateLinkPreview({plugin:a,link:e})};return{plugin:a,genPreview:l}}var iS=n(2137),iI=n(728859);function iA({isEditable:e,link:t,onOpenDeleteModal:n,onOpenEditModal:a}){let r=(0,$.wA)(),l=!(0,iS.G)(t.linkUrl),i=(0,ae.eY)(),o=(0,lk.Nf)()??"",s=i.get(o),c=t.isInherited||t.isVariant,d=(0,t5.U)(),u=(0,lf.d)(!t.isVariant),m=Q.useCallback(()=>{r(nA.lW({stringToCopy:t.linkUrl})),d("Dev Handoff Related Links Copy Hyperlink",{nodeId:o,nodeType:null==s?void 0:s.type,source:"web"})},[r,o,t.linkUrl,null==s?void 0:s.type,d]),p=l?t.linkUrl:new URL(t.linkUrl).host;p.startsWith("www.")&&(p=p.slice(4));let{Dropdown:_,toggleDropdown:f,dropdownTargetRef:h,isDropdownShown:g}=(0,aw.B)(t.id),E=function(e){let t=iN(e),n=(0,t_.tS)(),a=(0,eD.v4)(),r=(0,e_.Xr)(tj.H);if(!t||!n||!(0,iE.$u)(t.manifest.capabilities))return null;let l=async({link:e})=>{var l;await ri.instance.maybeTerminatePlugin(a),await (0,lU.yQ)();let i=(0,iv.D)(),o=(null==(l=t.manifest.editorType)?void 0:l.includes(rr.FW.DEV))?"open-dev-resource":"open-related-link",s={mode:"run-forever",runPluginArgs:{plugin:t,command:o,queryMode:!1,openFileKey:n,isWidget:!1,runMode:"default",triggeredFrom:"related-link-click"}},c={url:e.linkUrl,name:e.linkName,isInherited:e.isInherited,nodeId:e.nodeId},d=ra.R.instance.isCurrentlyRunning(s);return(r(tj._.PLUGIN),d&&(0,rn.Jc)())?ra.R.instance.enqueue({...s,onStart:async()=>await (0,rn.xG)({devResource:c})}):ra.R.instance.enqueue({...s,reuseExistingRunState:!1,onStart:async()=>((0,rn.r2)(5e3,{devResource:c}),(await i).triggerRunEvent({command:o,link:c}))})};return{plugin:t,callback:l}}(t.linkUrl),v=c?e$.A:iI.A,y=Q.createElement("div",{ref:h},Q.createElement(nM.K0,{onClick:f,onMouseDown:e=>e.stopPropagation(),"data-tooltip-type":nO.Ib.TEXT,"data-tooltip":c?(0,eO.t)("dev_handoff.developer_related_links.main_component_tooltip"):(0,eO.t)("dev_handoff.developer_related_links.additional_options"),svg:v,className:c?"developer_related_link_row--iconButtonInherited--l69ho":void 0})),b=[{displayText:(0,eO.t)("dev_handoff.developer_related_links.copy_link"),callback:()=>m()}];E&&b.unshift({displayText:(0,eO.t)("dev_handoff.developer_related_links.open_in_new_tab"),callback:()=>{I()}}),c&&u&&b.unshift({displayText:(0,eO.t)("dev_handoff.developer_related_links.go_to_main_component"),callback:()=>{u()}}),t.isNested&&b.push({displayText:(0,eO.t)("dev_handoff.developer_related_links.select_layer"),callback:()=>{eU.w3z.selectAndFocusOnNode(t.nodeId,!0)}}),e&&b.push({displayText:(0,eO.t)("dev_handoff.developer_related_links.edit_link"),callback:()=>a(t)},{displayText:"",separator:!0},{displayText:(0,eO.t)("dev_handoff.developer_related_links.delete_link"),callback:()=>n(t.id,t.linkUrl)});let[C,w]=Q.useState(!1),[T,x]=Q.useState(!1),N=t.linkPreview,k=N&&"PLAIN_TEXT"===N.type&&N.text,S=k&&!t.isUserOverride&&E,I=()=>{(0,im.e)(t.linkUrl)||r((0,ip.RK)({rawInput:t.linkUrl})),d("Dev Handoff Related Links Open Hyperlink",{nodeId:o,nodeType:null==s?void 0:s.type,source:"web"})},A=Q.createElement(iP,{name:t.linkName,url:E?E.plugin.name:p,isHovering:C}),P=S&&E?Q.createElement(iP,{name:k,url:E.plugin.name,isHovering:C}):null,O=(0,nh.Pt)("developerRelatedLinkRow",t.id);return Q.createElement("div",{className:"developer_related_link_row--link--fvcCC"},Q.createElement(ns.GG,{className:ea()("developer_related_link_row--linkInfo--214Y7"),onClick:()=>{let e={action:ix.OPEN,link:t};if(E&&(0,i_.Zl)(E.plugin.plugin_id,aZ.z4.getIsExtension())){t.isNested&&eU.w3z.selectAndFocusOnNode(t.nodeId,!0),E.callback(e),d("Dev Handoff Related Links Run Plugin From Hyperlink",{nodeId:o,nodeType:null==s?void 0:s.type,source:"web",pluginId:E.plugin.plugin_id}),r(tB.b({[aM.xb]:!0}));return}aZ.z4.getIsExtension()?(0,a8.mz)(t.linkUrl):(r((0,ip.RK)({rawInput:t.linkUrl})),d("Dev Handoff Related Links Open Hyperlink",{nodeId:o,nodeType:null==s?void 0:s.type,source:"web"}))},onMouseEnter:()=>w(!0),onMouseLeave:()=>w(!1),recordingKey:(0,nh.Pt)(O,"button")},Q.createElement("div",{className:"developer_related_link_row--favicon--ZrNbB"},Q.createElement(nm.v,{url:t.linkUrl})),P??A),Q.createElement("div",{className:ea()("developer_related_link_row--additionalButtons--tKT0M",C||T||c||g?tw.cx.opacity1.$:tw.cx.opacity0.$),onMouseEnter:()=>x(!0),onMouseLeave:()=>x(!1)},y,g&&Q.createElement("div",{onMouseEnter:()=>x(!1)},Q.createElement(_,{items:b,showPoint:!1}))))}function iP({name:e,url:t,isHovering:n}){return Q.createElement(nk.Y,{direction:"horizontal",spacing:4,padding:{right:32}},Q.createElement("p",{className:"developer_related_link_row--linkName--p0e0K ellipsis--ellipsis--Tjyfa",style:n?tT.sx.add({maxWidth:"50%"}).$:void 0},e),n&&Q.createElement(Q.Fragment,null,Q.createElement("p",{className:"developer_related_link_row--linkDivider--20WA5"},"\xb7"),Q.createElement("p",{className:"developer_related_link_row--linkURL--eaX2b ellipsis--ellipsis--Tjyfa blue_link--blueLink--9rlnd"},t)))}let iO="component_documentation_panel--propsList--qfFNq text--fontPos11--2LvXf text--_fontBase--QdLsd",iL="component_documentation_panel--heading--x-ri2";function iM(){(0,lm.jY)();let e=(0,lk.lA)(),[t,n]=(0,n6.XX)(),a=(0,is.AK)(t,n),r=(null==e?void 0:e.isState)?null==e?void 0:e.parentNode:null,{backingSymbolDescription:l,parentDescription:i}=(0,n6.iX)(null==e?void 0:e.description,null==r?void 0:r.description),o=l&&i?i+"\n\n"+l:l||i;return Q.useMemo(()=>({links:a,description:o}),[a,o])}function iD({propDef:e}){let{type:t,name:n}=e,a=e.kind===ir.u.TYPED?e.defaultValue:void 0,r=(0,eF.mJ)(a),l=(0,eF.mJ)(null==r?void 0:r.parentGuid);if(function(e){if(e.type===eU.J0O.BOOL)return!0;if(e.type!==eU.J0O.VARIANT)return!1;let t=e.values.map(e=>e.toLowerCase());if(2===t.length)for(let e of ic.NE){let n=t.indexOf(e[0]),a=t.indexOf(e[1]);if(-1!==n&&-1!==a)return!0}return!1}(e))return void 0===a?Q.createElement(nL._p,{name:n,value:(0,eO.t)("dev_handoff.docs.prop_boolean")}):Q.createElement(nL._p,{name:n,value:"true"===a?(0,eO.t)("dev_handoff.docs.prop_boolean_default_true"):(0,eO.t)("dev_handoff.docs.prop_boolean_default_false")});switch(t){case eU.J0O.VARIANT:return Q.createElement(nL._p,{key:e.name,name:e.name,value:(0,eO.t)("dev_handoff.docs.prop_variant",{values:e.values.join(", ")})});case eU.J0O.TEXT:return Q.createElement(nL._p,{name:n,value:(0,eO.t)("dev_handoff.docs.prop_string",{defaultValue:a})});case eU.J0O.INSTANCE_SWAP:let i=(null==r?void 0:r.isState)?null==l?void 0:l.name:null==r?void 0:r.name,o=i?` (${i})`:"";return Q.createElement(nL._p,{name:n,value:`${(0,eO.t)("dev_handoff.docs.prop_instance")}${o}`})}return null}function iR({component:e}){let t=(0,$.d4)(lD.qd),n=(0,n6.wS)(),a=(0,$.d4)(ii.$F),r=Q.useMemo(io.Cu,[]),l=(0,$.d4)(e=>r(e,t)),i=(0,ae.eY)(),{detachedCompPropsDefs:o,detachedVariantProps:s}=(0,n6.t7)(n,i),c=e.isState||"loaded"===n.status&&n.result.isVariant,d=[...a,...o],u=[...l,...s],m=((0,$.d4)(il.K4)||[]).filter(e=>e.isBubbled),p=Object.entries((0,e3.kN)()).filter(([e,t])=>t.modeOptions.length>1);if(!(d.length>0||p.length>0||m.length>0))return null;let _=c?d.filter(e=>e.kind!==ir.u.VARIANT):d;return Q.createElement("div",{className:iO},Q.createElement("div",{className:iL},Q.createElement("strong",null,Q.createElement(eO.Tx,{id:"dev_handoff.docs.props"}))),c&&u.map(([e,t])=>Q.createElement(nL._p,{key:e,name:e,value:t})),_.map(e=>Q.createElement(iD,{key:e.name,propDef:e})),!aZ.z4.getIsExtension()&&Q.createElement(iF,null))}function iF(){let e=(0,$.wA)(),t=(0,lk.M4)(),n=Q.useCallback(()=>{e(n9.to({type:it,data:{guid:null==t?void 0:t.guid}})),(0,er.sx)("Playground opened")},[e,null==t?void 0:t.guid]);return Q.createElement("div",{className:"component_documentation_panel--propsPlaygroundButtonContainer--q7Usj"},Q.createElement(lP.$,{width:"fill-parent",onClick:n,recordingKey:"openInPlayground",dataTestId:"openInPlaygroundButton"},Q.createElement(eO.Tx,{id:"dev_handoff.playground.open_in_playground"})))}function iB(e){let t=e.variables&&e.variables.value[e.name],n=t&&t.type===eU.Z_n.ALIAS?t.value:void 0,a=(0,ia.u)(n);return Q.createElement(nL._p,{name:e.name,value:e.value,variable:null==a?void 0:a.name})}function iU(){let e=(0,$.d4)(lD.qd),t=Q.useMemo(ii.z4,[]),{consumedVariable:n}=(0,e3.u3)(["VARIANT_PROPERTIES"]),a=function(e){if(!e||(0,lh.gl)(e)||e.type!==eU.Z_n.EXPRESSION||e.value.expressionFunction!==eU.JTp.RESOLVE_VARIANT)return null;let t=e.value.expressionArguments[0];return t.type!==eU.Z_n.MAP?null:t}(n),r=(0,$.d4)(n=>t(n,e)),l=Object.entries((0,e3.kN)()).filter(([e,t])=>t.modeOptions.length>1);return r.length>0||l.length>0?Q.createElement("div",{className:iO},Q.createElement("div",{className:iL},Q.createElement(eO.Tx,{id:"dev_handoff.docs.props"})),r.map(([e,t])=>Q.createElement(iB,{key:e,name:e,value:t,variables:a})),!aZ.z4.getIsExtension()&&Q.createElement(iF,null)):null}function iH(){let{links:e=[]}=iM();return 0===e.length?null:Q.createElement("div",{className:"component_documentation_panel--documentationLinks--UtNIi text--fontPos11--2LvXf text--_fontBase--QdLsd"},Q.createElement("div",{className:iL},Q.createElement("strong",null,Q.createElement(eO.Tx,{id:"dev_handoff.docs.links_title"}))),Q.createElement("div",null,e.map(e=>{let t=(0,lI.Gw)(e.uri),n=t?(0,lA.Zr)(t):(0,eO.t)("dev_handoff.docs.links_default"),a={id:e.uri,nodeId:"",fileKey:"",linkName:n,linkUrl:e.uri,linkPreviewJson:"",isUserOverride:!1,isInherited:!1,linkPreview:null};return Q.createElement(iA,{key:e.uri,link:a,isEditable:!1,onOpenDeleteModal:ey.lQ,onOpenEditModal:ey.lQ})})))}function iV(){let e=(0,lk.M4)(),{description:t}=iM();return e?Q.createElement(Q.Fragment,null,Q.createElement("div",{className:"component_documentation_panel--spacer--JOA9K"}),e?"INSTANCE"===e.type?Q.createElement(iU,null):Q.createElement(iR,{component:e}):null,Q.createElement(iu,{description:t}),Q.createElement(iH,null)):null}var iG=n(65369);let iK="component_preview_panel--componentPreviewContainer--aKLR0 common--well--J0WtH",iW="component_preview_panel--componentPreviewImage--AZj5d",iz=(0,rT.jz)(tI.devHandoffComponentPreviewMaxHeight);function ij(){let e=(0,iG.rL)(),t=(0,lk.ro)(),n=e-64,a=function(e,t=iz){let n=(0,n6.wS)(),a=(0,lk.lA)(),r="loaded"===n.status&&n.result.dataComponentId?n.result.dataComponentId:null==a?void 0:a.guid,l=(0,lL.c6)(r),i="loaded"===n.status&&"temp-scene"===n.result.dataLocation,o=4*e,s=4*t;return Q.useMemo(()=>{if(!r)return;let e=eU.glU.getDefaultStateForLocalStateGroup(r)||r;if(!(0,ad.fn)((0,ad.sH)(e)))return;let[t,n]=eU.Vzr.generateThumbnailForNode(e,o,s,4,{forceContentsOnly:!0,inDetachedComponentsScene:i});if(!n||0===n.length||!t)return;let{width:a,height:c}=t;return{url:URL.createObjectURL(new Blob([n])),backgroundStyle:l,renderWidth:a/4,renderHeight:c/4}},[l,i,r,s,o])}(n);if(!t)return null;let r=(null==a?void 0:a.renderWidth)??n,l=(null==a?void 0:a.renderHeight)??iz;return Q.createElement(ns.D8,{className:iK,style:null==a?void 0:a.backgroundStyle,role:"button",tabIndex:0},(null==a?void 0:a.url)&&Q.createElement(tk.J,{className:iW,src:a.url,style:{maxWidth:r,maxHeight:l}}))}var iY=n(132361),iZ=n(769514),iX=n(345146),iq=n(3249);let iJ=new(n(452022)).b({name:"code-connect",dependencies:[],routeHints:[],exports:["figmadoc.ts*","typings.ts*","code_connect_view.ts*"],friendFiles:[]}).createLazyComponent(()=>Promise.all([n.e(1920),n.e(7199)]).then(n.bind(n,966714)).then(e=>e.CodeConnectSection),{loading:()=>null,error:iq.H4.NONE,componentName:"CodeConnectSection"});var iQ=n(330152),i$=n(787193),i0=n(672002),i1=n(656927);let i2=new class{createSnippet(e,t,n){var a;let r=i1.Ay.post("/api/figmadocs/snippet",{node_id:e,file_key:t,snippet:n});null==(a=(0,i$.WB)())||a.optimisticallyCreate({Figmadoc:{[`optimistic-snippet-${(0,i0.g)()}`]:{figmadoc:JSON.stringify(n),instanceFigmadocs:null,fileKey:t,nodeId:e,createdAt:new Date,updatedAt:new Date,label:"",type:"snippet"}}},r)}updateSnippet(e,t,n,a){var r;let l=i1.Ay.put("/api/figmadocs/snippet",{node_id:t,file_key:n,snippet:a});null==(r=(0,i$.WB)())||r.optimisticallyUpdate({Figmadoc:{[e]:{figmadoc:JSON.stringify(a),fileKey:n,nodeId:t}}},l)}};var i5=n(296210),i4=n.n(i5);class i3{constructor(e){let{selectionStart:t,selectionEnd:n}=e;this.elm=e,this.start=t,this.end=n,this.value=this.elm.value}position(e,t){let{selectionStart:n,selectionEnd:a}=this.elm;return this.start="number"!=typeof e||isNaN(e)?n:e,this.end="number"!=typeof t||isNaN(t)?a:t,this.elm.selectionStart=this.start,this.elm.selectionEnd=this.end,this}insertText(e){return this.elm.focus(),this.elm.setRangeText(e),this.value=this.elm.value,this.position(),this}getSelectedValue(e,t){let{selectionStart:n,selectionEnd:a}=this.elm;return this.value.slice("number"!=typeof e||isNaN(e)?n:e,"number"!=typeof t||isNaN(t)?a:e)}getLineStartNumber(){let e=this.start;for(;e>0;)if(e--,"\n"===this.value.charAt(e)){e++;break}return e}getIndentText(){let e=this.getLineStartNumber(),t=this.getSelectedValue(e),n="";return t.replace(/(^(\s)+)/,(e,t)=>n=t),n}lineStarInstert(e){if(e){let t=this.start,n=this.getLineStartNumber(),a=this.getSelectedValue(n);this.position(n,this.end).insertText(a.split("\n").map(t=>e+t).join("\n")).position(t+e.length,this.end)}return this}lineStarRemove(e){if(e){let t=this.start,n=this.getLineStartNumber(),a=this.getSelectedValue(n),r=RegExp(`^${e}`,"g"),l=t-e.length;r.test(a)||(l=t),this.position(n,this.end).insertText(a.split("\n").map(e=>e.replace(r,"")).join("\n")).position(l,this.end)}}notifyChange(){let e=new Event("input",{bubbles:!0,cancelable:!1});this.elm.dispatchEvent(e)}}function i6(e){e.stopPropagation(),e.preventDefault()}let i7={position:"relative",textAlign:"left",boxSizing:"border-box",padding:0,overflow:"hidden"},i8={position:"absolute",top:0,left:0,height:"100%",width:"100%",resize:"none",color:"inherit",opacity:.8,overflow:"hidden",MozOsxFontSmoothing:"grayscale",WebkitFontSmoothing:"antialiased",WebkitTextFillColor:"transparent"},i9={margin:0,border:0,background:"none",boxSizing:"inherit",display:"inherit",fontFamily:"inherit",fontSize:"inherit",fontStyle:"inherit",fontVariantLigatures:"inherit",fontWeight:"inherit",letterSpacing:"inherit",lineHeight:"inherit",tabSize:"inherit",textIndent:"inherit",textRendering:"inherit",textTransform:"inherit",whiteSpace:"pre-wrap",wordBreak:"keep-all",overflowWrap:"break-word",outline:0},oe=Q.forwardRef((e,t)=>{let{prefixCls:n="w-tc-editor",value:a,padding:r=10,minHeight:l=16,placeholder:i,language:o,className:s,style:c,onChange:d,...u}=e,[m,p]=(0,Q.useState)(e.value||"");(0,Q.useEffect)(()=>p(e.value||""),[e.value]);let _=(0,Q.useRef)(null);(0,Q.useImperativeHandle)(t,()=>_.current);let f={paddingTop:r,paddingRight:r,paddingBottom:r,paddingLeft:r},h=(0,Q.useMemo)(()=>`<pre aria-hidden=true><code>${i4().sanitize((0,nF.g)(o,String(m||"")))}</code><br /></pre>`,[m,o]),g=(0,Q.useMemo)(()=>Q.createElement("div",{style:{...i9,...f,minHeight:l},className:ea()(nG.y,`${n}-preview`,{[`language-${o}`]:!!o}),dangerouslySetInnerHTML:{__html:h}}),[n,o,h]);return Q.createElement("div",{style:{...i7,...c},className:ea()("code_panels_shared--code--VPQ05",n,s)},Q.createElement("textarea",{autoComplete:"off",autoCorrect:"off",spellCheck:!1,autoCapitalize:"off",...u,placeholder:i,onKeyDown:e=>{u.onKeyDown&&!1===u.onKeyDown(e)||function(e){let t=new i3(e.target),n=e.nativeEvent.code.toLocaleLowerCase();if("tab"===n)i6(e),t.start===t.end?t.insertText("  ").position(t.start+2,t.end+2):t.getSelectedValue().indexOf("\n")>-1&&e.shiftKey?t.lineStarRemove("  "):t.getSelectedValue().indexOf("\n")>-1?t.lineStarInstert("  "):t.insertText("  ").position(t.start+2,t.end),t.notifyChange();else if("enter"===n){i6(e);let n=`
${t.getIndentText()}`;t.insertText(n).position(t.start+n.length,t.start+n.length),t.notifyChange()}else if("escape"===n)t.elm.blur();else if(n&&/^(quote|backquote|bracketleft|digit9|comma)$/.test(n)&&t.getSelectedValue()){i6(e);let a=t.getSelectedValue(),r="";switch(n){case"quote":r=`'${a}'`,e.shiftKey&&(r=`"${a}"`);break;case"backquote":r=`\`${a}\``;break;case"bracketleft":r=`[${a}]`,e.shiftKey&&(r=`{${a}}`);break;case"digit9":r=`(${a})`;break;case"comma":r=`<${a}>`}t.insertText(r),t.notifyChange()}}(e)},style:{...i9,...i8,...f,minHeight:l,...i&&!m?{WebkitTextFillColor:"inherit"}:{}},ref:_,onChange:e=>{p(e.target.value),d&&d(e)},className:`${n}-text`,value:m}),g)});var ot=n(321112);function on({doc:e,docId:t}){let n=(0,$.wA)(),[a,r]=Q.useState(e?e.snippet:"// Write your snippet here"),l=(0,t_.tS)(),i=(0,eF.uQ)(),o=Q.useCallback(()=>{if(!i||!l)return;let e={type:"snippet",snippet:a};t?i2.updateSnippet(t,i,l,e):i2.createSnippet(i,l,e),n(n9.Ce())},[a,l,i,t,n]);return Q.createElement(tS.aF,{className:ot.yl,tintedModalBackground:!0},Q.createElement("div",{className:ot.DD},Q.createElement(eO.Tx,{id:"dev_handoff.figmadocs.edit_sample_code"})),Q.createElement("div",{className:ot.jE},Q.createElement("div",{className:ea()(nK,nW)},Q.createElement(oe,{value:a,language:"jsx",onChange:e=>{r(e.target.value)},padding:1})," ")),Q.createElement("div",{className:ot.v0},Q.createElement(tC.nR,{className:ot.Lu,onClick:ey.lQ},Q.createElement(eO.Tx,{id:"general.cancel"})),Q.createElement(tC.$$,{className:ot.pL,onClick:o},Q.createElement(eO.Tx,{id:"general.save"}))))}let oa=(0,aE.Ju)(function(){return Q.createElement(on,null)},"AddManualSnippetModal"),or=(0,aE.Ju)(function({doc:e,docId:t}){return Q.createElement(on,{doc:e,docId:t})},"EditManualSnippetModal"),ol="figmadocs--figmadocWrapper--4SMJB",oi="figmadocs--fileLink--gVeAA utilities--bodySmall--JyKR1",oo={Swift:"swift",TypeScript:"jsx"};function os(){return Q.createElement("a",{href:"https://www.figma.com/developers/code-connect",target:"_blank"},Q.createElement(iZ.Ex,{color:iZ.zE.DEFAULT,text:(0,eO.t)("general.beta"),className:"figmadocs--betaBadge--Wauhf text--fontPos9--naThA text--_fontBase--QdLsd",dataTooltipType:nO.Ib.TEXT,dataTooltip:(0,eO.t)("dev_handoff.figmadoc.beta_badge_tooltip"),dataTooltipShowAbove:!0,dataTooltipMaxWidth:160,dataTooltipTimeout:50}))}function oc(){return Q.createElement(iZ.Ex,{color:iZ.zE.DEFAULT,text:(0,eO.t)("dev_handoff.figmadocs.connected"),icon:Q.createElement(iY.x,null),className:"figmadocs--connectedBadge--5NAUO",dataTooltipType:nO.Ib.TEXT,dataTooltip:(0,eO.t)("dev_handoff.figmadocs.connected_code_snippet"),dataTooltipShowAbove:!0,dataTooltipMaxWidth:160,dataTooltipTimeout:50})}function od(e){try{let{url:t}=e,n=new URL(t).pathname.split("/"),a=n.indexOf("blob");-1===a&&(a=n.indexOf("tree"));let r=n.slice(a+2).join("/"),l=r.length>0?r:n[n.length-1];return Q.createElement("span",{className:"figmadocs--linkFilePath--DBTZW"},l)}catch(e){return null}}function ou(){let e=(0,$.wA)(),t=Q.useCallback(()=>{e(n9.to({type:oa}))},[e]);return Q.createElement("div",{className:"figmadocs--connectToCodeCard--Kde90 common--well--J0WtH"},Q.createElement("div",null,(0,eO.t)("dev_handoff.figmadoc.connect_to_code")),Q.createElement("div",null,(0,eO.t)("dev_handoff.figmadoc.connect_to_code.body")),Q.createElement("div",{className:"figmadocs--connectToCodeCardButtonWrapper--Z2ict"},Q.createElement(tC.nR,null,(0,eO.t)("dev_handoff.figmadoc.connect_to_code")),Q.createElement(tC.nR,{onClick:t},(0,eO.t)("dev_handoff.figmadoc.add_manual_snippet"))))}function om({doc:e,docId:t}){let n=(0,iQ.vp)(e),a=(0,$.wA)(),r=Q.useCallback(()=>{a(n9.to({type:or,data:{docId:t,doc:e}}))},[a,e,t]);return Q.createElement(nL.VZ,{title:(0,eO.t)("inspect_panel.code.code"),recordingKey:"figmadoc",additionalHeaders:Q.createElement("button",{onClick:r},"EDIT")},Q.createElement("div",{className:ol},Q.createElement(nJ,{code:[n],section:n,key:n.name,copyAllActionEnabled:!1})))}function op({doc:e,additionalHeaderActions:t,instanceFigmadocs:n,instanceProperties:a}){var r;let l=(0,ae.eY)(),i=(0,iX.N)((0,eo.kc)().dt_code_connect_js_templates?e.template:void 0,n,a),o=Q.useCallback(e=>{eU.w3z.selectAndPanToNode(e)},[]);if((0,eo.kc)().dt_code_connect_js_templates){if(!i)return null;if((null==i?void 0:i.result)==="SUCCESS"){let{code:a,language:s,instances:c}=function(e,t){let{sections:n,language:a}=e.data,r=0,l={};return{language:a,code:n.map(e=>{if("CODE"===e.type)return e.code;if("INSTANCE"===e.type){let n=`_INTERNAL_INSTANCE_KEY_${r++}_`,a=t.get(e.guid);return l[n]={id:e.guid,name:(null==a?void 0:a.name)??""},n}return console.error("Unknown section type",e),""}).join(""),instances:l}}(i,l),d=e.source,u=new Set([...(null==(r=e.templateData)?void 0:r.imports)??[],...Object.entries(n).map(([e,t])=>{var n;return a.includes(`<${t.component}`)?(null==(n=null==t?void 0:t.templateData)?void 0:n.imports)??[]:[]}).flat()]),m=a;return u.size>0&&(m=Array.from(u).join("\n")+"\n\n"+a),Q.createElement(iJ,{code:m,language:s,instances:c,fallback:null,errorFallback:null},e=>e&&Q.createElement(nL.VZ,{hideHeader:!0,noBorder:!0,recordingKey:"figmadoc",padding:nL.UZ.NONE},Q.createElement("div",{className:ol},e.map(e=>Q.createElement(nJ,{collapseLongSections:!1,code:[e],section:e,key:e.name,copyAllActionEnabled:!1,onInstancePillClick:o,additionalHeaderActions:t,footerActions:Q.createElement(Q.Fragment,null,d?Q.createElement("a",{href:d,target:"_blank",className:oi},Q.createElement(nm.v,{url:d}),Q.createElement(od,{url:d})):null,Q.createElement(nk.M,null),Q.createElement(oc,null)),type:"connected"})))))}{(0,eo.b5)()&&console.error("Error evaluating code connect template",i);let e=null==i?void 0:i.data.error,t=(0,eO.t)("dev_handoff.figmadocs.error_unknown");return(null==e?void 0:e.type)==="PROPERTY_NOT_FOUND"&&(t=(0,eO.t)("dev_handoff.figmadocs.error_property_not_found",{propertyName:e.propertyName})),(null==e?void 0:e.type)==="PROPERTY_TYPE_MISMATCH"&&(t=(0,eO.t)("dev_handoff.figmadocs.error_property_type_mismatch",{propertyName:e.propertyName,propertyType:e.expectedType??"unknown"})),Q.createElement("div",{className:"figmadocs--errorBannerWrapper--eemEO utilities--bodySmall--JyKR1"},Q.createElement(ay._,{color:ay.S.ERROR,text:t}))}}return Q.createElement(o_,{doc:e})}function o_({doc:e}){var t,n;let a=e?(0,iQ.bE)(e):void 0,r=oo[e.language||"default"]||"jsx",l=e.template;return(null==(t=e.templateData)?void 0:t.imports)&&e.templateData.imports.length>0&&(l=[...(null==(n=e.templateData)?void 0:n.imports)??[]].join("\n")+"\n\n"+l),Q.createElement(iJ,{code:l,language:r,fallback:null,errorFallback:null},e=>e&&Q.createElement(nL.VZ,{hideHeader:!0,noBorder:!0,recordingKey:"figmadoc",padding:nL.UZ.NONE},Q.createElement("div",{className:ol},e.map(e=>Q.createElement(nJ,{code:[e],section:e,key:e.name,copyAllActionEnabled:!1,footerActions:Q.createElement(Q.Fragment,null,a?Q.createElement("a",{href:a,target:"_blank",className:oi},Q.createElement(nm.v,{url:a}),Q.createElement(od,{url:a})):null,Q.createElement(nk.M,null),Q.createElement(oc,null)),type:"connected"})))))}function of(){let e=(0,ae.eY)(),t=(0,t_.tS)(),n=(0,$.d4)(lD.qd)[0],a=function(e){switch(e){case eD.uz:case eD.A0:return"React";case eD.p:case eD.Ap:return"SwiftUI";default:return}}((0,eD.v4)().id),[r,l]=Q.useState(a),{id:i,doc:o,instanceFigmadocs:s,availableLabels:c,disabled:d}=(0,iQ._3)(n,e,r),u=(0,$.wA)(),m=(0,aX.U)(),p="ui3"===(0,et.DP)().version;if((0,eo.kc)().dt_figmadoc_manual_snippets&&!d){if(!o)return Q.createElement(ou,null);if("type"in o&&"snippet"===o.type&&null!==i)return Q.createElement(om,{doc:o,docId:i})}else if(!o||"type"in o&&"snippet"===o.type)return null;let _=(0,iQ.bf)(n,e,t);return Q.createElement(op,{doc:o,instanceFigmadocs:s,instanceProperties:_,additionalHeaderActions:Q.createElement(Q.Fragment,null,Q.createElement(os,null),Q.createElement(nk.M,null),Q.createElement(aT.l6,{className:"figmadocs--labelSelect--C-SIX",id:"figmadoc-label-select",onChange:e=>l(e),dropdownShown:m,dispatch:u,property:o.label,formatter:{format:e=>e},dropdownWidth:p?"120px":"auto",dropdownAlignment:"right",onDropdownHidden:ey.lQ},c.map(e=>Q.createElement(aT.c$,{key:e,value:e}))))})}var oh=n(911578);function og({height:e}){return Q.createElement("div",{style:{height:e}})}function oE(){let e=(0,lk.lA)(),t=(0,n6.wS)(),n=(0,$.d4)(t_.sS),a=(0,eF.uQ)(),r=(0,t5.U)(),l="loaded"===t.status?t.result:void 0,i=(0,lS.yW)(e),o=l&&l.isExternal?l.fileKey:i&&i!==n?i:n,s=o!==n,c=l?l.nodeId:s?null==e?void 0:e.publishID:null==e?void 0:e.guid,d=(0,lf.d)(!1,()=>{r("Dev Mode Navigated To Main Component",{selectedNodeId:a,external:s,detached:!!l})});if(!c||!d||!o)return null;let u=!1;return s?t&&(u="loading"===t.status||"errors"===t.status):u=eU.Egt.nodeIsSoftDeleted(c),Q.createElement(aJ.K0,{svg:s?oh.A:e$.A,"data-tooltip-type":nO.Ib.TEXT,"data-tooltip":(0,eO.t)("dev_handoff.instance_navigation.go_to_main_component"),onClick:d,disabled:u,recordingKey:"devHandoffNavigateInstanceButton"})}function ov(){let e=(0,eF.VW)(),t=(0,n6.wS)();return(null==e?void 0:e.isLooseComponent)||(null==e?void 0:e.isState)||(null==e?void 0:e.isStateGroup)||(null==e?void 0:e.type)==="INSTANCE"||"disabled"!==t.status?Q.createElement(nL.VZ,{recordingKey:"componentPanel",hideHeader:!0,noBorder:!0,padding:nL.UZ.NONE},(0,eo.kc)().dt_figmadoc&&Q.createElement(eP.tH,{boundaryKey:"Figmadoc",fallback:eP.H4.NONE_I_KNOW_WHAT_IM_DOING},Q.createElement(of,null),Q.createElement(og,{height:16})),Q.createElement(ij,null),Q.createElement(iV,null)):null}var oy=n(141205);let ob=(0,aE.Ju)(function(){return Q.createElement(tS.Rw,{destructive:!0,confirmationTitle:Q.createElement(eO.Tx,{id:"inspect_panel.detached_component.remove_attachment"}),confirmText:Q.createElement(eO.Tx,{id:"dev_handoff.detached_component.remove_attachment_confirm"}),onConfirm:()=>{oy.VU.get("remove-detached-symbol-id","menu")()}},Q.createElement("p",null,Q.createElement(eO.Tx,{id:"dev_handoff.detached_component.remove_attachment_text_body"})))},"RemoveDetachmentStatusModal");var oC=n(828489);let ow="dev_handoff_nodes_panel--nodesPanel--4Pea0",oT="dev_handoff_nodes_panel--item--FYINO",ox="dev_handoff_nodes_panel--itemSelectedReadySections--Wladq dev_handoff_nodes_panel--item--FYINO",oN="dev_handoff_nodes_panel--timestampContainer--dGH49",ok="dev_handoff_nodes_panel--timestamp--5sWkT text--fontPos11--2LvXf text--_fontBase--QdLsd ellipsis--ellipsis--Tjyfa",oS="dev_handoff_nodes_panel--readySectionsEmptyStateRow--3qQXK",oI="dev_handoff_nodes_panel--readySectionsIcon--gNtWg",oA="dev_handoff_nodes_panel--readySectionsContent--3ilof text--fontPos11--2LvXf text--_fontBase--QdLsd",oP="header--panelContainer---mpIY",oO="header--panelBodyContainer--XY807",oL="header--layerNameContainer--dvSc4",oM="header--headerButtons--Lt3iE",oD="header--layerRowContainer--qqv5Y",oR="header--layerNameRow--tsuuh header--layerRowContainer--qqv5Y",oF="header--layerNameRowCentered--FK8Z6 header--layerNameRow--tsuuh header--layerRowContainer--qqv5Y",oB="header--layerRowSpacer--qrODv",oU="header--layerName--s4pA8 text--fontPos13--xW8hS text--_fontBase--QdLsd ellipsis--ellipsis--Tjyfa",oH="header--layerIcon--uDEQt header--icon--IGzM0",oV="header--layerIconSymbol--irpWG header--icon--IGzM0",oG="header--layerType--vaDds text--fontPos11--2LvXf text--_fontBase--QdLsd",oK="header--layerTypeSymbol--cMeH3 text--fontPos11--2LvXf text--_fontBase--QdLsd",oW="header--layerCompareLink--pHd1V",oz="header--layerCompareLinkNoTimestamp--FnSP9",oj="header--layerCompareLinkText--frP7M",oY="header--layerCompareLinkTextGreen--vrlX5",oZ="header--timestamp--zWQD3 text--fontPos11--2LvXf text--_fontBase--QdLsd ellipsis--ellipsis--Tjyfa",oX="header--dropdownContainer--4czE1",oq="header--chevron--0Wf28",oJ="header--chevronActive--sp6Xw";var oQ=n(783423),o$=n(873619),o0=n(757510),o1=n(437527),o2=n(362679),o5=n(844127),o4=n(842232),o3=n(470983);function o6(){let e=(0,$.wA)(),t=(0,n6.wS)(),n=(0,lN.Td)(),{Dropdown:a,dropdownTargetRef:r,toggleDropdown:l,isDropdownShown:i}=(0,aw.B)("DEV_HANDOFF_DETACHED_COMPONENT_DROPDOWN"),o=[{displayText:(0,eO.t)("inspect_panel.detached_component.remove_attachment"),disabled:n,callback:()=>{e(n9.to({type:ob}))}},{displayText:(0,eO.t)("inspect_panel.detached_component.compare_to_source"),disabled:"loaded"!==t.status,callback:lp("cc_detached_component")}];return Q.createElement(Q.Fragment,null,Q.createElement(ns.D8,{className:oX,forwardedRef:r,onClick:l},Q.createElement(eO.Tx,{id:"inspect_panel.node_type.detached_component"}),Q.createElement(eM.B,{className:i?oJ:oq,svg:oQ.A})),Q.createElement(a,{items:o,showPoint:!1}))}function o7({state:e,backgroundState:t}){return Q.createElement("div",{className:"dev_handoff_nodes_panel--historyIconContainer--QkDx6"},Q.createElement(nu.t,{className:ea()("dev_handoff_nodes_panel--historyIcon--dprKz"),svg:o0.A}),e===no.Uy.RECENTLY_EDITED&&Q.createElement("div",{className:ea()("dev_handoff_nodes_panel--editedDot--8NIiF",{"dev_handoff_nodes_panel--editedDotSelected--95Nsq":"selected"===t,"dev_handoff_nodes_panel--editedDotHover--P8nA3":"hovered"===t})}))}function o8({frameId:e,label:t,disabled:n,compareVersions:a,compareDetachedComponent:r,compareOverrides:l}){let i=(0,ti._I)(),o=!n&&i,s=l_(e,"cc_versions"),c=lp("cc_dropdown_detached_component"),d=(0,lg.kl)("overrides"),u=function(e){let t=(0,lm.VW)(),n=(0,eF.mJ)(e),{singleBackingSymbol:a}=(0,rb.$)([e??""]),r=(0,$.wA)();return Q.useCallback(()=>{n&&a&&(tW.sn.reset("dev_handoff.view_history",n.guid),tW.sn.start("dev_handoff.view_history",{key:n.guid}),(0,er.sx)("Diff Modal Compare Changes Clicked",{nodeId:n.guid,mainComponentNodeId:a.guid,origin:"cc_overrides"}),r(n9.to({type:lu,data:{changeNodeId:n.guid,basisNodeId:a.guid,initialSelectedNodeId:(null==t?void 0:t.guid)&&(null==t?void 0:t.guid)!==n.guid?t.guid:void 0,isComparingOverrides:!0}})))},[r,t,n,a])}(d&&!(0,lh.gl)(d)?d.instanceGuid:null),{Dropdown:m,dropdownTargetRef:p,toggleDropdown:_,isDropdownShown:f}=(0,aw.B)("DEV_HANDOFF_COMPARE_CHANGES_DROPDOWN"),h=Q.useMemo(()=>({displayText:(0,eO.t)("dev_handoff.compare_changes.entrypoint.compare_versions"),disabled:n||!i||!a,callback:i?s:ey.lQ,recordingKey:"compareChanges.entrypoint.dropdown.compareVersions"}),[a,n,i,s]),g=Q.useMemo(()=>r?{displayText:(0,eO.t)("dev_handoff.compare_changes.entrypoint.compare_main_component"),disabled:n||!i,callback:i?c:ey.lQ,recordingKey:"compareChanges.entrypoint.dropdown.compareDetachedComponent"}:null,[r,n,i,c]),E=Q.useMemo(()=>l?{displayText:(0,eO.t)("dev_handoff.compare_changes.entrypoint.compare_main_component"),disabled:n||!i,callback:i?u:ey.lQ,recordingKey:"compareChanges.entrypoint.dropdown.compareOverrides"}:null,[l,n,i,u]),v=Q.useMemo(()=>[h,g,E,{separator:!0,displayText:""},{displayText:(0,eO.t)("dev_handoff.compare_changes.entrypoint.multiselect_comparison_hint"),icon:Q.createElement(eM.B,{className:tw.cx.mt4.mr8.minW16.itemSelfStart.colorTextMenuSecondary.colorIconMenuSecondary.$,width:"16px",height:"16px",svg:o4.A}),displayTextClassname:"header--multilineText--iK4P2",disabled:!0}].filter(n4.Vq),[h,g,E]);return o?Q.createElement(Q.Fragment,null,Q.createElement(ns.D8,{className:oX,forwardedRef:p,onClick:_,recordingKey:"compareChanges.entrypoint"},Q.createElement("div",{className:ea()(oj,oN,oY),"data-testid":"compare-changes-entry-with-dropdown"},t),Q.createElement(eM.B,{className:f?oJ:oq,svg:oQ.A})),Q.createElement(m,{rootAndSubmenuMaxWidth:240,items:v,showPoint:!1,recordingKey:"compareChanges.entrypoint.dropdown"})):Q.createElement("div",{className:ea()(oj,oN,{"header--layerCompareLinkTextDisabled----eEQ":n}),"data-tooltip-type":nO.Ib.TEXT,"data-tooltip":(0,eO.t)("dev_handoff.compare_changes.entrypoint.multiselect_comparison_hint"),"data-testid":"compare-changes-entry-without-dropdown"},t)}function o9({label:e}){var t;let n=(0,ti._I)(),a=null==(t=(0,at.iZ)())?void 0:t.id,r=(0,lm.Tv)(),l=(0,t_.tS)(),i=(0,$.wA)();if((null==r?void 0:r.length)!==2)return null;let o=r[1],s=r[0];return Q.createElement(nc.u4,{defaultClass:oz,onClick:()=>{n&&((0,er.sx)("Diff Modal Compare Changes Clicked",{userId:a,fileKey:l,nodeId:o,otherNodeId:s,entrypoint:"lego_layer",origin:"cc_nodes"}),tW.sn.reset("dev_handoff.view_history",o),tW.sn.start("dev_handoff.view_history",{key:o}),i(n9.to({type:lu,data:{changeNodeId:o,basisNodeId:s}})))},disabled:!n,recordingKey:"compareChanges.entrypoint.nodes"},Q.createElement("span",{className:ea()(oj,oN,oY)},e))}function se(e,t=""){let{backingSymbolName:n}=e,a=(null==t?void 0:t.trim())||(0,eO.t)("fullscreen.layer_panel.layer"),r=!(null==t?void 0:t.trim());return Q.createElement("span",{className:ea()({"header--fallbackLayerName--mPaXg":r})},n&&n!==t?Q.createElement(eO.Tx,{id:"inspect_panel.components.name",instance:a,component:Q.createElement("span",{className:"header--backingSymbolName--get70"},"(",n.trim(),")")}):a)}function st(){let e=(0,ti._I)(),t=(0,t_.q5)(),n=(0,lx._6)(),{Dropdown:a,toggleDropdown:r,dropdownTargetRef:l,isDropdownShown:i}=(0,aw.B)("INSPECT_PANEL_HEADER_DROPDOWN");if(!e)return null;let o=[{displayText:(0,eO.t)("dev_handoff.inspect_panel.open_in_vs_code.link"),callback:function(){t&&"fullscreen"===n.view&&n.nodeId&&(window.location.href=`vscode://figma.figma-vscode-extension/open/${t.key}/${t.name}/${n.nodeId}`)},icon:Q.createElement("div",{className:"header--optionsDropdownIcon--sWjMu"},Q.createElement(oC.M,null))}];return Q.createElement(Q.Fragment,null,Q.createElement("div",{ref:l},Q.createElement(aJ.YW,{svg:o2.A,onMouseDown:e=>e.stopPropagation(),onClick:r,"data-tooltip-type":nO.Ib.TEXT,"data-tooltip":(0,eO.t)("dev_handoff.code.options"),selected:i})),Q.createElement(a,{items:o,showPoint:!0}))}function sn(){return(0,n3.s)()?Q.createElement(nc.nR,{className:"header--buttonRow--xsQ9n",onClick:()=>lT.Y5.triggerAction("add-selection-ready-status")},Q.createElement(eM.B,{svg:o3.A,className:"header--readySectionsIcon--yANgI"}),Q.createElement(eO.Tx,{id:"fullscreen_actions.ready-status-add"})):null}function sa(){let e=(0,eF.NM)();return e?Q.createElement(nL.VZ,{hideHeader:!0,padding:nL.UZ.NONE,noBorder:!0,recordingKey:"layerName"},Q.createElement("div",{className:oP},Q.createElement("div",{className:oO},Q.createElement("div",{className:oL},Q.createElement("div",{className:oR},Q.createElement("div",{className:oU},Q.createElement(eO.Tx,{id:"inspect_panel.property.mixed"}))),Q.createElement("div",{className:oD},Q.createElement("span",{className:oG},Q.createElement(eO.Tx,{id:"inspect_panel.property.selected",numberOfItems:e.length})),Q.createElement("div",{className:oB}),Q.createElement(o9,{label:(0,eO.t)("inspect_panel.history.compare_changes")})))))):null}function sr({lastViewTimestamp:e,isDetached:t}){let n=(0,n7.VI)(),a=(0,no.ei)(null==n?void 0:n.id),r=(0,ef.md)(n8),l=(0,no.L)(null==n?void 0:n.id,e,r),i=(0,lg.kl)("overrides"),o=Q.useMemo(()=>!!(i&&!(0,lh.gl)(i)&&null!==lE(i.overriddenProperties,!0)),[i]),{versions:s,versionsQueryLoaded:c}=(0,ru.DS)(null==n?void 0:n.id),d=!c||0===s.length||!a,u=(0,n3.i)(n);if(!n||!u)return null;let m=!!(null==a?void 0:a.lastEditedAt)&&(!d||d&&!!(null==a?void 0:a.createdAt)),p=t||!d||o;return Q.createElement("div",{className:oN},Q.createElement(Q.Fragment,null,Q.createElement(o7,{state:l,backgroundState:null}),m?d?Q.createElement("span",{className:oZ},Q.createElement(eO.Tx,{id:"dev_handoff.nodes_panel.created",at:(0,n5.A)(null==a?void 0:a.createdAt).fromNow()})):Q.createElement("span",{className:oZ},Q.createElement(eO.Tx,{id:"dev_handoff.nodes_panel.edited",at:(0,n5.A)(null==a?void 0:a.lastEditedAt).fromNow()})):Q.createElement("span",{className:oZ},"-"),Q.createElement("div",{className:oB})),Q.createElement(o8,{disabled:!p,frameId:n.id,label:p?(0,eO.t)("inspect_panel.history.compare_changes"):(0,eO.t)("inspect_panel.history.no_changes"),compareVersions:!d,compareDetachedComponent:t,compareOverrides:o}))}function sl(e){let t=(0,n7.T1)(),n=(0,lk.M4)(),a=(0,n6.wS)(),r=(0,$.wA)(),l=(0,ep.R)(e=>e.mirror.appModel.activeCanvasEditModeType),i=(0,n7.An)(t),o=(0,lm.Cj)(i),{version:s}=(0,et.DP)();if(!t)return null;let c=t.isSymbol||t.isDetached,d=se(t,i);return Q.createElement(nL.VZ,{hideHeader:!0,padding:nL.UZ.NONE,noBorder:!0,recordingKey:"layerName"},Q.createElement("div",{className:oP},Q.createElement("div",{className:oO},Q.createElement("div",{className:oL},Q.createElement("div",{className:"ui3"===s?oF:oR},Q.createElement(ns.D8,{dir:"auto",className:ea()(oU,{"header--copyableLayerName--oMhyj":!!i}),onPointerDown:o},d),Q.createElement("div",{className:oM},Q.createElement(oE,null),Q.createElement(st,null))),Q.createElement("div",{className:oD},t.isReadyForDev||t.isCompleted?Q.createElement(Q.Fragment,null,Q.createElement(eM.B,{svg:o$.A,className:"header--codeIcon--c8n9I header--icon--IGzM0"}),Q.createElement("span",{className:oG},t.isCompleted?Q.createElement(eO.Tx,{id:"dev_handoff.status.completed"}):Q.createElement(eO.Tx,{id:"dev_handoff.status.ready_for_dev"}))):Q.createElement(Q.Fragment,null,Q.createElement(ej.Bf,{className:c?oV:oH,guid:t.id,editModeType:l,detachedInfo:a}),Q.createElement("span",{className:c?oK:oG,"data-tooltip-type":nO.Ib.TEXT,"data-tooltip":t.typeTooltip},t.isDetached?Q.createElement(o6,null):t.type))),t.link&&Q.createElement("button",{className:"header--linkRow--QPcNR",onClick:()=>{r(nA.S({url:t.link}))}},Q.createElement(eM.B,{svg:o5.A,className:"header--linkIcon--9v4Qb"}),Q.createElement("span",{className:"header--link--qUrbC"},t.link)),t.libraryName?Q.createElement("div",{className:"header--libraryNameRow--DjJXj text--fontPos11--2LvXf text--_fontBase--QdLsd ellipsis--ellipsis--Tjyfa"},Q.createElement(eM.B,{svg:o1.A}),Q.createElement("span",{className:"header--libraryName---uTzg"},t.libraryName)):null,Q.createElement(sr,{lastViewTimestamp:e.lastViewTimestamp,isDetached:t.isDetached}),(null==n?void 0:n.type)==="INSTANCE"&&Q.createElement(lC,{marginTop:!0})))))}var si=n(704513),so=n.n(si),ss=n(4496),sc=n(409943),sd=n(818533),su=n(562961);let sm="box_model--imageBox--XoIJh box_model--_border--PCElt box_model--_layoutFlex--pL0jp text--fontPos11--2LvXf text--_fontBase--QdLsd",sp="box_model--variableValueContainer--oxu-X box_model--_valueContainerBase--pMK2K",s_="box_model--valueNonValid--H7q6F",sf="box_model--value--1jh75 ellipsis--ellipsis--Tjyfa",sh="box_model--innerSizeBoxValue--l-qDX ellipsis--ellipsis--Tjyfa",sg="box_model--variable--GK5G3",sE="box_model--innerSizeBoxVariable--Lw6dO",sv="box_model--gapLine--BM-H0",sy="box_model--gapVertical--t9aDg box_model--gap--YPdKC box_model--_layoutFlex--pL0jp",sb="box_model--gapHorizontal--gLY-T box_model--gap--YPdKC box_model--_layoutFlex--pL0jp",sC="box_model--gapValueContainer--GsVpn box_model--_layoutFlex--pL0jp",sw="box_model--gapValue--sE-2O",sT=Q.createContext(!1),sx=()=>Q.useContext(sT);function sN({fillContainer:e=!1,loadingState:t=!1}){let{distance:n,border:a,radius:r,padding:l,width:i,height:o}=(0,sc.$G)(),s=(0,ss.aI)(),c=!t&&(0,ss.fk)(s);return Q.createElement(nL.VZ,{hideHeader:!0,padding:nL.UZ.NONE,noBorder:!0,recordingKey:"boxModel"},Q.createElement(sT.Provider,{value:t},Q.createElement(sk,{topDistance:n.top,bottomDistance:n.bottom,fillContainer:e},Q.createElement(sU,null),Q.createElement(sD,{position:"vertical",value:n.top,dataTestIndex:0}),Q.createElement(sU,null),Q.createElement(sD,{position:"horizontal",value:n.left,dataTestIndex:0}),Q.createElement(sS,{radius:r},Q.createElement(sF,{value:r.topLeft,vertical:"top",horizontal:"left",variableConsumptionField:"RECTANGLE_TOP_LEFT_CORNER_RADIUS"}),Q.createElement(sL,null,Q.createElement(sM,null,Q.createElement(eO.Tx,{id:"dev_handoff.box_model.border"})),Q.createElement(sB,{value:a.top,dataTestId:"layoutBorderTop"})),Q.createElement(sF,{value:r.topRight,vertical:"top",horizontal:"right",variableConsumptionField:"RECTANGLE_TOP_RIGHT_CORNER_RADIUS"}),Q.createElement(sB,{value:a.left,isVertical:!0,dataTestId:"layoutBorderLeft"}),c?Q.createElement(sI,{width:i,height:o,assetType:s}):Q.createElement(sP,null,Q.createElement(sU,null),Q.createElement("div",{className:"box_model--paddingTopMiddle--GiNbR"},Q.createElement("div",{className:"box_model--paddingLabel--MsGiF"},Q.createElement(sM,null,Q.createElement(eO.Tx,{id:"dev_handoff.box_model.padding"}))),t?Q.createElement(sU,null):Q.createElement(sB,{value:l.top,dataTestId:"layoutPaddingTop",variableConsumptionField:"STACK_PADDING_TOP"})),Q.createElement(sU,null),t?Q.createElement(sU,null):Q.createElement(sB,{value:l.left,isVertical:!0,dataTestId:"layoutPaddingLeft",variableConsumptionField:"STACK_PADDING_LEFT"}),Q.createElement(sO,{width:i,height:o}),t?Q.createElement(sU,null):Q.createElement(sB,{value:l.right,isVertical:!0,dataTestId:"layoutPaddingRight",variableConsumptionField:"STACK_PADDING_RIGHT"}),Q.createElement(sU,null),t?Q.createElement(sU,null):Q.createElement(sB,{value:l.bottom,dataTestId:"layoutPaddingBottom",variableConsumptionField:"STACK_PADDING_BOTTOM"}),Q.createElement(sU,null)),Q.createElement(sB,{value:a.right,dataTestId:"layoutBorderRight",isVertical:!0}),Q.createElement(sF,{value:r.bottomLeft,vertical:"bottom",horizontal:"left",variableConsumptionField:"RECTANGLE_BOTTOM_LEFT_CORNER_RADIUS"}),Q.createElement(sB,{value:a.bottom,dataTestId:"layoutBorderBottom"}),Q.createElement(sF,{value:r.bottomRight,vertical:"bottom",horizontal:"right",variableConsumptionField:"RECTANGLE_BOTTOM_RIGHT_CORNER_RADIUS"})),Q.createElement(sD,{position:"horizontal",value:n.right,dataTestIndex:1}),Q.createElement(sU,null),Q.createElement(sD,{position:"vertical",value:n.bottom,dataTestIndex:1}),Q.createElement(sU,null),Q.createElement(sH,null))))}function sk({topDistance:e,bottomDistance:t,children:n,fillContainer:a}){let r=!sx()&&(!e||!e.distance)&&(!t||!t.distance);return Q.createElement("div",{className:ea()("box_model--gapBox--6aFgq common--well--J0WtH",r&&"box_model--gapBoxNoVertical--WqZQf",a&&"box_model--fillContainer--TZUSv")},n)}function sS({radius:e,children:t}){let n=sx();return Q.createElement("div",{className:"box_model--borderBox--Ta011 box_model--_border--PCElt",style:n?{borderRadius:16}:(0,sc.F9)(e)},t)}function sI({width:e,height:t,assetType:n}){let a=(0,sc.lK)();return a?Q.createElement(sA,{image:a}):Q.createElement("div",{className:sm},Q.createElement(ss.B7,{assetType:n,pxWidth:e,pxHeight:t,shouldShowTypeLabel:!0,dataTestId:"boxModelAssetDetails"}))}function sA({image:e}){let t=(0,t_.tS)(),[n,a]=Q.useState(null),r=(0,sd.h)();Q.useEffect(()=>{r||(0,su.tW)({paint:e,fileKey:t}).then(e=>{a(e)})},[e,t,r]);let l=Q.createElement(Q.Fragment,null,Q.createElement("span",{className:"box_model--imageFileName--uK9h5 ellipsis--ellipsis--Tjyfa"},(0,su.Rh)(e),"."),Q.createElement("span",{className:"box_model--imageFileType--SYUTK"},(0,su.x$)(e)));return n?Q.createElement("div",{className:sm},Q.createElement("a",{className:"box_model--imageLink--4kUYb text--fontPos11--2LvXf text--_fontBase--QdLsd blue_link--blueLink--9rlnd",href:n,target:"_blank",rel:"noopener"},l)):Q.createElement("div",{className:sm},l)}function sP({children:e}){let t=sx();return Q.createElement("div",{className:ea()("box_model--paddingBox--x3ddV box_model--_borderStrong--VLX4w",{"box_model--paddingBoxGrayscale--SAsVz":t})},e)}function sO({width:e,height:t}){let n=sV(e)??0,a=sV(t)??0,{variable:r,variableDisplayName:l}=(0,e3.xp)("WIDTH",e),{variable:i,variableDisplayName:o}=(0,e3.xp)("HEIGHT",0),s=(0,lm.Cj)(n),c=(0,lm.Cj)(a);return sx()?Q.createElement("div",{className:"box_model--innerSizeBoxGrayscale--geDzo box_model--innerSizeBox--fFq-v box_model--_layoutFlex--pL0jp"}):Q.createElement("div",{className:"box_model--innerSizeBox--fFq-v box_model--_layoutFlex--pL0jp"},Q.createElement("span",{"data-testid":"layoutWidth",className:ea()(sh,{[sE]:!!r,[sg]:!!r||!!i}),onClick:s,role:"button",tabIndex:0},r?Q.createElement(ax.w,{isNarrow:!0,text:n.toString(),tooltip:l}):n),Q.createElement("span",{className:"box_model--innerSizeBoxX--pxeFw"},"\xd7"),Q.createElement("span",{"data-testid":"layoutHeight",className:ea()(sh,{[sE]:!!i,[sg]:!!r||!!i}),onClick:c,role:"button",tabIndex:0},i?Q.createElement(ax.w,{isNarrow:!0,text:a.toString(),tooltip:o}):a))}function sL({children:e}){return Q.createElement("div",{className:"box_model--labelAndValue--tkNzd"},e)}function sM({children:e}){return Q.createElement("div",{className:"box_model--label--A5RBK text--fontPos11--2LvXf text--_fontBase--QdLsd ellipsis--ellipsis--Tjyfa"},e)}function sD({position:e,dataTestIndex:t,value:n}){let a=sV(null==n?void 0:n.distance),r=(null==n?void 0:n.type)??"distance",l=(0,lm.Cj)(a);return sx()?Q.createElement("div",{className:ea()({[sy]:"vertical"===e,[sb]:"horizontal"===e,"box_model--unrealGap--XhkPS":!0})},Q.createElement("div",{className:sv}),Q.createElement("div",{className:sC},Q.createElement("span",{className:sw},"\xa0"))):(0,sc.u9)(a)?Q.createElement("div",{className:ea()({[sy]:"vertical"===e,[sb]:"horizontal"===e,"box_model--paddingGap--Ca1Vq":"padding"===r,"box_model--spacingGap--PWtB6":"spacing"===r,"box_model--distanceGap--ophi6":"distance"===r})},Q.createElement("div",{className:sv}),Q.createElement("div",{className:sC,"data-testid":`layoutGap${so()(e)}${t}`,onClick:l,role:"button",tabIndex:0},Q.createElement("span",{className:sw},a))):Q.createElement(sU,null)}function sR({value:e,variableConsumptionField:t}){let n=sV(e),a=(0,sc.u9)(n),{variable:r,variableDisplayName:l,isSuggested:i}=(0,e3.xp)(t,e),o=(0,lm.Cj)(n),s=n;return r&&n&&(a||!i)&&(s=Q.createElement(ax.w,{isNarrow:!0,text:a?n:"0",tooltip:l})),{isValid:a,valueElement:s,displayValue:n,copyValue:o}}function sF({vertical:e,horizontal:t,value:n,variableConsumptionField:a}){let r;let l=(0,eD.v4)(),i=(0,eB.QO)(l,n),{isValid:o,valueElement:s,displayValue:c}=sR({value:n,variableConsumptionField:a}),d=sx();"top"===e&&"left"===t&&(r="box_model--borderTopLeft--Yitgl"),"top"===e&&"right"===t&&(r="box_model--borderTopRight--Jtfzn"),"bottom"===e&&"left"===t&&(r="box_model--borderBottomLeft--aRpWV"),"bottom"===e&&"right"===t&&(r="box_model--borderBottomRight--Rkq3s");let u=l.id===eD.uz||l.id===eD.MT?n:i,m=c?(0,sc.EN)(e,t,u):{},p=(0,lm.Cj)(u),_=sg?sp:"box_model--rawValueContainer---osq- box_model--_valueContainerBase--pMK2K",f=Math.min(n??0,sc.Tk-4);return Q.createElement("div",{style:{"--temp-border-radius":`${f}px`},className:ea()(_,r),"data-testid":`layoutBorderRadius${so()(e)}${so()(t)}`,onClick:o?p:void 0,role:"button",tabIndex:0},Q.createElement("span",{className:ea()(o?sf:s_,o&&"box_model--borderRadiusValue--tDyKD ellipsis--ellipsis--Tjyfa")},d?" ":s),Q.createElement("div",{className:o?"box_model--borderRadiusHighlight--bd9Sc":"box_model--borderRadiusNonValid--qTtSU",style:m,"data-testid":`layoutBorderRadius${so()(e)}${so()(t)}Highlight`}))}function sB({value:e,dataTestId:t,variableConsumptionField:n,isVertical:a}){let{isValid:r,valueElement:l,copyValue:i}=sR({value:e,variableConsumptionField:n??"MISSING"}),o=sg?sp:a?"box_model--valueContainerVertical--AtQ8B box_model--rawValueContainer---osq- box_model--_valueContainerBase--pMK2K":"box_model--valueContainerHorizontal--BqOkd box_model--rawValueContainer---osq- box_model--_valueContainerBase--pMK2K";return Q.createElement("div",{className:o,onClick:r?i:void 0,role:"button",tabIndex:0},Q.createElement("span",{className:r?sf:s_,"data-testid":t},l))}function sU(){return Q.createElement("div",null)}function sH(){let e=(0,lm.Cj)("box-sizing: border-box"),t=(0,eD.v4)();return sx()||t.id!==eD.uz?null:Q.createElement("div",{className:"box_model--borderBoxMessage--2jJc- text--fontPos11--2LvXf text--_fontBase--QdLsd",onClick:e,role:"button",tabIndex:0,"data-tooltip":(0,eO.t)("dev_handoff.box_model.border-box-tooltip"),"data-tooltip-type":nO.Ib.TEXT,"data-tooltip-show-above":!0},Q.createElement(eO.Tx,{id:"dev_handoff.box_model.border-box"}))}function sV(e){let t=(0,eD.v4)(),n=(0,eB.QO)(t,e,sc.B5);return void 0===e?"-":n}var sG=n(783824);function sK({initialInspectionMode:e,initialCodeLanguage:t}={}){let n=(0,ef.md)(am.hq),[a,r]=(0,Q.useState)(e??n),l=(0,eD.v4)(),[i,o]=(0,Q.useState)(t??l),s=(0,eB.aq)(i),c=(0,au.ZA)(i,s),d=(0,sG.q)(i),u=(0,eB.gc)(i.id),m=(0,aY.V0)({codeLanguage:i,onChange:o}),p=(0,am.Ar)();return{inspectionMode:p.find(e=>e===a)||p[0],setInspectionMode:r,supportsAlternativeUnits:c,preferenceOptions:d,preferences:u,codeLanguageApi:m,inspectionModes:p}}var sW=n(849164),sz=n(407931),sj=n(741737),sY=n(108465);n(433584);var sZ=n(631044),sX=n(560253);let sq=(e,t)=>e.name.localeCompare(t.name);function sJ(e){let{styles:t}=(0,ef.md)(sz.gq),{library:n,sceneGraph:a}=(0,ep.R)(e=>({library:e.library,sceneGraph:e.mirror.sceneGraph})),r=t.map(e=>{let t=(0,lS.Gp)(e.key,e.guids,n);if(!t||t.kind===lz.AT.DANGLING)return null;let r=(0,eF.Zl)(a,e.guids[0]);return r?{...e,...t.value,styleNode:r}:null}).filter(sj.t).filter(t=>(null==t?void 0:t.style_type)===e).sort((e,t)=>e.styleName.localeCompare(t.styleName));return(0,sW.y)({items:r,getShowMoreLabel:e=>(0,eO.t)("dev_handoff.styles.show_more",{count:e})})}var sQ=n(998941),s$=n(427074),s0=n(578315),s1=n(320453);function s2(){let{selectionVariables:e,selectionStyles:t,selectionValues:n}=function(){let{selectedColors:e,childrenColors:t,selectedStyles:n,childrenStyles:a,library:r,sceneGraph:l}=(0,ep.R)(e=>({selectedColors:e.mirror.selectionPaints.paintsDirectlyOnSingleNode,childrenColors:e.mirror.selectionPaints.paints,selectedStyles:e.mirror.selectionPaints.stylesDirectlyOnSingleNode,childrenStyles:e.mirror.selectionPaints.styles,library:e.library,sceneGraph:e.mirror.sceneGraph})),i=(0,eF.NM)(),o=(0,eF.VW)(),s=(0,sX.Ig)(),c=(0,lm.uQ)(),d=(0,aQ.Q)(),u=(0,eD.v4)(),m=(0,sZ.ks)(),p=Q.useCallback((e,t)=>{let{styleKey:n,styleGUIDs:a}=e,i=(0,lS.Gp)(n,a,r);if(!i||a.length<1)return null;let o=(0,eF.Zl)(l,a[0]);if(!o)return null;let s=o.fills.map(e=>(0,sX.dc)(e,t));return(0,sX.rP)((0,lS.uH)(i,l),i,s,a)},[r,l]);return Q.useMemo(()=>{let r=(null==o?void 0:o.childrenGuids)&&(null==o?void 0:o.childrenGuids.length)>0&&(null==o?void 0:o.visibleChildren)||[],l=i||r.length>0,_=l?t:e,f=_.filter(({paint:e})=>!!e.colorVar&&!!e.colorVar.value).map(({paint:e})=>(0,sX.dc)(e,s)),h=_.filter(({paint:e})=>!e.colorVar||!e.colorVar.value).map(({paint:e})=>(0,sX.dc)(e,s)),g=(l?a:n).map(e=>p(e,s)).filter(sj.t).sort(sq);return{selectionVariables:f,selectionStyles:(0,e3.QT)(g,c,d.inspectionMode,u,m),selectionValues:h}},[null==o?void 0:o.childrenGuids,null==o?void 0:o.visibleChildren,i,t,e,a,n,c,d.inspectionMode,u,m,s,p])}(),a=(0,$.d4)(t_.sS),r=(0,$.d4)(e=>e.mirror.selectionPaints.emptyDueToLimitExceeded),{visibleItems:l,showMoreButton:i}=(0,sW.y)({items:[...e,...t,...n],getShowMoreLabel:e=>(0,eO.t)("dev_handoff.styles.show_more_colors",{count:e})});return r||l.length?Q.createElement(nL.VZ,{title:(0,eO.t)("dev_handoff.selection_colors"),recordingKey:"handoffColorStyles",additionalHeaders:Q.createElement(s$.Af,{id:"handoffColorStyles"})},r&&Q.createElement(nM.fI,{className:"selection_colors_panel--ignoreLimitButtonRow--loF8J"},Q.createElement(tC.nR,{className:"selection_colors_panel--ignoreLimitButton--US3qr",onClick:()=>{(0,er.sx)("Show Selection Paints For Large Selection",{fileKey:a||""}),eU.Osy.ignoreLimitWhenCollectingPaints()}},Q.createElement(eO.Tx,{id:"dev_handoff.selection_colors.show_colors"}))),l.map((e,t)=>e.type===s0.q.STYLE?Q.createElement(s4,{key:t,colorStyle:e}):Q.createElement(s3,{key:t,colorValue:e})),i):null}function s5(e,t,n,a=1){let{a:r=1}=e;return(0,s$.qe)({...e,a:r*a},t,n,{alphaInPercent:!0})}function s4({colorStyle:e}){let{name:t,dsStyle:n,styleGUIDs:a,paints:r}=e;(0,lS.w$)(n);let l=()=>eU.Osy.highlightOnlySameStyleInSublayers(a),i=()=>eU.Osy.highlightOnlySameStyleInSublayers([]),o=n.value;n.kind===lz.AT.DANGLING&&(o.style_type="FILL",o.node_id=n.value.node_id);let s=(0,eH.Ku)();if(1===r.length&&"SOLID"===r[0].paint.type&&r[0].paint.color&&!r[0].paint.colorVar){let{value:e,copyValue:n}=s5(r[0].paint.color,s,r[0].valueFormatter,r[0].paint.opacity);return Q.createElement(s6,{displayValueLeft:t,copyValueLeft:t,displayValueRight:e,copyValueRight:n,icon:Q.createElement(s1.zi,{dsStyle:o,hideNameInTooltip:!0}),onMouseEnter:l,onMouseLeave:i,dataTestId:"selectionStyleRow"})}return Q.createElement("div",{onMouseEnter:l,onMouseLeave:i},Q.createElement(s$.Gz,{color:e,format:s}))}function s3({colorValue:e}){let{paint:t,encodedPaint:n,valueFormatter:a}=e,r=(0,eH.Ku)(),{variable:l,variableDisplayName:i,isSuggested:o}=(0,e3._B)(t),s=()=>{eU.Osy.highlightOnlySamePaintInSublayers(n)},c=()=>eU.Osy.highlightOnlySamePaintInSublayers("");if(l&&i&&t.color){let e="LOCAL"===l.subscriptionStatus&&l.isSoftDeleted,{value:n,copyValue:d}=s5(t.color,r,a,t.opacity);return Q.createElement(s6,{isVariable:!o,isSuggestedVariable:o,isDeletedVariable:e,displayValueLeft:i,copyValueLeft:i,displayValueRight:n,copyValueRight:d,icon:Q.createElement(sQ.J,{paint:t,tooltip:l.description}),onMouseEnter:s,onMouseLeave:c})}return Q.createElement("div",{onMouseEnter:s,onMouseLeave:c},Q.createElement(s$.DP,{formattableColor:e,format:r}))}function s6(e){let{icon:t,isVariable:n,isSuggestedVariable:a,isDeletedVariable:r,onMouseEnter:l,onMouseLeave:i}=e,o=(0,lm.Cj)(e.copyValueLeft),s=(0,lm.Cj)(e.copyValueRight),[c,d]=Q.useState(!1);return Q.createElement("div",{onMouseEnter:l,onMouseLeave:i,className:"selection_colors_panel--styleRow--X7gbD","data-fullscreen-intercept":!0,"data-testid":e.dataTestId},Q.createElement(ns.D8,{className:"selection_colors_panel--styleNameAndIcon--stVO4 text--fontPos11--2LvXf text--_fontBase--QdLsd",onClick:o,onMouseEnter:()=>d(!0),onMouseLeave:()=>d(!1),role:"button",tabIndex:0},t&&Q.createElement("div",{className:"selection_colors_panel--styleIcon--eaifW"},t),n||a?Q.createElement(ax.w,{text:e.displayValueLeft,isDeleted:r,containerClassName:"selection_colors_panel--variablePill--0dLco",disableHover:!0,isHovered:c,isInferred:a,tooltip:a?(0,eO.t)("dev_handoff.variables.inferred_color"):void 0}):Q.createElement("div",{className:"selection_colors_panel--styleName--Nny-W text--fontPos11--2LvXf text--_fontBase--QdLsd ellipsis--ellipsis--Tjyfa"},e.displayValueLeft)),e.displayValueRight&&Q.createElement(Q.Fragment,null,Q.createElement("div",{className:"selection_colors_panel--spacer---6Fvk"}),Q.createElement(ns.D8,{className:"selection_colors_panel--styleValue--BvNuA text--fontPos11--2LvXf text--_fontBase--QdLsd",onClick:s,role:"button",tabIndex:0},e.displayValueRight)))}let s7="paywall_redesign_right_panel--rowWithIcon--KN1dV",s8="paywall_redesign_right_panel--layerIcon--rAdrH";var s9=n(501191);let ce=[{prefix:"display:",width:35},{prefix:"height:",width:35},{prefix:"padding:",width:145},{prefix:"justify-content:",width:100},{prefix:"align-items:",width:47},{prefix:"gap:",width:47},{prefix:"flex:",width:47}];function ct(){return Q.createElement("code",{className:"paywall_redesign_right_panel--generatedCode--l3bLO code_panel--generatedCode--XGoAV code_panels_shared--code--VPQ05",style:{minWidth:"100%",whiteSpace:"normal"}},ce.map(({prefix:e,width:t},n)=>Q.createElement("div",{key:n,className:"paywall_redesign_right_panel--codeLine--upXx8"},Q.createElement("div",null,e),Q.createElement(tq.Wi,{animationType:tq.JR.NO_SHIMMER,style:{width:t,height:10}}))))}let cn=[{width:97,color:500},{width:80,color:400},{width:120,color:200}],ca=[{width:97},{width:80},{width:120}];function cr(){let e=sK({initialInspectionMode:"code",initialCodeLanguage:{type:"first-party",id:eD.uz}}),t="dark"===(0,tx.DP)()?"dark":"light";return Q.createElement("div",{className:"paywall_redesign_right_panel--drillDownContainer--kLzE5 properties_panel--drillDownContainer--VaNDa"},Q.createElement("div",{className:"paywall_redesign_right_panel--panelPosition--MtRQm properties_panel--panelPosition--oppQ8"},Q.createElement("div",{className:`paywall_redesign_right_panel--panelContainer--Judvj dev_handoff_right_panel_container--panelContainer--XcbIk dev_handoff_right_panel_container--panelContainerBase--npHfL properties_panel--panelContainer--cKjqh ${eK.Dm}`},Q.createElement("div",{className:tw.cx.wFull.flex.flexRow.flexShrink0.itemsCenter.borderBox.bSolid.bb1.pr8.colorBorder.justifyBetween.colorBg.$},Q.createElement("div",{className:tw.cx.flex.flexRow.itemsStart.hFull.$},Q.createElement("div",{className:"paywall_redesign_right_panel--tabsHeader--AOhTE pages_panel--tabsHeader--ez-pH"},Q.createElement("div",{className:"paywall_redesign_right_panel--tabActive--fvCNe pages_panel--tabActive--BitzC pages_panel--tab--Uge5B","data-label":(0,eO.t)("dev_handoff.tab.inspect")},Q.createElement(eO.Tx,{id:"dev_handoff.tab.inspect"})),Q.createElement("div",{className:"paywall_redesign_right_panel--tab--GpaFD pages_panel--tab--Uge5B","data-label":(0,eO.t)("dev_handoff.tab.plugins")},Q.createElement(eO.Tx,{id:"dev_handoff.tab.plugins"}))))),Q.createElement("div",{className:"paywall_redesign_right_panel--inspectPanelContainer--jYbwb inspect_panel--inspectPanelContainer--SZhfY"},Q.createElement(nL.VZ,{hideHeader:!0,padding:nL.UZ.NONE,noBorder:!0,recordingKey:"paywall-header"},Q.createElement("div",{className:"paywall_redesign_right_panel--headerContainer--iJpPW header--panelContainer---mpIY"},Q.createElement("div",{className:oO},Q.createElement("div",{className:oL},Q.createElement("div",{className:oR},Q.createElement(ns.D8,{dir:"auto",className:oU},Q.createElement(eO.Tx,{id:"dev_handoff.paywall.panel.button"})),Q.createElement("div",{className:oM})),Q.createElement("div",{className:tw.cx.flex.flexColumn.gap8.wFull.$},Q.createElement("span",{className:tw.cx.flex.flexRow.gap8.itemsCenter.wFull.$},Q.createElement("span",{className:s8},Q.createElement(nu.t,{svg:eX.A})),Q.createElement(tq.Wi,{animationType:tq.JR.NO_SHIMMER,primary:!0,style:{width:97,height:8}})),Q.createElement("span",{className:tw.cx.flex.flexRow.justifyBetween.itemsCenter.wFull.$},Q.createElement("span",{className:tw.cx.flex.flexRow.gap8.itemsCenter.$},Q.createElement("span",{className:s8},Q.createElement(o7,{state:no.Uy.RECENTLY_EDITED,backgroundState:null})),Q.createElement(tq.Wi,{animationType:tq.JR.NO_SHIMMER,primary:!0,style:{width:68,height:8}})),Q.createElement(nc.u4,{defaultClass:ea()(oW,oz),onClick:ey.lQ},Q.createElement("span",{className:ea()(oj,oY)},Q.createElement(eO.Tx,{id:"inspect_panel.history.compare_changes"}))))))))),Q.createElement(nL.VZ,{hideHeader:!0,padding:nL.UZ.CONSTRAINED_VERTICAL,recordingKey:"paywall-devresources"},Q.createElement(nM.fI,{className:"paywall_redesign_right_panel--panelTitleRow--ggFoT"},Q.createElement(nM.xw,{className:"paywall_redesign_right_panel--panelTitleText--kMeRB",extended:!0},Q.createElement(eO.Tx,{id:"dev_handoff.developer_related_links.links"})),Q.createElement(nM.K0,{className:"paywall_redesign_right_panel--addButton--VWvZ7 draggable_list--addButton--D0q--","data-tooltip-type":nO.Ib.TEXT,"data-tooltip":(0,eO.t)("dev_handoff.developer_related_links.add_link_button"),svg:s9.A,recordingKey:"addDevRelatedLink"})),Q.createElement("div",{className:"paywall_redesign_right_panel--devResourcesColumn--Fiwy8"},Q.createElement("div",{className:s7},Q.createElement("img",{alt:"",src:"https://static.figma.com/uploads/ae3807b6d650b52da20879078b85a0df23ee056a"}),Q.createElement(tq.Wi,{animationType:tq.JR.NO_SHIMMER,primary:!0,style:{width:97,height:8}})),Q.createElement("div",{className:s7},Q.createElement(nm.f,null),Q.createElement(tq.Wi,{animationType:tq.JR.NO_SHIMMER,primary:!0,style:{width:97,height:8}})))),Q.createElement("div",{className:tw.cx.wFull.h4.$}),Q.createElement(a1,{preferencesApi:e}),Q.createElement(sN,{loadingState:!0}),Q.createElement(nL.VZ,{hideHeader:!0,padding:nL.UZ.EXTRA_BOTTOM,recordingKey:"paywall-code"},Q.createElement(n2,{header:Q.createElement(n0,{type:"default",actions:Q.createElement(nq,{"aria-label":(0,eO.t)("inspect_panel.copy")},Q.createElement(nd.U,{svg:nY.A},Q.createElement(ni,null))),title:(0,eO.t)("inspect_panel.properties.layout")}),content:Q.createElement(ct,null),shouldShowMore:!1,showMoreLinesCount:0,onShowMore:ey.lQ,leftGutter:nQ(ce)})),Q.createElement(nL.VZ,{title:(0,eO.t)("dev_handoff.selection_colors"),recordingKey:"paywall-selection-colors",additionalHeaders:Q.createElement("div",{className:"paywall_redesign_right_panel--colorHeader--R7I83"},"Hex",Q.createElement(eM.B,{svg:oQ.A}))},cn.map(({width:e,color:n},a)=>Q.createElement(s6,{key:a,icon:Q.createElement("div",{className:"paywall_redesign_right_panel--colorThumbnail--XN-rp",style:{backgroundColor:tI[`grey_${n}_${t}`]}}),displayValueLeft:Q.createElement(tq.Wi,{animationType:tq.JR.NO_SHIMMER,style:{width:e}}),displayValueRight:Q.createElement(tq.Wi,{animationType:tq.JR.NO_SHIMMER,style:{width:50}})}))),Q.createElement(nL.VZ,{title:(0,eO.t)("dev_handoff.assets"),recordingKey:"paywall-assets"},ca.map(({width:e},t)=>Q.createElement("div",{key:t,className:"paywall_redesign_right_panel--assetRow--V7xL2 asset_panel--assetRow--0VUJr text--fontPos11--2LvXf text--_fontBase--QdLsd"},Q.createElement(tq.Qp,{animationType:tq.JR.NO_SHIMMER,className:"paywall_redesign_right_panel--assetLoadingPreview--pBwFu"}),Q.createElement("div",{className:"paywall_redesign_right_panel--assetDetails--RwZkm asset_panel--assetDetails--xfCbP"},Q.createElement(tq.Wi,{animationType:tq.JR.NO_SHIMMER,style:{width:e,height:8}}),Q.createElement(tq.Wi,{animationType:tq.JR.NO_SHIMMER,style:{width:60,height:8}})))))))),Q.createElement("div",{className:"paywall_redesign_right_panel--transparentPanelScrim--TG58O"}))}var cl=n(509047),ci=n(412442),co=n(96796),cs=n(463420),cc=n(268004),cd=n(897138),cu=n(178041),cm=n(647956),cp=n(216953),c_=n(460705);let cf="pages_panel--pagesHeaderContainer--i92Ni",ch="pages_panel--chevron--VmSv1",cg="pages_panel--pagesHeaderContainerWithShadow--sVSKu pages_panel--pagesHeaderContainer--i92Ni",cE="pages_panel--pagesHeaderText--4UIwl",cv="pages_panel--pagesHeaderTextDimmed--GsBV9",cy="pages_panel--hoverByMouse---pkjS",cb="pages_panel--tab--Uge5B",cC="pages_panel--tabActive--BitzC pages_panel--tab--Uge5B",cw="pages_panel--pageTab--hc8gz",cT="pages_panel--pageTabViewOnly--ZH2yx",cx="pages_panel--pageTabViewOnlySearch--4XmZl",cN="pages_panel--pageTabText--ujePC ellipsis--ellipsis--Tjyfa",ck="pages_panel--tabsHeaderBordered--f-Lhn pages_panel--tabsHeader--ez-pH",cS="pages_panel--assetsTab--OKgP1",cI="pages_panel--teamLibraryUpdatesIndicator--ClCmP",cA="pages_panel--hidden--dmcG8",cP="overview_entry--isSelected--E6mSl";function cO({count:e,marginForTab:t}){return Q.createElement(iZ.Ex,{className:ea()(tw.cx.bRadius5.$,t&&tw.cx.ml6.mr0.$),text:`${e}`,size:iZ.vj.SMALL,color:iZ.zE.DEFAULT,subtle:!0})}function cL(){let e=(0,$.wA)(),t=(0,ep.R)(e=>"fullscreen"===e.selectedView.view?{...e.selectedView,showOverview:!0}:e.selectedView),n=(0,$.d4)(e=>(0,cp.Np)(e,t)),a=(0,c_.l7)(),r=function(){let e=(0,eG.J2)(eU.Ez5.editorState().nodesWithStatusForFile)||[],t=(0,c_.Pj)();if(!(0,eo.kc)().dt_dev_mode_workflows)return null;let n=e.filter(e=>e.status===eU.zIx.BUILD),a=n.length;return 0!==n.length||0!==(a=e.filter(e=>e.status===eU.zIx.COMPLETED).length)||t?a:null}();return(0,eo.kc)().dt_dev_mode_workflows&&null!==r?Q.createElement("div",{className:ck},Q.createElement("a",{className:ea()("overview_entry--entryRow--l-Ofr",a&&cP),onClick:function(n){n.preventDefault(),e((0,nP.$T)(t))},href:n},Q.createElement("div",{className:ea()("overview_entry--entryRowInner--fPECV",a&&cP)},Q.createElement("div",{className:"overview_entry--leftSide--0zNy- text--fontPos11--2LvXf text--_fontBase--QdLsd"},Q.createElement(eM.B,{className:"overview_entry--readyIcon--QwDeG",svg:o$.A}),Q.createElement("div",null,"Dev spec")),r>0&&Q.createElement(cO,{count:r})))):null}var cM=n(876233),cD=n(57075),cR=n(216309),cF=n(769603),cB=n(22310),cU=n(797811),cH=n(535473),cV=n(667060),cG=n(923454),cK=n(625475),cW=n(605823),cz=n(738957),cj=n(948993),cY=n(918044),cZ=n(40527),cX=n(368480),cq=n(256174),cJ=n(531885),cQ=n(731939),c$=n(604627),c0=n(978263),c1=n(837466),c2=n(442276),c5=n(820657),c4=n(390380),c3=n(54287),c6=n(667351),c7=n(644384),c8=n(646300),c9=n(781074),de=n(16168),dt=n(509794),dn=n(120550),da=n(533672),dr=n(474456);let dl=(0,tc.r1)(c2.rF);function di({width:e,scrollToPreset:t}){let n=(0,c3.pp)(),a=(0,ef.md)(dl),{show:r,isShowing:l,complete:i}=(0,tp.e)({overlay:tv.dZl,priority:th.N.DEFAULT_MODAL,experiment:{check:n,predicate:e=>e,postCheck:e=>!e}},[a]),{currentStep:o,next:s}=(0,c4.A)({numSteps:2,onComplete:i}),c=(0,$.d4)(e=>e.mirror.appModel.currentPage),d=(0,c6.Fk)((e,t)=>(0,cH.zC)(e,t),c),u=(0,c7.je)();return((0,ts.h)(()=>{d&&(0,da.Rm)(u)&&!l?r():!d&&(0,da.m_)(u)&&!l&&r()}),l)?Q.createElement(Q.Fragment,null,Q.createElement("div",{style:{left:`${e}px`,top:"230px"},className:dr.b,"data-onboarding-key":c2.vw}),Q.createElement(c8.U,{currentStep:o,isShowing:l},Q.createElement(de.X,{isShowing:l,title:Q.createElement(eO.Tx,{id:"rcs.presets_baseline.design_faster"}),description:Q.createElement(eO.Tx,{id:"rcs.presets_baseline.check_out_templates"}),primaryCta:{label:Q.createElement(eO.Tx,{id:"rcs.presets_baseline.try_it"}),type:"button",onClick:()=>{t(),s()},ctaTrackingDescriptor:c5.c.PRESETS_TRY_IT},position:dt.Q.EDITOR_TOP_LEFT,trackingContextName:"Presets Baseline MultiStep Popup",userFlagOnShow:c2.rF,onClose:i}),Q.createElement(c9.rq,{isShowing:l,targetKey:c2.vw,trackingContextName:"Presets Baseline MultiStep Nudge",userFlagOnShow:c2.rF,onClose:i,arrowPosition:dn.F_.LEFT_TITLE,emphasized:!0,description:Q.createElement("div",{style:{width:"236px",color:"var(--color-text-onbrand)",letterSpacing:"0.055px"}},Q.createElement(eO.Tx,{id:"rcs.presets_baseline.find_templates"}))}))):null}function ds(e){return Q.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},Q.createElement("mask",{id:"fpl-icon-24-component-a",fill:"#fff"},Q.createElement("path",{fillRule:"evenodd",d:"M7.78 8.487a1.25 1.25 0 0 0-1.767 0l-2.63 2.63a1.25 1.25 0 0 0 0 1.767l2.63 2.629a1.25 1.25 0 0 0 1.767 0l2.629-2.63a1.25 1.25 0 0 0 0-1.767L7.78 8.487Zm.707-2.474a1.25 1.25 0 0 0 0 1.767l2.63 2.629a1.25 1.25 0 0 0 1.767 0l2.629-2.629a1.25 1.25 0 0 0 0-1.767l-2.63-2.63a1.25 1.25 0 0 0-1.767 0l-2.629 2.63Zm9.5 2.474a1.25 1.25 0 0 0-1.767 0l-2.629 2.63a1.25 1.25 0 0 0 0 1.767l2.629 2.629a1.25 1.25 0 0 0 1.767 0l2.63-2.63a1.25 1.25 0 0 0 0-1.767l-2.63-2.629Zm-2.474 9.5a1.25 1.25 0 0 0 0-1.767l-2.63-2.629a1.25 1.25 0 0 0-1.767 0L8.487 16.22a1.25 1.25 0 0 0 0 1.767l2.63 2.63a1.25 1.25 0 0 0 1.767 0l2.629-2.63Z",clipRule:"evenodd"})),Q.createElement("path",{fill:"var(--color-icon)",d:"m11.116 20.616-.707.707.707-.707Zm1.768 0 .707.707-.707-.707Zm-4.397-2.629.708-.707-.708.707Zm4.397-4.396-.707.707.707-.707Zm-1.768 0 .707.707-.707-.707Zm9.5-.707.707.707-.707-.707Zm0-1.768-.707.707.707-.707Zm-4.396 4.397-.707.707.707-.707Zm1.767 0-.707-.707.707.707Zm-4.396-4.397-.707-.707.707.707Zm2.629-2.629.707.708-.707-.708Zm-5.811 4.397-.707-.707.707.707Zm-4.396 2.629-.708.707.708-.707Zm-1.922-3.69L6.72 9.195 5.305 7.78l-2.628 2.63 1.414 1.414Zm2.629 2.982-2.63-2.627-1.413 1.412 2.628 2.629 1.415-1.414Zm1.767 1.415 2.63-2.629-1.415-1.414-2.629 2.629 1.414 1.414Zm2.63-5.811L8.486 7.78 7.073 9.195l2.629 2.628 1.414-1.414ZM7.78 8.487l2.629 2.63 1.414-1.415-2.628-2.629L7.78 8.487Zm5.811 2.63 2.629-2.63-1.414-1.414-2.63 2.629 1.415 1.414ZM12.177 4.09l2.629 2.629 1.414-1.415-2.629-2.628-1.414 1.414ZM9.195 6.72l2.628-2.629-1.414-1.414L7.78 5.305 9.195 6.72Zm6.318 1.06-2.63 2.629 1.415 1.414 2.629-2.628-1.414-1.415Zm-2.63 5.811 2.63 2.629 1.414-1.414-2.629-2.63-1.414 1.415Zm7.026-1.414-2.629 2.629 1.415 1.414 2.628-2.629-1.414-1.414ZM17.28 9.195l2.629 2.628 1.414-1.414-2.628-2.629-1.415 1.415Zm-1.06 6.318-2.629-2.63-1.414 1.415 2.629 2.629 1.414-1.414Zm-5.811-2.63-2.629 2.63 1.415 1.414 2.628-2.629-1.414-1.414Zm1.414 7.026L9.195 17.28 7.78 18.695l2.629 2.628 1.414-1.414Zm2.982-2.629-2.628 2.629 1.414 1.414 2.629-2.628-1.414-1.415Zm-4.396 4.043a2.25 2.25 0 0 0 3.182 0l-1.414-1.414a.25.25 0 0 1-.354 0l-1.414 1.414Zm-2.629-5.81a2.25 2.25 0 0 0 0 3.182l1.415-1.415a.25.25 0 0 1 0-.353L7.78 15.513Zm5.811-2.63a2.25 2.25 0 0 0-3.182 0l1.414 1.415a.25.25 0 0 1 .354 0l1.414-1.414Zm1.215 4.044a.25.25 0 0 1 0 .353l1.414 1.415a2.25 2.25 0 0 0 0-3.182l-1.414 1.414Zm6.517-3.336a2.25 2.25 0 0 0 0-3.182l-1.414 1.414a.25.25 0 0 1 0 .354l1.414 1.414Zm-5.81 2.629a2.25 2.25 0 0 0 3.182 0l-1.415-1.414a.25.25 0 0 1-.353 0l-1.414 1.414Zm-2.63-5.811a2.25 2.25 0 0 0 0 3.182l1.415-1.414a.25.25 0 0 1 0-.354l-1.414-1.414Zm4.044-1.214a.25.25 0 0 1 .353 0l1.415-1.415a2.25 2.25 0 0 0-3.182 0l1.414 1.415ZM13.59 2.677a2.25 2.25 0 0 0-3.182 0l1.414 1.414a.25.25 0 0 1 .354 0l1.414-1.414Zm2.629 5.81a2.25 2.25 0 0 0 0-3.182L14.806 6.72a.25.25 0 0 1 0 .353l1.414 1.414Zm-5.811 2.63a2.25 2.25 0 0 0 3.182 0l-1.414-1.415a.25.25 0 0 1-.354 0l-1.414 1.414ZM9.195 7.072a.25.25 0 0 1 0-.353L7.78 5.305a2.25 2.25 0 0 0 0 3.182l1.415-1.414Zm1.921 6.518a2.25 2.25 0 0 0 0-3.182l-1.414 1.414a.25.25 0 0 1 0 .354l1.414 1.414Zm-5.81 2.629a2.25 2.25 0 0 0 3.181 0l-1.414-1.414a.25.25 0 0 1-.353 0L5.305 16.22ZM6.72 9.195a.25.25 0 0 1 .353 0L8.487 7.78a2.25 2.25 0 0 0-3.182 0L6.72 9.195Zm-4.043 1.214a2.25 2.25 0 0 0 0 3.182l1.414-1.414a.25.25 0 0 1 0-.354L2.677 10.41Z",mask:"url(#fpl-icon-24-component-a)"}))}function dc(e){return Q.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},Q.createElement("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M5 15.727V7.924l.059-.065c.11-.117.285-.28.53-.443C6.078 7.091 6.858 6.75 8 6.75s1.923.341 2.41.666a3.092 3.092 0 0 1 .595.513A.5.5 0 0 0 11 8v7.727a5.997 5.997 0 0 0-.07-.04C10.296 15.336 9.338 15 8 15s-2.296.335-2.93.688a5.679 5.679 0 0 0-.07.04Zm7 0 .07-.04C12.704 15.336 13.662 15 15 15s2.296.335 2.93.688l.07.04V7.923a3.09 3.09 0 0 0-.59-.508c-.487-.325-1.267-.666-2.41-.666-1.143 0-1.923.341-2.41.666a3.09 3.09 0 0 0-.595.513A.5.5 0 0 1 12 8v7.727Zm-1.035-9.143c.217.145.395.291.535.421.14-.13.318-.276.535-.421.638-.425 1.608-.834 2.965-.834 1.357 0 2.327.409 2.965.834.317.211.548.424.703.588a3 3 0 0 1 .226.268l.014.02.005.008.002.003v.001l-.415.278.416-.277A.5.5 0 0 1 19 7.75v9a.5.5 0 0 1-.888.316l-.002-.003.39-.313-.39.313a1.788 1.788 0 0 0-.136-.134 3.013 3.013 0 0 0-.53-.367C16.955 16.29 16.163 16 15 16s-1.954.29-2.445.562c-.246.137-.42.272-.529.368a1.788 1.788 0 0 0-.136.133l-.002.003a.5.5 0 0 1-.776 0l-.002-.003a1.788 1.788 0 0 0-.136-.134 3.013 3.013 0 0 0-.53-.367C9.955 16.29 9.163 16 8 16s-1.954.29-2.445.562c-.246.137-.42.272-.529.368a1.755 1.755 0 0 0-.136.133l-.002.003A.5.5 0 0 1 4 16.75v-9a.5.5 0 0 1 .084-.277l.416.277-.416-.278.001-.002.002-.002.005-.007.014-.02.049-.064c.04-.052.1-.123.177-.205.155-.164.386-.377.703-.588C5.673 6.159 6.643 5.75 8 5.75c1.357 0 2.327.409 2.965.834Z",clipRule:"evenodd"}))}var dd=n(930850),du=n(521054);let dm="empty_states--emptyStateContent--i0Ad8",dp="empty_states--emptyStateIcon--kLLCD",d_="empty_states--emptyStateIconWrapper--SHUbu",df="empty_states--emptyStateText--gZR-A",dh="empty_states--link--kfp3o blue_link--blueLink--9rlnd";var dg=n(400232),dE=n(951864),dv=n(337987);function dy(){let e=(0,$.d4)(e=>e.library.assetsPanelSearch.query);return Q.createElement("div",{className:"empty_states--emptyStatesTextContainer--dM-5d"},Q.createElement("div",{className:"empty_states--text--5nh4u"},Q.createElement(eO.Tx,{id:"design_systems.assets_panel.no_results_for_query",searchQuery:e})))}function db(){let e=(0,$.wA)();return Q.createElement("div",{className:"empty_states--emptyState--ZaBY3 text--fontPos11--2LvXf text--_fontBase--QdLsd"},Q.createElement("div",{className:"empty_states--emptyStateTitle--TWkpO text--fontPos11--2LvXf text--_fontBase--QdLsd"},Q.createElement(eO.Tx,{id:"design_systems.assets_panel.components"})),Q.createElement("div",{className:dm},Q.createElement(nd.U,{className:dp,svg:dg.A},Q.createElement("div",{className:d_},Q.createElement(ds,null))),Q.createElement("div",{className:df},Q.createElement(eO.Tx,{id:"design_systems.assets_panel.create_a_component"})," ",Q.createElement("a",{className:dh,href:"https://help.figma.com/hc/articles/360038662654",target:"_blank",rel:"noopener"},Q.createElement(eO.Tx,{id:"design_systems.assets_panel.learn_more"})))),Q.createElement("div",{className:dm},Q.createElement(nd.U,{className:dp,svg:dE.A,fallbackSvg:dv.A},Q.createElement("div",{className:d_},Q.createElement(dc,null))),Q.createElement("div",{className:df},Q.createElement(ns.GG,{className:dh,onClick:()=>{e(n9.to({type:du.T,data:{entrypoint:dd.r6.ASSETS_PANEL_EXPLORE_LIBRARIES_LINK}}))},recordingKey:nh.Pt("assetsEmptyState","exploreLibraries")},Q.createElement(eO.Tx,{id:"design_systems.assets_panel.explore_libraries"})))))}var dC=n(15144),dw=n(606156),dT=n(30291);function dx({searchOptions:e,keyboardNavigationPath:t,keyboardNavigationColumn:n}){let a=(0,$.wA)(),r=(0,$.d4)(dC.UQ),{activeTab:l,shouldFocusSearchBar:i}=(0,$.d4)(e=>e.leftPanel),o=l===eU.xae.ASSETS,s=Q.useRef(null),c=(0,$.d4)(e=>e.mirror.appModel.activeCanvasEditModeType),d=(0,dw.vb)({isVisible:o,autofocus:!0,selectOnFocus:!0,ref:s});Q.useEffect(()=>{let e=e=>{(ec.Ay.chromeos?e.altKey&&e.shiftKey&&e.keyCode===es.Uz.KEY_2:e.altKey&&e.keyCode===es.Uz.KEY_2)&&c!==eU.m1T.TEXT&&(d(),e.preventDefault())};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},[c,d]);let u=Q.useCallback(t=>{let n;e&&((0,dC.eu)(e.type)?n=e.type:(n={type:dT.I.ALL},e.onSetAssetType(n))),a(cj.ku({query:t,searchOptions:n}))},[a,e]),m=ea()("component_sidebar_search--searchWithViewModeToggle--nKJ2-","component_sidebar_search--negMargin--QTfpB");return null!=t?Q.createElement(dw.E1,{query:r.query,onChange:u,isVisible:o,className:m,recordingKey:"componentsLibrarySearch",placeholder:(0,eO.t)("design_systems.assets_panel.search"),autofocus:i,selectOnFocus:!0,hideSearchIcon:!0,entryPointForTracking:"editor:assets_panel",path:t,column:n,forwardedRef:s}):Q.createElement(dw.aU,{query:r.query,onChange:u,isVisible:o,className:m,recordingKey:"componentsLibrarySearch",placeholder:(0,eO.t)("design_systems.assets_panel.search"),autofocus:i,selectOnFocus:!0,hideSearchIcon:!0,forwardedRef:s,entryPointForTracking:"editor:assets_panel"})}var dN=n(767129),dk=n(92158),dS=n(916833);function dI({entrypoint:e,modalType:t,hasUpdatesToAccept:n}){let a=(0,$.wA)(),r=(0,$.d4)(e=>e.modalShown),l=!1;"editor"===t&&(null==r?void 0:r.type)===lz.cX?l=r.data.entrypoint===e:"figjam"===t&&(null==r?void 0:r.type)===dS.V.type&&(l=!0);let i=Q.useCallback(()=>{(0,er.sx)("toggle_library_modal"),l?a(n9.Ce()):"editor"===t?(a(n9.to({type:du.T,data:{entrypoint:e,initialTab:n?lz.Wv.UPDATES:lz.Wv.LIBRARIES}})),a((0,dk.Zn)())):a(n9.to({type:dS.V,data:{tab:lz.Wv.LIBRARIES}}))},[l,a,t,e,n]);return{isLibraryModalShown:l,onToggleLibraryModal:i}}var dA=n(494304);function dP({entrypoint:e,onSetKeyboardNavigationElement:t,recordingKey:n}){let a=(0,eo.kc)().ds_updates_toast_deprecation??!1,r=(0,ef.md)(dA.Tq),l=(0,$.d4)(sY.ao),i=r>0||l,o="ui3"===(0,et.DP)().version,{isLibraryModalShown:s,onToggleLibraryModal:c}=dI({entrypoint:e,modalType:"editor",hasUpdatesToAccept:!a&&r>0}),d=r>0&&!a?(0,eO.t)("fullscreen.libraries_button.tooltip.updates_to_pull"):l&&!a?(0,eO.t)("fullscreen.libraries_button.tooltip.updates_to_push"):(0,eO.t)("fullscreen.libraries_button.tooltip.no_updates");return Q.createElement("div",{className:"library_modal_button--teamLibraryIcon--EBc7q","data-onboarding-key":"library"},!a&&i&&Q.createElement("span",{className:ea()({"library_modal_button--selected--sIVl-":s},"library_modal_button--teamLibraryUpdatesIndicator--VtXap")}),o?Q.createElement(dO,{"aria-label":(0,eO.t)("design_systems.assets_panel.library_tooltip"),ref:t,recordingKey:nh.Pt(n,"teamLibrary"),"data-tooltip-type":nO.Ib.TEXT,"data-tooltip":d,"data-onboarding-key":th.D,onClick:c,innerText:"Team Library"},Q.createElement(dc,null)):Q.createElement(aJ.o5,{ref:t,recordingKey:nh.Pt(n,"teamLibrary"),selected:s,"data-tooltip-type":nO.Ib.TEXT,"data-tooltip":d,"data-onboarding-key":th.D,svg:dE.A,fallbackSvg:dv.A,onClick:c,innerText:"Team Library"}))}let dO=(0,t6.tf)(dN.K);var dL=n(876019),dM=n(639e3),dD=n(952788),dR=n(150963),dF=n(24422),dB=n(110456),dU=n(837069),dH=n(64049),dV=n(482402),dG=n(839862);function dK(){var e,t;let n=(0,$.d4)(cQ.getPermissionsState),a=(0,t_.Cq)({useSinatraType:!0});return t=null==(e=(0,$.d4)(dG.x))?void 0:e.id,!!a&&!!t&&!!(n.currentUserOrgId&&(0,cQ.canGuestOrg)(n.currentUserOrgId,n)||(0,cQ.hasProTeamPaidStatus)(n,dV._Y.DESIGN,t)||(0,cQ.hasActiveEduTeam)(n,t))}var dW=n(918603),dz=n(691457),dj=n(646247),dY=n(472497),dZ=n(259301),dX=n(381180),dq=n(41297),dJ=n(667777),dQ=n(251656),d$=n(515165),d0=n(801199),d1=n(487383),d2=n(180927),d5=n(825813),d4=n(206936),d3=n(19266);let d6="asset_file_path--path---PrgD text--fontPos11--2LvXf text--_fontBase--QdLsd",d7="asset_file_path--pathLink--lvFH3",d8="asset_file_path--skeletonText--PIxni";function d9({assetFileKey:e,assetNodeId:t}){var n,a,r,l,i,o,s,c;let d=(0,d4.ol)(),u=(0,d0.sZ)(),m=!!u||(0,cK.w5)(d),p=null==u?void 0:u.id,_=d5.M4.useFile(e),f=(0,eh.Rs)(tf.epW,{fileKey:e},{enabled:m}),h=null==(n=null==f?void 0:f.data)?void 0:n.file,g=function(e,t){let n=(0,$.d4)(e=>e.hubFiles)[e];return(0,dq.wJ)(e)&&n?(0,dX.qD)(n).name:t}(e,null==(a=null==_?void 0:_.data)?void 0:a.name),E=function(e,t){let n=(0,dq.wJ)(e),a=(0,$.d4)(t=>(0,dJ.v)(t,e)),r=(0,$.d4)(t_.tB),l=d5.M4.useFile(e).data;return Q.useMemo(()=>{if(!a||n||!l||!r||l.key===r.key)return null;let e=(0,d1.to)(l);return(0,dY.dR)(e,{"node-id":encodeURIComponent((0,d2.E)(t))})},[t,a,l,r,n])}(e,t),v=(null==f?void 0:f.status)==="loading",y=(0,d$.E_)(e),b=null==(r=null==h?void 0:h.team)?void 0:r.id,C=b?function(e,t){let n=location.origin;return t?`${n}/files/${t}/team/${e}`:`${n}/files/team/${e}`}(b,p):void 0,w=null==(l=null==h?void 0:h.team)?void 0:l.name,T=b&&w&&m,x=null==(o=null==(i=null==h?void 0:h.team)?void 0:i.workspace)?void 0:o.id,N=x&&p?d3.fO(x,p):void 0,k=null==(c=null==(s=null==h?void 0:h.team)?void 0:s.workspace)?void 0:c.name,S=x&&k&&m;return m&&v?Q.createElement("div",{className:d6,"data-testid":"asset-file-path-loader"},Q.createElement(tq.Wi,{className:d8,opacity:50}),"/",Q.createElement(tq.Wi,{className:d8,opacity:50})):Q.createElement("div",{className:d6},S&&Q.createElement(Q.Fragment,null,Q.createElement(dZ.q,{tooltipText:k},Q.createElement("a",{href:N,target:"_blank",className:d7},k)),"/"),T&&Q.createElement(Q.Fragment,null,Q.createElement(dZ.q,{tooltipText:w},Q.createElement("a",{href:C,target:"_blank",className:d7},w)),"/"),Q.createElement(dZ.q,{tooltipText:g},E?Q.createElement("a",{href:E,target:"_blank",className:d7},g):Q.createElement("span",null,g)),(0,eo.kc)().dse_preset_libraries&&y&&Q.createElement("div",{className:tw.cx.flex.alignCenter.justifyCenter.ml2.$},Q.createElement(dQ.S,{hubFileId:e,showTooltip:!0})))}var ue=n(216817),ut=n(532851),un=n(597721),ua=n(129895),ur=n(794993),ul=n(922990),ui=n(312701);function uo({user:e,communityProfile:t,updatedAt:n}){let a=null!=e&&!!e.img_url&&!!e.handle,r=null,l=null;return(null!=t?(r=Q.createElement(ui.e,{entity:t,size:ul.Pf.SMALL}),l=t.name):a&&(r=Q.createElement(ul.H8,{user:e,size:ul.Pf.SMALL}),l=e.handle),r&&l)?Q.createElement("div",{className:"asset_updated_details--updatedAtAvatar--uf4Gy"},r,Q.createElement("span",{className:"asset_updated_details--handle--63B8y"},l),n?Q.createElement(Q.Fragment,null,Q.createElement("span",{className:"asset_updated_details--dot--SoliI"},"\xb7"),Q.createElement(ur.h1,{date:n})):null):n?Q.createElement("div",{className:"asset_updated_details--updatedAt--eam-d"},Q.createElement(eO.Tx,{id:"design_systems.assets_panel.updated_at",updatedAt:Q.createElement(ur.h1,{date:n})})):null}var us=n(501965);function uc({renderedAssetData:e}){var t,n,a,r;let l=(0,$.wA)(),i=(0,$.d4)(e=>e.dropdownShown),o=Q.useMemo(()=>{var t,n;let a=null==(n=null==(t=null==e?void 0:e.nodeData)?void 0:t.moduleFrameData)?void 0:n.selectedFrameGUID;return null==a||a===ad.AD?{type:"all"}:{type:"guid",guid:a}},[null==(n=null==(t=null==e?void 0:e.nodeData)?void 0:t.moduleFrameData)?void 0:n.selectedFrameGUID]),s=Q.useCallback(e=>{let t="all"===e.type?ad.AD:e.guid;eU.glU.setPlaygroundSelectedNode(t)},[]),{nodeData:c}=e,d=Q.useMemo(()=>({format:t=>{var n,a,r;return"all"===t.type?"All frames":(null==(r=((null==(a=null==(n=null==e?void 0:e.nodeData)?void 0:n.moduleFrameData)?void 0:a.frames)??{})[t.guid])?void 0:r.name)??""}}),[null==(r=null==(a=null==e?void 0:e.nodeData)?void 0:a.moduleFrameData)?void 0:r.frames]);if(null==c)return null;let{playgroundGUID:u,moduleFrameData:m}=c;if(!u||null==m)return null;let p=Object.keys(m.frames??{});return p.length<2?null:Q.createElement("div",{className:"playground_module_frame_section--wrapper--65QB6"},Q.createElement("div",{className:"playground_module_frame_section--title--PCfEU"},Q.createElement(eO.Tx,{id:"design_systems.assets_panel.frames"})),Q.createElement(aT.l6,{id:"playground-module-frame-select",property:o,formatter:d,dispatch:l,onChange:s,dropdownShown:i},Q.createElement(aT.c$,{value:{type:"all"}}),Q.createElement(aT.sK,null),p.map(e=>Q.createElement(aT.c$,{key:e,value:{type:"guid",guid:e}}))))}let ud=(0,rT.jz)(tI.figmaComponentFlyoutTextMaxCollapsedHeight);function uu({description:e,description_rt:t}){let n=Q.useRef(null),[a,r]=Q.useState(!0),[l,i]=Q.useState(!1),o=(0,ue.Z)(e);Q.useEffect(()=>{e&&n.current&&o!==e&&r(n.current.scrollHeight>ud)},[e,o]);let s=Q.useCallback(()=>{a&&i(!0),r(!a)},[a]);if(!e&&!t)return null;let c=!!e&&(a||l);return Q.createElement("div",{className:"truncated_component_description--documentationSection--87RCO"},t?Q.createElement("div",null,Q.createElement(id.R,{fallback:Q.createElement(t2.kt,null),errorFallback:null,value:t,quillClassName:ea()("truncated_component_description--quill--yYiwV",{"truncated_component_description--quillCollapsed--3DiWp":a}),quillInnerRef:n})):Q.createElement("div",{ref:n,className:ea()({"truncated_component_description--collapsed--VXZTS ellipsis--ellipsisAfter6Lines--2UA7M ellipsis--_ellipsisAfterNLines--LzI7k":a},"truncated_component_description--documentationDescription--C090D text--fontPos11--2LvXf text--_fontBase--QdLsd"),dir:"auto"},e),c&&Q.createElement("button",{className:"truncated_component_description--showMore--brfX6",onClick:s},a?Q.createElement(eO.Tx,{id:"design_systems.assets_panel.show_more"}):Q.createElement(eO.Tx,{id:"design_systems.assets_panel.show_less"})))}function um({renderedAssetData:e,errorType:t,canViewPlayground:n,onInsert:a,shouldHideError:r,onSetShouldHideError:l}){var i,o,s,c,d;let u=(0,$.d4)(e=>e.hubFiles),m=(0,ae.T3)(),[p,_]=Q.useState(!1);Q.useEffect(()=>{_(!1),l(!1)},[e.asset,l]);let f=(0,us.S)(e.asset),h=(0,ua.Y)(e.asset),g=Q.useMemo(()=>(0,un.kH)(e.asset.name??""),[e.asset.name]),E=Q.useRef(null),v=(0,ut.NG)({text:g,textRef:E}),y=(0,dq.wJ)(e.asset.file_key),b=y?u[e.asset.file_key]:null,C=e.asset,w=Q.useMemo(()=>{var t;let n=null==(t=e.nodeData)?void 0:t.playgroundGUID;if(!n)return"";let a=m.get(n);if(!a)return"";let r=m.get(a.symbolId??"");return r?(r.isState?r.parentGuid:r.guid)??"":""},[e,m]),T=Q.useMemo(()=>{if(t)return{errorType:t,shouldHideError:r,setShouldHideError:l}},[t,r,l]),x=y&&(0,eo.kc)().presets_baseline?Q.createElement(eO.Tx,{id:"design_systems.assets_panel.insert"}):e.asset.type===lz.PW.MODULE&&(0,eo.kc)().dse_editor_templates_v1?Q.createElement(eO.Tx,{id:"design_systems.assets_panel.insert_template"}):Q.createElement(eO.Tx,{id:"design_systems.assets_panel.insert_instance"});return Q.createElement("div",{className:"component_flyout_body--bodyWrapper--CoGX-"},f&&!p&&Q.createElement("div",{className:"component_flyout_body--updateBanner--ETDK5 component_flyout_body--_bodyPadding--KrB6p text--fontPos11--2LvXf text--_fontBase--QdLsd"},Q.createElement(lO.z,{orientation:"vertical",iconSrc:l5.A,onClose:()=>_(!0),variant:"design"},Q.createElement(eO.Tx,{id:"design_systems.assets_panel.update_banner"}))),Q.createElement("div",{className:"component_flyout_body--headerFileNameWrapper--MH4jz component_flyout_body--_bodyPadding--KrB6p"},Q.createElement("h2",{className:"component_flyout_body--header--3LXSQ text--fontPos14--OL9Hp text--_fontBase--QdLsd ellipsis--ellipsis--Tjyfa","data-tooltip":v?g:void 0,"data-tooltip-type":nO.Ib.TEXT,ref:E},g),!!h&&h>1&&Q.createElement("div",{className:"component_flyout_body--numVariants--nureW"},Q.createElement(eO.Tx,{id:"design_systems.assets_panel.variant_count",numVariants:h}))),Q.createElement("div",{className:"component_flyout_body--descriptionWrapper--wFyRa component_flyout_body--_bodyPadding--KrB6p"},Q.createElement(uu,{description:C.description,description_rt:C.description_rt})),Q.createElement("div",{className:"component_flyout_body--updatedWrapper--q4V48 component_flyout_body--_bodyPadding--KrB6p"},Q.createElement(uo,{user:C.user,communityProfile:null==b?void 0:b.publisher,updatedAt:C.updated_at})),Q.createElement("div",{className:"component_flyout_body--buttonWrapper--Sb1Mq component_flyout_body--_bodyPadding--KrB6p"},Q.createElement(nc.$$,{onClick:a,fullWidth:!0},x)),n&&!(null==e?void 0:e.nodeData)&&!T&&Q.createElement("div",{className:"component_flyout_body--skeletonWrapper--urKH5"},Q.createElement(tq.Wi,{className:"component_flyout_body--skeletonHeader--VoEY3",opacity:50}),Q.createElement(tq.Wi,{className:"component_flyout_body--skeletonBody--pINXr",opacity:50})),n&&((null==e?void 0:e.nodeData)||T)&&Q.createElement(ae.q0.Provider,{value:m},(0,eo.kc)().dse_editor_templates_v1&&(0,eo.kc)().dse_editor_templates_frames&&Q.createElement(uc,{renderedAssetData:e}),Q.createElement("div",{className:"component_flyout_body--propsContainer--w8pmU"},Q.createElement(l3,{componentProps:null==(i=e.nodeData)?void 0:i.componentProps,moduleProps:null==(o=e.nodeData)?void 0:o.moduleProps,moduleFrameData:(null==(s=e.nodeData)?void 0:s.moduleFrameData)??void 0,label:Q.createElement(up,{renderedAssetData:e}),playgroundGUID:null==(c=e.nodeData)?void 0:c.playgroundGUID,productComponentGUID:w,sceneGraph:m,instanceSwapPickerInitialHeight:200,instanceSwapPickerInitialPosition:"right-center",containerWidth:lR.O2.UNBOUNDED,errorData:T,shouldShowDividerAboveProps:!0})),Q.createElement("div",{className:"component_flyout_body--modeContainer--8n5p5"},Q.createElement(lQ,{fill:!0,modes:(null==(d=e.nodeData)?void 0:d.modeData)||{}}))))}function up({renderedAssetData:e}){let t=Q.useCallback(()=>{e.refetchAndResetScene()},[e]);return Q.createElement("div",{className:"component_flyout_body--playgroundHeader--lQfDc"},Q.createElement("div",{className:"component_flyout_body--flyoutLabel--6Y6lR text--fontPos11--2LvXf text--_fontBase--QdLsd"},Q.createElement(eM.B,{className:"component_flyout_body--headerIcon--FHdrw",svg:e$.A}),Q.createElement(eO.Tx,{id:"design_systems.assets_panel.playground_label"})),Q.createElement(aJ.K0,{className:"component_flyout_body--resetButton--wVXDQ",svg:l8.A,onClick:t,"data-tooltip":(0,eO.t)("design_systems.playground.reset_properties"),"data-tooltip-type":nO.Ib.TEXT,disabled:!e.hasChangesToReset,recordingKey:"resetPlaygroundProps"}))}var u_=n(244126),uf=n(756147),uh=n(820189),ug=n(886140),uE=n(423042),uv=n(77083);function uy({canViewPlayground:e,renderedAssetData:t,flyoutHidden:n,setFlyoutHidden:a,sectionPosition:r,sectionNameForTracking:l,sectionDepth:i}){let o=(0,$.wA)(),s=Q.useCallback(()=>{a(!0)},[a]),c=Q.useCallback(()=>o(n9.ES({type:uE.V})),[o]),d=Q.useCallback(()=>{n&&c()},[c,n]),{onInsertableResourcePointerDown:u,dragState:m}=(0,uh.j)({resource:t.asset,isList:!1,clickToInsert:!1,sourceForTracking:"asset-description-preview",fromPlayground:e,recomputeCancelRectsOnPointerUp:!0,onDragStart:s,onPointerUp:d,sectionPosition:r,sectionNameForTracking:l,sectionDepth:i}),p=Q.useMemo(()=>{let e=(0,lH.zR)(t.asset,null);if(null!=e)return u_.F.format(e)},[t.asset]);return Q.createElement("div",{className:"component_flyout_thumbnail--thumbnailWrapper--P38Qq",onPointerDown:u,role:"button",style:p?{backgroundColor:p}:void 0},e&&(null==t?void 0:t.thumbnailData)&&t.hasChangesToReset?Q.createElement("img",{className:"component_flyout_thumbnail--playgroundThumbnail--0Qu4J",src:t.thumbnailData.src,width:t.thumbnailData.width,height:t.thumbnailData.height,alt:(0,eO.t)("design_systems.playground.thumbnail_alt")}):Q.createElement(ug.M,{className:"component_flyout_thumbnail--thumbnail--p3jV2",draggable:!1,key:(0,dH.V)(t.asset),item:t.asset,shouldGenerateLocalThumbnail:!1}),Q.createElement(uf.q,{dragState:m,isList:!1,thumbnailOverrideSrc:e&&(null==t?void 0:t.thumbnailData)?t.thumbnailData.src:void 0}))}let ub={maxWidth:640,maxHeight:480};function uC({asset:e,onInsert:t,onLoaded:n,flyoutHidden:a,setFlyoutHidden:r,sectionPosition:l,sectionNameForTracking:i,sectionDepth:o}){let s=dK(),[c,d]=Q.useState(!1),u=function({canViewPlayground:e,canvasAsset:t,onLoaded:n,onError:a,thumbnailOptions:r}){let[l,i]=Q.useState(t),{setPlaygroundNodeData:o,onSetPercentImagesLoaded:s,onResetTracker:c,thumbnailData:d,playgroundNodeData:u,hasChangesToReset:m,hasThumbnailErrors:p,setHasChangesToReset:_}=lY(r),f=l!==t||!u,[h,g]=Q.useState(null),E=Q.useCallback(()=>{eU.glU.clearPlaygroundScene(),o(void 0)},[o]),v=Q.useCallback(async(e=!0)=>{let n;if(t.type!==lz.PW.COMPONENT&&t.type!==lz.PW.STATE_GROUP&&t.type!==lz.PW.MODULE){E();return}let a=Date.now();if(g(null),t.isLocal)n=null;else try{let e=lH.Eo.getCanvas({canvas_url:t.canvas_url});await Promise.race([e,(0,lU.fm)(100)])||(i(t),o(void 0),_(!1)),n=await e}catch(e){0===e.status?g("OFFLINE"):g("GENERIC"),E(),i(t);return}let r=t.type!==lz.PW.STATE_GROUP||t.isLocal?null:t.default_state_key;if(n?eU.glU.setPlaygroundSceneFromBuffer(t.node_id,n,e,r,t.file_key):eU.glU.setPlaygroundSceneFromLocalAsset(t.node_id)){_(!1),o(eU.glU.getPlaygroundNodeData()),i(t),er.az.trackDefinedEvent("playground.set_scene",{duration:Date.now()-a,assetType:t.type,isLocal:t.isLocal??!1,assetKey:(0,lV.u2)(t)}),c(),(0,lG.Jr)().loadAllImagesUnder(["0:0"],eU.MoD.NON_ANIMATED_ONLY,"playground.initialLoad",(e,t)=>{s((t-e)/t)},eU.glU.getPlaygroundScene());return}if(e){i(t),o(void 0),_(!1),setTimeout(()=>{v(!1)},50);return}g("GENERIC"),E()},[E,c,s,t,o,_]);return Q.useEffect(()=>{e?v():i(t)},[e,o,t,E,v]),Q.useMemo(()=>{let e=p?"THUMBNAIL_TIMEOUT":h;return!e&&f?{state:"LOADING",previousAssetData:{thumbnailData:d,hasChangesToReset:m,refetchAndResetScene:v,nodeData:u,asset:l}}:(n(),e)?(a(),{state:"ERROR",errorType:e,previousAssetData:{thumbnailData:d,hasChangesToReset:m,refetchAndResetScene:v,nodeData:u,asset:l}}):{state:"LOADED",currentAssetData:{hasChangesToReset:m,refetchAndResetScene:v,nodeData:u,thumbnailData:d,asset:l}}},[f,n,p,h,u,d,a,m,v,l])}({canvasAsset:e,canViewPlayground:s,onLoaded:n,onError:Q.useCallback(()=>d(!1),[]),thumbnailOptions:ub}),m=(0,dW.H)(),p=(0,$.d4)(e=>e.fileVersion),_=(0,ue.Z)(p);if(Q.useEffect(()=>{var e,t;(null==u?void 0:u.state)==="LOADED"&&(null==(t=null==(e=null==u?void 0:u.currentAssetData)?void 0:e.nodeData)?void 0:t.playgroundGUID)&&null!=_&&_!==p&&(m(),eU.glU.clearPlaygroundScene())},[p,_,m,e.type,u]),!u)return Q.createElement(t2.kt,{className:"component_flyout--spinner--c-wap"});let f="LOADED"===u.state?u.currentAssetData:u.previousAssetData,h="ERROR"===u.state?u.errorType:void 0;return Q.createElement("div",{className:"component_flyout--wrapper--96Jih"},Q.createElement(uy,{renderedAssetData:f,canViewPlayground:s,flyoutHidden:a,setFlyoutHidden:r,sectionPosition:l,sectionNameForTracking:i,sectionDepth:o}),Q.createElement(um,{renderedAssetData:f,errorType:h,canViewPlayground:s,onInsert:t,onSetShouldHideError:d,shouldHideError:c}))}var uw=n(202395),uT=n(860168);let ux=(0,rT.jz)(uT.LdP),uN=(0,rT.jz)(uT.wkK),uk=(0,aE.Ju)(function({asset:e,searchSessionId:t,query:n,sectionPosition:a,sectionNameForTracking:r,assetTypeDropdownSelection:l,sectionDepth:i,containerWidth:o,onGetKeyboardNavigationItemById:s}){let c=Q.useRef(null),d=(0,e_.Xr)(uw.T),u=dK(),m=(0,dB.cm)(e.file_key),p=(0,t_.q5)(),_=(0,$.wA)(),f=(0,$.d4)(e=>(0,sY.e_)(e).local.thumbnails),h=(0,dW.H)(),g=(0,$.d4)(e=>e.instanceSwapPickerShown),E=(0,dj.k)();(0,ts.h)(()=>{er.az.trackDefinedEvent("assets_panel.flyout_opened",{assetKey:(0,dH.V)(e),assetType:(0,dH.q)(e.type),fileKey:e.file_key,isLocal:e.isLocal,fileParentOrgId:(null==p?void 0:p.parentOrgId)??void 0,fileTeamId:(null==p?void 0:p.teamId)??void 0,assetsPanelVersion:E})}),(0,ts.h)(()=>()=>{_((0,lM.vq)()),d(!1)}),Q.useEffect(()=>{if(!(0,lS.dx)(e)||!e.isLocal)return;let t=e.node_id?f[e.node_id]:null,n=e.type===lz.PW.COMPONENT?e.content_hash:e.version;(null==t?void 0:t.content_hash)!==n&&requestAnimationFrame(()=>{let t=(0,lH.r2)(e.node_id);null!=t&&_(dF.T1({thumbnails:[{nodeId:e.node_id,url:t,type:e.type}],source:lz.$1.LOCAL}))})},[e,_,f]);let v=Q.useCallback(()=>{requestAnimationFrame(()=>{var e;return null==(e=null==c?void 0:c.current)?void 0:e.ensureModalOnScreen()})},[]),y=Q.useCallback(()=>{(null==g?void 0:g.isShown)&&_((0,lM.vq)())},[_,g]),b=(0,lV.Hu)(e.file_key),C=Q.useCallback(()=>{let o=lT.Y5.getViewportInfo(),s={canvasPosition:{x:o.offsetX,y:o.offsetY},insertAsChildOfCanvas:!0,percentageOffset:new lB.Mi(.5,.5),storeInRecentsKey:dz.$A.Design,useSmartPositioning:!0,fromPlayground:u};e.type===lz.PW.COMPONENT?_((0,dk.Yf)({item:e,...s})):e.type===lz.PW.STATE_GROUP?_((0,dk.b$)({item:e,...s})):e.type===lz.PW.MODULE&&_((0,dk.Bs)({item:e,...s})),_(n9.ES({type:uE.V})),er.az.trackDefinedEvent("assets_panel.flyout_insert",{assetKey:(0,lS.Av)(e),assetType:(0,dH.q)(e.type),assetTypeDropdownSelection:l,fileKey:(null==p?void 0:p.key)??void 0,fileParentOrgId:(null==p?void 0:p.parentOrgId)??void 0,fileTeamId:(null==p?void 0:p.teamId)??void 0,libraryType:b,searchSessionId:t??void 0,searchQuery:n,sectionPosition:a,sourceSection:r??void 0,sectionDepth:i,assetsPanelVersion:E,scoreAi:e.ai_score??void 0,scoreLexical:e.lexical_score??void 0,aiResultsEnabled:(0,eo.kc)().api_asset_search})},[u,e,_,l,null==p?void 0:p.key,null==p?void 0:p.parentOrgId,null==p?void 0:p.teamId,b,t,n,a,r,i,E]);Q.useEffect(()=>{let e=e=>{var t;let n=aP.findDOMNode(null==(t=c.current)?void 0:t.getEl());if(n){if(!n.contains(e.target)){if(d(!1),(0,dR.NX)(e.target,"data-does-not-dismiss-component-flyout"))return;_(n9.ES({type:uE.V}));return}d(!0)}};return document.addEventListener("pointerdown",e),()=>{document.removeEventListener("pointerdown",e)}},[_,d]);let w=Q.useCallback(t=>{var n,a,r,l;let i=t.event.code??t.event.key,o=(0,dH.V)(e),c=null==s?void 0:s(o);if(!c)return;let d=t.event.keyCode===es.Uz.TAB,u=t.event.shiftKey;if((0,cz.c2)(t.event,!1)){null==(n=c.getItemAbove())||n.focus(),t.accept();return}if((0,cz.Nt)(t.event,!1)){null==(a=c.getItemBelow())||a.focus(),t.accept();return}if((0,cz.yn)(i,!1)||d&&u){null==(r=c.getItemToTheLeft())||r.focus(),t.accept();return}if((0,cz.lv)(i,!1)||d&&!u){null==(l=c.getItemToTheRight())||l.focus(),t.accept();return}if("Enter"===i){C(),t.accept();return}},[e,C,s]);var T=Q.createElement("div",{className:tw.cx.minW0.flex1.$},Q.createElement("div",null,(0,eO.t)("design_systems.assets_panel.details")),Q.createElement(nk.Y,{spacing:0,direction:"horizontal"},e&&Q.createElement(d9,{assetFileKey:e.file_key,assetNodeId:e.node_id}),m&&Q.createElement(dU.KP,{fileKey:e.file_key,variant:"secondary",tooltipLocation:"below"})));let[x,N]=Q.useState(!1);return Q.createElement(dn.vx,{alwaysEnsureModalOnScreen:!0,allowAutoExpanding:!0,canRenderBelowViewport:!1,headerSize:"large",initialPosition:new lB.Mi(o+1,ux),onClick:y,onClose:h,onKeyDown:w,title:T,truncateTitleText:!0,initialWidth:uN,ref:c,dataTestId:"component-flyout-modal",hidden:x},Q.createElement("div",{"data-not-draggable":!0},Q.createElement(uC,{asset:e,onLoaded:v,onInsert:C,flyoutHidden:x,setFlyoutHidden:N,sectionPosition:a,sectionNameForTracking:r,sectionDepth:i})))},uE.V);var uS=n(390713),uI=n(312330);function uA(e,t,n){return null!=e&&(t[e.type]||e.type===dT.I.FILE&&n[e.fileKey])?e:{type:dT.I.ALL}}var uP=n(450710),uO=n(660439),uL=n(904936),uM=n(228224),uD=n(904901),uR=n(282597);let uF="searchResults";function uB(e,t){return`${t}:${e.key}`}function uU(e){return`${e}:${uF}:templates`}function uH(e){return`${e}:recentlyUsed`}function uV(e){return`${e}:stickySection`}var uG=n(987757),uK=n(691395),uW=n(619813),uz=n(158982),uj=n(854018),uY=n(824328),uZ=n(786457),uX=n(230997);let uq="library_section_header--sectionHeaderH1--P70zQ ellipsis--ellipsis--Tjyfa",uJ="library_section_header--sectionHeader3_redesign--TGISe ellipsis--ellipsis--Tjyfa",uQ="library_section_header--sectionHeaderH3--5VrMz ellipsis--ellipsis--Tjyfa";var u$=n(432023);let u0=e=>"isExpandable"in e&&e.isExpandable,u1=(e,t)=>{switch(e){case uq:return t?"library_section_header--sectionHeaderDivider--SdrS5 ellipsis--ellipsis--Tjyfa":"library_section_header--sectionHeader1_redesign--cWZaj ellipsis--ellipsis--Tjyfa";case uQ:return uJ;default:return"library_section_header--sectionHeader3_normal--bf4ra"}},u2=e=>{let t=[];if(e&&e.length){t.push(Q.createElement("div",{className:"library_section_header--sectionHeader1_sticky--mZ4QY ellipsis--ellipsis--Tjyfa",key:e[0]},e[0]+" / ","\xa0"));let n=e.slice(1).join(" / ");t.push(Q.createElement("div",{className:uJ,key:n},n,"\xa0"))}return t};class u5 extends Q.Component{componentDidUpdate(e){u0(this.props)&&u0(e)&&e.isExpanded!==this.props.isExpanded&&"h1"===this.props.size&&(0,uj.YQ)({id:"library_section_header_toggled"})}render(){let e="h1"===this.props.size?uq:uQ,t=u0(this.props)?"library_section_header--sectionHeaderExpandable--hHEFq":"",n=u1(e,this.props.shouldShowDividerLine),a=u0(this.props)&&this.props.isFixed?"library_section_header--isFixed--eVHns":"";return Q.createElement(t6.fu,{name:"Section Header",properties:{title:this.props.title,isExpanded:!!u0(this.props)&&this.props.isExpanded},trackingTargets:uY.K.RCS},Q.createElement("div",{className:ea()(n,e,t,a)},u0(this.props)&&Q.createElement(eM.B,{className:this.props.isExpanded?"library_section_header--expandCaretOpen--083vU library_section_header--expandCaret--20Tzs object_row--expandCaret--f1MjE object_row--indent--uZlad":"library_section_header--expandCaret--20Tzs object_row--expandCaret--f1MjE object_row--indent--uZlad",svg:this.props.isExpanded?t$.A:u$.A}),u0(this.props)&&this.props.breadcrumbPath&&!this.props.isFixed&&Q.createElement("div",{className:"library_section_header--breadcrumbPath--Jevbg"},this.props.breadcrumbPath,"\xa0"),u0(this.props)&&this.props.isFixed&&this.props.stickyHeadertokens&&this.props.stickyHeadertokens.length?u2(this.props.stickyHeadertokens):Q.createElement("div",{className:n},this.props.title),(0,uZ.vR)(this.props.subscribedFileKey)&&Q.createElement(dU.KP,{fileKey:this.props.subscribedFileKey,isInLibrarySubtree:!0}),(0,eo.kc)().dse_preset_libraries&&(0,d$.TX)(this.props.subscribedFileKey)&&Q.createElement("div",{className:tw.cx.flex.alignCenter.justifyCenter.ml4.$},Q.createElement(dQ.S,{hubFileId:this.props.subscribedFileKey,showTooltip:!0}))))}}u5.H1_HEIGHT=(0,rT.hG)(uX.BS),u5.H3_HEIGHT=(0,rT.hG)(uX.T);class u4 extends Q.Component{render(){return Q.createElement("div",{className:12===this.props.size?"library_section_header--spacer12--0h1Dt":"library_section_header--spacer16--iPkYc"})}}u4.HEIGHT=(0,rT.hG)(uX.FX);let u3="component_sidebar--stickyHeaderSpacer--SaKsM",u6=(0,rT.hG)(uX.FX),u7=(0,rT.hG)(uX.FX)/2,u8=(0,rT.hG)(uX.Nz),u9=(0,rT.hG)(uX.cP);function me({parent:e,outputElements:t,fileNameByKey:n,items:a,keyPrefix:r,sharedOptions:l,sectionNameForTracking:i}){let o=(0,uz.PI)(a,!0),s={layout:o,...l},c=(0,uz.A5)(s),{width:d,height:u}=(0,uz.rj)(s,c),m=l.isList?1:0,p=l.isList?0:u8,_=l.isList||!n?0:u9,f=u+(l.isList?u7:u6)+p+_+m+(l.isList?0:-2);(0,eo.kc)().api_asset_search_with_scores&&(f+=2*(0,rT.hG)(uX.uY));let h=d+(l.isList?u7:u6)+(l.isList?0:-2),g=0,E=uK.oz.getNextRenderedElementTop(t)+u7;for(let[s,m]of a.entries()){let a=l.isList?E+g*f:E+Math.floor(g/c)*f,p=l.isList?0:3+g%c*h,_=(0,dH.V)(m);t.push({parent:e,type:uK.zq.TILE,top:a,left:p,height:f,key:`${r}:${_}`,element:function({item:e,fileName:t,sourceForTracking:n,sectionNameForTracking:a,thumbLayout:r,thumbHeight:l,thumbWidth:i,isList:o,sectionPosition:s}){return Q.createElement(uW.W,{asset:e,fileName:t,sourceForTracking:n,sectionNameForTracking:a,thumbLayout:r,thumbHeight:l,thumbWidth:i,viewMode:o?uS.Bk.List:uS.Bk.Grid,sectionPosition:s})}({containerWidth:l.containerWidth,fileName:m.file_key?null==n?void 0:n[m.file_key]:void 0,sourceForTracking:l.sourceForTracking,sectionNameForTracking:i,thumbLayout:o,thumbHeight:u,thumbWidth:d,isList:l.isList,item:m,isExpanded:l.isExpanded,sectionPosition:s}),item:m,numCols:c,containerWidth:l.containerWidth,sectionNameForTracking:i,sectionPosition:s}),g+=1}}let mt=(e,t,n)=>{let a=uV(n.keyPrefix),r=uK.oz.getNextRenderedElementTop(t),l={parent:e,type:uK.zq.ROW,top:r,height:"h1"==n.size?u5.H1_HEIGHT:u5.H3_HEIGHT,key:a,element:Q.createElement(u5,{size:n.size,isExpandable:!0,isExpanded:n.isExpanded,title:n.title,breadcrumbPath:n.breadcrumbPath?n.breadcrumbPath:null,stickyHeadertokens:n.stickyHeaderTokens?n.stickyHeaderTokens:void 0,isFixed:!1,subscribedFileKey:n.subscribedFileKey}),isSticky:!0,isFixed:!1,children:[],isExpandable:!0,isExpanded:n.isExpanded,getExpandableElement:e=>Q.createElement(u5,{size:n.size,isExpandable:!0,isExpanded:e,title:n.title,breadcrumbPath:n.breadcrumbPath?n.breadcrumbPath:null,stickyHeadertokens:n.stickyHeaderTokens?n.stickyHeaderTokens:void 0,subscribedFileKey:n.subscribedFileKey}),sectionNameForTracking:n.sectionNameForTracking,rowType:n.rowType,fixedElement:Q.createElement(Q.Fragment,null,Q.createElement("div",{className:u3}),Q.createElement(u5,{size:"h1",isExpandable:!0,isExpanded:n.isExpanded,title:n.title,breadcrumbPath:n.breadcrumbPath?n.breadcrumbPath:null,stickyHeadertokens:n.stickyHeaderTokens?n.stickyHeaderTokens:void 0,isFixed:!0,subscribedFileKey:n.subscribedFileKey}))};return t.push(l),l};function mn({sectionHeaderText:e,isFixed:t}){return Q.createElement("div",{className:ea()("component_sidebar--sectionHeader--v0N1h",t?"component_sidebar--isFixed--orinE":"")},Q.createElement("div",{className:"component_sidebar--sectionHeaderText--hDKu5"},e))}function ma(e,t,n){let a=uK.oz.getNextRenderedElementTop(e),r={key:`${n.keyPrefix}:sectionHeader:${t}`,isSticky:!0,parent:null,isFixed:!1,type:uK.zq.ROW,top:a,height:40,element:Q.createElement(mn,{sectionHeaderText:t,isFixed:!1}),fixedElement:Q.createElement(Q.Fragment,null,Q.createElement("div",{className:u3}),Q.createElement(mn,{sectionHeaderText:t,isFixed:!0})),isStaticRow:!0,sectionNameForTracking:n.sectionNameForTracking};return e.push(r),r}function mr({outputElements:e,results:t,moreResults:n,showMoreResults:a,keyPrefix:r,overallOptions:l,fileNameByKey:i,toggleShowMoreResults:o,parent:s}){if(t.length>0&&me({parent:s??null,outputElements:e,items:t,keyPrefix:`${r}:results`,sharedOptions:l,fileNameByKey:i,sectionNameForTracking:"Primary search results"}),n.length>0){let t=uK.oz.getNextRenderedElementTop(e);e.push({parent:s??null,type:uK.zq.ROW,top:t,height:40,key:`${r}:moreResultsLink`,element:Q.createElement("div",{className:"component_sidebar--text--g20jk"},a&&Q.createElement(eO.Tx,{id:"design_systems.assets_panel.showing_results_from_all_libraries"}),!a&&Q.createElement("a",{className:"component_sidebar--link--I-ane blue_link--blueLink--9rlnd",onClick:o},Q.createElement(eO.Tx,{id:"design_systems.assets_panel.more_results_in_all_libraries",results:n.length}))),sectionNameForTracking:"More search results"}),a&&me({parent:null,outputElements:e,items:n,keyPrefix:`${r}:moreResults`,sharedOptions:l,fileNameByKey:i,sectionNameForTracking:"More search results"})}}function ml({prevParent:e,outputElements:t,inputSubtree:n,inputParentTree:a,keyPrefix:r,sharedOptions:l,sectionNameForTracking:i,hideTitle:o}){let s=uB(n,r),c=!o&&function(e,t){switch(e.type){case"FILE":return""!==e.name;case"PAGE":return t.subtrees.length>1;case"NAME_GROUP":return!e.skipElementsInRendering;case"ASSET_TYPE":return e.items.length>0||e.subtrees.length>0}}(n,a),d=function(e,t,n,a,r,l){if(!e)return null;let i=uB(a,r),o=uV(i),s=l.isExpanded(o,(0,uG.pR)(a.type,a.sectionNameForTracking));switch(a.type){case"FILE":return mt(null,n,{keyPrefix:i,size:"h1",title:a.name,isExpanded:s,stickyHeaderTokens:a.stickyHeaderTokens?a.stickyHeaderTokens:void 0,subscribedFileKey:a.subscribedFileKey,sectionNameForTracking:a.sectionNameForTracking,rowType:uK.l$.LIBRARY});case"PAGE":return mt(t,n,{keyPrefix:i,title:a.name,size:"h3",isExpanded:s,stickyHeaderTokens:a.stickyHeaderTokens?a.stickyHeaderTokens:void 0,sectionNameForTracking:a.sectionNameForTracking,rowType:uK.l$.PAGE});case"NAME_GROUP":return mt(t,n,{keyPrefix:i,size:"h3",title:a.flattenedPath?a.flattenedPath:a.name,isExpanded:s,breadcrumbPath:a.breadcrumbPath?a.breadcrumbPath:void 0,stickyHeaderTokens:a.stickyHeaderTokens?a.stickyHeaderTokens:void 0,sectionNameForTracking:a.sectionNameForTracking,rowType:uK.l$.NAME_GROUP});case"ASSET_TYPE":let c=mi(a.sectionNameForTracking);return mt(t,n,{keyPrefix:i,size:"h3",title:a.name,isExpanded:!0,sectionNameForTracking:a.sectionNameForTracking,rowType:c})}}(c,e,t,n,r,l),u=d?d.children:t,m=d||e;if((0,eo.kc)().dse_templates_proto){let e=n.subtrees.find(uD.Qe);null!=e&&ml({prevParent:null,outputElements:u,inputSubtree:e,inputParentTree:n,keyPrefix:r,sharedOptions:l,sectionNameForTracking:e.sectionNameForTracking})}switch(n.type){case"PAGE":case"ASSET_TYPE":case"FILE":me({parent:m,outputElements:u,items:n.items,keyPrefix:s,sharedOptions:l,sectionNameForTracking:i});break;case"NAME_GROUP":n.skipElementsInRendering||me({parent:m,outputElements:u,items:n.items,keyPrefix:s,sharedOptions:l,sectionNameForTracking:i});break;default:(0,re.xb)(n.type)}for(let e of n.subtrees)(0,eo.kc)().dse_templates_proto&&(0,uD.Qe)(e)||ml({prevParent:m,outputElements:u,inputSubtree:e,inputParentTree:n,keyPrefix:s,sharedOptions:l,sectionNameForTracking:i});"FILE"===n.type&&c&&function(e,t,n){let a=uK.oz.getNextRenderedElementTop(t);t.push({parent:e,type:uK.zq.SEPARATOR,top:a,height:n.size,key:`${n.keyPrefix}:spacer${n.size}`,element:Q.createElement(u4,{size:n.size})})}(m,u,{keyPrefix:s,size:16})}let mi=e=>{let t=null==e?void 0:e.toLowerCase().includes("local");return(null==e?void 0:e.toLowerCase().includes("templates"))?t?uK.l$.LOCAL_TEMPLATES:uK.l$.TEMPLATES:t?uK.l$.LOCAL_COMPONENTS:uK.l$.COMPONENTS};var mo=n(281944);let ms=[];function mc(e,t,n){let a=[];return e&&ml({prevParent:null,outputElements:a,inputSubtree:e,inputParentTree:t,keyPrefix:mo.o7,sharedOptions:n,sectionNameForTracking:e.sectionNameForTracking,hideTitle:!0}),a}let md="library-section-asset-type";function mu(e){switch(e){case"all":return{type:dT.I.ALL};case"recent":return{type:dT.I.RECENT};case"local":return{type:dT.I.LOCAL};default:return{type:dT.I.FILE,fileKey:e}}}var mm=n(148175),mp=n(855878),m_=n(776871),mf=n(80697);function mh(e){let t=(0,$.d4)(e=>e.loadingState),n=(0,$.d4)(e=>e.fileVersion),a=(0,$.d4)(e=>e.openFile),r=(0,dj.k)(),l=a&&null!=n&&(0,mf.yD)(a.key)||null,i=!(null!=l&&(0,m_.D2)(t,l));Q.useEffect(()=>{i||function(e,t,n){if(mg)return;let{numLibraries:a,numComponents:r,numComponentsWithLimit:l}=e();(0,er.sx)("Assets Panel Initial Load",{numLibraries:a,numComponents:r,numComponentsWithLimit:l,assetsPanelVersion:t,fileKey:null==n?void 0:n.key,fileTeamId:(null==n?void 0:n.teamId)??void 0,fileOrgId:(null==n?void 0:n.parentOrgId)??void 0}),mg=!0}(e,r,a)},[e,i,a,r])}let mg=!1;var mE=n(597713),mv=n(683543),my=n(895649);function mb(){let e=(0,$.wA)(),t=(0,$.d4)(e=>e.openFile),n=(0,$.d4)(e=>{var t;return null==(t=e.user)?void 0:t.id});if(!t)return null;let a=t.teamId,r=Q.createElement(nc.Us,{className:"library_upsell_banner--blueLink--bt6GX blue_link--blueLink--9rlnd",onClick:function(){(0,er.sx)("library_upsell_badge_clicked",{fileKey:null==t?void 0:t.key,teamId:a,userId:n}),e((0,n9.to)({type:mv.V,data:{upsellSource:my.b.LIBRARY_UPSELL_BADGE,teamId:a??void 0,openCheckoutInNewTab:!0}}))},trackingProperties:{trackingDescriptor:c5.c.UPGRADE_TO_PROFESSIONAL},trusted:!0,role:"button"},Q.createElement(eO.Tx,{id:"design_systems.assets_panel.library_upsell_upgrade"}));return Q.createElement(t6.fu,{name:"library upsell badge",properties:{fileKey:null==t?void 0:t.key,teamId:null==t?void 0:t.teamId}},Q.createElement("div",{className:"library_upsell_banner--bannerBackground--WlTVY"},Q.createElement("div",{className:"library_upsell_banner--bannerContainer--SqSHa"},Q.createElement(aO.Jn,{className:"library_upsell_banner--closeButton--U1sPN",onClick:function(){(0,er.sx)("library_upsell_badge_dismissed",{fileKey:null==t?void 0:t.key,teamId:a,userId:n}),e(tB.b({has_dismissed_component_sidebar_library_upsell_banner:!0}))}}),Q.createElement("div",{className:"library_upsell_banner--bannerContent--SUcpT"},Q.createElement("div",{className:"library_upsell_banner--bannerHeader--Lbg8d"},Q.createElement(nd.U,{svg:dE.A,className:"library_upsell_banner--bannerIcon--n5IGN"},Q.createElement(dc,null))),Q.createElement("p",{className:"library_upsell_banner--bannerTitle--AN3mP"},Q.createElement(eO.Tx,{id:"design_systems.assets_panel.library_upsell_header"})),Q.createElement("p",{className:"library_upsell_banner--bannerBody--GSg3l"},Q.createElement(eO.Tx,{id:"design_systems.assets_panel.library_upsell_body",upgradeToProfessionalPlanLink:r}))))))}let mC=(0,rT.hG)(uT.gNA),mw={improved:{search:{path:[0,0],column:0},libraryModal:{path:[0,0],column:1},dropdown:{path:[0,1],column:0},viewToggle:{path:[0,1],column:1}}};function mT({initialScrollTop:e,onScroll:t,viewMode:n,toggleViewMode:a,containerSizingOptions:r,recordingKey:l}){return Q.createElement(cz.dP,{recordingKey:"localComponents",className:"component_sidebar--container--Wxtr4",dataTestId:"component-sidebar","data-does-not-dismiss-component-flyout":!0},Q.createElement(mx,{initialScrollTop:e,onScroll:t,viewMode:n,toggleViewMode:a,containerSizingOptions:r,recordingKey:l}))}function mx({initialScrollTop:e,onScroll:t,viewMode:n,toggleViewMode:a,containerSizingOptions:r,recordingKey:l}){var i;let o=(0,$.wA)(),s=(0,$.d4)(e=>e.dropdownShown),c=(0,$.d4)(sY.e_),d=(0,$.d4)(c$.hK),u=(0,$.d4)(lD.dK),m=(0,$.d4)(lD.Xt),p=(0,$.d4)(c0.P),_=(0,$.d4)(e=>e.userFlags.has_dismissed_component_sidebar_library_upsell_banner),f=(0,$.d4)(e=>e.isFreeUser),h=(0,$.d4)(e=>e.user),g=(0,tb.Av)(),E=(0,$.d4)(e=>e.openFile),v=(0,cQ.usePermissionsState)(),y=(0,uR.D)(),{query:b,searchSessionId:C}=(0,cq.Gq)();(0,mm.y)();let w=(0,cz.q_)();Q.useEffect(()=>{o(cj.cr({shouldSearchDefaultLibraries:!1}))},[o]);let{assetType:T,libraryNameByFileKey:x,onSetAssetType:N,scrollContent:k,validAssetTypeOptions:S}=function({containerSizingOptions:e,viewMode:t}){var n;let a=function(){let e=(0,$.d4)(sY.e_),t=(0,$.d4)(t_.tB),n=(0,$.d4)(uL.t_),a=(0,$.d4)(e=>e.hubFiles),r=(0,$.d4)(sY.MH),l=(0,$.d4)(sY.dM),i=(0,$.d4)(sY.x6),o=(0,$.d4)(c0.P),s=(0,cZ.Ck)(),c=(0,dB.Fl)(),d=(null==t?void 0:t.teamId)?o[t.teamId]:null,u=!!d&&(0,cK.w5)(d),m=(0,uO.T9)(null==t?void 0:t.project),p=Q.useMemo(()=>(0,uS.Sg)(r,l),[r,l]),_=Q.useMemo(()=>(0,uS.ND)(i),[i]),f=Q.useMemo(()=>(0,uS.ff)(e,t,n,m),[e,t,n,m]),h=(0,uM.Cx)(),g=Q.useMemo(()=>(0,uS.sJ)(h,n,t,e,m),[n,m,e,t,h]),E=Q.useMemo(()=>s()?(0,uS.o6)(e,t,a,m):null,[s,e,t,a,m]);return Q.useMemo(()=>(0,uD.Nx)({localLibraryItemsInfo:p,localTemplatesInfo:_,subscribedItemsInfo:f,subscribedTemplatesInfo:g,subscribedCommunityItemsInfo:E,defaultSubscribedItemsInfo:(0,uS.Mt)(),canPublish:u,currentFileKeyForPublish:t?(0,uP.Kz)(t)?t.sourceFileKey:t.key:null,approvedLibraryKeysByResourceType:c}),[p,_,f,g,E,u,t,c])}(),{productComponents:r,templates:l}=(0,uI.g5)(dz.$A.Design),i=(0,$.d4)(dC.q5),o=(0,uR.D)(),s=Q.useMemo(()=>({productComponents:r,templates:(0,eo.u4)("dse_editor_templates_v1",l,[])}),[r,l]),c=Q.useMemo(()=>i?dT.v:function(e,t,n,a=[]){let r=!!((0,eo.kc)().dse_editor_templates_v1&&n&&(n.items.length>0||t.subtrees.length>0));return{[dT.I.ALL]:!0,[dT.I.RECENT]:!!(e.length+(0,eo.u4)("dse_editor_templates_v1",a.length,0)),[dT.I.LOCAL]:t.items.length>0||t.subtrees.length>0||r,[dT.I.FILE]:!1}}(r,a.localSubtree,a.localTemplateSubtree,l),[i,r,l,a.localSubtree,a.localTemplateSubtree]),d=(n=a.subscribedFileSubtrees,Q.useMemo(()=>{let e={};for(let[t,a]of Object.entries(n))a&&(e[t]=a.name);return e},[n])),{assetType:u,onSetAssetType:m}=function(e,t){let[n,a]=Q.useState(!1),[r,l]=Q.useState({type:dT.I.ALL}),i=(0,$.wA)(),o=(0,$.d4)(dC.q5),s=(0,t_.q5)();Q.useEffect(()=>{n||"loading"===e||(l(uA(function(){if(ew.x4)try{let e=ew.x4.getItem(md);if(!e)return;return mu(e)}catch(e){return}}(),e,t)),a(!0))},[n,e,t]);let c=Q.useCallback(e=>{var t;(!o||(0,dC.eu)(e))&&(l(e),null==(t=ew.x4)||t.setItem(md,function(e){switch(e.type){case dT.I.ALL:return"all";case dT.I.RECENT:return"recent";case dT.I.LOCAL:return"local";case dT.I.FILE:return e.fileKey}}(e)),o&&i(cj.gP({searchOptions:e})),er.az.trackDefinedEvent("assets_panel.asset_type_changed",{assetType:e.type,isSearching:!!o,fileKey:e.type===dT.I.FILE?e.fileKey:void 0,openFileKey:null==s?void 0:s.key,fileTeamId:(null==s?void 0:s.teamId)??void 0,fileOrgId:(null==s?void 0:s.parentOrgId)??void 0,assetsPanelVersion:2}))},[o,i,null==s?void 0:s.key,null==s?void 0:s.parentOrgId,null==s?void 0:s.teamId]),d=Q.useCallback(e=>e.key===md&&null!=e.newValue,[]),u=Q.useCallback(n=>{if(!n)return;let a=mu(n);"loading"!==e&&l(uA(a,e,t))},[e,t]);return(0,ew.tl)({onSync:u,shouldSyncValue:d}),{assetType:r,onSetAssetType:c}}(o?"loading":c,d),p=function({assetType:e,containerSizingOptions:t,recentlyUsedItems:n,treeWithSubtrees:a,viewMode:r}){let{library:l}=(0,ep.R)(e=>({library:e.library})),i=(0,$.d4)(uL.u0),[o,s]=Q.useState(!1),c=r===uS.Bk.List,d=Q.useMemo(()=>({isList:c,isExpanded:uG.xO,sourceForTracking:uS.mZ,...t}),[t,c]),u=Q.useMemo(()=>{let e,t;let{query:n,normalizedSearchResults:a,unsubscribedSearchResults:r}=l.assetsPanelSearch;if(!n)return ms;(0,eo.kc)().dse_editor_templates_v1?[t,e]=(0,dC._2)(a):e=a;let c=e,u=c.length+r.length;if(0===u&&(!t||0===t.length))return ms;!o&&0===c.length&&r.length>0&&s(!0);let m=[];if(t&&t.length>0&&(0,eo.kc)().dse_editor_templates_v1){let e=ma(m,(0,eO.t)("design_systems.assets_panel.templates"),{keyPrefix:uU(mo.o7),sectionNameForTracking:"Templates search results"});mr({outputElements:m,results:t,moreResults:[],showMoreResults:!1,keyPrefix:uU(mo.o7),overallOptions:d,fileNameByKey:i,toggleShowMoreResults:()=>{},parent:e})}if(u>0){var p,_;let e=(0,eo.kc)().dse_editor_templates_v1?ma(m,(0,eO.t)("design_systems.assets_panel.components"),{keyPrefix:(p=mo.o7,`${p}:${uF}`),sectionNameForTracking:"Primary search results"}):null;mr({outputElements:m,results:c,moreResults:r,showMoreResults:o,keyPrefix:(_=mo.o7,`${_}:${uF}`+((0,eo.kc)().dse_editor_templates_v1?"1":"")),overallOptions:d,fileNameByKey:i,toggleShowMoreResults:()=>{s(e=>!e)},parent:e})}return m},[i,l.assetsPanelSearch,d,o]),{productComponents:m,templates:p}=n,_=Q.useMemo(()=>{if(!m.length&&!p.length)return ms;let e=[];return(0,eo.kc)().dse_editor_templates_v1?(p.length>0&&me({parent:ma(e,(0,eO.t)("design_systems.assets_panel.templates"),{keyPrefix:uH(mo.o7+":templates"),sectionNameForTracking:"Recently used templates"}),outputElements:e,items:p,keyPrefix:uH(mo.o7+":templates"),sharedOptions:d}),m.length>0&&me({parent:ma(e,(0,eO.t)("design_systems.assets_panel.components"),{keyPrefix:uH(mo.o7+":components"),sectionNameForTracking:"Recently used"}),outputElements:e,items:m,keyPrefix:uH(mo.o7+":components"),sharedOptions:d})):me({parent:null,outputElements:e,items:m,keyPrefix:uH(mo.o7),sharedOptions:d}),e},[m,p,d]),f=Q.useMemo(()=>(0,eo.kc)().dse_editor_templates_v1?function(e,t,n){let a=[];return e.forEach(e=>{e&&ml({prevParent:null,outputElements:a,inputSubtree:e,inputParentTree:t,keyPrefix:mo.o7,sharedOptions:n,sectionNameForTracking:e.sectionNameForTracking,hideTitle:!1})}),a}([a.localTemplateSubtree,a.localSubtree],a.tree,d):mc(a.localSubtree,a.tree,d),[d,a.localSubtree,a.localTemplateSubtree,a.tree]),h=Q.useMemo(()=>mc(e.type===dT.I.FILE?a.subscribedFileSubtrees[e.fileKey]:void 0,a.tree,d),[e,d,a.subscribedFileSubtrees,a.tree]),g=Q.useMemo(()=>{let e=[];return!function(e,t,n,a){if((0,eo.kc)().dse_templates_proto){let r=t.subtrees.find(uD.Qe);null!=r&&ml({prevParent:null,outputElements:e,inputSubtree:r,inputParentTree:t,keyPrefix:n,sharedOptions:a,sectionNameForTracking:r.sectionNameForTracking})}for(let r of(t.items.length>0&&me({parent:null,outputElements:e,items:t.items,keyPrefix:n,sharedOptions:a}),t.subtrees))(0,eo.kc)().dse_templates_proto&&(0,uD.Qe)(r)||ml({prevParent:null,outputElements:e,inputSubtree:r,inputParentTree:t,keyPrefix:n,sharedOptions:a,sectionNameForTracking:r.sectionNameForTracking})}(e,a.tree,mo.o7,d),e},[d,a.tree]);return l.assetsPanelSearch.query?u:e.type===dT.I.RECENT?_:e.type===dT.I.LOCAL?f:e.type===dT.I.FILE?h:g}({assetType:u,containerSizingOptions:e,recentlyUsedItems:s,treeWithSubtrees:a,viewMode:t});return{assetType:u,libraryNameByFileKey:d,onSetAssetType:m,scrollContent:p,validAssetTypeOptions:c}}({viewMode:n,containerSizingOptions:r}),I=(0,cX.LR)(),A=(0,$.d4)(e=>e.universalInsertModal.showing),P=Q.useCallback(()=>{A&&I()},[I,A]),O=Q.useCallback((e,t,n)=>{P(),o((0,n9.to)({type:uk,data:{asset:e,searchSessionId:C??void 0,query:b??void 0,sectionPosition:t,sectionNameForTracking:n,assetTypeDropdownSelection:null==T?void 0:T.type,containerWidth:r.containerWidth,onGetKeyboardNavigationItemById:w}}))},[T,r.containerWidth,o,P,w,C,b]),L=Q.useMemo(()=>({onOpenFlyout:O,assetTypeDropdownSelection:null==T?void 0:T.type}),[T,O]);!function({allElements:e}){mh(Q.useCallback(()=>{let t=e.length,n=0,a=0;for(let t of e)if(!t.key.includes("localComponents")){let e=function e(t){if(t.type===uK.zq.TILE)return 1;if(!(0,uK.We)(t)||!t.isExpanded)return 0;{let n=0;for(let a of t.children)n+=e(a);return n}}(t);n+=e,a+=Math.min(e,20)}return{numLibraries:t,numComponents:n,numComponentsWithLimit:a}},[e]))}({allElements:k});let M=n===uS.Bk.List,D=c.assetsPanelSearch,R=0===k.length,F=(null==s?void 0:s.type)===mE.K.ASSETS_PANEL,B=F&&(null==(i=null==s?void 0:s.data)?void 0:i.component)||null,U=(0,mp.K)(!0),H=Q.useCallback(()=>{F||(0,eV.wr)()},[F]),[V,G]=(0,ew.Vc)("has-auto-expanded-component-libraries-for-nux",!1),K=(0,cZ.Ck)(),W=Q.useRef(null);Q.useEffect(()=>{let e=W.current;e&&0!==k.length&&K()&&!V&&e.expandAllComponentLibraries(308)>0&&G(!0)},[V,K,k.length,G]);let z=Q.useCallback(()=>{let e=!!c.assetsPanelSearch.query,t=0===k.length;return Q.createElement("div",null,e&&t&&Q.createElement(dy,null),!e&&t&&Q.createElement(db,null))},[c.assetsPanelSearch,k.length]),j=y||D.isLoading,Y=(0,cJ.jO)(),Z=(null==E?void 0:E.teamId)?p[E.teamId]:null,X=!_&&f&&(!Z||!(0,cK.w5)(Z)&&(0,cQ.canEditTeam)(Z.id,v))&&(null==E?void 0:E.canEdit)&&Y&&Object.keys(c.local.components).length>0&&(0,cY.Hz)(null==h?void 0:h.id),q=function(e,t){let n="prod"===(0,eo.Ay)().cluster_name?"1341958841682444374":"1344465555686977718",a=Q.useMemo(()=>e.find(e=>e.key.includes("subscribedCommunityComponents")&&e.key.includes("stickySection")&&e.key.includes(n)),[e,n]);return Q.useCallback(()=>{var e;a&&(null==(e=t.current)||e.scrollToElement(a.key))},[a,t])}(k,W);return Q.createElement(dD.U.Provider,{value:L},Q.createElement(mN,{assetType:T,componentsEmpty:R,isList:M,isSearching:!!D.query,isComponentSidebarInitialLoading:y,libraryNameByFileKey:x,onSetAssetType:N,onToggleViewMode:a,recordingKey:l,validAssetTypeOptions:S}),j?Q.createElement("div",{className:"component_sidebar--loadingSpinnerContainerWithDropdown--9b8ZI"},Q.createElement(t2.kt,null)):Q.createElement("div",{className:"component_sidebar--assetPanelSection--mYuo2"},Q.createElement(cW.O,{ref:W,scrollContent:k,recordingKey:"componentsListContainer",isList:M,getViewportHeight:e=>e-2*g,topOffset:mC,isTileSelected:e=>!!e.item.isLocal&&m&&(0,c1.sp)(u,m,e.item.node_id),onMouseUp:H,renderEmptyState:z,width:r.containerWidth,className:"component_sidebar--scrollContainerFullHeight---DTUM component_sidebar--_scrollContainerBase--1rakD",initialScrollTop:e,onScroll:t,enableKeyboardNavigation:!0,shouldRefocusAfterKeyboardInsert:T.type===dT.I.RECENT,fileKey:null==E?void 0:E.key,teamId:(null==E?void 0:E.teamId)??void 0,orgId:(null==E?void 0:E.parentOrgId)??void 0}),!!B&&Q.createElement(mE.h,{selectedView:d,dropdownShown:s,defaultFileKeys:c.defaultPublished.fileKeys,onJumpToLocalComponent:U,onOpenFlyout:O,usePortal:!0}),X&&Q.createElement(mb,null),Q.createElement(c2.S_,{width:r.containerWidth,scrollToPreset:q}),Q.createElement(di,{width:r.containerWidth,scrollToPreset:q})))}function mN({assetType:e,componentsEmpty:t,isList:n,isSearching:a,isComponentSidebarInitialLoading:r,libraryNameByFileKey:l,onSetAssetType:i,onToggleViewMode:o,validAssetTypeOptions:s,recordingKey:c}){let d=mw.improved,{setKeyboardNavigationElement:u}=(0,cz.M3)({path:d.libraryModal.path,column:d.libraryModal.column}),{setKeyboardNavigationElement:m}=(0,cz.M3)({path:mw.improved.dropdown.path,column:mw.improved.dropdown.column}),{setKeyboardNavigationElement:p}=(0,cz.M3)({path:d.viewToggle.path,column:d.viewToggle.column});return Q.createElement("div",null,Q.createElement("div",{className:"component_sidebar--searchHeader--yTD7D component_sidebar--_header--nHN39"},Q.createElement(dx,{searchOptions:{type:e,onSetAssetType:i},keyboardNavigationPath:d.search.path,keyboardNavigationColumn:d.search.column}),Q.createElement(dP,{entrypoint:dd.r6.ASSETS_PANEL_BUTTON,onSetKeyboardNavigationElement:u,recordingKey:c})),r||t&&!a?null:Q.createElement("div",{className:"component_sidebar--pageHeader--m9FWc component_sidebar--_header--nHN39"},Q.createElement(dL.x,{assetType:e,libraryNameByFileKey:l,onSetAssetType:i,onSetKeyboardNavigationElement:m,validAssetTypeOptions:s}),Q.createElement(dM.l,{isList:n,onToggleViewMode:o,onSetKeyboardNavigationElement:p,recordingKey:c})))}var mk=n(627152),mS=n(521192);let mI=(0,nf.eU)({read:!1,write:()=>{}});var mA=n(239338),mP=n(36317),mO=n(965681),mL=n(76008),mM=n(507026),mD=n(866263),mR=n(99194);let mF="memory_warning--memoryUsageContainer--CWdMy";var mB=n(450147),mU=n(967063),mH=n(586599),mV=n(890666),mG=n(612325);function mK(e){let t,n,a,r,l;let i=(0,$.d4)(e=>{var t;return!(null==(t=e.openFile)?void 0:t.canEdit)}),o=eU.Ez5.uiState().isRecovery.getCopy(),s=(0,$.d4)(e=>e.mirror.appModel.activeCanvasEditModeType===eU.m1T.HISTORY&&e.versionHistory.activeId&&"current_version"!==e.versionHistory.activeId),c=e.warningLevel,d=(c===cV.Wy.WARNING?(l=Q.createElement(eO.Tx,{id:"fullscreen.pages_panel.memory_usage_try_removing_unneeded_content"}),o?l=Q.createElement(eO.Tx,{id:"fullscreen.pages_panel.memory_usage_recovery_mode_high_content"}):i&&!s?l=Q.createElement(eO.Tx,{id:"fullscreen.pages_panel.memory_usage_warning_edit_access_needed"}):i&&s?l=Q.createElement(eO.Tx,{id:"fullscreen.pages_panel.memory_usage_read_only_view_version_history"}):!i&&s&&(l=Q.createElement(eO.Tx,{id:"fullscreen.pages_panel.memory_usage_warning_edit_view_version_history"}))):c===cV.Wy.ERROR?(l=Q.createElement(eO.Tx,{id:"fullscreen.pages_panel.memory_usage_to_avoid_losing_file_access"}),o?l=Q.createElement(eO.Tx,{id:"fullscreen.pages_panel.memory_usage_recovery_mode_high_content"}):i&&!s?l=Q.createElement(eO.Tx,{id:"fullscreen.pages_panel.memory_usage_error_contact_file_owner"}):i&&s?l=Q.createElement(eO.Tx,{id:"fullscreen.pages_panel.memory_usage_read_only_view_version_history"}):!i&&s&&(l=Q.createElement(eO.Tx,{id:"fullscreen.pages_panel.memory_usage_error_edit_view_version_history"}))):c===cV.Wy.SAFE&&e.previousWarningLevelUnsafe&&(l=Q.createElement(eO.Tx,{id:"fullscreen.pages_panel.memory_usage_this_file_has_enough_memory"}),o&&(l=Q.createElement(eO.Tx,{id:"fullscreen.pages_panel.memory_usage_recovery_mode_low_content"}))),l);if(c===cV.Wy.WARNING)t="memory_warning--warningMemoryContentContainerWarning--SUOy5 memory_warning--warningMemoryContentContainer--xajq3",n="memory_warning--memoryWarningContentIconWarning--7lQhY",a=o?mV.A:mU.A,r=o?Q.createElement(eO.Tx,{id:"fullscreen.pages_panel.memory_usage_recovery_mode_high"}):Q.createElement(eO.Tx,{id:"fullscreen.pages_panel.memory_usage_memory_running_low"});else if(c===cV.Wy.ERROR)t="memory_warning--warningMemoryContentContainerError---AmhI memory_warning--warningMemoryContentContainer--xajq3",n="memory_warning--memoryWarningContentIconError--iWcmQ",a=o?mV.A:mG.A,r=o?Q.createElement(eO.Tx,{id:"fullscreen.pages_panel.memory_usage_recovery_mode_high"}):Q.createElement(eO.Tx,{id:"fullscreen.pages_panel.memory_usage_almost_out_of_memory"});else{if(c!==cV.Wy.SAFE||!e.previousWarningLevelUnsafe)return null;t="memory_warning--warningMemoryContentContainerSafe--KUmYN memory_warning--warningMemoryContentContainer--xajq3",n="memory_warning--memoryWarningContentIconSafe--BHw5o",a=mB.A,r=o?Q.createElement(eO.Tx,{id:"fullscreen.pages_panel.memory_usage_recovery_mode_low"}):Q.createElement(eO.Tx,{id:"fullscreen.pages_panel.memory_usage_youre_good_to_go"})}return Q.createElement("div",{className:"memory_warning--memoryWarningContentBetaContainer--xcDgj"},Q.createElement("div",{className:t},Q.createElement("div",{className:"memory_warning--memoryWarningContentIconContainer--CeqsI"},Q.createElement(eM.B,{className:n,svg:a})),Q.createElement("div",{className:"memory_warning--memoryWarningContentBodyHeader--HRmSt"},Q.createElement("div",{className:"memory_warning--memoryWarningContentHeader--b9El-"},r),Q.createElement("p",null,d,(c===cV.Wy.ERROR||c===cV.Wy.WARNING)&&Q.createElement(nc.Us,{className:c===cV.Wy.ERROR?"memory_warning--learnMoreLinkError--JsmPQ":"memory_warning--learnMoreLinkWarning--AHB-S",href:"https://help.figma.com/hc/articles/360040528173-Reduce-memory-usage-in-files",target:"_blank",trusted:!1,trackingEventName:"memory_warning_learn_more_clicked"}," ",Q.createElement(eO.Tx,{id:"fullscreen.pages_panel.memory_usage_learn_more"}))))))}function mW(e){let t=e.showSidePercentage,n=e.warningLevel&&e.warningLevel>=cV.Wy.ERROR;return Q.createElement(Q.Fragment,null,Q.createElement("div",{className:"memory_warning--usageBarContainer--F67OB"},Q.createElement(eM.B,{style:{left:`${cV.xk}%`},className:"memory_warning--icon--HcqCK",svg:mH.A}),Q.createElement("div",{className:t&&n?"memory_warning--usageBarBorderDanger--3tbol memory_warning--usageBarBorder--RmhaH":"memory_warning--usageBarBorder--RmhaH"},Q.createElement("div",{className:t&&n?"memory_warning--usageBarFillDanger--Ew9Tl memory_warning--usageBarFill--ximmI":"memory_warning--usageBarFill--ximmI",style:{width:`${e.memoryUsagePercent}%`}}))),t&&Q.createElement("div",{className:n?"memory_warning--usageBarTextDanger--d9-gr memory_warning--usageBarText--6Z1O9":"memory_warning--usageBarText--6Z1O9"},`${Math.trunc(e.memoryUsagePercent).toString()}%`))}function mz(e){let t=(0,$.wA)(),[n,a]=(0,Q.useState)(!1),{warningLevel:r,memoryUsedPercent:l,usingTestMemory:i,previousWarningLevel:o,previousWarningLevelUnsafe:s,warningTracked:c,setWarningTracked:d}=(0,cV.Mk)(),u=(0,$.d4)(e=>e.mirror.appModel.topLevelMode),m=(0,$.d4)(e=>{var t;return!(null==(t=e.openFile)?void 0:t.canEdit)}),p=(0,$.d4)(e=>{var t;return null==(t=e.user)?void 0:t.id}),_=(0,$.d4)(e=>e.selectedView),f=(0,mD.AU)(_),[h,g]=(0,Q.useState)(eU.Ez5.uiState()&&eU.Ez5.uiState().isRecovery.getCopy());(0,Q.useEffect)(()=>{var t,n,a;r===o||c||(null==(t=eU.glU)||t.setMemoryWarningLevel(r),i)||(d(!0),n={warningEvent:"BANNER_LEVEL_CHANGE",fileKey:e.fileKey},a={warningLevel:cV.Wy[r],memoryUsedPercent:l,topLevelMode:u,isReadOnly:m},(0,mR.$w)(n,{warningOnPct:cV.xk,errorOnPct:cV.pl,...a}))},[r,o,l,i,e.fileKey,u,m,c,d]),(0,Q.useEffect)(()=>{if(r===cV.Wy.SAFE){let e=()=>{"hidden"===document.visibilityState&&a(!1)};return document.addEventListener("visibilitychange",e),()=>{document.removeEventListener("visibilitychange",e)}}eU.Ez5.uiState().showMemoryUsage.set(!0),eU.Ez5.uiState().showInFileMemoryPercentage.set(!0),a(!0)},[r,t,p]);let E=(0,eG.J2)(eU.Ez5.uiState().showMemoryUsage);return E||n||eU.Ez5.uiState().isRecovery.getCopy()?Q.createElement(mj,{fileKey:e.fileKey,warningLevel:r,previousWarningLevelUnsafe:s,memoryUsedPct:l,showMemoryUsage:E,dispatch:t,closeManageMemoryModal:e.closeManageMemoryModal,toggleManageMemoryModal:e.toggleManageMemoryModal,topLevelMode:u,editorType:f,recoveryMemDisplay:h,setRecoveryMemDisplay:g}):null}class mj extends Q.Component{constructor(e){super(e),this.renderManageMemoryButton=()=>{let e=(0,eO.t)("manage_memory_modal.manage_memory_button"),t=()=>{this.props.toggleManageMemoryModal()};return Q.createElement("div",{className:"memory_warning--memoryWarningButtonContainer--GkcGB"},Q.createElement(nc.tM,{onClick:()=>t(),trackingProperties:{buttonContext:e}},e))},this.onExitRecoveryMode=e=>{var t,n;let a={view:"fullscreen",editorType:e===dV._Y.DESIGN?"design":"whiteboard",fileKey:this.props.fileKey,isRecoveryMode:!1};(0,er.sx)("exit_recovery_mode",{currentAllocatedBytes:null==(t=eU.hMR)?void 0:t.getTotalUsedHeapMemory(),maxAllocatedBytes:null==(n=eU.hMR)?void 0:n.getMaxUsedHeapMemory(),fileKey:this.props.fileKey}),this.props.dispatch(nP.$T(a)),ei.Ay.reload("Memory warning panel")}}render(){let{warningLevel:e,previousWarningLevelUnsafe:t,memoryUsedPct:n,showMemoryUsage:a,editorType:r}=this.props,l=e===cV.Wy.ERROR;return Q.createElement(Q.Fragment,null,(a||this.props.recoveryMemDisplay)&&Q.createElement("div",{className:mF,id:mF},Q.createElement("div",{className:"memory_warning--memoryUsageHeader--WNS5R"},Q.createElement("div",{className:"memory_warning--memoryUsageHeaderTitle--65Nsp"},Q.createElement(eO.Tx,{id:"fullscreen.pages_panel.memory_usage"})),Q.createElement("div",{className:"memory_warning--memoryUsageCloseIcon--6rw0p"},Q.createElement(aO.Jn,{onClick:()=>{var e,t;(0,er.sx)("manage_memory_modal_closed",{currentAllocatedBytes:null==(e=eU.hMR)?void 0:e.getTotalUsedHeapMemory(),maxAllocatedBytes:null==(t=eU.hMR)?void 0:t.getMaxUsedHeapMemory(),fileKey:this.props.fileKey}),eU.Ez5.uiState().showMemoryUsage.set(!1),eU.Ez5.uiState().showInFileMemoryPercentage.set(!1),this.props.closeManageMemoryModal(),this.props.setRecoveryMemDisplay(!1)},disabled:l,className:l?"memory_warning--memoryUsageCloseButtonError--m6jl7":""}))),Q.createElement("div",{className:l?"memory_warning--memoryUsageBodyContainerError--6oxZX":"memory_warning--memoryUsageBodyContainer--NE4lJ"},Q.createElement(mW,{memoryUsagePercent:n,showSidePercentage:!0,warningLevel:e})),Q.createElement(mK,{warningLevel:e,previousWarningLevelUnsafe:t,topLevelMode:this.props.topLevelMode}),this.renderManageMemoryButton(),eU.Ez5.uiState().isRecovery.getCopy()&&n<cV.im&&Q.createElement("div",{className:a?"memory_warning--recoveryModeBannerExitButtonContainer--7A1pw":"memory_warning--recoveryModeExitButtonContainer--Y21eB"},Q.createElement(nc.vd,{onClick:()=>this.onExitRecoveryMode(r)},Q.createElement(eO.Tx,{id:"fullscreen.pages_panel.memory_usage_recovery_mode_exit"})))))}}var mY=n(5064);let mZ="canvas_search--searchBarHidden--9EJy-",mX="canvas_search--searchInput--aCP6B canvas_search--input--aPqLZ",mq="canvas_search--icon32--bmz-L",mJ="canvas_search--searchBarContainer--rxvLi",mQ="canvas_search--searchBarRow--9aFwa",m$="canvas_search--searchIconPlaceholderFill--MohCt",m0="canvas_search--selected--Ng41y",m1="canvas_search--disabled--dMwG7",m2="canvas_search--symbol--614fP",m5="canvas_search--resultRow--xX8wI",m4="canvas_search--multiline--1gb-l",m3="canvas_search--loadingSpinner--Y5hDC",m6="canvas_search--loadingSpinnerDelay--Rk3MX";var m7=n(130715);function m8({onClick:e}){let t="ui3"===(0,et.DP)().version,n=Q.createElement("div",{className:ea()(mq,{[m$]:t})},Q.createElement(nd.U,{svg:m7.A},Q.createElement(mY.h,null)));return Q.createElement(aJ.K0,{"data-onboarding-key":"canvas-search","data-tooltip-type":nO.Ib.LOOKUP,"data-tooltip":"canvas-search",onClick:e,recordingKey:"canvas_search.search_icon_button",isBackgroundTransparent:!0,className:"canvas_search--searchIconButton--lg-V8"},n)}var m9=n(806658),pe=n(52152),pt=n(62668),pn=n(205786),pa=n(370903),pr=n(995382);function pl(){let e=(0,$.wA)(),[t,n]=Q.useState(!1),a=(0,$.d4)(e=>!!e.modalShown),r=(0,$.d4)(e=>e.versionHistory.compareId),l=eU.AWq.getChunkChangeCount(),i=(0,pn.Z)("chunk_change_navigator_navigate"),o=(0,pt.E)(),s=Q.useCallback(e=>{eU.Egt.setSelectedNodeAndCanvas(e,!0),i((0,ez.QZ)({nodeId:e,...ru.Mf})),o(e)},[i,o]),c=Q.useCallback(t=>{a||l<=1||("ArrowUp"===t.key||"ArrowLeft"===t.key||t.shiftKey&&"Tab"===t.key?s(eU.glU.navigateToNextChange(-1)):"ArrowDown"===t.key||"ArrowRight"===t.key||"Tab"===t.key?s(eU.glU.navigateToNextChange(1)):"Escape"===t.key&&(e((0,ag.Eg)()),(0,er.sx)("Version History Compare Stop",{fromVersionId:r})))},[e,a,r,l,s]);return Q.useEffect(()=>{e(pe.Q.dequeue({type:m9._.SEE_WHATS_CHANGED}))},[e]),Q.useEffect(()=>{t||0===l||(s(eU.glU.navigateToFirstVisibleOrClosestChange()),n(!0))},[t,l,s]),Q.useLayoutEffect(()=>{if(!(l<=1))return document.addEventListener("keydown",c),()=>{e(eL.F.dequeue({matchType:"view_changes"})),document.removeEventListener("keydown",c)}},[e,l,c]),Q.createElement(Q.Fragment,null,Q.createElement("div",{className:"chunk_change_navigator--chunkChangeCount--ZFnfP"},Q.createElement(eO.Tx,{id:"collaboration.feedback.change_count",changeCount:l})),Q.createElement("div",{className:"chunk_change_navigator--chunkChangeNavigator--82303"},Q.createElement(aJ.K0,{svg:pr.A,onClick:e=>{e.stopPropagation(),0!==l&&s(eU.glU.navigateToNextChange(-1))},"data-tooltip-type":nO.Ib.TEXT,"data-tooltip":(0,eO.t)("collaboration.feedback.previous_change"),recordingKey:"change_stepper.previous",disabled:l<=1}),Q.createElement(aJ.K0,{svg:pa.A,onClick:e=>{e.stopPropagation(),0!==l&&s(eU.glU.navigateToNextChange(1))},"data-tooltip-type":nO.Ib.TEXT,"data-tooltip":(0,eO.t)("collaboration.feedback.next_change"),recordingKey:"change_stepper.next",disabled:l<=1})))}var pi=n(814918),po=n(399708),ps=n(747654),pc=n(341450);let pd="56px",pu="32px",pm=(0,rT.jz)("5px");function pp({height:e,width:t,keyPrefix:n,preview:a}){let r=Q.useMemo(()=>a.name.split("/").pop(),[a.name]),l=Q.useMemo(()=>{let e=(0,lH.zR)(a,null);return e?u_.F.format(e):void 0},[a]);return Q.createElement("div",{className:"asset_panel_preview--previewThumbnailWrapper--g6zU5","data-tooltip-type":nO.Ib.TEXT,"data-tooltip":r,style:{height:e-2*pm,width:t-2*pm,backgroundColor:l}},Q.createElement(ug.M,{key:`${n}:${(0,dH.V)(a)}`,className:"asset_panel_preview--previewThumbnail--kSmwd",item:a,shouldGenerateLocalThumbnail:!0,draggable:!1}))}let p_=Q.forwardRef(function({keyPrefix:e,name:t,onClick:n,onContextMenu:a,previewAsset:r,recordingKey:l,disabled:i},o){return Q.createElement("div",{className:"asset_panel_folder--folderContainer--UPeR-"},Q.createElement(ns.GG,{"aria-label":t,className:"asset_panel_folder--folderButton---mVgX",onClick:n,onContextMenu:a,forwardedRef:o,recordingKey:l,disabled:i},Q.createElement("div",{className:"asset_panel_folder--folderPreview--0ezgC"},r?Q.createElement(pp,{keyPrefix:e,preview:r,height:48,width:48}):Q.createElement("div",{className:"asset_panel_folder--blankThumbnail--6v5uo"})),Q.createElement("div",{className:"asset_panel_folder--folderName--CPNC8 ellipsis--ellipsis--Tjyfa"},t),Q.createElement("div",{className:"asset_panel_folder--folderNextIcon--ZYH9z"},Q.createElement(pc.e,null))))});var pf=n(761238),ph=n(77074);let pg="asset_panel--container--v0GR6",pE=(e,t,n,a)=>({path:[...e,Math.floor(t/n)+(a?1:0)],column:t%n});function pv({onBoth:e,onClick:t,onKeyDown:n}){return Q.useCallback(a=>{null==e||e(a),0!==a.detail?null==t||t(a):null==n||n(a)},[e,t,n])}function py({children:e}){let t=Q.useRef(null),{clickBackButton:n,focusBackButton:a}=pS(),r=Q.useCallback(e=>{if((0,ph.Qk)(e.target)||e.keyCode!==es.Uz.BACKSPACE){if(e.altKey&&[es.Uz.KEY_1,es.Uz.KEY_2,es.Uz.KEY_3].includes(e.keyCode)&&lT.Y5.isWebContextReady())return(0,pf.f7)(e,!0)}else n(),a()},[n,a]),l=Q.useCallback(e=>{"left"===e&&n()},[n]);return(0,ph.t7)(t,l),Q.createElement("div",{onKeyDown:r,className:pg,ref:t},e)}let pb=()=>{let{setKeyboardNavigationElement:e,keyboardNavigationItem:t,isFocused:n}=(0,cz.M3)({path:[ps.ON.BREADCRUMB],column:ps.Yv.BACK}),a=Q.useRef(!1),r=Q.useCallback(()=>{t&&!n?t.focus():a.current=!0},[t,n]);return Q.useEffect(()=>{t&&a.current&&!n&&(t.focus(),a.current=!1)},[t,n]),{setBackButtonKeyboardItem:e,focusBackButton:r,clickBackButton:Q.useCallback(()=>{null==t||t.simulateClick()},[t])}},pC=()=>{let e=Q.useRef(null);return{focusSearchBar:Q.useCallback(()=>{var t;null==(t=e.current)||t.focus(!0)},[]),inputRef:e}},pw=()=>{let[e,t]=Q.useState(null),[n,a,r]=function(e){let[t,n]=Q.useState(e);return[t,Q.useCallback(()=>n(!0),[]),Q.useCallback(()=>n(!1),[]),Q.useCallback(()=>n(e=>!e),[])]}(!1),l=Q.useCallback(()=>{t(null),a()},[a]);return Q.useEffect(()=>{e&&n&&(e.focus({preventScroll:!0}),r())},[e,r,n]),{enqueueFocus:l,setKeyboardItem:t}};function pT(e,t){let n=Q.useContext(pN),a=null==n?void 0:n.trackFirstItem;Q.useEffect(()=>{e&&t&&(null==a||a(e))},[n,t,e,a])}function px({children:e,className:t}){return Q.createElement(cz.dP,{className:t,dataTestId:"component-sidebar"},Q.createElement(pk,null,e))}let pN=Q.createContext(null);function pk({children:e}){let{setBackButtonKeyboardItem:t,focusBackButton:n,clickBackButton:a}=pb(),{enqueueFocus:r,setKeyboardItem:l}=pw(),{focusSearchBar:i,inputRef:o}=pC(),s=Q.useMemo(()=>({clickBackButton:a,focusBackButton:n,focusFirstItem:r,focusSearchBar:i,inputRef:o,trackFirstItem:l,setBackButtonKeyboardItem:t}),[a,n,r,i,o,l,t]);return Q.createElement(pN.Provider,{value:s},Q.createElement(py,null,e))}function pS(){let e=Q.useContext(pN);return Q.useMemo(()=>{if(!e)return{clickBackButton:()=>{},focusBackButton:()=>{},focusFirstItem:()=>{},focusSearchBar:()=>{},inputRef:{current:null},setBackButtonKeyboardItem:()=>{}};let{trackFirstItem:t,...n}=e;return n},[e])}var pI=n(378864);function pA({subtree:e,index:t,keyPrefix:n,depth:a}){let r=(0,t_.q5)(),{libraryKey:l,pageId:i,folderPath:o,currentView:s}=(0,pI.wV)(),{previewAsset:c}=e,{navigateToFolder:d}=(0,pI.wV)(),u=Q.useCallback(()=>{er.az.trackDefinedEvent("assets_panel.view_folder",{pageId:i,libraryKey:l,folderPath:null==o?void 0:o.join(" / "),fileKey:null==r?void 0:r.key,fileTeamId:(null==r?void 0:r.teamId)??void 0,fileOrgId:(null==r?void 0:r.parentOrgId)??void 0}),d(e.name)},[i,l,o,null==r?void 0:r.key,null==r?void 0:r.teamId,null==r?void 0:r.parentOrgId,d,e.name]),m=Q.useMemo(()=>[ps.ON.CONTENTS,ps.lM.ASSETS+a,ps.tM.FOLDERS,t],[a,t]),{keyboardNavigationItem:p,setKeyboardNavigationElement:_}=(0,cz.M3)({path:m,id:e.key,disabled:((null==o?void 0:o.length)??0)>a}),{focusFirstItem:f,focusSearchBar:h}=pS();pT(p,0===t&&a===((null==o?void 0:o.length)??0)&&s===pI.S5.Assets);let g=pv({onBoth:u,onKeyDown:f,onClick:h}),E=Q.useMemo(()=>o&&o.length>a,[o,a]);return Q.createElement(p_,{name:e.name,onClick:g,keyPrefix:`${n}${e.name}`,previewAsset:c,recordingKey:`assetsFolder.${e.name}`,ref:_,disabled:E})}var pP=n(475933);let pO=(0,cd.s)((e,t,n,a)=>{(0,cB.uE)("action_left_panel_scroll",{user:e},{assetsPanelVersion:3,tab:"assets",fileKey:t,fileTeamId:n,fileOrgId:a})},500);function pL(e){let{children:t,onScroll:n,...a}=e,r=(0,$.d4)(dG.x),l=(0,t_.q5)(),i=(0,$.d4)(e=>e.dropdownShown),o=(null==i?void 0:i.type)===mE.K.ASSETS_PANEL,s=Q.useCallback(()=>{o||(0,eV.wr)()},[o]),c=Q.useCallback((e,t)=>{null==n||n(e,t),r&&pO(r,null==l?void 0:l.key,(null==l?void 0:l.teamId)??void 0,(null==l?void 0:l.parentOrgId)??void 0)},[n,null==l?void 0:l.key,null==l?void 0:l.parentOrgId,null==l?void 0:l.teamId,r]);return Q.createElement(ab.P,{...a,className:"asset_panel_shared_components--scrollContainer--YbltE",onScroll:c},Q.createElement(ns.D8,{onMouseUp:s,recordingKey:"componentsListContainer",dataTestId:"asset-panel-scroll-container"},t))}function pM({title:e}){return Q.createElement("div",{className:"asset_panel_shared_components--sectionHeader--URtCn"},e)}function pD({height:e}){return Q.createElement("div",{style:{height:e}})}var pR=n(179220),pF=n(835293),pB=n(174686),pU=n(91609),pH=n(879545),pV=n(476007),pG=n(787020),pK=n(527092),pW=n(176144),pz=n(908841),pj=n(917934);let pY="asset_panel_tile--fileName--Skyao ellipsis--ellipsis--Tjyfa",pZ="asset_panel_tile--secondary--6CWeS";function pX({asset:e,fileName:t,sourceForTracking:n,thumbLayout:a,thumbHeight:r,thumbWidth:l,viewMode:i,sectionNameForTracking:o,sectionPosition:s,sectionDepth:c,hideInlineName:d,keyboardPosition:u,isFirstTile:m=!1,keyboardPanelDepth:p=0}){let _=Q.useContext(dD.U),f=(0,$.d4)(e=>e.modalShown),h=(0,t_.tS)(),{currentView:g}=(0,pI.wV)(),E=(0,us.J)(e,s,o),v=(0,pK.n)(e),y=(0,pH.u)({canSwap:!0,openFileKey:h??"",sourceForTracking:"Asset Panel",insertAsChildOfCanvas:!0}),b=Q.useCallback(()=>{(null==f?void 0:f.type)!==uE.V||v||E()},[v,null==f?void 0:f.type,E]),C=Q.useCallback(()=>{(null==f?void 0:f.type)!==uE.V&&(null==_||_.onOpenFlyout(e,s,o,c))},[null==f?void 0:f.type,_,e,s,o,c]),w=Q.useMemo(()=>({...u,path:[ps.ON.CONTENTS,ps.lM.ASSETS+p,...u.path]}),[u,p]),{folderPath:T}=(0,pI.wV)(),[x]=(0,pj.MA)(),N=T&&x===pj.$H.LIST&&((null==T?void 0:T.length)??0)>p,{setKeyboardNavigationElement:k,keyboardNavigationItem:S}=(0,cz.M3)({...w,id:(0,dH.V)(e),onFocus:b,disabled:N});pT(S,m&&g===pI.S5.Assets&&!N);let I=(0,pB.N)({colIndex:w.column,rowIndex:w.path[w.path.length-1],isList:!1,keyboardNavigationItem:S,onComponentInsertSwap:y,onOpenFlyout:C,item:e,sectionNameForTracking:o,sectionPosition:s,shouldRefocusAfterKeyboardInsert:g===pI.S5.Recents,sourceForTracking:uS.mZ});return Q.createElement("button",{onClick:C,className:"asset_panel_tile--focusableElementWrapper--YzHK7",ref:k,onKeyDown:I},Q.createElement(pq,{asset:e,fileName:t,sourceForTracking:n,thumbLayout:a,thumbHeight:r,thumbWidth:l,viewMode:i,sectionNameForTracking:o,sectionPosition:s,sectionDepth:c,hideInlineName:d}))}function pq({asset:e,fileName:t,sourceForTracking:n,thumbHeight:a,thumbWidth:r,sectionNameForTracking:l,sectionPosition:i,sectionDepth:o,hideInlineName:s}){var c;let d=(0,$.wA)(),u=(0,$.d4)(lD.dK),m=(0,$.d4)(sY.F9),p=(0,$.d4)(sY.e_),_=(0,ef.md)(uw.T),f=(null==(c=p.assetsPanelSearch.searchOptions)?void 0:c.type)===dT.I.ALL,h=(0,dB.cm)(e.file_key),g=f&&h,E=Q.useRef(null),v=(0,un.kH)(e.name),y=(0,ut.NG)({text:v,textRef:E}),b=Q.useRef(null),C=(0,ut.NG)({text:t??"",textRef:b}),w="grid",T=!!p.assetsPanelSearch.query,x=(0,pW.F)(e,mE.K.ASSETS_PANEL,i,l),N=(0,pK.n)(e),k=(0,ue.Z)(N);Q.useEffect(()=>{N&&!k&&d(pU.jD())},[N,d,k]);let S=e.isLocal&&(0,pF.PN)()?(0,pG.eT)(e.node_id,u).join("-"):e.node_id,I="Local components"===l||"Local private components"===l||e.isLocal,{handleClick:A,handleDoubleClick:P}=function(e,t){let n=(0,t_.q5)(),a=Q.useRef(null),{searchSessionId:r}=(0,cq.Gq)(),l=Q.useCallback(a=>{er.az.trackDefinedEvent("assets_panel.component_clicked",{isDoubleClick:a,isLocalComponent:t,assetKey:(0,dH.V)(e),fileKey:null==n?void 0:n.key,fileTeamId:(null==n?void 0:n.teamId)??void 0,fileOrgId:(null==n?void 0:n.parentOrgId)??void 0,searchSessionId:r??void 0,assetsPanelVersion:3})},[e,t,null==n?void 0:n.key,null==n?void 0:n.parentOrgId,null==n?void 0:n.teamId,r]);return{handleClick:Q.useCallback(()=>{a.current||(a.current=setTimeout(()=>{l(!1),a.current=null},500))},[l]),handleDoubleClick:Q.useCallback(()=>{a.current&&(clearTimeout(a.current),a.current=null),l(!0)},[l])}}(e,I??!1),O=!s,L=(0,eo.kc)().api_asset_search_with_scores,M=(0,ua.Y)(e),D=Q.useMemo(()=>({sourceForTracking:n,clickToInsert:!1,afterSuccessfulInsert:pV.$z,sectionNameForTracking:l,sectionDepth:o}),[o,l,n]),R=I?Q.createElement(pz.MT,{item:e,height:a,width:r,draggable:D,onContextMenu:x,shouldHideTooltip:!0,isFilePublished:m,recordingNodePath:S,isSearch:T,useBaseTile:!0,hideNameOverlay:O,numVariants:M,displayType:w,sectionPosition:i,shouldUseDescriptionTooltip:!0,showTooltipImmediately:!1,fileName:y||C?t:void 0,alwaysShowBorder:!0}):Q.createElement(pz.lX,{item:e,showName:!0,height:a,width:r,draggable:D,onContextMenu:x,shouldHideTooltip:!0,recordingNodePath:S,isSearch:T,useBaseTile:!0,hideNameOverlay:O,numVariants:M,displayType:w,sectionPosition:i,shouldUseDescriptionTooltip:!0,showTooltipImmediately:!1,fileName:y||C?t:void 0,alwaysShowBorder:!0});return Q.createElement("div",{className:"asset_panel_tile--wrapper--8uDli asset_panel_tile--_wrapperBase--ngLpF library_item_tile--_variantHover--xfLPt",onClick:A,onDoubleClick:P},Q.createElement("div",{className:ea()("asset_panel_tile--tileWrapper--7OwtG",{"asset_panel_tile--shownInFlyout--7Luo3":N,"asset_panel_tile--selectedFlyoutFocus--GGV8E":N&&_})},R),O&&Q.createElement("div",{className:"asset_panel_tile--nameWrapper--6O-iS",style:{width:r-2}},Q.createElement("span",{className:"asset_panel_tile--name--FG9hg ellipsis--ellipsis--Tjyfa",ref:E},v),Q.createElement("div",{className:"asset_panel_tile--caret--x-Vya asset_panel_tile--_caretBase--IZ44d"},Q.createElement(pc.e,{"aria-hidden":!0}))),O&&!!t&&Q.createElement(nk.Y,{spacing:0,direction:"horizontal",height:"hug-contents"},Q.createElement("div",{className:ea()(pY,pZ),ref:b,style:g?{maxWidth:r-dU.uF-2}:{width:r-2}},t),g&&Q.createElement(dU.KP,{fileKey:e.file_key,tooltipDelay:500,variant:"secondary",tooltipLocation:"below"})),L&&Q.createElement(Q.Fragment,null,Q.createElement("div",{className:ea()(pY,pZ),style:g?{maxWidth:r-dU.uF-2}:{width:r-2}},"AI: "+(e.ai_score??"N/A")),Q.createElement("div",{className:ea()(pY,pZ),style:g?{maxWidth:r-dU.uF-2}:{width:r-2}},"Lex: "+(e.lexical_score??"N/A"))))}function pJ({width:e,children:t}){let n=function(e){let t=(0,$.wA)(),{query:n,searchSessionId:a}=(0,cq.Gq)(),r=(0,ph.ht)(),l=(0,cz.q_)(),i=(0,cX.LR)(),o=(0,$.d4)(e=>e.universalInsertModal.showing),s=Q.useCallback(()=>{o&&i()},[i,o]),c=Q.useCallback((i,o,c,d)=>{s(),t((0,n9.to)({type:uk,data:{asset:i,searchSessionId:a??void 0,query:n??void 0,sectionPosition:o,sectionNameForTracking:c,assetTypeDropdownSelection:r,containerWidth:e,onGetKeyboardNavigationItemById:l,sectionDepth:d}}))},[s,t,a,n,r,e,l]);return Q.useMemo(()=>({onOpenFlyout:c,assetTypeDropdownSelection:r,isUi3:!0,width:e}),[c,r,e])}(e);return Q.createElement(dD.U.Provider,{value:n},t)}let pQ=(0,rT.jz)(uX.Nz),p$=(0,rT.jz)(uX.cP),p0=(0,rT.jz)(uX.FX),p1=(0,rT.jz)("4px"),p2=(0,rT.jz)("8px"),p5=(e,t,n,a)=>{let r=e+pQ;return t&&(r+=p$),n&&(r+=p0),a&&(r+=2*(0,rT.jz)(uX.uY)),r};function p4(e,t,n,a,r,l,i){let o=[];for(let s=0;s<e.length;s+=t){let c=e.slice(s,s+t),d=[];c.forEach((e,o)=>{var c;if(e){let u=s+o;d.push(Q.createElement(pX,{key:`${n}-${(0,dH.V)(e)}`,asset:e,fileName:null==(c=null==i?void 0:i.getFileName)?void 0:c.call(i,e),sectionDepth:null==i?void 0:i.depth,sectionNameForTracking:r,sectionPosition:s+o,keyboardPosition:pE(l,u,t,null==i?void 0:i.hasHeader),isFirstTile:(null==i?void 0:i.includesFirstTile)&&0===u,keyboardPanelDepth:null==i?void 0:i.keyboardPanelDepth,...a}))}}),o.push({element:Q.createElement("div",{className:0===s?"asset_panel_virtualization--virtualRowFirst--mdR2j asset_panel_virtualization--virtualRow--TxsS-":"asset_panel_virtualization--virtualRow--TxsS-",role:"row"},d),key:`${n}:row-${s/t}`,keys:c.map(e=>(0,dH.V)(e)),height:p5(a.thumbHeight,!!(null==i?void 0:i.getFileName),0!==s,!!(0,eo.kc)().api_asset_search_with_scores)})}return o.length>0&&(o.unshift({element:Q.createElement(pD,{height:p1}),key:`${n}:spacer-top`,height:p1}),o.push({element:Q.createElement(pD,{height:p2}),key:`${n}:spacer-bottom`,height:p2})),o}function p3({elements:e,hideScrollbar:t,initialScrollTop:n,onScroll:a,anchorScroll:r,role:l}){let i=Q.useRef(null),o=(0,pR.Te)({count:e.length,getScrollElement:()=>i.current,estimateSize:t=>e[t].height,getItemKey:t=>e[t].key,paddingEnd:8,overscan:6,initialOffset:n}),s=function({scrollContainerRef:e,initialScrollTop:t,onScroll:n,enabled:a,virtualizer:r,getKeys:l}){var i,o;let[s,c]=Q.useState(t??(null==(i=e.current)?void 0:i.scrollTop)),[d,u]=Q.useState(null==(o=e.current)?void 0:o.scrollHeight),{width:m}=function(){let e=Q.useContext(dD.U);return(null==e?void 0:e.isUi3)?e:{...e,width:0}}(),p=(0,ue.Z)(m),_=Q.useCallback((e,t)=>{if(!t)return{keys:[],offset:void 0};let n=e.getVirtualItems().find(e=>e.start>=t);return n?{keys:l(n),offset:n.start-t}:{keys:[],offset:void 0}},[l]),[f,h]=Q.useState(()=>{var n;return _(r,t??(null==(n=e.current)?void 0:n.scrollTop))}),g=Q.useCallback((e,t)=>{null==n||n(e,t),a&&(c(e),h(_(r,e)))},[a,_,n,r]);return Q.useEffect(()=>{var t,n,i;let o=p&&m&&p!==m,c=(null==(t=e.current)?void 0:t.scrollHeight)&&d&&(null==(n=e.current)?void 0:n.scrollHeight)!==d;if(o&&u(null==(i=e.current)?void 0:i.scrollHeight),void 0!==s&&void 0!==f.offset&&a&&o&&c){let t=r.getVirtualItems().find(e=>l(e).some(e=>f.keys.includes(e)));if(t)r.scrollToOffset(t.start-f.offset);else{let t=s/d,n=e.current.scrollHeight*t;r.scrollToOffset(n)}}},[f.keys,f.offset,a,l,p,e,d,s,r,m]),g}({enabled:r,scrollContainerRef:i,initialScrollTop:n,onScroll:a,virtualizer:o,getKeys:Q.useCallback(t=>{let n=e[t.index];return n?n.keys??[n.key]:[]},[e])});return Q.createElement(pL,{scrollContainerRef:i,hideScrollbar:t,initialScrollTop:n,onScroll:s},Q.createElement("div",{style:{height:`${o.getTotalSize()}px`,width:"100%",position:"relative"},role:l},o.getVirtualItems().map(t=>Q.createElement("div",{key:t.key,style:{position:"absolute",top:0,left:0,width:"100%",transform:`translateY(${t.start}px)`}},e[t.index].element))))}var p6=n(959456),p7=n(959075);function p8(e){var t;let n=(0,un.ke)(e.name),a=null==(t=e.containing_frame)?void 0:t.name;return a?[a,...n]:n}function p9(e,t="",{isPreset:n}){let a=new Map,r=[];n?(0,n_.v7)(e,_t):(0,n_.v7)(e,_e);let l=Object.create(null);for(let n of e){let e=p8(n),i="";for(let o=0;o<e.length;o++){let s=e[o],c=i,d=o<e.length-1;i+=s+(d?"/":"");let u=null;if(l[c]&&(u=l[c]),d){let n=l[i]??{name:s,key:`${t}-${e.slice(0,o+1).join("/")}`,items:[],subtrees:new Map,type:uK.l$.NAME_GROUP,previewAsset:void 0};l[i]||(l[i]=n,u?u.subtrees.set(s,n):a.set(s,n))}d||(u?u.items.push({...n,name:e[e.length-1]}):r.push(n))}}return a.forEach(e=>{(function e(t){t.previewAsset=_i(t),t.subtrees.forEach(t=>e(t))})(e)}),{sortedItems:r,sortedSubtrees:a}}function _e(e){return p8(e).join("/")}function _t(e){let t=_e(e);return(0,p6.N)(e)?"!!!!!"+t:t}function _n(e,t,{isPreset:n}){let a=new Map,{itemsByPageId:r,pageNamesByPageId:l,itemsWithoutPage:i}=(0,uD.tz)(e,e=>e),{itemsByPageId:o,pageNamesByPageId:s,itemsWithoutPage:c}=(0,uD.tz)(t,e=>e),d={...l,...s};(0,uD.fM)(r,d,i),(0,uD.fM)(o,d,c,!0);let u=Object.keys(d);for(let e of((0,n_.v7)(u,e=>d[e]),u)){let t=d[e],l=null,i=r[e];if(i&&i.length>0){let{sortedItems:e,sortedSubtrees:t}=p9(i,"components",{isPreset:n});l={name:(0,eO.t)("design_systems.assets_panel.components"),items:e,subtrees:t,key:ps.c_,type:uK.l$.COMPONENTS,previewAsset:void 0}}let s=null,c=o[e];if(c&&c.length>0){let{sortedItems:e,sortedSubtrees:t}=p9(c,"templates",{isPreset:n});s={name:(0,eO.t)("design_systems.assets_panel.templates"),items:e,subtrees:t,key:ps.JS,type:uK.l$.TEMPLATES,previewAsset:void 0}}let{sortedItems:u,sortedSubtrees:m}=p9([...i??[],...c??[]],"assets",{isPreset:n}),p={name:t,items:u,subtrees:m,key:ps.Mk,type:uK.l$.COMPONENTS,previewAsset:void 0},_={name:t,id:e,previewAsset:function(e,t){let n=_i(t),a=_i(e);return n||a}(l,s),components:l,templates:s,assets:p};a.set(e,_)}return a}function _a(e,t){let{allItems:n,publishedItems:a,privateItems:r,numPublished:l}=e;return l>0&&t&&r.length>0?a:n}function _r(e){let t=Array.from(e.items.values());for(let[n,a]of e.subtrees.entries())t.push(..._r(a));return t}function _l(e){return function(e,t){let n=[],a=!0;for(let r=0;r<t&&a;r++)for(let l of(a=!1,e))if(!(r>=l.length)&&(a=!0,n.push(l[r]),n.length>=t))return n;return n}(Array.from(e.values()).map(e=>[...e.templates?_r(e.templates):[],...e.components?_r(e.components):[]]),ps.Th)}function _i(e){let t=e?_r(e):[];return t.length>0?t[0]:void 0}var _o=n(581508),_s=n(833776);let _c=(0,ef.Iz)(()=>(0,_o.rt)(0));function _d({libraryKey:e,pageId:t,folderPath:n}={}){let{lastNavAction:a}=(0,_s.ZX)(),r=a===_s.r6.Back||a===_s.r6.Mount||a===_s.r6.ToggleView&&!n,[l,i]=(0,ef.fp)(_c("libraries")),[o,s]=(0,ef.fp)(_c(`pages-${e}`)),[c,d]=(0,ef.fp)(_c(`assets-${e}-${t}-${(n??[]).join("-")}`));return{librariesScrollTop:r?l:0,pagesScrollTop:r?o:0,assetsScrollTop:r?c:0,handleScrollLibraries:Q.useCallback(e=>{i(e)},[i]),handleScrollPages:Q.useCallback(t=>{e&&s(t)},[s,e]),handleScrollAssets:Q.useCallback(n=>{e&&t&&d(n)},[d,e,t])}}function _u({elementMinSize:e,spaceAvailable:t,gap:n}){return Math.floor((t+n)/(e+n))}function _m({numElements:e,spaceAvailable:t,gap:n}){return Math.floor((t-(e-1)*n)/e)}function _p({width:e,widthToHeightRatio:t=1,maxHeight:n}){let a=Math.floor(e/t);return void 0===n?Math.max(0,a):Math.max(0,Math.min(n,a))}let __=(0,rT.jz)("16px"),_f=2*(0,rT.jz)("16px"),_h={NORMAL:115,WIDE:void 0,SMALL:72},_g={minColumns:2,maxColumns:3,aspectRatio:1,maxHeight:_h.NORMAL},_E={minColumns:1,maxColumns:1,aspectRatio:3.25,maxHeight:_h.WIDE},_v={minColumns:3,maxColumns:5,aspectRatio:1,maxHeight:_h.SMALL},_y=e=>{switch(e){case uz.rp.WIDE:return _E;case uz.rp.SMALL:return _v;default:return _g}};function _b(){let{componentLayouts:e,templateLayout:t}=function({sidebarWidth:e}){let t=Q.useMemo(()=>e-_f,[e]),n=Q.useMemo(()=>{let e={};for(let n of[uz.rp.NORMAL,uz.rp.WIDE,uz.rp.SMALL]){let{minColumns:a,maxColumns:r,aspectRatio:l,maxHeight:i}=_y(n),o=Math.max(Math.min(r,_u({elementMinSize:i??t,gap:__,spaceAvailable:t})),a),s=_m({numElements:o,gap:__,spaceAvailable:t}),c=_p({width:s,maxHeight:i,widthToHeightRatio:l});e[n]={width:s,height:c,columns:o}}return e},[t]),a=Q.useMemo(()=>_p({width:t,widthToHeightRatio:1.5,maxHeight:164}),[t]);return Q.useMemo(()=>({componentLayouts:n,templateLayout:{width:t,height:a}}),[n,t,a])}({sidebarWidth:(0,ci.GQ)()}),[n,a]=Q.useMemo(()=>{let t={},n={};for(let[a,r]of Object.entries(e))t[a]={thumbHeight:r.height,thumbWidth:r.width,viewMode:uS.Bk.Grid,thumbLayout:a,sourceForTracking:uS.mZ},n[a]=r.columns;return[t,n]},[e]),r=Q.useMemo(()=>({thumbHeight:t.height,thumbWidth:t.width,viewMode:uS.Bk.Grid,thumbLayout:uz.rp.NORMAL,sourceForTracking:uS.mZ}),[t.height,t.width]);return Q.useMemo(()=>({componentTilePropsByLayout:n,numColumnsByLayout:a,templateTileProps:r}),[n,a,r])}function _C({children:e,index:t,width:n}){let a=Q.useMemo(()=>e.flat().filter(e=>!!e),[e]),r=Q.useMemo(()=>{let e=_w(-Math.min(t,a.length-1)),n=`translateX(${e})`;return{transform:n,WebkitTransform:n}},[a.length,t]);return Q.createElement("div",{style:r,"data-testid":"slide-carousel",className:"slide_carousel--container--1f4th"},a.map((e,a)=>Q.createElement("div",{className:"slide_carousel--item--w20ND",style:{width:n},key:a,"data-testid":"slide-carousel-item","aria-hidden":a!==t},e)))}let _w=e=>`${100*e}%`,_T=(0,rT.jz)(pd),_x=(0,rT.jz)(pu),_N=(0,rT.jz)("8px");function _k({page:e,width:t}){let{libraryKey:n}=(0,pI.wV)(),[a]=(0,pj.MA)();return n&&e?a===pj.$H.GRID?Q.createElement(_S,{page:e,libraryKey:n}):Q.createElement(_I,{page:e,width:t}):Q.createElement("div",{style:{width:t}})}function _S({page:e,libraryKey:t}){let{assetsScrollTop:n,handleScrollAssets:a}=_d({libraryKey:t,pageId:e.id}),{componentTilePropsByLayout:r,templateTileProps:l,numColumnsByLayout:i}=_b(),o=r.NORMAL,s=i.NORMAL,{componentSectionNameForTracking:c,templateSectionNameForTracking:d}=(0,ph.zf)(),u=Q.useMemo(()=>{let t=[];return e.templates&&(t.push({element:Q.createElement(pM,{title:(0,eO.t)("design_systems.assets_panel.templates")}),key:"templates:header",height:_x}),t.push(...p4(_r(e.templates),1,"templates",l,d,[ps.tM.TEMPLATES],{includesFirstTile:!0}))),e.components&&(e.templates&&t.push({element:Q.createElement(pM,{title:(0,eO.t)("design_systems.assets_panel.components")}),key:"components:header",height:_x}),t.push(...p4(_r(e.components),s,"components",o,c,[ps.tM.COMPONENTS],{includesFirstTile:!e.templates}))),t},[e.templates,e.components,s,o,l,d,c]);return Q.createElement(p3,{elements:u,initialScrollTop:n,onScroll:a,anchorScroll:!0,role:"grid"})}function _I({page:e,width:t}){let{libraryKey:n,pageId:a,folderPath:r}=(0,pI.wV)(),{getFolder:l}=(0,pP.G)(),i=Q.useMemo(()=>{let t=[],i=r??[];for(let o=-1;o<i.length;o++){let s=i.slice(0,o+1),c=l(n,a,r);if(c){if((0,pI.xc)(c))continue;t.push(Q.createElement(_A,{parentSubtree:e.assets,currentFolderPath:s,key:`components-${s?s.join("/"):"root"}`}))}}return t},[r,l,n,e.assets,a]);return Q.createElement(_C,{index:i.length-1,width:t},i)}function _A({parentSubtree:e,currentFolderPath:t}){let n=Q.useMemo(()=>{let n=e;for(let e of t){let t=n.subtrees.get(e);if(!t)return null;n=t}return n},[e,t]),{folderPath:a,pageId:r,libraryKey:l}=(0,pI.wV)(),i=t.length,o=(null==a?void 0:a.length)??0,{assetsScrollTop:s,handleScrollAssets:c}=_d({libraryKey:l,pageId:r,folderPath:t}),d=_P({subtree:n,currentFolderPath:t});return Q.createElement(p3,{elements:d,hideScrollbar:i<o,onScroll:c,initialScrollTop:s})}let _P=({subtree:e,currentFolderPath:t})=>{let{componentTilePropsByLayout:n,numColumnsByLayout:a}=_b(),{componentSectionNameForTracking:r}=(0,ph.zf)(),{folderPath:l}=(0,pI.wV)(),i=t.join("/"),o=t.length,s=(null==l?void 0:l.length)??0,c=Q.useCallback(({subtree:e,elements:t})=>{let l=e.items.length>0;if(l){let l=[ps.tM.COMPONENTS],i=(0,uz.PI)(e.items);t.push(...p4(e.items,a[i],e.key,n[i],r,l,{hasHeader:!1,includesFirstTile:o===s,keyboardPanelDepth:o}))}let c=Array.from(e.subtrees.values());l&&c.length>0&&t.push({element:Q.createElement(pD,{height:_N}),key:e.key,height:_N}),c.forEach((n,a)=>{t.push({element:Q.createElement(pA,{subtree:n,index:a+e.items.length,keyPrefix:i,depth:o}),key:n.key,height:_T})})},[a,n,r,o,s,i]);return Q.useMemo(()=>{let t=[];return e&&c({subtree:e,elements:t}),t},[c,e])};var _O=n(480201),_L=n(849790),_M=n(901004),_D=n(370579);let _R="asset-panel-library-context-menu",_F=nh.Pt("assetsLibrary","contextMenu"),_B=_O.W.Dropdown,_U=_O.W.Option,_H=Q.memo(({dropdownShown:e,usePortal:t})=>{if(!e||e.type!==_R)return null;let{data:n}=e;if(!n)return null;let{libraryHref:a,position:r,isLocalLibrary:l,onGoToLibrary:i,onPublish:o,onUnsubscribe:s}=n;if(!r)return null;let c=Q.createElement(_B,{style:tT.sx.add({top:`${r.top}px`,right:`${r.right}px`,bottom:`${r.bottom}px`,left:`${r.left}px`}).add(tT.sx.fixed).$},l?Q.createElement(_U,{onClick:o,recordingKey:nh.Pt(_F,"publishLibrary")},Q.createElement(eO.Tx,{id:"design_systems.assets_panel.publish_library"})):Q.createElement(Q.Fragment,null,Q.createElement(_U,{onClick:s,recordingKey:nh.Pt(_F,"unsubscribe")},Q.createElement(eO.Tx,{id:"design_systems.assets_panel.remove_library_from_file"})),Q.createElement(_U,{href:a,target:"_blank",recordingKey:nh.Pt(_F,"goToLibrary"),onClick:i},Q.createElement(eO.Tx,{id:"design_systems.assets_panel.go_to_library"}))));return t?aP.createPortal(c,document.body):c}),_V="asset-panel-page-context-menu",_G=nh.Pt("assetsLibrary","contextMenu"),_K=_O.W.Dropdown,_W=_O.W.Option,_z=Q.memo(({dropdownShown:e,usePortal:t})=>{if(!e||e.type!==_V)return null;let{data:n}=e;if(!n)return null;let{libraryPageHref:a,position:r,isLocalLibrary:l,onClickLocalPage:i,onClickSubscribedPage:o}=n;if(!r)return null;let s=Q.createElement(_K,{style:tT.sx.add({top:`${r.top}px`,right:`${r.right}px`,bottom:`${r.bottom}px`,left:`${r.left}px`}).add(tT.sx.fixed).$},l?Q.createElement(_W,{recordingKey:nh.Pt(_G,"goToLibrary"),onClick:i},Q.createElement(eO.Tx,{id:"design_systems.assets_panel.go_to_page"})):Q.createElement(_W,{href:a,target:"_blank",recordingKey:nh.Pt(_G,"goToLibrary"),onClick:o},Q.createElement(eO.Tx,{id:"design_systems.assets_panel.go_to_page"})));return t?aP.createPortal(s,document.body):s});function _j(){var e,t,n;let a=(0,$.d4)(e=>e.dropdownShown),r=(0,$.d4)(c$.hK),l=(0,$.d4)(sY.e_),i=(null==a?void 0:a.type)===mE.K.ASSETS_PANEL&&!!(null==(e=null==a?void 0:a.data)?void 0:e.component),o=(null==a?void 0:a.type)===_V&&!!(null==(t=null==a?void 0:a.data)?void 0:t.pageId),s=(null==a?void 0:a.type)===_R&&!!(null==(n=null==a?void 0:a.data)?void 0:n.libraryHref),c=(0,mp.K)(!0),d=Q.useContext(dD.U);return Q.createElement(Q.Fragment,null,i&&Q.createElement(mE.h,{selectedView:r,dropdownShown:a,defaultFileKeys:l.defaultPublished.fileKeys,onJumpToLocalComponent:c,onOpenFlyout:null==d?void 0:d.onOpenFlyout,usePortal:!0}),o&&Q.createElement(_z,{dropdownShown:a,usePortal:!0}),s&&Q.createElement(_H,{dropdownShown:a,usePortal:!0}))}let _Y="asset_panel_library--libraryCard--l0q0e",_Z="asset_panel_library--libraryPreviewSection--fRTrr";function _X({library:e,previewSize:t,altPreviewHeight:n,cardWidth:a,keyboardSection:r,rowIndex:l,columnIndex:i=0}){let{focusFirstItem:o,focusSearchBar:s}=pS(),{navigateToLibrary:c}=(0,pI.wV)(),d=(0,ph.mP)(e),u=Q.useCallback(()=>{er.az.trackDefinedEvent("assets_panel.view_library",d),c(e.fileKey)},[e.fileKey,d,c]),{currentView:m}=(0,pI.wV)(),p=m!==pI.S5.Libraries,_=(0,ex.o3)(ex.nt.ui3AssetsPanelRedesignAlt),{setKeyboardNavigationElement:f}=(0,cz.M3)({path:[ps.ON.CONTENTS,ps.lM.LIBRARIES,r,l],column:i,id:e.fileKey,disabled:p}),h=pv({onBoth:u,onKeyDown:o,onClick:s}),g=function(e){let t=(0,t_.q5)(),n=(0,$.wA)(),a=e.fileKey===(null==t?void 0:t.key),r=(0,dq.wJ)(e.fileKey),l=function(e,t){let n=(0,$.wA)(),a=(0,t_.q5)(),r=(0,dj.M)()&&(0,eo.kc)().dse_new_asset_panel_fetch;return Q.useCallback(l=>{a&&(n(dk.am({libraryFileSubscription:{file_key:a.key,library_file_key:e,is_subscribed:l},userInitiated:!0,isCommunityLibrary:t})),l?(0,er.sx)("Library File Enabled",{fileKey:a.key,fileTeamId:a.teamId,fileOrgId:a.parentOrgId,libraryFileKey:e,entryPoint:"assets_panel_library_context_menu"}):(0,er.sx)("Library File Disabled",{fileKey:a.key,fileTeamId:a.teamId,fileOrgId:a.parentOrgId,libraryFileKey:e,entryPoint:"assets_panel_library_context_menu"}),n((0,cq.QB)({ignoreLoadingState:r})))},[n,t,e,a,r])}(e.fileKey,r),i=Q.useCallback(()=>l(!1),[l]),o=function(){let e=(0,$.wA)(),t=(0,t_.q5)(),n=(0,$.d4)(e=>e.teams),a=(0,$.d4)(sY.fA),r=Q.useCallback(()=>{e(n9.to({type:_L.dD,data:{entrypoint:_M.RR.ASSET_PANEL_LIBRARY_CONTEXT_MENU}}))},[e]),l=(null==t?void 0:t.teamId)&&n[t.teamId],i=Q.useCallback(()=>{e(n9.to({type:_D.$3,data:{afterFileMove:r,team:l||null}}))},[e,r,l]);return Q.useCallback(()=>{a?r():i()},[a,r,i])}(),s=Q.useMemo(()=>(0,dq.wJ)(e.fileKey)?(0,d1.X$)(e.fileKey):(0,d1.jN)({file:{key:e.fileKey,editor_type:dV._Y.DESIGN}}),[e.fileKey]),c=Q.useCallback(()=>{er.az.trackDefinedEvent("assets_panel.go_to_library",{libraryKey:e.fileKey,fileKey:null==t?void 0:t.key,fileTeamId:(null==t?void 0:t.teamId)??void 0,fileOrgId:(null==t?void 0:t.parentOrgId)??void 0,entryPoint:"library_context_menu"})},[e.fileKey,t]),d=Q.useCallback(()=>{er.az.trackDefinedEvent("assets_panel.open_library_context_menu",{libraryKey:e.fileKey,fileKey:null==t?void 0:t.key,fileTeamId:(null==t?void 0:t.teamId)??void 0,fileOrgId:(null==t?void 0:t.parentOrgId)??void 0})},[e.fileKey,t]);return Q.useCallback(e=>{e.preventDefault(),e.stopPropagation(),n((0,nP.j7)({type:_R,data:{libraryHref:s,isLocalLibrary:a,onGoToLibrary:c,onPublish:o,onUnsubscribe:i,position:{top:e.clientY,left:e.clientX}}})),d()},[s,o,i,a,n,c,d])}(e),E=(0,t_.q5)(),v=Q.useMemo(()=>{let t=e.fileKey===(null==E?void 0:E.key)?"localLibrary":e.fileKey;return nh.Pt("assetsLibrary",t)},[null==E?void 0:E.key,e.fileKey]);return Q.createElement(ns.GG,{className:"asset_panel_library--library--5bw5-","aria-label":e.name,onClick:h,onContextMenu:g,forwardedRef:f,tabIndex:p?-1:0,style:{width:a},recordingKey:v},_?Q.createElement(_J,{library:e,previewHeight:n}):Q.createElement(_q,{library:e,previewSize:t}))}function _q({library:e,previewSize:t}){return Q.createElement("div",{className:_Y},Q.createElement("div",{className:_Z},Q.createElement(_Q,{library:e,previewSize:t})),Q.createElement(_$,{library:e}))}function _J({library:e,previewHeight:t}){let{thumbnailUrl:n}=e,[a,r]=Q.useState(n),l=Q.useMemo(()=>{if(a)return`url(${a})`},[a]),i=Q.useCallback(()=>{r(n)},[n]);return Q.createElement("div",{className:_Y},Q.createElement("div",{className:_Z},Q.createElement("div",{style:{backgroundImage:l,height:t},className:e.thumbnailShouldCover?"asset_panel_library--libraryPreviewAltCover--Prfkt asset_panel_library--libraryPreviewAlt--tcri0":"asset_panel_library--libraryPreviewAlt--tcri0"}),n&&Q.createElement("img",{src:n,onLoad:i,className:"asset_panel_library--hiddenImage--a-LoJ",alt:""})),Q.createElement(_$,{library:e}))}function _Q({library:e,previewSize:t}){let n=Q.useMemo(()=>{let t=[];return(0,ps.h$)(e)&&(t=e.previews),function(e,t){let n=e.slice(0,t),a=Array(t-n.length).fill(null);return[...n,...a]}(t,ps.Th)},[e]),a=e.fileKey;return Q.createElement(Q.Fragment,null,n.map((e,n)=>Q.createElement(Q.Fragment,{key:(null==e?void 0:e.id)??`${a}-${n}`},e?Q.createElement(pp,{keyPrefix:a,preview:e,height:t,width:t}):Q.createElement("div",{className:"asset_panel_library--blankThumbnail--G3-11",style:{height:t-2,width:t-2}}))))}function _$({library:e}){let t=(0,eo.kc)().dse_editor_templates_v1,n=Q.useMemo(()=>{let n=[];return e.numComponents>0&&n.push((0,eO.t)("design_systems.assets_panel.num_components",{numComponents:e.numComponents})),t&&e.numTemplates>0&&n.push((0,eO.t)("design_systems.assets_panel.num_templates",{numTemplates:e.numTemplates})),n.join(", ")},[e.numComponents,e.numTemplates,t]);return Q.createElement("div",{className:"asset_panel_library--libraryFooter--jXcDc","data-onboarding-key":e.name.includes("Basic Website Kit by Figma")?c2.vw:null},Q.createElement("div",{className:"asset_panel_library--libraryNameAndStats--uiY8T"},Q.createElement("h3",{className:"asset_panel_library--libraryName--aege1 ellipsis--ellipsis--Tjyfa"},e.name),Q.createElement("div",{className:"asset_panel_library--libraryStats--JL9eF ellipsis--ellipsis--Tjyfa"},n)),Q.createElement(_0,{libraryKey:e.fileKey}))}function _0({libraryKey:e}){let t=(0,dB.cm)(e),n=(0,dq.wJ)(e);return t||n?Q.createElement("div",{className:n?"asset_panel_library--presetIcon--PE3Tx asset_panel_library--libraryIcon--6s19b":"asset_panel_library--approvedIcon---0q6C asset_panel_library--libraryIcon--6s19b"},n?Q.createElement(dQ.S,{hubFileId:e,showTooltip:!0,isLarge:!0}):Q.createElement(dU.KP,{fileKey:e,tooltipDelay:500,tooltipLocation:"below",size:"large"})):null}let _1=(0,rT.jz)("8px")+1,_2=(0,rT.jz)("8px"),_5=(0,rT.jz)("8px"),_4=(0,rT.jz)("8px")+1,_3=(0,rT.jz)("8px");function _6({includeEmptyLibraries:e}={}){let t=(0,t_.tS)(),n=(0,c7.je)(),a=Q.useMemo(()=>n.data?n.data.map(t=>(0,ph.XI)(t,{includeEmptyLibraries:e})).filter(n4.Vq):[],[n.data,e]),r=(0,dB.Fl)();return Q.useMemo(()=>{let e=[],n=[],l=new Map;return a.forEach(a=>{(0,dq.wJ)(a.fileKey)?n.push(a):a.fileKey!==t&&e.push(a),l.set(a.fileKey,a)}),[(0,ph.ud)(e,r),(0,ph.ud)(n),l]},[r,a,t])}let _7="asset_panel_libraries--row--nHi0j",_8=(0,rT.jz)("56px"),_9=(0,rT.jz)("17px"),fe=(0,rT.jz)(pu);function ft({width:e,hideScrollbar:t,assetPanelItems:n}){let a=n.localAssets,[r,l]=_6();return Q.useMemo(()=>0===a.numComponents&&0===a.numTemplates&&0===r.length&&0===l.length,[a.numComponents,a.numTemplates,r.length,l.length])?Q.createElement("div",{style:{width:e}},Q.createElement(db,null)):Q.createElement(fn,{localAssets:a,subscribedLibraries:r,presetLibraries:l,hideScrollbar:t,width:e})}function fn({localAssets:e,subscribedLibraries:t,presetLibraries:n,width:a,hideScrollbar:r}){let{librariesScrollTop:l,handleScrollLibraries:i}=_d(),{currentView:o}=(0,pI.wV)(),{cardWidth:s,previewSize:c,previewListHeight:d}=function({sidebarWidth:e,minCardWidth:t=200,previewGap:n=_3,previewListPadding:a=_4,rowPadding:r=_5}){let l=e-2*r,i=Q.useMemo(()=>_u({elementMinSize:t,spaceAvailable:l,gap:0}),[t,l]),o=Q.useMemo(()=>_m({numElements:i,spaceAvailable:l,gap:0}),[i,l]),s=Q.useMemo(()=>_m({numElements:3,spaceAvailable:o-2*a,gap:n}),[o,n,a]),c=Q.useMemo(()=>2*s+n,[s,n]);return Q.useMemo(()=>({cardWidth:o,previewSize:s,previewListHeight:c,numColumns:i}),[o,s,c,i])}({sidebarWidth:a}),{cardWidth:u,previewHeight:m,numColumns:p}=function({sidebarWidth:e,minCardWidth:t=180,previewPadding:n=_1,widthToHeightRatio:a=1.66667,rowPadding:r=_2}){let l=e-2*r,i=Q.useMemo(()=>_u({elementMinSize:t,spaceAvailable:l,gap:0}),[t,l]),o=Q.useMemo(()=>_m({numElements:i,spaceAvailable:l,gap:0}),[i,l]),s=Q.useMemo(()=>o-2*n,[o,n]),c=Q.useMemo(()=>_p({width:s,widthToHeightRatio:a}),[s,a]);return Q.useMemo(()=>({cardWidth:o,previewWidth:s,previewHeight:c,numColumns:i}),[o,s,c,i])}({sidebarWidth:a}),_=(0,ex.o3)(ex.nt.ui3AssetsPanelRedesignAlt),f=_8+(_?m:d)+2,h=t.length>0,g=e.previews.length>0,E=n.length>0&&(h||g),v=Q.useMemo(()=>{let a=[],r=[];g&&r.push(e),r.push(...t);for(let e=0;e<r.length;e+=p){let t=r.slice(e,e+p);a.push({element:Q.createElement("div",{className:_7},t.map((t,n)=>Q.createElement(_X,{key:t.fileKey,library:t,previewSize:c,keyboardSection:ps.gP.LOCAL_AND_SUBSCRIBED,rowIndex:e,columnIndex:n,cardWidth:_?u:s,altPreviewHeight:m}))),key:t.map(e=>e.fileKey).join("-"),keys:t.map(e=>e.fileKey),height:f})}E&&(a.push({element:Q.createElement("div",{className:"asset_panel_libraries--divider--uvWKN"}),key:"divider",height:_9}),a.push({element:Q.createElement(pM,{title:(0,eo.kc)().dse_preset_libraries?(0,eO.t)("design_systems.assets_panel.ui_kits"):(0,eO.t)("design_systems.assets_panel.curated_libraries")}),key:"preset_libraries_header",height:fe}));for(let e=0;e<n.length;e+=p){let t=n.slice(e,e+p);a.push({element:Q.createElement("div",{className:_7},t.map((t,n)=>Q.createElement(_X,{key:t.fileKey,library:t,previewSize:c,keyboardSection:ps.gP.PRESETS,rowIndex:e,columnIndex:n,cardWidth:_?u:s,altPreviewHeight:m}))),key:t.map(e=>e.fileKey).join("-"),keys:t.map(e=>e.fileKey),height:f})}return a},[_,p,u,m,c,g,t,E,n,f,e,s]);return!function(e,t,n){let a=(0,$.d4)(e=>e.openFile),[r,l]=(0,ef.fp)(mk.GT),i=t.length+n.length;e.previews.length>0&&(i+=1),Q.useEffect(()=>{if(!r){l(!0);let e=mk._o.stop();e&&(0,er.sx)(mk.YS,{elapsedMs:e,fileKey:null==a?void 0:a.key,teamId:null==a?void 0:a.teamId,orgId:null==a?void 0:a.parentOrgId,isUi3RedesignedAssetPanel:!0,numLibraries:i,numComponents:0,numComponentsShown:0,numSectionsShown:i},{forwardToDatadog:!0})}},[r,l,i,a])}(e,t,n),Q.createElement(p3,{elements:v,hideScrollbar:r,initialScrollTop:l,onScroll:i,anchorScroll:o===pI.S5.Libraries})}function fa({page:e,index:t}){let n=(0,t_.q5)(),{previewAsset:a}=e,{navigateToPage:r,libraryKey:l,currentView:i}=(0,pI.wV)(),o=Q.useCallback(()=>{er.az.trackDefinedEvent("assets_panel.view_page",{pageId:e.id,libraryKey:l,fileKey:null==n?void 0:n.key,fileTeamId:(null==n?void 0:n.teamId)??void 0,fileOrgId:(null==n?void 0:n.parentOrgId)??void 0}),r(e.id)},[l,r,null==n?void 0:n.key,null==n?void 0:n.parentOrgId,null==n?void 0:n.teamId,e.id]),s=e.id,c=i!==pI.S5.Pages,{keyboardNavigationItem:d,setKeyboardNavigationElement:u}=(0,cz.M3)({path:[ps.ON.CONTENTS,ps.lM.PAGES,t],id:e.id,disabled:c}),{focusFirstItem:m,focusSearchBar:p}=pS();pT(d,i===pI.S5.Pages&&0===t);let _=pv({onBoth:o,onKeyDown:m,onClick:p}),f=function(e,t){let n=(0,t_.q5)(),a=(0,$.wA)(),r=e===(null==n?void 0:n.key),l=!!e&&!!t,i=Q.useMemo(()=>(0,d1.jN)({file:{key:e??"",editor_type:dV._Y.DESIGN},nodeId:t}),[e,t]),o=Q.useCallback(()=>tN.qo.instance.setCurrentPageAsync(t??""),[t]),s=Q.useCallback(()=>{er.az.trackDefinedEvent("assets_panel.go_to_page",{libraryKey:e,pageId:t,fileKey:null==n?void 0:n.key,fileTeamId:(null==n?void 0:n.teamId)??void 0,fileOrgId:(null==n?void 0:n.parentOrgId)??void 0,isLocal:r})},[r,e,null==n?void 0:n.key,null==n?void 0:n.parentOrgId,null==n?void 0:n.teamId,t]),c=Q.useCallback(()=>{o(),s()},[o,s]),d=Q.useCallback(()=>{er.az.trackDefinedEvent("assets_panel.open_page_context_menu",{libraryKey:e,pageId:t,fileKey:null==n?void 0:n.key,fileTeamId:(null==n?void 0:n.teamId)??void 0,fileOrgId:(null==n?void 0:n.parentOrgId)??void 0})},[e,null==n?void 0:n.key,null==n?void 0:n.parentOrgId,null==n?void 0:n.teamId,t]);return Q.useCallback(n=>{!l||(0,dq.wJ)(e)||(n.preventDefault(),n.stopPropagation(),a((0,nP.j7)({type:_V,data:{libraryPageHref:i,pageId:t,isLocalLibrary:r,onClickLocalPage:c,onClickSubscribedPage:s,position:{top:n.clientY,left:n.clientX}}})),d())},[e,l,a,i,t,r,c,s,d])}(l,e.id);return Q.createElement(p_,{keyPrefix:s,name:e.name,onClick:_,onContextMenu:f,previewAsset:a,recordingKey:`assetsPage.${e.id}`,ref:u,disabled:c})}let fr="performance.ds_eco.asset_panel_pages_view_loading",fl=new aa.jk(fr,{});function fi({didFinishLoading:e}){let t=fl.stop();(0,er.sx)(fr,{elapsedMs:t,isNewAssetPanelFetch:!!(0,eo.kc)().dse_new_asset_panel_fetch,didFinishLoading:e},{forwardToDatadog:!0})}let fo=(0,rT.jz)(pd);function fs({library:e,width:t,hideScrollbar:n,isLoading:a}){!function({isLoading:e}){let{currentView:t}=(0,pI.wV)(),n=(0,ue.Z)(t);Q.useEffect(()=>(n===pI.S5.Libraries&&t===pI.S5.Pages&&fl.start(),t===pI.S5.Pages&&!e&&fl.isRunning&&fi({didFinishLoading:!0}),()=>{n===pI.S5.Pages&&t!==pI.S5.Pages&&fl.isRunning&&fi({didFinishLoading:!1})}),[e,t,n])}({isLoading:a});let{pagesScrollTop:r,handleScrollPages:l}=_d({libraryKey:null==e?void 0:e.fileKey}),i=Q.useMemo(()=>e?Array.from(e.pages):[],[e]),o=Q.useMemo(()=>i.map(([e,t],n)=>({element:Q.createElement(fa,{page:t,index:n}),height:fo,key:e})),[i]);return a?Q.createElement("div",{className:"asset_panel_pages--loadingContainer--fyofJ",style:{width:t},"data-testid":"asset-panel-pages-spinner"},Q.createElement(t2.kt,null)):0===i.length?Q.createElement("div",{style:{width:t}}):Q.createElement(p3,{elements:o,hideScrollbar:n,initialScrollTop:r,onScroll:l})}let fc="asset_panel_recents--resultsWrapper--k79Vy";function fd(){let{productComponents:e,templates:t}=(0,uI.g5)(dz.$A.Design),{getLibrary:n}=(0,pP.G)(),a=(0,eo.kc)().dse_editor_templates_v1,r=Q.useCallback(e=>{let t=n(e);return(null==t?void 0:t.name)||""},[n]),{componentTilePropsByLayout:l,templateTileProps:i,numColumnsByLayout:o}=_b(),s=l.NORMAL,c=o.NORMAL,{componentSectionNameForTracking:d,templateSectionNameForTracking:u}=(0,ph.zf)(),m=e.length>0,p=t.length>0;return Q.createElement(pL,null,a&&p&&Q.createElement(Q.Fragment,null,Q.createElement(pM,{title:(0,eO.t)("design_systems.assets_panel.templates")}),Q.createElement("div",{className:fc},t.map((e,t)=>Q.createElement(pX,{key:`assetPanelRecents:template:${(0,dH.V)(e)}`,asset:e,fileName:r(e.file_key),sectionNameForTracking:u,sectionPosition:t,keyboardPosition:pE([ps.tM.TEMPLATES],t,1),...i})))),a&&p&&m&&Q.createElement("div",{className:"asset_panel_recents--buffer--URYGQ"}),m&&Q.createElement(Q.Fragment,null,a&&p&&Q.createElement(pM,{title:(0,eO.t)("design_systems.assets_panel.components")}),Q.createElement("div",{className:fc},e.map((e,t)=>Q.createElement(pX,{key:`assetPanelRecents:component:${(0,dH.V)(e)}`,asset:e,fileName:r(e.file_key),sectionNameForTracking:d,sectionPosition:t,keyboardPosition:pE([ps.tM.COMPONENTS],t,c),...s})))),Q.createElement("div",{className:"asset_panel_recents--bottomPadding--9BTkl"}))}var fu=n(625928),fm=n(51649),fp=n(596263),f_=n(70558),ff=n(476151),fh=n(563879);let fg=function({isLoading:e,children:t}){return e?Q.createElement("div",{className:"maybe_loading--loadingContainer--Wfq03"},Q.createElement(t2.kt,null)):Q.createElement(Q.Fragment,null,t)},fE="asset_panel_search_results--empty--72Hqc",fv="asset_panel_search_results--showMoreLink--3-Ww3 asset_panel_search_results--showMore--yo9-j blue_link--blueLink--9rlnd",fy=(0,rT.jz)(pu),fb=(0,rT.jz)("40px"),fC=({moreResults:e,query:t,assetType:n,showMoreDefault:a})=>{let[r,l]=Q.useState(!1),i=a||r,o=Q.useCallback(()=>l(!0),[]);Q.useEffect(()=>{l(!1)},[t]);let s=(0,fp.ud)(),c=(0,ef.md)(fm.qp),d=Q.useCallback(e=>{var t,n;return((0,eo.kc)().ds_use_lib_keys?null==(t=c[e.library_key])?void 0:t.name:null==(n=s[(0,fu.hH)(e)])?void 0:n.name)??""},[s,c]),{componentTilePropsByLayout:u,templateTileProps:m,numColumnsByLayout:p}=_b(),_=u.NORMAL,f=p.NORMAL,{componentSectionNameForTracking:h,templateSectionNameForTracking:g}=(0,ph.zf)({moreSearchResults:!0}),E=Q.useMemo(()=>{let t="templates"===n;return p4(e,t?1:f,`${n}:moreResults`,t?m:_,t?g:h,[t?ps.tM.TEMPLATES:ps.tM.COMPONENTS,1],{getFileName:d})},[e,f,n,_,m,g,h,d]);return Q.useMemo(()=>{if(0===e.length)return[];let t=[];return t.push({element:Q.createElement("div",{className:"asset_panel_search_results--showMoreText--mEcU5 asset_panel_search_results--showMore--yo9-j"},i&&Q.createElement(eO.Tx,{id:"design_systems.assets_panel.showing_results_from_all_libraries"}),!i&&Q.createElement("button",{className:fv,onClick:o},Q.createElement(eO.Tx,{id:"design_systems.assets_panel.more_results_in_all_libraries",results:e.length}))),key:`${n}:showMoreText`,height:fb}),i&&t.push(...E),t},[n,e.length,i,o,E])};function fw({components:e,moreComponents:t,templates:n,moreTemplates:a,query:r,getLibraryNameFromKey:l}){let i=(0,eo.kc)().dse_editor_templates_v1,o=e.length+t.length>0,s=n.length+a.length>0,c=Q.useCallback(e=>l(e.file_key),[l]),{componentTilePropsByLayout:d,templateTileProps:u,numColumnsByLayout:m}=_b(),p=d.NORMAL,_=m.NORMAL,{componentSectionNameForTracking:f,templateSectionNameForTracking:h}=(0,ph.zf)(),g=Q.useMemo(()=>p4(e,_,"components",p,f,[ps.tM.COMPONENTS,0],{getFileName:c}),[e,_,p,f,c]),E=Q.useMemo(()=>p4(n,1,"templates",u,h,[ps.tM.TEMPLATES,0],{getFileName:c}),[n,u,h,c]),v=fC({moreResults:t,query:r,assetType:"components",showMoreDefault:0===e.length&&t.length>0}),y=fC({moreResults:a,query:r,assetType:"templates"}),b=Q.useMemo(()=>{let e=[];return(0,eo.kc)().asset_search_feedback_text&&e.push({element:Q.createElement("a",{href:"https://figma.enterprise.slack.com/archives/C06NDBA1LQM",className:fv,tabIndex:-1,style:tT.sx.block.$},"#feedback-asset-search"),key:"assetSearchFeedback",height:32}),i&&s&&(e.push({element:Q.createElement(pM,{title:(0,eO.t)("design_systems.assets_panel.templates")}),key:"templatesHeader",height:fy}),e.push(...E),e.push(...y)),o&&(s&&e.push({element:Q.createElement(pM,{title:(0,eO.t)("design_systems.assets_panel.components")}),key:"componentsHeader",height:fy}),e.push(...g),e.push(...v)),e},[i,s,o,E,y,g,v]);return Q.createElement(p3,{elements:b,anchorScroll:!0})}function fT(){let{query:e,normalizedSearchResults:t,unsubscribedSearchResults:n,isLoading:a}=(0,$.d4)(dC.UQ),r=(0,ff.U)(),{libraryKey:l}=(0,pI.wV)(),{getLibrary:i}=(0,pP.G)(),{isLoading:o,libraryNameByResourceId:s}=function(e){let{hubFileIds:t,fileKeys:n}=Q.useMemo(()=>{let t=Array.from(e),{pass:n,fail:a}=(0,fh.j)(t,dq.wJ);return{hubFileIds:n,fileKeys:a}},[e]),a=Q.useMemo(()=>n.map(e=>({fileKey:e})),[n]),r=Q.useMemo(()=>t.map(e=>({hubFileId:e})),[t]),l=(0,eh.p)(tf.NSA,a,{enabled:a.length>0}),i=(0,eh.p)(tf.a9b,r,{enabled:r.length>0});return{isLoading:Q.useMemo(()=>l.some(e=>"loading"===e.result.status)||i.some(e=>"loading"===e.result.status),[l,i]),libraryNameByResourceId:Q.useMemo(()=>{var e;let t={};for(let e of l)"loaded"===e.result.status&&e.result.data.file&&(t[e.args.fileKey]=e.result.data.file.name);for(let n of i)"loaded"===n.result.status&&(null==(e=n.result.data.hubFile)?void 0:e.currentHubFileVersion)&&(t[n.args.hubFileId]=n.result.data.hubFile.currentHubFileVersion.name);return t},[l,i])}}(Q.useMemo(()=>new Set(t.map(e=>e.file_key)),[t])),c=fx(e),d=Q.useCallback(e=>{var t;return s[e]??(null==(t=i(e))?void 0:t.name)??""},[s,i]),u=Q.useMemo(()=>{var e;return l?null==(e=i(l))?void 0:e.name:void 0},[i,l]),[m,p]=Q.useMemo(()=>(0,dC._2)(t.filter(e=>d(e.file_key))),[t,d]),[_,f]=Q.useMemo(()=>(0,dC._2)(n),[n]),h=p.length+f.length>0,g=m.length+_.length>0;return e?Q.createElement(fg,{isLoading:o&&c||a||r},h||g?Q.createElement(fw,{components:p,moreComponents:f,templates:m,moreTemplates:_,query:e,getLibraryNameFromKey:d}):Q.createElement("div",{className:fE},u?Q.createElement(eO.Tx,{id:"design_systems.assets_panel.no_results_for_query_in_library",searchQuery:e,libraryName:u}):Q.createElement(eO.Tx,{id:"design_systems.assets_panel.no_results_for_query",searchQuery:e}))):Q.createElement("div",{className:fE},"Search keywords and filter results by specific libraries, templates, and components.")}let fx=e=>{let t=(0,ue.Z)(e),{isActive:n,start:a}=(0,f_.Z)(ey.lQ);return Q.useEffect(()=>{e!==t&&a(1e4)},[e,t,a]),n},fN=(e,t)=>e===pI.S5.Libraries?0:e===pI.S5.Pages||t?1:2;function fk({assetPanelItems:e,width:t}){let{libraryKey:n,pageId:a,currentView:r}=(0,pI.wV)(),l=fS(),i="loading"===(0,c7.je)().status,{getPage:o,getLibrary:s}=(0,pP.G)(),c=(0,ff.q)()(n);mh(Q.useCallback(()=>{let t=0,n=0,a=0;for(let[r,l]of e.allLibrariesUnsorted){if(r===e.localAssets.fileKey){l.numComponents>=0&&(t+=1);continue}t+=1,n+=l.numComponents,a+=Math.min(l.numComponents,20)}return{numLibraries:t,numComponents:n,numComponentsWithLimit:a}},[e])),fI();let d=Q.useMemo(()=>s(n),[s,n]),u=Q.useMemo(()=>o(n,a),[o,n,a]),m=fN(r,l);return Q.createElement(fg,{isLoading:i},Q.createElement(_j,null),r===pI.S5.Search?Q.createElement(fT,null):r===pI.S5.Recents?Q.createElement(fd,null):Q.createElement(_C,{index:m,width:t},Q.createElement(ft,{width:t,hideScrollbar:0!==m,assetPanelItems:e}),!l&&Q.createElement(fs,{library:d,width:t,isLoading:c,hideScrollbar:1!==m}),Q.createElement(_k,{page:u,width:t})))}let fS=()=>{let{getLibrary:e}=(0,pP.G)(),{libraryKey:t}=(0,pI.wV)(),n=(0,ff.q)()(t),a=e(t);return!!a&&!n&&!!(0,pI.Cg)(a)},fI=()=>{let{libraryKey:e}=(0,pI.wV)(),t=(0,po.R)(),n=(0,pi.$)(e);Q.useEffect(()=>{e&&(0,dq.wJ)(e)&&n&&t()},[n,e,t])};var fA=n(755020),fP=n(826862),fO=((f=fO||{})[f.ALL=0]="ALL",f[f.LIBRARY=1]="LIBRARY",f[f.RECENTS=2]="RECENTS",f);function fL({assetPanelItems:e,id:t,dataTestId:n,dropdownShown:a,recordingKey:r,role:l,inputRef:i,selectClassName:o,inputClassName:s,chevronClassName:c,ariaLabel:d,icon:u,keyboardNavigationItem:m}){var p,_;let f=(0,$.wA)(),h=(0,t_.q5)(),g=(null==(p=null==h?void 0:h.org)?void 0:p.name)??(null==(_=null==h?void 0:h.team)?void 0:_.name),{productComponents:E,templates:v}=(0,uI.g5)(dz.$A.Design),y=Q.useMemo(()=>E.length>0||v.length>0,[E,v]),{libraryKey:b,navigateToLibrary:C,navigateToRecents:w,navigateToTop:T,currentView:x}=(0,pI.wV)(),{focusSearchBar:N}=pS(),k=Q.useCallback((e,t,n)=>{er.az.trackDefinedEvent("assets_panel.asset_type_changed",{assetType:t,isSearching:x===pI.S5.Search,fileKey:t===dT.I.FILE?n:void 0,openFileKey:null==h?void 0:h.key,fileTeamId:(null==h?void 0:h.teamId)??void 0,fileOrgId:(null==h?void 0:h.parentOrgId)??void 0,assetsPanelVersion:3}),e()},[x,null==h?void 0:h.key,null==h?void 0:h.parentOrgId,null==h?void 0:h.teamId]),S=Q.useCallback(()=>{er.az.trackDefinedEvent("assets_panel.asset_type_dropdown_opened",{fileKey:null==h?void 0:h.key,assetsPanelVersion:3})},[null==h?void 0:h.key]),I=e.localAssets.fileKey,A=e.localAssets.numComponents>0||e.localAssets.numTemplates>0,[P,O,L]=_6(),M=e.allLibrariesUnsorted,D=Q.useMemo(()=>({format:e=>{switch(e.type){case 0:return(0,eO.t)("design_systems.assets_panel.dropdown_type_all_libraries");case 2:return(0,eO.t)("design_systems.assets_panel.dropdown_type_recents");case 1:if(e.key===I)return(0,eO.t)("design_systems.assets_panel.local_assets");{let t=M.get(e.key)??L.get(e.key);return(null==t?void 0:t.name)??""}}},isEqual:(e,t)=>e.type===t.type&&e.key===t.key}),[M,L,I]),R=Q.useMemo(()=>x===pI.S5.Recents?{type:2}:b?{type:1,key:b}:{type:0},[x,b]),F=Q.useMemo(()=>1===R.type?R.key:void 0,[R]),B=Q.useCallback(e=>{if(1===e.type){let t=M.get(e.key)??L.get(e.key);t&&k(()=>C(t.fileKey),...t.fileKey===(null==h?void 0:h.key)?[dT.I.LOCAL,void 0]:[dT.I.FILE,t.fileKey])}else 2===e.type?k(w,dT.I.RECENT):0===e.type&&k(T,dT.I.ALL);N()},[M,L,C,w,T,k,null==h?void 0:h.key,N]),U=Q.useCallback(()=>{document.hasFocus()&&(null==m||m.focus())},[m]);return Q.createElement(aT.l6,{dataTestId:n,recordingKey:r,role:l,property:R,onChange:B,dispatch:f,id:t,formatter:D,dropdownShown:a,openOnKeyPressed:[es.Uz.SPACE,es.Uz.ENTER],inputRef:i,dropdownWidth:260,className:o,inputClassName:s,chevronClassName:c,onShowDropdown:S,disableTyping:!0,ariaLabel:d,openBelowTarget:!0,icon:u,onCancel:U,rightIcon:Q.createElement(fP.T,{resourceId:F})},Q.createElement(aT.c$,{value:{type:0}}),y&&x!==pI.S5.Search&&Q.createElement(aT.c$,{value:{type:2}}),A&&Q.createElement(aT.c$,{value:{type:1,key:I}}),P.length>0&&[Q.createElement(aT.sK,{key:"divider"}),Q.createElement(aT.c$,{isHeader:!0,formattedValue:g?(0,eO.t)("design_systems.assets_panel.org_libraries",{orgOrTeamName:g}):(0,eO.t)("design_systems.assets_panel.org_libraries"),key:"library-header"})],P.map(({fileKey:e})=>Q.createElement(aT.c$,{key:e,value:{type:1,key:e},rightSettingsIcon:(0,uZ.vR)(e)&&Q.createElement(dU.KP,{fileKey:e})})),O.length>0&&[Q.createElement(aT.sK,{key:"divider"}),Q.createElement(aT.c$,{isHeader:!0,formattedValue:(0,eo.kc)().dse_preset_libraries?(0,eO.t)("design_systems.assets_panel.ui_kits"):(0,eO.t)("design_systems.assets_panel.curated_libraries"),key:"preset-header"})],O.map(({fileKey:e})=>Q.createElement(aT.c$,{key:e,value:{type:1,key:e},removeTextRightPadding:!0,rightSettingsIcon:Q.createElement(dQ.t,null)})))}let fM="asset-panel-breadcrumb";function fD({assetPanelItems:e,isSecondary:t=!1}){let n=(0,aX.U)(),a=(null==n?void 0:n.type)===fM,{keyboardNavigationItem:r,setKeyboardNavigationElement:l}=(0,cz.M3)({path:[ps.ON.BREADCRUMB],column:ps.Yv.MENU}),i=ea()("asset_panel_breadcrumb_menu--selectInput--newJM",{"asset_panel_breadcrumb_menu--selectInputSecondary--KK1-J":t,"asset_panel_breadcrumb_menu--selectInputSelected--ebTeh":a});return Q.createElement(fL,{assetPanelItems:e,id:fM,dataTestId:fM,recordingKey:fM,dropdownShown:n,role:"button",keyboardNavigationItem:r,inputRef:l,selectClassName:"asset_panel_breadcrumb_menu--select--qdkZH",inputClassName:i,chevronClassName:"asset_panel_breadcrumb_menu--selectChevron--QPHnV",ariaLabel:(0,eO.t)("design_systems.assets_panel.change_library")})}var fR=n(630819);let fF="asset-panel-filter";function fB({assetPanelItems:e}){let{keyboardNavigationItem:t,setKeyboardNavigationElement:n}=(0,cz.M3)({path:[ps.ON.HEADER,ps.my.SEARCH_AND_FILTER],column:ps.Wy.FILTER}),a=(0,aX.U)();return Q.createElement(fL,{assetPanelItems:e,id:fF,dataTestId:fF,recordingKey:fF,dropdownShown:a,role:"button",inputRef:n,selectClassName:"asset_panel_filter--select--SX2vC",inputClassName:"asset_panel_filter--selectInput--a-QnG",chevronClassName:"asset_panel_filter--selectChevron--AHB8i",ariaLabel:(0,eO.t)("design_systems.assets_panel.filter"),icon:Q.createElement(fR.S,null),keyboardNavigationItem:t})}var fU=n(139689);function fH({libraryName:e}){let t=(0,$.wA)(),{currentView:n,startSearch:a,onBack:r,libraryKey:l}=(0,pI.wV)(),i=n===pI.S5.Search,{inputRef:o,focusSearchBar:s}=pS(),c=(0,$.d4)(e=>e.leftPanel.shouldFocusSearchBar),{query:d}=(0,$.d4)(dC.UQ),u=(0,t_.tS)(),m=Q.useCallback(()=>{i&&r()},[i,r]),p=Q.useMemo(()=>l?l===u?{type:dT.I.LOCAL}:{type:dT.I.FILE,fileKey:l}:{type:dT.I.ALL},[l,u]),_=Q.useCallback(e=>{t(cj.ku({query:e,searchOptions:p})),""===e?m():i||a()},[t,i,m,p,a]),f=Q.useRef(void 0);Q.useEffect(()=>{i&&(d&&f.current!==l&&t(cj.gP({searchOptions:p})),f.current=l)},[t,i,l,d,p]);let h=Q.useCallback(()=>{""===d&&m()},[m,d]),g=Q.useCallback(()=>{_(""),s(),m()},[_,s,m]),E=(0,$.d4)(e=>e.mirror.appModel.activeCanvasEditModeType);Q.useEffect(()=>{let e=e=>{let t=ec.Ay.chromeos?e.altKey&&e.shiftKey&&e.keyCode===es.Uz.KEY_2:e.altKey&&e.keyCode===es.Uz.KEY_2,n=e.shiftKey&&e.keyCode===es.Uz.I&&!(0,ph.Qk)(e.target);(t||n)&&E!==eU.m1T.TEXT&&(s(),e.preventDefault())};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},[E,s]);let v=Q.useMemo(()=>e?(0,eO.t)("design_systems.assets_panel.search_library",{libraryName:e}):(0,eO.t)("design_systems.assets_panel.search_all_libraries"),[e]);return Q.createElement("div",{className:"asset_panel_search--container--u0qoH asset_panel_search--horizontalFlex---CG1k"},Q.createElement(mY.h,null),Q.createElement(dw.E1,{path:[ps.ON.HEADER,ps.my.SEARCH_AND_FILTER],column:ps.Wy.SEARCH,isNewAssetsPanel:!0,query:d,onChange:_,onFocus:ey.lQ,onBlur:h,onClearSearch:g,forwardedRef:o,isVisible:!0,entryPointForTracking:"editor:assets_panel",autofocus:c,recordingKey:"componentsLibrarySearch",placeholder:v,selectOnFocus:!0}))}function fV({library:e}){let{currentView:t,navigateToTop:n}=(0,pI.wV)(),{focusSearchBar:a}=pS(),r=(0,t_.q5)(),l=Q.useCallback(()=>{n(),a(),er.az.trackDefinedEvent("assets_panel.asset_type_changed",{assetType:dT.I.ALL,isSearching:t===pI.S5.Search,openFileKey:null==r?void 0:r.key,fileTeamId:(null==r?void 0:r.teamId)??void 0,fileOrgId:(null==r?void 0:r.parentOrgId)??void 0,assetsPanelVersion:3})},[t,a,n,null==r?void 0:r.key,null==r?void 0:r.parentOrgId,null==r?void 0:r.teamId]),{setKeyboardNavigationElement:i}=(0,cz.M3)({path:[ps.ON.HEADER,ps.my.LIBRARY_SEARCH_CHIP]});return e?Q.createElement("div",{className:"asset_panel_search--libraryChip--1nfYR asset_panel_search--horizontalFlex---CG1k","data-testid":"asset-panel-search-chip"},Q.createElement("span",{className:"asset_panel_search--libraryChipText--3TsfE ellipsis--ellipsis--Tjyfa"},e.name),Q.createElement(ns.GG,{className:"asset_panel_search--libraryChipRemove--kJiJn",onClick:l,recordingKey:"asset-panel-search-chip","aria-label":(0,eO.t)("design_systems.assets_panel.search_chip_label"),forwardedRef:i},Q.createElement(fU.A,null))):null}function fG(e){return Q.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},Q.createElement("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M7 10V7h3v3H7ZM6 6.75A.75.75 0 0 1 6.75 6h3.5a.75.75 0 0 1 .75.75v3.5a.75.75 0 0 1-.75.75h-3.5a.75.75 0 0 1-.75-.75v-3.5ZM7 17v-3h3v3H7Zm-1-3.25a.75.75 0 0 1 .75-.75h3.5a.75.75 0 0 1 .75.75v3.5a.75.75 0 0 1-.75.75h-3.5a.75.75 0 0 1-.75-.75v-3.5ZM14 7v3h3V7h-3Zm-.25-1a.75.75 0 0 0-.75.75v3.5c0 .414.336.75.75.75h3.5a.75.75 0 0 0 .75-.75v-3.5a.75.75 0 0 0-.75-.75h-3.5ZM14 17v-3h3v3h-3Zm-1-3.25a.75.75 0 0 1 .75-.75h3.5a.75.75 0 0 1 .75.75v3.5a.75.75 0 0 1-.75.75h-3.5a.75.75 0 0 1-.75-.75v-3.5Z",clipRule:"evenodd"}))}var fK=n(343427);function fW(){let[e,t]=(0,pj.MA)(),n=(0,t_.q5)(),{setLastNavAction:a}=(0,_s.ZX)(),{setKeyboardNavigationElement:r}=(0,cz.M3)({path:[ps.ON.HEADER,ps.my.SEARCH_AND_FILTER],column:ps.Wy.VIEW_TOGGLE}),l=e!==pj.$H.GRID,i=Q.useCallback(e=>{er.az.trackDefinedEvent("assets_panel.view_mode_changed",{viewMode:e,fileKey:null==n?void 0:n.key,fileTeamId:(null==n?void 0:n.teamId)??void 0,fileOrgId:(null==n?void 0:n.parentOrgId)??void 0}),t(e),a(_s.r6.ToggleView)},[null==n?void 0:n.key,null==n?void 0:n.parentOrgId,null==n?void 0:n.teamId,t,a]),o=Q.useCallback(()=>{l?i(pj.$H.GRID):i(pj.$H.LIST)},[i,l]),s=Q.useMemo(()=>l?(0,eO.t)("design_systems.assets_panel.show_as_grid"):(0,eO.t)("design_systems.assets_panel.show_as_list"),[l]);return Q.createElement(dN.K,{onClick:o,"aria-label":s,recordingKey:"toggleComponentsSidebarViewMode","data-tooltip-type":nO.Ib.TEXT,"data-tooltip":s,ref:r},l?Q.createElement(fG,null):Q.createElement(fK.Z,null))}function fz({assetPanelItems:e}){let{getPage:t,getLibrary:n}=(0,pP.G)(),{libraryKey:a,pageId:r}=(0,pI.wV)(),l=Q.useMemo(()=>t(a,r),[t,a,r]),i=Q.useMemo(()=>n(a),[n,a]);return Q.createElement("div",{className:"asset_panel_header--assetPanelHeader--ZWb-Q"},Q.createElement(fj,{library:i,assetPanelItems:e}),Q.createElement(fY,{library:i,page:l,assetPanelItems:e}))}function fj({assetPanelItems:e,library:t}){let{currentView:n,folderPath:a}=(0,pI.wV)();return Q.createElement("div",{className:tw.cx.grid.gap4.itemsCenter.ml8.$,style:tT.sx.add({gridTemplateColumns:"1fr auto",gridTemplateRows:"32px",gridAutoRows:"auto"}).$},Q.createElement("div",{style:tT.sx.add({gridRow:1,gridColumn:1}).$},Q.createElement(fH,{libraryName:null==t?void 0:t.name})),Q.createElement("div",{style:tT.sx.add({gridRow:1,gridColumn:2}).$},n===pI.S5.Search?Q.createElement(fB,{assetPanelItems:e}):n!==pI.S5.Assets||(null==a?void 0:a.length)?Q.createElement("div",{className:tw.cx.w4.$}):Q.createElement(fW,null)),n===pI.S5.Search&&t&&Q.createElement("div",{style:tT.sx.flex.minW0.add({gridRow:2,gridColumn:1}).$},Q.createElement(fV,{library:t})))}function fY({library:e,page:t,assetPanelItems:n}){var a;let{currentView:r,folderPath:l,onBack:i,libraryKey:o}=(0,pI.wV)(),s=(0,t_.q5)(),c=(0,$.d4)(e=>e.modalShown),d=(0,$.wA)(),u=(0,c7.je)(),m=Q.useMemo(()=>!!e&&!!t&&1===e.pages.size,[e,t]),p=Q.useMemo(()=>{if((null==s?void 0:s.key)===o)return n.localAssets;if(!o||!u.data)return;let e=u.data.find(e=>e.fileKey===o);if(e)return(0,ph.XI)(e)??void 0},[u,o,null==s?void 0:s.key,n.localAssets]),_=null==(a=e??p)?void 0:a.name,f=(0,ph.Uz)(),{setBackButtonKeyboardItem:h,focusSearchBar:g}=pS(),E=pv({onBoth:Q.useCallback(()=>{er.az.trackDefinedEvent("assets_panel.go_back",{sourceView:f,fileKey:null==s?void 0:s.key,fileTeamId:(null==s?void 0:s.teamId)??void 0,fileOrgId:(null==s?void 0:s.parentOrgId)??void 0,..."page"===f?{alsoBackOutOfLibrary:m}:{}}),i(),(null==c?void 0:c.type)===uE.V&&d(n9.AS())},[f,null==s?void 0:s.key,null==s?void 0:s.teamId,null==s?void 0:s.parentOrgId,m,null==c?void 0:c.type,i,d]),onKeyDown:Q.useCallback(()=>{r===pI.S5.Recents?o||g():r===pI.S5.Pages?g():r===pI.S5.Assets&&m&&!l&&g()},[r,g,l,m,o]),onClick:g}),{libraryBreadcrumb:v,pageBreadcrumb:y,hiddenPath:b}=function({currentView:e,libraryName:t,pageName:n,folderPath:a,isOnlyPageInCurrentLibrary:r}){let[l]=(0,pj.MA)();return Q.useMemo(()=>{switch(e){case pI.S5.Search:return{};case pI.S5.Recents:return{libraryBreadcrumb:(0,eO.t)("design_systems.assets_panel.recents")};case pI.S5.Pages:return{libraryBreadcrumb:t};case pI.S5.Assets:let i=l===pj.$H.LIST&&!!(null==a?void 0:a.length);if(!i&&r)return{libraryBreadcrumb:t??""};if(!t||!n)return{libraryBreadcrumb:""};if(!i)return{libraryBreadcrumb:t,pageBreadcrumb:n};{let[e]=a.slice(-1);return{libraryBreadcrumb:t,pageBreadcrumb:e,hiddenPath:[n,...a.slice(0,-1)].join(" / ")}}default:return{}}},[e,a,r,t,n,l])}({currentView:r,libraryName:_,pageName:null==t?void 0:t.name,folderPath:l,isOnlyPageInCurrentLibrary:m}),C=Q.useMemo(()=>v&&b&&y?[v,b,y].join(" / "):"",[v,b,y]);return Q.createElement(Q.Fragment,null,r!==pI.S5.Search&&Q.createElement("div",{className:"asset_panel_header--breadcrumbWrapper--NC2Ps asset_panel_header--horizontalFlex--k99PA"},v&&Q.createElement(dN.K,{"aria-label":(0,eO.t)("design_systems.assets_panel.back"),onClick:E,ref:h,recordingKey:"assetsPanelBack"},Q.createElement(fA.C,null)),Q.createElement("div",{className:"asset_panel_header--breadcrumb--Sdne3 asset_panel_header--horizontalFlex--k99PA ellipsis--ellipsis--Tjyfa"},y?Q.createElement(Q.Fragment,null,Q.createElement(fD,{assetPanelItems:n,isSecondary:!0}),Q.createElement("div",{className:"asset_panel_header--breadcrumbSlash--gxZSD asset_panel_header--breadcrumbSecondaryBase--PU3JK"}," / "),b&&Q.createElement(Q.Fragment,null,Q.createElement("div",{className:"asset_panel_header--breadcrumbEllipses--OG1zK asset_panel_header--breadcrumbSecondaryBase--PU3JK","data-tooltip-type":nO.Ib.TEXT,"data-tooltip":C},"..."),Q.createElement("div",{className:"asset_panel_header--breadcrumbSecondSlash--JDedN asset_panel_header--breadcrumbSlash--gxZSD asset_panel_header--breadcrumbSecondaryBase--PU3JK"}," / ")),Q.createElement("div",{className:"asset_panel_header--pageBreadcrumb--0Am1Q ellipsis--ellipsis--Tjyfa","data-testid":"asset-panel-page-breadcrumb"},y)):Q.createElement(fD,{assetPanelItems:n}))))}var fZ=n(212046),fX=n.n(fZ);let fq=(0,_o.rt)({}),fJ=e=>Q.useCallback(t=>{t()||e()},[e]);var fQ=n(194646);function f$({width:e}){let t=function(){let e=(0,eo.kc)().dse_new_asset_panel_fetch;(0,mm.y)({disabled:e}),function({disabled:e=!1}={}){let t=(0,$.wA)(),n=(0,$.d4)(e=>e.loadingState),a=(0,$.d4)(e=>e.fileVersion),[r,l]=_6({includeEmptyLibraries:!0}),i=Q.useMemo(()=>[...r,...l],[r,l]);Q.useEffect(()=>{if(0===i.length||e||!a)return;let r=0;for(let e of i){if(r>=5)break;let l=(0,lS.Mb)(e.fileKey,a);!(0,m_.D2)(n,l)&&(r+=1,(0,m_.VP)(n,l)||((0,dq.wJ)(e.fileKey)?(0,lS.Fz)(e.fileKey,n,a,t):(0,lS.AA)(e.fileKey,n,a,t,{includeThumbnail:!0,subscribeToRealtime:!0})))}},[i,t,a,n,e])}({disabled:!e});let{subscribedFileDataByKey:t,hubFilesById:n}=function(){let e=(0,$.d4)(e=>e.hubFiles),[t,n]=(0,ef.fp)(fq),a=(0,c7.l6)(),r=Q.useMemo(()=>{let t=[];for(let n of a)n in e||t.push({fileKey:n});return t},[a,e]),l=(0,eh.p)(tf.NSA,r,{enabled:a.size>0}),i=Q.useMemo(()=>l.some(e=>"loading"===e.result.status),[l]),o=Q.useMemo(()=>{var e;let t={};for(let n of l){let a=null==(e=n.result.data)?void 0:e.file;a&&(t[a.key]={key:a.key,name:a.name,team_id:a.teamId,source_file_key:a.sourceFileKey,editor_type:a.editorType,thumbnail_guid:a.thumbnailGuid,thumbnail_url:a.thumbnailUrl??"",thumbnail_url_override:a.thumbnailUrlOverride})}return t},[l]);Q.useEffect(()=>{i||n(o)},[i,n,o]);let s=Q.useMemo(()=>i&&!fX()(t)?t:o,[i,t,o]);return Q.useMemo(()=>({subscribedFileDataByKey:s,hubFilesById:e}),[e,s])}(),a=(0,$.d4)(t_.tB),r=(0,$.d4)(sY.e_),l=(0,$.d4)(sY.MH),i=(0,$.d4)(sY.dM),o=(0,$.d4)(sY.x6),s=(0,$.d4)(c0.P),c=(0,cZ.Ck)(),d=(0,dB.Fl)(),u=Q.useMemo(()=>(null==a?void 0:a.teamId)?s[a.teamId]:null,[null==a?void 0:a.teamId,s]),m=Q.useMemo(()=>!!u&&(0,cK.w5)(u),[u]),p=Q.useMemo(()=>(0,uO.T9)(null==a?void 0:a.project),[null==a?void 0:a.project]),_=Q.useMemo(()=>(0,uS.Sg)(l,i),[l,i]),f=Q.useMemo(()=>(0,uS.ND)(o),[o]),h=Q.useMemo(()=>(0,uS.ff)(r,a,t,p),[r,a,t,p]),g=(0,uM.Cx)(),E=Q.useMemo(()=>(0,uS.sJ)(g,t,a,r,p),[g,t,a,r,p]),v=Q.useMemo(()=>c()?(0,uS.o6)(r,a,n,p):null,[c,r,a,n,p]),{url:y,shouldCover:b}=function(){var e;let t=(0,$.d4)(t_.tB),n=null==(e=(0,eh.Rs)(tf.NSA,{fileKey:(null==t?void 0:t.key)??""},{enabled:!!(null==t?void 0:t.key)}).data)?void 0:e.file,a=(null==n?void 0:n.thumbnailUrlOverride)||(null==n?void 0:n.thumbnailUrl),r=!!(null==n?void 0:n.thumbnailGuid),[l,i]=Q.useState({url:void 0,shouldCover:!1}),[o,s]=Q.useState(void 0);return Q.useEffect(()=>{let e=!!o,t=l.url===a;if(!e&&!t){if(l.url){let e=setTimeout(()=>{i({url:a,shouldCover:r}),s(void 0)},5e3);s(e)}else i({url:a,shouldCover:r})}},[l.url,o,a,r]),Q.useEffect(()=>{if(o)return()=>clearTimeout(o)},[o]),l}();return Q.useMemo(()=>(function({localComponentsInfo:e,localTemplatesInfo:t,localThumbnailUrl:n,localThumbnailShouldCover:a,subscribedComponentsInfo:r,subscribedTemplatesInfo:l,subscribedCommunityComponentsInfo:i,subscribedCommunityTemplatesInfo:o,canPublish:s,openFileKey:c,approvedLibraryKeysByResourceType:d}){let{fileKeyToSubscribedItems:u,subscribedFiles:m}=r,p=[...m],_={};if((0,eo.kc)().dse_editor_templates_v1&&l)for(let e of(_=l.fileKeyToSubscribedItems,l.subscribedFiles))p.find(t=>t.key===e.key)||p.push(e);let f=function(e,t,n,a){let r=new Map;for(let l of(0,ph.uo)(e,a)){let e=l.key,a=t[e]??[],i=n[e]??[],o=_n(a,i,{isPreset:!1}),s=_l(o),c={name:l.name,fileKey:e,pages:o,previews:s,numComponents:a.length,numTemplates:i.length,thumbnailUrl:l.thumbnail_url_override??l.thumbnail_url,thumbnailShouldCover:!!l.thumbnail_guid};r.set(e,c)}return r}(p,u,_,d),h=function(e,t){if(!e&&!t)return new Map;let{hubFileIdToSubscribedItems:n,subscribedHubFiles:a}=e??{hubFileIdToSubscribedItems:{},subscribedHubFiles:[]},{hubFileIdToSubscribedItems:r,subscribedHubFiles:l}=t??{hubFileIdToSubscribedItems:{},subscribedHubFiles:[]},i=[...a,...l],o=new Map;for(let e of(0,ph.LH)(i)){let t=e.id,a=n[t]??[],l=r[t]??[],i=_n(a,l,{isPreset:!0}),s=_l(i);if(a.length+l.length>0){let n={name:(0,p7.oA)(e),fileKey:t,pages:i,previews:s,numComponents:a.length,numTemplates:l.length,thumbnailUrl:e.thumbnail_url,thumbnailShouldCover:!0};o.set(t,n)}}return o}(i,(0,eo.kc)().dse_editor_templates_v1?o:void 0),g=function(e,t,n,a,r,l){let{privateItems:i,numPublished:o}=e,{privateItems:s,numPublished:c}=t??{privateItems:[],numPublished:0},d=o+c>0&&r&&i.length+s.length>0,u=_a(e,r),m=t?_a(t,r):[],p=(0,dq.wJ)(l),_=_n(u,m,{isPreset:p}),f=_l(_),h={name:(0,eO.t)("design_systems.assets_panel.local_assets"),fileKey:l,pages:_,previews:f,numComponents:u.length,numTemplates:m.length,thumbnailUrl:n,thumbnailShouldCover:a};if(d){let e=null;if(i.length>0){let{sortedItems:t,sortedSubtrees:n}=p9(i,"p_components",{isPreset:p});e={name:(0,eO.t)("design_systems.assets_panel.components"),items:t,subtrees:n,key:ps.c_,type:uK.l$.COMPONENTS,previewAsset:void 0}}let t=null;if(s.length>0){let{sortedItems:e,sortedSubtrees:n}=p9(s,"p_templates",{isPreset:p});t={name:(0,eO.t)("design_systems.assets_panel.templates"),items:e,subtrees:n,key:ps.JS,type:uK.l$.TEMPLATES,previewAsset:void 0}}let{sortedItems:n,sortedSubtrees:a}=p9([...i??[],...s??[]],"assets",{isPreset:p}),r={name:(0,eO.t)("design_systems.assets_panel.assets"),items:n,subtrees:a,key:ps.Mk,type:uK.l$.COMPONENTS,previewAsset:void 0},l={name:(0,eO.t)("design_systems.assets_panel.hidden"),id:ps.o8,previewAsset:i[0]??s[0],components:e,templates:t,assets:r};h.pages.set(ps.o8,l)}return h}(e,t,n,a,s,c),E=new Map([...f,...h]);return E.set(g.fileKey,g),{localAssets:g,libraries:f,presets:h,allLibrariesUnsorted:E}})({localComponentsInfo:_,localTemplatesInfo:f,localThumbnailUrl:y,localThumbnailShouldCover:b,subscribedComponentsInfo:h,subscribedTemplatesInfo:E,subscribedCommunityComponentsInfo:v??void 0,subscribedCommunityTemplatesInfo:void 0,canPublish:m,openFileKey:(null==a?void 0:a.key)??"",approvedLibraryKeysByResourceType:d}),[d,m,_,f,y,b,a,v,h,E])}(),n=function(e){var t,n;let a=(0,at.iZ)(),r=(0,t_.q5)(),l=(0,cJ.jO)(),i=(0,fQ.f)("has_dismissed_component_sidebar_library_upsell_banner"),o=(0,$.d4)(e=>e.isFreeUser),s=(0,$.d4)(c0.P),c=(null==r?void 0:r.teamId)?s[r.teamId]:null,d=(0,eh.Rs)(tf.GyZ,{teamId:(null==r?void 0:r.teamId)??""}),u=(null==r?void 0:r.canEdit)??!1,m=(null==(n=null==(t=null==d?void 0:d.data)?void 0:t.team)?void 0:n.canEdit)??!1,p=e.numComponents>0||e.numTemplates>0;return Q.useMemo(()=>!i&&o&&(!c||!(0,cK.w5)(c)&&m)&&u&&l&&p&&(0,cY.Hz)(null==a?void 0:a.id),[i,o,c,m,u,l,p,a])}(t.localAssets);return Q.createElement(eP.tH,{boundaryKey:"AssetPanelUI3",fallback:Q.createElement(f2,null)},Q.createElement(f0,{assetPanelItems:t,width:e},Q.createElement(fz,{assetPanelItems:t}),Q.createElement(fk,{assetPanelItems:t,width:e}),n&&Q.createElement(mb,null),Q.createElement(c2.S_,{width:e})))}function f0({children:e,width:t,assetPanelItems:n}){return Q.createElement(px,{className:pg},Q.createElement(_s.P3,null,Q.createElement(pP.K,{assetPanelItems:n},Q.createElement(f1,null,Q.createElement(pJ,{width:t},e)))))}function f1({children:e}){return!function(){let{libraryKey:e,pageId:t,folderPath:n,navigateToTop:a,navigateToPage:r,navigateToPath:l,currentView:i,onBack:o}=(0,pI.wV)(),s=(0,ff.q)(),c=s(e),{getLibrary:d,getPage:u,getFolder:m}=(0,pP.G)(),{setLastNavAction:p}=(0,_s.ZX)(),_=fJ(a),[,,f]=_6();Q.useEffect(function(){if(i!==pI.S5.Assets&&i!==pI.S5.Pages)return;let c=d(e),u=f.get(e);if(!c){if(s(e)&&u&&i!==pI.S5.Assets)return;_(a);return}if(t){if(!(null==c?void 0:c.pages.get(t))){let e=(0,pI.Cg)(c);e?_(()=>r(e.id)):_(o);return}if(n&&!m(e,t,n)){let a=n.slice(0,-1),i=m(e,t,a);for(;!i&&a.length>0;)i=m(e,t,a=a.slice(0,-1));if(!i)return _(()=>r(t));let o=parent?(0,pI.xc)(i):void 0;return void(o?_(()=>l([...a,o.name])):(_(()=>l(a)),p(_s.r6.Back)))}}},[o,c,e,i,t,n,a,r,d,m,l,p,_,f,s]),Q.useEffect(function(){let a=d(e);if(!a||c)return;let o=(0,pI.Cg)(a);if(i===pI.S5.Pages&&o)r(o.id);else if(i===pI.S5.Assets){let a=m(e,t,n);if(!a)return;let r=(0,pI.xc)(a);r&&l([...n??[],r.name])}},[c,i,n,m,d,u,e,r,l,o,t])}(),Q.createElement(Q.Fragment,null,e)}function f2(){return Q.createElement("div",{className:tw.cx.colorTextSecondary.my8.mx16.$},Q.createElement(eO.Tx,{id:"design_systems.assets_panel.error"}))}var f5=n(74286),f4=n(773667);function f3(e){return Q.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},Q.createElement("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M10 7h8a1 1 0 0 1 1 1v8a1 1 0 0 1-1 1h-8V7ZM9 7H6a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h3V7ZM4 8a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V8Z",clipRule:"evenodd"}))}function f6(e){return Q.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},Q.createElement("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M10 7h8a1 1 0 0 1 1 1v8a1 1 0 0 1-1 1h-8V7ZM9 7H6a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h3V7ZM4 8a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V8Z",clipRule:"evenodd"}))}function f7(){let{isLeftPanelCollapsed:e}=(0,ci.Ye)();return e?Q.createElement(f3,null):Q.createElement(f6,null)}var f8=n(729064),f9=n(549314),he=n(922368),ht=n(838320),hn=n(138611),ha=n(302999),hr=n(261036),hl=n(342884),hi=n(179553),ho=n(757358),hs=n(126049),hc=n(524444),hd=n(944278),hu=n(597990),hm=n(902464),hp=n(918680);function h_({innerRef:e,className:t,value:n,placeholder:a,onChange:r,onFocus:l,onKeyDown:i,onKeyUp:o,shiftEnterInsertsNewline:s,dataTestId:c,recordingKey:d,onPasteCapture:u}){let m=(0,Q.useCallback)(t=>{e&&(e.current=(null==t?void 0:t.textarea)??null)},[e]),p=n.includes("\n");return Q.createElement(hp.v,{className:ea()(t,mX,{"canvas_search--searchInputSingleLine--DUHFr":!p}),ref:m,focusOnMount:!0,placeholder:a,value:n,spellCheck:!1,recordingKey:d,dataTestId:c,onEscape:ey.lQ,disableBorderStyles:!0,onFocus:l,onPasteCapture:u,onKeyDown:e=>{switch(e.keyCode){case es.Uz.ENTER:if(e.preventDefault(),s&&(e.shiftKey||ec.Ay.mac&&e.ctrlKey)){let{selectionStart:t,selectionEnd:n}=e.currentTarget;e.currentTarget.setRangeText("\n",t,n,"end"),e.currentTarget.scrollLeft=0,e.stopPropagation(),r(e.currentTarget.value);return}break;case es.Uz.UP_ARROW:case es.Uz.DOWN_ARROW:if(p)return}i(e)},onKeyUp:o,onChange:e=>r(e.currentTarget.value)})}var hf=n(974652);let hh=Q.createContext(!1);function hg({onChange:e,className:t,query:n,focusedByButtons:a,innerRef:r,onKeyDown:l,onKeyUp:i,onPasteCapture:o,onFocus:s,editorType:c}){return Q.createElement(h_,{className:t,innerRef:r,value:n,placeholder:(0,eO.t)("canvas_search.search_placeholder"),onFocus:e=>{s&&s(e),a.current||e.target.select(),a.current=!1},onPasteCapture:o,onKeyDown:e=>{e.keyCode===es.Uz.F?(0,es.Te)(e)?(e.currentTarget.select(),e.preventDefault()):(0,pf.jr)(e,pf.W0.NO,pf.VA.NO)&&e.stopPropagation():l(e)},onKeyUp:i,onChange:e,dataTestId:"canvas-search-input",recordingKey:`${c}.canvas_search.search`})}function hE(e,t,n){let a=(0,Q.useCallback)(({direction:a,shouldSelectInput:r})=>{var l,i;r?null==(i=e.current)||i.select():(n.current=!0,null==(l=e.current)||l.focus()),a&&t(a,"keyboard")},[n,e,t]);(0,hc.p)(hr.r.FocusEvent,a)}function hv(){let e=(0,Q.useRef)(!1),[t,n]=(0,Q.useState)(!0),{query:a}=(0,$.d4)(e=>e.canvasSearch),{total:r}=(0,ef.md)(sz.Fk);return{focusedByButtons:e,hidden:t,setHidden:n,inputRef:Q.useRef(null),navDisabled:!a||r<=1,showUi:(0,ae.p8)("showUi")}}function hy(){var e;let t=(0,pn.Z)("canvas_search_navigate"),{query:n,scope:a,filters:r,mode:l}=(0,$.d4)(e=>e.canvasSearch),i=(0,$.wA)(),o=(0,Q.useRef)(!1),s=(0,ae.p8)("currentPage"),c=(0,eG.J2)(eU.Ez5.uiState().showCanvasSearch),d=(0,ae.p8)("pagesList"),[u,m]=(0,Q.useState)(!1),[p,_]=(0,Q.useState)(eU.Ez5.uiState().isRecovery.getCopy()),[f,h]=(0,Q.useState)(!1),g=hb(),E=(0,t5.am)(),v=(0,f9.yZ)(),y=(0,Q.useMemo)(()=>v&&(0,cG.lH)(d),[v,d])||v&&(null==(e=eU.h3O)?void 0:e.isValidatingIncremental()),b=(0,Q.useMemo)(()=>!v&&(0,cG.lH)(d),[v,d]);(0,Q.useLayoutEffect)(()=>{a!==eU.Lov.ALL_PAGES||f||!y&&p?eU.YEY.setSearchScope(a):(h(!0),scheduler.postTask(async()=>{y&&await (0,hd.qd)(eU._em.FIND_AND_REPLACE),eU.YEY.setSearchScope(a),_(!0)},{priority:"user-blocking"}))},[p,d,a,f,y]);let C=(0,Q.useCallback)(async(e,n=!0)=>{tW.sn.start("canvas_search_time_to_results"),h(!0);let{nav:r,resultsByPage:l}=await g(e,n);Object.keys(l).filter(e=>e!==s&&e!==ad.Xy).length?m(!0):m(!1),h(!1),n&&t(r,{additionalTrackEventParams:{searchScope:eU.Lov[a]}});let i=tW.sn.tryStop("canvas_search_time_to_results");i&&E("canvas_search_time_to_results",{timeElapsedMs:i,searchScope:eU.Lov[a],resultCount:Object.values(l).reduce((e,t)=>e+=t.length,0)})},[s,t,a,g,E]),w=(0,hs.A)(C,300),T=(0,Q.useCallback)((e,t=!0)=>{i(ha.NY(e)),h(!!e&&!(0,lA.jN)(e)),w(e,t)},[i,w]);return(0,Q.useEffect)(()=>{c&&n&&(a!==eU.Lov.ALL_PAGES||!y&&p)&&C(n,!1)},[r,l,a,c,d,p,y]),{query:n,showSearch:c,resultsOnOtherPages:u,search:T,next:(0,Q.useCallback)((e,n)=>{(0,eV.Uc)(""),eU.YEY.setHoveredResult(ad.AD,-1);let a=!o.current;o.current=!1,t(eU.YEY.setNextSearchResultAndGetViewportSettings(e,a),{additionalTrackEventParams:{source:n}})},[t]),exit:(0,Q.useCallback)(()=>{var e;null==(e=eU.YEY)||e.exitSearchMode(eU.dNx.NONE)},[]),setNavigateNearestOnce:function(){o.current=!0},mode:l,isLoading:f,allInstancesExpanded:p,missingResultsOnSomePages:b}}function hb(){let{scope:e,filters:t,mode:n}=(0,$.d4)(e=>e.canvasSearch),a=(0,ae.p8)("currentPage"),r=(0,t5.am)(),l=(0,mD.lg)(),i=(0,$.d4)(e=>e.mirror.appModel.pagesList);return(0,Q.useCallback)(async(o,s=!0,c)=>{let d=c??a;if(!o||(0,lA.jN)(o)){let{nav:e}=eU.YEY.setSearchResultsAndGetViewportSettings([],d,"",{categories:[],mode:n});return{nav:e,resultsByPage:{}}}let u=!!t[hm.kM.MatchCase],m=!!t[hm.kM.WholeWords],{resultsByPage:p,metrics:_}=await hu.H1.search(o,{searchLayerNames:"design"===l,matchCase:u,wholeWords:m}),f=(0,hf.kH)(t),h=e===eU.Lov.ACTIVE_PAGE?p[d]?[{pageId:d,results:p[d]}]:[]:Object.keys(p).map(e=>({pageId:e,results:p[e]}));if(e===eU.Lov.ACTIVE_PAGE&&p[ad.Xy]){let e=p[ad.Xy];e.length&&h.push({pageId:ad.Xy,results:e})}if(1===o.length){let e=0,t=[],n=h.findIndex(e=>e.pageId===ad.Xy);for(let a of(n>-1&&t.push(h[n]),i)){let n=h.findIndex(e=>e.pageId===a.nodeId);if(-1===n)continue;let r=h[n];if(r.results.length>1e3-e){t.push({results:r.results.slice(0,1e3-e),pageId:r.pageId});break}e+=r.results.length,t.push(r)}h=t}let{nav:g,...E}=eU.YEY.setSearchResultsAndGetViewportSettings(h,d,o,{categories:f,mode:n}),v=f.map(e=>hm.kM[e]);return r("canvas_search_results",{..._,...E,nodeTypes:v,searchScope:eU.Lov[e],matchCase:u,wholeWords:m}),{nav:g,resultsByPage:p}},[a,l,t,n,i,e,r])}function hC(e){return!e.clientX&&!e.clientY}function hw(){let{query:e,scope:t}=(0,$.d4)(e=>e.canvasSearch),n=hb();return(0,Q.useCallback)(a=>{let r=eU.YEY.getActiveResult(),l=r.type===eU.Z6A.CANVAS,i=a||l&&r.guid;return!!i&&(tN.qo.instance.setCurrentPageAsync(i).then(()=>{t===eU.Lov.ACTIVE_PAGE?n(e,!1,i):eU.YEY.setActiveResultAndGetViewportSettings(i,0)}),!0)},[e,t,n])}var hT=n(694092),hx=n(969893);function hN({query:e,value:t,onChange:n,onFocus:a,recordingKey:r,hasMultipleSelections:l}){let i=(0,$.wA)(),o=(0,hT.aq)(),s=(0,pn.Z)("canvas_search_navigate"),c=(0,$.d4)(e=>e.canvasSearch.scope),{total:d}=(0,ef.md)(sz.Fk),u="whiteboard"===(0,mD.lg)(),[m,p]=(0,Q.useState)(!1),_=e.toLocaleLowerCase()!==t.toLocaleLowerCase(),f=(0,t5.am)(),h=!e||!d,g=cU.nc.user("canvas-search-replace",n=>{if(l){let{numReplaced:a,timeMs:r}=eU.YEY.replaceInMultipleResults(t,{preserveCase:_},eU.rpt.ONLY_ACTIVE);f("canvas_search_multi_replace",{source:n,timeMs:r,numReplaced:a,replacementIncludesOriginal:t.toLocaleLowerCase().includes(e.toLocaleLowerCase())}),p(!0);return}let a=eU.YEY.replaceInActiveResult(t,{preserveCase:_});p(!0),f("canvas_search_replace",{source:n,replacementIncludesOriginal:t.toLocaleLowerCase().includes(e.toLocaleLowerCase())}),s(a,{delay:300,additionalTrackEventParams:{searchScope:eU.Lov[c]}})});return Q.createElement("div",null,Q.createElement("div",{className:"canvas_search--replaceInput--TmEDS canvas_search--searchBarRow--9aFwa canvas_search--input--aPqLZ"},!u&&Q.createElement("div",{className:mq},Q.createElement(eM.B,{svg:hx.A})),Q.createElement(h_,{value:t,placeholder:(0,eO.t)("canvas_search.replace_placeholder"),recordingKey:nh.Pt(r,"replace_input"),onChange:n,onFocus:e=>{null==a||a(e,!o())},onKeyDown:e=>{e.keyCode===es.Uz.ENTER?(g("enter"),e.stopPropagation()):m&&(0,es.Fo)(e)&&(0,pf.jr)(e,pf.W0.YES)&&e.stopPropagation()},shiftEnterInsertsNewline:!0})),Q.createElement("div",{className:"canvas_search--replaceButtons--1sbwP"},Q.createElement(lP.$,{disabled:h,onClick:()=>g("button"),recordingKey:nh.Pt(r,"replace_one")},Q.createElement(eO.Tx,{id:"canvas_search.replace_one"})),Q.createElement(lP.$,{disabled:h,onClick:cU.nc.user("canvas-search-replace-all",()=>{tW.sn.start("canvas_search_replace_all");let{numReplaced:n,timeMs:a}=eU.YEY.replaceInMultipleResults(t,{preserveCase:_},eU.rpt.ALL);n>0&&(p(!0),i(eL.F.enqueue({type:"canvas-search-replace-all",message:(0,eO.t)(u?"canvas_search.replace_all_message_figjam":c===eU.Lov.ACTIVE_PAGE?"canvas_search.replace_all_message":"canvas_search.replace_all_message_all_pages",{count:n})}))),f("canvas_search_replace_all",{source:"button",timeMs:a,numReplaced:n,replacementIncludesOriginal:t.toLocaleLowerCase().includes(e.toLocaleLowerCase())}),tW.sn.tryStop("canvas_search_replace_all")}),recordingKey:nh.Pt(r,"replace_all")},Q.createElement(eO.Tx,{id:"canvas_search.replace_all"}))))}var hk=n(585219),hS=n(77499),hI=n(170379),hA=n(638496),hP=n(931493),hO=n(970823),hL=n(785496);function hM({lean:e,minWidth:t,recordingKey:n}){let a=(0,$.wA)(),r=(0,aX.B)("CANVAS_SEARCH_FILTER_DROPDOWN"),l=Q.useRef(null),i=(0,ae.p8)("isReadOnly"),o=(0,ef.md)(sz.yo),s=(0,$.d4)(e=>e.canvasSearch.filters),c=(0,$.d4)(e=>e.canvasSearch.mode),d="whiteboard"===(0,mD.lg)(),u=Q.useMemo(()=>{let e=i?[]:[Q.createElement(_O.W.CheckableTwoColumnOption,{key:"find",primaryText:(0,eO.t)("canvas_search.search"),checked:c===eU.EW4.FIND,onClick:()=>{a(ha.sV(eU.EW4.FIND)),r.hide()},recordingKey:nh.Pt(n,"settings.find")}),Q.createElement(_O.W.CheckableTwoColumnOption,{key:"replace",primaryText:(0,eO.t)("canvas_search.replace"),checked:c===eU.EW4.REPLACE,onClick:()=>{a(ha.sV(eU.EW4.REPLACE)),r.hide()},recordingKey:nh.Pt(n,"settings","replace")}),Q.createElement(_O.W.Separator,{key:"sep1"})],t=(t,l=!1)=>{let i=!!s[t];e.push(Q.createElement(hD,{key:t,option:t,checked:i,counts:o,onClick:e=>{l||e.shiftKey||e.altKey||ec.Ay.mac&&e.metaKey?(a(ha.DI(t)),l&&r.hide()):(a(ha.zx(t)),r.hide())},recordingKey:n}))};if(c===eU.EW4.FIND&&!d){let l=!hm.b4.some(e=>!!s[e]),i=Object.values(o).reduce((e,t)=>e+t,0);e.push(Q.createElement(hR,{checked:l,icon:hI.A,label:(0,eO.t)("canvas_search.filter.all"),count:i,onClick:()=>{a(ha.dY()),r.hide()},recordingKey:nh.Pt(n,"settings","All")})),hm.b4.forEach(e=>t(e)),e.push(Q.createElement(_O.W.Separator,{key:"sep2"}))}return hm._V.forEach(e=>t(e,!0)),e},[a,r,s,d,i,c,o,n]);return(0,Q.useEffect)(()=>{i&&c===eU.EW4.REPLACE&&a(ha.sV(eU.EW4.FIND))},[a,i,c]),Q.createElement("div",{role:"none",onClick:hk.dG,onMouseUp:hk.dG},Q.createElement("div",{ref:l},Q.createElement(aJ.YW,{svg:a$.A,selected:r.showing,"data-tooltip-type":nO.Ib.TEXT,"data-tooltip":(0,eO.t)("canvas_search.settings"),onClick:e=>r.showing&&e.stopPropagation(),onMouseDown:r.toggle,recordingKey:nh.Pt(n,"settings")})),r.showing&&l.current&&Q.createElement(ho.Jz,{showPoint:!0,targetRect:l.current.getBoundingClientRect(),options:u,hideDropdown:r.hide,autofocusPrevElementOnSelect:!0,autofocusPrevElementOnEsc:!0,autofocusPrevElementOnTab:!1,lean:e,minWidth:t,recordingKey:nh.Pt(n,"settings"),propagateCloseClick:!0}))}function hD(e){let t=e.counts[e.option],n=function(e){switch(e){case hm.kM.Text:return e1.A;case hm.kM.FrameOrGroup:return hS.A;case hm.kM.Component:return e$.A;case hm.kM.Instance:return eX.A;case hm.kM.Image:return hO.A;case hm.kM.Shape:return hA.A;case hm.kM.Other:return hP.A;case hm.kM.MatchCase:case hm.kM.WholeWords:return null}}(e.option),a=hU(e.option);return Q.createElement(hR,{checked:e.checked,icon:n,label:a,count:t,onClick:e.onClick,buttonRef:e.buttonRef,recordingKey:nh.Pt(e,"settings",hm.kM[e.option])})}function hR({checked:e,icon:t,label:n,count:a,onClick:r,buttonRef:l,recordingKey:i}){return Q.createElement(_O.W.CheckableOption,{checked:e,onClick:r,recordingKey:i,buttonRef:l},Q.createElement("div",{className:"canvas_search_settings--optionRow--KS01b"},t&&Q.createElement(eM.B,{className:"canvas_search_settings--optionIcon---0QYX",svg:t}),Q.createElement("span",{className:"canvas_search_settings--optionLabel--Ygpmi"},n),!!a&&Q.createElement("span",{className:"canvas_search_settings--optionCount--BzzTP"},a)))}function hF({short:e,mode:t,recordingKey:n}){let a=(0,$.wA)(),r=(0,$.d4)(e=>e.canvasSearch.filters),l=t===eU.EW4.FIND?hf.D4:hf.IM,i=(0,n_.RP)(l,e=>r[e]?Q.createElement(hB,{key:e,option:e,onClose:()=>{a(ha.DI(e))},recordingKey:n}):null);return 0===i.length?null:Q.createElement("div",{className:ea()("canvas_search_settings--filterPills--tbdih",{"canvas_search_settings--filterPillsShort--GX-Rn":e})},i)}function hB({option:e,onClose:t,recordingKey:n}){return Q.createElement("div",{className:"canvas_search_settings--filterPill--hjIaF"},hU(e),Q.createElement(aJ.K0,{className:"canvas_search_settings--pillRemove--Om1tg",svg:hL.A,onClick:t,isBackgroundTransparent:!0,"data-tooltip-type":nO.Ib.TEXT,"data-tooltip":(0,eO.t)("canvas_search.filter.remove"),tooltipForScreenReadersOnly:!0,recordingKey:nh.Pt(n,hm.kM[e],"remove")}))}function hU(e){switch(e){case hm.kM.Text:return(0,eO.t)("canvas_search.filter.text");case hm.kM.FrameOrGroup:return(0,eO.t)("canvas_search.filter.frame_or_group");case hm.kM.Component:return(0,eO.t)("canvas_search.filter.component");case hm.kM.Instance:return(0,eO.t)("canvas_search.filter.instance");case hm.kM.Image:return(0,eO.t)("canvas_search.filter.image");case hm.kM.Shape:return(0,eO.t)("canvas_search.filter.shape");case hm.kM.Other:return(0,eO.t)("canvas_search.filter.other");case hm.kM.MatchCase:return(0,eO.t)("canvas_search.filter.match_case");case hm.kM.WholeWords:return(0,eO.t)("canvas_search.filter.whole_words")}}var hH=n(247245),hV=n(761070),hG=n(593701),hK=n(289298),hW=n(630834),hz=((h=hz||{})[h.NONE=0]="NONE",h[h.SINGLE=1]="SINGLE",h[h.MULTI=2]="MULTI",h),hj=((g=hj||{})[g.NONE=0]="NONE",g[g.TOP=1]="TOP",g[g.MIDDLE=2]="MIDDLE",g[g.BOTTOM=3]="BOTTOM",g[g.ALL=4]="ALL",g);let hY=(0,nf.eU)(!1),hZ=Q.memo(function(e){let{onFocus:t}=e;return Q.createElement("div",{className:"canvas_search--searchSidebarMinimal--I1hwg canvas_search--searchSidebarContainer--1tcxd"},Q.createElement("div",{className:mJ},Q.createElement("div",{className:"canvas_search--searchBarRowMinimal--dEN6B canvas_search--searchBarRow--9aFwa"},Q.createElement(m8,{onClick:e.onFocus}),Q.createElement(ht.L,{className:mX,onFocus:t,placeholder:(0,eO.t)("canvas_search.search_placeholder")}))))}),hX=Q.memo(function({showFilter:e}){let{query:t,resultsOnOtherPages:n,next:a,exit:r,setNavigateNearestOnce:l,search:i,showSearch:o,mode:s,isLoading:c,allInstancesExpanded:d,missingResultsOnSomePages:u}=hy(),[m,p]=(0,Q.useState)(""),{focusedByButtons:_,inputRef:f}=hv(),h=(0,Q.useRef)(null),g=(0,pn.Z)("canvas_search_navigate"),E=(0,ef.md)(sz.Wy),v=(0,ef.md)(sz.ml),y=(0,Q.useContext)(hh),b=(0,ef.md)(hY),[C,w]=(0,Q.useState)(null),[T,x]=(0,Q.useState)(0),[N,k]=(0,Q.useState)(!1);(0,Q.useLayoutEffect)(()=>{if(y){if(v.size>1||E.size>1){k(!0);return}for(let e of E.values())e.size>1&&k(!0)}},[E,y,v]);let S=(e,t)=>{k(!1),a(e,t)},I=function(e,t,n){if(!n)return!1;if(t.size>1||e.size>1)return!0;for(let t of e.values())return t.size>1;return!1}(E,v,y),A=function(e,t,n,a,r){let l=h4(e,n,e=>{var n;let a=(e.keyCode===es.Uz.D||e.keyCode===es.Uz.F)&&(0,es.Fo)(e)&&e.shiftKey;h6(e)&&!a&&(null==(n=t.current)||n.focus())},r);return(0,Q.useCallback)(e=>{var r;let i=h7(e);switch(e.keyCode){case es.Uz.RIGHT_ARROW:case es.Uz.LEFT_ARROW:(0,es.Te)(e)||l(e);break;case es.Uz.C:case es.Uz.X:(0,es.Te)(e)&&window.getSelection&&!window.getSelection().toString()&&(lT.Y5.triggerAction(e.keyCode===es.Uz.C?"copy":"cut"),e.preventDefault(),e.stopPropagation(),e.keyCode===es.Uz.X&&(null==(r=t.current)||r.focus()));break;case es.Uz.V:case es.Uz.Z:break;default:l(e)}n||i===ad.AD||a(eU.YEY.setActiveResultAndGetViewportSettings(i,0),{delay:300})},[n,l,t,a])}(S,h,I,g,x),P=h3(x);hE(f,a,_);let O="ui3"===(0,et.DP)().version;if(!o)return null;let L=Q.createElement(Q.Fragment,null,Q.createElement("div",{className:ea()(mq,{[m$]:O&&""===t})},Q.createElement(nd.U,{svg:m7.A},Q.createElement(mY.h,null))),Q.createElement(hg,{onChange:e=>{k(!1),i(e)},query:t,focusedByButtons:_,onKeyDown:A,onKeyUp:P,innerRef:f,onPasteCapture:e=>{var t;(0,hl.gk)(e)&&(lT.Y5.triggerActionInUserEditScope("paste"),e.preventDefault(),null==(t=h.current)||t.focus())},editorType:hi._Y.DESIGN}));return Q.createElement(hn.i,{fullHeight:!0},Q.createElement("div",{className:"canvas_search--searchSidebarContainer--1tcxd",onBlurCapture:e=>{e.relatedTarget&&!e.currentTarget.contains(e.relatedTarget)&&(eU.YEY.setOverlayVisible(!1),l(),x(0))}},Q.createElement("div",{className:mJ},Q.createElement("div",{className:mQ},O?Q.createElement("div",{className:"canvas_search--searchIconAndInput--3tdWb"},L):L,e&&Q.createElement(hM,{lean:"right",recordingKey:"figma_design_search"}),Q.createElement(aJ.K0,{svg:hW.default,onClick:r,"data-tooltip-type":nO.Ib.TEXT,"data-tooltip":(0,eO.t)("canvas_search.close"),tooltipForScreenReadersOnly:!0,recordingKey:"figma_design_search.close"})),Q.createElement(hF,{mode:s,short:s===eU.EW4.REPLACE,recordingKey:"figma_design_search.filterPills"}),s===eU.EW4.REPLACE&&Q.createElement(hN,{query:t,value:m,onChange:p,onFocus:(e,n)=>{var a;!t&&n&&(null==(a=f.current)||a.focus())},hasMultipleSelections:I,recordingKey:"figma_design_search"})),c||b?Q.createElement("div",{className:ea()(m3,m6)},Q.createElement(t2.dW,{size:"medium",testId:"canvas-search-loading-spinner"})):t&&!(0,lA.jN)(t)&&Q.createElement(hq,{onNext:S,navigate:g,replacement:s===eU.EW4.REPLACE?m:void 0,resultsOnOtherPages:n,allInstancesExpanded:d,resultInputHandlerRef:h,hoveredResult:C,hasMultipleSelections:I,isInMultiselectMode:N,hoverSelectMode:T,missingResultsOnSomePages:u,setIsInMultiselectMode:k,setHoverSelectMode:x,setHoveredResult:w})))});function hq({onNext:e,navigate:t,replacement:n,resultsOnOtherPages:a,resultInputHandlerRef:r,hoveredResult:l,hasMultipleSelections:i,isInMultiselectMode:o,missingResultsOnSomePages:s,hoverSelectMode:c,setIsInMultiselectMode:d,setHoverSelectMode:u,setHoveredResult:m,allInstancesExpanded:p}){let _=(0,$.wA)(),f=function(){let e=(0,eG.J2)(eU.Ez5.uiState().showCanvasSearch),t=eU.YEY.hasDirtyPrimaryInstances(),n=(0,ef.md)(sz.Fk),a=(0,Q.useRef)([]),r=t&&a.current.length,l=(0,Q.useMemo)(()=>{if(!e||!n.total||r)return[];let t=eU.YEY.getSearchResults(),l=[];return t.forEach(e=>{let t=e.results.map(e=>{let t=tN.qo.instance.get(e.guid);return t?{...e,textContent:t.textContent,name:t.name}:e});l.push({results:t,pageId:e.pageId})}),a.current=l,l},[n,e,r]);return r?a.current:l}(),h=hw(),g=(0,ae.p8)("currentPage"),E=(0,Q.useRef)(null),v=(0,$.d4)(e=>e.canvasSearch.scope),y=eU.YEY.hasDirtyPrimaryInstances(),b=(0,ef.md)(sz.Fk),C=(0,ef.md)(sz.Ch),w=(0,ef.md)(sz.Wy),T=(0,ef.md)(sz.ml),x=(0,ef.md)(sz.hw),N=(0,Q.useContext)(hh),k=!o,S=null==n,I=function(){let e=(0,pn.Z)("canvas_search_navigate"),t=(0,$.d4)(e=>e.canvasSearch.scope);return(0,Q.useCallback)((n,a)=>{e(eU.YEY.setActiveResultAndGetViewportSettings(n,a),{additionalTrackEventParams:{searchScope:eU.Lov[t]}})},[e,t])}(),A=function(e,t){let n=(0,pn.Z)("canvas_search_navigate"),a=(0,$.d4)(e=>e.canvasSearch.scope),r=(0,t5.am)(),l=(0,Q.useContext)(hh),i=(0,Q.useCallback)((l,i,o)=>{let{nav:s,numNewNodes:c,numNewTextMatches:d}=eU.YEY.addActiveResultAndGetViewportSettings(l,i,o);e&&r("canvas_search_enter_multi_select",{numberOfNodes:c,numberOfTextMatches:d,source:"cmd/ctrl+click",mode:t?"find":"replace"}),n(s,{additionalTrackEventParams:{searchScope:eU.Lov[a]}})},[t,n,a,r,e]);return l?i:ey.lQ}(k,S),P=function(e,t){let n=(0,pn.Z)("canvas_search_navigate"),a=(0,$.d4)(e=>e.canvasSearch.scope),r=(0,t5.am)(),l=(0,Q.useContext)(hh),i=(0,Q.useCallback)(l=>{let{nav:i,numNewNodes:o,numNewTextMatches:s}=eU.YEY.addActiveResultsAndGetViewportSettings(l);e&&r("canvas_search_enter_multi_select",{numberOfNodes:o,numberOfTextMatches:s,source:"shift+click",mode:t?"find":"replace"}),n(i,{additionalTrackEventParams:{searchScope:eU.Lov[a]}})},[t,n,a,r,e]);return l?i:ey.lQ}(k,S),O=function(){let e=(0,pn.Z)("canvas_search_navigate"),t=(0,$.d4)(e=>e.canvasSearch.scope),n=(0,Q.useContext)(hh),a=(0,Q.useCallback)((n,a,r)=>{e(eU.YEY.removeActiveResultAndGetViewportSettings(n,a,r),{additionalTrackEventParams:{searchScope:eU.Lov[t]}})},[e,t]);return n?a:ey.lQ}(),[L,M]=function(...e){let[t,n]=(0,Q.useState)(()=>e.reduce((e,t)=>(e[t]=!0,e),{}));return[t,(0,Q.useCallback)((e,t=!0)=>{n(n=>n[e]!==t?{...n,[e]:t}:n)},[])]}(ad.Xy,g),D=(0,Q.useRef)({}),R=(0,Q.useMemo)(()=>{let e=[],t=f.find(e=>e.pageId===ad.Xy),n=v===eU.Lov.ALL_PAGES||!!t,a=f.find(e=>e.pageId===g),r=f;v===eU.Lov.ACTIVE_PAGE&&(r=[],t&&r.push(t),a&&r.push(a));let l=0;for(let{pageId:t,results:a}of(D.current={},r)){if(0===a.length)continue;let r=!!L[t];if(n&&(e.push({type:"header",data:{pageId:t,open:r,numResults:a.reduce((e,t)=>e+=t.textMatches.length,0)}}),++l),n&&!r)continue;D.current[t]=l;let i=0;for(let n of a){let{textMatches:a,...r}=n;a.forEach((n,a)=>{e.push({type:"result",data:{...r,matchIndex:a,textMatch:n,index:i,pageId:t}}),++i,++l})}}return e},[g,L,v,f]);(0,Q.useEffect)(()=>{null!=C&&M(C.pageId)},[C,M]);let F=(0,f8.z)({size:R.length,parentRef:E,overscan:10}),B=e=>{if(null==C||null==C.index)return[];let t=D.current[C.pageId];if(null==t)return[];let n=t+C.index;if(n===e)return[];let a=[],r=Math.min(n,e),l=Math.max(n,e);if("header"===R[e].type)return a;for(let e=r;e<=l;e++)"result"===R[e].type&&a.push(R[e].data);return a},U=(0,Q.useCallback)(e=>!!N&&"header"!==e.type&&(!!o||0!==c)&&(e.data.textMatch.matchType===eU.Ifi.TEXT_MATCH&&T.has(e.data.resultGuid)&&!w.has(e.data.resultGuid)||x.has(e.data.resultGuid)),[w,N,T,c,x,o]),H=(0,Q.useCallback)(e=>{var t;return"header"!==e.type&&(N?e.data.textMatch.matchType===eU.Ifi.PAGE_MATCH?e.data.index===(null==C?void 0:C.index)&&e.data.pageId===(null==C?void 0:C.pageId):e.data.textMatch.matchType===eU.Ifi.LAYER_MATCH?T.has(e.data.resultGuid)&&!w.get(e.data.resultGuid):(null==(t=w.get(e.data.resultGuid))?void 0:t.has(e.data.matchIndex))??!1:e.data.index===(null==C?void 0:C.index)&&e.data.pageId===(null==C?void 0:C.pageId))},[null==C?void 0:C.index,null==C?void 0:C.pageId,w,N,T]),V=(0,Q.useCallback)((e,t,n)=>{let a=e+n,r=t+n,l=e=>"result"===e.type&&(H(e)||U(e));for(;a>0&&a<=R.length&&l(R[a-1]);)a-=1;for(;r<R.length&&l(R[r]);)r+=1;return[a-n,r-n]},[U,H,R]),G=(0,Q.useCallback)((e,t)=>{if(e+t>=R.length)return!1;let n=R[e+t];return!H(n)&&!U(n)},[U,H,R]),K=(0,Q.useCallback)((e,t,n)=>{let a=!1;for(let r=e;r<=t&&!(r+n>=R.length);r+=1){let e=R[r+n];if(!H(e)&&!U(e)){a=!0;break}}return a},[U,H,R]),[W,z]=(0,Q.useMemo)(()=>{let e=(null==l?void 0:l.nodeGuid)??ad.AD,t=(null==C?void 0:C.pageId)!=null?D.current[C.pageId]:null;if(N&&0!==c&&l&&e!==ad.AD&&l.pageId===(null==C?void 0:C.pageId)&&null!=t){let n=l.index,a=l.matchIndex;if((1===c||(null==C?void 0:C.index)==null)&&G(n,t))return[n,eU.YEY.getSingleHoveredSelectionEndIndex(e,a)];if(2===c&&(null==C?void 0:C.index)!=null&&C.index!==l.index){let r=n>C.index?C.index:n;return K(r,n>C.index?n:C.index,t)?V(r,eU.YEY.getMultiHoveredSelectionEndIndex(e,a),t):[null,null]}}return[null,null]},[null==C?void 0:C.index,null==C?void 0:C.pageId,N,V,c,l,K,G]),j=(0,Q.useCallback)(e=>!N||null==W||null==z||e<W||e>=z?0:e===W&&e===z-1?4:e===W?1:e===z-1?3:2,[N,W,z]),Y=(0,pi.$)(C);(0,Q.useEffect)(()=>{if(o||0!==c||null==C||null==C.index||0===R.length||!Y)return;let e=D.current[C.pageId];if(null==e)return;let t=e+C.index,n=t>=F.virtualItems[0].index&&t<=F.virtualItems[F.virtualItems.length-1].index,a=!1;if(n){let e=F.virtualItems.find(e=>e.index===t);if(e){let{start:t,size:n}=e;a=function(e,t){if(!t)return!0;let n=t.scrollTop,a=n+t.clientHeight;return e.top>=n&&e.bottom<=a}({top:t,bottom:t+n},E.current)}}a||y||F.scrollToIndex(t,{align:"center"})},[C,Y,r,o,R,y,F,c]);let Z=(e,t,n,a)=>{let r=()=>{a?O(t.resultGuid,t.matchIndex,t.textMatch.matchType):A(t.resultGuid,t.matchIndex,t.textMatch.matchType)};t.pageId===ad.Xy?(h(t.guid),M(t.guid),d(!1)):N&&t.pageId===(null==C?void 0:C.pageId)?e.shiftKey&&(null==C?void 0:C.index)==null?(a||r(),d(!0)):e.shiftKey?((()=>{let e=B(n),t=[];e.forEach(e=>{let n=t.length?t[t.length-1]:void 0;(null==n?void 0:n.nodeId)===e.resultGuid&&(null==n?void 0:n.searchResultType)===eU.Ifi.TEXT_MATCH?n.matchIndices.push(e.matchIndex):t.push({nodeId:e.resultGuid,matchIndices:[e.matchIndex],searchResultType:e.textMatch.matchType})}),P(t)})(),d(!0)):(0,es.Fo)(e)&&t.textMatch.matchType!==eU.Ifi.PAGE_MATCH?(r(),d(!0)):(I(t.resultGuid,t.matchIndex),d(!1)):(I(t.resultGuid,t.matchIndex),d(!1))},X=function(e,t,n,a,r,l,i){let o=function(e,t){let n=(0,pn.Z)("canvas_search_navigate"),a=(0,$.d4)(e=>e.canvasSearch.scope),r=(0,t5.am)(),l=(0,Q.useContext)(hh),i=(0,Q.useCallback)(()=>{let{nav:l,numNewNodes:i,numNewTextMatches:o}=eU.YEY.setAllResultsAsActiveAndGetViewportSettings();e&&r("canvas_search_enter_multi_select",{numberOfNodes:i,numberOfTextMatches:o,source:"cmd/ctrl+A",mode:t?"find":"replace"}),n(l,{additionalTrackEventParams:{searchScope:eU.Lov[a]}})},[t,n,a,r,e]);return l?i:ey.lQ}(n,a),s=(0,Q.useContext)(hh),c=h4(e,r,h6,l);return(0,Q.useCallback)(e=>{let n=h7(e);switch(e.keyCode){case es.Uz.UP_ARROW:case es.Uz.DOWN_ARROW:case es.Uz.RIGHT_ARROW:case es.Uz.LEFT_ARROW:r?(function(){var e;let t=null==(e=document.getElementById("fullscreen-root"))?void 0:e.getElementsByClassName("focus-target");if(null!=t&&0!==t.length){for(let e of t)if(e.hasAttribute("readonly")&&"application"===e.getAttribute("role")){null==e||e.focus();break}}}(),h6(e,!0)):c(e);break;case es.Uz.A:if(s&&(0,es.Te)(e)){o(),i(!0),e.stopPropagation(),e.preventDefault();break}h6(e);break;case es.Uz.C:(0,es.Te)(e)?(lT.Y5.triggerActionInUserEditScope("copy"),e.stopPropagation()):h6(e);break;case es.Uz.V:(0,es.Te)(e)?(lT.Y5.triggerActionInUserEditScope("paste"),e.stopPropagation()):h6(e);break;case es.Uz.X:(0,es.Te)(e)?(lT.Y5.triggerActionInUserEditScope("cut"),e.stopPropagation()):h6(e);break;case es.Uz.DELETE:case es.Uz.BACKSPACE:h6(e,!0);break;default:c(e)}r||n===ad.AD||t(eU.YEY.setActiveResultAndGetViewportSettings(n,0),{delay:300})},[r,s,c,o,i,t])}(e,t,k,S,i,u,d),q=h3(u);return Q.createElement("div",{className:"canvas_search--resultsContainer--b0olz"},Q.createElement("div",{className:"canvas_search--resultInfoHeader--GM1gm"},Q.createElement(hQ,{totalOnActivePage:b.total,resultsOnOtherPages:a,allInstancesExpanded:p}),0!==R.length&&Q.createElement(Q.Fragment,null,Q.createElement(aJ.K0,{svg:pr.A,onClick:t=>{e(hf.OP.PREV,"button")},"data-tooltip-type":nO.Ib.TEXT,"data-tooltip":(0,eO.t)("canvas_search.previous"),"data-tooltip-shortcut-key":"canvas-search-prev",recordingKey:"figma_design_search.previous",disabled:b.total<=1}),Q.createElement(aJ.K0,{svg:pa.A,onClick:t=>{e(hf.OP.NEXT,"button")},"data-tooltip-type":nO.Ib.TEXT,"data-tooltip":(0,eO.t)("canvas_search.next"),"data-tooltip-shortcut-key":"canvas-search-next",recordingKey:"figma_design_search.next",disabled:b.total<=1}))),Q.createElement(ab.P,{className:"canvas_search--resultsList--Hciv7",scrollContainerRef:E},Q.createElement(ns.D8,{style:{height:F.totalSize,position:"relative"},tabIndex:0,role:"listbox",recordingKey:"figma_design_search.results_list",onKeyDown:X,onKeyUp:q,forwardedRef:r},F.virtualItems.map(e=>{let t=R[e.index];if(!t)return null;let a=H(t),s="result"===t.type&&t.data.pageId===(null==C?void 0:C.pageId)?j(t.data.index):0;return Q.createElement("div",{key:"header"===t.type?t.data.pageId:`${t.data.pageId}#${t.data.index}`,ref:e.measureRef,className:ea()({"canvas_search--hoverSelectedTop--mA-fk canvas_search--_hoverSelectedBase--JOTSs":1===s,"canvas_search--hoverSelectedMiddle--OBw7k canvas_search--_hoverSelectedBase--JOTSs":2===s,"canvas_search--hoverSelectedBottom--zH7Va canvas_search--_hoverSelectedBase--JOTSs":3===s,[m2]:(1===c||(null==C?void 0:C.index)==null)&&(null==l?void 0:l.isPurple)}),style:{position:"absolute",top:0,left:0,width:"100%",transform:`translateY(${e.start}px)`}},"header"===t.type?Q.createElement(h$,{...t.data,setOpen:e=>M(t.data.pageId,e)}):Q.createElement(h0,{activePageId:null==C?void 0:C.pageId,onSelect:n=>Z(n,t.data,e.index,a),onDoubleClick:()=>{eU.YEY.exitSearchMode(eU.dNx.SELECT_ACTIVE)},resultInputHandlerRef:r,result:t.data,replacement:n,selected:a,indirectlySelected:U(t),singletonHoverSelected:4===s,isInMultiselectMode:o,isInHoveredSelectMode:0!==c&&!!l,hasMultipleSelections:i,setHoveredResult:m}))})),y&&Q.createElement("div",{className:m3},Q.createElement(t2.dW,{size:"medium"})),a&&v===eU.Lov.ACTIVE_PAGE&&Q.createElement(ns.GG,{recordingKey:"figma_design_search.other_pages_button",className:ea()("canvas_search--otherResults--G94fM",m5),onClick:()=>{_(ha.V2(eU.Lov.ALL_PAGES))}},Q.createElement(eO.Tx,{id:"canvas_search.results_other_pages"})),s&&v===eU.Lov.ALL_PAGES&&Q.createElement("div",{className:"canvas_search--resultsFooterText--rPxEh"},Q.createElement(eO.Tx,{id:"canvas_search.results_unavailable_offline"}))))}let hJ={[eU.Lov.ACTIVE_PAGE]:()=>Q.createElement(eO.Tx,{id:"canvas_search.this_page"}),[eU.Lov.ALL_PAGES]:()=>Q.createElement(eO.Tx,{id:"canvas_search.all_pages"})};function hQ({totalOnActivePage:e,resultsOnOtherPages:t,allInstancesExpanded:n}){let a=(0,$.wA)(),r=(0,aX.B)("CANVAS_SEARCH_PAGE_SCOPE_DROPDOWN"),l=(0,Q.useRef)(null),i=(0,$.d4)(e=>e.canvasSearch.scope),o=(0,$.d4)(e=>e.mirror.appModel.pagesList),s=(0,e_.Xr)(hY),c="";c=0===e?(0,cG.lH)(o)||!n?(0,eO.t)("canvas_search.no_results_on_page"):t?(0,eO.t)("canvas_search.no_results"):(0,eO.t)("canvas_search.no_results_in_file"):(0,eO.t)("canvas_search.results_count",{total:e});let d=e>0||t||(0,cG.lH)(o)||!n;return Q.createElement("div",{className:"canvas_search--resultInfo--PKQiZ"},Q.createElement("span",{"data-testid":"canvas-search-info",className:"canvas_search--resultsText--ubMAu"},c),d&&Q.createElement(Q.Fragment,null,Q.createElement("span",{className:"canvas_search--dotDivider--zvIFp"},"\xb7"),Q.createElement("div",{role:"none",onClick:e=>e.stopPropagation()},Q.createElement(ns.GG,{forwardedRef:l,recordingKey:"figma_design_search_page_scope_dropdown",className:"canvas_search--searchScopeButton--Grrvz","data-testid":"figma-design-search-scope-dropdown",onClick:e=>r.showing&&e.stopPropagation(),onMouseDown:()=>r.toggle(),onKeyDown:e=>{(e.keyCode===es.Uz.ENTER||e.keyCode===es.Uz.SPACE)&&(e.preventDefault(),r.toggle())}},Q.createElement(Q.Fragment,null,hJ[i](),Q.createElement(eM.B,{svg:hK.A}))),l.current&&r.showing&&Q.createElement(ho.Jz,{showPoint:!1,maxWidth:160,minWidth:160,className:"canvas_search--pageScopeDropdown--K5y-7",autofocusPrevElementOnSelect:!0,autofocusPrevElementOnEsc:!0,lean:"right",leanPadding:0,targetRect:l.current.getBoundingClientRect(),hideDropdown:r.hide,recordingKey:"figma_design_search_page_scope",propagateCloseClick:!0,options:[eU.Lov.ACTIVE_PAGE,eU.Lov.ALL_PAGES].map(e=>Q.createElement(_O.W.CheckableOption,{recordingKey:`figma_design_search_page_scope.${e}`,key:e,checked:e===i,onClick:()=>{r.hide(),e===eU.Lov.ALL_PAGES&&((0,cG.lH)(o)||!n)?(s(!0),requestAnimationFrame(()=>{a(ha.V2(e)),s(!1)})):a(ha.V2(e))}},Q.createElement("div",{className:"canvas_search--dropdownOption--dQRr3"},hJ[e]())))}))))}function h$({pageId:e,open:t,setOpen:n,numResults:a}){let r=(0,ae.eY)().get(e),l=e===ad.Xy?(0,eO.t)("fullscreen.canvas_search.pages"):r.name;return Q.createElement(ns.GG,{className:"canvas_search--collapsableHeaderToggle--kHXh8",onClick:()=>n(!t)},Q.createElement(eM.B,{className:"canvas_search--expandIcon--6eieV",svg:t?t$.A:u$.A}),Q.createElement("span",{className:"canvas_search--collapsableHeaderName---qij5"},l),Q.createElement("span",{className:"canvas_search--collapsableHeaderCount---NL3l"},a))}function h0({result:e,replacement:t,activePageId:n,resultInputHandlerRef:a,selected:r,indirectlySelected:l,singletonHoverSelected:i,onSelect:o,onDoubleClick:s,isInMultiselectMode:c,isInHoveredSelectMode:d,hasMultipleSelections:u,setHoveredResult:m}){var p;let _=(0,ae.eY)(),f=(0,ae.p8)("currentPage"),h=e.textMatch.matchType===eU.Ifi.TEXT_MATCH,g=null!=t&&h&&((null==(p=_.get(e.guid))?void 0:p.hasMissingFont)||!1),E=!(0,f9.yZ)(),v=(0,$.d4)(e=>e.mirror.appModel.pagesList),y=E&&e.textMatch.matchType===eU.Ifi.PAGE_MATCH&&eU.h3O.isIncrementalSession()&&(0,cG.Fy)(v,e.resultGuid)!==eU.xal.LOADED,b=(0,$.wA)(),C=ea()("canvas_search--layerIcon--RpNZF",{[m2]:e.isPurple,[m0]:r,[m1]:y}),w=Q.createElement(ej.Bf,{className:C,guid:e.guid});return g?w=Q.createElement("div",{className:mq+" "+C},Q.createElement(eM.B,{svg:hG.A})):e.guid===f&&(w=Q.createElement("div",{className:mq+" "+C},Q.createElement(eM.B,{svg:hH.A}))),Q.createElement(ns.GG,{className:ea()({[m5]:!0,[m0]:r,"canvas_search--indirectlySelected--2E-TI":!r&&l,"canvas_search--singletonHoverSelected--pCLSM":i,"canvas_search--isHoverSelecting--LlQSE":d,[m2]:e.isPurple,[m1]:y}),onMouseDown:e=>{e.preventDefault()},onClick:t=>{var n;y?b(eL.F.enqueue({type:"offline-page-switch",message:(0,eO.t)("fullscreen.pages_panel.unavailable_offline")})):(null==(n=a.current)||n.focus(),c||!r||(ec.Ay.mac?t.metaKey:t.ctrlKey)||e.textMatch.matchType===eU.Ifi.PAGE_MATCH?o(t):u||eU.YEY.setOverlayVisible(!0)),t.preventDefault(),t.stopPropagation()},onDoubleClick:c||y?ey.lQ:s,onMouseEnter:()=>{e.pageId===ad.Xy||e.pageId!==n?m(null):m({nodeGuid:e.resultGuid,pageId:e.pageId,index:e.index,matchIndex:e.matchIndex,isPurple:e.isPurple}),h?eU.YEY.setHoveredResult(e.resultGuid,e.matchIndex):e.textMatch.matchType===eU.Ifi.LAYER_MATCH&&(0,eV.Uc)(e.resultGuid)},onMouseLeave:()=>{(0,eV.Uc)(""),m(null),eU.YEY.setHoveredResult(ad.AD,-1)},recordingKey:nh.Pt("figma_design_search","result",e.pageId,e.index)},Q.createElement("div",{className:"canvas_search--layerIconContainer--IuQxq"},w),Q.createElement("div",{className:ea()("canvas_search--resultText--RXqeC",{[m4]:h})},e.textContent&&h?Q.createElement(h2,{text:e.textContent,match:e.textMatch,replacement:g?void 0:t,multiline:!0}):Q.createElement(h1,{result:e})),y&&Q.createElement("div",{className:"canvas_search--offlineIconContainer--qVbhY","data-tooltip-type":nO.Ib.TEXT,"data-tooltip":(0,eO.t)("fullscreen.pages_panel.unavailable_offline"),"data-onboarding-key":"page-unavailable-offline"},Q.createElement(eM.B,{className:"canvas_search--offlineIcon--F0sbc",svg:hV.A})))}function h1({result:e}){var t;let{query:n}=(0,$.d4)(e=>e.canvasSearch),a=e.name&&e.stateGroupName?(0,he.w)(e.name):e.name;if(!a)return null;let r=e.stateGroupName||e.containerName,l=-1;e.textContent&&(a=e.textContent,l=(null==(t=e.name)?void 0:t.toLowerCase().indexOf(n))??-1,r=e.name);let i=a.toLowerCase().indexOf(n)??-1;return Q.createElement("div",null,a&&i>-1?Q.createElement(h2,{text:a,match:{start:i,end:i+n.length,matchType:eU.Ifi.LAYER_MATCH},multiline:!0}):Q.createElement(ut.ph,{text:a}),r&&Q.createElement("div",{className:"canvas_search--resultSubheading--XCt-Z"},l>-1?Q.createElement(h2,{text:r,match:{start:l,end:l+n.length,matchType:eU.Ifi.LAYER_MATCH}}):Q.createElement(ut.ph,{text:r})))}function h2({text:e,match:t,replacement:n,multiline:a}){let[r,l]=(0,Q.useState)(e),[i,o]=(0,Q.useState)(!1);(0,Q.useEffect)(()=>{l(e)},[e]),(0,Q.useEffect)(()=>{if(!i||r!==e)return;let n=t.start,a=0;for(let t=n-1;t>=0;--t)if(/\s/.test(e[t])&&a++,3===a){n=t;break}a<3&&(n=0),l(e.slice(n))},[i,r,e,t.start]);let s=(0,Q.useMemo)(()=>Q.createElement(h5,{text:r,replacement:n,fullString:e,match:t}),[r,t,n,e]);return Q.createElement(ut.ph,{className:a?m4:"",text:s,multiline:a,onTruncationChange:o})}function h5({text:e,replacement:t,fullString:n,match:a}){let r=0;n&&e!==n&&(r=n.length-e.length);let l=a.start-r,i=a.end-r,o=e.substring(0,l),s=e.substring(l,i),c=e.substring(i);if(t&&s.toLocaleLowerCase()!==t.toLocaleLowerCase()){let e=hr.r.detectTextTransform(s);t=hr.r.applyTextTransform(t,e)}return Q.createElement(Q.Fragment,null,r?"\u2026":"",o,t?Q.createElement(Q.Fragment,null,Q.createElement("span",{className:"canvas_search--strikethrough--0xsma"},s),Q.createElement("b",null,t)):Q.createElement("b",null,s),c)}function h4(e,t,n,a){let r=hw(),l=function(){let e=(0,pn.Z)("canvas_search_navigate"),t=(0,$.d4)(e=>e.canvasSearch.scope),n=(0,t5.am)(),a=(0,Q.useContext)(hh),r=(0,Q.useCallback)(()=>{n("canvas_search_multi_hierarchy",{order:"down"}),e(eU.YEY.moveActiveResultsDownOneLevelAndGetViewportSettings(),{additionalTrackEventParams:{searchScope:eU.Lov[t]}})},[e,t,n]);return a?r:ey.lQ}(),i=function(){let e=(0,pn.Z)("canvas_search_navigate"),t=(0,$.d4)(e=>e.canvasSearch.scope),n=(0,t5.am)(),a=(0,Q.useContext)(hh),r=(0,Q.useCallback)(()=>{n("canvas_search_multi_hierarchy",{order:"up"}),e(eU.YEY.moveActiveResultsUpOneLevelAndGetViewportSettings(),{additionalTrackEventParams:{searchScope:eU.Lov[t]}})},[e,t,n]);return a?r:ey.lQ}(),o=(0,Q.useContext)(hh);return(0,Q.useCallback)(s=>{switch(o?(0,es.Fo)(s)&&!s.shiftKey?a(1):s.shiftKey?a(2):a(0):a(0),s.keyCode){case es.Uz.P:case es.Uz.UP_ARROW:(s.keyCode!==es.Uz.P||ec.Ay.mac&&(0,es.vN)(s,es.xH.CONTROL))&&(e(hf.OP.PREV,"keyboard"),s.stopPropagation(),s.preventDefault());break;case es.Uz.N:case es.Uz.DOWN_ARROW:(s.keyCode!==es.Uz.N||ec.Ay.mac&&(0,es.vN)(s,es.xH.CONTROL))&&(e(hf.OP.NEXT,"keyboard"),s.stopPropagation(),s.preventDefault());break;case es.Uz.ENTER:if((0,es.Fo)(s)){eU.YEY.exitSearchMode(eU.dNx.SELECT_ACTIVE);break}if(r())break;s.shiftKey?t?i():e(hf.OP.PREV,"keyboard"):t?l():e(hf.OP.NEXT,"keyboard"),s.stopPropagation(),s.preventDefault();break;case es.Uz.ESCAPE:eU.YEY.exitSearchMode(eU.dNx.NONE),s.preventDefault(),s.stopPropagation();break;default:n(s)}},[o,a,r,n,e,t,i,l])}function h3(e){return(0,Q.useCallback)(t=>{if(t.keyCode===es.Uz.SHIFT){(!ec.Ay.mac||t.metaKey)&&(ec.Ay.mac||t.ctrlKey)||e(0);return}let n=ec.Ay.mac&&"Meta"===t.key,a=!ec.Ay.mac&&t.keyCode===es.Uz.CTRL;(n||a)&&!t.shiftKey&&e(0)},[e])}function h6(e,t=!1){if(t||(0,pf.U5)(e,pf.W0.YES)){let t=(0,pf.f7)(e);return t&&e.stopPropagation(),t}return!1}function h7(e){switch(e.keyCode){case es.Uz.DELETE:case es.Uz.BACKSPACE:return eU.YEY.getNextResultForActiveResultRemoval();case es.Uz.X:if((0,es.Te)(e))return eU.YEY.getNextResultForActiveResultRemoval();break;case es.Uz.H:case es.Uz.R:if((0,es.Fo)(e)&&e.shiftKey)return eU.YEY.getNextResultForActiveResultRemoval()}return ad.AD}var h8=n(308548),h9=n(449486),ge=n(561071);function gt({editorType:e}){switch(e){case eU._YF.DESIGN:return Q.createElement(h8.k,null);case eU._YF.WHITEBOARD:return Q.createElement(eM.B,{svg:ge.A});case eU._YF.SLIDES:return Q.createElement(h9.g,null);default:return null}}function gn(e){let{isSelected:t,isDivider:n,pageType:a,hasMultiplePageTypes:r}=e;return n||!r?null:Q.createElement("div",{className:ea()("pages_panel_row--pageIcon--W2UMl",{"pages_panel_row--active--VZG5v":t})},Q.createElement(gt,{editorType:a}))}function ga({pageType:e,hasMultiplePageTypes:t,nodeId:n,nodeName:a,isRenaming:r,startRenaming:l,isSelected:i,stopRenaming:o,shouldShowGuids:s,width:c,onMouseDownCallback:d,onMouseUpCallback:u,onMouseMoveCallback:m,reorderingPageGuids:p,selectedPageGuids:_,onClickCallback:f,onContextMenuCallback:h,showMemoryUsage:g,showInFileMemoryPercentage:E,isOffline:v,isComparingChanges:y,pageToNumChanges:b,versionHistory:C,isDivider:w,pagesList:T,selectedView:x,currentPageGuid:N,index:k}){let S=(0,$.wA)(),I=(0,aD.GS)(),A=(0,c6.Fk)((e,t)=>{var n;return null==(n=e.get(t))?void 0:n.nodeMemoryUsage},n),P=(0,c6.Fk)((e,t)=>{var n;return null==(n=e.get(t))?void 0:n.rootMemoryUsage},n),O=Q.useMemo(()=>(0,cG.Fy)(T,n)===eU.xal.LOADED,[n,T]),L=(0,eo.kc)().use_navigator_online_mp_fallback&&eU.h3O.getSessionState()===eU.kul.JOINED,M=Q.useMemo(()=>v&&!L&&!O&&eU.h3O.isIncrementalSession(),[v,O,L]),[D,R]=Q.useState(""),F=(0,pn.Z)("page_change_navigator_navigate"),B=(0,pt.E)(),U=Q.useCallback((e,t)=>{!w&&(f(n,t),t&&((0,es.Fo)(t)||t.shiftKey)&&(0,eo.kc)().multi_page_select||(0,cF.J)(()=>(0,cH.$P)(e,N,C,S,(0,cG.Fy)(T,e)===eU.xal.LOADED,F,B,y,x)))},[B,F,w,N,C,S,y,x,T,f,n]),H=nh.Pt("pagesPanel","row",k)||"",V=(0,ue.Z)(r);Q.useEffect(()=>{!V&&r&&R(a)},[V,r,a]);let G=nh.rf(H,"contextmenu",e=>{e.preventDefault(),!M&&h&&h(n,e)}),K=Q.useCallback(e=>{e&&V&&aP.findDOMNode(e).select()},[V]),W=nh.AF(H,"change",e=>{M||R(e.currentTarget.value)}),z=Q.useCallback((e,t)=>{if(!t)return o(e,t,a);o(e,t,a)},[a,o]),j=nh.v_(H,"keydown",e=>{if(e.keyCode===es.Uz.ESCAPE)z(!1);else if(e.keyCode===es.Uz.ENTER)z(!0,D);else{if(e.keyCode!==es.Uz.TAB)return(0,pf.jr)(e,pf.W0.NO),nh.aH;e.preventDefault(),z(!0,D)}}),Y=nh.iQ(H,"blur",e=>{z(!0,D)}),Z=nh.rf(H,"dblclick",e=>{M||l(n)}),X=nh.rf(H,"click",e=>{if(!ed){if(M){S(eL.F.enqueue({type:"offline-page-switch",message:(0,eO.t)("fullscreen.pages_panel.unavailable_offline")}));return}null==U||r||U(n,e)}}),q=Q.useCallback(e=>{M||null==d||r||d(n,e)},[r,n,d,M]),J=Q.useCallback(e=>{null==m||r||m(n,e)},[r,n,m]),ee=Q.useCallback(e=>{null==u||r||u(n,e)},[r,n,u]),et=Q.useCallback(()=>(0,n4.uy)(A)||(0,n4.uy)(P)?"":(0,cV.pr)(A,P,!0),[A,P]),en=`calc(${c}px - ${I?"var(--spacer-5)":"64px"})`,er=y&&(null==b?void 0:b.get(n))||0,el=(null==C?void 0:C.activeId)&&"current_version"===C.activeId,ei=g&&E&&!r&&el,ec=!y&&!r,ed=w&&!i&&!r;return Q.createElement("div",{className:[ed?"pages_panel--pageRowDividerContainer--NyNS9 pages_panel--pageRowBase--d4OsN":"pages_panel--pageRow--7h-Lv pages_panel--pageRowBase--d4OsN",i?"pages_panel--pageRowSelected--xuzyI":"",0===p.length&&0===_.length?cy:_.includes(n)?"pages_panel--selected--bUeWb":p.includes(n)?"pages_panel--hoverState--FXSo2":0===p.length?cy:""].filter(e=>!!e).join(" "),onContextMenu:G,onClick:X,draggable:!1,onMouseDown:q,onMouseMove:J,onMouseUp:ee,onDoubleClick:Z},!ed&&!I&&Q.createElement(eM.B,{className:ea()(i?"pages_panel--pageRowSvgV2--y3cIV pages_panel--pageRowSvg--lKPoU":"pages_panel--pageRowSvgV2Unselected--zlmq5 pages_panel--pageRowSvgV2--y3cIV pages_panel--pageRowSvg--lKPoU",{"pages_panel--flipVertically--O5Tht":!1}),svg:hH.A}),ec&&Q.createElement(gr,{pageGuid:n,fallback:Q.createElement(gn,{isSelected:i,isDivider:w,pageType:e,hasMultiplePageTypes:t})}),r&&Q.createElement(nM.ks,{className:"pages_panel--renaming--IPs-u",ref:K,value:D,onChange:W,onKeyDown:j,onBlur:Y,spellCheck:!1,autoCorrect:"off",autoCapitalize:"off"}),ed?Q.createElement("span",{className:"pages_panel--pageRowDivider--NO0-i"}):!r&&Q.createElement("div",{className:"pages_panel--renameableNode--Rl1H1"},Q.createElement("span",{className:M?"pages_panel--disabledNodeText--Gar5X pages_panel--renameableNodeText--AaSCq ellipsis--ellipsis--Tjyfa":"pages_panel--renameableNodeText--AaSCq ellipsis--ellipsis--Tjyfa",style:{maxWidth:en}},s?`${a} (${n})`:a)),M&&!ed&&Q.createElement("div",{className:"pages_panel--offlineContainer--M4S1E","data-tooltip-type":nO.Ib.TEXT,"data-tooltip":(0,eO.t)("fullscreen.pages_panel.unavailable_offline"),"data-onboarding-key":"page-unavailable-offline"},Q.createElement(eM.B,{className:"pages_panel--offlineIcon--pf66o",svg:hV.A,"data-tooltip-type":nO.Ib.TEXT,"data-tooltip":(0,eO.t)("fullscreen.pages_panel.unavailable_offline"),"data-onboarding-key":"page-unavailable-offline"})),ei&&Q.createElement("span",{className:M?"pages_panel--renameableNodeTextEndDisabled--TLJxp pages_panel--renameableNodeTextEnd--pdvNO pages_panel--renameableNodeText--AaSCq ellipsis--ellipsis--Tjyfa":"pages_panel--renameableNodeTextEnd--pdvNO pages_panel--renameableNodeText--AaSCq ellipsis--ellipsis--Tjyfa",dir:"auto"},et()),(0,eo.kc)().version_diffing&&y&&er>0&&Q.createElement("div",{className:"pages_panel--pageChangesCount--ZXLpV"},er))}function gr({pageGuid:e,margin:t="marginLeft",fallback:n=null}){let a=(0,eG.J2)(eU.Ez5.currentSceneState().pageToContainsNodeStatuses);return(a.has(e)?a.get(e).includes(eU.zIx.BUILD):eU.glU.pageHasReadySection(e))?Q.createElement(eM.B,{className:"pages_panel_row--pageReady--XaDiG",svg:o$.A,style:{[t]:"8px"},"data-tooltip-type":nO.Ib.TEXT,"data-tooltip":(0,eO.t)("dev_handoff.tag.ready_to_build"),"data-testid":"pageReadyIndicator"}):n}function gl(e){let t=(0,$.wA)(),n=(0,$.d4)(e=>e.selectedView);return Q.createElement("div",{className:ck},Q.createElement(hZ,{onFocus:()=>{(0,cm._)(t,n),lT.Y5.triggerAction("canvas-search",{source:"toolbar"})}}),!e.isOverview&&Q.createElement(ns.D8,{className:"pages_panel--pageTabDevHandoff--Bq1-h pages_panel--pageTab--hc8gz",onClick:e.togglePagesExpanded,onContextMenu:e.onContextClick},Q.createElement(gr,{pageGuid:e.currentPageGuid}),Q.createElement("span",{className:cN},e.currentPageName||""),Q.createElement(eM.B,{className:ch,svg:e.pageTabChevron})))}var gi=n(397863),go=n(660164);let gs=(0,t6.tf)(dN.K);function gc({onNewPageCreated:e,recordingKey:t}){let n=(0,cH.rE)();return Q.createElement(gs,{recordingKey:t,"data-tooltip-type":nO.Ib.TEXT,"data-tooltip":(0,eO.t)("fullscreen.pages_panel.add_new_page"),"data-tooltip-show-above":!0,"aria-label":(0,eO.t)("fullscreen.pages_panel.add_new_page"),onClick:()=>{n(null)&&e&&e()},trackingProperties:{text:"Add new page"}},Q.createElement(nd.U,{svg:s9.A,fallbackSvg:go.A},Q.createElement(gi.x,null)))}let gd="new_page_dropdown--newPageIcon--R2RXS";function gu({recordingKey:e}){let{Dropdown:t,toggleDropdown:n,isDropdownShown:a,dropdownTargetRef:r}=(0,aw.B)("newPageDropdown"),l=(0,mD.lg)(),i=(0,t_.Te)(),o=(0,cH.rE)();if(!i)return null;let s=[{displayText:(0,eO.t)("fullscreen.pages_panel.page_dropdown_new"),optionHeight:24,editorType:null,disabled:!0},{displayText:(0,eO.t)("fullscreen.pages_panel.design_page"),optionHeight:24,editorType:dV._Y.DESIGN,icon:Q.createElement("div",{className:gd},Q.createElement(h8.k,null)),callback:()=>o(eU._YF.DESIGN)},{displayText:(0,eO.t)("fullscreen.pages_panel.figjam_page"),optionHeight:24,editorType:dV._Y.WHITEBOARD,icon:Q.createElement("div",{className:gd},Q.createElement(eM.B,{svg:ge.A})),callback:()=>o(eU._YF.WHITEBOARD)}];(0,eo.kc)().piper&&s.push({displayText:(0,eO.t)("fullscreen.pages_panel.slide_deck"),optionHeight:24,editorType:dV._Y.SLIDES,icon:Q.createElement("div",{className:gd},Q.createElement(h9.g,null)),callback:()=>o(eU._YF.SLIDES)});let c=48;for(let e=0;e<s.length;e++)if(s[e].editorType===l){c+=24*e;break}return Q.createElement(Q.Fragment,null,Q.createElement("div",{className:tw.cx.absolute.w8.h8.$,ref:r,style:{bottom:`${c}px`,right:"42px"}}),Q.createElement(aJ.K0,{className:"new_page_dropdown--newPageChevron--N0hv3",recordingKey:nh.Pt(e,"newPageDropdown"),"data-tooltip-type":nO.Ib.TEXT,"data-tooltip":(0,eO.t)("fullscreen.pages_panel.add_new_page_dropdown"),"data-tooltip-show-above":!0,svg:oQ.A,onMouseDown:n}),a&&Q.createElement(t,{minWidth:160,items:s,showPoint:!0}))}function gm(e){let t=(0,$.wA)(),n=(0,t_.q5)(),a=(0,sd.FC)(),r=(0,ae.p8)("pagesList").length,l=Q.useRef();l.current=e.setUpsellHeightCallback;let i=Q.useCallback(e=>{l.current&&l.current((null==e?void 0:e.getBoundingClientRect().height)||0)},[r]);if(r<=0)return null;let o=null==n?void 0:n.team;if(!(o&&(0,cQ.canEditTeam)(o.id,a)))return null;let s=()=>{let e=my.b.PAGE_TRACKER_UPSELL;t((0,n9.to)({type:mv.V,data:{upsellSource:e,teamId:o.id,openCheckoutInNewTab:!0}}))},c=Q.createElement(nc.Us,{onClick:s,trusted:!0},Q.createElement(eO.Tx,{id:"fullscreen.pages_panel.see_plans_that_offer_more"})),d=Q.createElement(nc.Us,{onClick:s,trusted:!0},Q.createElement(eO.Tx,{id:"fullscreen.pages_panel.get_unlimited_pages_and_more"})),u=r/cK.LF[n.editorType],m=ea()({"page_tracker_upsell--progressPartial--guOiP":u<1,"page_tracker_upsell--progressCompleteWarning--06IlO page_tracker_upsell--progressComplete--ilmev":1===u,"page_tracker_upsell--progressCompleteDanger--lCunz page_tracker_upsell--progressComplete--ilmev":u>1}),p=`${Math.trunc(100*Math.min(u,1))}%`,_={fileTeamId:o.id,numPages:r};return Q.createElement(t6.fu,{name:"Page Tracker Upsell",properties:_},Q.createElement("div",{className:"page_tracker_upsell--upsellContainer--ZEwXz",ref:i},Q.createElement("div",{className:"page_tracker_upsell--upsellBody--yUAjd"},Q.createElement("div",{className:"page_tracker_upsell--progressBar--fDCBY"},Q.createElement("div",{className:m,style:{width:p}})),Q.createElement("p",{className:"page_tracker_upsell--upsellText--Ng-u0"},(()=>{let e=cK.LF[n.editorType]-r;return e>=2?Q.createElement(Q.Fragment,null,Q.createElement(eO.Tx,{id:"fullscreen.pages_panel.n_free_pages_left",numPagesRemaining:e}),Q.createElement("br",null),c):1===e?Q.createElement(Q.Fragment,null,Q.createElement(eO.Tx,{id:"fullscreen.pages_panel.n_free_pages_left",numPagesRemaining:e}),Q.createElement("br",null),d):0===e?Q.createElement(Q.Fragment,null,Q.createElement(eO.Tx,{id:"fullscreen.pages_panel.all_n_free_pages_used",maxFreePages:cK.LF[n.editorType]}),Q.createElement("br",null),d):Q.createElement(Q.Fragment,null,Q.createElement(eO.Tx,{id:"fullscreen.pages_panel.all_free_pages_used"}),Q.createElement("br",null),d)})()))))}var gp=n(61048);let g_=(0,nf.eU)(null);function gf(){let e=(0,c3.pp)(),t=(0,fQ.f)(c2.py),n=(0,fQ.f)(c2.rF);return(0,cJ.jO)()&&!t&&!n&&e()?Q.createElement("span",{className:"presets_experiment_dot_nudge--blueDot--09LcR"}):null}(0,gp.bt)(e=>e.mirror.appModel.currentPage);var gh=n(560560);let gg=(0,rT.hG)(uT.xM9),gE=(0,rT.jz)(uT.Nqv),gv=(0,rT.jz)(uT.M$q),gy=(0,cd.s)(e=>{var t,n,a;e.user&&(0,cB.uE)("action_left_panel_scroll",{user:e.user},{assetsPanelVersion:e.activeTab===eU.xae.ASSETS?2:void 0,tab:e.activeTab===eU.xae.ASSETS?"assets":"layers",fileKey:null==(t=e.openFile)?void 0:t.key,fileTeamId:(null==(n=e.openFile)?void 0:n.teamId)??void 0,fileOrgId:(null==(a=e.openFile)?void 0:a.parentOrgId)??void 0})},500);class gb extends nh.o6{constructor(e){super(e),this.objectScrollTop=0,this.onObjectScroll=e=>{this.objectScrollTop=e},this.componentScrollTop=0,this.onComponentScroll=e=>{gy(this.props),this.componentScrollTop=e},this.clickOutside=e=>{this.setState({selectedPageGuids:[],reorderingPageGuids:[]})},this.onKeyDown=e=>{if(this.props.isReadOnly)return;let t=this.pageToIndex(),n=this.state.selectedPageGuids.filter(e=>{let n=t[e];return void 0!==n&&!this.props.pagesList[n].isDivider}).sort((e,n)=>t[e]-t[n]);if(0!==n.length)switch(e.keyCode){case es.Uz.ESCAPE:this.setState({selectedPageGuids:[],reorderingPageGuids:[]});break;case es.Uz.R:if(!(0,es.Fo)(e))return;lT.Y5.triggerActionInUserEditScope("batch-page-rename",{args:{nodeIds:n}});break;case es.Uz.DELETE:case es.Uz.BACKSPACE:if(this.props.pagesList.filter(e=>!e.isDivider).length<=n.length)return;lT.Y5.triggerActionInUserEditScope("page-delete",{args:{nodeIds:n}})}},this.stickyBelowRef=Q.createRef(),this.scrollContainerRef=Q.createRef(),this.scrollContainerInnerRef=Q.createRef(),this.shouldScrollToPage=null,this.handleOnline=()=>{this.setState({isOffline:!1})},this.handleOffline=()=>{this.setState({isOffline:!0})},this.updateStickyOffset=()=>{if(this.stickyBelowRef.current){let e=this.stickyBelowRef.current.getBoundingClientRect();this.setState({stickyOffset:e.bottom})}else{let e=!this.state.isPagesOpen||this.props.showTabs?(0,rT.hG)(uT.MGP):0;this.setState({stickyOffset:(0,tb.bG)()+e-1})}},this.updateLocalStorageSettings=(e,t,n,a)=>{if(ew.x4){let r=JSON.parse(ew.x4.getItem("pages-panel")||"{}");r[e]={height:t,isOpen:n,devHandoffShowAllPages:a},ew.x4.setItem("pages-panel",JSON.stringify(r))}},this.getLocalStorageSettings=e=>{if(ew.x4)return JSON.parse(ew.x4.getItem("pages-panel")||"{}")[e]},this.setNeedsScrollLine=e=>{this.setState({needsScrollLine:e>0})},this.scrollViewToPage=e=>{if(!this.scrollContainerRef.current){this.shouldScrollToPage=e;return}let t=this.positionOfPageInList(e),n=t+gg,a=this.scrollContainerRef.current.getScrollTop(),r=a+this.scrollContainerRef.current.getTrackHeight();t<a?this.scrollContainerRef.current.scrollTo(t-gg/2):n>r&&this.scrollContainerRef.current.scrollTo(a+(n-r)+gg/2),this.shouldScrollToPage=null},this.onFullscreenStartRenamingPage=({nodeId:e})=>{this.startRenamingPage(e)},this.onContextClick=nh.cZ(this,"contextmenu",e=>{this.onContextMenu(this.props.currentPageGuid,e)}),this.onContextClickNothing=e=>{e.preventDefault(),e.stopPropagation()},this.onContextMenu=(e,t)=>{let n;if(t.stopPropagation(),t.preventDefault(),this.props.isReadOnly&&!this.props.isDevHandoff)return;let{clientX:a,clientY:r}=t,l=new Set(this.props.pagesList.map(e=>e.nodeId)),i=this.state.selectedPageGuids.filter(e=>l.has(e));if(i.length>0&&!i.includes(e)&&l.has(e)&&(this.setState({selectedPageGuids:[...i,e]}),i.push(e)),i.length>0){let e=this.pageToIndex();n=[...i].sort((t,n)=>e[t]-e[n])}else n=[e];if(0===n.length)return;let o=this.props.isPageCreationEnabled;this.props.dispatch(nP.j7({type:eK.d2,data:{clientX:a,clientY:r,nodeIds:n,shouldShowDuplicateOption:o}}))},this.forcePagesExpanded=()=>{this.showLayersPanel(),this.state.isPagesOpen||this.setState({isPagesOpen:!0}),(0,er.sx)("pages_panel_open_toggle",{isPagesOpen:!0})},this.togglePagesExpanded=()=>{this.props.isDevHandoffOverview||((0,er.sx)("pages_panel_open_toggle",{isPagesOpen:!this.state.isPagesOpen}),this.setState({isPagesOpen:!this.state.isPagesOpen}))},this.toggleLayersExpanded=()=>{(0,er.sx)("objects_panel_open_toggle",{isLayersOpen:!this.state.isLayersOpen}),this.setState({isLayersOpen:!this.state.isLayersOpen})},this.showPublish=()=>{var e,t;this.props.openFile&&((0,er.sx)("left_panel_set_tab",{value:"Components"}),null==(t=(e=this.props).markAssetPanelLoadingStart)||t.call(e),this.props.dispatch(cM.FP({tab:eU.xae.ASSETS,persist:!0,shouldFocusSearchBar:!0})))},this.showLayersPanel=()=>{(0,er.sx)("left_panel_set_tab",{value:"Layers"}),this.props.dispatch(cM.FP({tab:eU.xae.LAYERS,persist:!0}))},this.showSitesBlocksPanel=()=>{(0,er.sx)("left_panel_set_tab",{value:"LayersSites"}),this.props.dispatch(cM.FP({tab:eU.xae.KITS_SITES}))},this.startRenamingPage=e=>{this.props.isReadOnly||(this.forcePagesExpanded(),this.scrollViewToPage(e),this.setState({renamingPageGuid:e}))},this.stopRenamingPage=async(e,t,n)=>{if(!this.props.isReadOnly){if(this.state.renamingPageGuid&&e&&(t=t||"",(0,cH.CQ)({openFile:this.props.openFile,pageId:this.state.renamingPageGuid,newName:t,oldName:n||""}),(0,eo.kc)().ce_page_separators)){let e=tN.qo.instance.get(this.state.renamingPageGuid);if(await (0,cH.zO)({openFile:this.props.openFile,pageNode:e,pageName:t})&&this.props.currentPageGuid===this.state.renamingPageGuid){let e=this.indexOfPageInList(this.props.currentPageGuid),t=e+1,n=this.props.pagesList[t];for(;n&&n.isDivider;)t+=1,n=this.props.pagesList[t];if(n)(0,cF.J)(()=>(0,cH.$P)(n.nodeId,this.props.currentPageGuid,this.props.versionHistory,this.props.dispatch,(0,cG.Fy)(this.props.pagesList,n.nodeId)===eU.xal.LOADED));else{let t=e-1,n=this.props.pagesList[t];for(;n&&n.isDivider;)t-=1,n=this.props.pagesList[t];n?(0,cF.J)(()=>(0,cH.$P)(n.nodeId,this.props.currentPageGuid,this.props.versionHistory,this.props.dispatch,(0,cG.Fy)(this.props.pagesList,n.nodeId)===eU.xal.LOADED)):this.props.createNewPageWithPaywallUserInitiated(null)&&this.onNewPageCreated()}}}this.setState({renamingPageGuid:null})}},this.onFullscreenStartRenamingNode=({nodeId:e})=>{this.startRenamingNode(e)},this.startRenamingNode=e=>{var t;if(this.props.isReadOnly)return;let n=tN.qo.instance.get(e);if((null==n?void 0:n.isResponsiveSet)&&(null==(t=n.parentNode)?void 0:t.defaultResponsiveSetId)===e){this.props.dispatch(eL.F.enqueue({message:(0,eO.t)("sites.panel.pages_panel.cannot_rename_default_responsive_set")}));return}this.props.activeTab!==eU.xae.LAYERS&&this.showLayersPanel(),this.setState({renamingNodeGuid:e}),(null==n?void 0:n.parentGuid)&&eV.hq(n.parentGuid)},this.stopRenamingNode=(e,t,n)=>{if(this.props.isReadOnly)return;let a=this.state.renamingNodeGuid;if(a&&e){let e=t,r=tN.qo.instance.get(a);if(null==r?void 0:r.isResponsiveSet){e=e?(0,mO.Oz)(e):r.name;let t=(0,mO.Hw)(tN.qo.instance,a,e),n=(0,mO.E8)(e);t&&this.props.dispatch(eL.F.enqueue({message:(0,eO.t)("sites.panel.pages_panel.duplicate_webpage_name")})),(t||!n)&&(e=r.name)}let l=e||"";cU.l7.user("set-node-name",()=>eV.i(a,l)),lT.Y5.commit(),cR.wt.reportEditActionIf(l!==n,"rename-node")}this.setState({renamingNodeGuid:null})},this.onNewPageCreated=()=>{this.setState({currentPageGuidBeforeNewPage:this.props.currentPageGuid})},this.onPageClick=(e,t)=>{if(t.stopPropagation(),!this.props.isReadOnly){if(!(0,eo.kc)().multi_page_select){this.setState({selectedPageGuids:[]});return}if(((0,es.Fo)(t)||t.shiftKey)&&(eV.tJ([]),lT.Y5.commit()),(0,es.Fo)(t)){let t;t=this.state.selectedPageGuids.includes(e)?this.state.selectedPageGuids.filter(t=>t!==e):0===this.state.selectedPageGuids.length&&this.props.currentPageGuid!==e?[this.props.currentPageGuid,e]:[...this.state.selectedPageGuids,e],this.setState({selectedPageGuids:t})}else if(t.shiftKey){let t=0===this.state.selectedPageGuids.length?this.props.currentPageGuid:this.state.selectedPageGuids[this.state.selectedPageGuids.length-1],n=this.props.pagesList.findIndex(e=>e.nodeId===t),a=this.props.pagesList.findIndex(t=>t.nodeId===e),r=new Set(this.state.selectedPageGuids),l=this.props.pagesList.slice(Math.min(n,a),Math.max(n,a)+1).map(e=>e.nodeId);r.has(l[0])&&r.has(l[l.length-1])?this.setState(({selectedPageGuids:e})=>({selectedPageGuids:e.filter(e=>!l.includes(e))})):this.setState(({selectedPageGuids:e})=>({selectedPageGuids:[...e,...l.filter(e=>!r.has(e))]}))}else this.setState({selectedPageGuids:[]})}},this.onReorderPageMouseDown=(e,t)=>{if(!(0,cD.i)(t)&&!this.props.isReadOnly){if(document.addEventListener("mouseup",this.onMouseUp),(0,es.Fo)(t)||t.shiftKey){this.setState({dragOverPageGuid:null});return}this.state.selectedPageGuids.includes(e)?this.setState(({selectedPageGuids:e})=>({reorderingPageGuids:e,dragOverPageGuid:null})):this.setState({selectedPageGuids:[],reorderingPageGuids:[e],dragOverPageGuid:null})}},this.onReorderPageMouseMove=(e,t)=>{if(0===this.state.reorderingPageGuids.length||this.props.isReadOnly)return;let n=t.target;this.state.dragOverPageGuid!==e&&(this.cachedDragOverBounds=n.getBoundingClientRect());let a=t.clientY-this.cachedDragOverBounds.top;this.state.reorderingPageGuids.includes(e)||this.setState({dragOverPageGuid:e,draggingBefore:a<this.cachedDragOverBounds.height/2}),t.preventDefault(),t.stopPropagation()},this.onReorderPageMouseUp=(e,t)=>{(0,es.Fo)(t)||this.props.isReadOnly||(this.finishPageReorder(e)&&(t.preventDefault(),t.stopPropagation()),document.removeEventListener("mouseup",this.onMouseUp))},this.finishPageReorder=e=>{if(this.props.isReadOnly)return!1;let t=!1;return cU.l7.user("reorder-pages",()=>{if(0===this.state.reorderingPageGuids.length||null==e||this.state.reorderingPageGuids.includes(e))return;let n=this.pageToIndex();if(this.state.draggingBefore)for(let t of(this.state.reorderingPageGuids.sort((e,t)=>n[e]-n[t]),this.state.reorderingPageGuids))eU.Egt.pageMoveBeforePage(t,e);else for(let t of(this.state.reorderingPageGuids.sort((e,t)=>n[t]-n[e]),this.state.reorderingPageGuids))eU.Egt.pageMoveAfterPage(t,e);t=!0}),(this.state.reorderingPageGuids.length>0||null!=e)&&this.setState({reorderingPageGuids:[],dragOverPageGuid:null}),t},this.clampValidHeight=e=>{var t;let n=(null==(t=this.scrollContainerInnerRef.current)?void 0:t.getBoundingClientRect().top)??175,a=1.5*gE+(this.props.isUI3?40+gv:0);return Math.max(1.5*gg,Math.min(e,this.state.cachedInnerHeight-n-a))},this.onMouseUp=e=>{e.stopPropagation(),this.state.dragOverPageGuid&&this.finishPageReorder(this.state.dragOverPageGuid),document.removeEventListener("mouseup",this.onMouseUp)},this.onWindowSize=e=>{this.windowResizeHandler()},this.windowResizeHandler=(0,cd.s)(()=>{this.setState({cachedInnerHeight:window.innerHeight})},45),this.showInsertBefore=e=>this.state.dragOverPageGuid===e&&this.state.draggingBefore,this.showInsertAfter=e=>this.state.dragOverPageGuid===e&&!this.state.draggingBefore,this.toggleViewMode=()=>{this.setState({viewMode:this.state.viewMode===uS.Bk.Grid?uS.Bk.List:uS.Bk.Grid})},this.isManageMemoryModalShown=()=>this.props.modalShown&&this.props.modalShown.type===mS.gG.type,this.toggleManageMemoryModal=()=>{var e;let{memoryUsedPercent:t}=(0,cV.IJ)();(0,er.sx)("toggle_manage_memory_modal",{memoryUsedPercent:t,totalLayers:null==(e=eU.CeL)?void 0:e.getFileNodeCount(),pageContentPct:t-(0,cV.Zz)()}),this.isManageMemoryModalShown()?this.props.dispatch(n9.Ce()):this.props.dispatch(n9.to({type:mS.gG,data:{sidePanelWidth:this.props.width,markModalClosed:()=>{}}}))},this.setUpsellHeight=e=>{this.setState({upsellHeight:e})},this.setShowAllPages=e=>{let t=this.computedHeight(),n=this.getPagesInfo(e),a=this.heightForPages(n.pages.length,!!n.showAllButton),r=e?Math.max(t,a):Math.min(t,a);this.setState({devHandoffShowAllPages:e,height:r})},this.getPagesInfo=e=>{let{pagesList:t}=this.props;if(!this.props.isDevHandoff||this.props.disableCollapsing)return{pages:t};let n=!1,a=t.filter(e=>{let t=eU.glU.pageHasReadySection(e.nodeId);return t&&(n=!0),t||e.nodeId===this.props.currentPageGuid});return n&&a.length!==t.length?e?{pages:t,showAllButton:Q.createElement(nN.d,{label:(0,eO.t)("dev_handoff.pages.hide_other"),onClick:()=>this.setShowAllPages(!1)})}:{pages:a,showAllButton:Q.createElement(nN.d,{label:(0,eO.t)("dev_handoff.pages.show_all"),onClick:()=>this.setShowAllPages(!0)})}:{pages:t}},this.state={renamingPageGuid:null,renamingNodeGuid:null,renamingPageName:null,renamingNodeName:null,reorderingPageGuids:[],selectedPageGuids:[],dragOverPageGuid:null,draggingBefore:!1,currentPageGuidBeforeNewPage:null,needsScrollLine:!1,height:null,cachedInnerHeight:window.innerHeight,isPagesOpen:this.props.isUI3&&!this.props.isDevHandoff,isLayersOpen:!this.props.isUI3,stickyOffset:0,pagesListInitialScrollTop:null,viewMode:uS.Bk.Grid,upsellHeight:0,showManageMemoryModal:!1,devHandoffShowAllPages:!1,isOffline:!navigator.onLine,showSitesLintingModal:!1,webpagesListHeight:null}}componentDidMount(){var e;super.componentDidMount(),lT.Y5.fromFullscreen.on("startRenamingPage",this.onFullscreenStartRenamingPage),lT.Y5.fromFullscreen.on("startRenamingNode",this.onFullscreenStartRenamingNode),document.addEventListener("click",this.clickOutside),document.addEventListener("keydown",this.onKeyDown),window.addEventListener("resize",this.onWindowSize),window.addEventListener("online",this.handleOnline),window.addEventListener("offline",this.handleOffline),null!=this.props.currentPageGuid&&this.scrollViewToPage(this.props.currentPageGuid),this.props.openFile&&this.initializePagesPanelSettings(this.props.openFile.key),eU.Ez5.uiState().isRecovery.getCopy()&&(this.toggleManageMemoryModal(),null==(e=eU.Ez5)||e.uiState().showMemoryUsage.set(!0)),this.updateStickyOffset()}componentWillUnmount(){super.componentWillUnmount(),window.removeEventListener("resize",this.onWindowSize),window.removeEventListener("online",this.handleOnline),window.removeEventListener("offline",this.handleOffline),document.removeEventListener("keydown",this.onKeyDown),document.removeEventListener("click",this.clickOutside),document.removeEventListener("mouseup",this.onMouseUp),lT.Y5.fromFullscreen.removeListener("startRenamingPage",this.onFullscreenStartRenamingPage),lT.Y5.fromFullscreen.removeListener("startRenamingNode",this.onFullscreenStartRenamingNode)}UNSAFE_componentWillUpdate(e,t){this.state.currentPageGuidBeforeNewPage&&this.state.currentPageGuidBeforeNewPage!==this.props.currentPageGuid&&this.startRenamingPage(this.props.currentPageGuid),t.renamingPageGuid&&this.state.renamingPageGuid!==t.renamingPageGuid&&!this.scrollContainerRef.current&&this.setState({pagesListInitialScrollTop:this.positionOfPageInList(t.renamingPageGuid)-gg/2}),this.shouldScrollToPage&&this.scrollContainerRef.current&&this.scrollViewToPage(this.shouldScrollToPage),this.updateStickyOffset()}componentDidUpdate(e,t){var n,a,r,l,i;super.componentDidUpdate(e,t),e.isUI3!==this.props.isUI3&&this.setState({isPagesOpen:this.props.pagesList.length>1||this.props.isUI3&&!this.props.isDevHandoff}),this.props.isDevHandoffOverview&&!this.state.isPagesOpen&&this.setState({isPagesOpen:!0}),e.currentPageGuid!==this.props.currentPageGuid&&this.scrollViewToPage(this.props.currentPageGuid),e&&this.state.isPagesOpen!==t.isPagesOpen&&this.updateStickyOffset(),this.state.currentPageGuidBeforeNewPage&&this.state.currentPageGuidBeforeNewPage!==this.props.currentPageGuid&&this.setState({currentPageGuidBeforeNewPage:null});let o=e.activeTab!==this.props.activeTab&&this.props.activeTab===eU.xae.ASSETS,s=t.viewMode!==this.state.viewMode;if(o||s){let e=(0,ew.TQ)(),t=this.props.showRedesignedAssetsPanel?pj.Pv:(0,uS.RN)(this.state.viewMode);if(this.props.showRedesignedAssetsPanel&&e)try{let n=e.getItem(pj.Zi);if(n){let e=JSON.parse(n);(e===pj.$H.LIST||e===pj.$H.GRID)&&(t=e)}}catch{}(0,er.sx)("Component Sidebar Viewed",{viewMode:t,assetsPanelVersion:this.props.showRedesignedAssetsPanel?3:2,fileKey:null==(n=this.props.openFile)?void 0:n.key,fileTeamId:(null==(a=this.props.openFile)?void 0:a.teamId)??void 0,fileOrgId:(null==(r=this.props.openFile)?void 0:r.parentOrgId)??void 0})}if(this.scrollContainerRef.current&&this.setNeedsScrollLine(this.scrollContainerRef.current.getScrollTop()),this.props.openFile){(null==(l=e.openFile)?void 0:l.key)!==this.props.openFile.key&&this.initializePagesPanelSettings(this.props.openFile.key);let n=t.isPagesOpen!==this.state.isPagesOpen,a=this.state.height&&t.height!==this.state.height,r=this.state.devHandoffShowAllPages!==t.devHandoffShowAllPages;(null==(i=e.openFile)?void 0:i.key)===this.props.openFile.key&&(n||a||r)&&this.updateLocalStorageSettings(this.props.openFile.key,this.state.height,this.state.isPagesOpen,this.state.devHandoffShowAllPages)}null!==this.props.isPagesOpenOverride&&this.props.isPagesOpenOverride!==e.isPagesOpenOverride&&(ef.zl.set(g_,null),this.setState({isPagesOpen:this.props.isPagesOpenOverride})),null!==this.props.isLayersOpenOverride&&this.props.isLayersOpenOverride!==e.isLayersOpenOverride&&this.setState({isLayersOpen:this.props.isLayersOpenOverride})}heightForPages(e,t){let n=e*gg;n=Math.ceil(n/gg)*gg+this.state.upsellHeight+(this.props.isUI3?8:gg/2),t&&(n+=gg);let a=this.props.isDevHandoff?144:40;return Math.min(n,Math.round(.25*(this.state.cachedInnerHeight-(0,tb.bG)()-(0,rT.hG)(uT.MGP)-a)))}defaultHeight(e){if(e){let e=this.props.publishableCanvasId?(0,mO.Vl)(tN.qo.instance.get(this.props.publishableCanvasId)):[];return this.heightForPages(e.length,!1)}let{pages:t,showAllButton:n}=this.getPagesInfo(this.state.devHandoffShowAllPages);return this.heightForPages(t.length,!!n)}async initializePagesPanelSettings(e){let t=await this.getLocalStorageSettings(e);(0,aP.flushSync)(()=>{t?this.setState({height:t.height,isPagesOpen:t.isOpen,devHandoffShowAllPages:t.devHandoffShowAllPages}):this.setState({isPagesOpen:this.props.pagesList.length>1||this.props.isUI3&&!this.props.isDevHandoff})})}indexOfPageInList(e){return this.props.pagesList.findIndex(t=>t.nodeId===e)}positionOfPageInList(e){let t=this.indexOfPageInList(e);return -1!==t?t*gg:0}pageToIndex(){return this.props.pagesList.reduce((e,t,n)=>(e[t.nodeId]=n,e),{})}canAddNewPages(){return!this.props.isReadOnly&&this.props.isPageCreationEnabled}renderHeaderRowUi2(){let e=this.props.isReadOnly,t=e?this.togglePagesExpanded:void 0,n=(0,sZ.$A)(this.props.selectedView),a=e&&!n,r=e&&!n,l=this.canAddNewPages();return Q.createElement("div",{className:this.state.needsScrollLine?cg:cf,onClick:t},Q.createElement("div",{className:ea()(cE,{"pages_panel--pagesHeaderTextReadOnly--lwPlL":r}),onContextMenu:this.onContextClickNothing},r&&Q.createElement("div",{className:this.props.isComparingChanges?cA:void 0},Q.createElement(m8,{onClick:e=>{e.stopPropagation(),(0,cm._)(this.props.dispatch,this.props.selectedView),this.showLayersPanel(),lT.Y5.triggerAction("canvas-search",{source:"toolbar"})}})),r?Q.createElement("div",{className:cx},Q.createElement(eO.Tx,{id:"fullscreen.pages_panel.pages"}),a&&Q.createElement(eM.B,{className:ch,svg:gh.A})):Q.createElement(Q.Fragment,null,Q.createElement(eO.Tx,{id:"fullscreen.pages_panel.pages"}),a&&Q.createElement(eM.B,{className:ch,svg:gh.A}))),l&&Q.createElement("div",{className:tw.cx.flex.mx8.itemsCenter.$},Q.createElement(gc,{recordingKey:nh.Pt(this.props,"newPage"),onNewPageCreated:this.onNewPageCreated})))}renderHeaderRowUi3(e){let t=this.props.isReadOnly,n=t?this.togglePagesExpanded:void 0,a=(0,sZ.$A)(this.props.selectedView),r=t&&!a||a,l=e||(0,eo.kc)().interop_pages,i=this.canAddNewPages();return Q.createElement("div",{className:this.state.needsScrollLine?cg:cf,onClick:n},r?Q.createElement("div",{className:cE,onContextMenu:this.onContextClickNothing},Q.createElement(ns.D8,{className:ea()(cw,{[cT]:!this.props.showTabs||a,[cx]:!this.props.showTabs||a}),onClick:this.props.activeTab===eU.xae.ASSETS?this.forcePagesExpanded:this.togglePagesExpanded,onContextMenu:this.onContextClick,recordingKey:nh.Pt(this.props,"collapsedRow")},Q.createElement("span",{className:ea()("pages_panel--pageExpandToggle--XoZEs",{"pages_panel--isHidden--Rc54P":this.props.isDevHandoffOverview})},this.state.isPagesOpen?Q.createElement(co.O,null):Q.createElement(cs.k,null)),Q.createElement("span",{className:cN,"data-onboarding-key":"pages-panel-toggle"},this.state.isPagesOpen?Q.createElement(eO.Tx,{id:"fullscreen.pages_panel.pages"}):this.props.currentPageName||"")),Q.createElement("div",{className:this.props.isComparingChanges?cA:void 0},Q.createElement(m8,{onClick:e=>{e.stopPropagation(),(0,cm._)(this.props.dispatch,this.props.selectedView),this.showLayersPanel(),lT.Y5.triggerAction("canvas-search",{source:"toolbar"})}}))):Q.createElement(ns.D8,{className:ea()(cE,{[cv]:!this.state.isPagesOpen}),onContextMenu:this.onContextClickNothing,onClick:this.togglePagesExpanded,role:"button",tabIndex:0,recordingKey:nh.Pt(this.props,"collapsedRow")},this.state.isPagesOpen?Q.createElement(co.O,null):Q.createElement(cs.k,null),Q.createElement(eO.Tx,{id:"fullscreen.pages_panel.pages"})),i&&Q.createElement("div",{className:tw.cx.flex.relative.mr8.justifyEnd.itemsCenter.$},Q.createElement(gc,{recordingKey:nh.Pt(this.props,"newPage"),onNewPageCreated:this.onNewPageCreated}),l&&Q.createElement(gu,{recordingKey:this.props.recordingKey})))}renderAssetPanelUi2(){return Q.createElement(mT,{onScroll:this.onComponentScroll,initialScrollTop:this.componentScrollTop,recordingKey:"componentsSidebar",viewMode:this.state.viewMode,toggleViewMode:this.toggleViewMode,containerSizingOptions:{containerWidth:this.props.width,maxSmallThumbSize:40,maxWideColWidth:300}})}renderAssetPanelUi3(){return Q.createElement(f$,{width:this.props.width})}computedHeight(){return this.state.height?this.clampValidHeight(this.state.height):this.defaultHeight()}renderPagesList(e,t){if(!this.props.pagesList)return null;let{pages:n,showAllButton:a}=this.getPagesInfo(this.state.devHandoffShowAllPages),r=e=>!this.props.isDevHandoffOverview&&(this.props.requestedPageChange?this.props.requestedPageChange===e:e===this.props.currentPageGuid),l=this.props.openFile?(0,cK.Lj)(this.props.openFile):1/0,i=(0,sZ.$A)(this.props.selectedView);return Q.createElement(cu.V,null,Q.createElement(f4.w,{size:this.computedHeight(),defaultSize:this.defaultHeight(),onResize:e=>{this.setState({height:e}),eV.Uc("")},side:"bottom",className:e?"pages_panel--pendingPagesList--rKp9D pages_panel--pagesList--GVSQw":"pages_panel--pagesList--GVSQw"},Q.createElement(ab.P,{scrollBarAlways:!1,ref:this.scrollContainerRef,scrollContainerRef:this.scrollContainerInnerRef,className:"pages_panel--scrollContainer--aXdXr",width:this.props.width,onScroll:this.setNeedsScrollLine,initialScrollTop:this.state.pagesListInitialScrollTop||void 0},n.map((e,n)=>{let a="pages_panel--pagesRowSpacer--2ASia";return this.showInsertBefore(e.nodeId)?a=0===n?"pages_panel--pageRowSpacerInsertBeforeTop--wJ-N- pages_panel--pagesRowSpacer--2ASia":"pages_panel--pageRowSpacerInsertBefore--tIfb1 pages_panel--pagesRowSpacer--2ASia":this.showInsertAfter(e.nodeId)&&(a=n===this.props.pagesList.length-1?"pages_panel--pageRowSpacerInsertAfterBottom--vJwL5 pages_panel--pagesRowSpacer--2ASia":"pages_panel--pageRowSpacerInsertAfter--6kYkh pages_panel--pagesRowSpacer--2ASia"),e.isDivider&&(a=ea()(a,"pages_panel--dividerRowSpacer--5WdCQ")),Q.createElement("div",{key:e.nodeId},Q.createElement("div",{className:a},Q.createElement(ga,{width:this.props.width,nodeId:e.nodeId,nodeName:e.name,pageType:e.pageType,hasMultiplePageTypes:t,shouldShowGuids:this.props.shouldShowGuids,isRenaming:this.state.renamingPageGuid===e.nodeId,startRenaming:this.startRenamingPage,stopRenaming:this.stopRenamingPage,isSelected:r(e.nodeId),isDivider:e.isDivider,onMouseDownCallback:this.onReorderPageMouseDown,onMouseUpCallback:this.onReorderPageMouseUp,onMouseMoveCallback:this.onReorderPageMouseMove,reorderingPageGuids:this.state.reorderingPageGuids,selectedPageGuids:this.state.selectedPageGuids,onClickCallback:this.onPageClick,onContextMenuCallback:this.onContextMenu,showMemoryUsage:this.props.showMemoryUsage,showInFileMemoryPercentage:this.props.showInFileMemoryPercentage,currentPageGuid:this.props.currentPageGuid,versionHistory:this.props.versionHistory,isComparingChanges:this.props.isComparingChanges,pageToNumChanges:this.props.pageToNumChanges,index:n,isOffline:this.state.isOffline,selectedView:this.props.selectedView,pagesList:this.props.pagesList})))}),a&&Q.createElement("div",{className:"pages_panel--showAllButtonContainer--I73hV"},a),l>1&&l<1/0&&!i&&Q.createElement(gm,{setUpsellHeightCallback:this.setUpsellHeight}))))}renderObjectsPanelUi2(){var e;let t=this.props.isLoadingPage,n=(null==(e=this.props.openFile)?void 0:e.thumbnailGuid)||null;return Q.createElement(f5.XK,{hasPending:t,isReadOnly:this.props.isReadOnly,currentPage:this.props.currentPageGuid,onScroll:this.onObjectScroll,initialScrollTop:this.objectScrollTop,width:this.props.width,shouldShowGuids:this.props.shouldShowGuids,stickyOffset:this.state.stickyOffset,renamingGuid:this.state.renamingNodeGuid,startRenaming:this.startRenamingNode,stopRenaming:this.stopRenamingNode,thumbnailGuid:n,versionHistory:this.props.versionHistory})}renderObjectsPanelUi3(){var e;let t=this.props.selectedView,n="whiteboard"===t.editorType,a=(0,mL.P2)(t),r=(0,mP.Vj)(t),l=this.props.isLoadingPage,i=(null==(e=this.props.openFile)?void 0:e.thumbnailGuid)||null,o=this.state.renamingNodeGuid;if(r&&this.props.isSitesWebpagesOpen){let e=tN.qo.instance.get(this.state.renamingNodeGuid||"");(null==e?void 0:e.isResponsiveSet)&&(o=null)}return n||a?null:Q.createElement(Q.Fragment,null,Q.createElement("div",{className:cf,onContextMenu:this.onContextClickNothing,onClick:this.toggleLayersExpanded,role:"button",tabIndex:0,ref:this.stickyBelowRef},Q.createElement("div",{className:ea()(cE,{[cv]:!this.state.isLayersOpen})},this.state.isLayersOpen?Q.createElement(co.O,null):Q.createElement(cs.k,null),Q.createElement(eO.Tx,{id:"fullscreen.pages_panel.layers_tab"}))),this.state.isLayersOpen&&Q.createElement(f5.XK,{hasPending:l,isReadOnly:this.props.isReadOnly,currentPage:this.props.currentPageGuid,onScroll:this.onObjectScroll,initialScrollTop:this.objectScrollTop,width:this.props.width,shouldShowGuids:this.props.shouldShowGuids,stickyOffset:this.state.stickyOffset,renamingGuid:o,startRenaming:this.startRenamingNode,stopRenaming:this.stopRenamingNode,thumbnailGuid:i,versionHistory:this.props.versionHistory}))}renderTabsRow(e,t){let n=(0,eo.kc)().ds_updates_toast_deprecation;return Q.createElement("div",{className:ck},this.props.showTabs&&Q.createElement(Q.Fragment,null,Q.createElement(m8,{onClick:()=>{(0,cm._)(this.props.dispatch,this.props.selectedView),this.showLayersPanel(),lT.Y5.triggerAction("canvas-search",{source:"toolbar"})}}),Q.createElement(ns.Bx,{className:e===eU.xae.LAYERS?cC:cb,onMouseDown:this.showLayersPanel,onContextMenu:this.onContextClickNothing,"data-label":(0,eO.t)("fullscreen.pages_panel.layers_tab"),recordingKey:nh.Pt(this.props,"tab","layers"),innerText:"Layers"},Q.createElement(eO.Tx,{id:"fullscreen.pages_panel.layers_tab"})),Q.createElement(ns.Bx,{className:cS,onMouseDown:this.showPublish,onContextMenu:this.onContextClickNothing,recordingKey:nh.Pt(this.props,"tab","assets"),innerText:"Assets","data-onboarding-key":mM.Qr},this.props.hasTeamLibraryUpdates&&!n&&Q.createElement("span",{className:cI}),Q.createElement("div",{className:e===eU.xae.ASSETS?cC:cb,"data-label":(0,eO.t)("fullscreen.pages_panel.assets_tab")},Q.createElement("div",null,Q.createElement(eO.Tx,{id:"fullscreen.pages_panel.assets_tab"}),Q.createElement(gf,null))))),!this.props.showTabs&&Q.createElement("div",{className:this.props.isComparingChanges||this.props.isDevHandoff?cA:void 0},Q.createElement(m8,{onClick:()=>{(0,cm._)(this.props.dispatch,this.props.selectedView),this.showLayersPanel(),lT.Y5.triggerAction("canvas-search",{source:"toolbar"})}})),Q.createElement(ns.D8,{className:ea()(cw,{[cT]:!this.props.showTabs,[cx]:!this.props.showTabs}),onClick:e===eU.xae.ASSETS?this.forcePagesExpanded:this.togglePagesExpanded,onContextMenu:this.onContextClick,recordingKey:nh.Pt(this.props,"collapsedRow")},Q.createElement("span",{className:cN,"data-onboarding-key":"pages-panel-toggle"},this.props.currentPageName||""),Q.createElement(eM.B,{className:ch,svg:t})))}renderTabsRowUi3(e){let t=(0,eo.kc)().ds_updates_toast_deprecation;if(!this.props.showTabs)return null;let n=(0,mP.Vj)(this.props.selectedView);return Q.createElement("div",{className:ck},this.props.showTabs&&Q.createElement("div",{className:"pages_panel--sidebarLeftHeadingTabStrip--2qRhH"},Q.createElement(ns.Bx,{className:e===eU.xae.LAYERS?cC:cb,onMouseDown:this.showLayersPanel,onContextMenu:this.onContextClickNothing,"data-label":(0,eO.t)("fullscreen.pages_panel.file_tab"),recordingKey:nh.Pt(this.props,"tab","layers"),innerText:"File"},Q.createElement(eO.Tx,{id:"fullscreen.pages_panel.file_tab"})),n&&Q.createElement(ns.Bx,{className:e===eU.xae.KITS_SITES?cC:cb,onMouseDown:this.showSitesBlocksPanel,onContextMenu:this.onContextClickNothing,"data-label":(0,eO.t)("fullscreen.pages_panel.resources_tab"),recordingKey:nh.Pt(this.props,"tab","layers-sites"),innerText:"Layers"},Q.createElement(eO.Tx,{id:"fullscreen.pages_panel.resources_tab"})),Q.createElement(ns.Bx,{className:cS,onMouseDown:this.showPublish,onContextMenu:this.onContextClickNothing,recordingKey:nh.Pt(this.props,"tab","assets"),innerText:"Assets","data-onboarding-key":mM.Qr},this.props.hasTeamLibraryUpdates&&!t&&Q.createElement("span",{className:cI}),Q.createElement("div",{className:e===eU.xae.ASSETS?cC:cb,"data-label":(0,eO.t)("fullscreen.pages_panel.assets_tab")},Q.createElement("div",null,Q.createElement(eO.Tx,{id:"fullscreen.pages_panel.assets_tab"}))))),Q.createElement("div",{className:"pages_panel--sidebarLeftHeadingIcons--VMQcd"},n&&Q.createElement(aJ.K0,{"aria-label":(0,eO.t)("sites.panel.see_warnings"),onClick:()=>{this.setState({showSitesLintingModal:!0})},"data-tooltip-type":nO.Ib.TEXT,"data-tooltip":(0,eO.t)("sites.panel.see_warnings")},Q.createElement(cc.Z,null)),e===eU.xae.LAYERS&&Q.createElement(m8,{onClick:()=>{(0,cm._)(this.props.dispatch,this.props.selectedView),lT.Y5.triggerAction("canvas-search",{source:"toolbar"})}}),!this.props.isUI3&&Q.createElement(aJ.K0,{"aria-label":(0,eO.t)("fullscreen_actions.hide-sidebar"),onClick:this.props.toggleIsCollapsed,"data-tooltip-type":nO.Ib.TEXT,"data-tooltip":(0,eO.t)("fullscreen_actions.hide-sidebar"),"data-tooltip-shortcut-key":"toggle-sidebar"},Q.createElement(f7,null)),e===eU.xae.ASSETS&&this.props.showRedesignedAssetsPanel&&this.props.isUI3&&Q.createElement(dP,{onSetKeyboardNavigationElement:()=>null,entrypoint:dd.r6.ASSETS_PANEL_BUTTON})))}render(){let e=this.props.openFile?this.props.activeTab:eU.xae.LAYERS,t=this.props.openFile,n=this.props.isLoadingPage,a=this.props.isUI3,r=e===eU.xae.LAYERS||this.props.isReadOnly,l=(0,mP.Vj)(this.props.selectedView),i=(0,sZ.$A)(this.props.selectedView),o=this.state.isPagesOpen,s=!l&&r&&(!!a||o),c=this.state.isPagesOpen&&this.props.activeTab===eU.xae.LAYERS?gh.A:oQ.A,d=this.props.pagesList.some(e=>e.pageType!==this.props.pagesList[0].pageType);return Q.createElement("div",{className:ea()("pages_panel--pagesPanel--YVSDg",{pagesPanel:!n,"pages_panel--verticalFlexContainer--9uwfT pages_panel--verticalFlexBase--7-e0s":!this.props.isShowingSlidesCarousel,"pages_panel--verticalFlexBase--7-e0s":this.props.isShowingSlidesCarousel})},this.props.isComparingChanges&&r&&Q.createElement("div",{className:ck},Q.createElement(pl,null)),(!o||this.props.showTabs)&&(i?this.props.isUI3?void 0:Q.createElement(gl,{togglePagesExpanded:this.togglePagesExpanded,onContextClick:this.onContextClick,currentPageName:this.props.currentPageName,currentPageGuid:this.props.currentPageGuid,pageTabChevron:c,isOverview:this.props.isDevHandoffOverview}):a?this.renderTabsRowUi3(e):this.renderTabsRow(e,c)),(0,eo.kc)().dt_dev_mode_workflows&&e===eU.xae.LAYERS&&Q.createElement(cL,null),t&&Q.createElement(mz,{fileKey:t.key,toggleManageMemoryModal:this.toggleManageMemoryModal,closeManageMemoryModal:()=>{this.isManageMemoryModalShown()&&this.props.dispatch(n9.Ce())}}),l&&r&&Q.createElement(mA.j8,{scrollContainerRef:this.scrollContainerRef,width:this.props.width,height:this.state.webpagesListHeight,defaultHeight:this.defaultHeight(!0),onScroll:this.onObjectScroll,onResize:e=>{this.setState({webpagesListHeight:e}),eV.Uc("")},initialScrollTop:this.objectScrollTop,currentPageGuid:this.props.currentPageGuid,isComparingChanges:this.props.isComparingChanges,needsScrollLine:this.state.needsScrollLine,renamingNodeGuid:this.state.renamingNodeGuid,startRenamingNode:this.startRenamingNode,stopRenamingNode:this.stopRenamingNode}),s&&Q.createElement("div",{ref:a?void 0:this.stickyBelowRef,onClick:e=>e.stopPropagation(),role:"none"},Q.createElement("div",{className:"pages_panel--pagesPanelContent--ZGkcM pages_panel--pagesPanelContentWhiteboard--gUJEi"},a?this.renderHeaderRowUi3(d):this.renderHeaderRowUi2(),o&&this.renderPagesList(n,d))),r&&!this.props.isDevHandoff&&!this.props.isDevHandoffOverview&&Q.createElement("div",{className:"pages_panel--objectPanelContent--Zy2S3"},a?this.renderObjectsPanelUi3():this.renderObjectsPanelUi2()),e===eU.xae.KITS_SITES&&Q.createElement(mA.oT,null),e===eU.xae.ASSETS&&!this.props.isReadOnly&&Q.createElement(Q.Fragment,null,this.props.showRedesignedAssetsPanel?this.renderAssetPanelUi3():this.renderAssetPanelUi2()),this.state.showSitesLintingModal&&Q.createElement(mA.jK,{onClose:()=>{this.setState({showSitesLintingModal:!1})}}))}}function gC({width:e,isReadOnly:t,pagesList:n,activeTab:a,showTabs:r,hasTeamLibraryUpdates:l,isDevHandoff:i,isShowingSlidesCarousel:o,isDevHandoffOverview:s,disableCollapsing:c,isComparingChanges:d,pageToNumChanges:u,isPageCreationEnabled:m=!0,recordingKey:p}){var _;let f=(0,eG.J2)((0,eH.UK)().showGuids),h=(0,$.wA)(),g=(0,eG.J2)(eU.Ez5.uiState().showMemoryUsage),E=(0,eG.J2)(eU.Ez5.uiState().showInFileMemoryPercentage),v=(0,eG.J2)(null==(_=eU.Ez5)?void 0:_.currentPageState().requestedPageChange),y=(0,cG._Z)(),b=(0,ef.md)(g_),C=(0,aD.GS)(),w=(0,dj.M)()&&C,{toggleLeftPanelCollapsed:T}=(0,ci.Ye)(),x=(0,eG.J2)(eU.Ez5.editorState().selectionEmpty),N=(0,at.iZ)(),k=(0,mk.lV)(),S=(0,t_.q5)(),I=(0,$.d4)(e=>e.versionHistory),A=(0,lx._6)(),P=(0,$.d4)(e=>e.fileVersion),O=(0,$.d4)(e=>e.teams),L=(0,$.d4)(e=>e.loadingState),M=(0,$.d4)(e=>e.modalShown),D=(0,aX.U)(),R=(0,cH.dh)(),F=(0,cH.nn)(),B=(0,ef.md)(mI),U=(0,cH.rE)();!function(){let e=(0,t_.q5)(),t=window.FigmaMobile,n=(0,cH.rE)();(0,Q.useEffect)(()=>{t&&(t._select_page=async e=>{await tN.qo.instance.setCurrentPageAsync(e)})},[t]),(0,Q.useEffect)(()=>{t&&(t._rename_page=(t,n)=>{(0,cH.CQ)({openFile:e,pageId:t,newName:n})})},[t,e]),(0,Q.useEffect)(()=>{t&&(t._delete_page=e=>{lT.Y5.triggerActionInUserEditScope("page-delete",{args:{nodeId:e}}),lT.Y5.commit()})},[t]),(0,Q.useEffect)(()=>{t&&(t._create_page=()=>{n(null)})},[t,n])}();let[H,V]=Q.useState(!1);return Q.useEffect(()=>{C&&!x&&V(!0)},[x,C]),Q.createElement(gb,{showMemoryUsage:g,showInFileMemoryPercentage:E,versionHistory:I,user:N,width:e,isReadOnly:t,currentPageGuid:R,currentPageName:F,pagesList:n,createNewPageWithPaywallUserInitiated:U,activeTab:a,showTabs:r,hasTeamLibraryUpdates:l,isDevHandoff:i,isDevHandoffOverview:s,disableCollapsing:c,isComparingChanges:d,isShowingSlidesCarousel:o,pageToNumChanges:u,openFile:S,selectedView:A,fileVersion:P,teams:O,loadingState:L,modalShown:M,dropdownShown:D,recordingKey:p,shouldShowGuids:f,dispatch:h,isLoadingPage:y.isLoading,isPagesOpenOverride:b,isLayersOpenOverride:H,isUI3:C,toggleIsCollapsed:T,requestedPageChange:v,showRedesignedAssetsPanel:w,markAssetPanelLoadingStart:k,publishableCanvasId:!1,isSitesWebpagesOpen:B,isPageCreationEnabled:m})}function gw(){let e=(0,eH.dP)(),t=(0,ti._I)(),n=(0,c_.l7)(),a=(0,ci.n0)();return Q.createElement("div",null,Q.createElement(gC,{recordingKey:"pagesPanel",isReadOnly:!0,width:e,pagesList:a,hasTeamLibraryUpdates:!1,activeTab:cl.xae.LAYERS,showTabs:t&&!n,disableCollapsing:!t,isDevHandoff:!0,isDevHandoffOverview:n,isComparingChanges:!1}))}gb.displayName="PagesPanelView";var gT=n(121e3),gx=n(844729),gN=n(706348);function gk(){let e=(0,gx.T)("quick_handoff"),t=(0,eO.t)("dev_handoff.paywall.ready_for_dev.title"),n=Q.createElement(eO.Tx,{id:"dev_handoff.paywall.ready_for_dev.description",learnMoreLink:Q.createElement(ns.oj,{className:gN.n$,onClick:e,recordingKey:"dev_mode_nodes_features_learn_more"},Q.createElement(eO.Tx,{id:"dev_handoff.paywall.learn_more"}))});return Q.createElement(gT.y,{imgSrc:"https://static.figma.com/uploads/a102b55802313a2c26048dd8b64355434ffecd45",panelWidth:240,title:t,content:n,dataTestId:"dev-mode-panel-upsell-nodes"})}function gS(){return Q.createElement(tQ,null,Q.createElement(tJ.$B,{width:240,disableResizing:!0},Q.createElement("div",{className:ea()(eK.Dm,ow),"data-testid":"devHandoffLimitedLeftPanel"},Q.createElement(gw,null),Q.createElement(gk,null))))}var gI=n(878515),gA=n(994358);function gP(){return Q.createElement("div",{className:"dev_handoff_comments_panel--devHandoffCommentsPanel--1Lqo9"},Q.createElement(gI.j9.Consumer,null,()=>Q.createElement(gA.B,{stackHeader:!1,hideResolve:!1})))}var gO=n(877822),gL=n(452555),gM=n(125408),gD=n(534733),gR=n(796206),gF=n(725946);function gB(){let{setCurrentView:e,currentPluginView:t}=function(){let e=(0,e_.Xr)(gF.hO),[t,n]=(0,ef.fp)(gF.HT),a=(0,gO.AY)(gF.HT),r=Q.useCallback(()=>{e(t)},[t,e]),l=Q.useCallback(({newView:e})=>{e&&t!==e&&(r(),n(e))},[t,n,r]);return Q.useEffect(()=>{r()},[r]),Q.useEffect(()=>()=>{a()},[a]),Q.useMemo(()=>({currentPluginView:t,setCurrentView:l}),[t,l])}(),n=(0,$.wA)(),a=Q.useMemo(()=>({activeTab:gR.s.PLUGIN,viewResource:e=>{n(gL.IN({fdPreviewResource:e}))},closeResource:()=>{n(gL.IN({fdPreviewResource:void 0}))},setCurrentViewOrTab:e,currentView:t,closeModal:()=>{},pinModal:()=>{}}),[n,e,t]);return Q.createElement(nk.Y,{direction:"vertical",spacing:0,height:"fill-parent"},Q.createElement(gD.B0.Provider,{value:a},Q.createElement(gM.z,null)))}var gU=n(210504);let gH=(0,rT.jz)(tI.devHandoffRightPanelWidth);function gV(){let e=(0,gx.T)("advanced_inspection"),t=(0,eO.t)("dev_handoff.paywall.inspection.title"),n=Q.createElement(eO.Tx,{id:"dev_handoff.paywall.inspection.description",learnMoreLink:Q.createElement(ns.oj,{className:gN.n$,onClick:e,recordingKey:"dev_mode_inspect_panel_learn_more"},Q.createElement(eO.Tx,{id:"dev_handoff.paywall.learn_more"}))});return Q.createElement(gT.y,{imgSrc:"https://static.figma.com/uploads/5d71630923f3b7231a12bd959018c1cc569985cc",panelWidth:gH,title:t,content:n,dataTestId:"dev-mode-panel-upsell-inspect"})}function gG(){let e=(0,n7.VI)(),t=(0,ep.R)(e=>e.mirror.appModel.activeCanvasEditModeType),n=(0,gx.T)("track_changes"),a=null==e?void 0:e.isSymbol,r=e?se(e):Q.createElement(eO.Tx,{id:"dev_handoff.paywall.no_selection"});return Q.createElement(nL.VZ,{hideHeader:!0,padding:nL.UZ.NONE,noBorder:!0,recordingKey:"layerName"},Q.createElement("div",{className:oP},Q.createElement("div",{className:oO},Q.createElement("div",{className:oL},Q.createElement("div",{className:oR},Q.createElement(ns.D8,{dir:"auto",className:oU},r),Q.createElement("div",{className:oM})),Q.createElement("div",{className:oF},Q.createElement("span",{className:oD},e&&Q.createElement(ej.Bf,{className:a?oV:oH,guid:e.id,editModeType:t}),Q.createElement("span",{className:a?oK:oG},(null==e?void 0:e.type)??"\u2014")),Q.createElement(nc.u4,{defaultClass:ea()(oW,oz),onClick:n,recordingKey:"dev-mode-compare-changes-upsell",dataTestId:"dev-mode-panel-upsell-compare-changes"},Q.createElement("span",{className:ea()(oj,oY)},Q.createElement(eO.Tx,{id:"inspect_panel.history.compare_changes"}))))))))}let gK="inspect_panel--inspectPanelContainer--SZhfY";function gW(){return Q.createElement("div",{className:gK},Q.createElement(gG,null),Q.createElement(gV,null))}let gz="dev_handoff_right_panel_container--panelContainer--XcbIk dev_handoff_right_panel_container--panelContainerBase--npHfL",gj="dev_handoff_right_panel_container--panelContainerResizing--sfFQd dev_handoff_right_panel_container--panelContainerResizingBase--OZRr- dev_handoff_right_panel_container--panelContainer--XcbIk dev_handoff_right_panel_container--panelContainerBase--npHfL",gY="dev_handoff_right_panel_container--panelContainerHidden--7-A2P dev_handoff_right_panel_container--panelContainer--XcbIk dev_handoff_right_panel_container--panelContainerBase--npHfL",gZ="dev_handoff_right_panel_container--content--HcUHi";var gX=n(641160);function gq(){let e=(0,$.d4)(e=>e.mirror.appModel.showUi),t=(0,$.d4)(e=>e.mirror.appModel.currentTool===tz.ec.tool),n=(0,ef.md)(tj.H),a=n===tj._.PRIMARY&&!t,r=n===tj._.PLUGIN,l=e?gz:gY;return Q.createElement(gU.vL,{name:"rightPanels",focusOnMount:!0,handleKeyDown:ey.lQ,className:gX.Lp},Q.createElement("div",{"data-testid":"devHandoffLimitedInspectPanel",className:gX.ux},Q.createElement("div",{className:`${l} ${gX.KE} ${eK.Dm}`,style:{width:320}},Q.createElement(aj,null),Q.createElement(cu.V,{className:gZ},t&&Q.createElement(gP,null),a&&Q.createElement(gW,null),r&&Q.createElement(gB,null)))))}let gJ=(0,tc.Fu)("dev_handoff_has_seen_dev_mode"),gQ=(0,tc.Fu)("dev_handoff_has_seen_dev_mode_ga");function g$(){return function(){let e=(0,$.d4)(e=>e.currentUserOrgId),t=(0,$.d4)(e=>e.currentTeamId),n=(0,$.d4)(e=>{var t;return null==(t=e.openFile)?void 0:t.teamId})||null,a=(0,$.wA)(),r=(0,ef.md)(gJ),l=(0,Q.useRef)(!1);(0,Q.useEffect)(()=>{l.current||"loaded"!==r.status||(l.current=!0,a(tB.b({dev_handoff_has_seen_dev_mode:!0,dev_handoff_has_seen_dev_mode_ga:!0})))},[r,a,e,t||n])}(),null}var g0=n(186618);let g1="dev_mode_seen_end_of_beta_modal",g2=(0,tc.Fu)(g1);function g5(){let e=(0,ef.md)(gJ),t=(0,ef.md)(gQ),n=(0,d4.ol)(),a=(0,t_.tS)()??"",r=(0,eh.Rs)(tf.HdA,{key:a}),l=(0,ef.md)(g2),i=(0,t4.qZ)(),o=(0,t4.nH)(),s=(0,$.wA)(),{show:c,isShowing:d,complete:u}=(0,tp.e)({overlay:tv.aIY,priority:th.N.HIGH_PRIORITY_MODAL},[l,e,t,r]);(0,ts.h)(()=>{c({canShow:(e,t,n,a)=>{var r;return!e&&!!t&&!n&&!!(null==(r=null==a?void 0:a.file)?void 0:r.hasPermission)}})});let m=Q.useCallback(()=>{u(),s(tB.b({[g1]:!0}))},[s,u]),p=i?o?Q.createElement(eO.Tx,{id:"dev_handoff.paywall.end_of_beta_modal.description.starter_viewer"}):Q.createElement(eO.Tx,{id:"dev_handoff.paywall.end_of_beta_modal.description.starter"}):Q.createElement(eO.Tx,{id:"dev_handoff.paywall.end_of_beta_modal.description.restricted"}),_=i?Q.createElement(eO.Tx,{id:"dev_handoff.paywall.end_of_beta_modal.cta.starter"}):Q.createElement(eO.Tx,{id:"dev_handoff.paywall.get_dev_mode"}),f=(0,t4.BC)({dismissModal:m,labelOverride:_}),h=Q.useCallback(()=>{f.hidden||f.onClick(t3.i$.BetaOver)},[f]);if(!d)return null;let g={teamId:null==n?void 0:n.id},E=f.hidden?{type:"button",label:Q.createElement(eO.Tx,{id:"general.got_it"}),onClick:m,ctaTrackingDescriptor:c5.c.GOT_IT,trackingProperties:g,dataTestId:"dev-mode-end-of-beta-modal-cta"}:{type:"button",label:f.label,onClick:h,disabled:f.disabled,ctaTrackingDescriptor:c5.c.CONTINUE,trackingProperties:g,dataTestId:"dev-mode-end-of-beta-modal-cta"};return Q.createElement(g0._l,{isShowing:d,userFlagOnShow:g1,title:Q.createElement("span",{style:{fontSize:20}},Q.createElement(eO.Tx,{id:"dev_handoff.paywall.end_of_beta_modal.title"})),description:p,media:Q.createElement("img",{width:332,src:"https://static.figma.com/uploads/bcbebab786a453cd65a6b0e36b7546d5cc91e32f",alt:"An illustration explaining the end of the beta"}),closeButtonColor:"light",primaryCta:E,secondaryCta:{type:"link",label:Q.createElement(eO.Tx,{id:"dev_handoff.paywall.learn_more"}),href:"https://help.figma.com/hc/en-us/articles/20652568757399",ctaTrackingDescriptor:c5.c.LEARN_MORE,trackingProperties:g},trackingContextName:"Dev Mode Beta Ended Modal",trackingProperties:{teamId:null==n?void 0:n.id},onClose:m})}var g4=n(422053);let g3="vscode_paywall--vscodePaywallBody--SlfC- text--fontPos13--xW8hS text--_fontBase--QdLsd",g6="vscode_paywall--upgradeButton--otPw3";var g7=n(85205);function g8({fileKey:e,teamId:t,folderId:n,parentOrgId:a,canAccessDevModeEntryPoint:r}){let l=(0,t4.w_)(),i=[(0,eO.t)("dev_handoff.paywall.vscode.list1"),(0,eO.t)("dev_handoff.paywall.vscode.list2"),(0,eO.t)("dev_handoff.paywall.vscode.list3"),(0,eO.t)("dev_handoff.paywall.vscode.list4")],o=Q.useCallback(()=>{(0,er.sx)("Dev Mode Paywall clicked",{entryPoint:"vscode_paywall",type:"VS Code Upgrade CTAAAA",fileKey:e,fileTeamId:t,fileParentOrgId:a,containingFolderId:n},{forwardToDatadog:!0}),(0,a8.Qn)(`/file/${e}?mode=dev&dev-mode-features-modal=plugins_extensions`)},[e,n,a,t]),s=Q.useCallback(()=>{(0,er.sx)("Dev Mode Paywall clicked",{entryPoint:"vscode_paywall",type:"VS Code Open docs",fileKey:e,fileTeamId:t,fileParentOrgId:a,containingFolderId:n},{forwardToDatadog:!0}),(0,a8.Qn)("https://help.figma.com/hc/en-us/articles/15023121296151-Figma-for-VS-Code")},[e,n,a,t]),c=Q.useCallback(()=>{(0,er.sx)("Dev Mode Paywall clicked",{entryPoint:"vscode_paywall",type:"VS Code Play Video",fileKey:e,fileTeamId:t,fileParentOrgId:a,containingFolderId:n},{forwardToDatadog:!0})},[e,n,a,t]),d=Q.useCallback(()=>{(0,er.sx)("Dev Mode Paywall clicked",{entryPoint:"vscode_paywall",type:"VS Code Finish Video",fileKey:e,fileTeamId:t,fileParentOrgId:a,containingFolderId:n},{forwardToDatadog:!0})},[e,n,a,t]);return Q.createElement("div",{className:"vscode_paywall--wrapper--hZt-E"},Q.createElement("div",{className:tw.cx.flex.maxWFull.wFull.hFull.$},Q.createElement("div",{className:tw.cx.flex.flexGrow0.flexColumn.pl32.pt32.$},Q.createElement(eM.B,{dataTestId:"logo",title:"logo",ariaLabel:"logo",svg:g7.A,useOriginalSrcFills_DEPRECATED:!0})),Q.createElement("div",{className:tw.cx.flex.flexGrow1.flexColumn.justifyCenter.alignTop.pt32.pl20.pr32.pb32.$},Q.createElement("div",{className:"vscode_paywall--vscodePaywallTitle--EHf7Y text--fontPos24--YppUD text--_fontBase--QdLsd"},Q.createElement(eO.Tx,{id:"dev_handoff.paywall.vscode.title"})),Q.createElement(nc.Kz,{direction:"y",multiple:1}),Q.createElement("div",{className:g3},Q.createElement(eO.Tx,{id:"dev_handoff.paywall.vscode.description"})),Q.createElement(nc.Kz,{direction:"y",multiple:3}),Q.createElement("ul",{className:"vscode_paywall--vscodePaywallList--cOYFz"},i.map((e,t)=>Q.createElement("li",{key:t,className:"vscode_paywall--vscodePaywallListItem--GaTSA text--fontPos11--2LvXf text--_fontBase--QdLsd"},e))),Q.createElement(nc.Kz,{direction:"y",multiple:3}),Q.createElement("div",{className:g3},r?Q.createElement(eO.Tx,{id:"dev_handoff.paywall.vscode.need_access",devMode:Q.createElement("strong",null,Q.createElement(eO.Tx,{id:"dev_handoff.paywall.vscode.need_access_dev_mode"}))}):Q.createElement(eO.Tx,{id:"dev_handoff.paywall.vscode.no_access"})),Q.createElement(nc.Kz,{direction:"y",multiple:3}),Q.createElement("div",{className:"vscode_paywall--vscodePaywallButtons--7F6yh"},r&&l?Q.createElement(tC.$$,{className:g6,disabled:!0},Q.createElement(eO.Tx,{id:"dev_handoff.paywall.request_pending"})):Q.createElement(tC.$$,{className:g6,onClick:o,disabled:!r},Q.createElement(eO.Tx,{id:"dev_handoff.paywall.get_dev_mode"})),Q.createElement(nc.nR,{className:"vscode_paywall--docsButton--vEf-q",onClick:s},Q.createElement(eO.Tx,{id:"dev_handoff.paywall.vscode.view_button"}))),Q.createElement(nc.Kz,{direction:"y",multiple:5}),Q.createElement("div",{className:"vscode_paywall--vscodeVideoDescription--G16yH text--fontPos11--2LvXf text--_fontBase--QdLsd"},Q.createElement(eO.Tx,{id:"dev_handoff.paywall.vscode.video"})),Q.createElement(nc.Kz,{direction:"y",multiple:1}),Q.createElement("div",{className:"vscode_paywall--vscodeVideoContainer--RVGWt"},Q.createElement("video",{controls:!0,className:"vscode_paywall--vscodeVideo--Te60B",src:"https://static.figma.com/uploads/vscode_intro_1200.mp4",onPlay:c,onEnded:d})))))}function g9(){let e=(0,t_.q5)(),t=(0,ti.U4)();return Q.createElement(g4.M,{isShowing:!0},Q.createElement(g8,{fileKey:(null==e?void 0:e.key)||"",teamId:(null==e?void 0:e.teamId)||"",parentOrgId:(null==e?void 0:e.parentOrgId)||"",folderId:(null==e?void 0:e.folderId)||"",canAccessDevModeEntryPoint:t}))}function Ee(){let e=(0,$.wA)(),t=(0,lx._6)(),n=(0,$.d4)(e=>e.mirror.appModel.currentPage),a=Q.useMemo(()=>aZ.z4.getIsExtension(),[]),r=(0,$.d4)(e=>e.selectedView.devModeUpsellModalTab),l=(0,gx.T)(r),i=(0,d4.ol)(),o=(0,tZ.O)(),s=(0,tm.HV)(),c=(0,tm.bZ)();Q.useEffect(()=>{if(r){l();let n={...t,devModeUpsellModalTab:void 0};e(nP.$T(n))}},[r,e,l,t]),Q.useEffect(()=>{(0,eH.UK)().sidebarSplitPosition.set(240),(0,eH.UK)().devHandoffInspectSplitPosition.set(320)},[]),tY({doReport:!1});let[d,u]=(0,ef.fp)(tX.qI);return(Q.useEffect(()=>()=>{s&&u(tX.cI.DEFAULT)},[s,u]),a)?Q.createElement(g9,null):s?Q.createElement(t6.fu,{name:"Dev Mode Paywall",properties:c,enabled:(null==c?void 0:c.gracePeriod)!==void 0},Q.createElement(nl,null),Q.createElement(t1,null),Q.createElement(cr,null)):Q.createElement(t6.fu,{name:"Dev Mode Paywall",properties:{teamId:null==i?void 0:i.id,currentPlan:o}},Q.createElement(g5,null),Q.createElement(gS,{key:n}),Q.createElement(gq,null))}var Et=n(445865),En=n(26945),Ea=n(689199),Er=n(459911),El=n(158423),Ei=n(360897),Eo=n(147944),Es=n(765982);let Ec="dev_handoff_seen_annotation_introduction_overlay",Ed="dev_handoff_seen_annotation_tools_overlay",Eu="dev_handoff_seen_annotation_upsell_overlay",Em=(0,tc.r1)(Ed),Ep=(0,tc.r1)(Ec);function E_(){let e=(0,$.wA)(),t=(0,ef.md)(Es.wg),n=(0,ae.aV)(),a=(0,ef.md)(Ep),r=(0,ef.md)(Em),{uniqueId:l,show:i,complete:o,isShowing:s}=(0,tp.e)({overlay:tv.kc4,priority:th.N.SECONDARY_MODAL+1},[a,r]);function c(){e(tB.b({[Ed]:!0})),o()}Q.useEffect(()=>{!n&&t&&i({canShow:(e,t)=>e&&!t})},[n,i,t]),Q.useEffect(()=>{"loaded"===r.status&&r.data&&o()},[r,o]);let d=(0,c4.A)({numSteps:2,onComplete:c});return(0,Eo.E)(l,"action_set_tool_annotate",()=>{s&&0===d.currentStep&&d.next()}),Q.createElement(c8.U,{currentStep:d.currentStep,isShowing:s},Q.createElement(c9.rq,{emphasized:!0,isShowing:s,trackingContextName:`${Ed}_measurements`,onClose:c,targetKey:"tool-measurements-onboarding",title:Q.createElement(eO.Tx,{id:"dev_handoff.annotations_tools_overlay.measurements.title"}),description:Q.createElement(eO.Tx,{id:"dev_handoff.annotations_tools_overlay.measurements.description"}),primaryCta:{label:Q.createElement(eO.Tx,{id:"rcs.rcs_shared.next"}),type:"button",onClick:d.next,ctaTrackingDescriptor:c5.c.NEXT},stepCounter:{stepNum:1,totalNumSteps:2}}),Q.createElement(c9.rq,{emphasized:!0,isShowing:s,trackingContextName:`${Ed}_annotations`,onClose:c,targetKey:"tool-annotations-onboarding",title:Q.createElement(eO.Tx,{id:"dev_handoff.annotations_tools_overlay.annotations.title"}),description:Q.createElement(eO.Tx,{id:"dev_handoff.annotations_tools_overlay.annotations.description"}),primaryCta:{label:Q.createElement(eO.Tx,{id:"rcs.rcs_shared.done"}),type:"button",onClick:d.next,ctaTrackingDescriptor:c5.c.DONE},stepCounter:{stepNum:2,totalNumSteps:2}}))}var Ef=n(453672),Eh=n(188012),Eg=n(245470),EE=n(801772),Ev=n(892314),Ey=n(774046);function Eb(e){var t,n;let a=(0,$.wA)(),r=(0,aX.U)(),l=(null==r?void 0:r.type)===Eh.eg;return(0,$.d4)(e=>e.isRenaming)?null:Q.createElement("div",null,Q.createElement(EE.c,{isUI3:!0,dropdownKey:Eh.eg,showingDropdown:l,tabIndex:0,ariaLabel:(0,eO.t)("fullscreen.filename_view.edit_file_menu"),dataTestId:"filename-menu-chevron",recordingKey:nh.Pt(e.recordingKey,"chevron"),dataOnboardingKey:Eh.O0,dispatch:a,toggleOnClick:!0}),(0,Eg.MP)()&&Q.createElement(Ey.e,{isUI3:!0,targetKey:Eh.O0}),!!l&&Q.createElement(Ev.G,{dropdownTargetRect:null==(t=r.data)?void 0:t.targetRect,dispatch:a,dropdownVisible:l,recordingKey:e.recordingKey,activatePathOnMount:null==(n=null==r?void 0:r.data)?void 0:n.activatePathOnMount,trackEvent:er.sx}))}function EC(e){return Q.createElement("svg",{width:"16",height:"16",fill:"none",viewBox:"0 0 16 16",...e},Q.createElement("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M3 4.5a.5.5 0 0 1 .5-.5h1A2.5 2.5 0 0 1 7 6.5v2A1.5 1.5 0 0 0 8.5 10h2.793l-1.147-1.146a.5.5 0 0 1 .708-.708l2 2a.5.5 0 0 1 0 .708l-2 2a.5.5 0 0 1-.708-.708L11.293 11H8.5A2.5 2.5 0 0 1 6 8.5v-2A1.5 1.5 0 0 0 4.5 5h-1a.5.5 0 0 1-.5-.5Zm5.5 0A.5.5 0 0 1 9 4h3.5a.5.5 0 0 1 0 1H9a.5.5 0 0 1-.5-.5Z",clipRule:"evenodd"}))}function Ew(e){let t=(0,t_.q5)(),n=!!(t&&(0,uP.Kz)(t)),a=(0,$.d4)(e=>e.isRenaming);return Q.createElement("div",{className:ea()({[tw.cx.flexGrow1.$]:a},"left_panel_header--filenameView--TnYcK")},n&&Q.createElement(EC,null),Q.createElement(Eh.o3,{recordingKey:nh.Pt(e.recordingKey,"fileName")}))}var ET=n(2325),Ex=n(170766),EN=n(752757),Ek=n(468445);function ES(){let e=(0,t_.q5)(),t=null==e?void 0:e.repo,n=!!(t&&(0,uP.Ns)(e,t)),a=!!(e&&(0,uP.Kz)(e)),r=(0,$.wA)(),l=a&&t?Q.createElement(Ek.o,{repo:t,dispatch:r,trackingContextName:Ex.e0.EDITOR_TOOLBAR_ACTION}):n&&e.fileRepoId?Q.createElement(EI,{repoId:e.fileRepoId}):null;return l?Q.createElement("div",{className:"left_panel_header--repoInfo--LjTPN"},l):null}function EI({repoId:e}){let t=(0,$.wA)(),n=(0,EN.Yj)(e);if(!n||"loaded"!==n.status)return null;let a=n.data.activeBranches.length;return a<1?null:Q.createElement("div",{onClick:()=>t(ET.o5({trackingContextName:Ex.e0.EDITOR_TOOLBAR_ACTION})),role:"link",tabIndex:0},Q.createElement(eO.Tx,{id:"fullscreen.filename_view.branch-count",BRANCHES:a}))}let EA="leftPanelHeader";function EP(){let e=(0,t_.q5)(),t=(0,at.iZ)(),n=(0,aD.GS)(),{isLeftPanelCollapsed:a}=(0,ci.Ye)();return n?Q.createElement("div",{className:"left_panel_header--leftPanelHeader--o6fb0"},Q.createElement("div",{className:"left_panel_header--islandSpacer--WMbBa"}),!a&&Q.createElement("div",{className:"left_panel_header--fileControls--0Q7aC"},Q.createElement(Ew,{recordingKey:EA}),Q.createElement(Eb,{recordingKey:EA})),Q.createElement(ES,null),Q.createElement("div",{className:"left_panel_header--folderRow--GBzFM"},Q.createElement(Eh.ur,{openFile:e,user:t}),e&&Q.createElement(Ef.s,{openFile:e}))):null}var EO=n(711117);function EL(){let e=(0,aD.GS)(),t=(0,ex.o3)(ex.nt.ui3CollapsedSidebarPillBackground);return e&&t}var EM=n(728068),ED=n(425814),ER=n(434807);function EF(){return null}function EB(e){return Q.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},Q.createElement("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M5 6h14a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1ZM3 7a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V7Zm3.618 8.282h1.265l.542-1.614h2.46l.543 1.614h1.265l-2.307-6.545H8.922l-2.304 6.545Zm3.947-2.566-.886-2.637h-.05l-.885 2.637h1.821Zm3.843.559v.083h1.064v-.083c.002-.226.029-.415.08-.569.053-.155.134-.29.243-.406.11-.115.252-.226.425-.332a2.41 2.41 0 0 0 .508-.4c.143-.149.252-.32.33-.511a1.7 1.7 0 0 0 .117-.652c0-.36-.087-.671-.262-.933a1.679 1.679 0 0 0-.725-.61 2.535 2.535 0 0 0-1.074-.215c-.373 0-.714.068-1.023.205-.307.136-.554.34-.741.613-.186.273-.284.612-.294 1.017h1.138c.01-.2.06-.366.146-.496a.837.837 0 0 1 .336-.294.977.977 0 0 1 .432-.099c.164 0 .312.034.444.102.134.069.24.165.32.288.078.124.118.27.118.438a.91.91 0 0 1-.09.406c-.06.12-.142.228-.246.326a2.23 2.23 0 0 1-.348.265c-.19.117-.35.246-.483.387a1.393 1.393 0 0 0-.307.55c-.07.228-.106.534-.108.92Zm.06 1.873a.681.681 0 0 0 .496.204c.128 0 .244-.03.348-.092a.736.736 0 0 0 .256-.256.66.66 0 0 0 .099-.355.661.661 0 0 0-.211-.492.678.678 0 0 0-.492-.204.682.682 0 0 0-.496.204.666.666 0 0 0-.207.492c0 .196.069.363.207.499Z",clipRule:"evenodd"}))}function EU(){var e;let t=(0,eG.J2)(null==(e=eU.Ez5)?void 0:e.uiState().showMissingFontsButton),n=(0,t5.U)();return t?Q.createElement("button",{onClick:()=>{n("missing_fonts_button_clicked"),eU.glU.findMissingFontsAndShowPopover()}},Q.createElement(EB,null)):null}function EH(){let e=(0,ED.s)(),t=(0,$.d4)(e=>e.isRenaming),n=(0,aD.GS)(),{isLeftPanelCollapsed:a,toggleLeftPanelCollapsed:r}=(0,ci.Ye)(),l=EL(),i=(0,ci.GQ)(),o=!(0,ex.o3)(ex.nt.ui3Motion),s=(0,ae.aV)(),c=(0,$.d4)(e=>e.mirror.appModel.showUi),d=Q.useMemo(()=>(0,rT.XB)(getComputedStyle(document.body).getPropertyValue("--duration-md"))/1e3,[]);if(!n||s||!c)return null;let u=Q.createElement("div",{className:"left_panel_island--fileControls--SDe2O left_panel_header--fileControls--0Q7aC"},Q.createElement(Ew,null),Q.createElement(Eb,null));return Q.createElement("div",{className:ea()(eK.Dm,"left_panel_island--islandContainer--Sowsa",{"left_panel_island--collapsed--pmqBr":a,"left_panel_island--withShadow--oSo1W":l&&a}),style:{width:a?void 0:i}},Q.createElement("div",{className:"left_panel_island--mainMenu--CZSc0"},Q.createElement(ER.xG,null),a&&u),Q.createElement(EO.P.div,{layout:"position",transition:{duration:o?0:d>0?d:.2},className:"left_panel_island--rightSide--RgnYM"},Q.createElement(ER.n8,null),!a&&Q.createElement(Q.Fragment,null,Q.createElement(EF,null),Q.createElement(EU,null)),e&&a&&!t&&Q.createElement(EM.R1,null),Q.createElement(dN.K,{"aria-label":a?(0,eO.t)("fullscreen_actions.show-sidebar"):(0,eO.t)("fullscreen_actions.hide-sidebar"),onClick:r,"data-tooltip-type":nO.Ib.TEXT,"data-tooltip":a?(0,eO.t)("fullscreen_actions.show-sidebar"):(0,eO.t)("fullscreen_actions.hide-sidebar")},Q.createElement(f7,null))))}n(771527);var EV=n(276765),EG=n(328430),EK=n(820746),EW=n(411239),Ez=n(195557),Ej=n(95423),EY=n(553562),EZ=n(64813),EX=n(554207),Eq=n(140586);let EJ="configuration_wizard--step--9zx-B",EQ="configuration_wizard--buttonRow--2GlLI",E$="configuration_wizard--spacer--LCRlq",E0="configuration_wizard--preferenceOptionsGroup--T5b2t",E1="configuration_wizard--unitOption--R7eMs configuration_wizard--preferenceOption--OkUN2",E2="configuration_wizard--selectedPreference--K6Psv",E5="configuration_wizard--integrationsCard--aup-J configuration_wizard--preferenceOptionCard--C3ZkW configuration_wizard--preferenceOption--OkUN2",E4="configuration_wizard--unitText--PiILT",E3="configuration_wizard--preferenceSubheader--orNpN text--fontPos11--2LvXf text--_fontBase--QdLsd",E6="configuration_wizard--preferenceTitle--lA1Na text--fontPos13Whyte--VhWqH text--_fontBaseWhyte--efAjI",E7="configuration_wizard--unitRadioOption--YokOy",E8="configuration_wizard--selectedRadioOption--i6PrC",E9="configuration_wizard--stepHeading--b5Yv4 text--fontPos18Whyte--M40th text--_fontBaseWhyte--efAjI",ve="configuration_wizard--stepDescription--uSn6A text--fontPos12Whyte---tkNx text--_fontBaseWhyte--efAjI",vt="configuration_wizard--option--I5GPA",vn="configuration_wizard--optionHeading--9e-1V text--fontPos12Whyte---tkNx text--_fontBaseWhyte--efAjI",va="configuration_wizard--pluginListDivider--LeuxA",vr="configuration_wizard--pluginList---hNhu",vl="configuration_wizard--dividerListContainer--r4GxV",vi="configuration_wizard--installButton--PPj7O",vo="configuration_wizard--pluginCta--WgsY- resource_tiles--cta--JU9XJ text--fontPos12--YsUAh text--_fontBase--QdLsd",vs="configuration_wizard--pluginTick--YbuJa",vc="configuration_wizard--spinnerContainer--2xXeT";var vd=n(377869),vu=n(990427),vm=n(387121),vp=n(538180),v_=n(225788);let vf="OTHER";function vh(){let e=(0,eD.v4)(),{codegenPlugins:t=[],loading:n}=(0,EW.n)(),a=(0,a4.gB)(),[r,l]=Q.useState("first-party"===e.type?e.id:vf),[i,o]=Q.useState(!1),s=!n&&(null==t?void 0:t.length)>0,[c,d]=Q.useState(s?vT(t[0]):void 0);return Q.useEffect(()=>{if(!c&&!n&&(null==t?void 0:t.length)>0){let e=vT(t[0]);d(e),a(e)}},[t,n,c,a]),Q.createElement("div",{className:EJ},Q.createElement("h1",{className:E9},Q.createElement(eO.Tx,{id:"dev_handoff.configuration_wizard.code_language_step.title"})),Q.createElement("h2",{className:ve},Q.createElement(eO.Tx,{id:"dev_handoff.configuration_wizard.code_language_step.description"})),Q.createElement(vg,{selectedOption:r,onSelect:e=>{l(e),e===eD.p?(0,eH.UK)().colorFormat.set(eU.NVY.UIColor):(0,eH.UK)().colorFormat.set(eU.NVY.HEX),e===eD.p?a({type:"first-party",id:i?eD.Ap:eD.p}):e===eD.LK?a({type:"first-party",id:i?eD.NU:eD.LK}):e!==vf?a({type:"first-party",id:e}):c&&a(c)}}),r===eD.p||r===eD.LK?Q.createElement(vE,{selectedLanguage:r,shouldUseLegacyMobileCodegen:i,onFrameworkSelect:e=>{o(e),r===eD.p&&a({type:"first-party",id:e?eD.Ap:eD.p}),r===eD.LK&&a({type:"first-party",id:e?eD.NU:eD.LK})}}):null,r!==vf?Q.createElement(vy,null):Q.createElement(vw,{onSelect:d,loading:n,codegenPlugins:t}))}function vg({onSelect:e,selectedOption:t}){let n=[{key:eD.uz,title:(0,eO.t)("dev_handoff.code.lang_css"),subheader:null,svgSrc:v_.A},{key:eD.p,title:(0,eO.t)("dev_handoff.configuration_wizard.code_language_step.option_ios"),subheader:null,svgSrc:vm.A},{key:eD.LK,title:(0,eO.t)("dev_handoff.configuration_wizard.code_language_step.option_android"),subheader:null,svgSrc:vu.A},{key:vf,title:(0,eO.t)("dev_handoff.configuration_wizard.code_language_step.option_other"),subheader:null,svgSrc:vp.A}];return Q.createElement("div",{className:vt},Q.createElement("div",{className:vn},Q.createElement(eO.Tx,{id:"dev_handoff.configuration_wizard.code_language_step.what_platform"})),Q.createElement(EV.z,{value:String(t),onChange:ey.lQ,className:E0},n.map(({key:n,title:a,subheader:r,svgSrc:l})=>{let i=n===t,o=()=>e(n);return Q.createElement("div",{tabIndex:0,role:"radio","aria-checked":i,key:n,onPointerDown:o,onKeyDown:e=>{"Enter"===e.key&&o()},className:ea()("configuration_wizard--preferenceOptionCard--C3ZkW configuration_wizard--preferenceOption--OkUN2",i&&E2)},Q.createElement(eM.B,{svg:l,className:"configuration_wizard--platformIcon--F7N2s"}),Q.createElement(EV.Z,{value:String(n),_isChecked:i,_onChange:o,className:ea()("configuration_wizard--radioOption--Yfm0j",i&&E8),tabIndex:-1}),Q.createElement("div",{className:"configuration_wizard--preferenceText--ZqN2L"},Q.createElement("div",{className:E6},a),r&&Q.createElement("div",{className:E3},r)))})))}function vE({selectedLanguage:e,shouldUseLegacyMobileCodegen:t,onFrameworkSelect:n}){let a=Q.useMemo(()=>e===eD.p?[{key:!1,title:(0,eO.t)("dev_handoff.code.lang_swiftui"),onSelect:()=>n(!1)},{key:!0,title:(0,eO.t)("dev_handoff.code.lang_uikit"),onSelect:()=>n(!0)}]:[{key:!1,title:(0,eO.t)("dev_handoff.code.lang_compose"),onSelect:()=>n(!1)},{key:!0,title:(0,eO.t)("dev_handoff.code.lang_android_xml"),onSelect:()=>n(!0)}],[e,n]);return Q.createElement("div",{className:vt},Q.createElement("div",{className:vn},Q.createElement(eO.Tx,{id:"dev_handoff.configuration_wizard.code_language_step.what_framework"})),Q.createElement(EV.z,{value:String(t),onChange:ey.lQ,className:E0},a.map(({key:e,title:n,onSelect:a})=>{let r=e===t;return Q.createElement("div",{tabIndex:0,role:"radio","aria-checked":r,key:String(e),onPointerDown:a,onKeyDown:e=>{"Enter"===e.key&&a()},className:ea()(E1,r&&E2)},Q.createElement("div",{className:E4},Q.createElement("div",{className:E6},n),Q.createElement(EV.Z,{value:String(e),_isChecked:r,_onChange:a,className:ea()(E7,r&&E8),tabIndex:-1})))})))}let vv=new EZ.KD({min:.1});function vy(){let e=(0,eD.v4)(),t=(0,eB.Em)(),n=(0,eB.RH)(),a=(0,eB.wQ)(),r=(0,eB.Bs)(),l=Q.useCallback(t=>r(e,null,{unit:t}),[e,r]),i=(0,eB.gc)(e.id),o=Q.useCallback(t=>{t&&r(e,null,{scaleFactor:t})},[e,r]),s=(null==i?void 0:i.scaleFactor)??1,c="first-party"===e.type&&(e.id===eD.LK||e.id===eD.NU||e.id===eD.p||e.id===eD.Ap),d=Q.useMemo(()=>new Ez.Be(a),[a]),u=Q.useMemo(()=>au.zq.map(e=>({key:e,title:d.format(e),onSelect:()=>l(e)})),[d,l]);return t?Q.createElement("div",{className:vt},Q.createElement("div",{className:vn},Q.createElement(eO.Tx,{id:"dev_handoff.configuration_wizard.code_language_step.what_units"})),Q.createElement(EV.z,{value:String(n),onChange:e=>l(e),className:E0},u.map(({key:e,title:t,onSelect:a})=>{let r=n===e;return Q.createElement("div",{tabIndex:0,role:"radio","aria-checked":r,key:e,onPointerDown:a,onKeyDown:e=>{"Enter"===e.key&&a()},className:ea()(E1,r&&E2)},Q.createElement("div",{className:E4},Q.createElement("div",{className:E6},t),Q.createElement(EV.Z,{value:String(e),_isChecked:r,_onChange:a,className:ea()(E7,r&&E8),tabIndex:-1})))})),n===EY.tK.SCALED&&Q.createElement(Q.Fragment,null,Q.createElement("div",{className:"configuration_wizard--optionHeadingWithPadding--MnGm9 configuration_wizard--optionHeading--9e-1V text--fontPos12Whyte---tkNx text--_fontBaseWhyte--efAjI"},Q.createElement(eO.Tx,{id:"dev_handoff.alternative_units.inspection_scale_factor"})),c?Q.createElement(Ej.Rg,{scaleFactor:s,onChange:o,onDropdownHidden:ey.lQ,className:"configuration_wizard--scaleFactorDropdown--IVy1Q",inputClassName:"configuration_wizard--scaleFactorDropdownInput--h8Jr2 text--fontPos13Whyte--VhWqH text--_fontBaseWhyte--efAjI"}):Q.createElement(EX.Q7,{className:"configuration_wizard--scaleFactorInput--ezaTA text--fontPos13Whyte--VhWqH text--_fontBaseWhyte--efAjI",property:s,formatter:vv,onChange:o,autoFocus:!0,allowEmpty:!1,noBorderOnFocus:!0}),Q.createElement("div",{className:E3},Q.createElement(Ej.LO,{codeLanguage:e})))):null}function vb(){return Q.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Q.createElement("g",{id:"Frame 1321317093"},Q.createElement("rect",{width:"24",height:"24",rx:"4.5",fill:"#2C2C2C"}),Q.createElement("rect",{x:"4",y:"4",width:"10.5",height:"1.5",fill:"#D9D9D9"}),Q.createElement("rect",{x:"7",y:"8",width:"12",height:"1.5",fill:"#E4A3D9"}),Q.createElement("rect",{x:"9",y:"13",width:"12",height:"1.5",fill:"#97C1EF"}),Q.createElement("rect",{x:"4",y:"17.5",width:"10.5",height:"1.5",fill:"#D9D9D9"})))}function vC(){return Q.createElement("div",{className:"configuration_wizard--customCodegenPromo--Sg78f"},Q.createElement("div",{className:"configuration_wizard--customCodegenPromoIcon--ND7NT"},Q.createElement(vb,null)),Q.createElement("div",{className:"configuration_wizard--customCodegenPromoWrapper--steEn"},Q.createElement("div",{className:"configuration_wizard--customCodegenPromoTitle--31anH text--fontPos12--YsUAh text--_fontBase--QdLsd"},Q.createElement(eO.Tx,{id:"dev_handoff.configuration_wizard.code_language_step.custom_codegen_promo_title"})),Q.createElement("div",{className:"configuration_wizard--customCodegenPromoBody--EsEFB text--fontPos11--2LvXf text--_fontBase--QdLsd"},Q.createElement(eO.Tx,{id:"dev_handoff.configuration_wizard.code_language_step.custom_codegen_promo_body"}))),Q.createElement("a",{className:"configuration_wizard--customCodegenPromoLink--0l-Sa text--fontPos11--2LvXf text--_fontBase--QdLsd",href:"https://www.figma.com/plugin-docs/api/figma-codegen/",target:"_blank"},Q.createElement(eO.Tx,{id:"dev_handoff.configuration_wizard.code_language_step.custom_codegen_promo_link"}),Q.createElement(EK.In,{icon:"new-window-16",fill:"brand"})))}function vw({onSelect:e,loading:t,codegenPlugins:n}){let a=t?Q.createElement("div",{className:vc},Q.createElement(t2.kt,null)):Q.createElement(cz.dP,null,n.map((t,n)=>Q.createElement(vx,{key:`${t.id}_${n}`,plugin:t,onSelect:e})),Q.createElement(vC,null));return Q.createElement("div",{className:"configuration_wizard--otherLanguagesContainer--2J1b5"},Q.createElement("h1",{className:"configuration_wizard--otherLanguagesListHeading--M2BwY text--fontPos12Whyte---tkNx text--_fontBaseWhyte--efAjI"},Q.createElement(eO.Tx,{id:"dev_handoff.configuration_wizard.code_language_step.other_title"})),Q.createElement("h2",{className:"configuration_wizard--otherLanguagesListDescription--jeS2m text--fontPos12Whyte---tkNx text--_fontBaseWhyte--efAjI"},Q.createElement(eO.Tx,{id:"dev_handoff.configuration_wizard.code_language_step.other_description"})),Q.createElement("div",{className:vl},Q.createElement("div",{className:va}),Q.createElement("div",{className:vr},a)))}function vT(e){return{type:"published-plugin",id:e.id,pluginLanguage:function(e){var t,n,a;let r=null==(t=null==e?void 0:e.versions)?void 0:t[(null==e?void 0:e.current_plugin_version_id)??""];return(null==(a=null==(n=(0,rl.m)(r))?void 0:n[0])?void 0:a.value)??""}(e)}}function vx({plugin:e,onSelect:t}){let n=(0,eD.v4)(),a=(0,a4.gB)(),r="first-party"!==n.type&&n.id===e.id,l=Q.useMemo(()=>vT(e),[e]),i=Q.useCallback(()=>{a(l),t(l)},[l,a,t]),o=r?Q.createElement("div",{className:vo},Q.createElement(eM.B,{svg:vd.A,className:vs}),Q.createElement(eO.Tx,{id:"community.plugins.selected"})):Q.createElement("div",{className:vo},Q.createElement(eO.Tx,{id:"community.plugins.select"}));return Q.createElement(Eq.Cg,{plugin:e,ctaButton:o,onClick:r?void 0:i})}function vN(){let{inspectPlugins:e=[],loading:t}=(0,EW.n)(),n=t?Q.createElement("div",{className:vc},Q.createElement(t2.kt,null)):Q.createElement(cz.dP,null,e.map((e,t)=>Q.createElement(vk,{key:`${e.id}_${t}`,plugin:e})));return Q.createElement("div",{className:EJ},Q.createElement("h1",{className:E9},Q.createElement(eO.Tx,{id:"dev_handoff.configuration_wizard.inspect_plugins_step.title"})),Q.createElement("h2",{className:ve},Q.createElement(eO.Tx,{id:"dev_handoff.configuration_wizard.inspect_plugins_step.description"})),Q.createElement("div",{className:vl},Q.createElement("div",{className:va}),Q.createElement("div",{className:vr},n)))}function vk({plugin:e}){let{pinnedPlugins:t,pinPlugin:n,unpinPlugin:a}=(0,EG.VR)(),r=e.id,l=Q.useMemo(()=>!!t.find(e=>e.plugin_id===r),[t,r]),[i,o]=Q.useState(l);Q.useEffect(()=>{o(l)},[l]);let s=(0,hs.A)(()=>{o(!0),n(r)},200),c=(0,hs.A)(()=>{o(!1),a(r)},200),d=i?Q.createElement("div",{className:vo},Q.createElement(eM.B,{svg:vd.A,className:vs}),Q.createElement(eO.Tx,{id:"community.plugins.pinned"})):Q.createElement("div",{className:vo},Q.createElement(eO.Tx,{id:"community.plugins.pin"}));return Q.createElement(Eq.Cg,{plugin:e,ctaButton:d,onClick:i?c:s})}var vS=n(292164);function vI(){let e=(0,$.wA)(),t=(0,t5.am)();return Q.createElement("div",{className:EJ},Q.createElement("h1",{className:E9},Q.createElement(eO.Tx,{id:"dev_handoff.configuration_wizard.install_extensions_step.title"})),Q.createElement("h2",{className:ve},Q.createElement(eO.Tx,{id:"dev_handoff.configuration_wizard.install_extensions_step.description"})),Q.createElement("div",{className:E0},Q.createElement("div",{className:E5},Q.createElement("img",{srcSet:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAXEAAADQCAYAAADxsFFbAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAF/SSURBVHgB7Z0HnJTV1f8PsBVYYGFpC0vvHelNiqKIghW7MTExr8a8ib7RN+8bY9T05E3RxH+ixhg1GisqBgsCighSlCZVQHrvfWFh4X+/dz3Ls8PsMjO7y+7snp+fkdmZZ57nlnN/59xz7z2nioSgRYsWw06ePHmFe3s5f0oRSEhIkMTERDlx4oR/nTp1qsD3SUlJkpycLFWqVJHjx4/L0aNHz7jmXIByUhaenZ2dLQaDwRBnWMiratWqD69zCH5RRd848q7jyPtB9/bus92tWrVq0rRpU7ngggukS5cuMmnSJJkyZYrk5ubmX9OsWTO55ZZb/HWQ+JdffilPPPGEHDhwQM41jMQNBkMFwiOORx/e58AfCfwPAncEPM2RbfdI7jBmzBi56KKLPJlXr15d6tat64la0apVK7nrrrs8eX788cdy5MgRycjI8H8bDAaDoVi4u1atWsPcv8Mhcs+qWOCREjjAmn3//fdl9+7dct11153x/ZAhQ6RevXry61//WlauXMn9xWAwGAwlhh6OyB90HH5PgrPCWziSPasLJYjJkyf7f3GZhCNoXCyHDx+WGjVqyDXXXOMt8blz58rOnTvLxCduMBgMFRB3O/qekOBI+CGJEkVZ1rhVUlJS/ILmHXfc4QncaQzp16+fPProo7Jr1y4xGAwGQ/HBJpSq7t+I3SiRwK2e5hP5M888Iw888IA89dRT3mofNGiQ/95gMBgMJYLL8Yn3kBIEO1TYbnjs2DGZPXu2/3vFihV+V0pWVpZf3MzJyRGDwWAwFBstSsUsZucLvm/djYJljgXOZ8FdLAaDwWAoHmIicfzdbCPERcL+a3aitGnTRtLT0/33s2bN8oeAhg0b5om8b9++3i++fv16f+jHYDAYDCWDKo6Io94uglvk3nvvlZo1a/q94ix08nrzzTdl4sSJ/nN2pQwePDjvIc76XrBggfzzn/+U/fv3y7mGHfYxGAwVFTGROJY41ncocKOwGwWwsJmZmSlNmjSRbdu2yaZNm8qMQI3EDQZDRUVMJB5vMBI3GAwVFZXiHDyuHnbE2EEjg8FQ0VBpSNyO/hsMlQvsiGPNrqLDIlIZDIYKCTZUsEuuosNI3GAwVFhUhhm4kbjBYKiQ4LR4MMdBRYUFMjEYDIY4hpG4wRBnSE6qKul1Kr6v1xAZKj2Js/hRL72mpCQXHBSp7u+GGbWkoiIxoZrc+bUR0qdnS6msSKuRIlmZ9SSe0LJZdXnuD73l8gszxWAAMfnEIT6O1jdv3lwaNWrk82cSF4VFBL4bOnSoP7EZitWrV8uaNWvK1WJDclKC3Psfo+SDmctl8sdL8z8f0KeNfPP68+Wm7z4h5RVd2jeRvfuPyOZteyVaVEuoKr27t5BNW/dIPCExsZr07NxMVq3d7uteHFx3eT9/r3seelFyjp+Q8g4s8F/f11UmTd8uz7y2XgwGEJMl3q5dO59js1evXp7IybGp4EANQa6CLwhdg2XZgZuSw/VX9JMh/dpJZULN6sly752XOIu0vhQXE96bL3986v24IHBQv16yNG9aQz5dFF+K11C6iMkST01N9Rl6li1bJj16nBmOfM6cOfnv2XA/cOBAn1B58+bNcU3iLbIyZJCz0NNqVpet2/fJBzOWycHDR/13PZxFVystVRrWryV10qrLtNlfOEs5UzLqpsmkaYtlw+a8gcdMpV2rhjKwdxun1BJk+aqtMmveaqfsIl9FHzG4o6TXqi51ateQju0y5erRvfzny9y9lq/akn9dm5YNZHDvdlKzRrJs23VAZsxdKdt2FAxABileMqKbI4cM2b3noLzzwedy+MgxiQYJ1apK/16tpWObTKF3F6/YKPM/XyfHT5yecaW7sg7q01aaNakrBw5my7RZK9ws4PQMYnDfdrL/wGHJzT0l/Xq2lqTkBJk7/0tZtHyjm7md8u6ui4Z1lVo1k6Waex73aun6A3wwc4Wzyg/791WrVpEB57mytGvir1u7Yad8NOsLOZaTFz2zemqSXDiks3Mn5dkvh7OPyWpn1QfRvnUjyWyU7j/v7+5FH65et12muv6mLMG2oxwtmmXIEddm709fJtt3FmzfEYM6+vru2nvIy05tJxsLl26QTz5bLdEiKbGKa2sp0K4GQ0yW+OLFi30WewJbhSNlkkLoi832TZs2la1bt/rEEPGK9q0ayU/uudxZQ7VklyO7oQPay73fucQTNxjgSOzWcYM8iXRybo77//NSN8hTpLN7f9OVA/Lvc/nFPeX+748Rmu3wkRy55eoBjoR7SzRITEhw7ZogSe7falWr+Pe8grHacZU8cPdYqeK+37htj/Tq2lx+7J5bwxFPEBcM7iytnFULgV50fme55/aLvMsiUlRzSvrWawfLN284X/ZCwidy3fuhcmWgTjWd7/nHd49xs4a2ss2RHG34k/+6Qjq1O+3XRTH9520j5doxfeTQkaNeSd3vftPZkbECZaEx6hOqVcuvt8hpGbx13GBfnj37Dvt+uunK/vKdW0f4fgEYFU0ap0sTR9IojqsuObPt27m+vvmqAX7NIDExLw7+N64fIpddeDoJVlJSNVensTLckfTO3QelccN0+dm9V7h/6xS4F/W60fX//d8bI21aNJK6dWp6X3wsoOxVXR/n5BiJG04jJks8mr2XuFtwo5Ddpzxb4VeMOk8GOktJUadWjfz3yc4KvOPW4TLz01Xy9xen+88mTl4oj/3yZhnpiG/825/5z7DcXp4w11uTQ5yF9s/xn8jWHfscUeRZyq2a15cxI3vI4899mG+JYTn/8K7Rzh+/zFvCDFKs0FBAjmqBYdmDLh2ayJIVm+WlCXPOuL6+sx5fm/iZ/NuVE0x1VuJffnWrUzZtZErA9//xnC/k2ddm+vdTXBn+9LObPHFiLfq6oxyqFUzkccLNGk7k5pWlY7vGMrR/O/n5oxNl5ZpteXVavVXu+voF8tb7C+To0eO+bcHDf5ggR7Lzsjp9++ZhcuMV/eXB370puV+tkezcfUj+7/H3/EyAWcpvfjTO9UlbZ9lvkqPHjsvr73zmLPrqMnpEV/lo9gqZv7igX5j1jVPuv9/+5V1vOYMv1+2Q+5z7JSM9TXbsPiCH3Mzpr89+4L+73vnEsZTDIcGZvH95dmr+bIHnDx3QwdUprz2vGtXLPS9R7v/Na/l1+vH3x3ol9OhTkwvcK71OdbnvZ694pRIrUEJ9uqXL7v05snGrBXEznEapHvYhbgFWODHE9+6NfvHtXGLdpl3y5fqd+X+3adFAGmSk+fcZznpqWL+2PPHPafnfM6g/nrPSuRAan5GtiCn3ya8U1slANqNWzRp4gmaa37tHC/9ZzdRkf32TBrU9idesmSLfu+3CMyzm8Y7APlu0TiLFux8ulrrpNZzbpq0jvlRvsSY4qzI1peAunD1fuSEAFuWW7fulY9vMfBK//ZZh0iTEukSZTZyyyL9v4dwwu/Ycls0B18iCJevlZ4+85WZieeTcu1sLWeDup2QH5i5Y42cvDZz7CddUXlkO5btycnJOyA7nAqrz1UwnEhxzv3nu1Zm+TBcM7uRdJ7QB7Z2YFF0MDdwjuEEUkDkuI0Uf5/LZueeAm3Wdnk0cO5bjZzX0XdAlhRIqDoFnpCfJA9/rKB1ap8mv/rrCKXNbVzKcRqmSODHH2b2C7/zo0aNSnrFwyYYCu1OYBnfvlOXf415gKr8vQHjgwIFsqdEm2X8XCeo4FwHuh5HOJ5ube3pKvHzllnzLNvtojidgnf4rVq/dIdGgT4+W8q0bz5dVa7Y7Ys5Ll5cbgS81xyknyE/x0Scr3MJ0QeLfsm1f/vs8wjqaX34AmapVDqo7RXXgQMGdJEdcPZOcYklJLlkRvPrS3jK4Tzu/1oBSSC6h2BknT530syQFLpHqqYly6fCCecbpp2pVz5y5FAc07Vy3mNmsSXVp3ayGWwPYKQaDolRJvEWLFt6PxxbEeAaEw8Jjk8Z1nU/3tF+/QUYtOXSoIIEVhQOHst19Tsifnp4i+w8WnBKri4rnzHOLgsUBe8BZ7Jz3+Xp56l/T/ZZOFBELemdDbWe17913WllhRRYFLM70OjW8j1gXD3nfuEEd2bhlr3/2Pucrz6iXVuB3WNgorOyjJZeuDz/3mIt6ym8fe1uWOcXILIjFTxRySePA4WxZu36HPPnC9DO+O3GiZI9673UulBfe3OgWx7Pl9/d38++PZFf84+SGyBDTwiZuEnJmpqWleZJmtwp/B/eGs6BJ3k0WNA8dOiRljeopSXKbW5y64uLzov2pczMckM+Xb5LLHUGwSIdFxrR56MAOMmv+moh9/YuWbfRrcFc6H3k152eGuGunpcg4Zz0mJUavT/e5mUBr5/bBZw9J64IkVnxKcpL3ESfiSnCf9+ne0lvNoa6fbm62wefs1ji/f3tp4BYdlwV2uJwNnzmFk+ZcQPjakQXKMubCnvLwD67wdQTvTP3czwz0YA1tiJ+cNYSdu6JzM7AYTP0ynYvHPw830VczIT7HCk5zbcqzKdfoEd3PuAczA1/nr9qc99oGkeL9aUvc4nFL57qp50n7lFNWPTpnSc8uWaW29rN5+xFXR5FmmZG7mAwVHzFZ4pD3hRde6MmbV9u2bf0+8KVLl8qiRXm+0oYNG0qNGjX83+UhOTIDmkWsnc43+eak+VH9ljH5nFv8u++OUfKr/73GL45lZdb1Wwynz1oR8X3YfvaHJyc5N8dQ+b/7r5ODR7KlYUZtb+3GYr3Nnrdavn3TMPm1KxPuGbYYPvvKDO/OYLH1605p/ebH1/pFOsqM1czp1CBwC/ziv6+WE46EsjLT5c335svKL7dFXAbqhB/6pqsGyjCn1CBV3EaPu/UD3TY587NVfpcOO1Tw+2c4RbF9x3554vmP8hc1IwV7ul9/Z74/qDNsYEdP4K+/M0+muwVa/NZznVJlV8muyw5KrRqpfq0Dn3jNr9YY2E308/++ym9ZzCPyavLHh27w373wxiy/HTESfPjJcr/l9H//8zKv5FEodd2M5M9ulmUwnEvElJ5NM9yHWnWHDx/OT4Rcu3Ztvzd8z549bsEnun3HpYUObRrJIUdkm7acXoSjCo3coiXT+n0Bv22dWql+H/a6jbvyP0t11jyWF0SAn3mz8w3r6dN6dWtKkiPLrY6c+C0EwfdJjiQaOFfCpoAfuZazFJs1yXCzg0S/kLhl2978hdBowIygoVt8beos3ONOCVDWYB3Ys46yoW4bNu2W2q5cXLfduYT4bTNXl11uMbOuq2cjZ9lCRus374n6RC33ov7sAWdnzpqNO/16Qeg1TV1ZaGv21q9xi8jqfgH1XRsxcwjuHa/nSBEZY491gXs5a7t18waeNKnv+s27/S4YkOCsafa8ZzhlpX3Uomld2evKg5uI+zV39Q5xW3vs2nvYL2b6BdHa1Z3luz/fqg4nD9SpkVuQZuE3h/Z3bbw/xPdPu7jOld37DktxkV47Uf791CD50f8tlulzd4vBACpFjk2DoaLgR3e1l1ZZNeS+Xy12vvKyn+Eayh4WxdBgiCM88vRqN/M4IjeMzRKDAZglbjAYDHEMs8QNBoMhjmEkbjAYDHEMI/EI0KBBA78P3mAwGMobjMTPAg42/fznP/eJLgwGg6G8oVKQOFY01nSs4LfJycliMBgM5Q2lGjsFcLiiPISg1TjUJQliw0DuX3xx5ik/TrUS9Ks0Tqty2Kp79+5+lgA4TLVgwQKJB3AIjLJnZmb6tuFEL2n7OBjWrVu3/OuIPU/gNIPBUDRizrEJeTVu3Nif3Ny0aZNs3749n6w5gsx3xBKHaCCZtWvX+mxAFSk9G/WDlEJJHJK96qqr5LPPPvOhCEoaKCSNW8MsgZg18UDihGEgXAPlh7wp/5EjeSccaTPytoImTZr4079G4gbD2RETiRMnpXPnzlK/fn0/+DimvWPHjnyC5vtBgwb5zD4QN39jtU6dOlV27674x4Wp99y5c306utIAxPfBB3mJDfr37y+dOnWSeEB6erpX7q+88oqXlyD27dsnU6bkxR0ZMWJEgbytBoOhcMRE4gS3grg///xzT+ahMVQ6duzoLfXJkyf72CmtWrXyC4NYjfFM4kRmpC5YjERnDEVGRoa3zEFOTs4Z7RK8D8mmsUxpD2YpGq8kmM5OLf0NGzb4VHjRgudTXmZLWLa4LTSODZY8/cG9gy4f+o3no4CCMeCxmkmOTTkWLlwo0YD2QmZ4USaUP88niiPPidblhKWOOwaXC21HWwMs/HBJSIhpT7vyrGBcmDp16sjgwYNl+fLlcR8u2VB5EROJQ95Y3fgx27dvf8b3DEqfhMANUn2BaAMrlSdAAtdcc40nXoisS5cunvCC5MpsQ9sD4iQPaaibA+K87LLLfHjegwcPev8w/77xxhueYLk/ZAkxQUS4o3r37u3dDzNnzpRIAXGOHj3au1ogLyJNnn/++d4KRnFAyhdccIEv36effpr/u549e3oF8+qrrxa4H4vD3APyJcdqNCn6KAuzBX4LiROiGFmgjij5SEmcWR9WuioZ2nrAgAHy5ptvekueGRCWPgbDyy+/7JUQihXXFm23cePGAvdDqaDkKIuRuCFeEROJq4UGiYcDfmAGLoMJa4nBAtmFDqJ4ArMLfP+QA5YehDJ27NgC1+AD5wVuueWWsPfp0KGDJ63XXnvNkwdug4svvthbi+vXn84ZOW/ePE+WoEePHtKvXz/frpBVJIC8ILWXXnrJkyXK4Morr/QKYdKkSb4OWLGUB8uaMkHszKzw8WdnF4xCyHOpO66caAgc0Pf//ve/PWGiWHCrxRJjHvJv2bKlvPDCC16uUKL0Aa67t99+21+DGwt5g+xxOV166aV+BqJtGcSqVaviInWgwVAUSmWLISTPC+uNqTNWLNP5eLbEIVlIXEPtQow7d0afJgsyxNqGkIjFjiX6+uuvn+E/10VgXliJuAog5kiBQpgwYYJXprhlsrLyAiahfBTz58/3LgXWLAAWLn1V2IIifuyySvCBBa+KFPJGrpAv2on3KCCAgoG8qS9Ki/abPn16WNnjMxRMeQmVbDDEglLZYohlxMCCRLByWrdu7afyEBaumHglc9wexcWSJUu8hTxkyBDvXqBN5syZE3abogIrGfLk+kgBWY8ZM8b3A/51LGsIPUhYuFV4Ltb4mjVrpGvXrp78KVN5AySNawh3CcomCAwEZhoqV1jpuIkGDhzoFWR5z+9qMBQHJU7iDDYW4yAdJYMtW7Z4EsF1wPfxSuJY0MVBXvqyZFmxYoVfTINUcQ+w7Q4Lkml/OEBQuK4gq0gBIUN6Tz31VL7PGV976KEl3AxYrMwMWCzEv1xeQRsxS9CdOYWB2QU+eJQXfn9cSqHuIYOhoiAmd4ruE+fFe6b6EAZTcaavkIbm3eR7SJ1rcUHE6z5xCAErkG1yAEJm8TIa8BsIGyucdsCyxzLnX90jrdBdLoAFRYg8GveN7v5Q/zUKCJdQKFC0uCiGDx/uy4F7IhzoRxZzQ63gcwXqwWyBxeNg29AfuIsUtBN+d9wkuljMLFAPRgVBfzBTKa5yNhjKEjFZ4pAzW7Mgat2hghXHwtvKlSu9tXTeeef5BTt8yJAdU9rgVrp4A9YzuPrqqz3pQR4M/uB+5z59+vidHYDvWUTEIsQKZFqPG4UFS0iGWQmuJogV1wcEFQTtCzlBnljr+K91UZPnssMF5Un787rpppv8d7NmzfL3QjlA/tdff71/Dn2Akg21xCE5ZgU8Y9q0aYUqWeqDVcusavz48SXej5Rv1KhR/j0KjTbROrFVlXam7Wiv6667zteR+uP75nNdFMaFAjl/8skn3miYOHGivw8Ltsw6gvWjHbkX+9O1fw2GeENMJK4nMEOtG130g8yx8LDasNDxu65bt65c+lojBbOLt956y5M0Vi51wvca3KHD7ptwLg/IWwEJPv/8836RDhKhrbiX7nVWvP/++57McA2wsyO4s4dr9cRjKNSSxmpnmyBuEq5j1wzWbLjZA9/zu6J2D6EIIHn6MFYCp0wQZriFRNqtsFOnuphK+ekDFA5kTruynqC7S1BQkD1tSt8A/kWB6vbGIImjKKh7eUjkbTDEilLN7MMA0YFTlhY4MwcIEQKNFigqLE+Il22BpQ1IG+sQ4o6lvNGCdmGbHsSHYqhMYI8+M0bdOmkwxCNKNQBWPG8prAxg7zmWOu6ewhZVKzKYEcyYMcMI3BDXKPUohoboAKF+9NFH+a6p0gTkhQUOgUez86WiAD94YaERDIZ4gZF4BGCnQ6jPurSAdXiuFtnCnWKsbKhIUTUNlROVItt9cXzigAUw3TppMBgM5QlmiUeAc2WFGwwGQ7SwHJsGg8EQxzASNxgMhjhGpcmxWZLAx86hH45/c1SdHR7s7uBASfBIOIdUIg0dey7A4SLKHi6hhaH8ggNanI5WcGjKIi8aFMUiceJOkOSA3Ruc5AuSNce0OVnHYRmIjBOewZOL8QrqTIxq/OSEj+VwDuQIiXMKU1OlsZBKIoLylPuSoFgc5edwSxCcqiVEAlsNSyMnaEmDhWZi0KCM4iVBdHFAPHnCCzCWkDVOoBL6wWAAMZE4xA1ZQQgMKGJXcPRZSZzPiWHBYR+sUa4lFjYZZOKdyBlM1JMTlVjhzDR0rzHxTXTbHlmA4gXsuiEsbVnFCg+C+DMYAIQdKAwcv8cwKInQwPEAMkRB4MyiyFJkMAQRE4mToYXsKcRDgdRCD0xwlJk4FlgMHF7BAiQCHvkcSyt5cGkDa5WBBMEoeWMVYZHr1kMUVCRKit8yPSaAE9Pi4NSYIFUoRgKGBTPocD33jmabY/A54UKx6rMAFm1hu3C0npSH+9EO3C9YFkIs8B3/UvZw5eR5XIMSDL2GcvA9MxgNLgaos7aPXgMIEVCYS4F6cx/+pdyh8cQpA+XXSJw8o7BTmzyTQGIE3IolnC1l0AiftB/PCXUvBvspXHm1X7Tu4UAMH8qn9+Ze1E2fR3vSXjyHdqfO/CZYJu6vMsl39GW48iiYaXMvmxWULWIicaLeMYg0SH8QOuXDMtcgROzPJk4FkfuYAsfjcXxyOZIBR4mKGNwAASbdWKRgkJA0A586A4nBQxAn2hTQdkQ5JCgWMxyA0sR9gHWK4owEEEO3bt380XpVLqGDEeXaq1cv/55+mz17dtgkyEQvRHFRNkLBUn/SoHE9QA409yWDGmIgmiLpzxQofe5D+/E913EyVQmAmRszOCUznckQnZDAW4BImSNHjswvL2XVMijU1cK1PId2QFZRUsgd97/22mv9gSpIiL8hL9qbMocqMqIfkmaQWWQ0OU6Dv+/fv79vf8rCuPjwww/zT+SqPOCKgzyRB2SB50U6TugXolUihyofuPmw2l988UVP0sgU7YE1TxsR8AxlSV8SJZLfMUaRcWY59DNl47ek8wsNg0z7E0kTuSDQWmU88VteEBOJqwAyeEOhwa6Cwa/UUi8sJ2c8gNCmEAaxwKkHgk89o1m0pU0Y0JAywbQQfAYN5IZyY/DwgiBJ4ACBMUggSAY2M5lIwX2Jo00CBdK7QVb48oPWL+FqIVodkOGiIgIGPS4xlApERr3VCtYY6bQJhMHnzLo0bK1m3SHMLFESUViQSd++fX0McwgA5cJ9+Q4yZyEPdxUIzmxoDxI8cD/aJ1yMcP09scRxDxHtkLqxZsO6DOWlPswgISdIilDKtBXEvn379gL3Y50AkozldCuKhP7GHQJJ0geQKZ/xbIA8kfkKecDo4TfUDZKNNHmzWvvBGTHvqad+xnvanyiSBDzj/u+8845vG5Qv5YO0eT4KDXmnrbiW8hLSNyjryABKmL60hBtlixLfnULnorUZJFg6ED5WBtZOqKDFE5S0IEFeCG60Mwp2rpAKDZKGuCAh3Eu0EVN2zToPcWC5XnLJJZ4EWThW8gQMNq4PnV5zncY3x9LXsKyA53HfYAIFrE5Nonw2Nw3lDLV6AWsd9PV7773nCZd7QYZY+fQ/ioLvmdpD0mqxERpXk4uoa0Wn+dQzHDFoIg2eEc71w70I6AVp4uMHED+uEGYlwVkMpKwhbPkeFyDWayiJ8zyCZMUClBnPQFGq4kOp0i4AxQeB0q4aQpgyUh5mSJGSeKSgLrQ/yo33tDuKI6gMNZ6OgrIzm0DmgjJCX5Bq0VD2KJUthkxzIWysDJ3GIwCV/eSjJnBggDJ1DX4emtkHQoeQcFc9++yzBRQGA4pdMsGkxyC40Md2x5Lc3liYz5iyUw5cDqE+fN0WxxQeGQhOubkfllxJgjrTNqHZ6yFIlGc4yx3ojKqkDQztg2DfoWh5AW2j0Dj7/I2ypbzBNi0LUHYLEla+USokjiWOxYFlAxggTLmxACpzeFoGJPWHoNVSVITutFDfJb/BWgsGxYIQyeBeFNSldS5AGZl+h9ZB3W58DyGVdn5V5IwXRB4Ef2vbn0tovQuDKo/Qa/hb6xIpLJBX5UXMOTYRNB0sDE4dpPo3Vjc+Uab0+NlA6F7yygZIDWsUtwo+cH2h3IJWKu2KDxnfJNYq/loWhaMB92UraJDIQy33kgB9yiyL/g/WiWm6Wu9YwviVKY+CNrj88ssLHI4CyEesygerl2c2adKkwOe4c2JdUKcsmuA7WuCaoSzBlHi4udiTD2gjXURUMLbw4+O+irS8KAsUe3A2p1mLDBUfMVniDEjyR/Iv02l8fFjd+PDw5+HPxWWARc7nkDgLcxX9pCAWsxIV7iT+ZlDiUsJ/iJ8XC5pBzOfszKB98Mey0MXAhcCZtaAE8ZXyLy6VMWPGyCuvvBLxIhK+aBYjWZgi5ylTe1wKwTjl9AuEoTuKIDtAeflNJNslISIWPIcNG+bJClJiYRF3EYuTyABkhj+eBVpcbZB+z549veIKddMgI/ivaROUG0SksxA9QMZnkD9txXWQGNfgc8bvznNoX56NSwpy04XEaIE/mEVa/OL48aMBu2J4Pv1Je1Jmyqu7jig392Qhk35F2XE9fRLMIsXCJ7/Vba4oAuRMD9FRbxYtWYegbXUhurTBLh/amN02hrJDNSccD0mUYLAiRAgh/kcGI1YDQqgLJZATgw4iwKJkIams/HuUF8EuicMhuDm4T+gCGMCPCTFCGrQDbcJ7ns9gA7QXRAVhcj2Lkyx06lY7FCBty+KcWue0K4MYKzXUDVMYGMwMbO6HMkEZsEgFaepefciCXSwoYgiT/qG8kAU7YdQS5DMs7mBS6CDw8UIo7LrRk4W4V4JtRP1oB6xO6kd7oKRCF1S5D59xHYumejIW0AYs6OoJWa6jbLQh90fWaB/6h7bFCtbFRF0fgPj5DfdUeUApcE9mjqEHnpAb2ocE4LplNlJQPurJ+gVETP0ZBxg0OiOlXBAhbUdfYFEz+wr2M7+lzegX5EfrQNvQxtyLPkA2dWugbhXl+dqvyB115jpkimdTb+rF3/jnuWdwFxS/4/csEIfOolURq2wbygalFk9ct3LpvuGyRHHjiRsMhoJgfN9+++3eAKkMoQ/KM0otABZWXGEnvQwGQ3yDmTazAj2kZig7WGYfg8FgiGPY8rXBYDDEMYzEDQaDIY5hJG4wGAxxDCNxg8FgiGMYiRsMBkMcw0g8BnAakFOJHCjhQEo0x5s5iMHhFH1VxOBC1Cme60Z/llb5g+EqSgsc2uHUqx27rxyIWpo0ow3xJDRLi5740mPaOog5vahZZThZVhFybHJ6j2PUnITkdB+n6IgtHsxuwkAlLyInJkNPOXIknBN4gBN8HK+uaJlROFl53XXX+WP38bitEwVN+cePH1/ioSIGDx7sxw7xzksDEDcxy8/W7oxNDBDCzpbVYTyejyHEmGKccCq0LM6WMA4JbUGbwGe0HadWC4vzxHZlTsZy6jc0YmZZIGoSh5wJ6M9Rbo3AxsEe4kQQH4TPaBRiq3BEWoMjES+C+BHxHsWQo9EcgYagOOqMwgq1ePiMuiOQoSRO9hhOuKEIr7jiikKfw2EKrCmujyYlm6FygxjmyB8xWQoba5ybIHQwhgghMcqCxCFNElLo8X+CvEGexKU/l+WhrQgfQKwZjCmMTvK8EvYi3ElUjdfDi0xbcUnikDRBlNBCEBSkTgowKq6xOYifQbYU4kQQFIvvsUzpMI2lHK8gDgaxLpScaY9QoWPGgaUVLn46sSt4FZYfUoG2pw0JW1sUiaNAIg1bWlQoWKwhBLo4aba0LNFcG+76SELWRlPvs92nuM+KpCyRPqc4Rg5jkcBzpGkrSmYYi8wgi3qWJgAvLaMLZUN8GIwhxgs8QZA3uCNcCsLSCmOMIoPEJ0yY4JUIdcZIpR3hs9BYOpQPA62o8VvabReKqEkc4UBDBYUWtwHBlCAeSJxIbFQAEkdzMb2GJJg+acCeeAOKiA7EikGgNOs4ygxrGTA4qLuCdoo2O4um9GI2g7sKa0UTC+O2UeHhOwRN2xqBg/CDLitmDcyICKhEgg7cBCigt956q8Az6RsGEP1HAopo3V7EyCEHKW4iykmdQ/3JyADp2AiMRTRFrkXJkfZLIytSPowB2oD70H5YijoYsH6YwXBvfk85id3BNdEAsiM6IURCOxPci/swiIOySXuQ0o6BjsuQSIZBIwSFjlwwM2NcUI5QC5g+4BqiSBIoKhiWVkFdqDd1g9gIDKbPwf3CmKF/eQ5lJqAX9yFyJG2kBgVTfMi5KFcKM2jkGDcKchYE1ijjWFPWAcawjndm1JSH92SawnjRlIOUHeURKXFpwgyVNeqNPGj7EDyP3KNERYVkNYgcbaORPOlDAodhEeu4gGCRLyIrhhJwOCBL9Jta1NQNFxp1Cp1hU0c+nz9/fn5uWgUzZ2YTuIR4PrKDMsKiV2OOftb+0+BrlJ8ZN59FG2BNEdPKRzC3JAMCcqYzGAw0CgOWhqbwEBvX8l4JMB5BKFUEiAGjeTD5O5gMGIKEwHghhNQ3WiBMhFMltCpthsDwHP5VgUcxEr6UAUfnIygIAyFTg+2LIEEixCanzES2CxdxjgEAUTBTitZ64HkoCJ4PQaPQKFdo/lXKTFkoN+WiLMTdUIuR9iJsLnj33Xe9a45BgRJSMPCRJ9oFhcaAIayvEk6k4B4QA31InknkltjmKJEgUBr0O3kpkWHKrinxUHzjxo3zhIciot4MRpSZAt83bU+fEgoXUtH1EAVExBoL/c19ILOrr766QOx1DRHMvxAtZEpb4JIIhvLlb4yKwpQwypY1GVyf4dwAyCvhbOk76gyBo4AgHgBp4xKlvakrwIjge0IfRyM7RIUkyiQKm7akXpraESAvtBWEiBHCGOBZpCxU0DcYM8g9bUKb4SaCPCMhcABhM4aCIZ6RZT4PWtvwGooWg4O6hgK54HeUkbHKmERhYhzpmKRcKkcaTpnyYgTHSuCg2MvkaH86gkGH8GiCCCwpOokX1gmDMZ5zbGpoUDQ9HYH/LFRoGUAaNlUFP1ogTNyDdmLQYFWFxhBXv/ybb76ZL/Rci9WOsAdjhgOyxWu5woHfakb5aAH5IrxYPgwqgEBCKKGgTig9yDN0Nkb8cY23DjExiBjIkEjQukXRaK5P6oQBAfGoNQ65haa6AygpTTVGmbF0GVQoBA2hHAqUEgMMMKCZfUHMGmJXs8SjiFDukCwDV9OqQXTcFxLiGsqLxablw7pUAtTQsdyHZ0AYb7/9ti8nCgdwb02mzDjD9RUkGkihMDKg3oxBFBZEHKpMFJAffUBbUV7KSt+gZKiDZu1iFkA/kZgaBRatm5T+YixdeeWV/j5YuRBfMFUdbYh1r/JMX6EUIX1+o2GGIUoUM4ukyE0wR2i04B7IM775YNvS5nyHm7QwZQX/0XY6Jvk9ZUM5YkRpfVD+9C8zPNotliTcQRSLxBEqBAxB14bTbPcIKJYMgkDDnksfUUUHFqPugFEy1MzmDLpQEi/NHSIMPpRzcAEXYQ3nMuPzwlb9UUqQadCyRK6YUkN8OriD6w8aRztoiev0NAgGE1Yu9+Y3kBjWG64SZJP2wToNlc+gRcs91EAB3IuBiZKhfHynbheFuq+C/ungOgltxwBXRaF1okyQO/fk9ygmbWeUIEqc6TiGRfDejDklkFBAQlj9JBYpahzq+FUwfmnfYKJkXBzMtrAomXUG46NHCsqCFY3FT5uhVOg32iKUyBXIGH1CewezRmmiFeQe10qsPEP/IRfIQnDMoDRwBWJ8hCaWDiJ0fYyy0WaUV+PZo3gxmDC4mA2hqIubezgmEocsKBj+IRoTS0m3BmlFsAqoAFoGgkEIuNaIvPhAiLBaEerg4GF2EC45cmmuQZTmAqPes6jZG4M6+D0EzVQ9FEGrinZia6cm8YAAGFC4VgpLCB0K5Bv3D6TKoKccGDQQrkKzOhWFcPVm/OjiGKRBO2Dlcy8sf6xfZCA0MYn6qEPBtYxVvldfLuOX++Oy0oxc4aD3DLaxjnHuyxiPZUyj/FjD0RkUhEdfoDB0jSkUKg+hdQyWMdadLfQncsCsiP4MAuVCe+FVYIZJvVGYuIBQRIXFUy8sATeyyD20/YqLqB3UFIjGRmOhQVjsQbsEOxrtTeHR0AghGg6fEZaDJXSNDOES6CogahQj/m3cWLw0Y0ysu0u4n/p7owHWDwOHRT5FLC4zLEjuEawzliz3Ds4sgvfmPbIVVFwMChRc6EuJRmcwDD4IH0vw5Zdf9oO4MBdDODALpWzIP9ZjqA8VoBgY+Eo6odtRNbcqVm2wTrQDY0VnNChryox1CHGjKLgmVGFzr3CuJO6Jq4v6oqTUFQFom6KIhHpSTr2GezHboTz4+fked1a0QNaC7UX/oKSC/R/aXriZ+D5oqfPZyJEj/RZm6o9SinbdjdkQ90C5h24OACgYDFXagbbTMUb5i2o7+gLjNSi/KANmMJSX+2HhF5VMOxJEbYmjgdBMNB7aOziVxSqhgfmcXIi6l5xOpiJMfSsyiev0GNBO/I3mRkDVasIfy7RYr1OiQnCCU2EGFwLAgGHwIvSQAkLD3wgTOwUQOpQpipU2ZzoZ7e4S7s2CF8TGVqtoLCv6FWWCj08JAfmINikzCgh/J+SA/FAW3HH4YoP1Qe4gW9oKtwIkWZjlFg4MGH5HW0HADERcOchlNAqQ9qcfWciCcOlHfLy0ByRCn2JlMj5YnEP2uYZnq8uFfuMaxgf1oX+ZHXANi7sKFATlZUcIfcPzkKPQdIN8Hm6Rl/YLtS4pK+2I/ATJFLmlTurGwdrESFCyog7IHdYnfaZnQjDcILtIwWyJe1Nm5AY5RzEFrVraEbcLz0FGeQ7l0tkS4wO5ZWxBspQNHzTtjcKKBNwDIuVZ8BdrLAq8C7QxClDXewAyRNmZwQSfw734XN1LKBTKpv2EUmIGwn1Zb0GWmc1RR9o4CO7DGKLfzsaZMe0TRwjpNDowuGVKc/NhOSBwFA6hgtjpnOLsQS4vUL9qOCA8mqCWgYNgMvgQUk18y4BloNKhWFIsGqm1FUzmCxkwwOh0fS4LaQg97c97hFq3IPK9TusVDLxw7pVQUBb8flij0e7H5Vp207BDhbJoDk8GW3BqqxZ1YfeG5FgcpU60EWVi9wlEGwQDgDZmADBoWIsJt1ugMECcLKDhVkBpcA8+4x66P5k2pKzBtqTcOusAyDpExO4C2h8ZZ/AyM2BM0PaQL4ua1AkS4hoGdbBdGLwMVhYKqTO/C+ZcBcgGBK8WqObNDN2BgXKnXliAZ9udwXOoTzhZhuBxvyAT1FMXXZW8KIsme6bdIHvqGI0/Gn7ALaQ7NSgPRBzM78m9uDc7UqgTso/cK+AX2pXP+D0yhCyynsDsKJKcusi85gJGhoPAgGCnSSiUA0N92ZQX4wO5QsEHF7WBJpSnvJqTGDLHcEHWgxY711JnPUBZFGLK7BPqIwtWTjtRj97rtKmwxa5zgZLM7MOg18EW7rtwLgnd5x3pNUFQbvX18X1wkHAvhAYghHwfbGOeo2EPzgaIh36N5Npw4Fm6rZB7aL8H5YHvabeiZgr8jjpRX34fvFZPGb7++uv+Xqq8YpEr6spzdCdJ0OUC+C5Yfq6njULrpPfQ33MNgztI1JChKgteob5QvY9eEyoH+mztX81fG+46LFHkHAOgKKgcBmUG4oak//GPf3i543PqFayL9nHw2SpnwbaJBGo8UO5Q+cUqJ/TBc889578L1zY8l98GZxLaVvwmEn+zymU4FHUP+isoy5T32muvlRdffDF/Fk15g2ULNx61vKHjgtPctDuHoc6GmBY2I+ko3Rte3JXX8oaiCIjvzubKiOSaIIqyqLhPUdYGghHpwsnZTpCeDaHPCq2jEkK09wkH7h3pPuDCgAwXNTMMLSvXh36mSqSo34HQa8It4Ba1oBr67MLy1/I5Fi6xU5glhO5SCqIoOaQ8hclVuOdGI2ehzznb7Jw6FdY24Z4Zrp/OVoZYDJeiflPYd+HaKVx5IXrcOsxsIoGFOTPEDRjMRRGTIW8RDncMroFoF8wgk/IQCwRArpQlXoLmYTXj7iqJuC8QO7PN4NbTomCJkg1xA6aeOvU2FA09EBMNdB98eQi4hpsjuDe9vEPLC4mf623UpRvY2GAoQTA47JxBZIiWwEF5al8s8XiK3lmW5TV3isFgMMQxjMQNBoMhjmEkbjAYDHGMYpN4RcwRGQ4ay+JcPKewffgVCeeqPc8V2LcdPO1X3qBypa+ybvuSKoPmKajMiInEEViOuGpAGE48hYtXwHVsgudUVLyDk6dE1CttaA5P2rQigxOXHN4p7KBFPIFdCezNDsZAKW9ArogPwulHXhzsKW7MjljBcznVGC5ccbTgoAxH7wk7UVkRNYkjsByxJYwnZEPkL4SDI+YKyJu/+Y7rQkODxiM0illpg1NdHLmtCORWFIgrg4xEG2OlPILQCBritryCQ3ccS2ebLWOYqIhllaCF5xKfBRkoLthLTrgJ9sVX9DFTGGKKYgg4008MAIKyI8AExdEBCQkR/AVC0v2TBkNFBDMKYo0Qs6M8b39k+xtkRwwjYrpUJBAwjf3Z0WZ4qiiIml05aEFmlWAMaVwrBN7BWiVYD6fqCHxOECTSXlUkEJmRKHPUnYBJoZEZ8c8R4Aorg+BTCFjwiLhmliGCHPEXuIYIaYXt6+V6sidxWImIdxrGAKuDz4nAx0kx2p3pfDDlGf2i+RSxfHBt0TfBiHYEGOI7/iVgD5HZgkeu27Vr50/y6ekxFDKDhZOBBHNiOss1tAUzFcrDUWoiwgUTJKDQtQx8X9Rxa+Jy8wzie0eTtoo2pyy0QfB4OO1Cm3MUncFOWYjBQtswtacu1Du4z5drOnbs6INN8Vuu1byxwf7EYKH9o4ngFwsogwZF4lmUK3hcO1gnLF0sbk0HFg2CckUbIpvB0K8A14UenqO9kR3eB1MVRgLkn2Bn1A35pbzBfkO2GEu4XZADZJD6hcbvpt8oJ/3FbCie9peXBKK2xDXIVTBAu4ZV1QGnqa/KMuhVaQBSJPIadYasidoHoSsQOJQW1hnCiLuAID7BaSNKgDRfkBntSORDwlGGmwpC4AQkwl2lOUv1c2Y6GnWNQUU0OPycQfcEg5roeARF0sFC2RTU4ZprrvF1oK8gWcoSzA1KhLVQVxnuNPVBMtAIQ0sZNTojA5tnaln4jHIwW6PtUPbBXJTh2pl1FA3uFSkwMIgKiWUcBO2iIYEB7j1cfRA48kl9aL9g20GKuEmoF+WmrWi/oB+ZuqC4MFZK8xQp5I0cQaw8h+h9tG9QrvhM60C5cHVqBMxIQV+S35MogMgadUZWQ/3NyAttivxjjNAu0a57IRP0A+OA98gD7ayzdj7jb+SGPkIm8OWHRhpUYFAg2yXhook3FMvPoQkiICa0cLjgOBUJ1E/TfDGYGUgIvKYcwyIhNCchNSFFBOqGG27w5IaFwADr27evV3Lk8INUIEzyDGL9EPpSoQSOEBNbOph5hTZn8PA5ypJBCxFBuOGg4URDs+BAvljEpIjiO8pHWRj8mhw4UmhAfX4DYaLMIAEsNEgbYuWemnUHpcLzw4Hws9wr2uSxBPHSONXMPjQ0KOXRvJ70G/Vkpoj1DSgjBEH/aS5VBe1FjHWdOQTbj/tAHNFaoNECw4E+1FCvlJN+QrkyM0CGaEtC7CJDlJFwwJB6MJP72aBx4MkjiYwjV8gfC9Djx48vEMyOPqVdsI41d2m0COZbZWahgbuoK6SNMcA44Tvuz1gjGU040D+Mz2AqtMqCYpE42hc3CtPvcHF3KxoQFHV7QNIIHIMHouBzCFwTBTCwGBCaygnwGcIZjLsMUTEYQqM9MjXkPkSlC81QDzkiqJqclnsVJbjBOOPBnJwoA/pNv6MMEBtWXbRxK4JuJabfqhQA7gxmEkFFVFQgKwZjrAYBdUWZYR1CyLQjJKZJOeg3kkjwPaTFrg0NhxpukTU0Dn5QsdG39HdhkTrVegwFykz7DrdROGVGtiHan7JRVsqsMsN4g2i131BSKDCNQa6uPn4P0Wvs77MBC5v+VxnneRgfmqAgWE/kjRjY4dqF9g9NFE6ZkfPg9ciJ/k6TJzDbgMSRGWRAE3xrQKzCoFEZo529VQTEnGMTQmLKppnSo7WaKgI0NrROAbGmsVrUX4wQBi0UrmMwhPq/wxEw5MP9IfLQwPAaLzlSoiss9rlmTA8CsqVOxdm5ELrAB9FFG4I3VlAfSABFhEWPfx1FqNHl6A9mQxATViRET/kKsySLWqzU3xQ2Y2FMBBN9KIIKDCIM9TkDbSvkJVys+eC6BddQzmA/a7jaaEiNdggN8VuYPBQVrQ/rX8k3kuu1vJRfn4M7izaIdLFY3byV5dxKEDGROBY4e6bpXDJNl5fwlaWNUAFhWosFpBYKfj2sTcgDoUIQgxYJg4rrmYIHs8NjaSHkQUVIlhusNXzU+AaZKitZMIAZnLxiTeJAmRk0ofvR6dtg7sBwiV6jBUqLtoglsl4swMWAMoXMITh1mwDKgOuJabp+jl8WpRktlCgL29pGGxaWfV5xtlmHGgIYTcEonLgNeD4yg+KinpRD48Kj6JHPaFwL3IfZQxA8JyjjkUDzmkYDyJvFUv0dZaE+arCcDchX6GyhsiBqc4tGxWeKHxwBZfEM/yYvTdLKNfhAWbSjYREEyIwpUjxrSurBdA9orlHIOJhQgTZQa4IFKUhDgQWGhcLv9BoIncXF4IIj0B0PkDeLdUGSgdwZoEzFNYNStIcdGBhYgdxDM7RTdv5mpV8tIBQ003XNRsRCXrBOkQCLlwGJ9asnNZm1FAZkB39urPt+1a2AUsXFFZpFB6C8dPsrz4slSTT9DkmW5mE2SBzXCDMKnfGhdPCJ60lF3TKIGwPDinoxE9EEyZECHzVrLSqLPA93Kf1X3KQhoUD+GR+6UMyY4L26vehD+kTTHfJdUYmskUnNQ1vZELUlTsdqCioW7HgpmIrx0q1DKtyQH34/BApiitd40NSZxUxIAcsIKwhfpVrI+B7Z9YBvERLUBMjaDlyHhc2i3+233+5JnYEYzO8YCgYWioNkrhA7BI6gkpuPHSoMXBRlLG3KLIqy3Hzzzf6elIVyBNc3eM/OiG984xu+/lhI0VpZWN+43FiUory0Q1HlhYB0MTiYazJS0O4sbLIgGPTDAsqPn5vvIA5kGZmNxZ/Kc1DKKFBN81YaoO2Ykd12221eZiBxfP8qM/TH1KlT/cKg7hBCIbP2olY+8nrTTTcVyIl711135d+fhW/aDKPsxhtvzN/tQXtxn5LeZcb4wKj71re+5eUKQ4JFTp2hIjPMaJlRqdFT1BoNZWWGWtyMT/EISwoRIdhpov5sLFMGCgQTKlgII4MMUmCAQ+BcG9z1gEAy8CENyJPvdJBABvyez/TeWBgQLMIevA/35lqUCdNgLM+XXnop32XB/RHuUP9kEDyPgYslw4AN3fcOGPhY4JSHNuS5lIUBQ114NgNICYP66p50teD4DGVOefgtszisYZR6aBtyf16UO1ZipF60mVp2QVAWysHzqQPEodtClQSoF3XA0i7KCuUe48aN87s3Qne2lCSC/USbhXOTMHOBGCk77Rv0m/MZxkC4o/bIoMpMsG2oN/0d2geMBV5Bl2A04BmUE6OEfmZ8hquTnqlQ+aLunAD/85//XOA66sbnzBg0qXNlgpF4HAKhxU/O7hgGEoOXWBRYZPh6K9Le/PIOiAarHoKJdlumoXDQrqy7scaEuwgDip0+/PvKK68UuJYdOBgwzLoqoyVu5+HjELoSj2sHKwkXF1YMR7+NRM4taG/caBCMnhg0lAyYodGutDGGCzM7Qn0EwewOssf1UhkJHJglHsfAzcJUEzdIUVnvDaUPdXdYHteSBQaKuuAg8VAjhXGNayec26yywEjcYDAY4hiVwp3CgpUl2DUYDBURlYLEmYpVxkMABoOh4sNybBoMBkMco9LsTklJqSots2pKtSoiW3dky579x8U2chgMhnhHTCSuQZ/0GDBbgXgFY4yzc4Lv2e/Jd7gzynL7W2aDVPnNf3eWWmlJMmfhbvm/J1bKrr3mYjEYDPGNqHenQOAcg9XMNIA9yuyV1d0fmkhAA7Szf5Pj28HQlecahMxo2jhVrh3dRK4ZnSX3/uJzmTmv9E7YGQwGw7lA1D5xjTbGvkzid3DARMPSahAh9nVC7MQV4QXxc6pNA/aUBZgEbNySLdNm75KkhCpSv178J+g1GAyGmHJsEqgm6B6BxImyxukpYjaQgzO4rQ/iJ5AN35d2LsKz4UTuSW+WJ1SrfHGHDQZDxUPUJA5xBwMC4fNWt4oG0QnGjOZ7TQpQHrb5Hck+KUmJVSWzYap3sdjipsFgiGcUe3cKx76JLU5Ev3AB/3G9EFecCG9nC5B/LrD3wHHZtitbhvarL/vc+5VrD8rsBZUvBrHBYKgYKNY+cdwoJIiAvHGhhO4+wQLne6xxkhvEmoWmJLHvQI68+NZGqV0rUW65qpmMHt5YDAaDIV4RsyVOSEjCPxIPmEQHoRk1dDGToEAQeHnJQJ2RnizfuaW1zF24R37zxErZtz/yZMAGg8FQ3hATiRM7uX///n63CTtUNHO3gl0qJKMlkQAWOrkOywsy0pOkqpsZzPxsl6zfVPr5Hg0Gg6E0ETWJQ9DnnXee3ydOVmtcKKQjA/i8ca2Qig0/OJk2WNDUFG74xcs65i+LmidPnpIjR0snlZbBYDCcS8RE4qQgg6yzsrL8S0HORj7HQsf/TXorXgqscmJfl8XJTbYUptdOlJ6da8sJx9+77bSmwWCoAIiaxCFnyFqztQehu1PwkRf227I6et+kUar88r7O0rpZmmzaekTWbjRXisFgiH9UiqQQIDWlqgwfUN9Z4Mdk9fpst6CZI7knbZO4wWCIb1QaEjcYDIaKCIsnbjAYDHEMI3GDwWCIYxiJGwwGQxzDSNxgMBjiGEbiBoPBEMcwEjcYDIY4RrFInOiE4Q79RPq9wWAwGIqHqE9sEp2wbdu20qZNGx8rnBOYxExZuHCh7Nmzx1/TqVMnadeunQ9FC/bv3y8LFizwKd1OWRYGg8FgKDFEbSZD4hrwigBYa9eu9dEKybGp2e+JM06gq2XLlvnkyMRaGTJkiKSnp4vBYDAYSg5RW+LHjx/34WfJoZmbezoSYPfu3X1scSIVkoMTqNWNhQ6Jk2NTrXWDwWAwFB8x5dgMhpMN+r0heECCZD5PTk721jnZ7wlJG8zNaTAYDIbio9g5NrGucafs2LFDDh48ePrGjrxHjRrlE0jgG8e1gk/cYDAYDCWHYm0dwdLu2bOn/3fOnDkFFi15T0o20rZhgeNq0YVOg8FgMJQMqjlyfUhiAAucpGgj0/3MmTNly5YtBb7HpbJu3Tr58ssvvf+8a9eucuDAAe8zNxgMBkPJICZLHIu6R48e0rJlS791kByaQSscf7hCLXIWQWvUqFHgO4PBYDAUDzHtE2cnSpcuXWT16tV+DzgZ7QFkjeuEfeL4x3GlkM6NfJv4yPne9okbDAZDySFqEscKx4UCKbdo0SJ/zzj4+OOP/b5wSJsFTXarsHMlNTVVVq5c6RMnG4kbDAZDySHqzD64QzipiYUdCpIgY4lz2AcS51/cKFjgWOxsMzQYDAZDycHSsxkMBkMcw6JTGQwGQxzDSNxgMBjiGEbiBoPBEMcwEjcYDIY4hpG4wWAwxDGMxA0GgyGOYSRuMBgMcYxihaLVOCh2CrNkUL9umtSokezfnzieK5u3hw9TwCnYunVqyMFD2XIsJ/IDVDWqJ0mttOqyd99hOXrsuMSKqlWryPABGXLtpU2lVs0E+dtL6+SDT3aKwWA494g6iiHEzbH7Xr16+ciE5NIkpjgRCnNycs64nmuJdsjRe2KOl3e0aJoh37l1hDRrUlfWbNgpx4/nyrkA7XrhkE5y89UD5cLBnaRH52by4SfL5eTJM0m8cYPa8v1vjXQkfky2bNsrkarQ87o0l7u+PkJWr9shu/YclFhRs0aC/OnBHlKzeqI8/eo6mb90nxzJPjftZDAYCiJqdwrH7Ql+RdArjtJzzL5z584ydOjQMzLbc/T+vPPO8zFWMjIyJB5wweCO0rt7Sxl5fmdJq3Hu4p9jcU+btUIe+dskWb12u7PIkwq9Nuf4Cdm2Y78czj4m0cyBUlMSpbazxBOqFc+L1igj2ZUvQabO3C7vfLhddu7OEYPBUDaI2p1C/JP58+f7CIUEuMKCHDx4sA96ReIHPgd8jqUO6fObeAhBm+JIrnvnLGepbpfmTetKx3aZsm3nfv9dYmI1adeqkew/cETqpdeU2rWqy/pNu2Tjlr0+dnpKcqK0bl5f9rrvM+q472tXl3Ubd8mmrXsjdjftP5id9zqcHfb7xIRqboZQz5dz6szlsmHz7gL3zsqs61wmybJv/xFp2SxDMOJXrN7iynzm/eiPGqlJ0iIrQw64Z27YEnnu08SEKsJ/B7NPhJ0pGAyGc4eoSRzCCnWLaO5MJRQIgryabdu2lU8//VT69Okj8YA2LRo6X3NNeeaVmXLZhd2kQ+tG8vHsL+RE7klHeMly7x2j5PDhY44cT0mCm3WccG3xj5c/loVLNzoXRx353jdHyvETuZLrPk9MSPB+7cef/9AR6TbfbsVFamqiXDW6lzRplC51nBJ54oVpMnvel/ntPvqC7tKnewvZ43zeyU551qlTXZZ+sVkeeep95+oq6Dvn91+7eoC0aFZfXnhjdlQkXjc92Sm1KpJ7wgjcYChrFHt3CpEKybGJBY57BRCutm/fvj7bD+Fn4wVtWzb0C34rv9wqX3y5Tbp1aCppNVP9d0wksL6zj+bIU//6SP7wt/flkCP0K0f1kjppqVLVuSjS3L+HjhyTf7w0Q/745CTJcTOQ68f2k+opiVISOHQ4R54f/4n8y5FujlMQKYkJEpzfpCQ5d0mtVJkxd6X87ol35UNnrffo0sz7+fPhftAwo7Z847pB0rFtprw4YY7MX7w+oufjRunXM11GD2vkXDJV3IzlkBgMhrJFsXankFsTlwm+748++shbhFjhHTt2lHr16sm7774bdrGzPIJy9+7aXLY6X/NW50JZuWabnN+/vbN668je/Yf9NVjTC5dtlCVfbPF1nff5Whl7cU+p41wniumzVjrrd5OzyE/K3AVrZdTwrs4PnSq9e7R0BNg67LOXrNgkb09ddNYy8nzKl+TIO/dk+IXEo8dOyHsfLvF+82Urt7jnd5Faaan536ckJ8hVl/byrpS/PPuBzFu0LuJZwmUjGsn1lzdziiJJxk/aJItXHBCDwVC2iNkSZxGTDD4sWi5ZsiQ/xyaEzkInVjnp2LKysnw2IN43aNDgjMXPcw3IOu9V8PP69WpKpnNTVHfkNnpEN+979sTerWX+Nfh/Dx466kkPEmeLX1V3TXJynqXNZ4ePHPUEDnbuOiCJzkLHP57syDOtZnLYF1v/SgonHHlD4CDXl1MKLGQmOL86rpTEpGqS1aSu3y4YKabN3SVPvrjWKYf9cumwTOd3ry4Gg6FsEZMlTlYfthZiha9YsUKWLl2ab83hSmEhk0VOFjxBUlKSJ/CePXvKBx98UCL+4VgAQQ/q005SUxJkzfpdzqLe5D+HrHt0auYUUJJfmMRihuSzs3OkbauGfrFQr6vu/NL8C2GnpqZ4koQ0q1Sp6j9n0RFihPCx0PGb40f/YMZy519fFbZcocky+G1Vd79q7nVcSnbrHr7xZ5wfP6tJhowd2VO27zwgMz9dHVGfrF532L8OHTouP/1BF+nUtrbMX7JfDAZD2SFqEseSxl3CPnFSsZHNnj3g4MiRI94CnzRp0ukHOMK/6KKLfJb7WbNmlWl2n1rOv3395X3dwlwNeev9hfkkjouhY7smssMR2mP/mCr7HJFD4qOGdpVLRnSVxg1ry+49h9yMoqp06ZAlkz9a5twWOdKtY1PZ4aztI47sa1TP2444sFcbWbx8k/NfH5VebpGR/di79x3y+80j3XO+fccBSeuX6nzWjeUL59Y55vz0uSW0CyQnJ9e7ZD53Lpy2LRvItZf1lc1b9/o98ZFi/ZYj7j4nnUKzA78GQ1kjahKHsNl1gj88MzMzP0kymDFjhmzatEn27Dm90wESB0ePHvUHgsoj8BmzqMmCJtsC1SqF5C+9sLt0a99UPpq90lvfzZvWkwfvvVxO5p70pyafe+0T2bn7YB6JO55t0SxDfnjXpX4BMd25LZ584SNP8tHg00VrZcTgjnL37RfJnr2H5Y1358l0t1g5cmgXGT6wg9RISfLbHK+/sr+Mckpm+aot8urb84rYM37mN1jgz7wyQ/7r2xfLtWP7ymNPT/GLspHgwMETkuvrX3JuIIPBEBuiTs+GfxvXiFrfQWzfvt3n2SzwgK9OeGZnZ8uuXbukLJGclOAs6abOvZPgSGy/c6nkWZ+pjhQ7tGnsj6Ov27SrwPXdOmY5P/cxv1/8L7/+mrw1aYG32NMdgX/hSH+pW+TE99y6RUN5+N4r5OUJc7zfvH7dmrJ89TZZ5gg2FvdRs8y60tj56Ks518zaDbuc9bxPGtavJS2z6p/hx4bov9yww289rJee5hdcAQuqHdpk+kVaFmfrOuJv3ay+rFi9VQ66mQKg3iixlV9u8zOQSFA9tZo8/8c+kl47SWZ8uktenrhJlqy0RU6DoSxgOTYjRLrzb//1N7fKMy99LJM+Wuq39p0MHLRREn/iuQ8dsa3y7piKehCGunXvWFv69agrDTKSZOIH22XBkn1iMBjOPYq1xbAy4VTgX9wqZ9DzqZNySv/j+wqsGqnbwmX41Q+4mZlbxM01O8BgKCuYJR4hWNBt2jjd+fWPyL6DZx5jT0pybqZ6tfyC5r4D2WIwGAznAkbiBoPBEMeoFHvEsKJZkDUYDIaKhkpB4jVr1oybULgGg8EQDSrNaQ2zxA0GQ0WEHbkzGAyGOIbl2DxHqEJezAaZkupcOyD74AHZu3NbmcWRKQzMWAirQDKPs4ETuIRdiAXIDmsVubnFiw3DwTPaMNqDZDybtIK42oi0uXPnTi/HjRo18vU6dMjC7BriA1GTOIMP4Sc6IQOAvzmpSRwVMv2A+vXrS/PmzQtELNy3b5+sXLlSKisSk5Jl5LhvSodeAx2hV5NVn8+V1/7yCzl65LCUJxBO4YEHHpDMpllFpn5DfS9fukS+/e1vn/EdxEqANBKCtG/f3pMskS4BSmLQoEH+e55FHPq33nornzT1RPCQIUP8Z1OnTs1POhION998s//3D3/4g0QKZLZfv35yySWXeFmFwB977DH/nP/4j/+QmTNnypQpU8qdgjUYwiFqEsdCGzBggM/cwwAkNgqW24YNG2Ty5MnemmncuLH06NHDB8PSgFdEN6zMJH7CWXsz331VVjryHjr2RknPaCjVEsqnn56okzOya8n+44WHqc1KOSVpKWfmIIUgIcdhw4b5/r7ttttk8eLFnsQJ1XD99dfL2LFjZevWrV6x9+7d2xM1hJ2WliY33HCDD5gGwRPemHg8RZE4shbtegfGx7XXXuufQVRNMlURLgIZJUQEsm0wxAuiJnGmv8uXL5eDBw96wcfaHjhwoLe8GYQa5IrrPv7443wLq7jT5vKCak5pNcxqJXUcCZ90Cmr9qqWSfeh03JAGTVtKvYaZrr7HZcvaVXJof17O0ZMnc2Xj6mWydf1q6dZ/uKSl1zvj3j7UbVptyWzRXhKSEt3vV8qBPTsLpL1Lq1PPX7Nv13Zp1Ky11KhVWzZ9uSL/OvqDGO/8S1alogiwpMEOIAiyZcuWfmZGoDSSg0DGECOztwsuuEA+/PBDefXVV308HWRG87KSJapbt24+wYgGWQsF9WrWrJm/L4ogFPwGWWS2SN3Xrl2bL5O0X6tWrXw5+P3cuXNl0aJF/jpcKilfKSV/sMuROfUhmNu6desKPIPrUB7cb/Pmzee0jQ2GUMRE4gyMIBiEEEeoH1XdLRA5UQzjHbXrNZCLb7hDuvYb6sg80bXFCVm7fKGMf/zXcnDvLjlv2Gi59ObvSkr16j5uyo7N6+SFPz4gu7duPOu6Ae3U4byBcvGNd0hDpwgg/f27d8j7L/9NFs3Im+FUq5YgAy8ZJ537DJGD+/ZIi/ZdJDElVZZ9OkPGP/EbR+Q7PMH85Cc/8dc/+OCDfoZ0rvCd73zHEyjkh4Jv06aNjyt/zTXX+Pc6c8P65Rrcb5CgZn/Cr/3LX/7Sk/PDDz9cIEImYIaAlX/llVd66xuChWxRGIo77rjD53RlBkgbcM8XXnhBFi5c6OXz+9//vlcc6enp3qXSpUsXb4n/9a9/zS8H7p4RI0b4tqQer7zyikyfPj3fXYgiuPvuu727hfKeyzY2GEJR7NgpWD5YJVgjTI8VaqEzkIgzPn/+fG/RxOsiKPUZPHqc9Bl+qXz01guyYv4sqV6zlrTp2tt9V03qN2khY2+7R7auXS0zJr7kLW3+vuTGO+Xlxx6WnLMosZTqNWWUUxB16jeSN578rfeVX/7N/5LRTimsXDRXjhzY5yNPYXm36NBdvlgwW1567GdywhFLg6bNJfdEHsGgDCBIlG2VKpFn7SkJvP76696Ndumll3riw1UCiT///PN+5nbhhRf6cuFioYyUb82aNfLnP//Zky0ypBmiwgHCxg2Ce4bUfyQZgVCD4D5/+ctfvCwim/fdd59XIsuWLfPE/vjjj/uZAr70adOmeWuc56JgyD4FUB7PPfecD6vMdbiAcAex9gMgdyx57mdbVw1ljWKROAKMJcPUFUtFXSYMRP5WPyODGUKHzHUgxBtSa6bJgIsdGcybIR+Mf0aOfOVC+XzWVP9v1wHDJb1eQ3n1sV/I4jkf+s869Bok7Xv2l6SU6mcl8Zp16krjFm1lzpS35LMP3/aWeKPmrWXsN+6RtNp180j8Kxw+uE8mPv9nWbdsof972aen74M1+eyzz3qCPNfx2yHK/v37+wQguExGjhwpq1atkjlz5nh/OHKCBYwL45lnnvHW+Y033ihjxozxfxel4P1MpUMHb8m/88478vnnn3sFwPOCGD9+vL+OF6kCIWdImecie5QRi5p2gqRRCAolccrHwibyynNZ6O3evbu8//77/nvcVFj3kDh1NRjKEjGTOMLNzgPybOIjD2a1R7B1yxfXQfZDhw71gzheSbyqc2XUTK8r+3ZuyyfwIOo1bCrHc455l4Zi744tktC9r9ROry+H9u0p8v78Hmt//y78vHlkdnDvbm9h123QWLZvXJN/LZ/jvgkHCAqLGJyrdQiI9bzzzvOWMgobQOBY2yh0XBPs+MAah/jeeOMNT+6QKModHzdWc1EuN+SI7X+QL+4PwP0gWgUGA7tlWHhHgeFzh7z5NxqLGXeO+rkpP79FdhXI9oQJE/x728FiKGvEROKQDYtDDFzIG2smSBhBi8onD3YWOcLOYNf8lPGGU678x48ddX7ZZF//0MF79PAhn2czIfH0YlxKag23+Jkbso3wlJw8ddL71INnrY4eOShs3EupkZb/WbIjJVw1oUoDZZF7PHyaOwgHKxRgqUJgpQ2dkeGLhsjxc2Nd44PG7cB3uC6wiiFxJUhkhvcQ+NlIVt1ytL0uQPKbYF/wHIwFlASL6tz7u9/9rnf3RQMseGSV8vEsnh1cvMQ3zxoQwEVoC5uGskTUJzYhYXyKLP5gkTCtBQxE3ReO1cL0mWsR+CZNmvj3EEq8+sRzHIGv/2KJc5EMlqy2nf3hncSkFL9DJDE5RXZu3eCt9ZadukuS+7tm7XRp6q47uH+3I+HTyYRzHYllOwuyXsMmktGoqd8/zr32bN/irMxsd+8unsj5nPfHj+d4y7sAimhD+uFHP/qR/M///I/fA30ugHX88ssvez8420pxNSxYsMAfBPr9738vf//73z3RYnnT/8gPssKOFfaEM3NDNvISTaf4XSqQKNewCKluDqx3vmcHiyoOfq/A6kZxcB3GBSSMyyZacH+UD2VAKVC24GI+MwJ87ffee69/bzCUJaK2xLFSEHIGF1N3hFzBIhFW2MUXX+wHLVNaSIVpNSv4QZdLvCHnaLZMefUp+dp//1Zuf+BPsn7VErewmSap1dPk6V/+QDavWSEr5s2Uy279vnTuc77zg6dK01bt5aU/PSzHjp6e8kNiSz+bLgNHXS3f/PEfZeeWjfLvZx+VTauWyZzJb8qIq78hd/7sr15pNG/XTeZ/9I7s31PQdXIq8P9QQIQsJhZ3YbNXLWcl5xb++xRnOG8N1InZFoTGwRn6+qqrrvL7xHFHqOJmcRufNLtYzj//fO+rhrDZUoi8oPivu+46n4Sb/K0Q8v333y/btm3zh3lWrFjh78k1+Kj5PXXle8D3KARcKrhzKE9RFn44g4LPUC74wXH9de3aVT755BOvGPLr7hQJz83bMWQLm4ayRTUnjA9F8wN1h2CFswMAotYXg4mpJRYUBI8lwxSYgcdikW7hOtdAkTAjwIdaHOzduV3Wr3D1yD7i92qzzW/OlAmy0RH6MffZ2mULvFskwVno+3ftkKmvP+MWKd+Rk7knQu6zTbauX+XIeYf3sa9dvsjvJ9+waqns3rrJW/YnnC98zuQ3ZPLLf/NuHI8q+J8TZduG1e7aZfk7UoKgfyBwdlNgDeu2uEihR+HXLl8iqxZ9Wuhr+YJPZfbs2QUOcKGsITusVsiN74MLf/i8IXFkBPJG4bMQOW/evHxCZVsq/cQ6y9KlS73i537cl9998cUX/joIH6OBrYPMBrmGraz4s9Vtx+cTJ07096CcKn/UEeua+wd3VGnb4YpBniFrfPmvvfZaAdnB5963b1//TBY7K8L2WUP8otSSQjBQeDE4y/qgD4QBORS1fS0aUK8EpxTIeH/ieIhickSQmOC+O5XrXSfRwi8EO6LGxXLC+b4rYlwadbNhfet+7mhA+2Olo6BC1yZ0IZ1XcXzVhT2D+99zzz3+0NIjjzzid7FY7CBDWaJSZPYpaRI3VF5A4uxPZ70BAq8oJ5EN8QtLlGwwRAGsbnz7BkN5gcUTNxgMhjiGkbjBYDDEMYzEDQaDIY5hJG4wGAxxDCNxg8FgiGNA4uvEYDAYDHGHKlWqLOTEZkv3vn8UP/IxKlq3bu1jYBBciIMbGuRKwak5vuc6YqcQ/4K4GmVxMKKkTmwCYqLUrF3Xn9AsjbqkVK8h6Q0ay4njx2I6LBREh54D5NsP/z/ZumG1j80SD0C+atWrLzVqpUv24cL7q9fQS2TcXT+WLxfPCxtVsqKAsUOCDE6bhmYYigWcmfjpT3/q46QTZ51xoflPQ0H899tvv91/z/g2lEu8V9XhzWh+wSk2jhyTFYVIbgQYIp8i8S40VgcEzt98zvdkeyEGRUqYnIzxBCIKDrj4Kvn6//xWGjRpJqWBlh17yJ0/fVyate0qxUVKjZo+XVz1GrUkXlC1aoJcdsv35IbvPySJjmAKQ3JqdantyL5aYsU+6sCYgciJVVQS4IQsuXB5MU4h9cJAnCTiyIRm7DKUHzj+fjjBafdpzZo1e9T9/f1IfoS1TSwKgg0RWpTjzZrmipC0aGzC1JI8mWuIlaEhPeM5xkSqI8RadetL3QaZjjwaSt1GTSX3ZK5kHzoohw/sy7fKyeiTVqduXmTCbVudNXngq9+n5efG1Jgn3BOL88De3U4BnnK/re+UQ3Of3adeoyayf892Z5GfkH07t0Zs9Sen1pD6mVk+gFZeuNuCSHADMr1+ps8klH1wv+zeQYCqgkfXyVhEDtFqiW72smenD8Cl15z+fQ1ftz07tsrJwKlF4r7Ucm1AXBmIlkQZ2UcOya6tecHPCAxW1/2e6/g97UFoXcAMh5lOvUaZvq3rZzaX425GcvjAfjlycP9Xz0/y5E2u0tef/K2PQxOKmu75deo28GUmFs3R7DwrEiOjTkYDOebkkHrUSs+Qo05ed+/Y7EMN57ehm7kRiZM2J/ZLpKcyNfgYY4KxwVjhXnzG3xzhhzQZC8R54dQnzyA+enBsQJoQN9+FyzPKcyBX7gspE6grGGJAA3TxTGLM8BxmoQQnI5YRJ02ZTZPqLhz098SbIRaN5gYA1E3T71FOykGcGdopOBPnHjwXS59ykEovCMql5ed7O/kaEx51/L3OmzGOzR9yAjPUvXqc7Vc0OuSMgCmxIEQQNy4TOpdkEXQowYk09gRCFM8xJnoNGy1Dx97kSIZExbVk3J3/68PELpkzXSa9+IR3rzRp1V6uuP0HjnzyEhUTpOrNv/3WEdgmad6hm4z52vdk5ruv+Ow95MsccfVt0q57H3nt8V/5xBGjb7nLEXmGJCWnyqW3fNeRzyEfdOuZX99XIBlzYajbsImMuvFO6dRroBvU2XJgz+4CkQwJb3vR9d+W7oMudERd25HjXvl44ovyyXvj84k4q3UnufjG/5CsNh0lwV2/d8c2V7/HZfHsDz2Bnn/5TdJ/5BWuDep4JTDjnZflk3dfyyfiBk1ayHXf/YmsWTZfstp2kkZZrXxwrxcffVD2O8K+9Nbv+ZR2SUkpcsSR+BcL5sjbz/3Ju0T6X3SF9L1grCPxZu5ZCfKNH/3ek+v0f78kM95+yd+/mbvnuO8+4BZzqnh3y46Na2XnltM5Lpu3d+389e/5PKVg7YpF8uZTv/PuJIj7xnt+4X+HsmvSoq3PkvT2c3/29VP57Ny5s3c3ILekjgvm8CwKkNq4ceP8OHjiiSd8kC0ifpK96He/+50P+EV0RWayEBep5SBFsmD985//zI/kSA5RYrPQdwSVw2JW8BmJN3gOYXgZj5wg/de//pUfzIt48l/72tdk1qxZ+REhGX+/+MUvIgo9Qf0pM/VhPGO0aaRIlNudd97py48rlRfvSXsHLwDI+dZbb/Wzb0ic35K5SXkDUAfcOSgw2iqoKAxnh5ODRe71EO+9dDgy3+dcI8NdA/PhWS3ykyFWCyFBIWu0sbd2XEdjWZDRhQ7leixyosZFG1WvvGDFgtly1FmU5w0dLS3adZWP337Zk9JuRw4EwarbMFO+9ZNH5eDunTL11aedJZwto274ttz0Xz+XJx76rqxdukA2r10h477zY0ccByTFWalDLrtOprz2tGxZu0oO7d0j77/0pLR2BDfkshvk0w8nypY1K7wVe/zo2RM7YPmTj7Pn+RfJxGf+JCdyjspl37jntIvLEfCoG++Q4Vd+zRHiK7LOkdt5zq98+Td/4GYCu+TzTz7ws4VvPvCIJ+TJr/xdDjmSb+lIkbjnoNvAC2SMI+F5096RZZ/NkI69BskV7vfEO58//T1/DUkzIFpe0ye+5FPNZTTKckSUhLXgld0U1z77nYXfpGU7GXntNz2pTnz2UVk+7xNvmV9w9de9kpj88pN+XWDz2tNhYCHsD157Rjr1HiJd+g/1Ck/BDOL67z3oZjd15L0XHpcqCVXlmjvv9+nxnnR9QBuhaFPdLOSD15+RRTPed4r0674MtMeBr+K2Q8K4CpVUIwWKG1IjTo8SL24Q1obUosYChtwgWIh3+PDhnsxIZ0cIX8I48/dbb73loyRCpuqG1BR1BOAimuPTTz/t455zPZY4RIlFS/lREITixeomMTXZkyINTbx69Wr/fLIukTM12AbUC6VAOUi+QZhe8p5efvnlvkzUl2TVzMS5B9b/ZZdd5hNL//znP88PR0070Ma0i7lrosajEDi8zR/5Kv6rD+52DfuIE96H3EXdI7HM6QgEl3CiCBCCjHVBZ6LFsRKYGhL/mYXNYHD9eMIuRx57tm+Wxs3beety+byZsnXd6vzvm7ft7Mlu0Ywpznre4vM27Niy0fu4s1p3kFWLP5PJr/5dmrbpJGO/cbfP+rN2+UKZNel1717Zu2ubfxEFkVjjKxfOcVbqrPz7Q1Cd+p4ftmy4dLZvWuus5w6y+csVMm3CP6Wqu0+9xlmepABWeO/hl8nOzRtl9ZLP/DNXLf5U2rvFz859h3kS73n+KEnPaCQv/ulBmT35TZ98YsnsaVK1Wt5O1K79hst+p6Qm/esJnwRj2/ovpX2P/tK6Sy9ZPGdaIGRuFZn30TtOmTwScOu4mdvJUzLhH390ro76Xuntda4YiLNuw8aeYIjJvm3DGl8OCHTBx1OcQinogsNN8+kH//azoc79CrZHc6dcscAnPP17+WTSaxTEKaHu0rH3IMls0U52bM5Lcbfq80+98iQbUz1Xjv4XX+NnQEriWIXIM1ZuMFRtSYFxQh5USBvDB0Jk3QiCg+B5Lsml+Zd2+OEPf/hVs1bxcdghUkI74xrBWGJc8TvIFjeNXouFT8Jn7qOZiiIB9yPGO0qAcRsOhAYmRC8kTPkhZXzoGHRY8iQEUcJmJtO2bVtp165d/me4aQglTFsHU+wZCsU695rAGiYu8OAX/x/ZDDAi2pRD1wAAAABJRU5ErkJggg== 2x",alt:""}),Q.createElement("div",{className:E6},Q.createElement(eO.Tx,{id:"dev_handoff.configuration_wizard.install_extensions_step.figma_for_vscode"})),Q.createElement("div",{className:E3},Q.createElement(eO.Tx,{id:"dev_handoff.configuration_wizard.install_extensions_step.figma_for_vscode_description"})),Q.createElement(tC.$$,{onClick:()=>{t("vscode.install_extension_clicked"),e((0,ip.RK)({rawInput:"https://marketplace.visualstudio.com/items?itemName=figma.figma-vscode-extension"}))},className:vi},Q.createElement(eO.Tx,{id:"dev_handoff.configuration_wizard.install_extensions_step.figma_for_vscode_install"}))),Q.createElement("div",{className:E5},Q.createElement("img",{srcSet:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAXIAAADMCAYAAABukyi4AAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAACJKSURBVHgB7d0JlBT1nQfwX3fP2XP0DALDNcPgCsixigQDaqLgbox4R0HcNfoMSDa+NW/hbV7iywsmSvYlz10Xd02eZlHjS2IWEjTxCsbsg0g0GmMAFUGOyMBwX3PfPV1bv5qu6qrq7pnuOrrrX/397Gunp4+CDf/69r9/9T8ClEZjY2NNLBa7JxAIXCVJ0hx+iAAAIB92ylncJGfyi83Nzc+anwykekd9ff0t8pt+LN+tIQAA8JImuXP9kD7QQ+ZXNDQ0rJND/DH5bhkBAIDX1MgZfUskEqG2trY3+AFDkMsh/m35xwMEAABet1AO8xo5zH+rlVbkcso98XIKAAAIQi6zfEELcrk3fpBwQRMAQDStQf4v98YJIQ4AIKIaJci5cE4AACCkYPznZAIAACGpQT6HAABASEECAAChIcgBAASHIAcAEByCHABAcAhyAADBIcgBAASHIAcAEByCHABAcAhyAADBIcgBAASHIAcAEByCHABAcAhyAADBIcgBAASHIAcAEByCHABAcAhyAADBIcgBAASHIAcAEByCHABAcAhyAADBIcgBAASHIAcAEByCHABAcEUEYMPcqnKaVl5Cc6vLlJ+VoSBVFQ31DzqiMTrRH6Vj8m1fdz9t7+iVbz0EkCm0r8wE+D8NDQ0SAWSoSj6Z7qiL0LKx1dpJlanjfVHa3tlL64+20HH5BAQwQ/vKHoIcMsYn2L0TauWTrJqc8OrZTgQ6aNC+rEOQQ0a4h3Tv+Jqse0gj4R7UU8da6ZWzHQSFC+3LnhD/JxKJfIcA0lhdfx6tnFBDpcEAOY1P3Ktqw3JvLETvtKN+XojQvuxDjxzS4q+6j1xQJ19wKqNc2C9fsLpv73HqGIwR+B/al3Mw/BDSemL6+JydZGxquEQ5saEwoH05B0EOKfHXXW74ucYnNv/Z4G9oX85CkEOS68+rdGzkgBX8Z/PFL/AntC/nIcjBYHxJkXzhqZby7V754hfXUMFf0L7cgTMFDFZOrKXxpdYn/AYqKik0dpxys0MdUwz+Yrd9MbV9cVuzym/tC6NWQMO9pV9fVE9WlMyaQ5XL7lF+qqSuTup9903q3PgsDZ4+QVb8/Y5DGMXiE3baF4d2xQ1LqOL6JYYAHzx1gjp/8Sz1bH2NrPBL+yrIIK+urqZrrrmGZs6cSfX19cpPfoxvhaztB9+3dEJU3n6PEuJM6u6kWGencl/tlfPJdu7BVZbCfP2xVnrqWAuJBO0rNavtq6jxAqr9xne19qS2sWBlJQXCQ6HOx+XjZ0vE9pVKwSyaxSfRihUraMGCBcoNkvV/tJOyFRozTgvx7lc2UYfcO+KeuPKcfOLxCcgn4qiHH6PT991B2eILUyKcaGhfI7PavtQQjzYdoPZnfmA4TljupVd/6X4qX3St8nyX3AazIUr7Gonvg1w9wZYvX17wPaLh8MnBPedsqSHOPaL2H//A8Bwf76zcEx/75AblROSyS7YnM9cyecgYr2znRWhfmbHavkpmz1HaDn+b47akdhJU3HkIyr1yboflC6/NOsi93r4y5euLnatXr6a33nqLVq1ahZNsBP27su8tsbL5n1F+pvvKrNTJ//Smcl9fP8/GtHApeRHaV+astq9i+dscfwBw+zKHuIqvw7CiKReQFV5tX9nwZY980qRJtH79eqU2CZnhr6VW8FddZvViZia4x7ThZBt5BdpX9iy3L/6WZ/qmZxa0MXqFea19WeG7IF+6dCk9+OCD6CFlKWoxiDO5eKX2xK2G/bQ8zABMB+3LmqiLH/RcH2dWavDMS+3LKl8FOX/V5a+5kD0r9ctM8Emm1jitnmiVHpm4gfZlnVvti4ckqkGebX1c5ZX2ZYdvghwnmT3p6o92KCNabr9Huc89d6snsxdm4KF92eNU++LQVoOb6+c8ppyHI3KJry9eK8+WH2Z4+iLIecwuTjJv4RDnIYfcG+cLXTwpSFRoX97B7Spp0tmf37R8MdUvhA9yvvD06KOPEtij9Gwc6jXxsdSxv1xSafth9hM19PI58w7tyxlOtS8ObfVaC1/k5HHkPOyQbx3yRVEr5RU/zOwUPsg3btyIC08O4JNi0KEg5wkaPBSMTzhlRqfN+ihv15UvaF/OcKp9RQ8eUG4qDm51ZnGV3O4G5OeyvRaTz/blFKGLQ1y35B4T2Mf1RidULx+aZcd1SydCnOVr81y0L+c41b5S4bVW1PAu+/RnKFt+2JxZ2CDnEwx1S+dYnayjxz2j8PVLlBA/61CIs33d/ZRraF/OcqJ9DUftpVtZdTMf7ctpwpZWcJI5y+qsOJV+4azWx79v+Ppr1/aO3G+ai/blLKvtiy+YM75YPlzJRF0R0crStvloX04TskfOvSWemAHO4R6T1fWdeSyvGuK8Ap3VYWCpcP0y1+tgoH05z2r7UkepqEMOh3sNy3Z1xXy0LzcIGeRYXc4dHMjZKpVrknyRidlZFzqd7Z25P8nQvtxhpX11vTo0CoWDnC+ic2jrcYDrR0hle6EzH+3LDUKuR75582ZPr3PREZVow/F+2t4Wpf3dg8rvVUUBmhoO0Q1jS2hupIjGlwayPGYvvXRkB205+THt7ThOHQO9VFVcRtOrxtPNk+bQvFGNNKHc3o4nPDzs5N03ZPWeup+8knFPi2vm2S5le8sHzTm/GOX19iUqK+2LcYCHdR8CXLaLyddhONT1a5TzdZlsS3r5aF9uEK5Gzl97vXyScYA/1dyrhLce/769ParcxpcGaWV9GV0/tjijY26Vw3vNhy8o4W04pvz7e+cOKrcJ5TV039RFdNPES8gqdReWbMbiBmwuWDScV8925vwk83r7EpmV9sV44ayBpgPK7kBca9fX2znAe7a8pvTcs724no/25RbhgtzLX3vXN/cpIT6S430xevhANx3rK5MDffglNJ/cv5WeOLCVRnKsp5XWfPArOtrdqgS6VXzRsnuYJUPNTty2kNzAtcv1R3O/4L+fyyoHDw3Qnn398s9+ammJUW/fUGdj/LgQ1URCNGNaKc28sITKsvy2mI1s25eKS3Z84w8DdSgj98qtXlTPV/tyS4j/E4lEvkOCWLJkCc2dO5e85tVTA7SuKbur39w7/5RSZkl9qYJ74t/96GXKxnvnmqhaLrlcVGNxb8SSEgoWl1Dfzncpnx5rPpeX+qVX25cdHOAvvNxJW7Z1U/PRKHV2ShQdTDzPv585O6iE/Acf9SsBP2VyZt8Ws2W7fQ30K7VwvsVaz5FV+WpfbhHuYuesWbPIa7iHvb7ZWqN4eH9PUhlG9ciezWQF9+C5pm4V1yOtXJhyCq8N/crZDsoHL7YvO37zehc9/dM2Jcwz0do2qAT+fzzeQi1t7kxdL+T25RbhgtyLM+22y42fw9wKft+O9sGkx186ulMul1j76se1c74wagePRHF7Ekcq+7v7aV2z9Z6WXX6ayfnCyx30x3etjZHmQP/h+hY6ftKdGnKhti+3IMgd8MopezPDfn8uube05eQesoNLLHapGyfnCo/nvW/vcconvwQ598S3v99HdvT2SvTcLzpc65kXYvtyi6/37MyVE332Gvr+ruQe+bFuexdiPm6332D5wtLoR5/Kyddg/rrLJ5kfVqLLtx1ygFvtiZtxz/yFl9wpQ6B9OQdB7gGpauQdUXu9KSfx1+DI/Q8kTcZwQkc0Jn/VPevLr7v5wjVuJ3F93W7vfjhoX/b5cvNlcB7PrOOappOzN7mX9NSxVvTCHcS98Za2QXLa23IPf+7F2e0239U9SB/tbqeu+DfOMWNKaPbM1EsCo33ZgyB3wNSKEB3r839j4Vl03HPiscDK0qG7dma9oTL3kDacaqONJ9sR4C7Y/oE7Q+r4oif3zDMZlrhrdwdtfP4I7dqTXJIZO6aUrr5yNN24eByFwyHDc2hf1iHIHcAzNN84l9nwLj9QTzjGa1vwCccz73hmHZ946mQProHyhgJ8QatU7m3xjLz5191M4A6+OJnpMEMrOMxHCvINzx+VQ/xo2udPne5TXrNl2xlau2YGjR2dvIM92lf2EOQOuGpUsTKp53gB9MrN+OtwPoaRQTK3hgpqxz8xfMlmpBDX40Bfs3ZP2jBXoX1lBhc7HfLg1HICyCfukbupdZja+1A5JbMQV3GYP/7EJwT2IcgdMre6CGEOedWbx2+Ej//IWiDv2tOu3MAeBLmDrpevyv/6U1Vp104B8KODh7qV3rVVGzcdI7AHNXKHcYhzmPOCWG+cjSqTfToGJeqMSsO+B8CucXXuLHSlKitLvSpiqtEp2Th4qIvAHgS5S7jUwjeAXBlfFyKKtVFP78jjyAPBEJWWVCo/M8XL3KZipzfOeLw5H4OHJoI1SBoAHxk3LkgH/prB9Hw56wcH+ykcPo8Cgcy+EU5pTN3j7+ryx+YMIkOQAzhsz942ev7Fw3T6TC9xQY0LEpJ6T0o8wj+Vx3VVN4mfD8RLGBLFXx9/i+5Xw3t0v3NvvLsnqr126FABObR7Kdp3hIqKA1RXN5OKS8IkxQYpGu2h4uIKGsmM6SVUG0kd+E70pNEbtwdBDuCgbW+dpB89s58S+ZxIXMkUvgHtMckQxtpdXeYnBX7SnfiHgPn92nPFFCiaQt1du+ngJ3+gKed/VgnzwcGoHOQ0ouuuSb+lH0+7z3bood6UyWECewo+yHnBqt+cHqC/tEVpX5fza1SoKkMBmlAWVCYPZbpXZy7wLkRbT+6hP8eXva0qKqMJ4Rq6uu5CW/t/FqrXfncsEbyagDFk9Z1zfqXye6LfrgV4/L7+verxyPRY0mtS9fLlH8Ulk6ivZze1nDtIY8dltonG5fPL0/bG2ewZVVQRLpJr3dZKLDcsdn6xrEJT0EH+xrkorT3QnXaHHqftly/q8FT+9c1BZcx5Pi+G8nrlvMdnqs0r9nYcV8L9if1b6eszrqNFcqhDZpoO6/ailNQf8b65LqC14NVKJVJSL1wLef3hTF1tSVd6Ue4aAjzxM6AePzg0i7K3N7Ox2+Priui6z41celm2ZAI985PDlC0uqfAHAdhTsOPeeKPkr3/clbMQ1+Op/Pft6qJXTuVnfRbePWjFn54ZcQci3tB51fafK4EOmVMDVZ+rkj6wJdOTZArh+GukdM+TlNQDl2KUuvRCnPEBY909QxziK+6OZPTaG68dJwdyNWVr+V0NqI87oCCDnDdKfqo5/xuv8rcBHm+eS3vbj9OaD3+V1XuePLDVkR2HCkJyR1sXyBJJUtq3qK8gfWddf73T/Hop3ss2X/+UyPgmSRf8meY4l1M4xMtKA5SpB/51qlzvHrn3ruIQnz+vlsC+ggtyOxslu4E3X86lVds3kBVrPnjB1obOhUIfpokLmal72FrIS4nXJCWtVkqRtP/Tevta0idelui5J/fApQxSnFc3XHFXRCmnZBPirCIcov/83ixadtvEYV/HpZS135qhLGULzii4GrmdjZLdwH8X7pXnol7OdW+rGzpzmYVLMnc2XkaQnpa78d+Mv1PS72nr4AEy9u7NgRww/U7x65nxD4yAOrQx/l61P15ZUUrX3fIZOtcyQMHiChozupKqqsqVyUQzppdmHd6p3CEHOa85zjM+m5q66OChHrl8UqIE/afnjaLZM1ETd1rBBbndjZLdwLXyXAT5lpMfkx1cXkGQZ0JXxkgTxqnKLIaAVkerpAt0KU3Amy6w6kOcD1ZRUUZf/Ef3/w2VDSS49i0HOriv4IKcR454zf6u3Pyd9trckNmJDZ19TzL3ws2TfiQtsBsnVyq3lCWPVCGeOITh/sFDnfRJU4fhsaRDSgFDrRz8peCCPB+jVEaSq7+TlzZ09qvkXrjxoqP+hZfOPY9uv7WR7NqwqUkO8k4yfBMw/IUoUVtHkPtSwQV5VVHAc2HOf6fkx+wNyaoqLiPIA2PnW7sjUWCYMosDf2w8oAPaXyJg+OBQn+/q6qOf/fxNKi4pp0hNPQWDRVRUZL2tDAxEqau7h/r7rY++On9yWK6dY/SKHQUX5LxR8vY2by3yw38nswsj42lvR3Ybz+pNLHf+xLiwejzB8MwXIrXH1N6yS30IdV5ozPQpIhlmIRF1dvbKQf4uhSvOo4bGUioqLqeysszGiqczMCDR4cNnqLfP+jc+rqmv+97spA2ZITMFF+QLRxV7Lsj572TG0+NfPLKDrHJjNiZmeGbIVM7QPWR40bvvnaFTp3uNb4u/cNltjXK4JXrKu3a30pY3TpA2pEVKlGqa5Bq5ZBrqon14aK/TB7uziouLqKGhjvbtz35mp0rZlHnTEVp+92SC7BVckF83plgZR+6V8gpvKnHlqOR/hnmjGmmC3Ku2MlxwQnmN4+ukuHFMf0ozGsXw+9ADykVK+aYtnqUukCXfFl05zhDkHPhb3jhuvgaqHGtoqCFpF0j149HVCUYB3X03cJiXlZbIvXLro8K2bDuDILeo4CYEcT169RTv1I//fUb6mXBrL/oCWcHrozjNjWP6kXlMePKsTCnpteafpOtBG48tGUI86Zi6ENdPHgqQfny5e0Ihe3HS5cERZaIoyCn6vLfmyvr8h/mDF4Rpajj9PwH3ytdedCtl4ytTFzleAnHjmL4VSA5wSS1uaCFr7IETJcaAD1/6CCTKL/pZoPH3xWK6UoqUeIk2q5Rfg1ErvlSwqx/eW18qlzUCyuJZuZ7pyeWUTFc/vGniHJpeNY5Wbf/fYcssXPrg0Ofwd4obx/Q7SdeUDCscBnRDA809cH22avdTXjE1Br2krauo9bxjUvJIlZTDEsFXCnoZ2+vHlii3V0/107ZzUTomB3qni7XzuZEiZS3ybGdxTq8eR5sXrqaXju6krSf20NGeVm3dk0vlkF1UN4PmndeorCU+HA7mTGRzTEgtcaFT2xkieTVD0zt4yKB+nfKkV+jCPKCbaGTcfSjR61eD3lgfR5z7EXYIokSgex33zvlm1dPzv0TgLv3UeO33tBc/peTfJUp7QTKx9Lhplqak/kmSYblc/d9J0so2kqt1csgPBDmAgwK63YBMQ7h1gT70hJR81XKE/vLQszHJ9H79ErXx52KGlbTQD/c7BDmAg8zL1SbKHNp/tNcFAgHDBVDjG0zH1Z7Sl1fioa47tv6/8RcaSjLokfsTghzAQcOPITft3RlLit30vWfJuBY5S/S6yTi+PL7QeaLDrv8AIfAhBLms7+3d1P27v1Dv23so1t417GuLJo2huo3fomyPye8rmTWZwtfMo9IFM8iK6Nn3qO/EFho48x5J0Q5yQ6h8AgXDE6hk3NXybRGBdYaLi9qFT/1z2m/GAE9VJ9dfBDVdzBy6myK40zwG/lPQQc5he+7hn1H/7kNZvCtg6ZjRI2eo95091P70a9qHQdGkzNZqHmzfS127HqEBOcjdFus+RnRW/v+j+SUl0KsuXktFo+cRZCapjGIum5B59IoxWNOPWCFdLVw/uUdKOl5SD9x04RP8p2A3X+765TY6cce/ZRnizhwzeuQ0Hb3iX6jzl3+gkfTLgdr2xxU5CXEzDvW2t1dQz94nCDJkCOIAmXvhiV61qYYi6UI3TdZqIR1/iZbR8TuSaQy5WhMfmqSUvFsR+EdBBjn3ms987UfkJCvHbHn4J8OGfqznGHXsXEPSgDtllEx173uS+k9sJchEotctSZJu6J/++UA8iOOhrNW/dXt3pjgsPxpTZ2cqQR3TAtt4QZNI669rzxNhLXL/KsggP/O1/yGnWTlmrL2bWh76adrnuSfuFZ38gRLN7weKCIY6wYkxh8YRLMZAlfQXMCVTj9mUuRJRih43aSNZlNn5MUk3VV8f4KT7HWHuRwUX5F2btimlDa8ck+vmffLNjHvASr3aI/hbAdfNYWRagJofM5RZzL3xRO95pPVQ9OPUdZcztfupZnIavhCA7xRckHf/9i/kNLvH7P5tcv27/8QW8pr+4977O3mOpBZPhn7RLymrprtkWtxKDXFtlImU6pJkqhJKih5+/INADfGh52OJ9yPJfangRq043Rt34pi9KXrkXuqNq6LtewmGp/Z/Y9LQLM+h+xIZR7EketRkGk443HHNpRXDnynpj8kfFjHd+uZSfIan5O46tpA3BRfkI40Tz8cxuVZuNtjjvSDP90VXIUhqfzxRMkkKcVMnnUyhbCqGpPgjJMNP7TgkmZ7XHWbokwU1cp/ChKAsBavDlAvB4irK7eK6IwvIfycYnhbC+vq1OcAlXVRL+vp1Ylnan204QGPHlGvHPXGym9T9NyXtwyL+gaGFNOn+vMQfIBk+NcCPCi7IS2Y2KpNzrMp0Eo9dRdUXUrTNW6WMourpBCMz9Ih1SW1YnZDS9ayH7r//4TlDnVvdDi6gHSxeLw8kPhwSr0scL2a46srruyDM/ajgLnaWWZweryq/JjezHIs9OD2+tP5mguEZyxqSNrJE0ge6lDzu2/yYevEz/g6tzq4fN648EjPVxvUjWiTdOJkUHxrgHwUX5BVLr5TLIxVkBU+tr5Tfnwu8zkkoPIG8gv8uxedhqv6I4gGaGIGiPkaGcE45iUcy3SdTqJtLNKSre+uGM+prNkPvj5FEiXHlXlURDhFYU3BBzjXu2m9/kawYZfF9VlXMWUteUXr+F5W1V2B4+in0Wo2aEsGu9c7JHOaJ0ktiRmhMu2Cp79XrSymJ1yf+7Fj8ffpSTuIzxLtJPnZMKYE1BTmzs3LJlRRZfVtW76mRX5+rsoqKe8Dh6fdRvoWnf4XKp9xJMDJ9L9owPV7fI47p1kwx9biJUpRc4g/rA1sL81i8fBJLlFvUK58xST/23Ps98sbJuRlI4EcFO2qlZtWtVCxfuGxd98Kw48C5DDP60S/nPMRV5dO+QiH5ImP3R4/QYI7HlvMolXL5gwQhngVdUqp9cG03H/1oFe15MpRM1MeTL4rqZmpKpqPoSy2S6bjm5PZwks+eWU1gTUEPP6yQe+a8NjhPke/85Tbq3304vnb4aKUezuFdqdTU89tT4Ho533iKfF/zi8rEHLfGdHN48+iUotGXKgGOIYfZmT2rlj7YdS7+WyJ8JV2NQ4tSXejqQ1oyvFf3HnX4oVqqMYS9brCqPti15+P3A73klsFB6wNmuaxy9ZW5GRHmRwU/jpwDu2jJGCXUva60/iblBt51yw0NcpCfTRHCKXrg2kt0Ya4OKdT34A0ll1jiMX5dTH+coWOpW8gN3SfDiJZArEm+V0ZuGIhGySqEuD2YEATgoMvmj6U1D1xCv375kDKJR08NZ31v2RCypCuY6EavsN7eQTrX0qL7EAgM1cX1L4ofMKb/VX2NJPfE5RAPhnqIgzwYdPbU59641R4598ZvWFxHYB2CHMBhl8thzjcnnT7TTTd/4RtkRyAQpLLysXKYF1E4XEtO6u3rI6u++k/nU0UYUWQH/tcDEMCY0WGaOnUmNTcfJSuCwRCVlFZSSUmlHObV8u/FyuOhUAk5oT3FekGZuOO2ifJFTlyHsQtB7lHtf1wx7MJZgaIqZT2WUGQ6ldZdjX01C8A1n/ssvfrabnIKh3lxcTk5oaMj+4Xjlt/VQDcuHkdgH4LcozjER1rKdlC+8V6evZ88p0zWiVz+NAXLMWnHrxbM/xt67fX9ZBdfDK2qHk/lDpVXurp7aGAg8wuds2dU0fK7J9MUjBt3DILcJzj0W/5vMVXOWYuRLT71N+eX099ePJn27mshO7gXXh2ZqNTMnTD3ojIKSGE6eGj48goH+KKrxmCEigsQ5D7De2uG5F45Si3+dMsNF9B/P/lXsqq4uIwqKsaQU2oiIbrrjlr5NoZOne6Tw7xHvnXR6dNDFz/HjCmlutGl9OlLa3BB00X4X9aHOt5fQ7V/t5nAf6ZdUE2XXHy+HJYD5AVXX5koj/AwQr7Nn1dDkFsFudaK33GZhTdvBn+67aYqKivN/55tl1xcRnMvxkJXXoAg9ynseO9fNZGg3BO2thSzc3+HkKE3DvmFIPepaPvHBP51+fz89obvvL2aaiOID6/AvwSAoG69sYqmTC6mXOM/d3wdNoHwEgS5B6RaXTGIVQchA3curaYZ03LXM+cQR13ce4QL8vb2dvIa3tDZjlQbOvPmy3aEMDHIEi+2r+GUlQXkMkeV6/Vqron/88pahLhHIcgd4MaGznY3X/biRslHjhwhrxMtyFUc5LfJveXaiPMlDy7f3P/lGs+XU0RoX24RLsh373ZurQmnuLGhM2/zZnXzZa9ulNzc3Exe58X2lalL5N7yirsjjvXOOcBX3BVRbl4Y7jgSEdqXW4QLci/+Y3GNu2b1rWRFug2deWceq5svl0+7z5MbJYsQkqKHwdDQxDB97aujLPfQ9QGej4upVon8IWyXcDM7vfqPVbX8Whps76a2dc9n/J6RNnRWN1/u3vsEZYo3SvbqWit79uwhr/NLGHCgcw+db8dPDCozQfnW2jZILa2D1Ns3tPtEbU1QqX+PH1eklE5mTC8Vovedigjtyy3Kv1hDQ4N3d2Q1qa6upg8//JC8qmvTNsc3dObJPT37nhh282URNkq+4oorPF/H9Hr7gvREaF9uEa5Hzhej3nnnHVqwYAF5UboNnTm8S2Y2WNrQmXvY3DvnJWv1my+LtFEy93RFudjp5fYFqYnSvtwi5KJZb7/9tqdPNDc2dOaad2lY3M2Xn3nmGRKF19sXJBOpfblByAlB/I8m6jCxQsXhKAq0L/GI1L7cIGSQ80n29NNPE4hh06ZNQn3tRfsSi2jtyw3CXexU8UWpt956S/kJ3ibiRSi0L3EU8kVOlbBrraDXJIZ169YJeZKhfYlB1PblNGF75KrNmzfTzJkzCbyHTzDuLYkM7cu7/NC+nCL86ocrV67EhSkP4n+TZcuWkejQvrzJL+3LKcr83Ugk8h0SFP+Dnj59mj7/+c8TeMf9999PO3bsINGhfXmTX9qXU4QPcqZOq77ssssI8o/rls899xz5BdqXt/itfTnBF0HOeDYew8mWX3ySPfbYY+Q3aF/e4Nf2ZZdvgpzxyca9p4ULF1JpKRbAzyUuQXzzm9/09Qw7tK/8KYT2ZYfwo1ZSmTRpEm3cuFH5Ce7jcOOLgoUyDAztK7cKrX1Z4cs9O9VhSfw1DNzDvST+33jx4sUFdZKhfeVGobYvK3zZI9fjXtOqVato6dKlBM5QJ8tgTRK0LzegfWXP90Gu4hOOV7Rbvnw5zZo1iyB7vDAR14lxgiVD+7IP7cu6gglyPfWk4xl7fNJNnDiR6uvrCYbwSdTW1qbsuMJbn3GN8vXXX8fJlSG0r+GhfTmvIIMcAMBPfHmxEwCgkCDIAQAEhyAHABAcghwAQHAIcgAAwSHIAQAEhyAHABAcghwAQHAIcgAAwSHIAQAEhyAHABAcghwAQHAIcgAAwSHIAQAEhyAHABAcghwAQHAIcgAAwSHIAQAEhyAHABAcghwAQHAIcgAAwSHIAQAEhyAHABAcghwAQHAIcgAAwSHIAQAEhyAHABAcghwAQHAIcgAAwSHIAQAEhyAHABAcghwAQHAIcgAAwSHIAQAEhyAHABAcghwAQHBqkDcRAAAISQ3y9wkAAISkBHkwGPw9AQCAkNQe+bPyrZUAAEAogUCgSQnypqamVrlX/iUCAAChyEH+UEj9pbW19eNIJFIr311AAAAggocOHTr0WEj/SFtb22tymAfkuwsJAAC87L8OHz78AN8JmZ+Rw/z3tbW1h+S7c+RbDQEAgJdwKfwfuCeuPhAY7tWNjY33SJJ0M9+Vf84hAADIhya5Fr5Tvr0h33+Wr2vqn/x/ww4N78LUCQYAAAAASUVORK5CYII= 2x",alt:""}),Q.createElement("div",{className:E6},Q.createElement(eO.Tx,{id:"dev_handoff.configuration_wizard.install_extensions_step.figma_for_messaging"})),Q.createElement("div",{className:E3},Q.createElement(eO.Tx,{id:"dev_handoff.configuration_wizard.install_extensions_step.figma_for_messaging_description"})),Q.createElement(vA,null))))}function vA({}){let e=(0,$.wA)(),t="install-messaging-dropdown",n=(0,aX.U)(),a=Q.useRef(null),r=(null==n?void 0:n.type)===t,l=[{displayText:(0,eO.t)("dev_handoff.configuration_wizard.install_extensions_step.figma_for_messaging_install.figma_for_slack"),callback:()=>{e((0,ip.RK)({rawInput:"https://figma.slack.com/apps/A01N2QYSA81-figma-and-figjam?tab=more_info"}))}},{displayText:(0,eO.t)("dev_handoff.configuration_wizard.install_extensions_step.figma_for_messaging_install.figma_for_teams"),callback:()=>{e((0,ip.RK)({rawInput:"https://appsource.microsoft.com/en-us/product/office/WA200004521?exp=ubp8"}))}}];return Q.createElement(Q.Fragment,null,Q.createElement("div",{ref:a},Q.createElement(tC.$$,{onClick:()=>{r?e(nP.oB()):e(nP.j7({type:t}))},className:vi},Q.createElement(eO.Tx,{id:"dev_handoff.configuration_wizard.install_extensions_step.figma_for_messaging_install"}),Q.createElement(eM.B,{svg:vS.A,className:"configuration_wizard--chevronDown--P7ECL"}))),r&&a.current&&Q.createElement(aq.j,{items:l,onSelectItem:t=>{t.callback&&t.callback("",null,e)},dispatch:e,parentRect:a.current.getBoundingClientRect(),showPoint:!1,lean:"right"}))}var vP=n(47415);function vO(){let e=(0,$.wA)(),t=(0,tx.am)(),n=[{theme:"system",title:(0,eO.t)("fullscreen_actions.theme.system_theme"),checked:"system"===t,onSelect:()=>{e(vP.Qh({theme:"system",userInitiated:!0}))},ModeSvg:vD},{theme:"light",title:(0,eO.t)("fullscreen_actions.theme.light"),checked:"light"===t,onSelect:()=>{e(vP.Qh({theme:"light",userInitiated:!0}))},ModeSvg:vL},{theme:"dark",title:(0,eO.t)("fullscreen_actions.theme.dark"),checked:"dark"===t,onSelect:()=>{e(vP.Qh({theme:"dark",userInitiated:!0}))},ModeSvg:vM}];return Q.createElement("div",{className:EJ},Q.createElement("h1",{className:E9},Q.createElement(eO.Tx,{id:"dev_handoff.configuration_wizard.theme_step.title"})),Q.createElement("h2",{className:ve},Q.createElement(eO.Tx,{id:"dev_handoff.configuration_wizard.theme_step.description"})),Q.createElement(EV.z,{value:String(t),onChange:t=>e(vP.Qh({theme:t,userInitiated:!0})),className:E0},n.map(({theme:e,title:t,checked:n,onSelect:a,ModeSvg:r})=>Q.createElement("div",{tabIndex:0,role:"radio","aria-checked":n,key:e,onPointerDown:a,onKeyDown:e=>{"Enter"===e.key&&a()},className:ea()("configuration_wizard--modeOptionCard--0rFq6 configuration_wizard--preferenceOption--OkUN2",n&&E2)},Q.createElement("div",{className:"configuration_wizard--modeImage--TZBtz"},Q.createElement(r,null)),Q.createElement("div",{className:E6},t)))))}function vL(){return Q.createElement("svg",{width:"120",height:"80",viewBox:"0 0 120 80",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Q.createElement("g",{id:"Design"},Q.createElement("rect",{width:"120",height:"80",fill:"#F5F5F5"}),Q.createElement("rect",{id:"Rectangle 47",width:"120",height:"80",fill:"#E5E5E5"}),Q.createElement("g",{id:"Group 14125"},Q.createElement("g",{id:"Group 14124"},Q.createElement("rect",{id:"Rectangle 52",x:"48.3502",y:"24.3512",width:"24.9782",height:"39.8305",fill:"white",stroke:"#0D99FF",strokeWidth:"0.67509"}),Q.createElement("ellipse",{id:"Ellipse 278",cx:"53.7509",cy:"30.7661",rx:"3.37544",ry:"3.37547",fill:"black",fillOpacity:"0.3"}),Q.createElement("rect",{id:"Rectangle 53",x:"59.489",y:"29.414",width:"11.4765",height:"2.70037",rx:"0.506318",fill:"#D9D9D9"}),Q.createElement("rect",{id:"Rectangle 59",x:"50.7129",y:"56.7539",width:"20.2526",height:"4.72565",rx:"0.506318",fill:"#0D99FF"}),Q.createElement("rect",{id:"Rectangle 55",x:"50.7129",y:"37.8555",width:"18.2274",height:"2.70037",rx:"0.506318",fill:"#D9D9D9"}),Q.createElement("rect",{id:"Rectangle 57",x:"50.7131",y:"42.5762",width:"14.8519",height:"2.70037",rx:"0.506318",fill:"#D9D9D9"}),Q.createElement("rect",{id:"Rectangle 60",x:"50.7129",y:"47.3047",width:"17.2147",height:"2.70037",rx:"0.506318",fill:"#D9D9D9"})),Q.createElement("rect",{id:"Rectangle 2154",x:"47.3375",y:"23.3375",width:"2.02526",height:"2.02528",fill:"white",stroke:"#0D99FF",strokeWidth:"0.67509"}),Q.createElement("rect",{id:"Rectangle 2155",x:"72.3158",y:"23.3378",width:"2.02526",height:"2.02528",fill:"white",stroke:"#0D99FF",strokeWidth:"0.67509"}),Q.createElement("rect",{id:"Rectangle 2156",x:"47.3375",y:"63.1696",width:"2.02526",height:"2.02528",fill:"white",stroke:"#0D99FF",strokeWidth:"0.67509"}),Q.createElement("rect",{id:"Rectangle 2157",x:"72.3158",y:"63.1696",width:"2.02526",height:"2.02528",fill:"white",stroke:"#0D99FF",strokeWidth:"0.67509"})),Q.createElement("rect",{id:"Rectangle 50",width:"26.0423",height:"80",fill:"white"}),Q.createElement("rect",{id:"Rectangle 11539",x:"3",y:"11",width:"18",height:"2",rx:"1",fill:"#EEEEEE"}),Q.createElement("rect",{id:"Rectangle 11548",x:"3",y:"26",width:"18",height:"2",rx:"1",fill:"#EEEEEE"}),Q.createElement("rect",{id:"Rectangle 11547",x:"3",y:"21",width:"14",height:"2",rx:"1",fill:"#EEEEEE"}),Q.createElement("rect",{id:"Rectangle 11549",x:"3",y:"31",width:"15",height:"2",rx:"1",fill:"#EEEEEE"}),Q.createElement("rect",{id:"Rectangle 11550",x:"3",y:"36",width:"14",height:"2",rx:"1",fill:"#EEEEEE"}),Q.createElement("rect",{id:"Rectangle 11546",x:"3",y:"16",width:"19",height:"2",rx:"1",fill:"#EEEEEE"}),Q.createElement("rect",{id:"Rectangle 51",x:"92",width:"28",height:"80",fill:"white"}),Q.createElement("rect",{id:"Rectangle 11534",x:"96",y:"12",width:"6",height:"2",rx:"1",fill:"#CE7012"}),Q.createElement("rect",{id:"Rectangle 11553",x:"96",y:"17",width:"14",height:"2",rx:"1",fill:"#8638E5"}),Q.createElement("rect",{id:"Rectangle 11554",x:"104",y:"22",width:"10",height:"2",rx:"1",fill:"#EA10AC"}),Q.createElement("rect",{id:"Rectangle 11536",x:"96",y:"22",width:"6",height:"2",rx:"1",fill:"#8638E5"}),Q.createElement("rect",{id:"Rectangle 11537",x:"96",y:"27",width:"21",height:"2",rx:"1",fill:"#007BE5"}),Q.createElement("rect",{id:"Rectangle 11552",x:"103",y:"32",width:"13",height:"2",rx:"1",fill:"#009951"}),Q.createElement("rect",{id:"Rectangle 11538",x:"96",y:"32",width:"5",height:"2",rx:"1",fill:"#CE7012"}),Q.createElement("rect",{id:"Rectangle 49",width:"120",height:"8",fill:"#1E1E1E"}),Q.createElement("rect",{id:"Rectangle 48",x:"8",width:"8",height:"8",fill:"#14AE5C"})))}function vM(){return Q.createElement("svg",{width:"120",height:"80",viewBox:"0 0 120 80",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Q.createElement("g",{id:"Design"},Q.createElement("rect",{width:"120",height:"80",fill:"#383838"}),Q.createElement("rect",{id:"Rectangle 47",width:"120",height:"80",fill:"black"}),Q.createElement("g",{id:"Group 14125"},Q.createElement("g",{id:"Group 14124"},Q.createElement("rect",{id:"Rectangle 52",x:"48.35",y:"24.3512",width:"24.9782",height:"39.8305",fill:"#3E3E3E",stroke:"#0C8CE9",strokeWidth:"0.67509"}),Q.createElement("ellipse",{id:"Ellipse 278",cx:"53.7507",cy:"30.7661",rx:"3.37544",ry:"3.37547",fill:"#B2B2B2"}),Q.createElement("rect",{id:"Rectangle 53",x:"59.4888",y:"29.414",width:"11.4765",height:"2.70037",rx:"0.506318",fill:"#8B8B8B"}),Q.createElement("rect",{id:"Rectangle 59",x:"50.7126",y:"56.7539",width:"20.2526",height:"4.72565",rx:"0.506318",fill:"#0C8CE9"}),Q.createElement("rect",{id:"Rectangle 55",x:"50.7126",y:"37.8555",width:"18.2274",height:"2.70037",rx:"0.506318",fill:"#8B8B8B"}),Q.createElement("rect",{id:"Rectangle 57",x:"50.7129",y:"42.5762",width:"14.8519",height:"2.70037",rx:"0.506318",fill:"#8B8B8B"}),Q.createElement("rect",{id:"Rectangle 60",x:"50.7126",y:"47.3047",width:"17.2147",height:"2.70037",rx:"0.506318",fill:"#8B8B8B"})),Q.createElement("rect",{id:"Rectangle 2154",x:"47.3375",y:"23.3375",width:"2.02526",height:"2.02528",fill:"white",stroke:"#0C8CE9",strokeWidth:"0.67509"}),Q.createElement("rect",{id:"Rectangle 2155",x:"72.3158",y:"23.3378",width:"2.02526",height:"2.02528",fill:"white",stroke:"#0C8CE9",strokeWidth:"0.67509"}),Q.createElement("rect",{id:"Rectangle 2156",x:"47.3375",y:"63.1696",width:"2.02526",height:"2.02528",fill:"white",stroke:"#0C8CE9",strokeWidth:"0.67509"}),Q.createElement("rect",{id:"Rectangle 2157",x:"72.3158",y:"63.1696",width:"2.02526",height:"2.02528",fill:"white",stroke:"#0C8CE9",strokeWidth:"0.67509"})),Q.createElement("rect",{id:"Rectangle 50",width:"26.0423",height:"80",fill:"#1E1E1E"}),Q.createElement("rect",{id:"Rectangle 11539",x:"3",y:"11",width:"18",height:"2",rx:"1",fill:"#565656"}),Q.createElement("rect",{id:"Rectangle 11548",x:"3",y:"26",width:"18",height:"2",rx:"1",fill:"#565656"}),Q.createElement("rect",{id:"Rectangle 11547",x:"3",y:"21",width:"14",height:"2",rx:"1",fill:"#565656"}),Q.createElement("rect",{id:"Rectangle 11549",x:"3",y:"31",width:"15",height:"2",rx:"1",fill:"#565656"}),Q.createElement("rect",{id:"Rectangle 11550",x:"3",y:"36",width:"14",height:"2",rx:"1",fill:"#565656"}),Q.createElement("rect",{id:"Rectangle 11546",x:"3",y:"16",width:"19",height:"2",rx:"1",fill:"#565656"}),Q.createElement("rect",{id:"Rectangle 51",x:"92",width:"28",height:"80",fill:"#1E1E1E"}),Q.createElement("rect",{id:"Rectangle 49",width:"120",height:"8",fill:"#1E1E1E"}),Q.createElement("rect",{id:"Rectangle 48",x:"8",width:"8",height:"8",fill:"#198F51"}),Q.createElement("rect",{id:"Rectangle 11534",x:"96",y:"12",width:"6",height:"2",rx:"1",fill:"#FCB34A"}),Q.createElement("rect",{id:"Rectangle 11553",x:"96",y:"17",width:"14",height:"2",rx:"1",fill:"#D1A8FF"}),Q.createElement("rect",{id:"Rectangle 11554",x:"104",y:"22",width:"10",height:"2",rx:"1",fill:"#FC9CE0"}),Q.createElement("rect",{id:"Rectangle 11536",x:"96",y:"22",width:"6",height:"2",rx:"1",fill:"#D1A8FF"}),Q.createElement("rect",{id:"Rectangle 11537",x:"96",y:"27",width:"21",height:"2",rx:"1",fill:"#7CC4F8"}),Q.createElement("rect",{id:"Rectangle 11552",x:"103",y:"32",width:"13",height:"2",rx:"1",fill:"#79D297"}),Q.createElement("rect",{id:"Rectangle 11538",x:"96",y:"32",width:"5",height:"2",rx:"1",fill:"#FCB34A"})))}function vD(){return Q.createElement("svg",{width:"120",height:"80",viewBox:"0 0 120 80",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Q.createElement("rect",{width:"120",height:"80",fill:"black"}),Q.createElement("rect",{width:"120",height:"80",fill:"black"}),Q.createElement("rect",{x:"48.35",y:"24.3512",width:"24.9782",height:"39.8305",fill:"#3E3E3E",stroke:"#0C8CE9",strokeWidth:"0.67509"}),Q.createElement("ellipse",{cx:"53.7507",cy:"30.7661",rx:"3.37544",ry:"3.37547",fill:"#B2B2B2"}),Q.createElement("rect",{x:"59.4888",y:"29.414",width:"11.4765",height:"2.70037",rx:"0.506318",fill:"#8B8B8B"}),Q.createElement("rect",{x:"50.7126",y:"56.7539",width:"20.2526",height:"4.72565",rx:"0.506318",fill:"#0C8CE9"}),Q.createElement("rect",{x:"50.7126",y:"37.8555",width:"18.2274",height:"2.70037",rx:"0.506318",fill:"#8B8B8B"}),Q.createElement("rect",{x:"50.7129",y:"42.5762",width:"14.8519",height:"2.70037",rx:"0.506318",fill:"#8B8B8B"}),Q.createElement("rect",{x:"50.7126",y:"47.3047",width:"17.2147",height:"2.70037",rx:"0.506318",fill:"#8B8B8B"}),Q.createElement("rect",{x:"47.3375",y:"23.3375",width:"2.02526",height:"2.02528",fill:"white",stroke:"#0C8CE9",strokeWidth:"0.67509"}),Q.createElement("rect",{x:"72.3158",y:"23.3378",width:"2.02526",height:"2.02528",fill:"white",stroke:"#0C8CE9",strokeWidth:"0.67509"}),Q.createElement("rect",{x:"47.3375",y:"63.1696",width:"2.02526",height:"2.02528",fill:"white",stroke:"#0C8CE9",strokeWidth:"0.67509"}),Q.createElement("rect",{x:"72.3158",y:"63.1696",width:"2.02526",height:"2.02528",fill:"white",stroke:"#0C8CE9",strokeWidth:"0.67509"}),Q.createElement("rect",{width:"26.0423",height:"80",fill:"#1E1E1E"}),Q.createElement("rect",{x:"3",y:"11",width:"18",height:"2",rx:"1",fill:"#565656"}),Q.createElement("rect",{x:"3",y:"26",width:"18",height:"2",rx:"1",fill:"#565656"}),Q.createElement("rect",{x:"3",y:"21",width:"14",height:"2",rx:"1",fill:"#565656"}),Q.createElement("rect",{x:"3",y:"31",width:"15",height:"2",rx:"1",fill:"#565656"}),Q.createElement("rect",{x:"3",y:"36",width:"14",height:"2",rx:"1",fill:"#565656"}),Q.createElement("rect",{x:"3",y:"16",width:"19",height:"2",rx:"1",fill:"#565656"}),Q.createElement("rect",{x:"92",width:"28",height:"80",fill:"#1E1E1E"}),Q.createElement("rect",{width:"120",height:"8",fill:"#1E1E1E"}),Q.createElement("rect",{x:"8",width:"8",height:"8",fill:"#198F51"}),Q.createElement("rect",{x:"96",y:"12",width:"6",height:"2",rx:"1",fill:"#FCB34A"}),Q.createElement("rect",{x:"96",y:"42",width:"6",height:"2",rx:"1",fill:"#FCB34A"}),Q.createElement("rect",{x:"96",y:"17",width:"14",height:"2",rx:"1",fill:"#D1A8FF"}),Q.createElement("rect",{x:"104",y:"42",width:"13",height:"2",rx:"1",fill:"#009951"}),Q.createElement("rect",{x:"104",y:"22",width:"10",height:"2",rx:"1",fill:"#FC9CE0"}),Q.createElement("rect",{x:"96",y:"37",width:"16",height:"2",rx:"1",fill:"#FC9CE0"}),Q.createElement("rect",{x:"96",y:"22",width:"6",height:"2",rx:"1",fill:"#D1A8FF"}),Q.createElement("rect",{x:"96",y:"27",width:"21",height:"2",rx:"1",fill:"#7CC4F8"}),Q.createElement("rect",{x:"103",y:"32",width:"13",height:"2",rx:"1",fill:"#79D297"}),Q.createElement("rect",{x:"96",y:"32",width:"5",height:"2",rx:"1",fill:"#FCB34A"}),Q.createElement("mask",{id:"mask0_3979_274036",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:"0",y:"8",width:"120",height:"72"},Q.createElement("path",{d:"M120 8V80H0L120 8Z",fill:"#C4C4C4"})),Q.createElement("g",{mask:"url(#mask0_3979_274036)"},Q.createElement("rect",{width:"120",height:"80",fill:"#F5F5F5"}),Q.createElement("rect",{width:"120",height:"80",fill:"#E5E5E5"}),Q.createElement("rect",{x:"48.3502",y:"24.3512",width:"24.9782",height:"39.8305",fill:"white",stroke:"#0D99FF",strokeWidth:"0.67509"}),Q.createElement("ellipse",{cx:"53.7509",cy:"30.7661",rx:"3.37544",ry:"3.37547",fill:"black",fillOpacity:"0.3"}),Q.createElement("rect",{x:"59.489",y:"29.414",width:"11.4765",height:"2.70037",rx:"0.506318",fill:"#D9D9D9"}),Q.createElement("rect",{x:"50.7129",y:"56.7539",width:"20.2526",height:"4.72565",rx:"0.506318",fill:"#0D99FF"}),Q.createElement("rect",{x:"50.7129",y:"37.8555",width:"18.2274",height:"2.70037",rx:"0.506318",fill:"#D9D9D9"}),Q.createElement("rect",{x:"50.7131",y:"42.5762",width:"14.8519",height:"2.70037",rx:"0.506318",fill:"#D9D9D9"}),Q.createElement("rect",{x:"50.7129",y:"47.3047",width:"17.2147",height:"2.70037",rx:"0.506318",fill:"#D9D9D9"}),Q.createElement("rect",{x:"47.3375",y:"23.3375",width:"2.02526",height:"2.02528",fill:"white",stroke:"#0D99FF",strokeWidth:"0.67509"}),Q.createElement("rect",{x:"72.3158",y:"23.3378",width:"2.02526",height:"2.02528",fill:"white",stroke:"#0D99FF",strokeWidth:"0.67509"}),Q.createElement("rect",{x:"47.3375",y:"63.1696",width:"2.02526",height:"2.02528",fill:"white",stroke:"#0D99FF",strokeWidth:"0.67509"}),Q.createElement("rect",{x:"72.3158",y:"63.1696",width:"2.02526",height:"2.02528",fill:"white",stroke:"#0D99FF",strokeWidth:"0.67509"}),Q.createElement("rect",{width:"26.0423",height:"80",fill:"white"}),Q.createElement("rect",{x:"3",y:"11",width:"18",height:"2",rx:"1",fill:"#EEEEEE"}),Q.createElement("rect",{x:"3",y:"26",width:"18",height:"2",rx:"1",fill:"#EEEEEE"}),Q.createElement("rect",{x:"3",y:"21",width:"14",height:"2",rx:"1",fill:"#EEEEEE"}),Q.createElement("rect",{x:"3",y:"31",width:"15",height:"2",rx:"1",fill:"#EEEEEE"}),Q.createElement("rect",{x:"3",y:"36",width:"14",height:"2",rx:"1",fill:"#EEEEEE"}),Q.createElement("rect",{x:"3",y:"16",width:"19",height:"2",rx:"1",fill:"#EEEEEE"}),Q.createElement("rect",{x:"92",width:"28",height:"80",fill:"white"}),Q.createElement("rect",{x:"96",y:"12",width:"6",height:"2",rx:"1",fill:"#CE7012"}),Q.createElement("rect",{x:"96",y:"17",width:"14",height:"2",rx:"1",fill:"#8638E5"}),Q.createElement("rect",{x:"104",y:"22",width:"10",height:"2",rx:"1",fill:"#EA10AC"}),Q.createElement("rect",{x:"96",y:"22",width:"6",height:"2",rx:"1",fill:"#8638E5"}),Q.createElement("rect",{x:"96",y:"27",width:"21",height:"2",rx:"1",fill:"#007BE5"}),Q.createElement("rect",{x:"103",y:"32",width:"13",height:"2",rx:"1",fill:"#009951"}),Q.createElement("rect",{x:"96",y:"32",width:"5",height:"2",rx:"1",fill:"#CE7012"})))}var vR=n(22852);function vF(){var e,t;let n=(0,tm.Yr)()!==tm.QH.CONTROL,a=(0,t_.tS)()??"",r=(0,eh.Rs)(tf.oBY,{key:a});return n&&(null==(t=null==(e=null==r?void 0:r.data)?void 0:e.file)?void 0:t.hasPermission)?Q.createElement("h2",{className:"configuration_wizard--gracePeriodWelcome--16eIy text--fontPos13--xW8hS text--_fontBase--QdLsd"},Q.createElement(eO.Tx,{id:"dev_handoff.configuration_wizard.welcome_step.description_grace_period",numDays:to.Hw9})):Q.createElement(Q.Fragment,null,Q.createElement("h1",{className:E9},Q.createElement(eO.Tx,{id:"dev_handoff.configuration_wizard.welcome_step.title"})),Q.createElement("h2",{className:ve},Q.createElement(eO.Tx,{id:"dev_handoff.configuration_wizard.welcome_step.description"})))}function vB(){return Q.createElement("div",{className:EJ},Q.createElement(vF,null),Q.createElement("div",{className:"configuration_wizard--welcomeVideo--PNKpG"},Q.createElement(vR.GV,{src:"https://static.figma.com/uploads/ea250827f5a3454fccafb18ae2f37229cd406810",width:444,height:278})),Q.createElement("div",{className:E$}))}var vU=((E=vU||{})[E.WELCOME=0]="WELCOME",E[E.CODE_LANGUAGE_N_UNIT=1]="CODE_LANGUAGE_N_UNIT",E[E.THEME=2]="THEME",E[E.INSPECT_PLUGINS=3]="INSPECT_PLUGINS",E[E.INSTALL_INTEGRATIONS=4]="INSTALL_INTEGRATIONS",E);let vH={0:"welcome_step",1:"code_language_step",2:"theme_step",3:"inspect_plugins_step",4:"install_extensions_step"},vV=[1,2,3,4];function vG(){let e=(0,ef.md)(tu),[t,n]=tG(),a=(0,$.wA)(),r=(0,t_.tS)()??"",l=(0,eh.Rs)(tf.oBY,{key:r}),i=(0,tm.Yr)()!==tm.QH.CONTROL,{isShowing:o,uniqueId:s,show:c,complete:d}=(0,tp.e)({overlay:tv.tb3,priority:th.N.HIGH_PRIORITY_MODAL},[e,l]);return(0,ts.h)(()=>{i?c({canShow:(e,t)=>{var n;return!e&&(null==(n=null==t?void 0:t.file)?void 0:n.hasPermission)!==void 0}}):c({canShow:e=>!e})}),(0,Eo.E)(s,"Reset Onboarding",()=>{a(tB.b({[td]:!1})),c()}),(0,Q.useEffect)(()=>{o&&n(!0)},[o,n]),Q.createElement(tg.h,{modalType:tE.q3.WELCOME,isShowing:o,onClickPrimaryCta:ey.lQ,onClose:d,onManualDismiss:d,testId:"dev_handoff_config_wizard",trackingContextName:"Dev Mode Configuration Wizard",element:vW})}let vK=()=>{let{pinnedPlugins:e}=(0,EG.VR)();return e.length>0};function vW({dismissModal:e}){let t=(0,t5.U)(),[n,a]=(0,Q.useState)(0),r=(0,$.wA)(),l=vK(),i=Q.useRef(null),o=()=>{i.current&&i.current.focus()};Q.useEffect(()=>{o()},[n]);let s=Q.useCallback(()=>{e(),r(tB.b({[td]:!0})),l&&r(tB.b({[aM.xb]:!0}))},[r,l,e]),c=Q.useCallback(()=>{a(n+1)},[n]),d=Q.useCallback(()=>{a(n-1)},[a,n]);return Q.createElement("div",{className:ea()("configuration_wizard--wizardContainer--gss4b",eK.Dm),tabIndex:-1,ref:i},Q.createElement(aO.Jn,{className:"configuration_wizard--closeButton--pv-0K",onClick:function(){s(),t("dev_handoff.config_wizard.closed",{step:n,stepName:vH[n]})}}),Q.createElement("div",{className:"configuration_wizard--sidebar--g-2b8"},Q.createElement("h1",{className:"configuration_wizard--sidebarHeading--xnYnE text--fontPos32WhyteInktrap--BG9sC text--_fontBaseWhyteInktrap--YiiGP"},Q.createElement(eO.Tx,{id:"dev_handoff.configuration_wizard.title"})),Q.createElement("h2",{className:"configuration_wizard--sidebarSubheading--ta8gQ text--fontPos12Whyte---tkNx text--_fontBaseWhyte--efAjI"},Q.createElement(eO.Tx,{id:"dev_handoff.configuration_wizard.subtitle"})),Q.createElement("div",{className:E$}),Q.createElement(vz,{step:n,setStep:a,disabled:0===n})),Q.createElement("div",{className:"configuration_wizard--content--hktpZ"},0===n&&Q.createElement(vB,null),1===n&&Q.createElement(vh,null),2===n&&Q.createElement(vO,null),3===n&&Q.createElement(vN,null),4===n&&Q.createElement(vI,null),Q.createElement("div",{className:"configuration_wizard--footer--YjGGh"},0===n?Q.createElement(Q.Fragment,null,Q.createElement("div",{className:EQ},Q.createElement("div",{className:E$}),Q.createElement(tC.$$,{onClick:c},Q.createElement(eO.Tx,{id:`dev_handoff.configuration_wizard.${vH[n]}.next_text`})))):4===n?Q.createElement("div",{className:EQ},Q.createElement("div",{className:E$}),Q.createElement(tC.nR,{onClick:d},Q.createElement(eO.Tx,{id:"general.back"})),Q.createElement(tC.$$,{onClick:function(){s(),t("dev_handoff.config_wizard.done",{step:n,stepName:vH[n]})}},Q.createElement(eO.Tx,{id:"general.done"}))):Q.createElement("div",{className:EQ},Q.createElement("div",{className:E$}),Q.createElement(tC.nR,{onClick:d},Q.createElement(eO.Tx,{id:"general.back"})),Q.createElement(tC.$$,{onClick:c},Q.createElement(eO.Tx,{id:`dev_handoff.configuration_wizard.${vH[n]}.next_text`}))))))}function vz({step:e,setStep:t,disabled:n}){return Q.createElement(EV.z,{value:String(e),onChange:e=>{n||t(Number.parseInt(e,10))},className:ea()("configuration_wizard--stepPicker--Ffab-",n&&"configuration_wizard--disabledStepPicker--Ib2IX")},vV.map(a=>{let r=a===e,l=()=>{n||t(a)};return Q.createElement("div",{tabIndex:n?-1:0,role:"radio","aria-checked":r,key:a,onPointerDown:l,onKeyDown:e=>{"Enter"===e.key&&l()},className:ea()("configuration_wizard--stepPickerOption--5Iqtt",r&&"configuration_wizard--selectedStepPickerOption--wndji",n&&"configuration_wizard--disabledStepPickerOption--9tTeN")},Q.createElement("div",{className:"configuration_wizard--stepPickerOptionNumber--3GVYZ text--fontPos18Whyte--M40th text--_fontBaseWhyte--efAjI"},`0${a}`),Q.createElement("div",{className:"configuration_wizard--stepPickerOptionText--KmSjp text--fontPos12Whyte---tkNx text--_fontBaseWhyte--efAjI"},Q.createElement(eO.Tx,{id:`dev_handoff.configuration_wizard.${vH[a]}.picker_title`})))}))}var vj=n(176572);let vY={top:"ns-resize",bottom:"ns-resize",left:"ew-resize",right:"ew-resize"};function vZ(e){let{onSizeChanged:t,onStateChanged:n,edge:a}=e,r=Q.useRef({isResizing:!1,lastX:0,lastY:0}),l=Q.useCallback(e=>{null==n||n(!0),r.current.isResizing=!0,r.current.lastX=e.clientX,r.current.lastY=e.clientY,document.body.style.pointerEvents="none",document.documentElement.style.cursor=vY[a]},[n,a]),i=Q.useCallback(e=>{r.current.isResizing&&(t({x:e.clientX-r.current.lastX,y:e.clientY-r.current.lastY}),r.current.lastX=e.clientX,r.current.lastY=e.clientY)},[t]),o=Q.useCallback(e=>{r.current.isResizing&&(null==n||n(!1),r.current.isResizing=!1,document.body.style.pointerEvents="auto",document.documentElement.style.cursor="auto")},[n]);return Q.useEffect(()=>(document.addEventListener("mousemove",i),document.addEventListener("mouseup",o),()=>{document.removeEventListener("mousemove",i),document.removeEventListener("mouseup",o)}),[i,o]),Q.createElement("div",{className:ea()("resizable--panelContainer--35Ay7",eK.Dm),style:{width:e.size.width,minWidth:e.size.width,height:e.size.height,minHeight:e.size.height},ref:e.forwardedRef},Q.createElement(cu.V,{className:"resizable--content--gsGWd"},e.children),Q.createElement("div",{className:ea()({"resizable--edgeDisabled--K1j0X":e.disabled,"resizable--edgeTop--vG5Ad resizable--edge--H5-yq":"top"===e.edge,"resizable--edgeBottom--bN-R0":"bottom"===e.edge,"resizable--edgeLeft--nRRyA":"left"===e.edge,"resizable--edgeRight--ZGbad":"right"===e.edge}),onMouseDown:l,onDoubleClick:e.onReset}))}var vX=n(88823),vq=n.n(vX);let vJ={};function vQ({nodeId:e,width:t,height:n,version:a,shouldSkip:r}){let l=function({nodeId:e,width:t,height:n}){return`${e}-${t}x${n}`}({nodeId:e,width:t,height:n}),[i,o]=(0,Q.useState)(vJ[l]);return(0,Q.useEffect)(()=>{if(r)return;let s=null;i&&i.version===a||(s&&(s.abort(),s=null),s=new TaskController({priority:"user-visible"}),scheduler.postTask(()=>{let r=(0,lW._G)(new lB.Mi(t,n),e,!0,eU.tvY.TRANSPARENT);if(r&&r.pixels&&r.pixelSize&&r.displaySize){let e={thumbnail:{src:(0,lW.Pv)(r.pixels,r.pixelSize),displaySize:r.displaySize},version:a};vJ[l]=e,o(e)}},{signal:s.signal}))},[e,t,n,l,i,a,r]),i?i.thumbnail:null}let v$="dev_handoff_layers_panel--hideCaret--JgPdQ",v0=(0,rT.jz)(uT.KAq),v1=(0,rT.jz)(uT.tUy);function v2(e,t,n){let a=[],r=[t];for(;r.length>0;){let l=r.pop(),i=e.get(l);if(i&&(l===t||n(i)))for(let e of(a.push(l),(null==i?void 0:i.childrenGuids)??[]))r.push(e)}return a}function v5(e){return"INSTANCE"!==e.type}function v4({inspectableRootNodeId:e,page:t,didSelectRow:n}){let a=(0,$.wA)(),r=(0,ae.eY)(),l=(0,eF.uQ)(),i=(0,eF.NM)(),o=e||t,s=eU.glU.pageHasReadySection(t),[c,d]=Q.useState(!s),[u,m]=Q.useState([]);Q.useEffect(()=>{d(!eU.glU.pageHasReadySection(t))},[t]);let p=Q.useCallback(()=>{m(()=>[t])},[t]),_=Q.useCallback(e=>{m(t=>[...t,...v2(r,e,v5)])},[r,m]),f=Q.useCallback((e,t)=>m(n=>n.includes(t)?n.filter(e=>e!==t):e.altKey?[...n,t,...v2(r,t,v5)]:[...n,t]),[r,m]),h=Q.useCallback(e=>u.includes(e),[u]),g=function(e,t){let n=(0,ae.eY)();return Q.useMemo(()=>{var a,r;let l=[];if(t){let i=null==(a=n.get(t))?void 0:a.parentGuid;for(;i&&i!==e;)l.push(i),i=null==(r=n.get(i))?void 0:r.parentGuid}return l.push(e),l},[n,e,t])}(o,l??"");Q.useEffect(()=>{m(e=>[...e,...g])},[g,m]);let E=Q.useCallback((e,t)=>{e.stopPropagation(),e.preventDefault();let{clientX:n,clientY:r}=e;a(nP.j7({type:eK.i,data:{clientX:n,clientY:r,guid:t,expandElement:()=>_(t)}}))},[a,_]),v=(0,ae.KH)(),y=Q.useMemo(()=>c||e||i?["header",...function e(t,n,a,r,l,i,o){let s=n.get(t);if(!s)return[];let c=t in a,d={nodeId:t,indentation:l,isSelected:c,isAncestorSelected:i,isRoot:o};if(!r(t))return[d];let u="CANVAS"===s.type,m=s.childrenGuids.flatMap(t=>e(t,n,a,r,l+(u?0:1),i||c,!1));return u?m:[d,...m]}(o,r,v,h,0,!1,!0)]:["header"],[e,h,c,o,r,v,i]),b=Q.useRef(null),C=(0,pR.Te)({count:y.length,getScrollElement:()=>b.current,estimateSize:e=>0===e?v1:v0,overscan:10});return Q.createElement("div",{ref:b,style:{height:"100%",overflow:"auto"},"data-testid":"devHandoffLayersPanel"},Q.createElement("div",{style:{height:`${C.getTotalSize()}px`,width:"100%",position:"relative"}},C.getVirtualItems().map(t=>{let a=y[t.index];return Q.createElement("div",{key:t.key,style:{position:"absolute",top:0,left:0,width:"100%",height:`${t.size}px`,transform:`translateY(${t.start}px)`}},"header"===a?Q.createElement(v3,{forceExpanded:!!e||!!i,isExpanded:c,setIsExpanded:d,collapseAllLayers:p}):Q.createElement(a_.O5,{key:a.nodeId,guid:a.nodeId,toggleExpanded:f,isExpanded:h,openContextMenu:E,didSelectRow:n,indentation:a.indentation,isSelected:a.isSelected,isAncestorSelected:a.isAncestorSelected,isRoot:a.isRoot}))})))}function v3({isExpanded:e,forceExpanded:t,setIsExpanded:n,collapseAllLayers:a}){let r=[{displayText:(0,eO.t)("dev_handoff.layers.collapse_all_layers"),callback:()=>a()}],l=(0,aD.GS)(),i=`devHandoffNodesPanel.caret.${!l&&t?"forcedExpanded":e?"expanded":"collapsed"}`;return Q.createElement("div",{className:ea()("dev_handoff_layers_panel--layersListHeader--gQFn- text--fontPos11--2LvXf text--_fontBase--QdLsd",{"dev_handoff_layers_panel--bottomLine--v9zno":!(e||t)&&!l}),role:"button",tabIndex:0,"data-fullscreen-intercept":!0,onMouseDown:()=>!t&&n(!e)},l&&(e?Q.createElement(co.O,{"data-testid":i,className:t?v$:void 0}):Q.createElement(cs.k,{"data-testid":i,className:t?v$:void 0})),!l&&Q.createElement(eM.B,{className:ea()("dev_handoff_layers_panel--expandCaret--2ZbrU",{[v$]:t}),svg:e?t$.A:u$.A,dataTestId:i}),Q.createElement("div",{className:"dev_handoff_layers_panel--layersTitle--sU99L text--fontPos11--2LvXf text--_fontBase--QdLsd ellipsis--ellipsis--Tjyfa"},Q.createElement(eO.Tx,{id:"dev_handoff.tag.layers"})),Q.createElement(v6,{dropdownItems:r}))}function v6({dropdownItems:e}){let{Dropdown:t,toggleDropdown:n,dropdownTargetRef:a,isDropdownShown:r}=(0,aw.B)("LAYERS_PANEL_DROPDOWN");return Q.createElement(Q.Fragment,null,Q.createElement("div",{ref:a},Q.createElement(nM.YW,{svg:o2.A,onMouseDown:e=>e.stopPropagation(),onClick:n,"data-tooltip-type":nO.Ib.TEXT,"data-tooltip":(0,eO.t)("dev_handoff.code.options"),selected:r})),Q.createElement(t,{items:e,showPoint:!0}))}let v7=(0,rT.jz)(uT.LDP),v8=(0,rT.jz)(uT.Rv9),v9=(0,rT.jz)(uT.tUy),ye=(0,nf.eU)([]);function yt(e){let{guid:t,hasChildren:n,isExpanded:a,toggleExpand:r,isSelected:l,nameOverride:i,hideSectionIcon:o}=e,s=(0,eG.J2)((0,eH.UK)().showGuids),c=(0,c6.Fk)((e,t)=>{let n=e.get(t);return n?{guid:n.guid,name:n.name,isStateGroup:n.isStateGroup}:null},t),d=null==c?void 0:c.name,u=i??d,m=null==c?void 0:c.guid,p=null==c?void 0:c.isStateGroup,_=(0,nh.rf)(`devHandoffNodesPanel-targetIcon-${d}`,"click",e=>{(0,En.S)("sections_frames_list"),cl.w3z.selectAndFocusOnNode(t,!0)}),f=(0,nh.rf)(`devHandoffNodesPanel-${d}`,"click",e=>{e.stopPropagation(),null==r||r()}),h=(0,$.wA)(),g=Q.useCallback(e=>{e.stopPropagation(),e.preventDefault();let{clientX:t,clientY:n}=e;m&&h(nP.j7({type:eK.i,data:{clientX:t,clientY:n,guid:m}}))},[h,m]);if(!m)return null;let E=ea()("dev_handoff_nodes_panel--expandCaret--EdbSv",{"dev_handoff_nodes_panel--expandCaretNoIcon--VTPwj":o});return Q.createElement("div",{className:ea()("dev_handoff_nodes_panel--sectionHeader--qDUGd",l?ox:oT),onMouseDown:_,onContextMenu:g,role:"button",tabIndex:0,"data-fullscreen-intercept":!0},n?Q.createElement(eM.B,{className:E,svg:a?t$.A:u$.A,onMouseDown:f}):Q.createElement("div",{className:E}),!o&&Q.createElement(ej.Bf,{className:ea()("dev_handoff_nodes_panel--layerIcon--aZvoO",{"dev_handoff_nodes_panel--symbolLayerIcon--D0Mch dev_handoff_nodes_panel--layerIcon--aZvoO":p}),guid:m}),Q.createElement("div",{className:ea()("dev_handoff_nodes_panel--sectionName--qx-3z text--fontPos11--2LvXf text--_fontBase--QdLsd ellipsis--ellipsis--Tjyfa",{"dev_handoff_nodes_panel--symbolName--IoUUt dev_handoff_nodes_panel--sectionName--qx-3z text--fontPos11--2LvXf text--_fontBase--QdLsd ellipsis--ellipsis--Tjyfa":p})},s?`${u} (${t})`:u))}let yn=Q.memo(function(e){let{guid:t,isSelected:n,onClick:a}=e,r=(0,eG.J2)((0,eH.UK)().showGuids),[l,i]=Q.useState(!1),o=function(e){(0,eF.uQ)();let t=(0,ep.R)(e=>!(0,eR.Mx)(e));return n=>(0,eV.Uc)(n&&t?e:"")}(t),s=(0,ef.md)(n8),c=ya(t),d=(0,no.E1)(),u=(0,no.ei)(t),m=(0,no.L)(t,d,s),p=Q.useMemo(()=>u?(0,n5.A)(u.lastEditedAt).fromNow():"",[u]),_=(0,eG.J2)(cl.Ez5.devHandoffState().focusAnimationIsRunning),{width:f=0,height:h=0}=c??{},g=f>2.5*h,E=h>2.5*f,v=f<1||h<1?{width:0,height:0}:g?{height:80,width:f/h*80}:E?{width:48,height:h/f*48}:{width:48,height:80},y=vQ({nodeId:t,width:2*v.width,height:2*v.height,version:(null==u?void 0:u.lastEditedAt)??"-",shouldSkip:_}),b=(0,nh.rf)(`devHandoffNodesPanel-${(null==c?void 0:c.name)??""}`,"click",e=>{var n;(0,En.S)("sections_frames_list"),cl.w3z.selectAndFocusOnNode(t,!0),null==(n=null==e?void 0:e.currentTarget)||n.blur(),a&&a(e)}),C=(0,$.wA)(),w=Q.useCallback(e=>{e.stopPropagation(),e.preventDefault();let{clientX:n,clientY:a}=e;C(nP.j7({type:eK.i,data:{clientX:n,clientY:a,guid:t}}))},[C,t]);if(!c)return null;let T=e=>{i(e),o(e)},x=null==u?void 0:u.lastEditedAt,N=y?{backgroundColor:e.thumbnailBackgroundColor}:void 0;return Q.createElement("div",{className:ea()(n?ox:oT,"dev_handoff_nodes_panel--itemWithThumbnail--t0s4E"),onMouseDown:b,onContextMenu:w,role:"button",tabIndex:0,onMouseEnter:()=>{T(!0)},onMouseLeave:()=>T(!1),"data-fullscreen-intercept":!0},Q.createElement("div",{className:"dev_handoff_nodes_panel--thumbnailContainer--y8uEp",style:N},y&&Q.createElement("img",{src:y.src,className:ea()("dev_handoff_nodes_panel--thumbnailImg--yRcCn",g&&"dev_handoff_nodes_panel--thumbnailImgLong--5eP8l",E&&"dev_handoff_nodes_panel--thumbnailImgTall--iJO4k"),alt:(0,eO.t)("dev_handoff.nodes_panel.thumbnail_alt_text")})),Q.createElement("div",{className:"dev_handoff_nodes_panel--nodeNameAndTimestampContainer--egq48 text--fontPos11--2LvXf text--_fontBase--QdLsd"},Q.createElement("div",{className:"dev_handoff_nodes_panel--nodeNameAndTimestamp--HcL87"},Q.createElement("div",{className:"dev_handoff_nodes_panel--nodeName--5SQVr ellipsis--ellipsis--Tjyfa"},r?`${c.name} (${t})`:c.name),x?Q.createElement("div",{className:"dev_handoff_nodes_panel--tlfPanelTimestampContainer---u-Ju"},Q.createElement(o7,{state:m,backgroundState:n?"selected":l?"hovered":null}),Q.createElement("div",{className:"dev_handoff_nodes_panel--editedTimestamp--nShNo"},(null==u?void 0:u.createdAt)&&(m===no.Uy.RECENTLY_CREATED||u.createdAt===u.lastEditedAt)?Q.createElement("span",{className:ok},Q.createElement(eO.Tx,{id:"dev_handoff.nodes_panel.created",at:p})):Q.createElement("span",{className:ok},Q.createElement(eO.Tx,{id:"dev_handoff.nodes_panel.edited",at:p})))):c.isSymbol&&Q.createElement("div",{className:oN},Q.createElement(ej.Bf,{className:oV,guid:t}),Q.createElement("span",{className:"dev_handoff_nodes_panel--layerTypeSymbol--BuyoH text--fontPos11--2LvXf text--_fontBase--QdLsd ellipsis--ellipsis--Tjyfa"},c.type)))))}),ya=e=>(0,c6.Fk)((e,t)=>{let n=(0,eF.Zl)(e,t);if(!n)return null;let a=n.isState?n.parentNode:null,r=(null==a?void 0:a.name)||n.name;return{id:n.guid,name:r,width:n.size.x,height:n.size.y,type:(0,n7.bg)(n,a),isSymbol:n.isStateGroup||"SYMBOL"===n.type||"INSTANCE"===n.type}},e);function yr({items:e,selectedNodeId:t,inReadySectionTopLevelNodeId:n,onRowClick:a}){let r=Q.useRef(null),[l,i]=(0,ew.Vc)("ready-panel-height-storage-key",400),o=e.length>0,s=o?`calc(max(250px, min(80%, ${l}px)))`:"fit-content",[c,d]=(0,ef.fp)(ye),u=function(){let{currentPage:e}=(0,ep.R)(e=>({currentPage:e.mirror.appModel.currentPage})),t=(0,c6.Fk)((e,t)=>{var n;return null==(n=e.get(t))?void 0:n.backgroundColor},e);return t?u_.F.format(t):"var(--color-bg)"}(),[m,p]=Q.useState(!0),_=(0,aD.GS)();Q.useEffect(()=>{var n;if(!t)return;let a=null==(n=e.find(e=>e.childNodeIds.includes(t)))?void 0:n.guid;a&&d(e=>e.includes(a)?e.filter(e=>e!==a):e)},[e,t,d]);let f=Q.useMemo(()=>{let t=!1;return[..._?[]:[{type:"header"}],...e.flatMap(e=>{if(e.isSection){let n=c.includes(e.guid);return n||(t=!0),[{type:"section",sectionId:e.guid,displayName:e.sectionNames.fill("...",1,-1).join(" / "),hasChildren:e.childNodeIds.length>0},...n?[]:e.childNodeIds.map(e=>({type:"node",nodeId:e}))]}return t?(t=!1,[{type:"divider"},{type:"node",nodeId:e.guid}]):{type:"node",nodeId:e.guid}})]},[c,_,e]),h=Q.useMemo(()=>{let e=[];return f.forEach((t,n)=>{"section"===t.type&&e.push(n)}),e},[f]),g=Q.useRef(),E=e=>g.current===e,v=Q.useRef(null),y=(0,pR.Te)({count:f.length,estimateSize:e=>{let t=f[e].type;return"node"===t?v7:"header"===t?v9:"divider"===t?16:v8},getScrollElement:()=>v.current,overscan:10,rangeExtractor:Q.useCallback(e=>(g.current=[...h].reverse().find(t=>e.startIndex>=t),g.current)?[...new Set([g.current,...(0,vj.vp)(e)])].sort((e,t)=>e-t):(0,vj.vp)(e),[h])}),b=Q.createElement("div",{className:"dev_handoff_nodes_panel--panelTitle--wcEcM text--fontPos11--2LvXf text--_fontBase--QdLsd",style:{padding:_?0:void 0}},Q.createElement(eO.Tx,{id:"dev_handoff.tag.ready_for_development"}));Q.useEffect(()=>{let e=f.findIndex(e=>"node"===e.type&&n===e.nodeId);-1!==e&&y.scrollToIndex(e)},[f,n,y]);let C=Q.useCallback(e=>i(t=>t+e.y),[i]),w=Q.useCallback(()=>i(r.current.clientHeight),[i]),T=Q.useCallback(()=>i(400),[i]);return Q.createElement(Q.Fragment,null,_&&Q.createElement("div",{className:cf},Q.createElement(ns.D8,{className:ea()(cw,cT,cx),onClick:()=>p(e=>!e)},m?Q.createElement(co.O,null):Q.createElement(cs.k,null),b)),Q.createElement(vZ,{edge:"bottom",size:{height:_&&!m?0:s},onSizeChanged:C,onStateChanged:w,onReset:T,forwardedRef:r,disabled:!o},m&&Q.createElement("div",{"data-testid":"devHandoffNodesPanel.readyList",style:{height:"100%",overflow:"auto"},ref:v},o?Q.createElement("div",{style:{height:`${y.getTotalSize()}px`,width:"100%",position:"relative"}},y.getVirtualItems().map(e=>{let r;let l=f[e.index];return r="header"===l.type?b:"divider"===l.type?Q.createElement("div",{className:"dev_handoff_nodes_panel--readyNodesDivider--QAmcF"}):"section"===l.type?Q.createElement(yt,{guid:l.sectionId,hideSectionIcon:!0,hasChildren:l.hasChildren,isExpanded:!c.includes(l.sectionId),toggleExpand:()=>{d(e=>e.includes(l.sectionId)?e.filter(e=>e!==l.sectionId):[...e,l.sectionId])},isSelected:t===l.sectionId,nameOverride:l.displayName}):Q.createElement(yn,{guid:l.nodeId,thumbnailBackgroundColor:u,isSelected:n===l.nodeId,onClick:a}),Q.createElement("div",{key:e.key,style:{..."section"===l.type?{zIndex:1}:{},...E(e.index)?{position:"sticky"}:{position:"absolute",transform:`translateY(${e.start}px)`},top:0,left:0,width:"100%",height:`${e.size}px`}},r)})):Q.createElement(Q.Fragment,null,!_&&b,Q.createElement(yl,null)))))}function yl(){let e=(0,ae.p8)("isSceneReadOnly"),t=(0,n3.s)();return e?Q.createElement("div",{className:oS},Q.createElement(eM.B,{svg:o3.A,className:oI}),Q.createElement("div",{className:oA},Q.createElement(eO.Tx,{id:"dev_handoff.tag.ready_for_development.content_view_only"}))):Q.createElement("div",{className:oS},t?Q.createElement(sn,null):Q.createElement(Q.Fragment,null,Q.createElement(eM.B,{svg:o3.A,className:oI}),Q.createElement("div",{className:oA},Q.createElement(eO.Tx,{id:"dev_handoff.status.ready_for_development.content"}))))}function yi(e,t){let n=Q.useRef(!1),a=Q.useCallback(e=>{e!==t&&(n.current=!0)},[t]),{inspectableRootNodeId:r}=yo(e,t),l=Q.useRef(null),i=Q.useMemo(()=>t&&n.current?(n.current=!1,l.current):r,[t]);return l.current=i,{inspectableRootNodeId:i,didSelectRow:a}}function yo(e,t){let n=Q.useMemo(()=>{let e=t?cl.w3z.getInReadySectionTopLevelNodeId(t):null;return e&&e!==ad.AD?e:null},[t]),a=(0,c6.Fk)((e,t,n)=>{let a=null;if(n?a=n:t===ad.AD||cl.w3z.isNodePanelSection(t)||(a=t),a){let t=e.get(a);(!t||a_.q1.includes(t.type))&&(a=null)}return a},e,n),r=(0,c_.hA)();return(0,eo.kc)().dt_dev_mode_workflows&&r?{inspectableRootNodeId:r,inReadySectionTopLevelNodeId:null}:{inspectableRootNodeId:a,inReadySectionTopLevelNodeId:n}}function ys({onRowClick:e,inspectableRootNodeId:t,didSelectRow:n}){let a=(0,eG.J2)(cl.Ez5.devHandoffState().currentNodeId),r=(0,eF.uQ)(),l=(0,eG.J2)(cl.Ez5.devHandoffState().readySectionItems),{currentPage:i}=(0,ep.R)(e=>({currentPage:e.mirror.appModel.currentPage})),{inReadySectionTopLevelNodeId:o}=yo(a,r);return Q.createElement("div",{className:"dev_handoff_nodes_panel--nodesListPanels--ceR3Z","data-testid":"devHandoffNodesList"},!(0,eo.kc)().dt_dev_mode_workflows&&Q.createElement(yr,{items:l||[],selectedNodeId:r,inReadySectionTopLevelNodeId:o,onRowClick:e}),Q.createElement(v4,{inspectableRootNodeId:t,didSelectRow:n,page:i}))}let yc=Q.memo(()=>{let e=(0,eG.J2)(cl.Ez5.devHandoffState().currentNodeId),t=(0,c_.l7)(),n=!!(0,c_.hA)()&&!t,{inspectableRootNodeId:a,didSelectRow:r}=yi(e,(0,eF.uQ)()),l=(0,$.d4)(e=>Object.keys(e.mirror.sceneGraphSelection).length>0);return(0,ts.h)(()=>{let e=tW.sn.tryStop("switch_to_inspect_mode.left_panel_tti");e&&(0,er.sx)("switch_to_inspect_mode.left_panel_tti",{elapsedMs:e,isNodeSelected:l},{forwardToDatadog:!0})}),Q.createElement("div",{className:ea()(eK.Dm,ow)},!n&&Q.createElement(gw,null),!t&&Q.createElement(ys,{inspectableRootNodeId:a,didSelectRow:r}))});var yd=n(839754),yu=n(127161);let ym="dev_handoff_on_canvas_button--text--gcrgy";var yp=n(18301),y_=n(942723),yf=n(214735);function yh({floating:e=!0}){let t=yy(),{version:n}=(0,et.DP)(),a=(0,eG.J2)(eU.Ez5.devHandoffState().focusMode),r=(0,c_.hA)();return"ui3"===n?null:Q.createElement(yv,{floating:e},t?Q.createElement(yE,null):!(a||r)&&Q.createElement(yg,null))}function yg(){let e=(0,eG.J2)(eU.Ez5.devHandoffState().nodeIds),t=(0,eF.uQ)(),n=t?e.indexOf(t):-1;return n<0?null:Q.createElement(yd.gA,{navigateForwardEnabled:n<e.length-1,navigateBackwardEnabled:n>0,shouldShowFrameCounter:!0,frameCount:e.length,currentFrameIndex:n,showPreviousFrame:()=>{(0,En.S)("stepper"),eU.glU.triggerActionInUserEditScope("dev-handoff-focus-previous",{})},showNextFrame:()=>{(0,En.S)("stepper"),eU.glU.triggerActionInUserEditScope("dev-handoff-focus-next",{})},backIcon:yp.A,nextIcon:y_.A})}function yE(){let e=(0,ep.R)(e=>e.mirror.appModel.keyboardShortcuts);return Q.createElement(ns.GG,{onClick:()=>{eU.glU.triggerActionInUserEditScope("zoom-to-selection",void 0)},className:ea()("dev_handoff_on_canvas_button--button--Kqr9E","dev_handoff_on_canvas_button--recenter--UbfZj"),recordingKey:(0,nh.Pt)("devHandoffNavBar","recenter"),dataTestId:"devHandoffRecenter"},Q.createElement(eM.B,{className:"dev_handoff_on_canvas_button--icon--Lkbda",svg:yf.A}),Q.createElement("span",{className:ym},Q.createElement(eO.Tx,{id:"dev_handoff.recenter"})),Q.createElement("span",{className:ea()(ym,"dev_handoff_on_canvas_button--secondaryText--JwmTf")},(0,yu.c1)(e,"zoom-to-selection")))}function yv(e){let t=(0,ez.ni)();return Q.createElement("div",{className:"dev_handoff_on_canvas_button--base--n2Gb3",style:e.floating?{position:"fixed",left:t.x,width:t.width,bottom:(0,rT.jz)(uT.jUW)}:void 0},Q.createElement("div",{className:"dev_handoff_on_canvas_button--container--fpCTC text--fontPos11--2LvXf text--_fontBase--QdLsd"},e.children))}function yy(){var e,t;let n=(0,eG.J2)(null==(t=null==(e=eU.Ez5)?void 0:e.devHandoffState())?void 0:t.focusAnimationIsRunning),a=(0,eF.uQ)()??ad.AD,r=(0,sZ.LS)(),l=(0,ti._I)(),i=(0,ae.eY)(),[o,s]=Q.useState(!1);return(0,ez.D6)({subscribeToUpdates_expensive:!0},Q.useCallback(e=>{if(!l||e.isPanning||e.isZooming||n)return;let t=i.get(a),o=null==t?void 0:t.absoluteBoundingBox;if(!o||!r){s(!1);return}let c=(0,ez.Yb)(e,{x:o.x,y:o.y,width:o.w,height:o.h});s(function(e,t){let n=0,a=0;if(t.width/e.width>t.height/e.height?(n=t.width,a=e.width):(n=t.height,a=e.height),e.zoomScale<.5&&n/a<.25)return!0;let r=Math.min(t.width,.25*e.width),l=Math.min(t.height,.25*e.height);return t.x+t.width<r||t.x>e.width-r||t.y+t.height<l||t.y>e.height-l}(e,c))},[l,n,i,a,r])),o}var yb=n(588563);function yC(){return Q.createElement("div",{className:tw.cx.flex.flexRow.m16.$},Q.createElement("div",{className:tw.cx.font11.$},Q.createElement(eO.Tx,{id:"fullscreen.properties_panel.this_file_s_editor_has_disabled_exporting_copying_and_sharing.seat_rename"})))}var yw=n(64226),yT=n(510018),yx=n(635129);let yN=Q.memo(function(){let e=(0,$.d4)(e=>e.mirror.appModel.currentTool===tz.ec.tool),t=(0,sd.h)(),n=(0,eH.UX)(),a=(0,ef.md)(aF.d4),r="LOADING"===a,l="RUNNING"===a,i=(0,ef.md)(tj.H)===tj._.PLUGIN&&!e,o=(0,$.wA)();Q.useEffect(()=>o(yw.aq()),[o]),Q.useEffect(()=>{let e=yx.mN.getInstance();l&&e&&(i?e.hideProgress():e.showProgress({isBackground:!0}))},[l,i]);let s=l&&i?{height:"100%"}:{display:"none"};return Q.createElement("div",{className:tw.cx.hFull.wFull.if(i,tw.cx.block,tw.cx.hidden).$,"data-testid":"devHandoffPluginPanel"},t?Q.createElement(yC,null):Q.createElement(Q.Fragment,null,r&&Q.createElement(yk,null),Q.createElement("div",{style:s,"data-testid":"pluginPanelContainer"},Q.createElement(yT.jv,{iframeId:yT.Wh.INSPECT,width:n,fillParent:!0})),!r&&!l&&Q.createElement(gB,null)))});function yk(){let e=(0,ef.md)(aF.be);return e?Q.createElement(nk.Y,{direction:"vertical",verticalAlignItems:"center",horizontalAlignItems:"center"},Q.createElement(Q.Fragment,null,Q.createElement("span",{style:tT.sx.add({boxSizing:"content-box",margin:"-20px auto",opacity:"0.3"}).$},Q.createElement(yb.y$,null)),Q.createElement("div",{className:tw.cx.pt16.px32.alignCenter.$},Q.createElement(aL.E,{i18nId:"dev_handoff.loading_plugin",i18nParams:{pluginName:null==e?void 0:e.name},fontSize:12,color:"secondary"})))):null}var yS=n(345866),yI=n(509719),yA=n(77307);let yP=(0,rT.jz)(uT.QBm);function yO(e){let t=(0,$.d4)(e=>e.mirror.appModel.showUi),n=(0,iG.lz)(),[a,r]=(0,ef.fp)(iG.XI),l=(0,aD.GS)(),i=(0,eG.J2)((0,eH.UK)().renderRulers),o=(0,$.d4)(e=>e.multiplayer),s=(0,$.d4)(e=>e.openFile),c=(0,$.d4)(e=>e.user),d=(0,$.d4)(e=>e.dropdownShown),u=(0,$.d4)(e=>e.voice.showWidget),m=(0,lx._6)(),{isPropertiesPanelCollapsed:p}=(0,yI.i)();p=p&&l,(0,iG.qn)();let _=Q.useCallback(()=>{r(!0)},[r]),f=Q.useCallback(e=>{if(a){let t=(0,iG.gY)(window.innerWidth-e.clientX);t!==n&&(0,iG.xT)(t)}},[a,n]),h=Q.useCallback(()=>{a&&r(!1)},[a,r]);Q.useEffect(()=>(document.addEventListener("mousemove",f),document.addEventListener("mouseup",h),()=>{document.removeEventListener("mousemove",f),document.removeEventListener("mouseup",h)}));let g=EL(),E=l&&!p,v=a?gj:t?gz:gY;return l?Q.createElement(cu.V,{className:ea()(gX.Lp,{[gX.dn]:l&&p}),style:{width:n}},E&&Q.createElement(yS.T,{side:"right"}),Q.createElement(f4.w,{className:ea()(gX.ux,eK.Dm,{[gX.ew]:i}),size:n,onResize:_,side:"left"},l&&p&&Q.createElement("div",{className:ea()(gX.KE,g||u?gX.tM:gX.Pp)},Q.createElement(yA.q,{openFile:s,dropdownShown:d,multiplayer:o,user:c,isIntegration:(0,Eg.ck)(),selectedView:m})),Q.createElement("div",{className:ea()(gX.KE,{[gj]:a,[gz]:t,[gY]:!t||l&&p})},l&&!p&&Q.createElement(yA.q,{openFile:s,dropdownShown:d,multiplayer:o,user:c,isIntegration:(0,Eg.ck)(),selectedView:m}),Q.createElement(aj,null),Q.createElement("div",{className:gZ},e.children)))):Q.createElement("div",{className:`${v} ${eK.Dm}`,style:{width:n-yP},ref:e.forwardedRef},Q.createElement(aj,null),Q.createElement(cu.V,{className:gZ},e.children),Q.createElement("div",{className:"dev_handoff_right_panel_container--edge--K3aDb",style:{right:n},onMouseDown:_,onDoubleClick:iG.Az}))}function yL({plugin:e}){return"first-party"!==(0,eD.v4)().type?null:Q.createElement(yD,{plugin:e,buttonText:(0,eO.t)("dev_handoff.inspect_panel.close_plugin")})}function yM({plugin:e}){return"first-party"===(0,eD.v4)().type?null:Q.createElement(yD,{plugin:e,buttonText:(0,eO.t)("dev_handoff.inspect_panel.generate_code")})}function yD({plugin:e,buttonText:t}){return e?Q.createElement(nL.VZ,{padding:nL.UZ.NONE,recordingKey:"pluginProgressPanel"},Q.createElement(nk.Y,{direction:"vertical",horizontalAlignItems:"center",padding:{top:12,bottom:12,left:16,right:16},spacing:8,width:"fill-parent"},Q.createElement(nk.Y,{direction:"horizontal",verticalAlignItems:"start",horizontalAlignItems:"center",spacing:4},Q.createElement("div",{style:tT.sx.add({marginTop:"-3px"}).$},Q.createElement(aU.d,{plugin:e})),Q.createElement(aL.E,{i18nId:"fullscreen.plugins.background",i18nParams:{plugin:Q.createElement(aL.E,{fontWeight:"bold"},e.name)},fontFamily:"primary"})),Q.createElement(lP.$,{variant:"secondary",onClick:()=>{(0,aR.wY)()},width:"fill-parent",recordingKey:"generateCodeButton"},Q.createElement(aL.E,{fontFamily:"primary"},t)))):null}var yR=n(641805);let yF="code_extension_section--sectionsBorder--iguOh";var yB=n(126815);function yU({localCodeLanguage:e,overrideNodeId:t,hideLayoutSection:n,sectionClassName:a}){let r=(0,eD.v4)(),l=e??r,i=l.id===eD.uz&&"first-party"===l.type?{id:a6.qZ.CSS,type:"first-party"}:l,o=(0,ef.md)(aF.GR),s=(0,ef.md)(aF.vT);return o&&"codegen"!==s&&"first-party"!==i.type?Q.createElement(yM,{plugin:o}):Q.createElement(yH,{overrideNodeId:t,hideLayoutSection:n,codegenPluginLanguage:i,sectionClassName:a},(e,t)=>Q.createElement(nJ,{code:e,section:t}))}function yH({codegenPluginLanguage:e,children:t,overrideNodeId:n,hideLayoutSection:a,sectionClassName:r}){let l=(0,eB.ie)(),i=(0,eB.fb)(),o=(0,$.d4)(e=>Object.keys(e.mirror.sceneGraphSelection)[0]),s=(0,t5.U)(),[c,d]=Q.useState(!1),u=n??o,m=Q.useCallback(t=>{s("Dev Mode Code Section Clicked",{codeSection:t,languageType:e.type,languageId:e.id,unit:l,scaleFactor:i})},[e.id,e.type,i,s,l]),{code:p,error:_,isLoading:f}=rc({selectedNodeID:u,extensionLanguage:e,preferences:(0,eB.gc)(),plugin:(0,eD.QN)()}),h=!!n,g=Q.useCallback(({id:e})=>{var t;e===u&&(null==(t=(0,a6.px)().nodeCache)||t.invalidate(e),d(!0))},[u]);Q.useEffect(()=>((0,yR.BT)(g),()=>{(0,yR.q$)(g)}),[g]),Q.useEffect(()=>{h||d(!1)},[h,u]);let E=Q.useCallback(()=>{d(!1),(0,a6.px)().rebuildNodeCache(),(0,a9.c)()},[]),v=function(e,t){let[n,a]=Q.useState(e);return Q.useEffect(()=>{let t=null;return e?t=setTimeout(()=>{a(!0)},200):a(!1),()=>{null!=t&&clearTimeout(t)}},[e,200]),n}(f,200);return u?_?(console.error(_),null):v?Q.createElement("div",{className:yF},Q.createElement(nk.Y,{verticalAlignItems:"center",horizontalAlignItems:"center",padding:{top:16,left:16,right:16,bottom:4},dataTestId:"codegen-spinner"},Q.createElement(t2.kt,null))):0===p.length?null:Q.createElement("div",{className:yF},c&&Q.createElement(nk.Y,{padding:{top:16,left:16,right:16,bottom:0}},Q.createElement(lO.z,{dataTestId:"dev-handoff-code-update-prompt",iconSrc:yB.A,title:(0,eO.t)("dev_handoff.code.update_prompt_title"),orientation:"vertical",variant:"brand",onClose:()=>d(!1),action:{label:(0,eO.t)("dev_handoff.code.update_prompt_action"),onClick:E}},Q.createElement(eO.Tx,{id:"dev_handoff.code.update_prompt"}))),p.map((n,l)=>n.lines.length>0&&(!a||"Layout"!==n.name)?Q.createElement(ns.D8,{className:ea()("code_extension_section--sectionsContainer--vZzFZ",r),"data-testid":`code-panel-${n.name}`,key:`${e}-${n.name}-${l}`,tabIndex:-1,"data-fullscreen-intercept":!0,onClick:()=>m(n.name)},t(p,n,l)):null)):null}function yV(e){return Q.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},Q.createElement("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M6 8a2 2 0 0 1 2-2h1.5a.5.5 0 0 1 0 1H8a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h1.5a.5.5 0 0 1 0 1H8a2 2 0 0 1-2-2V8Zm12 0a2 2 0 0 0-2-2h-1.5a.5.5 0 0 0 0 1H16a1 1 0 0 1 1 1v8a1 1 0 0 1-1 1h-1.5a.5.5 0 0 0 0 1H16a2 2 0 0 0 2-2V8Zm-3.646 2.354a.5.5 0 0 0-.708-.708l-4 4a.5.5 0 0 0 .708.708l4-4Z",clipRule:"evenodd"}))}var yG=n(135317);function yK(e){return Q.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},Q.createElement("path",{stroke:"var(--color-icon)",strokeLinecap:"round",strokeLinejoin:"round",d:"M15.292 14.759a5.001 5.001 0 0 1-8.747-3.932m9.91 1.346a5.05 5.05 0 0 0 .012-1.248A5 5 0 0 0 7.735 8.21m-3.13 4.11 1.964-2.035 2.035 1.965m5.851-1.511 1.991 1.967 2.008-2.037"}))}let yW="dev_handoff_activity_panel--activityDisplayText--4O-Dk",yz="dev_handoff_activity_panel--activityTime--pCZ9l";function yj(){var e,t;let n=(0,c_.hA)(),a=(0,ae.eY)().get(n??""),r=(0,ru.Os)(n??"");if(!r||0===r.length)return null;let l=r[0],i=!!(null==(e=null==a?void 0:a.editInfo)?void 0:e.lastEditedAt)&&l.timestamp.getTime()<1e3*a.editInfo.lastEditedAt;return Q.createElement("div",{className:"dev_handoff_activity_panel--activityPanel--oJnbc"},Q.createElement("div",{className:"dev_handoff_activity_panel--activityPanelTitle--1gSk-"},"Status updates"),Q.createElement("div",{className:"dev_handoff_activity_panel--activityEvents--9uFul"},Q.createElement(yX,{hasEdits:i,lastEditedAt:null==(t=null==a?void 0:a.editInfo)?void 0:t.lastEditedAt,latestReadyForDevVersionId:l.id}),r.map((e,t)=>Q.createElement(yY,{key:t,activity:e,isLast:t===r.length-1}))))}function yY({activity:e,isLast:t}){var n,a;let r=(0,$.wA)(),l=(0,aD.GS)(),i=function(e){var t;switch(null==(t=e.metadata)?void 0:t.status){case dV.zI.BUILD:return"Ready for Dev";case dV.zI.COMPLETED:return"Dev complete";case dV.zI.NONE:return"Status removed";default:return null}}(e),o=(0,ur.Ak)(e.timestamp);return Q.createElement(rw.jP,{description:(null==(n=e.metadata)?void 0:n.description)||void 0,label:"activity-row",displayText:Q.createElement("div",{className:yW},Q.createElement("span",null,i),Q.createElement("span",{className:yz},o)),view:null,iconOverride:l&&(null==(a=e.metadata)?void 0:a.status)!==dV.zI.NONE?t=>Q.createElement(yZ,{line:t,activity:e}):void 0,isActive:!1,user:e.user.name||"",userUrl:e.user.imgUrl,isAllowedToChangeVersion:()=>!1,versionId:e.versionId||"NO_VERSION",dispatch:r,first:!1,last:t,isUI3:l,editorType:dV._Y.DESIGN})}function yZ({activity:e,line:t}){var n;switch(null==(n=e.metadata)?void 0:n.status){case dV.zI.BUILD:return Q.createElement("div",{className:"dev_handoff_activity_panel--versionIconReady--K1QSU dev_handoff_activity_panel--versionIcon--uJPQI"},t,Q.createElement(yV,null));case dV.zI.COMPLETED:return Q.createElement("div",{className:"dev_handoff_activity_panel--versionIconCompleted--t-s85 dev_handoff_activity_panel--versionIcon--uJPQI"},t,Q.createElement(yG.g,null));default:return null}}function yX({hasEdits:e,latestReadyForDevVersionId:t,lastEditedAt:n=0}){let a=(0,$.wA)(),r=(0,aD.GS)(),l=Q.createElement("span",{className:"dev_handoff_activity_panel--latestVersion--ukUVR"},"Latest version"),i=(0,ur.Ak)(1e3*n);return Q.createElement(rw.jP,{displayText:e?Q.createElement("div",{className:"dev_handoff_activity_panel--activityDisplayTextContainer--80BG-"},Q.createElement("div",{className:yW},l,i&&Q.createElement("span",{className:yz},i)),e&&Q.createElement("button",{className:"dev_handoff_activity_panel--viewDiffButton--G2GGC",onClick:function(){le(t,a,!0)}},"View diff")):l,description:e?void 0:"No design changes",iconOverride:e&&r?e=>Q.createElement("div",{className:"dev_handoff_activity_panel--versionIconEdited--Y-5Oe dev_handoff_activity_panel--versionIcon--uJPQI"},e,Q.createElement(yK,null)):void 0,view:null,isActive:!1,userUrl:null,versionId:ag.V_,dispatch:a,isAllowedToChangeVersion:()=>!0,first:!0,last:!1,isUI3:r,editorType:dV._Y.DESIGN})}var yq=n(821539),yJ=n(899432),yQ=n(515453),y$=n(971756);function y0(){return Q.createElement(Q.Fragment,null,Q.createElement(yq.Xh,null),Q.createElement(y$.U,null),Q.createElement(s$.ZN,null),Q.createElement(yQ.o,null),Q.createElement(yJ.y,null))}var y1=n(965259),y2=n(740707);function y5(){let{selectionProperties:e}=(0,ep.R)(e=>({selectionProperties:e.mirror.selectionProperties})),t=(0,ig.nl)(),n=(0,ig.cW)(),a=(0,ig.Be)(),r=(0,y1.Yo)(),l=(0,$.wA)(),i=(0,t_.tS)();return Q.createElement(y2.Q,{key:"plugin",pluginRelaunchData:e.pluginRelaunchData,localPlugins:t,publishedPlugins:n,allSavedPlugins:a.plugins,orgEntity:r,dispatch:l,openFileKey:i,editorType:"dev_handoff",numSelected:e.numSelected??0,recordingKey:"devHandoffPluginPanel",title:(0,eO.t)("dev_handoff.plugin_panel.title"),isDevHandoff:!0})}var y4=n(794095),y3=n(237962),y6=n(21621),y7=n(776076),y8=n(762076),y9=n(788340),be=n(986725),bt=n(34765);function bn(){let e=(0,eF.VW)();return null==e?void 0:e.isModule}var ba=n(43933);let br="typography_preview--measureContainer--D1G5R",bl="typography_preview--measure---sPO7",bi="typography_preview--value--v5BEy text--fontPos11--2LvXf text--_fontBase--QdLsd ellipsis--ellipsis--Tjyfa",bo=(0,rT.jz)(uT.WPY);function bs({fillContainer:e=!1}){let t=(0,eF.VW)(),n=(0,$.d4)(e=>e.mirror.selectionProperties.selectedFonts);return t&&"TEXT"===t.type&&t.fontName&&n&&!((null==n?void 0:n.fonts.length)<1)?Q.createElement(nL.VZ,{hideHeader:!0,padding:nL.UZ.NONE,noBorder:!0,recordingKey:"typographyPreview"},Q.createElement(bc,{node:t,containerClassName:e?"typography_preview--previewContainerFill--QUwgr":"typography_preview--previewContainerBoxed--yWT-0 typography_preview--previewContainer--zDKlk text--fontPos11--2LvXf text--_fontBase--QdLsd common--well--J0WtH",numberOfFonts:n.fonts.length})):null}function bc({node:e,containerClassName:t="typography_preview--previewContainerFullWidth--61D4v typography_preview--previewContainer--zDKlk text--fontPos11--2LvXf text--_fontBase--QdLsd common--sectionWithBottomSeparator--N54QE",numberOfFonts:n=1,localCodeLanguage:a}){let r=function(e){let t=(0,tx.DP)(),n=(0,iG.rL)()-32,[a,r]=Q.useState({...bh,loading:!0}),{family:l,style:i}=e.fontName,o=Q.useCallback(()=>{r(e=>({...e,imageLoading:!1}))},[]);return Q.useEffect(()=>{let t=e=>{r(t=>{bf(null==t?void 0:t.url);let n=!!e.url&&(t.fontFamily!==e.fontFamily||t.fontStyle!==e.fontStyle);return{...t,...e,imageLoading:n,loading:!1,error:!e.url&&e.error}})},n=()=>{t({...bh,url:void 0,error:!0})};(async()=>{var a;if(eU.vXe.fontsAreLoading()){let e=0;await new Promise((t,n)=>{let a=setInterval(()=>{eU.vXe.fontsAreLoading()||(t(),clearInterval(a)),e>10&&n(),e++},100)})}if(!eU.vXe.fontIsLoaded(l,i)){n();return}let r=eU.w3z.getTypographyPreview(e.guid);if(r&&(null==(a=r.thumbnail)?void 0:a.byteLength)>0){let{thumbnail:e,...n}=r,a=URL.createObjectURL(new Blob([e]));t({...n,url:a})}else n()})().catch(()=>{n()})},[e.guid,n,l,i,t]),Q.useEffect(()=>()=>bf(null==a?void 0:a.url),[null==a?void 0:a.url]),{...a,onImageLoaded:o}}(e);return Q.createElement("div",{className:t},r.loading?Q.createElement(bm,null):Q.createElement(bd,{data:r,font:null==e?void 0:e.fontName,styleId:null==e?void 0:e.inheritedTextStyle,numberOfFonts:n,localCodeLanguage:a}))}function bd({data:e,font:t,styleId:n,numberOfFonts:a,localCodeLanguage:r}){let l=(0,eB.qM)(r,e.lineHeightInPx,b_,{isTextProperty:!0}),i=(0,eB.qM)(r,e.fontSizeInPx,b_,{isTextProperty:!0}),o=(0,eF.mJ)(e.textStyleNodeId||(0,ba.f$)(n)),s=null==o?void 0:o.name,c=null==o?void 0:o.description,d=(0,lm.Cj)(l),u=(0,lm.Cj)(i),m=(0,lm.Cj)(s),p=bo-16-((0,ad.fn)((0,ad.sH)(e.textStyleNodeId))||a>1?40:0),_=e.fullSize.y>p?e.fullSize.y/p:1,f=e.fullSize.y/_,h=e.fullSize.x/_,g=f+1,E=e.capPosition/_,v=e.baselinePosition/_,y=e.bottomPosition/_,b=`calc((100% - ${h}px) / 2)`,C=a>1?Q.createElement("div",{className:"typography_preview--label--pJ-5L typography_preview--labelBase--mlEgn ellipsis--ellipsis--Tjyfa text--fontPos11--2LvXf text--_fontBase--QdLsd"},Q.createElement(eO.Tx,{id:"dev_handoff.typography_preview_multiple_styles"})):s?Q.createElement(ns.D8,{className:"typography_preview--styleName--tA801 typography_preview--labelBase--mlEgn ellipsis--ellipsis--Tjyfa text--fontPos11--2LvXf text--_fontBase--QdLsd",onClick:m,"data-tooltip-type":nO.Ib.TEXT,"data-tooltip":c,"data-tooltip-show-above":!0},s):null;return Q.createElement("div",{className:ea()("typography_preview--previewHighlights--zrIw3",e.imageLoading?"typography_preview--hidden--pKo8l":"typography_preview--shown--6sBFE")},e.error?Q.createElement(bp,{font:t}):Q.createElement("div",{className:"typography_preview--centredRow--3-Ofp",style:{marginTop:(p+16-g)/2,height:g}},Q.createElement("div",{className:br,style:{marginTop:E,marginBottom:f-y}},Q.createElement("div",{className:ea()(bl,"typography_preview--left--wzNxs")},Q.createElement(ns.D8,{className:bi,onClick:u,"data-tooltip-type":nO.Ib.TEXT,"data-tooltip":(0,eO.t)("inspect_panel.code.font_size"),"data-tooltip-show-above":!0},i))),Q.createElement("div",{className:"typography_preview--measurementLines--U03DM",style:{width:h,height:f,left:b,right:b}},Q.createElement(bu,{position:E}),Q.createElement(bu,{position:v}),Q.createElement(bu,{position:y})),Q.createElement(tk.J,{className:"typography_preview--borderedPreview--wYbvY",style:{width:h,height:f},src:e.url,onLoad:e.onImageLoaded,"data-tooltip-type":nO.Ib.TEXT,"data-tooltip":t?`${t.family} ${t.style}`:void 0,"data-tooltip-show-above":!0}),Q.createElement("div",{className:br},Q.createElement("div",{className:ea()(bl,"typography_preview--right--QhAIw")},Q.createElement(ns.D8,{className:bi,onClick:d,"data-tooltip-type":nO.Ib.TEXT,"data-tooltip":(0,eO.t)("inspect_panel.typography.line_height"),"data-tooltip-show-above":!0},l)))),C)}function bu({position:e}){return Q.createElement("div",{className:"typography_preview--measurementLine---lBL5",style:{top:e}})}function bm(){let[e,t]=Q.useState(!1);return(Q.useEffect(()=>{let e=setTimeout(()=>t(!0),250);return()=>clearTimeout(e)},[]),e)?Q.createElement(t2.kt,null):null}function bp({font:e}){let t=null==e?void 0:e.family,n=(null==e?void 0:e.style)??"",a=t&&!eU.vXe.fontIsLoaded(t,n)&&t?(0,eO.t)("dev_handoff.typography_preview_missing_font",{fontFamily:t,fontStyle:n}):void 0;return Q.createElement("div",{className:"typography_preview--previewError--Kwn7m"},Q.createElement("span",{"data-tooltip-type":nO.Ib.TEXT,"data-tooltip":a},Q.createElement(eO.Tx,{id:"dev_handoff.typography_preview_not_available"})))}let b_=e=>e.toLocaleString("en",{maximumFractionDigits:3,useGrouping:!1}),bf=e=>{e&&URL.revokeObjectURL(e)},bh={url:void 0,fullSize:{x:0,y:0},capPosition:0,baselinePosition:0,bottomPosition:0,fontSizeInPx:0,lineHeightInPx:0,fontFamily:"",fontStyle:"",textStyleNodeId:""};function bg({fillContainer:e=!1}){let t=(0,eF.VW)();return(null==t?void 0:t.type)==="TEXT"?Q.createElement(bs,{fillContainer:e}):Q.createElement(sN,{fillContainer:e})}var bE=n(948637);function bv(){let e=bn(),t=(0,eF.VW)(),n=null==t?void 0:t.description;return e?Q.createElement(Q.Fragment,null,Q.createElement("div",{className:"module_documentation_panel--spacer--fEdqY"}),Q.createElement(iu,{description:n,emptyStateText:(0,eO.t)("inspect_panel.templates.no_templates_description")})):null}var by=n(766942);function bb({module:e}){let t=(0,iG.rL)(),n=e.guid,a=t-64,r=(0,by.O)({assetId:n,thumbnailVersion:1,width:4*a,height:4*iz,scale:4});return Q.createElement(ns.D8,{className:iK,style:null==r?void 0:r.backgroundStyle,role:"button",tabIndex:0},(null==r?void 0:r.url)&&Q.createElement(tk.J,{className:iW,src:r.url,style:{maxWidth:a,maxHeight:iz}}))}function bC(){let e=(0,eF.VW)();return(null==e?void 0:e.isModule)?Q.createElement(nL.VZ,{title:(0,eO.t)("dev_handoff.inspect_panel.template"),recordingKey:"templatePanel"},Q.createElement(bb,{module:e}),Q.createElement(bv,null)):null}function bw(){return!!(0,$.d4)(e=>e.mirror.appModel.activeCanvasEditModeType===eU.m1T.DEV_HANDOFF_HISTORY&&e.versionHistory.activeId&&"current_version"!==e.versionHistory.activeId)}var bT=n(894689);let bx="add_developer_related_link_row--inputRow--0rB-c";var bN=n(949554);function bk({onCancel:e,onSuccess:t,existingUrls:n,onFocus:a,onUnfocus:r,addExtraPadding:l=!1}){let i=(0,$.wA)(),[o,s]=Q.useState(""),[c,d]=Q.useState(!1),u=Q.useCallback(e=>s(e.target.value),[]),m=(0,ae.eY)(),p=(0,lk.Nf)()??"",_=m.get(p),f=(0,t_.tS)(),h=ik(o),{inputRef:g,inputProps:{onFocus:E,onMouseUp:v,onMouseLeave:y,onKeyUp:b,onChange:C}}=(0,bT.X)({onChange:u}),w=Q.useCallback(async()=>{let e=o;if(!(0,iS.G)(e)||!(0,iS.H)(e)){if(e="http://"+e,!(0,lI.FB)(e)||!(0,iS.G)(e)){i(eL.F.enqueue({message:(0,eO.t)("dev_handoff.developer_related_links.invalid_link"),error:!0,timeoutOverride:2e3}));return}s(e)}if(n.includes(e)){i(eL.F.enqueue({message:(0,eO.t)("dev_handoff.developer_related_links.duplicate_link_error"),error:!0,timeoutOverride:2e3}));return}d(!0),r();let a=(0,iy.DY)({fileKey:f,nodeId:p,url:e,onPost:t,nodeType:null==_?void 0:_.type,source:"web",pluginId:null==h?void 0:h.plugin.plugin_id});try{let e=await a;d(!1);let t=iy.Rb.safeParse(e.data);if(!t.success||!h)return;let n=t.data.meta;h.genPreview({link:{id:n.id,linkUrl:n.link_url,linkName:n.link_name,linkPreview:null,linkPreviewJson:"",nodeId:n.node_id,fileKey:n.file_key,isUserOverride:n.is_user_override,isInherited:!1}})}catch(e){console.error(e),i(eL.F.enqueue({message:(0,eO.t)("dev_handoff.developer_related_links.link_error",{errorMessage:e.message}),error:!0,timeoutOverride:2e3}))}finally{d(!1)}},[o,n,r,f,p,t,i,null==_?void 0:_.type,h]),T=async t=>{"Enter"===t.key&&!t.shiftKey&&o?await w():"Escape"===t.key&&e()};if(Q.useEffect(()=>{let t=t=>{g.current&&!g.current.contains(t.target)&&(o&&""!==o?w():e())};return document.addEventListener("mousedown",t),()=>document.removeEventListener("mousedown",t)},[e,g,w,o]),c){let e=new URL(o).host;return e.startsWith("www.")&&(e=e.slice(4)),Q.createElement(nM.fI,{className:bx},Q.createElement(t2.kt,{className:"add_developer_related_link_row--loadingSpinner--zWFF2"}),Q.createElement(nM.UZ,null,e))}return Q.createElement(nM.fI,{className:ea()(bx,l&&tw.cx.pb8.$)},Q.createElement(eM.B,{svg:bN.A,className:tw.cx.colorIconSecondary.$}),Q.createElement(ht.L,{ref:g,className:"add_developer_related_link_row--input--4Y-uG",onFocus:e=>{E(e),a()},onMouseUp:v,onMouseLeave:y,onChange:C,onKeyDown:T,onKeyUp:b,value:o,placeholder:(0,eO.t)("dev_handoff.developer_related_links.link_placeholder"),autoCorrect:"off",recordingKey:"devRelatedLinkUrlInput",autoFocus:!0}))}var bS=n(202980),bI=n(951694);let bA=bI.object({type:bI.literal("PLAIN_TEXT"),text:bI.string()}),bP=bI.union([bA,bI.null()]),bO=bI.object({type:bI.literal("AUTH_REQUIRED")}),bL=(bI.union([bO,bA,bI.null()]),bI.object({type:bI.literal("AUTH_SUCCESS")}));function bM(e){if(!e)return null;try{let t=JSON.parse(e),n=bP.safeParse(t);if(!n.success)return null;return n.data}catch(t){return(0,ar.$D)(ao.e.DEVELOPER_TOOLS,t,{extra:{previewJson:e}}),null}}function bD(e,t){let n=(0,eh.Rs)(tf.Ssd,{fileKey:e,nodeId:t});return(0,bS.k9)(()=>{var e;return"loaded"===n.status&&(null==(e=n.data.file)?void 0:e.developerRelatedLinksForNode)?[n.data.file.developerRelatedLinksForNode.map(e=>({...e,linkPreview:bM(e.linkPreviewJson)})),"loaded"]:[[],n.status]},[n])}bI.union([bL,bI.null()]);let bR=(0,aE.Ju)(function(e){let t=e.linkId,n=(0,lk.Nf)()??"",a=(0,t_.tS)(),r=(0,ae.eY)().get(n),l=(0,$.wA)(),i=async()=>{if(!a||!n)return;let e=(0,iy.Tz)({fileKey:a,linkId:t,nodeId:n,nodeType:null==r?void 0:r.type,source:"web"});l(n9.Ce());try{await e}catch(e){console.error(e),l(eL.F.enqueue({message:`Could not delete link: ${e.message}`,error:!0,timeoutOverride:2e3}))}};return Q.createElement(tS.Rw,{destructive:!0,confirmationTitle:Q.createElement(eO.Tx,{id:"dev_handoff.developer_related_links.delete_link"}),confirmText:Q.createElement(eO.Tx,{id:"dev_handoff.developer_related_links.delete_link"}),onConfirm:i},Q.createElement("p",null,Q.createElement(eO.Tx,{id:"dev_handoff.developer_related_links.delete_link_text_body"})))},"DeveloperRelatedLinksDeleteModal");var bF=n(536006);let bB="developer_related_links_edit_modal--fieldContainer--Twtv-",bU="developer_related_links_edit_modal--label--cxfFD",bH=(0,aE.Ju)(function({initialLink:e}){var t;let{id:n,linkName:a,linkUrl:r}=e,[l,i]=Q.useState(r),o=null==(t=e.linkPreview)?void 0:t.text,[s,c]=Q.useState(!e.isUserOverride&&o?"":a),[d,u]=Q.useState(!1),m=(0,lk.Nf)()??"",p=(0,t_.tS)(),_=(0,ae.eY)().get(m),f=(0,$.wA)(),{windowInnerHeight:h,windowInnerWidth:g}=(0,bF.l)(),E=Q.useMemo(()=>new lB.Mi(g/2-160,h/3),[h,g]),v=Q.useCallback(e=>c(e.target.value),[]),y=Q.useCallback(e=>i(e.target.value),[]),{inputRef:b,inputProps:{onFocus:C,onMouseUp:w,onMouseLeave:T,onKeyUp:x,onChange:N}}=(0,bT.X)({onChange:v}),k=ik(l),{inputRef:S,inputProps:{onFocus:I,onMouseUp:A,onMouseLeave:P,onKeyUp:O,onChange:L}}=(0,bT.X)({onChange:y}),M=async()=>{let t;if(!m||!p)return;let i=l;if((!(0,iS.G)(i)||!(0,iS.H)(i))&&(i="http://"+i,!(0,iS.G)(i))){f(eL.F.enqueue({message:(0,eO.t)("dev_handoff.developer_related_links.invalid_link"),error:!0,timeoutOverride:2e3}));return}u(!0);let o=s;s&&""!==s||(o=await (0,iy.yf)(i)),l!==r&&s!==a?t=!0:l!==r?k&&(t=!1):s!==a&&(t=!!s||!e.linkPreview);let c=(0,iy.Cq)({fileKey:p,nodeId:m,linkId:n,name:o,url:i,isUserOverride:t,clearLinkPreview:l!==r,nodeType:null==_?void 0:_.type,source:"web",pluginId:null==k?void 0:k.plugin.plugin_id});k&&!t&&k.genPreview({link:{...e,linkUrl:l,linkName:s,isUserOverride:!1}}),f(n9.Ce());try{await c}catch(e){console.error(e),f(eL.F.enqueue({message:`Could not edit link: ${e.message}`,error:!0,timeoutOverride:2e3}))}},D=d||!l||a===s&&r===l,R=e=>{e.keyCode===es.Uz.ENTER&&!e.shiftKey&&s&&l?M():e.keyCode===es.Uz.ESCAPE&&f(n9.Ce())};return Q.createElement(dn.Wx,{initialWidth:320,onClose:()=>{f(n9.Ce())},initialPosition:E,disableDragging:!0,clickOutsideToHide:!0},Q.createElement(hn.i,null,Q.createElement("div",{className:"developer_related_links_edit_modal--header--mb7eN"},Q.createElement(eO.Tx,{id:"dev_handoff.developer_related_links.edit_link"}),Q.createElement(aO.Jn,{onClick:()=>f(n9.Ce())})),Q.createElement("div",{className:bB},Q.createElement("p",{className:bU},Q.createElement(eO.Tx,{id:"dev_handoff.developer_related_links.link"})),Q.createElement(ht.L,{ref:S,className:"developer_related_links_edit_modal--input--mw5Qe",onFocus:I,onMouseUp:A,onMouseLeave:P,onChange:L,onKeyDown:R,onKeyUp:O,value:l,autoCorrect:"off",recordingKey:"devRelatedLinkUrlInput",disabled:d})),Q.createElement("div",{className:bB},Q.createElement("p",{className:bU},Q.createElement(eO.Tx,{id:"dev_handoff.developer_related_links.name"})),Q.createElement("div",{className:"developer_related_links_edit_modal--inputContainer--jplkF"},Q.createElement("div",{className:"developer_related_links_edit_modal--favicon--aNxtZ"},Q.createElement(nm.v,{url:r})),Q.createElement(ht.L,{ref:b,className:"developer_related_links_edit_modal--inputName--oSwwG",onFocus:C,onMouseUp:w,onMouseLeave:T,onChange:N,onKeyDown:R,onKeyUp:x,value:s,autoCorrect:"off",autoFocus:!0,recordingKey:"devRelatedLinkNameInput",disabled:d,placeholder:o}))),Q.createElement("div",{className:"developer_related_links_edit_modal--buttons--6eqGy"},Q.createElement(tC.nR,{onClick:()=>f(n9.Ce())},Q.createElement(eO.Tx,{id:"dev_handoff.developer_related_links.cancel"})),Q.createElement(tC.$$,{onClick:M,disabled:D,type:"submit"},Q.createElement(eO.Tx,{id:"dev_handoff.developer_related_links.edit_link"})))))},"DeveloperRelatedLinksEditModal"),bV="developer_related_links_panel--addButton--0Fv7K draggable_list--addButton--D0q--",bG="developer_related_links_panel--hint--n8Jpr";var bK=n(486585);let bW="dev_handoff_dev_resources_plus_icon_clicked_once",bz=(0,nf.eU)(!1);function bj({links:e,status:t,isVariant:n=!1}){return"loaded"!==t||"loaded"===t&&0===e.length?null:Q.createElement(Q.Fragment,null,e.map(e=>Q.createElement(iA,{key:e.linkUrl,isEditable:!1,link:{...e,isInherited:!0,isVariant:n},onOpenDeleteModal:ey.lQ,onOpenEditModal:ey.lQ})))}function bY(){let e=(0,$.wA)(),t=(0,lk.Nf)()??"",n=(0,t_.uL)()??"",a=(0,ae.eY)(),r=(0,eF.uQ)(),l=(0,$.d4)(e=>e.mirror.appModel.currentPage),i=a.get(r??l),o=(null==i?void 0:i.type)==="SYMBOL"||(null==i?void 0:i.isStateGroup),s=(0,n6.wS)(),c=(0,t5.U)(),d=(0,sZ.LS)(),u=!!(0,fQ.f)(bW),m=function(){let e=bw(),t=(0,t_.q5)(),n=null==t?void 0:t.repo,a=!!(t&&n&&(0,uP.Ns)(t,n))||!n;return!e&&a}(),p=bw(),[_,f]=function(e){let t=(0,eh.Rs)(tf.jJU,{fileKey:e});return(0,bS.k9)(()=>{var e;return"loaded"===t.status&&(null==(e=t.data.file)?void 0:e.developerRelatedLinks)?[t.data.file.developerRelatedLinks.map(e=>({...e,linkPreview:bM(e.linkPreviewJson)})),"loaded"]:[[],t.status]},[t])}(n),h=Q.useMemo(()=>_.filter(e=>e.nodeId===t)??[],[_,t]),[g,E]=Q.useState(!1),{singleBackingSymbol:v,singleBackingStateGroup:y}=(0,rb.$)([(null==i?void 0:i.guid)??""]),{backingSymbol:b,backingStateGroup:C}=(0,n6.Bv)(v,y),w="loaded"===s.status,T=(null==i?void 0:i.type)==="INSTANCE"||w,x=(0,lS.yW)(b),[N,k]=bD(x??"",(null==b?void 0:b.publishID)??""),[S,I]=bD(x??"",(null==C?void 0:C.publishID)??""),A=!!x&&x!==n,P=null==b?void 0:b.guid;T&&P&&!A&&(N=_.filter(e=>e.nodeId===P)??[],k=f),T&&C&&!A&&(S=_.filter(e=>e.nodeId===C.guid)??[],I=f);let[O,L]=Q.useState(!1),M=Q.useCallback(()=>{(null==i?void 0:i.isAlive())&&(L(!0),u||e(tB.b({[bW]:!0})),c("Dev Handoff Related Links Click Plus Icon",{nodeId:t,nodeType:null==i?void 0:i.type,source:"web"}))},[u,c,t,i,e]),[D,R]=(0,ef.fp)(bz);Q.useEffect(()=>{D&&(M(),R(!1))},[D,M,R]);let F=m&&h.length<10,B=Q.useMemo(()=>_&&function(e,t,n){let a=new Map,r=new Map;return e.forEach(e=>{var l,i;if(eU.glU.getPageIdFromNode(e.nodeId)!==n)return;let o=t.get(e.nodeId);for(;o;){let t=r.get(o.guid);if(t){null==(l=a.get(t))||l.push(e);return}let n=o.parentNode;if(!n||"SECTION"===o.type||"CANVAS"===o.type)return;if("FRAME"===o.type&&!o.isStateGroup&&!o.resizeToFit&&((null==n?void 0:n.type)==="SECTION"||(null==n?void 0:n.type)==="CANVAS")){a.get(o.guid)?null==(i=a.get(o.guid))||i.push(e):a.set(o.guid,[e]),r.set(e.nodeId,o.guid);return}o=n}}),a}(_,a,l),[_,t,l]);if(0===h.length&&p)return null;let U=aZ.z4.getIsExtension(),H=t=>{e((0,n9.to)({type:bH,data:{initialLink:t}}))},V=(t,n)=>{e((0,n9.to)({type:bR,data:{linkId:t,initialLinkUrl:n}}))},G=(null==i?void 0:i.type)==="SECTION"&&B&&function(e,t){let n=new Map;for(let a of t.childrenNodes){let t="FRAME"===a.type&&e.get(a.guid);t&&n.set(a.guid,t)}return n}(B,i),K=h.length>0||O||N.length>0||S.length>0||!d&&B&&B.size>0||G&&G.size>0,W="loaded"===f&&"loaded"===k&&"loaded"===I;return Q.createElement(nL.VZ,{hideHeader:!0,padding:nL.UZ.CONSTRAINED_VERTICAL,recordingKey:"developerLinks"},!U&&Q.createElement(nM.fI,{className:"developer_related_links_panel--panelTitleRow--HTyXD"},Q.createElement(nM.xw,{className:"developer_related_links_panel--panelTitleText--QeRxz",extended:!0},Q.createElement(eO.Tx,{id:"dev_handoff.developer_related_links.links"})),!W&&Q.createElement(nM.fI,{className:"developer_related_links_panel--spinner--2ofDP draggable_list--addButton--D0q--"},Q.createElement(t2.kt,{className:bV})),W&&F&&!g&&Q.createElement(nM.K0,{className:bV,onMouseDown:e=>e.stopPropagation(),"data-tooltip-type":nO.Ib.TEXT,"data-tooltip":(0,eO.t)("dev_handoff.developer_related_links.add_link_button"),svg:s9.A,onClick:M,recordingKey:"addDevRelatedLink"})),!K&&(!u||U)&&W&&Q.createElement(nM.fI,{className:ea()("developer_related_links_panel--spinnerContainer--d-B-K")},Q.createElement(nM.UZ,{className:ea()(U?"developer_related_links_panel--hintExtension--KCW5n":bG)},Q.createElement(eO.Tx,{id:"dev_handoff.developer_related_links.empty_info"}))),h.map(e=>Q.createElement(iA,{key:e.linkUrl,isEditable:m&&"figmadoc"!==e.id,link:{...e,isInherited:!1},onOpenDeleteModal:V,onOpenEditModal:H})),O&&Q.createElement(bk,{onCancel:()=>{L(!1),E(!1)},onSuccess:()=>{L(!1),E(!1)},onFocus:()=>E(!0),onUnfocus:()=>E(!1),existingUrls:h.map(e=>e.linkUrl),addExtraPadding:!(N.length>0||S.length>0||h.length>0)}),C&&T&&Q.createElement(bj,{status:I,links:S}),N&&T&&Q.createElement(bj,{status:k,links:N,isVariant:null!==C}),Q.createElement(bq,{links:[...h,...N,...S]}),!d&&B&&Q.createElement(bZ,{frameToLinks:B}),(null==i?void 0:i.type)==="SECTION"&&G&&Q.createElement(bZ,{frameToLinks:G}),K&&!O&&o&&Q.createElement(nM.UZ,{className:ea()(bG)},Q.createElement(eO.Tx,{id:"dev_handoff.developer_related_links.component_inherited_links_desc"})))}function bZ(e){let t=(0,ae.eY)();return Q.createElement(Q.Fragment,null,Array.from(e.frameToLinks.entries()).map(([n,a],r)=>Q.createElement(bX,{key:r,guid:n,sceneGraph:t,links:a,isLast:r===e.frameToLinks.size-1})))}function bX(e){let{guid:t,sceneGraph:n}=e,[a,r]=Q.useState(!1),l=n.get(t),[i,o]=Q.useState(!1);if(!l)return null;let s=l.name;return i||(s=s+" ("+e.links.length+")"),Q.createElement("div",{className:ea()(i&&!e.isLast&&tw.cx.pb8.$),onMouseEnter:()=>r(!0),onMouseLeave:()=>r(!1)},Q.createElement("div",{className:ea()("developer_related_links_panel--sectionHeader--VHgzU","developer_related_links_panel--item--fwiWa"),onMouseDown:e=>{e.stopPropagation(),o(!i)},role:"button",tabIndex:0,"data-fullscreen-intercept":!0},Q.createElement(eM.B,{className:"developer_related_links_panel--expandCaret--2h9sN",svg:i?t$.A:u$.A}),Q.createElement(ej.Bf,{className:"developer_related_links_panel--layerIcon--NG2rK",guid:l.guid}),Q.createElement("div",{className:"developer_related_links_panel--sectionName--xeFyg text--fontPos11--2LvXf text--_fontBase--QdLsd ellipsis--ellipsis--Tjyfa"},s),a&&Q.createElement(nM.K0,{onClick:()=>eU.w3z.selectAndFocusOnNode(l.guid,!0),className:"developer_related_links_panel--goToTargetButton--JZoyi",onMouseDown:e=>e.stopPropagation(),"data-tooltip-type":nO.Ib.TEXT,"data-tooltip":(0,eO.t)("dev_handoff.developer_related_links.select_frame"),svg:bK.A})),i&&e.links.map((e,t)=>Q.createElement(iA,{key:t,link:{...e,isInherited:!1,isNested:!0},isEditable:!1,onOpenDeleteModal:ey.lQ,onOpenEditModal:ey.lQ})))}function bq({links:e}){let[t,n]=(0,ef.fp)(ih),a=Q.useMemo(()=>{let n=new Set(e.map(e=>e.linkUrl));return Object.values(t).filter(e=>!!e&&e.links.some(e=>n.has(e.linkUrl)))},[e,t]);async function r({links:e,plugin:t}){if(await ib.instance.runAuth({plugin:t,links:e.map(e=>({url:e.linkUrl,name:e.linkName,isInherited:e.isInherited,nodeId:e.nodeId}))})){n(e=>{let n={...e};return delete n[t.plugin_id],n});try{await Promise.all(e.map(e=>ib.instance.generateLinkPreview({plugin:t,link:e})))}catch(e){console.error(e)}}}return a&&0!==a.length?Q.createElement(nk.Y,{spacing:4,direction:"vertical",width:"fill-parent",horizontalAlignItems:"start",padding:{top:4,left:16}},Array.from(a).map((e,t)=>Q.createElement(aL.E,{key:t,i18nId:"dev_handoff.related_links.plugin.auth_required",i18nParams:{button:Q.createElement("button",{className:tw.cx.colorTextBrand.bgTransparent.$,onClick:()=>r({links:e.links,plugin:e.plugin})},Q.createElement(aL.E,{i18nId:"dev_handoff.related_links.plugin.connect_to",i18nParams:{pluginName:e.plugin.name}}))}}))):null}var bJ=n(828369);let bQ="selection_styles_panel--styleDetailsContainer--K3XsP",b$=(0,rT.jz)(uT.q9j),b0="dev_handoff_selection_style_modal";function b1(){let e=sJ("EFFECT"),t=sJ("TEXT"),n=(0,bJ.X)(),a=(0,$.wA)(),r=!!n&&n.id===b0;return Q.useEffect(()=>()=>{r&&a(cM.XE())},[a,r]),Q.createElement(Q.Fragment,null,e.visibleItems.length>0&&Q.createElement(nL.VZ,{title:(0,eO.t)("dev_handoff.selection_effect_styles"),recordingKey:"handoffEffectStyles"},e.visibleItems.map(e=>Q.createElement(b2,{key:null==e?void 0:e.key,styleData:e})),e.showMoreButton),t.visibleItems.length>0&&Q.createElement(nL.VZ,{title:(0,eO.t)("dev_handoff.selection_text_styles"),recordingKey:"handoffTextStyles"},t.visibleItems.map(e=>Q.createElement(b2,{key:null==e?void 0:e.key,styleData:e})),t.showMoreButton),r&&Q.createElement(b5,null))}function b2({styleData:e}){let t=Q.useRef(null),n=(0,bJ.X)(),a=(0,$.wA)(),r=Q.useCallback(()=>{t.current&&(n&&a(cM.XE()),a(cM.u1({id:b0,initialX:t.current.getBoundingClientRect().left-b$,initialY:t.current.getBoundingClientRect().top,data:e})))},[a,n,e]);return Q.createElement("div",{className:"selection_styles_panel--styleRow--t--sj",onClick:r,onMouseEnter:()=>eU.kTx.highlightOnlySameStyleInSublayers(e.guids),onMouseLeave:()=>eU.kTx.highlightOnlySameStyleInSublayers([]),ref:t},Q.createElement("div",{className:"selection_styles_panel--icon--6ej2T"},Q.createElement(s1.zi,{dsStyle:e,disableTooltip:!0})),Q.createElement("div",{className:"selection_styles_panel--styleName--Xz37G text--fontPos11--2LvXf text--_fontBase--QdLsd ellipsis--ellipsis--Tjyfa"},e.styleName))}function b5(){let e=(0,bJ.X)(),t=(0,$.wA)(),n=Q.useCallback(()=>{t(cM.XE())},[t]);if(!e||e.id!==b0)return null;let{style_type:a,name:r,styleNode:l}=e.data,i=new lB.Mi(e.initialX,e.initialY);return Q.createElement(dn.vx,{title:r,headerSize:"small",initialWidth:b$,initialPosition:i,initialConstraints:{x:"left",y:"top"},maxHeight:420,onClose:n,dragHeaderOnly:!0,alwaysEnsureModalOnScreen:!0,alwaysEnsureHeaderModalOnScreen:!0,recordingKey:"handoffStyleDetailsModal"},Q.createElement("EFFECT"===a?b4:b7,{styleNode:l}))}function b4({styleNode:e}){let t=sK(),n=Q.useMemo(()=>null==e?void 0:e.effects.reverse(),[e]);if(!n)return null;let a="properties"===t.inspectionMode?Q.createElement("div",{className:"selection_styles_panel--effectStyleProperties--kGKRY"},n.map((t,n)=>Q.createElement(yJ.r,{key:`${e.guid}-${n}`,...t}))):Q.createElement(yU,{overrideNodeId:e.guid,hideLayoutSection:!0,sectionClassName:"selection_styles_panel--effectStyleCodeSection--7T-TK",localCodeLanguage:t.codeLanguageApi.codeLanguage});return Q.createElement("div",{className:bQ},Q.createElement(b8,{preferencesApi:t,dropdownPrefix:"effectStyle"}),a)}function b3({styleNode:e}){let{lineHeightOrMixed:t}=e;return Q.createElement(nL.VZ,{hideHeader:!0,padding:nL.UZ.NONE,noBorder:!0,recordingKey:"textStyleDetails"},Q.createElement(bc,{node:e}),Q.createElement("div",{className:"selection_styles_panel--textStyleProperties--DgbCN"},Q.createElement(nL._p,{name:(0,eO.t)("inspect_panel.typography.font"),value:null==e?void 0:e.fontName.family}),Q.createElement(nL._p,{name:(0,eO.t)("inspect_panel.typography.weight"),value:null==e?void 0:e.fontWeightOrMixed}),Q.createElement(nL._p,{name:(0,eO.t)("inspect_panel.typography.style"),value:null==e?void 0:e.fontName.style}),Q.createElement(nL.YE,{name:(0,eO.t)("inspect_panel.typography.size"),value:null==e?void 0:e.fontSize}),Q.createElement(nL.di,{name:(0,eO.t)("inspect_panel.typography.line_height"),value:"mixed"===t?void 0:t}),Q.createElement(nL.di,{name:(0,eO.t)("inspect_panel.typography.letter"),value:null==e?void 0:e.letterSpacing})))}function b6({styleNode:e,codeLanguage:t}){return Q.createElement(Q.Fragment,null,Q.createElement(nL.VZ,{hideHeader:!0,padding:nL.UZ.NONE,noBorder:!0,recordingKey:"textStyleDetails"},Q.createElement(bc,{node:e})),Q.createElement(yU,{overrideNodeId:e.guid,hideLayoutSection:!0,sectionClassName:"selection_styles_panel--textStyleCodeSection---86O2",localCodeLanguage:t}))}function b7({styleNode:e}){let t=sK(),n="properties"===t.inspectionMode?Q.createElement(b3,{styleNode:e}):Q.createElement(b6,{styleNode:e,codeLanguage:t.codeLanguageApi.codeLanguage});return Q.createElement("div",{className:bQ},Q.createElement(b8,{preferencesApi:t,dropdownPrefix:"textStyle"}),n)}function b8({preferencesApi:e,dropdownPrefix:t}){return Q.createElement("div",{className:"selection_styles_panel--preferencesRow--7Wgoe"},Q.createElement(a1,{preferencesApi:e,inspectionModeLayout:"tabs",dropdownPrefix:t}))}function b9(){return(0,y9.VX)(y3.s4.FILL),(0,y9.VX)(y3.s4.STROKE),(0,y9.VX)(y3.s4.TEXT),(0,y9.VX)(y3.s4.EFFECT),null}function Ce(e){let t=(0,y4.q)(),n=(0,sZ.LS)(),a=(0,lk.ro)(),r=bn(),l=(0,eF.VW)(),i=(0,eF.NM)(),o=(0,am.sQ)(),s=(0,sd.AF)(),c=(0,sd.h)(),d=(0,aX.U)(),u=Q.useRef(null),m=(0,ae.eY)(),p=aZ.z4.getIsExtension(),_=!!(null==l?void 0:l.isStateGroup),f=(0,eR.$F)(l),h=(0,ef.md)(aF.be),[g,E]=Q.useState(!1);Q.useEffect(()=>{E(!1)},[null==l?void 0:l.guid]);let v=(0,iQ.mr)((null==l?void 0:l.guid)??"",m),y=(0,eo.kc)().dt_figmadoc&&v&&a&&!g;return Q.createElement("div",{className:gK},t&&Q.createElement(y6.Mw,{panelName:y6.ON.HANDOFF}),Q.createElement(yL,{plugin:h??null}),n&&!p&&Q.createElement(sl,{lastViewTimestamp:e.lastViewTimestamp}),i&&!p&&Q.createElement(sa,null),Q.createElement(b9,null),Q.createElement("div",{style:{position:"relative",width:"100%",height:"100%"}},Q.createElement(ab.P,{ref:u,className:"inspect_panel--scrollContainer--wwC0l properties_panel--scrollContainer--o2LxW",onContextMenu:ey.lQ,scrollingDisabled:!!d},Q.createElement(t6.fu,{name:Ex.e0.CODE_PANEL},Q.createElement(hn.i,null,Q.createElement("div",{className:p?"inspect_panel--inspectPanelContentsBottomAligned--MOK20":"inspect_panel--inspectPanelContents--iYf8P"},n?Q.createElement(Q.Fragment,null,a&&Q.createElement(ov,null),(0,eo.kc)().dse_editor_templates_v1&&r&&Q.createElement(bC,null),Q.createElement(bY,null),y?Q.createElement("div",{className:"inspect_panel--inspectLayerPropertiesButtonContainer--zgz1r"},Q.createElement(lP.$,{onClick:()=>E(!0),width:"fill-parent"},Q.createElement(eO.Tx,{id:"dev_handoff.inspect_panel.show_more_properties"}))):Q.createElement(Q.Fragment,null,Q.createElement(y5,null),_&&Q.createElement(bE.J,null),f&&Q.createElement(Q.Fragment,null,Q.createElement("div",{className:tw.cx.pt4.$},Q.createElement(a0,null)),Q.createElement("div",{className:ea()("inspect_panel--layerPreview--hxLhR",aZ.z4.getIsExtension()&&"inspect_panel--isInExtension--kzn7u")},Q.createElement(bg,null)),Q.createElement(bE.J,{minimal:!0}),o&&s?Q.createElement(yU,null):Q.createElement(y0,null)),Q.createElement(aS,null),Q.createElement(y7.t,null),f&&Q.createElement(s2,null),(0,eo.kc)().dt_lego_selection_styles&&Q.createElement(b1,null),Q.createElement(be.L,null)),Q.createElement(bt.L,null)):i?Q.createElement(Q.Fragment,null,Q.createElement(s2,null),(0,eo.kc)().dt_lego_selection_styles&&Q.createElement(b1,null),Q.createElement(be.L,null),Q.createElement(bt.L,null)):Q.createElement(Q.Fragment,null,c&&Q.createElement(yC,null),s&&Q.createElement(Ez.$b,null),Q.createElement(y8.A,null),Q.createElement(bY,null),(0,eo.kc)().dt_dev_mode_workflows&&Q.createElement(yj,null)),Q.createElement("div",null)))))))}var Ct=n(423641),Cn=n(173171),Ca=n(324139),Cr=n(582245);function Cl({label:e,onClick:t,isAutosave:n,isOpenVersion:a}){let r=tw.cx.flex.pl12.pr16.pt8.pb4.gap20.h32.itemsCenter.if(a,tw.cx.colorBgSelected).if(!n,tw.cx.fontMedium);return Q.createElement("div",{className:ea()(r.$,"minimal_version_panel--versionRow--NaeEN"),onClick:t,role:"button",tabIndex:0,"data-testid":"dev-handoff-version-row"},Q.createElement(Ca.D,null),Q.createElement("div",{className:tw.cx.ellipsis.noWrap.overflowHidden.$},e))}function Ci(){let{activeId:e,versions:t}=(0,$.d4)(e=>e.versionHistory),n=(0,$.d4)(e=>{var t;return null==(t=e.openFile)?void 0:t.canEdit}),a=(0,$.wA)(),r=()=>{lT.Y5.triggerAction("deselect-all")},l=e===ag.V_,i=l?t[0]:t.find(t=>t.id===e);if(!i)return null;let o=l?(0,eO.t)("collaboration.feedback.current_version"):i.label??(0,Cn.xX)(i.touched_at,!0);return Q.createElement("div",{className:tw.cx.flex.flexColumn.borderBox.bSolid.bb1.colorBorder.$},Q.createElement(rw.s3,{onClose:()=>{a((0,ag.Eg)())},addSavepoint:()=>{a((0,n9.to)({type:Cr.yU,data:{}})),r()},isViewOnly:!n}),!l&&Q.createElement(Q.Fragment,null,Q.createElement(Cl,{label:(0,eO.t)("collaboration.feedback.current_version"),onClick:()=>{a(Ct.Fm({id:ag.V_})),r()}}),Q.createElement("div",{className:"minimal_version_panel--verticalLine--yLBx4"})),Q.createElement(Cl,{label:o,isAutosave:!l&&!i.label,isOpenVersion:!0}),Q.createElement(nc.N_,{className:tw.cx.flex.pt6.pb6.pl16.pr16.itemsCenter.$,onClick:r,trusted:!0},Q.createElement(eO.Tx,{id:"dev_handoff.version_history.view_all_versions"})))}let Co=Q.memo(function(){let{commentsActive:e,isNodeSelected:t,versionHistoryActive:n}=(0,ep.R)(e=>({commentsActive:e.mirror.appModel.currentTool===tz.ec.tool,isNodeSelected:Object.keys(e.mirror.sceneGraphSelection).length>0,versionHistoryActive:e.mirror.appModel.activeCanvasEditModeType===eU.m1T.DEV_HANDOFF_HISTORY})),a=(0,aD.GS)(),r=(0,ef.md)(tj.H),l=(0,no.E1)();(0,ru.jh)(),tY({doReport:!0});let i=n&&!t,o=r===tj._.PRIMARY&&!e&&!i;return Q.createElement(gU.vL,{name:"rightPanels",focusOnMount:!0,handleKeyDown:ey.lQ},Q.createElement("div",{id:"dev-handoff-inspect-panel"},Q.createElement(yO,null,n&&(i?Q.createElement(rw.yU,{isUI3:a}):Q.createElement(Ci,null)),e&&Q.createElement(gP,null),o&&Q.createElement(Ce,{lastViewTimestamp:l}),Q.createElement(yN,null))))});var Cs=n(52539),Cc=n(95992);let Cd="dev_handoff_index_view_zoom_control--button--1x9ib",Cu="dev_handoff_index_view_zoom_control--zoomButton--l1ZDl";var Cm=n(819785);function Cp(){let{Dropdown:e,toggleDropdown:t,dropdownTargetRef:n}=(0,aw.B)("DEV_HANDOFF_INDEX_VIEW_ZOOM_DROPDOWN"),a=(0,Cc.Zr)("zoom-out"),r=(0,Cc.Zr)("zoom-in"),l=Math.round(100*(0,eG.J2)((0,Cs.d)().activeCanvasCurrentZoom)).toString(),i=[{displayText:(0,eO.t)("dev_handoff.vscode.zoom_control.zoom_options_actual_size"),callback:()=>eU.glU.setCanvasZoomScale(1)},{displayText:(0,eO.t)("dev_handoff.vscode.zoom_control.zoom_options_fit_to_screen"),callback:()=>eU.w3z.setFocusZoomLevel(eU.i1K.FIT_TO_SCREEN)},{displayText:(0,eO.t)("dev_handoff.vscode.zoom_control.zoom_options_fit_to_width"),callback:()=>eU.w3z.setFocusZoomLevel(eU.i1K.FIT_TO_WIDTH)},{displayText:(0,eO.t)("dev_handoff.vscode.zoom_control.zoom_options_fill_screen"),callback:()=>eU.w3z.setFocusZoomLevel(eU.i1K.FILL_SCREEN)}];return Q.createElement("div",{className:"dev_handoff_index_view_zoom_control--container--oBEBg",ref:n},Q.createElement("div",{className:Cd},Q.createElement(aJ.K0,{className:Cu,svg:Cm.A,onClick:()=>lT.Y5.triggerAction("zoom-out",{source:"vscode-zoom-menu"}),disabled:!a,"data-tooltip-type":nO.Ib.TEXT,"data-tooltip":(0,eO.t)("dev_handoff.vscode.zoom_control.zoom_out_button")})),Q.createElement("button",{className:"dev_handoff_index_view_zoom_control--zoomLevel--uI6yg text--fontPos11--2LvXf text--_fontBase--QdLsd",style:{width:`${Math.max(l.length,4)}em`},onClick:t},l,"% ",Q.createElement(eM.B,{svg:oQ.A})),Q.createElement("div",{className:Cd},Q.createElement(aJ.K0,{className:Cu,svg:s9.A,onClick:()=>lT.Y5.triggerAction("zoom-in",{source:"vscode-zoom-menu"}),disabled:!r,"data-tooltip-type":nO.Ib.TEXT,"data-tooltip":(0,eO.t)("dev_handoff.vscode.zoom_control.zoom_in_button")})),Q.createElement(e,{items:i,showPoint:!0,displayAboveTarget:!0}))}var C_=n(742691),Cf=n(553551);let Ch="dev-handoff-breadcrumbs-dropdown",Cg="dev-handoff-collapsed-breadcrumb-dropdown";function CE(e){return!!e}function Cv(){let e=Q.useRef(null),[t,n]=Q.useState(null),a=Q.useCallback(()=>{var t;n((null==(t=null==e?void 0:e.current)?void 0:t.getBoundingClientRect())||null)},[e]);return Q.useEffect(()=>(a(),C_._.addListener(a),window.addEventListener("resize",a),()=>{C_._.removeListener(a),window.removeEventListener("resize",a)}),[a]),[e,t,a]}function Cy({selectedNode:e,targetRect:t}){let n=(0,$.wA)(),a=(e=>{let t=e.parentNode;return(null==t?void 0:t.childrenNodes)??[e]})(e).map(t=>{let n=t?function({children:e}){return e.map(e=>({displayText:e.name,onMouseEnter:()=>eV.Uc(e.guid),onMouseExit:()=>eV.Uc(""),icon:Q.createElement(ej.Bf,{guid:e.guid,isMenuIcon:!0}),callback:()=>eV.tJ([e.guid])})).filter(CE)}({children:t.childrenNodes}):void 0;return t?{displayText:(null==t?void 0:t.name)??"",isChecked:t.guid===e.guid,onMouseEnter:()=>eV.Uc(t.guid),onMouseExit:()=>eV.Uc(""),icon:Q.createElement(ej.Bf,{guid:(null==t?void 0:t.guid)??"",isMenuIcon:!0}),callback:()=>eV.tJ([t.guid]),children:n&&n.length>0?n:void 0,callbackOnClickWithChildren:!0}:null}).filter(CE);return Q.createElement(aq.j,{showPoint:!1,items:a,onSelectItem:e=>{e.callback&&e.callback("",null,n)},parentRect:t,dispatch:n,displayAboveTarget:!0})}function Cb({nodeID:e}){let t=(0,$.wA)(),[n,a,r]=Cv(),l=(0,aX.U)(),i=(0,ae.eY)().get(e);if(!i)return null;let o=(null==l?void 0:l.type)===Ch,s="INSTANCE"===i.type||"SYMBOL"===i.type;return Q.createElement(Q.Fragment,null,o&&a&&Q.createElement(Cy,{selectedNode:i,targetRect:a}),Q.createElement("button",{className:"dev_handoff_breadcrumbs--pathElementSelected--w9aeS dev_handoff_breadcrumbs--pathElement--AKgt0",onClick:function(){r(),o||t(nP.j7({type:Ch,data:{hasOwnEscKeyHandler:!1}}))},ref:n,title:i.name},Q.createElement(ej.Bf,{guid:i.guid,className:s?"dev_handoff_breadcrumbs--layerIconPurple--Qit6B":"dev_handoff_breadcrumbs--layerIcon--jR8ti"}),i.name))}function CC({nodeID:e}){let t=(0,ae.eY)().get(e);return t?Q.createElement("button",{title:t.name,className:"dev_handoff_breadcrumbs--pathElement--AKgt0",onClick:()=>eV.tJ([t.guid]),onMouseEnter:()=>eV.Uc(t.guid),onMouseLeave:()=>eV.Uc("")},t.name):null}function Cw({nodeIDs:e}){let t=(0,$.wA)(),[n,a,r]=Cv(),l=(0,aX.U)(),i=(null==l?void 0:l.type)===Cg,o=(0,ae.eY)(),s=e.map(o.get).filter(n4.Vq),c=s.map(e=>({displayText:e.name,onMouseEnter:()=>eV.Uc(e.guid),onMouseExit:()=>eV.Uc(""),icon:Q.createElement(ej.Bf,{guid:e.guid,isMenuIcon:!0}),callback:()=>eV.tJ([e.guid])}));return Q.createElement(Q.Fragment,null,i&&a&&Q.createElement(aq.j,{showPoint:!1,items:c,onSelectItem:e=>{e.callback&&e.callback("",null,t)},parentRect:a,dispatch:t,displayAboveTarget:!0}),Q.createElement("button",{ref:n,className:"dev_handoff_breadcrumbs--pathElementCollapsed--uY2eU dev_handoff_breadcrumbs--pathElement--AKgt0",onClick:function(){r(),i||t(nP.j7({type:Cg,data:{hasOwnEscKeyHandler:!1}}))},title:(0,eO.t)("dev_handoff.breadcrumbs.hidden_nodes",{count:s.length})},(0,eO.t)("dev_handoff.breadcrumbs.ellipsis")))}let CT=Q.memo(()=>{let{selectedNodeID:e}=(0,ep.R)(e=>({selectedNodeID:Object.keys(e.mirror.sceneGraphSelection)[0]})),t=(0,eG.J2)(eU.Ez5.devHandoffState().currentNodeId),n=(0,c6.Fk)((e,t,n)=>{let a=e.get(t);return a?function(e){return e.length<=4?e:[e[0],e.slice(1,-2),e[e.length-2],e[e.length-1]]}([...function e(t,n){if(n.guid===t)return[];let a=n.parentNode;return a?[...e(t,a),a]:[]}(n,a),a]):[]},e,t),a=tN.qo.instance.get(e);return 0!==n.length&&a?Q.createElement("div",{className:"dev_handoff_breadcrumbs--container--BoCAA"},n.map((e,t)=>{let a=t===n.length-1,r=Q.createElement(eM.B,{svg:Cf.A,className:a?"dev_handoff_breadcrumbs--chevronIconSelected--NrpAP dev_handoff_breadcrumbs--chevronIcon--MAw4y":"dev_handoff_breadcrumbs--chevronIcon--MAw4y",height:"3px",width:"6px"});return Array.isArray(e)?Q.createElement(Q.Fragment,{key:e.map(e=>e.guid).join("-")},r," ",Q.createElement(Cw,{nodeIDs:e.map(e=>e.guid)})):a?Q.createElement(Q.Fragment,{key:e.guid},r," ",Q.createElement(Cb,{nodeID:e.guid})):Q.createElement(Q.Fragment,{key:e.guid},r," ",Q.createElement(CC,{nodeID:e.guid}))})):null});var Cx=n(232697),CN=n(134293),Ck=n(741951);function CS({isToolbarOpen:e}){let[t,n]=Q.useState(!1),a=Q.useRef(null),r=Q.useRef(null),l=Q.useRef(null),[i,o]=Q.useState(null),s=(0,eG.J2)(eU.Ez5.devHandoffState().currentNodeId),c=(0,eF.uQ)(),{inspectableRootNodeId:d,didSelectRow:u}=yi(s,c);Q.useEffect(()=>n(!1),[c]),(0,CN.L)(r,()=>{t&&n(!1)},!0);let m=Q.useCallback(()=>{n(!1)},[n]);return Q.createElement("div",{ref:r,className:"frame_picker--container--tkwaQ"},Q.createElement("button",{className:"frame_picker--trigger--ZPMqZ",ref:a,onClick:function(){var e;if(t)n(!1);else{let t=null==(e=a.current)?void 0:e.getBoundingClientRect();t&&(o(t),n(!0))}},"data-tooltip":(0,eO.t)("dev_handoff.tag.layers"),"data-tooltip-type":nO.Ib.TEXT,"data-tooltip-show-above":!0},Q.createElement(eM.B,{svg:Ck.A})),i&&Q.createElement(ho.Cf,{className:t?void 0:"frame_picker--closedDropdown--ynVzU",targetRect:i,displayAboveTarget:!0,type:ho.it.MATCH_BACKGROUND,disableDropdownScrollContainer:!0,propagateCloseClick:!0},Q.createElement("div",{ref:l,className:ea()("frame_picker--frames--vobWI",e&&"frame_picker--isToolbarOpen--i2EBR")},Q.createElement(ys,{onRowClick:m,didSelectRow:u,inspectableRootNodeId:d}))))}let CI="inspect_tabs--column--6BLEt",CA="inspect_tabs--settingImage--VEeXo",CP="inspect_tabs--codeContainer--G3I2n",CO="inspect_tabs--codeContent--HOypb",CL="inspect_tabs--codeBoxModelInline--o-8PU",CM="inspect_tabs--codeBoxModelSide--4N2rL";var CD=n(841822);let CR="DEV_HANDOFF_DEV_RESOURCE_DROPDOWN";function CF(e){return Q.createElement("div",{className:"inspect_tabs--setting--OTZN3"},Q.createElement("div",{className:"inspect_tabs--settingRow--qP9rB"},Q.createElement("div",{className:"inspect_tabs--settingLabel--Fr85N"},e.label),Q.createElement("button",{className:"inspect_tabs--settingLink--YT0SJ",onClick:e.onClick},Q.createElement(eO.Tx,{id:"dev_handoff.inspect_panel.open_setting"}))),Q.createElement("div",{className:"inspect_tabs--settingDescription--Fxbgh"},e.description))}function CB(){let e=(0,eF.VW)();return(0,sd.h)()?Q.createElement(yC,null):e?Q.createElement("div",{className:CP},Q.createElement("div",{className:CL},Q.createElement(bg,null)),Q.createElement("div",{className:CO},Q.createElement(eP.tH,{boundaryKey:"Figmadoc",fallback:eP.H4.NONE_I_KNOW_WHAT_IM_DOING},Q.createElement(of,null)),Q.createElement(bE.J,null),Q.createElement(yU,null),Q.createElement(aS,null),Q.createElement(y7.t,null),Q.createElement(s2,null),(0,eo.kc)().dt_lego_selection_styles&&Q.createElement(b1,null)),Q.createElement("div",{className:CM},Q.createElement(bg,{fillContainer:!0}))):Q.createElement(CU,null)}function CU(){return Q.createElement("div",{className:"inspect_tabs--codeEmpty--B2DYX"},Q.createElement("div",{className:CI},Q.createElement("img",{alt:"",className:CA,src:"https://static.figma.com/uploads/90580516d4d39519d44b86a2e591f4e576475013",onDragStart:e=>e.preventDefault()}),Q.createElement(CF,{label:(0,eO.t)("dev_handoff.inspect_panel.property_suggestions.title"),description:(0,eO.t)("dev_handoff.inspect_panel.property_suggestions.body"),onClick:a8.KQ})),Q.createElement("div",{className:CI},Q.createElement("img",{alt:"",className:CA,src:"https://static.figma.com/uploads/4b9430b030179277555a6fe2114ceffc0f49ed61",onDragStart:e=>e.preventDefault()}),Q.createElement(CF,{label:(0,eO.t)("dev_handoff.inspect_panel.block_suggestions.title"),description:(0,eO.t)("dev_handoff.inspect_panel.block_suggestions.body"),onClick:a8.lk})))}function CH(){return Q.createElement("div",{className:CP},Q.createElement("div",{className:CL},Q.createElement(bg,null)),Q.createElement("div",{className:CO},Q.createElement(bE.J,null),Q.createElement(y0,null),Q.createElement(aS,null),Q.createElement(y7.t,null),Q.createElement(s2,null),(0,eo.kc)().dt_lego_selection_styles&&Q.createElement(b1,null)),Q.createElement("div",{className:CM},Q.createElement(bg,{fillContainer:!0})))}function CV(){return Q.createElement("div",{className:"inspect_tabs--assetsContainer--ETjja"},Q.createElement(be.L,null),Q.createElement(bt.L,null))}function CG(){return Q.createElement("div",{className:"inspect_tabs--componentsContainer--ERYGT"},Q.createElement("div",{className:"inspect_tabs--componentsContent--qXnwd"},Q.createElement(iV,null)),Q.createElement("div",{className:"inspect_tabs--componentsPreview--79zEW"},Q.createElement(ij,null)))}function CK({setActiveTabId:e}){let t=(0,$.wA)(),n=(0,aX.U)(),a=Q.useRef(null),[r,l]=(0,ef.fp)(bz),i=(0,t5.U)(),o=(0,lk.Nf)()??"",s=(0,ae.eY)().get(o),c=document.getElementById("dev-handoff-inspect-panel"),d=(null==n?void 0:n.type)===CR;return Q.createElement(Q.Fragment,null,Q.createElement("div",{ref:a},Q.createElement(aJ.YW,{svg:CD.A,onClick:function(){d?t(nP.oB()):t(nP.j7({type:CR}))},selected:d,"data-tooltip":(0,eO.t)("dev_handoff.add_dev_resource"),"data-tooltip-type":nO.Ib.TEXT})),d&&a.current&&c&&(0,aP.createPortal)(Q.createElement(aq.j,{items:[{displayText:"Add link to code file...",action:"add_file_link"},{displayText:"Add link to dev resource... ",action:"add_link"}],onSelectItem:t=>{switch(t.action){case"add_file_link":e(tj._.DEV_RESOURCES),i("Dev Handoff Related Links Click Code File Link",{nodeId:o,nodeType:null==s?void 0:s.type,source:"web"}),(0,a8.qE)();break;case"add_link":e(tj._.DEV_RESOURCES),l(!0)}},dispatch:t,parentRect:a.current.getBoundingClientRect(),showPoint:!1}),c))}function CW(){let[e,t]=(0,ef.fp)(tj.H),n=(0,sZ.LS)(),a=(0,eF.NM)(),r=(0,lk.ro)(),l=(0,ef.md)(aF.be),i=a?[{id:tj._.ASSETS,title:(0,eO.t)("dev_handoff.assets"),Component:CV,recordingKey:"extensionAssetsTab"}]:[{id:tj._.PRIMARY,title:(0,eO.t)("inspect_panel.code.code"),Component:CB,recordingKey:"extensionCodeTab"}];return n&&(i.push({id:tj._.PROPERTIES,title:(0,eO.t)("fullscreen.properties_panel.properties"),Component:CH,recordingKey:"extensionPropertiesTab"}),r&&i.push({id:tj._.COMPONENT,title:(0,eO.t)("dev_handoff.inspect_panel.component"),Component:CG,recordingKey:"extensionComponentTab"}),i.push({id:tj._.DEV_RESOURCES,title:(0,eO.t)("dev_handoff.developer_related_links.links"),Component:bY,recordingKey:"extensionRelatedLinksTab"}),i.push({id:tj._.ASSETS,title:(0,eO.t)("dev_handoff.assets"),Component:CV,recordingKey:"extensionAssetsTab"})),i.push({id:tj._.PLUGIN,title:(0,eO.t)("dev_handoff.tab.plugins"),Component:yN,recordingKey:"extensionPluginsTab"}),Q.useEffect(()=>{i.find(t=>t.id===e)||t(tj._.PRIMARY)},[e,t,n]),Q.createElement(Q.Fragment,null,Q.createElement("div",{className:"inspect_tabs--tabsBar--nbu1a"},Q.createElement(ab.P,{innerClassName:"inspect_tabs--tabs--w8XOI",minContentWidth:100},i.map(n=>Q.createElement(aV,{key:n.title,text:n.title,isActive:e===n.id,recordingKey:n.recordingKey,onClick:()=>{t(n.id)}}))),Q.createElement("div",{className:"inspect_tabs--rightButtons--HeXhW"},l&&Q.createElement(aO.Jn,{className:tw.cx.flexShrink0.$,onClick:()=>{(0,aR.wY)()}}),Q.createElement(oE,null),Q.createElement(CK,{setActiveTabId:t}))),i.map(t=>Q.createElement("div",{key:t.title,className:"inspect_tabs--activeTabContainer--LBYjQ",style:{display:e===t.id?void 0:"none"}},Q.createElement(t.Component,null))))}let Cz="extension_bottom_panel--buttons--itG9x";var Cj=n(523468),CY=n(87071);let CZ=(0,rT.jz)(uT.YI7),CX=()=>.75*window.innerHeight,Cq=(0,rT.jz)(uT.Qhc);function CJ(){let[e,t]=(0,ew.Vc)("extension_bottom_panel_expanded",!0),[n,a]=(0,ef.fp)(Cx.g),[r,l]=Q.useState(!1),i=(0,eF.VW)(),o=(0,eG.J2)(eU.Ez5.devHandoffState().focusMode),s=(0,eG.J2)((0,eH.UK)().devHandoffInspectSplitPosition);Q.useEffect(()=>{let t;t=e?n:CZ,(0,eH.UK)().devHandoffInspectSplitPosition.set(t)},[e]);let c=Q.useCallback(()=>{l(!0)},[]),d=Q.useCallback(e=>{if(r){var t;let n=(t=window.innerHeight-e.clientY,Math.max(CZ,Math.min(CX(),t||0)));n!==s&&((0,eH.UK)().devHandoffInspectSplitPosition.set(n),a(n))}},[r,s,a]),u=Q.useCallback(()=>{l(!1)},[]);return Q.useEffect(()=>(document.addEventListener("mousemove",d),document.addEventListener("mouseup",u),()=>{document.removeEventListener("mousemove",d),document.removeEventListener("mouseup",u)})),Q.createElement("div",{id:"dev-handoff-inspect-panel",className:ea()("vscode","extension_bottom_panel--container--zaRdX",eK.Dm,e&&"extension_bottom_panel--isOpen--m5UfA"),style:{height:`${s}px`}},o?Q.createElement("div",{className:ea()(Cz,"extension_bottom_panel--buttonsNewUx--qjtmo")},Q.createElement(Cp,null)):Q.createElement("div",{className:ea()(Cz)},Q.createElement(yh,{floating:!1})),Q.createElement("div",{className:"extension_bottom_panel--header--ZmzTG"},e&&Q.createElement("div",{className:"extension_bottom_panel--edge--cuoAZ",onMouseDown:c,onDoubleClick:()=>{(0,eH.UK)().devHandoffInspectSplitPosition.set(Cq+CZ),a(Cq+CZ)},role:"none"}),Q.createElement(CS,{isToolbarOpen:e}),i&&Q.createElement(Q.Fragment,null,Q.createElement(CT,null)),Q.createElement("div",{className:ea()("extension_bottom_panel--headerRightButtons--qVDj-",tw.cx.pt4.$)},Q.createElement(a0,null),Q.createElement("button",{onClick:function(){t(!e)},style:{width:"32px"}},Q.createElement(eM.B,{"data-tooltip-type":nO.Ib.TEXT,"data-tooltip-show-above":!0,"data-tooltip":e?(0,eO.t)("dev_handoff.vscode.inspect_panel.hide_inspect_tooltip"):(0,eO.t)("dev_handoff.vscode.inspect_panel.show_inspect_tooltip"),svg:e?CY.A:Cj.A,autosize:!0})))),Q.createElement("div",{className:"extension_bottom_panel--transitionContainer--5UlLL",style:{maxHeight:`${s-CZ}px`}},Q.createElement(CW,null)))}var CQ=n(990376);function C$(e){return Q.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},Q.createElement("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M13 5h5a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H6a1 1 0 0 1-1-1v-8h7a1 1 0 0 0 1-1V5Zm-1 0H6a1 1 0 0 0-1 1v3h7V5Zm0-1h6a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h6Z",clipRule:"evenodd"}))}function C0(e){return Q.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},Q.createElement("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M7.5 4a.5.5 0 0 0-.5.5V7H4.5a.5.5 0 0 0 0 1H7v8H4.5a.5.5 0 0 0 0 1H7v2.5a.5.5 0 0 0 1 0V17h8v2.5a.5.5 0 0 0 1 0V17h2.5a.5.5 0 0 0 0-1H17V8h2.5a.5.5 0 0 0 0-1H17V4.5a.5.5 0 0 0-1 0V7H8V4.5a.5.5 0 0 0-.5-.5ZM16 8H8v8h8V8Z",clipRule:"evenodd"}))}var C1=n(326331),C2=n(414270);function C5({nodeId:e,sourceForLogging:t}){let n=(0,$.wA)(),a=(0,c6.Fk)(t=>t.get(e),e),r=Q.useRef(null),l=(0,aX.U)(),i=`DEV_HANDOFF_STATUS_DROPDOWN_${e}`,o=(null==l?void 0:l.type)===i;if(!a)return null;let s=a.getStatusInfo().status;return Q.createElement("div",null,Q.createElement("button",{className:ea()("status_dropdown--statusButton--ii6V8 text--fontPos11--2LvXf text--_fontBase--QdLsd",{"status_dropdown--ready--r-qJV":s===eU.zIx.BUILD,"status_dropdown--completed--RjlAw":s===eU.zIx.COMPLETED}),ref:r,onClick:function(){o||n(nP.j7({type:i,data:{hasOwnEscKeyHandler:!1}}))}},s===eU.zIx.BUILD?Q.createElement(Q.Fragment,null,Q.createElement(eM.B,{className:"status_dropdown--readyIcon--HDjig",svg:o$.A}),Q.createElement(eO.Tx,{id:"dev_handoff.status.ready_for_dev"})):s===eU.zIx.COMPLETED?Q.createElement(Q.Fragment,null,Q.createElement(eM.B,{className:"status_dropdown--completedIcon--EvgqE",svg:C2.A}),"Dev complete"):Q.createElement("span",{className:"status_dropdown--noStatus--Jp-F-"},"-"),Q.createElement(C1.r,{className:ea()({"status_dropdown--readyChevron--5fx2l":s===eU.zIx.BUILD})})),o&&r.current&&Q.createElement(aq.j,{items:[{displayText:(0,eO.t)("dev_handoff.status.ready_for_dev"),args:{value:eU.zIx.BUILD},isChecked:s===eU.zIx.BUILD},{displayText:"Dev complete",args:{value:eU.zIx.COMPLETED},isChecked:s===eU.zIx.COMPLETED},{displayText:"",separator:!0},{displayText:(0,eO.t)("dev_handoff.status.remove_status"),args:{value:eU.zIx.NONE}}],onSelectItem:function(n){switch(n.args.value){case eU.zIx.BUILD:aZ.z4.setNodesReady(!0,[e],`${t}-status-dropdown`,null);break;case eU.zIx.COMPLETED:aZ.z4.setNodesCompleted([e],`${t}-status-dropdown`);break;case eU.zIx.NONE:aZ.z4.setNodesReady(!1,[e],`${t}-status-dropdown`,null)}},showPoint:!1,dispatch:n,parentRect:r.current.getBoundingClientRect()}))}var C4=n(748161),C3=n(832938);function C6(){let e=(0,$.wA)(),t=(0,eH.UX)(),n=(0,c_.hA)(),a=(0,c_.n4)(),r=(0,c6.Fk)((e,t)=>t?e.get(t):null,n),l=(0,$.d4)(e=>(0,sZ.$A)(e.selectedView)?{...e.selectedView,devModeFocusId:void 0}:e.selectedView),i=(0,$.d4)(e=>(0,sZ.$A)(e.selectedView)?{...e.selectedView,devModeFocusId:void 0,showOverview:!0}:e.selectedView),o=(0,$.d4)(e=>(0,cp.Np)(e,i));return((0,ts.h)(()=>{n&&eU.w3z.focusOnNode(n,!1)}),n&&r)?Q.createElement("div",{className:"focus_canvas_ui--container--YwKdJ",style:{paddingRight:t}},Q.createElement("div",{className:"focus_canvas_ui--background--jKiDi",style:{background:a}}),Q.createElement("div",{className:"focus_canvas_ui--header--gxex-"},Q.createElement("a",{className:"focus_canvas_ui--backLink--oBW-6",onClick:function(t){t.preventDefault(),e(nP.$T(i))},href:o},Q.createElement(fA.C,null)," Back"),Q.createElement("div",{className:"focus_canvas_ui--nodeName--kuQ54"},Q.createElement("span",{className:"focus_canvas_ui--devSpecBreadcrumb--e0m8B"},Q.createElement(eM.B,{svg:C4.A})," Dev spec"),Q.createElement("span",{className:"focus_canvas_ui--breadcrumbSeparator--DNK9a"},"/"),r.isSection?Q.createElement(C$,null):Q.createElement(C0,null)," ",Q.createElement("span",{className:"focus_canvas_ui--nodeNameLabel--f7DnW"},r.name)),Q.createElement(C5,{nodeId:n,sourceForLogging:"focus-ui"}),Q.createElement("button",{className:"focus_canvas_ui--closeButton--UcNqR",onClick:function(t){t.preventDefault(),e(nP.$T(l))}},Q.createElement(eM.B,{svg:C3.A}))),Q.createElement("div",{className:"focus_canvas_ui--viewportContainer--E-aVJ"})):null}function C7(){let e=(0,ti._I)(),t=(0,ae.aV)(),n=(0,$.d4)(e=>e.mirror.appModel.showUi),a=(0,at.iZ)(),r=(0,$.wA)();(0,Er.X_)(),(0,En.z)({topLevelMode:cl.lyf.DEV_HANDOFF,eventName:"Dev Handoff Selection Changed"});let l=(0,t_.tS)()??"";return((0,Q.useEffect)(()=>{let e=()=>(0,Ea.s2)({userID:(null==a?void 0:a.id)??"",openFileKey:l});return e(),e},[e,l,null==a?void 0:a.id]),(0,Q.useEffect)(()=>{var e;null==(e=El.s.enrollUserInStatusChangeXP({fileKey:l}))||e.then(e=>{var t,n;(null==(n=null==(t=e.data)?void 0:t.meta)?void 0:n.newEnrollment)&&r(Et.jK({userId:(null==a?void 0:a.id)??"",fileKey:l}))})},[l,null==a?void 0:a.id,r]),t||!n)?null:e?Q.createElement(C9,null):Q.createElement(Ee,null)}function C8(){return!function(){let e=(0,c_.hA)(),t=(0,$.wA)(),n=(0,ae.aV)(),a=(0,$.d4)(e=>e.selectedView.compareChangesVersionId),r=(0,n7.VI)(),l=(0,n7.dF)()??r,i=(0,no.ei)(null==l?void 0:l.id),o=(0,n3.i)(l),{versions:s,versionsQueryLoaded:c}=(0,ru.DS)(null==l?void 0:l.id),d=!c||0===s.length||!i,u=(0,$.d4)(e=>{var t;return(null==(t=e.modalShown)?void 0:t.type)===lc.type}),m=l_((null==l?void 0:l.id)??null,"cc_version_id_url");Q.useEffect(()=>{a&&!n&&c&&!u&&(o&&!d?m():le(void 0,t,!1))},[a,t,n,u,d,o,m,c,e])}(),null}let C9=Q.memo(function(){Q.useEffect(()=>by.K,[]);let e=Q.useMemo(()=>aZ.z4.getIsExtension(),[]),t=(0,aD.GS)(),n=(0,c_.l7)(),a=!!(0,c_.hA)()&&!n;Q.useEffect(()=>{(0,a6.px)().prepareVmIfNeeded()},[]),(0,CQ.W)(1700);let r=(0,CQ.e)();return Q.createElement(Q.Fragment,null,e?Q.createElement(CJ,null):Q.createElement(Q.Fragment,null,r&&Q.createElement(yh,null),a&&Q.createElement(C6,null),!a&&Q.createElement("div",{className:"devHandoffLeftPanel"},Q.createElement(tQ,null,Q.createElement(EH,null),Q.createElement(tJ.$B,null,t&&Q.createElement(EP,null),n?Q.createElement(wt,null):Q.createElement(we,null)))),!n&&Q.createElement(Q.Fragment,null,Q.createElement(Co,null),Q.createElement(Ei.p,null,Q.createElement(vG,null)),Q.createElement(Ei.p,null,Q.createElement(tK,null)),Q.createElement(Ei.p,null,Q.createElement(E_,null))),Q.createElement(C8,null)),Q.createElement(g$,null))});function we(){let e=(0,$.d4)(e=>e.mirror.appModel.currentPage),t=(0,eG.J2)(cl.Ez5.uiState().showCanvasSearch);return Q.createElement(Q.Fragment,null,t?Q.createElement(hh.Provider,{value:!1},Q.createElement(hX,{showFilter:!0})):Q.createElement(yc,{key:e}))}function wt(){let e=(0,$.d4)(e=>e.mirror.appModel.currentPage);return Q.createElement(yc,{key:e})}var wn=n(43507),wa=n(77032),wr=n(644511),wl=n(142773),wi=n(551925),wo=n(639246),ws=n(836353),wc=n(423939),wd=n(900721),wu=n(358835),wm=n(254673),wp=n(419395),w_=n(479422),wf=n(74692),wh=n(528516),wg=n(397e3),wE=n(315882);class wv{static getCanvasColorSpace(e={}){var t;let n=(0,wE.dX)("fullscreen"),a=null==(t=null==n?void 0:n.getContext("webgl"))?void 0:t.drawingBufferColorSpace;if("srgb"===a);else if("display-p3"===a)return e.returnString?eU.RYP[eU.RYP.DISPLAY_P3]:eU.RYP.DISPLAY_P3;return e.returnString?eU.RYP[eU.RYP.SRGB]:eU.RYP.SRGB}static setCanvasColorSpace(e){let t=(0,wE.dX)("fullscreen"),n=null==t?void 0:t.getContext("webgl");"drawingBufferColorSpace"in n&&(n.drawingBufferColorSpace=e)}static getDocumentColorProfile(e={}){if(void 0===eU.H4l)throw Error("ColorManagementStateJs is not defined");return e.returnString?eU.ywP[eU.H4l.documentColorProfile().getCopy()]:eU.H4l.documentColorProfile().getCopy()}static async debugImagesFromSelection(){async function e(e){for(let t of["image/png","image/jpeg","image/heic"])try{return await wg.EC.decodeAsync(e,t,0,0,!0)}catch(e){}return null}let t=(0,wh.D)();for(let n of t.currentPage.selection){for(let a=0;a<n.fills.length;a++){let r=n.fills[a];if("IMAGE"===r.type){let l=t.getImageByHash(r.imageHash);if(!l)continue;let i=await l.getBytesAsync(),o=await e(i);if(o){let e={id:n.id,type:"fill",index:a,imageHash:r.imageHash,colorProfile:eU.RYP[o.colorProfile],bytes:i};(0,ar.ED)("ColorManagementDebug","images",e,{logToConsole:eU.NUh.ALWAYS})}}}for(let a=0;a<n.strokes.length;a++){let r=n.strokes[a];if("IMAGE"===r.type){let l=t.getImageByHash(r.imageHash);if(!l)continue;let i=await l.getBytesAsync(),o=await e(i);if(o){let e={id:n.id,type:"stroke",index:a,imageHash:r.imageHash,colorProfile:eU.RYP[o.colorProfile],bytes:i};(0,ar.ED)("ColorManagementDebug","images",e,{logToConsole:eU.NUh.ALWAYS})}}}}}}function wy(){return Q.useEffect(()=>((0,eo.kc)().ee_color_management_debug&&(window.colorManagementDebug=wv),()=>{"colorManagementDebug"in window&&delete window.colorManagementDebug}),[]),null}var wb=n(623951),wC=n(439991),ww=n(374412),wT=n(615601),wx=n(273875),wN=n(934068),wk=n(42821),wS=n(856407),wI=n(226190),wA=n(429751),wP=n(999231),wO=n(942632);let wL=(0,cd.s)((e,t)=>{wk.eD.updateFullscreenMenuState({pluginMenuData:e,widgetMenuData:t})},250);var wM=n(857712),wD=n(210573),wR=n(11257),wF=n(377574),wB=n(571930),wU=n(615581);let wH="keyboard-layout-preference",wV=(e,t,n)=>{t&&e(wF.FU({tab:t})),n||lT.Y5.triggerAction("toggle-keyboard-shortcuts")},wG=(e,t,n,a)=>{e(tB.b({keyboard_manual_supported_bell:!0})),e(eL.F.enqueue({message:(0,eO.t)("keyboard_settings.new_keyboard_name_keyboard_shortcuts_are_available",{newKeyboardName:(0,wR.As)(t)}),button:{text:(0,eO.t)("keyboard_settings.update_keyboard_shortcuts"),action:()=>wV(e,"layout",a)},type:wH,onDismiss:()=>{e(tB.b({keyboard_manual_supported_bell:!0}))},timeoutOverride:2e4})),(0,wR.CZ)({layout:n,detectedLayout:t,eventName:"manual_supported_keyboard_detected"})},wK=(e,t,n)=>{e(tB.b({keyboard_generic_supported_first_bell:!0})),e(eL.F.enqueue({message:(0,eO.t)("keyboard_settings.new_keyboard_name_keyboard_shortcuts_are_now_available",{newKeyboardName:(0,wR.As)(t)}),button:{text:(0,eO.t)("keyboard_settings.enable_and_show_new_shortcuts"),action:()=>{wV(e,"layout",n),(0,wR.rd)({layout:t})}},type:wH,onDismiss:()=>{}})),(0,wR.CZ)({layout:eU.aTn.UNKNOWN,detectedLayout:t,eventName:"first_generic_detected_supported_keyboard"})};async function wW(e,t){if(!wk.eD)return null;let n=await wk.eD.getKeyboardLayout();if(!n)return null;if(t===n)return n;let a=(0,wU.pB)(n),r=(0,wR.v7)();return a===r||e(a,r,n,null!=t),n}async function wz(e,t){if(!window.isSecureContext||window.top!==window.self)return null;let n=navigator.keyboard;if(!n||!n.getLayoutMap)return null;let a=await n.getLayoutMap();if(function(e,t){for(let[n,a]of e)if((null==t?void 0:t.get(n))!==a)return!1;return!0}(a,t))return t;let{layoutJSON:r,detectedLayoutsWeb:l}=(0,wB.$$)(a),i=(0,wB.ZN)({layoutJSON:r,detectedLayouts:l,desktopLayout:null}),o=(0,wR.v7)();return i===o||e(i,o,JSON.stringify(r),null!=t),a}var wj=n(451345),wY=n(487337),wZ=n(386382),wX=n(193512),wq=n(151244),wJ=n(541242),wQ=n(877680),w$=n(241095),w0=n(428748),w1=n(62369),w2=((v=w2||{}).NOT_INITIALIZED="not_initialized",v.ACTIVE_FIRST_TIME="active_first_time",v.ACTIVE_AFTER_IDLE="active_after_idle",v.IDLE_DUE_TO_INACTIVITY="idle_due_to_inactivity",v.IDLE_DUE_TO_TAB_SWITCH="idle_due_to_tab_switch",v);let w5=(0,nf.eU)(w2.NOT_INITIALIZED),w4=(0,gp.bt)(e=>{var t;return{state:e,fileKey:null==(t=e.openFile)?void 0:t.key}}),w3=[w2.ACTIVE_AFTER_IDLE,w2.ACTIVE_FIRST_TIME],w6=(0,nf.eU)(null,(e,t,n)=>{let{state:a,fileKey:r}=e(w4),l=e(w5);if((l&&w3.includes(l)?"start":"end")!=(n&&w3.includes(n)?"start":"end")){let e="";switch(n){case w2.ACTIVE_AFTER_IDLE:case w2.ACTIVE_FIRST_TIME:e="active";break;case w2.IDLE_DUE_TO_INACTIVITY:case w2.IDLE_DUE_TO_TAB_SWITCH:e="inactive";break;default:e="non-initialized"}(0,cB.ds)("active_time_spent_event",r,a,{currentState:e,activeState:n},{forwardToDatadog:!0,batchRequest:!1})}t(w5,n)}),w7=["mousemove","mousedown","keydown","touchstart","touchmove","wheel"];var w8=n(105233),w9=n(642068),Te=n(71825),Tt=n(485463),Tn=n(256296),Ta=n(785087),Tr=n(886651);let Tl=0;class Ti{constructor(){this.work=()=>{let e=this.jobs.shift();if(e)try{let t=e.callback();e.resolve(t)}catch(t){e.reject(t)}},this.jobs=[]}isDone(){return 0===this.numJobs()}numJobs(){return this.jobs.length}cancelJobs(e){this.jobs=this.jobs.filter(t=>-1===e.indexOf(t.jobId))}queueJob(e){let t,n;let a=new Promise((e,a)=>{t=e,n=a}),r=++Tl;return this.jobs.push({jobId:r,resolve:t,reject:n,callback:e}),{promise:a,jobId:r}}}let To={requestAnimationFrame:e=>requestAnimationFrame(e),computeElapsedTime:e=>{let t=Date.now();return e(),Date.now()-t}},Ts=new class{constructor(e={}){this.tick=()=>{if(!this.isTickScheduled)throw Error("wat, how did tick() get called if we're not ticking?");let e=0,t=0;for(;t<this.msPerTick&&!this.queuedWorker.isDone();)t+=this.utils.computeElapsedTime(this.queuedWorker.work),e++;this.debug&&console.log(`did ${e} jobs in ${t} ms`),this.isTickScheduled=!1,this.queuedWorker.isDone()||this.requestTick()},this.requestTick=()=>{this.isTickScheduled||(this.isTickScheduled=!0,this.utils.requestAnimationFrame(this.tick))},this.numJobs=()=>this.queuedWorker.numJobs(),this.queueJob=e=>{let{promise:t,jobId:n}=this.queuedWorker.queueJob(e);return this.requestTick(),{promise:t,jobId:n}},this.queuedWorker=new Ti,this.isTickScheduled=!1,this.msPerTick=e.msPerTick||6,this.utils=e.utils||To,this.debug=!0===e.debug}cancelJobs(e){this.queuedWorker.cancelJobs(e)}}({debug:!1});var Tc=n(332332),Td=n(867775),Tu=n(26409);let Tm="export_picker--header--Wz6np",Tp="export_picker--labelWithoutCheckbox--3zcNc export_picker--label--43URE",T_="export_picker--button--PiGDo";var Tf=n(957412);let Th=(0,rT.hG)(uT.zK5);function Tg(){let e=(0,t_.q5)(),t=(0,$.d4)(e=>e.exportableItems),n=(0,$.d4)(e=>e.dropdownShown),a=!!e&&(0,rt.Pe)(e),r=(0,tb.Av)(),l=(0,$.d4)(e=>e.saveAsState),i=(0,$.d4)(e=>e.mirror.appModel.currentPage),o=(0,$.wA)(),s=new lB.Mi(window.innerWidth-Th,r+12);return Q.useEffect(()=>{o((0,Td.HR)())},[o]),Q.createElement(dn.vx,{title:(0,eO.t)("fullscreen.properties_panel.export"),headerSize:"small",initialPosition:s,onClose:()=>{o(cM.XE())},dragHeaderOnly:!0,headerClassName:"export_picker--modalHeader--f3fKx"},Q.createElement("div",{className:"export_picker--exportModalContainer---vmI7"},Q.createElement(Ty,{exports:t,isCopyExportRestricted:a,width:Th,dispatch:o,dropdownShown:n,saveAsState:l,currentPage:i})))}let TE=new EZ.mz;function Tv({nodeID:e,title:t,filename:n,exportSetting:a,colorProfile:r=eU.RYP.SRGB,...l}){let[i,o]=(0,Q.useState)({size:"",warning:"",warningTooltip:""}),[s,c]=(0,Q.useState)("");(0,Q.useEffect)(()=>{let l={guid:e,title:t,filename:n,exportSetting:a},i=eU.glU.getExportWarningAndSize(l);if(i){let{size:e,warning:t,warningTooltip:n}=i;o({size:e,warning:t,warningTooltip:n})}else console.error("Failed to export",l);let s=!!a.contentsOnly,d=(0,lh.gl)(a)?r:(0,Tc.A)([a],r),{jobId:u}=Ts.queueJob(()=>{let t=lW._G(new lB.Mi(32,32),e,s),n="";t&&t.pixels&&t.pixelSize&&t.displaySize&&(n=lW.Pv(t.pixels,t.pixelSize,d)),c(n)});return()=>Ts.cancelJobs([u])},[r,a,n,e,t]);let{onToggleChecked:d,isChecked:u,isDisabled:m}=l,{imageType:p}=a,_=l.warning??i.warning,f=l.warningTooltip??i.warningTooltip,h=(0,Q.useId)(),g=`${h}-input`,E=`${h}-desc`;return Q.createElement("div",{className:"export_picker--row--lVRtp"},Q.createElement("label",{htmlFor:g,className:"export_picker--label--43URE"},Q.createElement(Te.W,{id:g,checked:u,onChange:d,disabled:m,"aria-describedby":E}),Q.createElement("div",{className:"export_picker--thumbContainer--xwXyl",onClick:t=>{t.preventDefault(),eU.glU.panToNode(e)},"aria-hidden":"true"},!!s&&Q.createElement("img",{src:s,className:"export_picker--thumb--pKbcx","data-tooltip-type":nO.Ib.TEXT,"data-tooltip":n,alt:""})),Q.createElement("div",{className:"export_picker--nameInfo--03piR export_picker--twoRows--PAHTA"},Q.createElement("div",{className:"export_picker--name--HuhHU ellipsis--ellipsis--Tjyfa"},t),_&&Q.createElement("div",{className:"export_picker--warningRow--PMwtO"},Q.createElement(eM.B,{className:"export_picker--warningIcon--fgSRz",svg:Tf.A,"data-tooltip-type":nO.Ib.TEXT,"data-tooltip":f}),Q.createElement("span",{className:"export_picker--warning--qpraF ellipsis--ellipsis--Tjyfa"},_)))),Q.createElement("div",{className:"export_picker--settingsInfo--H9DJ1 export_picker--twoRows--PAHTA",id:E},Q.createElement("div",null,TE.format(a.constraint)," ",p),Q.createElement("div",null,i.size)))}class Ty extends Q.PureComponent{constructor(){super(...arguments),this.state={downloadStarted:!1,exportingStarted:!1,exportingProgress:0,exportingTotal:0,exportingJobIds:[]},this.onCancel=()=>{this.props.dispatch(cM.XE())},this.onExport=()=>{if(this.props.isCopyExportRestricted||((0,er.sx)("Export Picker Exported"),this.state.downloadStarted||this.state.exportingStarted||this.isExporting()))return;let e=this.props.exports.items.filter(e=>this.props.exports.checked[e.itemID]);if(0===e.length)return;let t=[this.props.currentPage];lG.xY.includeOutsideContents(e.map(e=>e.exportSetting))||(t=e.map(e=>e.nodeID)),this.setState({downloadStarted:!0}),(0,Tu.Dc)(Tu.hV.Export,this.props.saveAsState,this.props.dispatch,()=>{this.setState({exportingStarted:!0,downloadStarted:!1}),this.exportItemsWithFullscreen(e)},t,"export-picker")},this.exportItemsWithFullscreen=e=>{let t=e.map(e=>({guid:e.nodeID,title:e.title,filename:e.filename,exportSetting:e.exportSetting})),n=0;eU.glU.clearExportedItems();let a=t.map(e=>Ts.queueJob(()=>eU.glU.exportItem(e))),r=a.map(e=>e.promise);r.forEach(e=>e.then(()=>this.setState({exportingProgress:++n}))),this.setState({exportingProgress:0,exportingTotal:t.length,exportingJobIds:a.map(e=>e.jobId)}),Promise.all(r).then(()=>{this.setState({exportingJobIds:[]}),eU.glU.saveExportedItems(),this.props.dispatch(cM.XE()),this.props.dispatch(Ta.rg())})},this.setAllChecked=e=>{this.props.exports.items.forEach((t,n)=>{this.props.dispatch(Tr.G({itemID:t.itemID,checked:e}))})},this.setChecked=(e,t)=>{this.props.dispatch(Tr.G({itemID:e.itemID,checked:t}))},this.isChecked=e=>this.props.exports.checked[e.itemID]}isExporting(){return this.state.exportingJobIds&&this.state.exportingJobIds.length>0}componentWillUnmount(){this.isExporting()&&Ts.cancelJobs(this.state.exportingJobIds)}renderHeader(){if(this.isExporting())return Q.createElement("div",{className:Tm},Q.createElement("label",{className:Tp},Q.createElement(eO.Tx,{id:"fullscreen.export.preparing_exporting_progress_of_exporting_total",exportingProgress:this.state.exportingProgress,exportingTotal:this.state.exportingTotal})),Q.createElement(nc.nR,{className:T_,onClick:this.onCancel},Q.createElement(eO.Tx,{id:"fullscreen.export.cancel"})));if(this.state.exportingStarted||!this.props.saveAsState.startTime&&this.state.downloadStarted)return Q.createElement("div",{className:Tm},Q.createElement("label",{className:Tp},Q.createElement(eO.Tx,{id:"fullscreen.export.exporting"})));if(this.state.downloadStarted){if(!(this.props.saveAsState.totalImagesToDownload>0))return Q.createElement("div",{className:Tm},Q.createElement("label",{className:Tp},Q.createElement(eO.Tx,{id:"fullscreen.export.downloading"})));{let e=Math.min(this.props.saveAsState.totalImagesToDownload,this.props.saveAsState.totalImagesToDownload-this.props.saveAsState.remainingImagesToDownload);return Q.createElement("div",{className:Tm},Q.createElement("label",{className:Tp},Q.createElement(eO.Tx,{id:"fullscreen.export.downloading_progress",downloadingProgress:e,downloadingTotal:this.props.saveAsState.totalImagesToDownload})),Q.createElement(nc.nR,{className:T_,onClick:this.onCancel},Q.createElement(eO.Tx,{id:"fullscreen.export.cancel"})))}}{let e=this.props.exports.items||[],t=e.filter(this.isChecked).length,n=e.length,a=n===t;return Q.createElement("div",{className:Tm},Q.createElement(Tt.S,{checked:a,mixed:!a&&t>0,onChange:()=>this.setAllChecked(!a),label:Q.createElement(Tn.J,null,Q.createElement(eO.Tx,{id:"fullscreen.export.num_selected_of_total_selected",numSelected:t,total:n}))}),Q.createElement(nc.nR,{className:ea()(T_,"export_picker--flexRight--PFS7g"),disabled:!t,onClick:this.onExport,autoFocus:!0},Q.createElement(eO.Tx,{id:"fullscreen.export.export"})))}}render(){let e=this.props.exports.items&&this.props.exports.items.length>0;return Q.createElement("div",null,Q.createElement("div",{className:"export_picker--modal--FoIpV"},this.renderHeader(),Q.createElement(ab.P,{width:this.props.width,className:"export_picker--scrollContainer--F9sI6"},!e&&Q.createElement("div",{className:"export_picker--emptyModal--x2aqt"},Q.createElement(eO.Tx,{id:"fullscreen.export.no_selected_layers_with_export"})),Q.createElement(wb.ZH,null,({documentExportColorProfile:t})=>e&&this.props.exports.items.map((e,n)=>Q.createElement(Tv,{key:n,colorProfile:t,isDisabled:this.isExporting(),isChecked:this.isChecked(e),onToggleChecked:()=>this.setChecked(e,!this.isChecked(e)),...e}))))))}}Ty.displayName="ExportPicker";var Tb=n(922002),TC=n(247686),Tw=n(102346),TT=n(327092),Tx=n(536825),TN=n(511626),Tk=n(399123),TS=n(696037);function TI(e){return e.args&&e.args.plugin_search_string?e.args.plugin_search_string:(0,TC.A)(e.displayForQuickCommand?e.displayForQuickCommand:(0,TS.Dz)(e),e.args)}var TA=n(709307),TP=n(95816),TO=n(177240),TL=n(725554),TM=n(165798);function TD(e){return Q.createElement("div",null,(0,TS.Dz)(e.token.content))}function TR(e){let t=(0,$.d4)(e=>e.mirror.appModel.keyboardShortcuts);return Q.createElement("div",{style:tT.sx.colorText.px14.$,className:e.isSelected?"action_autocomplete_input--rowSelected--62Uvp autocomplete_permissions--contactRowSelected--xYJKX autocomplete_permissions--contactRow--DRMiv":"action_autocomplete_input--row--HRsbZ autocomplete_permissions--contactRow--DRMiv"},Q.createElement(nk.Y,null,Q.createElement(aL.E,null,TI(e.searchResult)),Q.createElement(nk.M,null),Q.createElement(aL.E,null,e.searchResult.shortcutText??(0,yu.c1)(t,(0,TS.Dz)(e.searchResult)))))}function TF({onAutocompleteChange:e}){let t=(0,TP.uj)(),n=(0,TP.c4)(),a=(0,$.d4)(e=>e.mirror.appModel),r=(0,$.d4)(e=>e.selectedView),l=(0,$.d4)(e=>{var t;return null==(t=e.user)?void 0:t.locale}),i=(0,TA.M)({appModel:a,extensionMenuProps:n,includeDisabled:!0}),o=new TM.x(a,r,[...t,...i],{includeDisabled:!0,acceptsUnicode:"ja"===l}),[s,c]=Q.useState((0,TO.Rs)());return Q.createElement(TL.P,{autoFocus:!0,autocompleteResultsClassName:tw.cx.maxW300.$,autocomplete:s,placeholder:(0,eO.t)("fullscreen_actions.search_menus_commands_and_plugins"),onChange:t=>{c(t),e(t)},validateToken:ey.lQ,searchResults:e=>o.searchIncludeKey(a,e.inputValue).filter(([e,t])=>!t.parametersRequired).map(([e,t])=>({id:`${(0,TS.Dz)(t)}-${t.pluginId}-${TI(t)}`,searchKey:e,...t})),SearchResultComponent:TR,TokenComponent:TD})}var TB=n(479951),TU=n(142639),TH=n(613122),TV=((y=TV||{})[y.NOT_PRESSED=0]="NOT_PRESSED",y[y.PRESSED=1]="PRESSED",y[y.PRESSED_FIRST_TIME=2]="PRESSED_FIRST_TIME",y[y.HELD=3]="HELD",y[y.COMPLETED_TAB_ANIMATION=4]="COMPLETED_TAB_ANIMATION",y),TG=((b=TG||{})[b.FIGJAM=0]="FIGJAM",b[b.DESIGN=1]="DESIGN",b[b.DEV_MODE=2]="DEV_MODE",b);function TK(e,t){return e in t?t[e].map(e=>e.text).filter(e=>-1===e.toLowerCase().indexOf("num")).map(Tj.splitStringIntoKeys):null}function TW(e,t){let n=e.map(e=>{let n=TK(e,t);return null==n||0===n.length?null:n[0]}).filter(n4.Vq);if(0===n.length)return null;if(1===n.length)return TB.k.warn("combineShortcuts: Could not find bindings to combine. \nactions: %o",e),null;let a=n[0].slice(0,-1),r=n.map(e=>e.length-1===a.length&&e.slice(0,-1).filter((e,t)=>e===a[t]).length===a.length?e.slice(-1)[0]:null).filter(n4.Vq);return r.length!==e.length?(TB.k.warn("combineShortcuts: Bindings length mismatch. \nactions: %o, shortcuts %s and %s",e,n[0].join(""),n[1].join("")),null):[[...a,r]]}let Tz=class extends Q.PureComponent{constructor(){super(...arguments),this.state={pressed:0,animationDelays:this.calculateAnimationDelays(this.props)},this.prettifyKeyLabel=e=>e.replace(/\u23B5/,(0,eO.t)("whiteboard.keyboard_shortcuts.key_label.space")).replace(/\u21E5/,`\u21E5 ${(0,eO.t)("whiteboard.keyboard_shortcuts.key_label.tab")}`).replace(/\u21DE/,`\u21DE ${(0,eO.t)("whiteboard.keyboard_shortcuts.key_label.pg_up")}`).replace(/\u21DF/,`\u21DF ${(0,eO.t)("whiteboard.keyboard_shortcuts.key_label.pg_dn")}`).replace(/\u2196/,`\u2196 ${(0,eO.t)("whiteboard.keyboard_shortcuts.key_label.home")}`).replace(/\u2198/,`\u2198 ${(0,eO.t)("whiteboard.keyboard_shortcuts.key_label.end")}`).replace(/\u238B/,`\u238B ${(0,eO.t)("whiteboard.keyboard_shortcuts.key_label.esc")}`).replace(/\u21A9/,`\u21A9 ${(0,eO.t)("whiteboard.keyboard_shortcuts.key_label.enter")}`),this.getTooltipText=e=>{switch(e){case"\u2318":return(0,eO.t)("whiteboard.keyboard_shortcuts.tooltip.command");case"\u21E7":return(0,eO.t)("whiteboard.keyboard_shortcuts.tooltip.shift");case"\u2325":return(0,eO.t)("whiteboard.keyboard_shortcuts.tooltip.option_alt");case"\u2303":return(0,eO.t)("whiteboard.keyboard_shortcuts.tooltip.control");case"\u232B":return(0,eO.t)("whiteboard.keyboard_shortcuts.tooltip.backspace");case"\u2190":return(0,eO.t)("whiteboard.keyboard_shortcuts.key_label.left");case"\u2192":return(0,eO.t)("whiteboard.keyboard_shortcuts.key_label.right");default:return null}},this.renderCharKeyBox=(e,t)=>{let n=this.prettifyKeyLabel(e),a=n.length>1?TH.SR:TH.FU,r=this.state.animationDelays[t]?{animationDelay:`${this.state.animationDelays[t]}ms`}:{};return Q.createElement("span",{key:n+t,className:a,style:r,"data-tooltip-show-immediately":"true","data-tooltip-show-above":"true","data-tooltip-type":nO.Ib.TEXT,"data-tooltip":this.getTooltipText(e)},n)},this.renderKeyBindings=e=>{let t=[],n=0;return e.forEach(e=>{if("string"==typeof e)t.push(this.renderCharKeyBox(e,n)),n++;else{let a=this.renderCharKeyBox(e[0],n),r=this.renderCharKeyBox(e[1],n+1);t.push(a),t.push(Q.createElement("div",{key:`${e[0]}-${e[1]}`,className:TH.Uo},Q.createElement(eO.Tx,{id:"whiteboard.keyboard_shortcuts.and"}))),t.push(r),n+=2}}),Q.createElement("span",{className:TH.pi},t)},this.triggerUnpressed=()=>{this.setState({pressed:0})},this.triggerPressed=()=>{4!=this.state.pressed&&2!=this.state.pressed&&(clearTimeout(this.pressedTimeout),this.pressedTimeout=setTimeout(()=>this.triggerUnpressed(),500),3!=this.state.pressed&&(1==this.state.pressed?this.setState({pressed:3}):this.setState({pressed:1})))},this.triggerPressedFirstTime=()=>{this.setState({pressed:2}),clearTimeout(this.pressedTimeout),setTimeout(()=>this.triggerUnpressed(),1200)},this.triggerCompletedTab=()=>{this.setState({pressed:4}),clearTimeout(this.pressedTimeout),setTimeout(()=>this.triggerUnpressed(),4e3)}}static shortcutUsedCount(e,t){if(null==t)return 0;switch(e){case"align-centers":return Math.min(t["align-horizontal-center"]||0,t["align-vertical-center"]||0);case"align-left-right":return Math.min(t["align-left"]||0,t["align-right"]||0);case"align-top-bottom":return Math.min(t["align-top"]||0,t["align-bottom"]||0);case"distribute-spacing":return Math.min(t["distribute-horizontal-spacing"]||0,t["distribute-vertical-spacing"]||0);case"text-font-size-adjust":return Math.min(t["text-font-size-increase"]||0,t["text-font-size-decrease"]||0);case"text-letter-spacing-adjust":return Math.min(t["text-letter-spacing-increase"]||0,t["text-letter-spacing-decrease"]||0);case"text-indent-and-dedent-list":return Math.min(t["text-indent-list"]||0,t["text-dedent-list"]||0);case"text-line-height-adjust":return Math.min(t["text-line-height-increase"]||0,t["text-line-height-decrease"]||0);case"bold-and-italic":return Math.min(t["toggle-bold"]||0,t["text-toggle-italic"]||0);case"text-bold-adjust":return Math.min(t["text-bold-increase"]||0,t["text-bold-decrease"]||0);case"bulleted-and-numbered-list":return Math.min(t["text-toggle-unordered-list"]||0,t["text-toggle-ordered-list"]||0);default:return t[e]||0}}calculateAnimationDelays(e){let t=[];for(var n=0;n<5;n++){let n=0;e.allTabsCompletedAnimation?n=-Math.floor(2e3*Math.random()):e.tabCompletedFirstTimeAnimation&&null!=e.tabCompletedAnimationKeyPosition&&(n=110*Math.abs(e.keyPosition-e.tabCompletedAnimationKeyPosition)+100),t.push(n)}return t}UNSAFE_componentWillReceiveProps(e){let t=Tz.shortcutUsedCount(this.props.shortcutKey,this.props.usedKeyboardShortcuts),n=Tz.shortcutUsedCount(e.shortcutKey,e.usedKeyboardShortcuts);if(this.props.allTabsCompletedAnimation!=e.allTabsCompletedAnimation||this.props.tabCompletedFirstTimeAnimation!=e.tabCompletedFirstTimeAnimation){let t=this.calculateAnimationDelays(e);this.setState({animationDelays:t})}e.tabCompletedFirstTimeAnimation&&!this.props.tabCompletedAnimation&&e.tabCompletedAnimation?this.triggerCompletedTab():t!=n&&this.props.shortcutKey==e.shortcutKey&&(1==n?this.triggerPressedFirstTime():this.triggerPressed())}render(){let e,t;try{e=this.props.customName?this.props.customName:this.props.displayName?(0,TC.A)(this.props.displayName):(0,TC.A)(this.props.shortcutKey)}catch(t){console.error(t),e=this.props.shortcutKey}let n=Tz.shortcutUsedCount(this.props.shortcutKey,this.props.usedKeyboardShortcuts)>0,a=Tz.keybindingsForShortcut(this.props.shortcutKey,this.props.useNumbersForOpacity,this.props.appModelKeyboardShortcuts),r=null;return a&&(r=this.renderKeyBindings(a[0])),t=this.props.allTabsCompletedAnimation?TH.Ve:4==this.state.pressed?TH.T7:2==this.state.pressed?TH.Q3:3==this.state.pressed?TH.u$:1==this.state.pressed?TH.b3:n?TH.k3:TH.J8,a&&Q.createElement("tr",{className:t,key:this.props.shortcutKey},this.props.icon&&("design"===this.props.editorType||"dev_handoff"===this.props.editorType)&&Q.createElement("td",{className:TH.mH},Q.createElement(eM.B,{svg:this.props.icon,className:TH.cw})),Q.createElement("td",{className:TH.QL},e,this.props.usage&&Q.createElement("div",{className:TH.CI},this.props.usage)),Q.createElement("td",{className:TH.qH},r))}},Tj=Tz;function TY(){let[e,t]=Q.useState({step:"NOT_CURRENTLY_ADDING"}),n=(0,mD.lg)(),a=(0,eG.J2)(eU.Ez5.editorState().useNumbersForOpacity),r=(0,$.d4)(e=>e.usedKeyboardShortcuts),l=(0,$.d4)(e=>e.mirror.appModel.keyboardShortcuts),i="ADDING_WAITING_FOR_KEY_REGISTRATION"===e.step&&e.menuItem,o=Q.createRef(),s=Q.useCallback(n=>{n.stopPropagation(),n.preventDefault();let a=function(e){let t=(0,wR.v7)(),n=[];if(e.metaKey&&n.push("Meta"),e.altKey&&n.push("Alt"),e.shiftKey&&n.push("Shift"),e.ctrlKey&&n.push("Control"),"MetaRight"===e.code||"MetaLeft"===e.code||"ShiftRight"===e.code||"ShiftLeft"===e.code||"ControlRight"===e.code||"ControlLeft"===e.code||"AltRight"===e.code||"AltLeft"===e.code);else if(t===eU.aTn.UNKNOWN){let t=eU.glU.stringKeyFromWebEventKeycode(e.keyCode);n.push(t)}else{let a=eU.glU.stringKeyFromWebEventCode(e.code,t);n.push(a)}return Tk.Gm.getKeyboardShortcutFromText(n.join("+"),null)}(n),r=a&&"Escape"===a.key;if(a&&"ADDING_WAITING_FOR_KEY_REGISTRATION"===e.step&&i&&!r){let e,t;if("None"===a.key)return;i.action?(e=eU.XpX.FULLSCREEN,t=i.action):(e=eU.XpX.NON_FULLSCREEN,t=i.searchKey),(0,TN.L3)(e,t,(0,Tk.t4)(a))}t({step:"NOT_CURRENTLY_ADDING"})},[i,e.step]);return Q.useEffect(()=>{var t;"ADDING_WAITING_FOR_KEY_REGISTRATION"===e.step&&(null==(t=o.current)||t.focus())},[o,e.step]),Q.createElement("div",{className:TH.PG},Q.createElement("div",{className:TH.fi},Q.createElement(nk.Y,{direction:"vertical",height:"fill-parent",padding:{vertical:10}},Q.createElement(aL.E,{i18nId:"keyboard_settings.custom_keyboard_shortcuts",color:"menu",fontSize:14}),Q.createElement(lP.$,{variant:"primary",icon:"plus-32",onClick:()=>t({step:"ADDING_WAITING_FOR_ACTION_INPUT"})},Q.createElement(aL.E,{i18nId:"keyboard_settings.custom_keyboard_shortcuts.add"})),Q.createElement(nk.M,null),Q.createElement(iZ.Ex,{className:tw.cx.mt4.$,text:"Internal only - #feat-custom-keyboard-shortcuts",color:iZ.zE.WARNING,onClick:()=>(0,dY.FJ)("https://figma.slack.com/archives/C055MQJ2E5P","_blank")}))),Q.createElement("div",{className:TH.fi,style:tT.sx.pt32.overflowYScroll.add({maxHeight:"162px"}).$},Object.values((0,TN.Uc)()).map(({action:e,type:t})=>Q.createElement(nk.Y,{key:`custom-shortcuts-${e}`,width:"fill-parent",height:"hug-contents"},Q.createElement(Tj,{customName:"FULLSCREEN"===t?void 0:e,shortcutKey:e,editorType:n,keyPosition:0,useNumbersForOpacity:a,usedKeyboardShortcuts:r,appModelKeyboardShortcuts:l}),Q.createElement(aJ.K0,{className:"keyboard_shortcut_panel_custom_tab--deleteButton--xf9nN",onClick:()=>(0,TN.C4)("FULLSCREEN"===t?eU.XpX.FULLSCREEN:eU.XpX.NON_FULLSCREEN,e),"data-tooltip-type":nO.Ib.TEXT,"data-tooltip":(0,eO.t)("whiteboard.keyboard_shortcuts.delete.shortcut")},Q.createElement(Tx.O,null)))),"ADDING_WAITING_FOR_ACTION_INPUT"===e.step&&Q.createElement("div",{className:tw.cx.relative.mt4.$},Q.createElement(TF,{onAutocompleteChange:e=>{let n=e.tokens[0];n&&t({step:"ADDING_WAITING_FOR_KEY_REGISTRATION",menuItem:n.content})}})),"ADDING_WAITING_FOR_KEY_REGISTRATION"===e.step&&Q.createElement(nk.Y,{height:"hug-contents",verticalAlignItems:"center"},Q.createElement(aL.E,{color:"menu"},TI(e.menuItem)),Q.createElement(nk.M,null),Q.createElement("div",{className:tw.cx.py4.$},Q.createElement("div",{className:ea()(TH.k3,TH.pi)},Q.createElement(lP.$,{ref:o,variant:"primary",onKeyDown:s},Q.createElement(aL.E,{i18nId:"keyboard_settings.custom_keyboard_shortcuts.press_key"}))))),Q.createElement("div",{style:tT.sx.h150.$})))}Tj.displayName="Shortcut",Tj.specialKeys=["Backspace","Delete","Down","End","Enter","Home","Left","Page Down","Page Up","Right","Tab","Up"],Tj.getLocalizedSpecialKey=e=>{switch(e){case"Backspace":return(0,eO.t)("whiteboard.keyboard_shortcuts.key_label.backspace");case"Delete":return(0,eO.t)("whiteboard.keyboard_shortcuts.key_label.delete");case"Down":return(0,eO.t)("whiteboard.keyboard_shortcuts.key_label.down");case"End":return(0,eO.t)("whiteboard.keyboard_shortcuts.key_label.end");case"Enter":return(0,eO.t)("whiteboard.keyboard_shortcuts.key_label.enter");case"Home":return(0,eO.t)("whiteboard.keyboard_shortcuts.key_label.home");case"Left":return(0,eO.t)("whiteboard.keyboard_shortcuts.key_label.left");case"Page Down":return(0,eO.t)("whiteboard.keyboard_shortcuts.key_label.page_down");case"Page Up":return(0,eO.t)("whiteboard.keyboard_shortcuts.key_label.page_up");case"Right":return(0,eO.t)("whiteboard.keyboard_shortcuts.key_label.right");case"Tab":return(0,eO.t)("whiteboard.keyboard_shortcuts.key_label.tab");case"Up":return(0,eO.t)("whiteboard.keyboard_shortcuts.key_label.up")}},Tj.splitStringIntoKeys=e=>{let t=[];for(;e.length>0;)if(e.startsWith("Ctrl+"))t.push((0,eO.t)("whiteboard.keyboard_shortcuts.key_label.ctrl")),e=e.slice(5);else if(e.startsWith("Shift+"))t.push((0,eO.t)("whiteboard.keyboard_shortcuts.key_label.shift")),e=e.slice(6);else if(e.startsWith("Alt+"))t.push((0,eO.t)("whiteboard.keyboard_shortcuts.key_label.alt")),e=e.slice(4);else if(e.startsWith("Win+"))t.push((0,eO.t)("whiteboard.keyboard_shortcuts.key_label.win")),e=e.slice(4);else{let n=!1;for(let a=0;a<Tz.specialKeys.length;a++){let r=Tz.specialKeys[a];if(e.startsWith(r)){t.push(Tz.getLocalizedSpecialKey(r)),e=e.slice(r.length),n=!0;break}}n||(t.push(e[0]),e=e.slice(1))}return t},Tj.keybindingsForShortcut=(e,t,n)=>{if(!n)return null;let a=function(e,t){let n=TU.y.isApple(),a=n?"\u2325":ec.Ay.chromeos?(0,eO.t)("whiteboard.keyboard_shortcuts.key_label.search"):(0,eO.t)("whiteboard.keyboard_shortcuts.key_label.alt"),r=n?"\u2318":(0,eO.t)("whiteboard.keyboard_shortcuts.key_label.ctrl"),l=n?"\u21A9":(0,eO.t)("whiteboard.keyboard_shortcuts.key_label.enter"),i=n?"\u238B":(0,eO.t)("whiteboard.keyboard_shortcuts.key_label.esc"),o=n?"\u21E7":(0,eO.t)("whiteboard.keyboard_shortcuts.key_label.shift"),s=(0,eO.t)("whiteboard.keyboard_shortcuts.key_label.drag"),c=(0,eO.t)("whiteboard.keyboard_shortcuts.key_label.click"),d=(0,eO.t)("whiteboard.keyboard_shortcuts.key_label.dbl_click"),u=Object.entries({"align-left-right":TW(["align-left","align-right"],e),"align-top-bottom":TW(["align-top","align-bottom"],e),"align-centers":TW(["align-horizontal-center","align-vertical-center"],e),copy:[[r,"C"]],"center-resize-drag":[[a]],"crop-image":[[a,d]],cut:[[r,"X"]],"deep-select":[[r,c]],"deep-select-rectangle":[[r,s]],"deselect-all":[[i]],duplicate:[[a]],"ignore-constraints":[[r]],"measure-to-selection":[[a]],"move-while-resizing":[["\u23B5"]],pan:[["\u23B5",s]],paste:[[r,"V"]],"request-edit-mode":[[l]],"resize-proportionally":[[o]],"swap-instance":[[a]],"text-letter-spacing-adjust":TW(["text-letter-spacing-decrease","text-letter-spacing-increase"],e),"text-line-height-adjust":TW(["text-line-height-decrease","text-line-height-increase"],e),"text-font-size-adjust":TW(["text-font-size-decrease","text-font-size-increase"],e),"text-bold-adjust":TW(["text-bold-decrease","text-bold-increase"],e),"bold-and-italic":TW(["toggle-bold","text-toggle-italic"],e),"stamp-or-reaction-wheel":[["E"]],"set-tool-section":[["F"]],"bulleted-and-numbered-list":TW(["text-toggle-ordered-list","text-toggle-unordered-list"],e),"distribute-spacing":TW(["distribute-horizontal-spacing","distribute-vertical-spacing"],e),"text-indent-and-dedent-list":TW(["text-indent-list","text-dedent-list"],e),"straight-connector":[[o,s]],"edit-text":[[l]],"set-opacity-00":t?[["0","0"]]:[[o,"0","0"]],[w_.dz]:n?[["\u2318","\u2303","\u2192"]]:[[(0,eO.t)("whiteboard.keyboard_shortcuts.key_label.ctrl"),"F6"]],[w_.Jt]:n?[["\u2318","\u2303","\u2190"]]:[[o,(0,eO.t)("whiteboard.keyboard_shortcuts.key_label.ctrl"),"F6"]],"quick-create-immutable-frame":TK("quick-create",e),"stamp-on-node":TK("quick-create",e),"outline-stroke-transition":TK("outline-stroke-with-migration-notice",e)||TK("outline-stroke",e),"toggle-outlines-transition":TK("toggle-outlines-with-migration-notice",e)||TK("toggle-outlines",e)}).reduce((e,[t,n])=>((0,n4.Vq)(n)&&(e[t]=n),e),{});return n?{...u,"bend-tool":[["\u2318"]]}:u}(n,t);return e in n?TK(e,n):e in a?a[e]:null};let TZ="keyboard_rows--row--8eEsv",TX="ISO_ENTER",Tq="SPACER";function TJ({createKey:e}){return Q.createElement("div",{className:TZ},e("Backquote"),e("Digit1"),e("Digit2"),e("Digit3"),e("Digit4"),e("Digit5"),e("Digit6"),e("Digit7"),e("Digit8"),e("Digit9"),e("Digit0"),e("Minus"),e("Equal"),e("IntlYen"),e("Backspace",113))}function TQ({createKey:e,isBackslashRow2:t}){let n=null==t?e("Backslash"):t?e("Backslash"):e(TX,90);return Q.createElement("div",{className:TZ},e("Tab",90),e("KeyQ"),e("KeyW"),e("KeyE"),e("KeyR"),e("KeyT"),e("KeyY"),e("KeyU"),e("KeyI"),e("KeyO"),e("KeyP"),e("BracketLeft"),e("BracketRight"),n)}function T$({createKey:e,isBackslashRow2:t}){let n=null==t?e("Backslash"):t?null:e("Backslash"),a=null==t?e("Enter",60):t?e("Enter",60):e(Tq,20);return Q.createElement("div",{className:TZ},e("CapsLock",120),e("KeyA"),e("KeyS"),e("KeyD"),e("KeyF"),e("KeyG"),e("KeyH"),e("KeyJ"),e("KeyK"),e("KeyL"),e("Semicolon"),e("Quote"),n,a)}function T0({createKey:e}){return Q.createElement("div",{className:TZ},e("ShiftLeft",134),e("IntlBackslash"),e("KeyZ"),e("KeyX"),e("KeyC"),e("KeyV"),e("KeyB"),e("KeyN"),e("KeyM"),e("Comma"),e("Period"),e("Slash"),e("IntlRo"),e("ShiftRight",94))}function T1({createKey:e}){return ec.Ay.mac?Q.createElement("div",{className:TZ},e("Fn"),e("ControlLeft"),e("AltLeft"),e("MetaLeft"),e("Space",500),e("MetaRight"),e("AltRight")):Q.createElement("div",{className:TZ},e("Fn"),e("ControlLeft"),e("MetaLeft"),e("AltLeft"),e("Space",500),e("AltRight"),e("ControlRight"))}let T2="keyboard_shortcut_panel_layout_tab--row--MilbG",T5="keyboard_shortcut_panel_layout_tab--column--SzOhn keyboard_shortcut_panel--column--lHvov",T4="keyboard_shortcut_panel_layout_tab--wideColumn--tR6V-";var T3=n(497789);function T6(e){switch(e){case eU.aTn.CHINESE:case eU.aTn.KOREAN:case eU.aTn.US_QWERTY:case eU.aTn.UNKNOWN:case eU.aTn.DVORAK:return!0;default:return!1}}function T7({label:e,width:t}){return Q.createElement("div",{style:{flexGrow:t??1},className:"keyboard_shortcut_panel_layout_tab--key--zFiya keyboard_shortcut_panel--singleCharKeyBox--DD6s1 keyboard_shortcut_panel--shortcutBox--9Ltqp"},e)}function T8({layout:e}){let t=(0,Q.useCallback)(t=>"Space"===t?" ":eU.glU.getKeyboardLayoutAsJSON(e)[t],[e]),n=(e,n)=>{if(e!==TX&&e!==Tq){let a=t(e);return a?Q.createElement(T7,{key:e,width:n,label:a}):null}return e===TX?Q.createElement("div",{style:{flexGrow:n??1},className:"keyboard_shortcut_panel_layout_tab--enterISOKeyContainer--PK7LJ keyboard_shortcut_panel_layout_tab--key--zFiya keyboard_shortcut_panel--singleCharKeyBox--DD6s1 keyboard_shortcut_panel--shortcutBox--9Ltqp"},Q.createElement(eM.B,{className:"keyboard_shortcut_panel_layout_tab--enterISOKey--AbX2h",svg:T3.A})):e===Tq?Q.createElement("div",{style:{flexGrow:n??1},className:"keyboard_shortcut_panel_layout_tab--spacerKey--g8rv4 keyboard_shortcut_panel_layout_tab--key--zFiya keyboard_shortcut_panel--singleCharKeyBox--DD6s1 keyboard_shortcut_panel--shortcutBox--9Ltqp"},t("Enter")):null};return Q.createElement("div",{className:"keyboard_shortcut_panel_layout_tab--keyboardContainer--JLzz1"},Q.createElement("div",{className:T2},Q.createElement(TJ,{createKey:n})),Q.createElement("div",{className:T2},Q.createElement(TQ,{createKey:n,isBackslashRow2:T6(e)})),Q.createElement("div",{className:T2},Q.createElement(T$,{createKey:n,isBackslashRow2:T6(e)})),Q.createElement("div",{className:T2},Q.createElement(T0,{createKey:n})),Q.createElement("div",{className:ea()(T2,"keyboard_shortcut_panel_layout_tab--row5--TBfPa")},Q.createElement(T1,{createKey:n})))}let T9=async()=>{if(!wk.eD)return null;let e=await wk.eD.getKeyboardLayout();return e?(0,wU.pB)(e):null};class xe extends aT.c${}function xt({layout:e,setPreviewedLayout:t}){let n=(0,$.wA)(),a=(0,$.d4)(e=>e.dropdownShown),[r,l]=(0,Q.useState)(e),[i,o]=(0,Q.useState)();T9().then(e=>{i!==e&&o(e)});let s=(0,Q.useMemo)(()=>{let e=i?Q.createElement(xe,{key:i,value:i}):null,t=(0,wR.GP)().map(e=>{if(isNaN(parseInt(e)))return null;let t=parseInt(e);return t===i?null:{name:(0,wR.As)(t),layoutOption:t}}).filter(n4.Vq).sort((e,t)=>e.layoutOption===eU.aTn.UNKNOWN?1:t.layoutOption===eU.aTn.UNKNOWN?-1:e.name.localeCompare(t.name)).map(({layoutOption:e})=>Q.createElement(xe,{key:e,value:e}));return null!=e?[Q.createElement(xe,{key:(0,eO.t)("keyboard_settings.detected"),formattedValue:(0,eO.t)("keyboard_settings.detected"),disabled:!0}),e,Q.createElement(aT.sK,{key:"divider-1"}),Q.createElement(xe,{key:(0,eO.t)("keyboard_settings.other_layouts"),formattedValue:(0,eO.t)("keyboard_settings.other_layouts"),disabled:!0}),...t]:t},[i]),c=Q.createElement("div",{className:"keyboard_shortcut_panel_layout_tab--selectorWrapper--ecEHm"},Q.createElement(aT.l6,{id:"keyboard-layout-select",property:r,dispatch:n,autoFocus:!1,className:"keyboard_shortcut_panel_layout_tab--selectorContainer--BWtmR",dropdownClassName:eK.s4,inputClassName:"keyboard_shortcut_panel_layout_tab--selectorInputContainer--z1tfj",chevronClassName:"keyboard_shortcut_panel_layout_tab--selectorChevron--ZnCbX",formatter:{format:e=>(0,wR.As)(e)},onMouseDown:e=>{e.stopPropagation()},onChange:e=>{l(e),(0,wR.rd)({layout:e})},onOptionFocus:t,dropdownShown:a,recordingKey:"keyboardLayoutSelector"},s));return Q.createElement("div",{className:"keyboard_shortcut_panel_layout_tab--selectorRow--QPlYR"},Q.createElement("span",{className:"keyboard_shortcut_panel_layout_tab--selectorLabelText--3jkuk"},(0,eO.t)("keyboard_settings.keyboard_layout_panel_selector")),Q.createElement("div",{className:"keyboard_shortcut_panel_layout_tab--selectorDropdownContainer--0rd1S"},c))}function xn({layout:e,setPreviewedLayout:t}){let n=(0,eO.t)("keyboard_settings.figma_keyboard_shortcuts_won_t_automatically_change_if_you_change_your_system_keyboard_layout");return Q.createElement("div",{className:"keyboard_shortcut_panel_layout_tab--leftColumnWrapper--8Jn1P"},Q.createElement("div",{className:"keyboard_shortcut_panel_layout_tab--keyboardSelectorContainerSection--gTvK9"},Q.createElement(xt,{layout:e,setPreviewedLayout:t})),Q.createElement("div",{className:"keyboard_shortcut_panel_layout_tab--keyboardDescriptionSection--yD9L-"},e===eU.aTn.UNKNOWN?null:n),Q.createElement("div",{className:"keyboard_shortcut_panel_layout_tab--keyboardLearnMoreSection--PV6Hj"},Q.createElement("a",{className:"keyboard_shortcut_panel_layout_tab--learnMoreLink--bOFxg",href:"https://help.figma.com/hc/articles/5665442977431",target:"_blank",rel:"noopener"},Q.createElement(eO.Tx,{id:"keyboard_settings.request_a_new_layout_or_learn_more"}))))}function xa(){let e=(0,eG.J2)(eU.Ez5.editorState().keyboardLayoutPreference),[t,n]=(0,Q.useState)();return Q.createElement("div",{className:"keyboard_shortcut_panel_layout_tab--contents--8vVa7 keyboard_shortcut_panel--contents--8ae0D"},Q.createElement("div",{className:ea()(T5,T4)},Q.createElement(xn,{layout:e,setPreviewedLayout:n})),Q.createElement("div",{className:ea()(T5,T4,"keyboard_shortcut_panel_layout_tab--keyboardVisualColumn--5Hw4F")},Q.createElement(T8,{layout:t??e})))}var xr=n(943657),xl=n(481103),xi=n(586779),xo=n(964829);class xs extends Q.PureComponent{render(){return Q.createElement("div",{className:TH.fi},Q.createElement("table",null,this.props.children))}}xs.displayName="Column";class xc extends Q.PureComponent{render(){let e=Q.Children.toArray(this.props.children).filter(e=>!!e);if(0===e.length)return null;let t=this.props.caption?(0,TC.A)(this.props.caption):null;return Q.createElement("tbody",null,t&&Q.createElement("tr",null,Q.createElement("th",{className:TH.xQ,colSpan:3},t)),e)}}function xd(e,t,n){if(void 0===t&&void 0===n)return!0;let a=e=>{let a=!0;return void 0!==n&&a&&(a=n!==e),void 0!==t&&a&&(a=t===e),a};return"design"===e?a(TG.DESIGN):"dev_handoff"===e?a(TG.DEV_MODE):"whiteboard"===e&&a(TG.FIGJAM)}function xu(e){return!e||e.every(e=>(0,eo.kc)()[e])}xc.displayName="Category";class xm extends Q.Component{constructor(e){super(e),this.keyShortcutPositionsInTab={},this.shortcutList={[xr.Jq.ESSENTIAL]:{displayName:Q.createElement(eO.Tx,{id:"whiteboard.keyboard_shortcuts.tab.essential"}),includeInEditorType:TG.DESIGN,columns:[[{shortcuts:[{shortcutKey:"toggle-ui",usage:Q.createElement(eO.Tx,{id:"fullscreen.keyboard_shortcuts_panel.toggle_ui_description"})}]}],[{shortcuts:[this.props.hasSubscribedLibraries?{shortcutKey:"component-insert",displayName:this.componentInsertDisplayName(),usage:Q.createElement(eO.Tx,{id:"fullscreen.keyboard_shortcuts_panel.component_insert_description"})}:{shortcutKey:"toggle-dropper",usage:Q.createElement(eO.Tx,{id:"fullscreen.keyboard_shortcuts_panel.toggle_dropper_description"})}]}],[{shortcuts:[{shortcutKey:"toggle-menu",usage:Q.createElement(eO.Tx,{id:"fullscreen.keyboard_shortcuts_panel.toggle_menu_description"})}]}]]},[xr.Jq.TOOLS]:{displayName:Q.createElement(eO.Tx,{id:"whiteboard.keyboard_shortcuts.tab.tools"}),columns:[[{shortcuts:[{shortcutKey:"set-tool-default",displayName:"set-tool-default-desc-figma",icon:(0,Tw.SD)(cl.NLJ.SELECT),includeInEditorType:TG.DESIGN},{shortcutKey:"set-tool-default-figjam",displayName:"set-tool-default-desc-figjam",icon:(0,Tw.SD)(cl.NLJ.SELECT),includeInEditorType:TG.FIGJAM},{shortcutKey:"set-tool-frame",displayName:"set-tool-frame-desc",icon:(0,Tw.SD)(cl.NLJ.FRAME),includeInEditorType:TG.DESIGN},{shortcutKey:"set-tool-pen",displayName:"set-tool-pen-desc",icon:(0,Tw.SD)(cl.NLJ.VECTOR_PEN),includeInEditorType:TG.DESIGN},{shortcutKey:"set-tool-sticky",includeInEditorType:TG.FIGJAM},{shortcutKey:"set-tool-connector-straight",includeInEditorType:TG.FIGJAM},{shortcutKey:"set-tool-connector-elbowed",includeInEditorType:TG.FIGJAM},{shortcutKey:"set-tool-pencil",displayName:"set-tool-pencil-desc",icon:(0,Tw.SD)(cl.NLJ.VECTOR_PENCIL),includeInEditorType:TG.DESIGN},{shortcutKey:"set-tool-pencil",displayName:"set-tool-marker",includeInEditorType:TG.FIGJAM}]}],[{shortcuts:[{shortcutKey:"set-tool-type",displayName:"set-tool-type-desc",icon:(0,Tw.SD)(cl.NLJ.TYPE),hideInEditorType:TG.DEV_MODE},{shortcutKey:"set-tool-table",icon:(0,Tw.SD)(cl.NLJ.TABLE)},{shortcutKey:"set-tool-section",includeInEditorType:TG.FIGJAM},{shortcutKey:"set-tool-rectangle",displayName:"set-tool-rectangle-desc",icon:(0,Tw.SD)(cl.NLJ.SHAPE_RECTANGLE),hideInEditorType:TG.DEV_MODE},{shortcutKey:"set-tool-ellipse",displayName:"set-tool-ellipse-desc",icon:(0,Tw.SD)(cl.NLJ.SHAPE_ELLIPSE),hideInEditorType:TG.DEV_MODE},{shortcutKey:"set-tool-line",displayName:"set-tool-line-desc",icon:(0,Tw.SD)(cl.NLJ.SHAPE_LINE),includeInEditorType:TG.DESIGN},{shortcutKey:"toggle-publish",includeInEditorType:TG.FIGJAM},{shortcutKey:"place",includeInEditorType:TG.FIGJAM},{shortcutKey:"set-tool-arrow",displayName:"set-tool-arrow-desc",icon:(0,Tw.SD)(cl.NLJ.SHAPE_ARROW),includeInEditorType:TG.DESIGN},{shortcutKey:"set-tool-comments",icon:(0,Tw.SD)(cl.NLJ.COMMENTS),includeInEditorType:TG.DEV_MODE},{shortcutKey:"set-tool-annotate",icon:(0,Tw.SD)(cl.NLJ.ANNOTATE),includeInEditorType:TG.DEV_MODE},{shortcutKey:"set-tool-measure",icon:(0,Tw.SD)(cl.NLJ.MEASURE),includeInEditorType:TG.DEV_MODE}]}],[{shortcuts:[{shortcutKey:"start-chat",includeInEditorType:TG.FIGJAM},{shortcutKey:"stamp-or-reaction-wheel",includeInEditorType:TG.FIGJAM},{shortcutKey:"set-tool-code-block",includeInEditorType:TG.FIGJAM},{shortcutKey:"set-tool-comments",icon:(0,Tw.SD)(cl.NLJ.COMMENTS),hideInEditorType:TG.DEV_MODE},{shortcutKey:"toggle-dropper",icon:xo.A,includeInEditorType:TG.DESIGN},{shortcutKey:"set-tool-slice",displayName:"set-tool-slice-desc",icon:(0,Tw.SD)(cl.NLJ.SLICE),includeInEditorType:TG.DESIGN}]}]]},[xr.Jq.VIEW]:{displayName:Q.createElement(eO.Tx,{id:"whiteboard.keyboard_shortcuts.tab.view"}),columns:[[{shortcuts:[{shortcutKey:"toggle-ui"},{shortcutKey:"toggle-multiplayer-cursors"},{shortcutKey:"enter-design-mode"},{shortcutKey:"enter-inspect-mode"}]}],[{shortcuts:[{shortcutKey:"pan",includeInEditorType:TG.FIGJAM},{shortcutKey:"zoom-in",includeInEditorType:TG.FIGJAM},{shortcutKey:"zoom-out",includeInEditorType:TG.FIGJAM},{shortcutKey:"zoom-reset",includeInEditorType:TG.FIGJAM},{shortcutKey:"toggle-rulers",includeInEditorType:TG.DESIGN},{shortcutKey:"toggle-outlines-transition",includeInEditorType:TG.DESIGN},{shortcutKey:"toggle-pixel-preview",includeInEditorType:TG.DESIGN},{shortcutKey:"toggle-shown-layout-grids",includeInEditorType:TG.DESIGN},{shortcutKey:"toggle-grid",includeInEditorType:TG.DESIGN}]}],[{shortcuts:[{shortcutKey:"zoom-to-fit",includeInEditorType:TG.FIGJAM},{shortcutKey:"zoom-to-selection",includeInEditorType:TG.FIGJAM},{shortcutKey:"toggle-layers",includeInEditorType:TG.DESIGN},{shortcutKey:"toggle-publish",displayName:"toggle-publish-desc",includeInEditorType:TG.DESIGN},{shortcutKey:"toggle-library",includeInEditorType:TG.DESIGN},{shortcutKey:"show-design-panel",includeInEditorType:TG.DESIGN},{shortcutKey:(0,TT.Zd)()?"toggle-prototyping-info":"show-prototype-panel",includeInEditorType:TG.DESIGN}]}]]},[xr.Jq.ZOOM]:{displayName:Q.createElement(eO.Tx,{id:"whiteboard.keyboard_shortcuts.tab.zoom"}),hideInEditorType:TG.FIGJAM,columns:[[{shortcuts:[{shortcutKey:"pan"},{shortcutKey:"zoom-in"},{shortcutKey:"zoom-out"},{shortcutKey:"zoom-reset"}]}],[{shortcuts:[{shortcutKey:"zoom-to-fit"},{shortcutKey:"zoom-to-selection"},{shortcutKey:"next-artboard"},{shortcutKey:"previous-artboard"}]}],[{shortcuts:[{shortcutKey:"page-previous"},{shortcutKey:"page-next"},{shortcutKey:"previous-artboard-same-zoom"},{shortcutKey:"next-artboard-same-zoom"}]}]]},[xr.Jq.TEXT]:{displayName:Q.createElement(eO.Tx,{id:"whiteboard.keyboard_shortcuts.tab.text"}),hideInEditorType:TG.DEV_MODE,columns:[[{shortcuts:[{shortcutKey:"bold-and-italic"},{shortcutKey:"text-toggle-underline"},{shortcutKey:"text-edit-hyperlink"},{shortcutKey:"text-toggle-strikethrough"},{shortcutKey:"bulleted-and-numbered-list"}]}],[{shortcuts:[{shortcutKey:"text-align-left",includeInEditorType:TG.DESIGN},{shortcutKey:"text-align-center",includeInEditorType:TG.DESIGN},{shortcutKey:"text-align-right",includeInEditorType:TG.DESIGN},{shortcutKey:"text-align-justified",includeInEditorType:TG.DESIGN},{shortcutKey:"text-style-normal",includeInEditorType:TG.FIGJAM},{shortcutKey:"text-style-h3",includeInEditorType:TG.FIGJAM},{shortcutKey:"text-style-h2",includeInEditorType:TG.FIGJAM},{shortcutKey:"text-style-h1",includeInEditorType:TG.FIGJAM},{shortcutKey:"text-style-title",includeInEditorType:TG.FIGJAM}]}],[{shortcuts:[{shortcutKey:"text-font-size-adjust",includeInEditorType:TG.DESIGN},{shortcutKey:"text-bold-adjust",includeInEditorType:TG.DESIGN},{shortcutKey:"text-letter-spacing-adjust",includeInEditorType:TG.DESIGN},{shortcutKey:"text-line-height-adjust",includeInEditorType:TG.DESIGN},{shortcutKey:"text-align-left",includeInEditorType:TG.FIGJAM},{shortcutKey:"text-align-center",includeInEditorType:TG.FIGJAM},{shortcutKey:"text-align-right",includeInEditorType:TG.FIGJAM},{shortcutKey:"text-indent-and-dedent-list",includeInEditorType:TG.FIGJAM}]}]]},[xr.Jq.SHAPE]:{displayName:Q.createElement(eO.Tx,{id:"whiteboard.keyboard_shortcuts.tab.shape"}),includeInEditorType:TG.DESIGN,columns:[[{shortcuts:[{shortcutKey:"set-tool-pen",icon:(0,Tw.SD)(cl.NLJ.VECTOR_PEN)},{shortcutKey:"set-tool-pencil",icon:(0,Tw.SD)(cl.NLJ.VECTOR_PENCIL)}]},{caption:"while-editing-shape",shortcuts:[{shortcutKey:"set-tool-paint-bucket",icon:(0,Tw.SD)(cl.NLJ.VECTOR_PAINT_BUCKET)},{shortcutKey:"bend-tool",icon:(0,Tw.SD)(cl.NLJ.VECTOR_BEND)}]}],[{shortcuts:[{shortcutKey:"remove-fill"},{shortcutKey:"remove-stroke"},{shortcutKey:"swap-fill-and-stroke"},{shortcutKey:"outline-stroke-transition"},{shortcutKey:"flatten-selection"}]}],[{caption:"after-selecting-points",shortcuts:[{shortcutKey:"join-selection"},{shortcutKey:"smooth-join-selection"},{shortcutKey:"delete-and-heal-selection"}]}]]},[xr.Jq.SELECT]:{displayName:Q.createElement(eO.Tx,{id:"whiteboard.keyboard_shortcuts.tab.selection"}),includeInEditorType:TG.DESIGN,columns:[[{shortcuts:[{shortcutKey:"select-all"},{shortcutKey:"select-inverse"},{shortcutKey:"deselect-all"},{shortcutKey:"deep-select"}]}],[{shortcuts:[{shortcutKey:"select-child"},{shortcutKey:"select-parent"},{shortcutKey:"select-next-sibling"},{shortcutKey:"select-previous-sibling"},{shortcutKey:"select-matching"}]}],[{shortcuts:[{shortcutKey:"group-selection"},{shortcutKey:"ungroup-selection"},{shortcutKey:"frame-selection"},{shortcutKey:"toggle-shown-for-selected-nodes"},{shortcutKey:"toggle-locked-for-selected-nodes"}]}]]},[xr.Jq.CURSOR]:{displayName:Q.createElement(eO.Tx,{id:"whiteboard.keyboard_shortcuts.tab.cursor"}),includeInEditorType:TG.DESIGN,columns:[[{caption:"while-pointing",shortcuts:[{shortcutKey:"measure-to-selection"}]},{caption:"while-moving",shortcuts:[{shortcutKey:"duplicate"}]}],[{caption:"while-clicking",shortcuts:[{shortcutKey:"deep-select"}]},{caption:"while-dragging-to-select",shortcuts:[{shortcutKey:"deep-select-rectangle"}]}],[{caption:"while-resizing",shortcuts:[{shortcutKey:"center-resize-drag"},{shortcutKey:"resize-proportionally"},{shortcutKey:"ignore-constraints",displayName:"ignore-constraints-desc"}]}]]},[xr.Jq.COPY]:{displayName:Q.createElement(eO.Tx,{id:"whiteboard.keyboard_shortcuts.tab.copy"}),includeInEditorType:TG.DEV_MODE,columns:[[],[{shortcuts:[{shortcutKey:"copy",includeInEditorType:TG.DEV_MODE},{shortcutKey:"copy-as-png",includeInEditorType:TG.DEV_MODE}]}],[]]},[xr.Jq.EDIT]:{displayName:Q.createElement(eO.Tx,{id:"whiteboard.keyboard_shortcuts.tab.edit"}),hideInEditorType:TG.DEV_MODE,columns:[[{shortcuts:[{shortcutKey:"copy"},{shortcutKey:"cut"},{shortcutKey:"paste"},{shortcutKey:"paste-to-replace",includeInEditorType:TG.DESIGN},{shortcutKey:"paste-over-selection"},{shortcutKey:"export-selection-or-current-page",displayName:"export-selection-or-current-page-desc",includeInEditorType:TG.FIGJAM}]}],[{shortcuts:[{shortcutKey:"bring-forward",includeInEditorType:TG.FIGJAM},{shortcutKey:"send-backward",includeInEditorType:TG.FIGJAM},{shortcutKey:"bring-to-front",includeInEditorType:TG.FIGJAM},{shortcutKey:"send-to-back",includeInEditorType:TG.FIGJAM},{shortcutKey:"group-selection",includeInEditorType:TG.FIGJAM},{shortcutKey:"duplicate-in-place",includeInEditorType:TG.DESIGN},{shortcutKey:"rename-selection",includeInEditorType:TG.DESIGN},{shortcutKey:"export-selected-exportables",displayName:"export-selected-exportables-desc",includeInEditorType:TG.DESIGN},{shortcutKey:"canvas-search",includeInEditorType:TG.DESIGN}]}],[{shortcuts:[{shortcutKey:"toggle-locked-for-selected-nodes",includeInEditorType:TG.FIGJAM},{shortcutKey:"canvas-search",includeInEditorType:TG.FIGJAM},{shortcutKey:"undo",includeInEditorType:TG.FIGJAM},{shortcutKey:"redo",includeInEditorType:TG.FIGJAM},{shortcutKey:"copy-as-png",includeInEditorType:TG.DESIGN},{shortcutKey:"copy-properties",includeInEditorType:TG.DESIGN},{shortcutKey:"paste-properties",includeInEditorType:TG.DESIGN}]}]]},[xr.Jq.TRANSFORM]:{displayName:Q.createElement(eO.Tx,{id:"whiteboard.keyboard_shortcuts.tab.transform"}),includeInEditorType:TG.DESIGN,columns:[[{shortcuts:[{shortcutKey:"flip-horizontal"},{shortcutKey:"flip-vertical"},{shortcutKey:"mask-selection"}]}],[{shortcuts:[{shortcutKey:"request-edit-mode",displayName:"edit-shape-or-image"},{shortcutKey:"place"}]}],[{shortcuts:[{shortcutKey:"set-opacity-00"},{shortcutKey:"set-opacity-1"},{shortcutKey:"set-opacity-5"},{shortcutKey:"set-opacity-0"}]}]]},[xr.Jq.ARRANGE]:{displayName:Q.createElement(eO.Tx,{id:"whiteboard.keyboard_shortcuts.tab.arrange"}),includeInEditorType:TG.DESIGN,columns:[[{shortcuts:[{shortcutKey:"bring-forward"},{shortcutKey:"send-backward"},{shortcutKey:"bring-to-front"},{shortcutKey:"send-to-back"}]}],[{shortcuts:[{shortcutKey:"align-left-right"},{shortcutKey:"align-top-bottom"},{shortcutKey:"align-centers"},{shortcutKey:"distribute-spacing"},{shortcutKey:"tidy-up"}]}],[{shortcuts:[{shortcutKey:"stack-selection"},{shortcutKey:"unstack-selection"}]}]]},[xr.Jq.COMPONENTS]:{displayName:Q.createElement(eO.Tx,{id:"whiteboard.keyboard_shortcuts.tab.components"}),includeInEditorType:TG.DESIGN,columns:[[{shortcuts:[{shortcutKey:"toggle-publish",displayName:"toggle-publish-desc"},{shortcutKey:"toggle-library"},{shortcutKey:"create-symbol"},{shortcutKey:"detach-instance"}]}],[{shortcuts:[{shortcutKey:"component-insert",displayName:this.componentInsertDisplayName()}]},{caption:"while-inserting-a-component",shortcuts:[{shortcutKey:"swap-instance"}]}]]},[xr.Jq.ACCESSIBILITY]:{displayName:Q.createElement(eO.Tx,{id:"whiteboard.keyboard_shortcuts.tab.accessibility"}),includeInEditorType:TG.FIGJAM,columns:[[{shortcuts:[{shortcutKey:"select-next-node"},{shortcutKey:"select-previous-node"},{shortcutKey:"select-parent"},{shortcutKey:"select-child"}]}],[{shortcuts:[{shortcutKey:w_.dz},{shortcutKey:w_.Jt}]}]]},[xr.Jq.ADVANCED]:{displayName:Q.createElement(eO.Tx,{id:"whiteboard.keyboard_shortcuts.tab.advanced"}),includeInEditorType:TG.FIGJAM,columns:[[{caption:"while-editing-shape-or-sticky",shortcuts:[{shortcutKey:"quick-create-immutable-frame"}]},{caption:"while-text-shape-or-sticky-selected",shortcuts:[{shortcutKey:"edit-text"}]}],[{caption:"while-stamping",shortcuts:[{shortcutKey:"stamp-on-node"}]}],[{shortcuts:[{shortcutKey:"align-left-right"},{shortcutKey:"align-top-bottom"},{shortcutKey:"align-centers"},{shortcutKey:"tidy-up"},{shortcutKey:"straight-connector"}]}]]}},this.state={activeTab:this.props.initActiveTab??this.getDefaultActiveTab(this.props.editorType),completedTabs:this.getCompletedTabs(this.props.usedKeyboardShortcuts),allTabsCompleted:this.allTabsCompleted(this.getCompletedTabs(this.props.usedKeyboardShortcuts)),tabCompletedAnimation:!1,tabCompletedFirstTimeAnimation:!1,allTabsCompletedAnimation:!1},this.onNavClick=e=>{this.setState({activeTab:e,completedTabs:this.state.completedTabs,allTabsCompleted:this.state.allTabsCompleted,tabCompletedFirstTimeAnimation:!1,tabCompletedAnimation:!1,allTabsCompletedAnimation:this.state.allTabsCompletedAnimation})},this.getTabs=()=>{let e=[],t="design"===this.props.editorType?TH.CJ:"";for(let n in this.shortcutList)xd(this.props.editorType,this.shortcutList[n].includeInEditorType,this.shortcutList[n].hideInEditorType)&&xu(this.shortcutList[n].featureFlags)&&e.push({displayName:this.shortcutList[n].displayName,id:n,active:this.state.activeTab==n,className:ea()(TH.Mf,t)});if("design"===this.props.editorType){let n={id:"spacer",className:ea()(TH.Mf,t)};e.push(n)}return e.push({displayName:Q.createElement(eO.Tx,{id:"whiteboard.keyboard_shortcuts.tab.layout"}),id:"layout",active:"layout"===this.state.activeTab,className:ea()(TH.Mf,t)}),this.props.isCKSLabEnabled&&e.push({displayName:Q.createElement(eO.Tx,{id:"keyboard_settings.custom_tab"}),id:"custom",active:"custom"===this.state.activeTab,className:ea()(TH.Mf,t)}),e},this.replayAllTabsCompletedAnimation=()=>{this.state.allTabsCompletedAnimation?this.stopAllTabsCompletedAnimation():this.playAllTabsCompletedAnimation(this.state.completedTabs)},this.onClose=()=>{this.props.dispatch(wF.FU({tab:null})),lT.Y5.triggerAction("toggle-keyboard-shortcuts")},this.onTablistKeyDown=e=>{var t,n,a,r;if("ArrowLeft"===e.key&&0===(0,es.sN)(e)){let n=null==(t=this.tabRefs.current)?void 0:t.findIndex(e=>!!e&&e.id===this.state.activeTab);if(!this.tabRefs.current||null==n)return;let a=n-1;for(;!this.tabRefs.current[a]&&a>0;)a--;0===n&&(a=this.tabRefs.current.length-1),this.tabRefs.current[a].focus(),this.onNavClick(this.tabRefs.current[a].id),e.preventDefault()}else if("ArrowRight"===e.key&&0===(0,es.sN)(e)){let t=null==(n=this.tabRefs.current)?void 0:n.findIndex(e=>!!e&&e.id===this.state.activeTab);if(!this.tabRefs.current||null==t)return;let a=t+1;for(;!this.tabRefs.current[a]&&a<this.tabRefs.current.length-1;)a++;t===this.tabRefs.current.length-1&&(a=0),this.tabRefs.current[a].focus(),this.onNavClick(this.tabRefs.current[a].id),e.preventDefault()}else if("Home"===e.key)this.tabRefs.current&&this.onNavClick(this.tabRefs.current[0].id),e.preventDefault();else if("End"===e.key)this.tabRefs.current&&this.onNavClick(this.tabRefs.current[this.tabRefs.current.length-1].id),e.preventDefault();else if("Tab"===e.key&&0===(0,es.sN)(e))null==(a=this.tabPanelRef.current)||a.focus(),e.preventDefault();else if("Escape"===e.key){if(null==(r=this.tabListRef.current)||r.blur(),this.tabRefs.current){let e=this.tabRefs.current.findIndex(e=>!!e&&e.id===this.state.activeTab);this.tabRefs.current[e].blur()}e.preventDefault()}else"Enter"===e.key?e.preventDefault():(0,pf.f7)(e)},this.tabRefs=Q.createRef(),this.tabListRef=Q.createRef(),this.tabPanelRef=Q.createRef()}componentInsertDisplayName(){return this.props.isUI3?"component-insert-display-name-ui3":"component-insert-display-name"}componentDidMount(){var e;null==(e=this.tabListRef.current)||e.focus()}getDefaultActiveTab(e){return"design"===e?"essential":"dev_handoff"===e?"view":"tools"}getCompletedTabs(e,t){let n=t??this.props.editorType,a={};for(let t in this.shortcutList){let r=!0;for(let a of this.shortcutList[t].columns)for(let t of a)if(xd(n,t.includeInEditorType,t.hideInEditorType)){for(let a of t.shortcuts)if(xd(n,a.includeInEditorType,a.hideInEditorType)&&Tj.keybindingsForShortcut(a.shortcutKey,this.props.useNumbersForOpacity,this.props.appModelKeyboardShortcuts)&&!(Tj.shortcutUsedCount(a.shortcutKey,e)>0)){r=!1;break}}a[t]=r}return a}findChangedKey(e,t,n){for(let a of this.shortcutList[e].columns)for(let e of a)for(let a of e.shortcuts)if(Tj.keybindingsForShortcut(a.shortcutKey,this.props.useNumbersForOpacity,this.props.appModelKeyboardShortcuts)){let e=Tj.shortcutUsedCount(a.shortcutKey,t);if(Tj.shortcutUsedCount(a.shortcutKey,n)>e)return a.shortcutKey}return null}allTabsCompleted(e){let t=!0;for(var n in e)if(!e[n]){t=!1;break}return t}playAllTabsCompletedAnimation(e){this.setState({completedTabs:e,allTabsCompleted:!0,tabCompletedFirstTimeAnimation:!1,tabCompletedAnimation:!1,allTabsCompletedAnimation:!0})}stopAllTabsCompletedAnimation(){this.setState({allTabsCompletedAnimation:!1})}playCompletedTabFirstTimeAnimation(e,t){setTimeout(()=>this.setState({completedTabs:t,tabCompletedFirstTimeAnimation:!0,tabCompletedAnimationKeyPosition:this.keyShortcutPositionsInTab[e],tabCompletedAnimation:!0}),1500),setTimeout(()=>this.setState({tabCompletedFirstTimeAnimation:!1,tabCompletedAnimation:!1}),6e3)}UNSAFE_componentWillReceiveProps(e){var t,n,a,r;let l=this.state.activeTab,i=l;l&&this.props.editorType!==e.editorType&&!xd(e.editorType,null==(n=null==(t=this.shortcutList)?void 0:t[l])?void 0:n.includeInEditorType,null==(r=null==(a=this.shortcutList)?void 0:a[l])?void 0:r.hideInEditorType)&&(i=this.getDefaultActiveTab(e.editorType));let o=this.getCompletedTabs(this.props.usedKeyboardShortcuts),s=this.getCompletedTabs(e.usedKeyboardShortcuts);if(this.allTabsCompleted(s)&&!this.allTabsCompleted(o))this.playAllTabsCompletedAnimation(s);else{let t=this.state.activeTab in xr.Jq?this.findChangedKey(this.state.activeTab,this.props.usedKeyboardShortcuts,e.usedKeyboardShortcuts):null;t&&s[this.state.activeTab]&&!o[this.state.activeTab]&&this.playCompletedTabFirstTimeAnimation(t,s)}this.setState({completedTabs:s,allTabsCompleted:this.allTabsCompleted(s),activeTab:i})}renderTabContents(){let e;let t={usedKeyboardShortcuts:this.props.usedKeyboardShortcuts,appModelKeyboardShortcuts:this.props.appModelKeyboardShortcuts};this.keyShortcutPositionsInTab={};let n=0,a=e=>(n++,this.keyShortcutPositionsInTab[e.shortcutKey]=n,xd(this.props.editorType,e.includeInEditorType,e.hideInEditorType)&&xu(e.featureFlags))?Q.createElement(Tj,{shortcutKey:e.shortcutKey,key:`shortcut-${this.state.activeTab}-${n}`,icon:e.icon,displayName:e.displayName,editorType:this.props.editorType,usage:e.usage,keyPosition:n,tabCompletedFirstTimeAnimation:this.state.tabCompletedFirstTimeAnimation,tabCompletedAnimation:this.state.tabCompletedAnimation,tabCompletedAnimationKeyPosition:this.state.tabCompletedAnimationKeyPosition,allTabsCompletedAnimation:this.state.allTabsCompletedAnimation,useNumbersForOpacity:this.props.useNumbersForOpacity,...t}):null,r=this.shortcutList[this.state.activeTab]?this.shortcutList[this.state.activeTab].columns.map((e,n)=>Q.createElement(xs,{...t,key:`column-${n}`},e.map((e,r)=>xd(this.props.editorType,e.includeInEditorType,e.hideInEditorType)?Q.createElement(xc,{caption:e.caption,key:`category-${n}-${r}`,...t},e.shortcuts.map(a)):null))):[];e=this.state.tabCompletedFirstTimeAnimation?TH.iV:this.state.completedTabs[this.state.activeTab]?TH.xd:TH.Y0,"layout"===this.state.activeTab&&(e=TH.Y0);let l="essential"===this.state.activeTab?Q.createElement(Q.Fragment,null,Q.createElement("div",{className:TH.pG},Q.createElement(eO.Tx,{id:"whiteboard.keyboard_shortcuts.essential_keyboard_shortcuts"})),Q.createElement("div",{className:TH.Bz},r)):"layout"===this.state.activeTab?Q.createElement("div",{className:TH.PG},Q.createElement(xa,null)):"custom"===this.state.activeTab&&this.props.isCKSLabEnabled?Q.createElement(TY,null):Q.createElement("div",{className:TH.PG},r);return Q.createElement("div",{role:"tabpanel",ref:this.tabPanelRef,id:xr.xC,"aria-labelledby":this.state.activeTab,className:e,tabIndex:0,"data-fullscreen-intercept":!0},l)}render(){let e=this.getTabs(),t="design"===this.props.editorType?TH.CJ:"",n=TH.C$;for(let a=0;a<e.length;a++){let r=e[a];if((0,xr.$w)(r)&&r.active){e[a].className=this.state.tabCompletedFirstTimeAnimation?ea()(TH.Ug,t):ea()(TH.yR,t),a>0?e[a-1].className=ea()(TH.gK,t):n=TH.JA,a<e.length-1?e[a+1].className=ea()(TH.hM,t):n=TH.NZ;break}}return Q.createElement("div",{className:TH.Ku,"data-fullscreen-intercept":!0},Q.createElement("div",{role:"tablist",ref:this.tabListRef,"aria-label":(0,eO.t)("keyboard_settings.keyboard_shortcuts"),className:n,onKeyDown:this.onTablistKeyDown,tabIndex:0},Q.createElement(xr.Qz,{tabInfo:e,completedTabs:this.state.completedTabs,onNavClick:this.onNavClick,recordingKey:this.props.recordingKey,ref:this.tabRefs}),Q.createElement("button",{className:TH.Nk,onClick:this.onClose,"aria-label":(0,eO.t)("general.close"),"data-fullscreen-intercept":!0},Q.createElement(eM.B,{svg:hW.default})),this.state.allTabsCompleted&&Q.createElement("div",{className:this.state.allTabsCompletedAnimation?TH.Yk:TH.C_,onClick:this.replayAllTabsCompletedAnimation},Q.createElement(eM.B,{svg:this.state.allTabsCompletedAnimation?xl.A:xi.A}))),this.renderTabContents())}}function xp(e){let t=(0,aD.GS)(),n=(0,$.d4)(e=>Object.keys(e.library.subscriptions.forCurrentOrg).length>0),a=(0,ex.o3)(ex.nt.customKeyboardShortcuts),r=(0,$.d4)(e=>e.usedKeyboardShortcuts),l=(0,$.d4)(e=>e.keyboardShortcutPanel.tab),i=(0,$.d4)(e=>e.mirror.appModel.keyboardShortcuts),o=(0,$.d4)(e=>"fullscreen"===e.selectedView.view?e.selectedView.editorType:"design"),s=(0,eG.J2)(cl.Ez5.editorState().useNumbersForOpacity),c=(0,$.wA)();return Q.createElement(xm,{recordingKey:e.recordingKey,usedKeyboardShortcuts:r,initActiveTab:l,appModelKeyboardShortcuts:i,editorType:o,hasSubscribedLibraries:n,useNumbersForOpacity:s,dispatch:c,isCKSLabEnabled:a,isUI3:t})}xm.displayName="KeyboardShortcutPanel";let x_=new Map,xf=Q.memo(function(){let e=(0,ci.GQ)(),t=(0,ef.md)(dA.Lc),n=(0,$.d4)(sY.ao),a=(0,t_.q5)(),r=(0,$.d4)(e=>e.versionHistory),l=(0,$.d4)(e=>e.leftPanel),i=(0,ci.cT)(),{pagesList:o,pageToNumChangesMap:s,isComparingChanges:c}=function(){let e=(0,ci.n0)(),t=(0,$.d4)(e=>!!(0,eo.kc)().version_diffing&&e.mirror.appModel.activeCanvasEditModeType===cl.m1T.COMPARE_CHANGES);return Q.useMemo(()=>{if(!t)return{pagesList:e,pageToNumChangesMap:x_,isComparingChanges:t};let n=(0,ru.ee)(e);return{pagesList:e.filter(e=>n.has(e.nodeId)),pageToNumChangesMap:n,isComparingChanges:t}},[t,e])}(),d=(0,c_.l7)(),u=(0,eG.J2)(cl.Ez5.uiState().showCanvasSearch),m=(0,aD.GS)();(0,ci.bi)();let p=!!a&&n,_=r.compareId;return Q.useEffect(()=>{p&&(0,uj.YQ)({id:"Found Updates To Publish"})},[p]),Q.createElement(tQ,null,Q.createElement(EH,null),Q.createElement(tJ.$B,null,m&&Q.createElement(EP,null),c&&_&&Q.createElement(Cn.ZI,{compareId:_,versions:r.versions}),u?Q.createElement(hh.Provider,{value:!0},Q.createElement(hX,{showFilter:!0})):c&&!o.length?Q.createElement("div",{className:tw.cx.p16.bb1.bSolid.colorBorder.$},Q.createElement(eO.Tx,{id:"collaboration.feedback.no_visible_changes"})):Q.createElement(gC,{recordingKey:"pagesPanel",isReadOnly:i,width:e,pagesList:o,hasTeamLibraryUpdates:t||p,activeTab:l.activeTab,showTabs:!i&&!d,isDevHandoff:!1,isDevHandoffOverview:d,isComparingChanges:c,pageToNumChanges:s})))});var xh=n(940914);function xg(e){return!!(0,eo.kc)().figjam_pages_creation&&!e}let xE=Q.memo(function(){let e=(0,ci.GQ)(),t=(0,ci.cT)(),n=(0,ci.n0)(),a=(0,t_.q5)();if((0,ci.bi)(),!a)return null;let r=xg((0,xh.Qy)(a));return Q.createElement(tQ,null,Q.createElement(EH,null),Q.createElement(tJ.$B,{height:tJ.RE.AUTO},Q.createElement(EP,null),Q.createElement(gC,{recordingKey:"pagesPanel",isReadOnly:t,width:e,pagesList:n,hasTeamLibraryUpdates:!1,activeTab:eU.xae.LAYERS,showTabs:!1,isDevHandoff:!1,isDevHandoffOverview:!1,isComparingChanges:!1,isPageCreationEnabled:r})))}),xv=Q.memo(function(){let e=(0,ci.GQ)(),t=(0,$.d4)(e=>e.leftPanel),n=(0,ci.cT)(),a=(0,ci.n0)(),r=(0,Q.useMemo)(()=>a.slice(1),[a]),l=(0,eG.J2)(cl.Ez5.uiState().showCanvasSearch);return(0,ci.bi)(),Q.createElement(tQ,null,Q.createElement(EH,null),Q.createElement(tJ.$B,null,Q.createElement(EP,null),l?Q.createElement(hh.Provider,{value:!0},Q.createElement(hX,{showFilter:!0})):Q.createElement(gC,{recordingKey:"pagesPanel",isReadOnly:n,width:e,pagesList:r,hasTeamLibraryUpdates:!1,activeTab:t.activeTab,showTabs:!n,isDevHandoff:!1,isDevHandoffOverview:!1,isComparingChanges:!1})))}),xy=Q.memo(function(){var e,t;let n=Q.useRef(null);!function({ref:e}){(0,Q.useEffect)(()=>{let t=t=>{let n=!!e.current&&t.target instanceof Node&&e.current.contains(t.target);eU.Ez5.singleSlideView().isCarouselFocused.set(n)};return window.addEventListener("click",t),()=>window.removeEventListener("click",t)},[e])}({ref:n});let a=(0,t_.Te)(),r=(0,ci.cT)(),l=(0,ci.n0)(),i=(0,ci.GQ)(),o=(0,$.d4)(e=>e.leftPanel),s=(0,eH.qw)()||240,[c,d]=(0,Q.useState)(()=>(0,eH.UK)().slidesLayersPanelHeight.getCopy()),[u,m]=(0,Q.useState)(()=>(0,eH.UK)().slidesLayersPanelExpanded.getCopy()),p=(0,eG.J2)(null==(e=eU.Ez5)?void 0:e.slidesToolMode()),_=(0,eG.J2)(eU.Ez5.uiState().showCanvasSearch),f=!_&&o.activeTab===eU.xae.LAYERS,h=(0,eo.kc)().piper_layers&&p===eU.EMA.DESIGN&&!_,g=u&&h;(0,Q.useEffect)(()=>{(0,eH.UK)().slidesLayersPanelHeight.set(c),(0,eH.UK)().slidesLayersPanelExpanded.set(u)},[c,u]);let E=(null==(t=n.current)?void 0:t.clientHeight)||window.innerHeight;return Q.createElement(tQ,{ref:n},Q.createElement(EH,null),Q.createElement(tJ.$B,null,Q.createElement(EP,null),_&&Q.createElement(hh.Provider,{value:!0},Q.createElement(hX,{showFilter:!0})),a&&!g&&!_&&Q.createElement(gC,{recordingKey:"pagesPanel",isReadOnly:r,width:i,isShowingSlidesCarousel:f,pagesList:l,hasTeamLibraryUpdates:!1,activeTab:o.activeTab,showTabs:!0,isDevHandoff:!1,isDevHandoffOverview:!1,isComparingChanges:!1}),f&&Q.createElement(f4.w,{size:E-c,side:"bottom",onResize:e=>d(E-e),disableResizing:!g,unsetSizeWhenDisabled:!0,className:tw.cx.relative.flex.flexColumn.if(!g,tw.cx.flex1.overflowHidden).$},Q.createElement(EM.FN,{recordingKey:"ssvCarousel"})),h&&Q.createElement(Q.Fragment,null,Q.createElement("div",{className:tw.cx.h0.wFull.bb1.bSolid.colorBorder.$}),Q.createElement(ab.P,{scrollBarAlways:!1,width:s,className:tw.cx.if(u,tw.cx.flexGrow1).$+" pagesPanel"},Q.createElement("button",{className:tw.cx.relative.flex.h40.itemsCenter.$,onClick:()=>m(e=>!e)},Q.createElement("div",{className:tw.cx.flex.itemsCenter.$},u?Q.createElement(co.O,null):Q.createElement(cs.k,null),Q.createElement(eO.Tx,{id:"fullscreen.pages_panel.layers_tab"}))),u?Q.createElement(xb,{width:s}):null))))});function xb({width:e}){let t=(0,ae.p8)("isReadOnly"),n=(0,ae.p8)("currentPage"),a=(0,eG.J2)((0,eH.UK)().showGuids),[r,l]=(0,Q.useState)(0),[i,o]=(0,Q.useState)(null),s=(0,$.d4)(e=>e.versionHistory),c=(0,c6.Fk)((e,t)=>{let n=e.get(t);return n?{guid:n.guid,children:n.uiOrderedChildren}:null},null);return Q.createElement(f5.XK,{key:"no-slide",topNodeFields:c,includeTopNode:!1,hasPending:!1,isReadOnly:t,currentPage:n,onScroll:l,initialScrollTop:r,width:e,shouldShowGuids:a,stickyOffset:0,renamingGuid:i,startRenaming:function(e){t||(o(e),eV.hq(e))},stopRenaming:function(e,n,a){t||(i&&e&&(cU.l7.user("set-node-name",()=>eV.i(i,n||"")),lT.Y5.commit(),cR.wt.reportEditActionIf(n!==a,"rename-node")),o(null))},thumbnailGuid:null,versionHistory:s})}var xC=n(196827),xw=n(389506),xT=n(169433);function xx(e){let t=e.mirror.sceneGraph,n=e.mirror.sceneGraphSelection;if(1!==Object.keys(n).length)return null;let a=t.get(Object.keys(n)[0]);return a&&"MEDIA"===a.type?a:null}var xN=n(423319),xk=n(761445);function xS(e,t){let n={};return n.useValue=function(a){if(t&&n[a]&&t(a,n[a])&&delete n[a],!n[a]){let t=(0,xk.v)();e(a).then(e=>t.resolve(e)).catch(e=>t.reject(e)),n[a]={deferred:t,created:Date.now()}}let{deferred:r}=n[a];switch(r.status){case"pending":throw r.promise;case"rejected":throw r.error;case"resolved":return r.result}},n}let xI=xS(xA);async function xA(e){let t=await (0,xN.OF)(()=>xP(e),10,1e3);return await new Promise((n,a)=>{let r=new Image;r.crossOrigin="anonymous",r.addEventListener("load",n),r.addEventListener("error",t=>{a(t.type+" loading the image with hash "+e)}),r.src=t}),t}async function xP(e){let t=(await (0,lG.Mj)([e],await lT.Y5.openFilePromise()))[e];if(!t)throw Error("Couldn't resolve image URL from server");return t}var xO=n(979100),xL=n(963039),xM=n(698024),xD=n(360122),xR=n(404968);let xF=xS(xB,(J=(e,t)=>Date.now()-t.created>6e4,(e,t)=>!t.deferred.result&&J(e,t)));async function xB(e){return await (0,xN.OF)(()=>xU(e),20,1e3)}async function xU(e){let t=await xH(e);if(!t)throw Error("Couldn't resolve video URL from server");return t}async function xH(e){let t=await lT.Y5.openFilePromise();if("figFile"!==t.type)throw Error("Unsupported file");try{let n=await xR.S.getVideosDownload({fileKey:t.fileKey,hexHash:e});if(200!==n.status||n.data.error)throw Error("api error while resolving video");return n.data.meta.signed_url}catch(t){throw console.warn(`Couldn't download video with hash ${e}`),t}}let xV=1/15;var xG=n(53201);let xK="rich_media_overlay--loadingFallback---qUKd",xW="rich_media_overlay--videoControlButton--syGqZ",xz="rich_media_overlay--videoButtonMaximizedScale--8Hkj5",xj="rich_media_overlay--croppedClipPath--BeUH-";var xY=n(68710),xZ=n(10448),xX=n(114843),xq=n(552601);let xJ={BUTTON_SHAPE_FILL:"#FFFFFF",BUTTON_BG_FILL:"#000000",BUTTON_STROKE_OPACITY:.2,BUTTON_BG_FILL_OPACITY:.7,BUTTON_BG_FILL_HOVER_OPACITY:.9};function xQ(e){if(null==e||Number.isNaN(e))return"";let{seconds:t,minutes:n}=(0,xM._d)(e);return`${n}:${String(t).padStart(2,"0")}`}function x$(e,t){e&&(t?(e.play(),ec.Ay.safari&&(e.currentTime=.1)):x1(e)?e.pause():(ec.Ay.safari&&e.currentTime>.1&&(e.currentTime-=.1),e.play()))}let x0=(0,Q.memo)(({mediaHash:e,isMaximized:t,setIsMaximized:n})=>{let a=xF.useValue(e),r=(0,t5.am)(),l=(0,Q.useRef)(null),[i,o,s,c]=function(){let[e,t]=Q.useState(!1),n=Q.useRef(null),a=()=>t(!0),r=()=>t(!1);return Q.useEffect(()=>{let e=n.current;if(e)return e.addEventListener("mousemove",a),e.addEventListener("mouseleave",r),()=>{e.removeEventListener("mousemove",a),e.removeEventListener("mouseleave",r)}},[n.current]),[Q.useCallback(e=>{if(null!==n.current){let e=n.current;e&&(e.removeEventListener("mousemove",a),e.removeEventListener("mouseleave",r))}if(n.current=e,null!==n.current){let e=n.current;e&&(e.addEventListener("mousemove",a),e.addEventListener("mouseleave",r))}},[]),n,e,t]}(),d=Q.useRef(null),u=Q.useRef(!1),m=(0,ep.R)(e=>{var t;return null==(t=e.openFile)?void 0:t.key})||"",p=(0,ef.md)(xG.v),[_,f]=(0,Q.useState)(!1);return Q.useEffect(()=>{p&&r("figjam_video_started_playing",{mediaHash:e})},[r,e,p]),Q.useEffect(()=>{u.current||(u.current=!0,async function(){window.VIDEOJS_NO_DYNAMIC_STYLE=!0;let t=await (0,xD.Fe)();if(d.current)return;let n=o.current;null!==n&&(n.style.height="100%",n.style.width="100%",n.style.display="flex",n.style.justifyContent="center",n.style.alignItems="center",d.current=t.videoJs(n,{muted:!1,controls:!1,controlBar:!1,bigPlayButton:!1,loadingSpinner:!1,errorDisplay:!1,textTrackSettings:!1,textTrackDisplay:!1,nativeTextTracks:!1},async()=>{try{let t=`/api/files/${m}/videos/${e}/manifest`;await (0,xD.uz)(t,!0,d.current)}catch{d.current&&(TB.k.warn("Reverting to fallback video source"),d.current.src({type:"video/mp4",src:a}))}}))}())},[m,e,o,a]),(0,Q.useEffect)(()=>{r("figjam_video_selected",{mediaHash:e})},[r,e]),Q.createElement("div",{className:"rich_media_overlay--videoContainer--oC3oc",ref:l},Q.createElement("div",{className:ea()("rich_media_overlay--clippedVideo--JljnC",t?"rich_media_overlay--noClipPath--ZooJK":xj)},Q.createElement("video",{ref:i,crossOrigin:"anonymous",autoPlay:p&&!ec.Ay.safari,className:ea()("rich_media_overlay--video--O6uP2",t&&eK.s4,t&&"rich_media_overlay--maximizedVideoBg--FUhbn"),onMouseUp:function(){document.activeElement instanceof HTMLElement&&document.activeElement.blur()},controls:ec.Ay.isIpad&&t,onClick:function(){t&&x$(o.current,_)}})),Q.createElement(x2,{videoRef:o,videoContainerRef:l,isMaximized:t,setIsMaximized:n,isVideoHovered:s,setIsVideoHovered:c,didAutoplayOnSelection:p,mediaHash:e,hasEnded:_,setHasEnded:f}))});function x1(e){return!!e&&!e.ended&&!e.paused&&e.currentTime>0&&e.readyState>2}function x2({videoRef:e,isMaximized:t,setIsMaximized:n,isVideoHovered:a,videoContainerRef:r,setIsVideoHovered:l,didAutoplayOnSelection:i,mediaHash:o,hasEnded:s,setHasEnded:c}){var d,u,m;let[p,_]=(0,Q.useState)(0),f=(0,Q.useRef)(!1),h=(0,Q.useRef)(i),[g,E]=(0,Q.useState)(null),[v,y]=(0,Q.useState)(!1),[b,C]=(0,Q.useState)(!1),w=(0,t5.am)(),[T,x]=(0,xO.M)(),[N,k]=(0,xO.M)(),S=function(){let[e,t]=(0,Q.useState)(!0),n=(0,ep.R)(xx),a=(0,ez.qc)((0,ez._X)({subscribeToUpdates_expensive:!1}));return(0,Q.useEffect)(()=>{let e=0,r=null==n?void 0:n.size;r&&(e=r.x*r.y),t(e/(a.height*a.width)<xV)},[null==n?void 0:n.size,a.height,a.width]),e}(),I=function(){let[e,t]=(0,Q.useState)(!0),n=(0,ep.R)(xx),a=(0,ez._X)({subscribeToUpdates_expensive:!1}),r=null==n?void 0:n.size;return(0,Q.useEffect)(()=>{r&&t(r.x*a.zoomScale<96||r.y*a.zoomScale<96)},[r,a.zoomScale]),e}(),A=(0,Q.useRef)(!1),[P,O]=(0,ef.fp)(xG.H),{isVideoNodeHovered:L,pointerDownOnVideo:M}=P,D=(0,Q.useRef)(!1),R=t&&(a||k),F=g||(null==(d=e.current)?void 0:d.currentTime),B=null==(u=e.current)?void 0:u.duration,U=x1(e.current),H=(0,Q.useRef)(void 0),V=(0,Q.useRef)(void 0);(0,Q.useEffect)(()=>{let e=(ec.Ay.isIpad?M:L)||x||R||!U||s||A.current;C(e),clearTimeout(null==H?void 0:H.current),e&&(H.current=setTimeout(()=>{s||!U||x||A.current||(C(!1),l(!1),O({isVideoNodeHovered:!1,pointerDownOnVideo:!1}))},3e3))},[s,R,U,L,x,l,O,M]);let G=(0,Q.useCallback)(()=>{_(e=>e+1)},[]);(0,Q.useEffect)(()=>{if(!e.current||!r.current)return;function a(){G()}function l(){A.current=!1}function i(){A.current=!1,c(!1)}function o(){c(!1),G()}function s(){A.current=!0}function d(){n(!t)}function u(){v||c(!0),G()}let m=e.current,p=r.current;return m.addEventListener("playing",o),m.addEventListener("canplay",a),m.addEventListener("ended",u),m.addEventListener("timeupdate",a),m.addEventListener("seeking",s),m.addEventListener("seeked",i),m.addEventListener("stalled",l),p.addEventListener(dY.R7.fullscreenChangeEventName,d),()=>{null==m||m.removeEventListener("playing",o),null==m||m.removeEventListener("canplay",a),null==m||m.removeEventListener("ended",u),null==m||m.removeEventListener("timeupdate",a),null==m||m.removeEventListener("seeking",s),null==m||m.removeEventListener("seeked",i),null==m||m.removeEventListener("stalled",l),null==p||p.removeEventListener(dY.R7.fullscreenChangeEventName,d)}},[t,v,G,c,n,r,e]);let K=(0,Q.useCallback)(()=>{e.current&&(!1===h.current&&(h.current=!0,w("figjam_video_started_playing",{mediaHash:o})),x$(e.current,s),G())},[s,o,G,w,e]),W=(0,Q.useCallback)(()=>{e.current&&(f.current=x1(e.current)||s,e.current.pause())},[s,e]),z=(0,Q.useCallback)(()=>{e.current&&(f.current&&e.current.play(),V.current&&(e.current.currentTime=V.current),E(null),V.current=void 0)},[e]),j=(0,Q.useCallback)(t=>{if(e.current){if(A.current){V.current=t;return}e.current.currentTime=t}},[e]),Y=Q.createElement(x6,{togglePlay:K,hasEnded:s,isPlaying:U,shouldShowVideoControls:b,isMaximized:t});return e.current&&!(2>((null==(m=e.current)?void 0:m.readyState)||0))||D.current?(D.current=!0,ec.Ay.isIpad&&t)?null:S?b&&!I?Y:null:Q.createElement(Q.Fragment,null,g?null:Y,Q.createElement("div",{className:ea()(eK.Uu,"rich_media_overlay--videoControls--Zyzyj",!b&&"rich_media_overlay--videoControlsHidden--BM1Cp"),ref:N},Q.createElement("div",{className:"rich_media_overlay--videoTime--nsc6o"},xQ(F)," / ",xQ(B)),Q.createElement(x3,{currentTime:F||0,totalTime:B||0,onScrubStart:W,onScrub:E,onScrubEnd:z,onVideoPositionUpdated:j,hasEnded:s,isScrubbing:v,setIsScrubbing:y}),Q.createElement("div",{className:"rich_media_overlay--videoRightControls--N0YPD"},Q.createElement(aJ.K0,{onClick:function(){if(t||document.fullscreenElement)dY.R7.exitFullscreenFunc();else if(ec.Ay.isIpad){let t=e.current;t&&t.webkitEnterFullscreen&&t.webkitEnterFullscreen()}else{let e=r.current;e&&dY.R7.requestFullscreenFunc.call(e)}},svg:t?xq.A:xX.A,className:xW,"data-tooltip-type":nO.Ib.TEXT,"data-tooltip":t?(0,eO.t)("whiteboard.video.minimize_tooltip"):(0,eO.t)("whiteboard.video.fullscreen_tooltip")}),Q.createElement(x5,{rerender:G,videoRef:e,volumeHoverRef:T})))):Q.createElement("div",{className:ea()(xK,xj,"rich_media_overlay--videoLoadingState--bxjOn")},Q.createElement(t2.kt,{size:"large"}))}function x5({rerender:e,videoRef:t,volumeHoverRef:n}){var a;let[r,l]=(0,Q.useState)(!1),i=(0,Q.useRef)(1),[o,s]=(0,Q.useState)((null==(a=t.current)?void 0:a.volume)||1),c=0===o,d=r&&!ec.Ay.isIpad,u=(0,Q.useCallback)(()=>{t.current&&(t.current.muted?(t.current.muted=!1,t.current.volume=i.current,s(i.current)):(t.current.volume>0&&(i.current=t.current.volume),t.current.muted=!0,s(0)),e())},[e,t]);return Q.createElement("div",{ref:n},Q.createElement(aJ.K0,{onClick:u,onMouseEnter:()=>l(!0),onMouseLeave:()=>l(!1),onMouseOut:()=>l(!1),svg:c?xZ.A:xY.A,className:ea()(xW,"rich_media_overlay--lastVideoControl--pU-xF",d&&"rich_media_overlay--selectedVolumeControlButton--IR-FO"),"data-tooltip-type":nO.Ib.TEXT,"data-tooltip":c?(0,eO.t)("whiteboard.video.unmute_tooltip"):(0,eO.t)("whiteboard.video.mute_tooltip")}),d?Q.createElement(x4,{volume:o,handleChange:e=>{let n=e.target.valueAsNumber;t.current&&(t.current.volume=n,t.current.muted=0===n),s(n)},setIsHovered:l}):null)}function x4({handleChange:e,setIsHovered:t,volume:n}){let a=100*n,r=(0,Q.useRef)(null);return Q.createElement("div",{onMouseEnter:()=>t(!0),onMouseLeave:()=>t(!1),className:"rich_media_overlay--volumeContainer--Wb1Hq"},Q.createElement("div",{className:"rich_media_overlay--volumeBox--qpdbu"},Q.createElement("input",{className:ea()("rich_media_overlay--volumeSliderInput--W1-jD",eK.Dm,eK.Uu),style:{background:`linear-gradient(to right,var(--active-slider-color) 0%,var(--active-slider-color) ${a}%,var(--inactive-slider-color) ${a}%,var(--inactive-slider-color) 100%)`},type:"range",min:0,max:1,step:.02,value:n,onChange:e,onKeyDown:function(e){(null==e?void 0:e.key)==="Escape"&&t(!1)},onMouseUp:function(){r.current instanceof HTMLInputElement&&r.current.blur()},ref:r})))}function x3({currentTime:e,totalTime:t,hasEnded:n,onVideoPositionUpdated:a,onScrubStart:r,onScrub:l,onScrubEnd:i,isScrubbing:o,setIsScrubbing:s}){let[c,d]=(0,Q.useState)(!1),u=(0,Q.useRef)(null),m=(0,Q.useRef)(null);(0,Q.useEffect)(()=>{if(o&&m.current)return document.addEventListener("pointermove",e),document.addEventListener("pointerup",n),()=>{document.removeEventListener("pointermove",e),document.removeEventListener("pointerup",n)};function e(e){if(!m.current)return;let n=e.clientX,{minX:r,maxX:i}=m.current,o=(0,xL.qE)(0,(n-r)/(i-r)*t,t);m.current.newTime=o,l(o),a(m.current.newTime)}function n(){m.current&&(a(m.current.newTime),s(!1),i(),m.current=null,document.activeElement instanceof HTMLElement&&document.activeElement.blur())}},[o,l,i,a,s,t]);let p=Math.min(e/t*100,100),_=p>0?8:0;return ec.Ay.safari&&n&&(p=100),Q.createElement("div",{className:"rich_media_overlay--videoTimeScrubberContainer--PnJdg",onPointerEnter:()=>d(!0),onPointerLeave:()=>d(!1)},Q.createElement("div",{role:"progressbar",tabIndex:0,className:"rich_media_overlay--videoTimeScrubber--9PES-",onPointerDown:e=>{if(!u.current)return;e.stopPropagation(),s(!0),r();let n=u.current.getBoundingClientRect(),l=n.x,i=n.x+n.width,o=e.clientX,c=(0,xL.qE)(0,(o-l)/(i-l)*t,t);a(c),m.current={minX:l,maxX:i,originX:e.clientX,newTime:c}}},Q.createElement("div",{className:"rich_media_overlay--videoTimeScrubberBackground--6Aulh",ref:u}),Q.createElement("div",{className:"rich_media_overlay--videoTimeScrubberProgress--73GkN",style:{width:`${p}%`}}),(c||o)&&Q.createElement("div",{className:"rich_media_overlay--videoTimeScrubberNub--9iFdo",style:{left:`calc(${p}% - ${_}px)`},onPointerDown:t=>{if(!u.current)return;t.stopPropagation(),s(!0),r();let n=u.current.getBoundingClientRect();m.current={minX:n.x,maxX:n.x+n.width,originX:t.clientX,newTime:e}},role:"button",tabIndex:0})))}function x6({shouldShowVideoControls:e,togglePlay:t,hasEnded:n,isPlaying:a,isMaximized:r}){let l=x9;return n?l=x8:a&&(l=Ne),Q.createElement(x7,{shouldShowVideoControls:e,ButtonIcon:l,togglePlay:t,isMaximized:r})}function x7({ButtonIcon:e,shouldShowVideoControls:t,togglePlay:n,isMaximized:a}){let[r,l]=(0,xO.M)(),i=l?xJ.BUTTON_BG_FILL_HOVER_OPACITY:xJ.BUTTON_BG_FILL_OPACITY;return Q.createElement("button",{ref:r,className:ea()(eK.Uu,"rich_media_overlay--videoButton--WB1tD",!t&&"rich_media_overlay--videoButtonHidden--7x6yl"),onPointerDown:function(){document.activeElement instanceof HTMLElement&&document.activeElement.blur(),n()}},Q.createElement(e,{fillOpacityForBackground:i,isMaximized:a}))}function x8({fillOpacityForBackground:e,isMaximized:t}){return Q.createElement("svg",{className:ea()(t&&xz),width:"48",height:"48",viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Q.createElement("path",{d:"M48 24C48 37.2548 37.2548 48 24 48C10.7452 48 0 37.2548 0 24C0 10.7452 10.7452 0 24 0C37.2548 0 48 10.7452 48 24Z",fill:xJ.BUTTON_BG_FILL,fillOpacity:e}),Q.createElement("path",{d:"M34 24C34 18.4772 29.7175 14 24.4348 14C20.5763 14 17.2515 16.3884 15.7391 19.8282V14H14V22.1818H21.8261V20.3636H17.4222C18.7028 17.6696 21.362 15.8182 24.4348 15.8182C28.757 15.8182 32.2609 19.4813 32.2609 24C32.2609 28.5187 28.757 32.1818 24.4348 32.1818C21.362 32.1818 18.7028 30.3304 17.4222 27.6364H15.5216C16.9131 31.3612 20.3792 34 24.4348 34C29.7175 34 34 29.5228 34 24Z",fill:xJ.BUTTON_SHAPE_FILL}),Q.createElement("rect",{x:"0.5",y:"0.5",width:"47",height:"47",rx:"23.5",stroke:xJ.BUTTON_BG_FILL,strokeOpacity:xJ.BUTTON_STROKE_OPACITY}))}function x9({fillOpacityForBackground:e,isMaximized:t}){return Q.createElement("svg",{className:ea()(t&&xz),width:"48",height:"48",viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Q.createElement("g",{clipPath:"url(#clip0_403_4259)"},Q.createElement("rect",{width:"48",height:"48",rx:"24",fill:xJ.BUTTON_BG_FILL,fillOpacity:e}),Q.createElement("path",{d:"M19 34V14L35 24L19 34Z",fill:xJ.BUTTON_SHAPE_FILL})),Q.createElement("rect",{x:"0.5",y:"0.5",width:"47",height:"47",rx:"23.5",stroke:xJ.BUTTON_BG_FILL,strokeOpacity:xJ.BUTTON_STROKE_OPACITY}),Q.createElement("defs",null,Q.createElement("clipPath",{id:"clip0_403_4259"},Q.createElement("rect",{width:"48",height:"48",rx:"24",fill:xJ.BUTTON_BG_FILL}))))}function Ne({fillOpacityForBackground:e,isMaximized:t}){return Q.createElement("svg",{className:ea()(t&&xz),width:"48",height:"48",viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Q.createElement("g",{clipPath:"url(#clip0_1_16)"},Q.createElement("rect",{width:"48",height:"48",rx:"24",fill:xJ.BUTTON_BG_FILL,fillOpacity:e}),Q.createElement("path",{d:"M15 15H21V33H15V15Z",fill:xJ.BUTTON_SHAPE_FILL}),Q.createElement("path",{d:"M27 15H33V33H27V15Z",fill:xJ.BUTTON_SHAPE_FILL})),Q.createElement("rect",{x:"0.5",y:"0.5",width:"47",height:"47",rx:"23.5",stroke:xJ.BUTTON_BG_FILL,strokeOpacity:xJ.BUTTON_STROKE_OPACITY}),Q.createElement("defs",null,Q.createElement("clipPath",{id:"clip0_1_16"},Q.createElement("rect",{width:"48",height:"48",rx:"24",fill:xJ.BUTTON_BG_FILL}))))}let Nt=Q.memo(function(){let e=(0,$.d4)(xx);return e&&e.richMediaInfo&&Q.createElement(Nn,{key:e.richMediaInfo.mediaHash,nodeGuid:e.guid,mediaHash:e.richMediaInfo.mediaHash,mediaType:e.richMediaInfo.richMediaType})}),Nn=Q.memo(function(e){let{nodeGuid:t,mediaHash:n,mediaType:a}=e,r=Q.useRef(null),l=Q.useRef(null),i=(0,ez._X)({subscribeToUpdates_expensive:!0}),[o,s]=Q.useState(!1);return Q.useEffect(()=>{var e;let n=(0,xT.EE)("rich-media",[t],e=>{l.current=e.position,Ni(r,i,l,o)});return l.current=(null==(e=n.currentNodePosition[t])?void 0:e.position)||null,Ni(r,i,l,o),()=>{(0,xT.lB)("rich-media")}},[t,i,o]),Q.createElement(Q.Fragment,null,Q.createElement("div",{ref:r,className:ea()("rich_media_overlay--richMediaOverlay--G9rnR",{"rich_media_overlay--maximizedMediaPositioner--vewL5":o})},Q.createElement(eP.tH,{fallback:Q.createElement(Nr,{mediaType:a,mediaHash:n}),boundaryKey:"Video"},Q.createElement(Q.Suspense,{fallback:Q.createElement(Na,null)},"ANIMATED_IMAGE"===a&&Q.createElement(Nl,{mediaHash:n}),"VIDEO"===a&&Q.createElement(x0,{mediaHash:n,setIsMaximized:s,isMaximized:o})))))});function Na(){return Q.createElement("div",{className:ea()(xK,xj)},Q.createElement(t2.kt,{size:"large"}))}function Nr({mediaHash:e,mediaType:t}){let n=Q.createElement(eO.Tx,{id:"whiteboard.gif.failed_to_load"});return"VIDEO"===t&&(n=Q.createElement(eO.Tx,{id:"whiteboard.video.failed_to_load"}),cl.tHB.isVideoBeingUploaded(e)&&(n=Q.createElement(eO.Tx,{id:"whiteboard.video.still_uploading"}))),Q.createElement("div",{className:ea()(xK,xj)},Q.createElement("div",{className:"rich_media_overlay--errorText--upGwm text--fontNeg16--JtecD text--_fontBase--QdLsd text--_negText--j9g-L"},n))}function Nl({mediaHash:e}){let t=xI.useValue(e),n=(0,t5.am)();return Q.useEffect(()=>{n("figjam_gif_started_playing")},[n]),Q.createElement("img",{crossOrigin:"anonymous",style:{height:"100%",backgroundColor:"white",width:"100%"},src:t,alt:"",className:xj})}function Ni(e,t,n,a){if(!e.current||!t||!n.current)return;let r=e.current;if(a)r.style.position="fixed",r.style.height="auto",r.style.width="auto",r.style.transform="none",r.style.pointerEvents="all";else{let e=n.current,a=(0,ez.Yb)(t,e);r.style.height=`${a.height}px`,r.style.width=`${a.width}px`,r.style.transform=`translate(${a.x+t.x}px, ${a.y+t.y}px) rotate(${e.angle}deg)`,r.style.transformOrigin="top left"}}var No=n(664630),Ns=n(521388),Nc=n(315640),Nd=n(574560),Nu=n(140869);let Nm=(0,rT.hG)(uT.Yub),Np=(0,rT.hG)(uT.Dts)+4;function N_({stamp:e,renderChildren:t}){let n=(0,ez._X)({subscribeToUpdates_expensive:!0}),[a,r]=(0,Q.useState)(null),l=(0,Nd.Yk)(),[i,o]=(0,Q.useState)(nO.Zj.ABOVE),[s,c]=(0,Q.useState)(null),d=e.guid;(0,Q.useEffect)(()=>{var e;let t=`stamp-tooltip-${d}`,n=(null==(e=(0,xT.EE)(t,[d],e=>r(e.position)).currentNodePosition[d])?void 0:e.position)||null;return r(n),()=>{(0,xT.lB)(t)}},[d]);let u=(0,Q.useMemo)(()=>a?(0,ez.Yb)(n,a.absoluteBounds):null,[a,n]),m=(0,Q.useMemo)(()=>u?{...u,x:u.x+n.x,y:u.y+n.y}:null,[u,n.x,n.y]),p=(0,Q.useMemo)(()=>!!u&&(0,ez.ZT)(u,n),[u,n]),_=(0,Q.useCallback)((e,t,a)=>{let r;let i=n.y+10,o=n.y+n.height-10-l-t.height,s=n.x+10,c=n.x+n.width-10-t.width,d=nO.Zj.ABOVE,u=(0,xL.qE)((0,Nu.Al)(e,t),s,c);return u+Nm+Np>e.x+e.width?(u=(0,xL.qE)(e.x+e.width+a,s,c),d=nO.Zj.RIGHT):u+t.width-Nm-Np<e.x&&(u=(0,xL.qE)(e.x-t.width-a,s,c),d=nO.Zj.LEFT),d===nO.Zj.LEFT||d===nO.Zj.RIGHT?r=(0,Nu.tJ)(e,t):(r=(0,Nu.T1)(e,t,a))<i&&(r=(0,Nu.DH)(e,t,a),d=nO.Zj.BELOW),{pos:d,x:u,y:(0,xL.qE)(r,i,o)}},[l,n]),f=(0,Q.useCallback)((e,t,n)=>_(e,t,n).x,[_]),h=(0,Q.useCallback)((e,t,n)=>_(e,t,n).y,[_]),g=(0,Q.useCallback)((e,t,n,a)=>{if(!m)return;let r=_(m,n,a).pos;o(r),c(a=>{let l=function({targetRect:e,tooltipRect:t,tooltipPosition:n}){let a=e.x-t.x+e.width/2,r=e.y-t.y+e.height/2,l=t.width-2*Nm-Np,i=t.height-2*Nm-Np;switch(n){case nO.Zj.ABOVE:return{left:(0,xL.qE)(a-Nm,Np,l),top:Math.floor(t.height)};case nO.Zj.BELOW:return{left:(0,xL.qE)(a-Nm,Np,l),top:-Nm};case nO.Zj.RIGHT:return{left:-Nm,top:(0,xL.qE)(r-Nm,Np,i)};case nO.Zj.LEFT:return{left:Math.floor(t.width),top:(0,xL.qE)(r-Nm,Np,i)}}}({targetRect:m,tooltipRect:{x:e,y:t,width:n.width,height:n.height},tooltipPosition:r});return a&&l.top===a.top&&l.left===a.left?a:l})},[_,m]);return m&&p?Q.createElement(Nu.lM,{style:{WebkitUserSelect:"none"},targetRect:m,offset:Nm,positionX:f,positionY:h,onPosition:g},t({arrowPosition:s,tooltipPosition:i})):null}let Nf="stamp_overlay--userText--FdBYI ellipsis--ellipsis--Tjyfa",Nh="stamp_overlay--tRexAvatarForeground--6Qkya",Ng={[nO.Zj.ABOVE]:"stamp_overlay--downArrow--VJLl5 stamp_overlay--arrow--F8-y5",[nO.Zj.BELOW]:"stamp_overlay--upArrow--PCqYY stamp_overlay--arrowInset--8zLXg stamp_overlay--arrow--F8-y5",[nO.Zj.RIGHT]:"stamp_overlay--leftArrow--u3dvc stamp_overlay--arrow--F8-y5",[nO.Zj.LEFT]:"stamp_overlay--rightArrow--G7DIa stamp_overlay--arrow--F8-y5"},NE={[nO.Zj.ABOVE]:"stamp_overlay--animationUp--Pq4mv stamp_overlay--animationBase--a-FJI",[nO.Zj.BELOW]:"stamp_overlay--animationDown--mBXfv stamp_overlay--animationBase--a-FJI",[nO.Zj.RIGHT]:"stamp_overlay--animationRight--2KY5g stamp_overlay--animationBase--a-FJI",[nO.Zj.LEFT]:"stamp_overlay--animationLeft--daYLK stamp_overlay--animationBase--a-FJI"};function Nv(e){let t=e.mirror.sceneGraph,n=Object.keys(e.mirror.sceneGraphSelection);if(1!==n.length)return null;let a=t.get(n[0]);return a&&"STAMP"===a.type?a:null}function Ny(e){let t=e.mirror.sceneGraph.get(e.mirror.appModel.hoveredNode);return t&&"STAMP"===t.type?t.guid:null}function Nb({shouldShowAvatar:e,avatarEntity:t,text:n}){return Q.createElement(Q.Fragment,null,e&&Q.createElement(Ns.Ro,{size:16,entity:t}),Q.createElement("div",{className:Nf},n))}function NC({size:e}){return Q.createElement("svg",{width:e,height:e,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Q.createElement("g",{clipPath:"url(#clip0_1941_43995)"},Q.createElement("rect",{className:"stamp_overlay--tRexAvatarBackground--tprTe",width:"16",height:"16"}),Q.createElement("path",{className:Nh,d:"M3 9.90476V8H9V9.42857V10.8571V13C9 15.2091 7.20914 17 5 17H0L-0.71875 11.7143L3 9.90476Z"}),Q.createElement("path",{className:Nh,fillRule:"evenodd",clipRule:"evenodd",d:"M4.81038 2.08926C3.50282 2.45482 3 3.93364 3 5.29134V8C3 8.55228 3.44771 9 4 9H13C13.5523 9 14 8.55228 14 8V6.16667C14 4.50981 12.6569 3.16667 11 3.16667H8.24357C7.98467 3.16667 7.73678 3.06531 7.53359 2.90486C7.09796 2.56089 6.25898 2 5.42 2C5.21483 2 5.00965 2.03354 4.81038 2.08926ZM5.75 5.5C6.16421 5.5 6.5 5.16421 6.5 4.75C6.5 4.33579 6.16421 4 5.75 4C5.33579 4 5 4.33579 5 4.75C5 5.16421 5.33579 5.5 5.75 5.5Z"}),Q.createElement("path",{className:Nh,d:"M11.8504 13.8881C10.8861 14.05 10.9477 12.5057 9.64966 12.5057C8.35158 12.5057 7.14966 13.3116 7.14966 12.1587C7.14966 11.0057 8.35155 11 9.64962 11C11.5299 11 12.8147 13.7262 11.8504 13.8881Z"})),Q.createElement("defs",null,Q.createElement("clipPath",{id:"clip0_1941_43995"},Q.createElement("circle",{r:"8",cx:"8",cy:"8",fill:"black"}))))}function Nw({stamp:e,shouldAnimate:t,testId:n}){var a,r;let l=(null==(a=e.stampData)?void 0:a.stampedByUserId)||null,i=(null==(r=e.stampData)?void 0:r.userId)||null,{user:o,loading:s}=(0,No.wW)(l),{user:c,loading:d}=(0,No.wW)(i),u=(0,$.d4)(e=>{var t,n;return null==(n=null==(t=e.openFile)?void 0:t.org)?void 0:n.name}),m=(()=>{var t;let n=!e.isFaceStamp,a=!!(null==(t=e.stampData)?void 0:t.votingSessionId);if(l&&s||i&&d)return Q.createElement(Q.Fragment,null,n&&Q.createElement("div",{className:"stamp_overlay--loadingAvatar--DkN-J stamp_overlay--loadingBase--2UAyM"}),Q.createElement("div",{className:"stamp_overlay--loadingUserText--845yi stamp_overlay--loadingBase--2UAyM"}));if(o){let e=o.handle;return Q.createElement(Nb,{shouldShowAvatar:n,avatarEntity:o,text:a?Q.createElement(eO.Tx,{id:"voting.stamp_tooltip.vote",userName:e}):i&&l!==i?Q.createElement("div",{className:"stamp_overlay--faceStampTooltipText--bMf1l"},null==c?void 0:c.handle," ",Q.createElement("br",null),Q.createElement("p",{className:"stamp_overlay--stampedByText--fK8AK"},Q.createElement(eO.Tx,{id:"whiteboard.stamp.stamped_by_tooltip",userName:e}))):e})}if(c){let e=c.handle;return Q.createElement(Nb,{shouldShowAvatar:n,avatarEntity:c,text:a?Q.createElement(eO.Tx,{id:"voting.stamp_tooltip.vote",userName:e}):e})}if(i&&(0,No.Fl)(i)||l&&(0,No.Fl)(l)){let e=a?Q.createElement(eO.Tx,{id:"voting.stamp_tooltip.visitor_vote"}):u?Q.createElement(eO.Tx,{id:"voting.stamp_tooltip.visitor_with_org",orgName:u}):Q.createElement(eO.Tx,{id:"voting.stamp_tooltip.visitor_without_org"});return Q.createElement(Nb,{shouldShowAvatar:n,avatarEntity:{id:l||i||void 0},text:e})}return l||i?Q.createElement(Nb,{shouldShowAvatar:n,avatarEntity:{},text:Q.createElement(eO.Tx,{id:"voting.stamp_tooltip.unavailable"})}):Q.createElement(Q.Fragment,null,Q.createElement(NC,{size:16}),Q.createElement("div",{className:Nf},Q.createElement(eO.Tx,{id:"voting.stamp_tooltip.old_stamp"})))})();return Q.createElement(N_,{stamp:e,renderChildren:({tooltipPosition:e,arrowPosition:a})=>Q.createElement("div",{className:t?NE[e]:""},Q.createElement("div",{className:"stamp_overlay--tooltip---xJx5 text--fontNeg11--StdFq text--_fontBase--QdLsd text--_negText--j9g-L","data-testid":n},m),a&&Q.createElement("div",{className:Ng[e],style:a}))})}let NT=Q.memo(function(){let e=(0,$.d4)(Nv);return Q.createElement(Q.Fragment,null,e&&Q.createElement(Nw,{stamp:e,shouldAnimate:!0,key:e.guid,testId:"selected-stamp-tooltip"}))}),Nx=Q.memo(function(){var e;let t=(0,$.d4)(Ny),[n,a]=(0,Q.useState)(null),[r,l]=(0,Q.useState)(!0),i=(0,$.d4)(e=>n?e.mirror.sceneGraph.get(n):null),o=(0,$.d4)(Nv),s=(0,Nc.d0)();return((0,Q.useEffect)(()=>{let e=!!n;if(t!==n&&(t||n)){if(t&&e){l(!1),a(t);return}if(t&&!e){let e=setTimeout(()=>{a(t)},100);return()=>clearTimeout(e)}if(!t&&e){let e=setTimeout(()=>{a(null),l(!0)},300);return()=>clearTimeout(e)}}},[t,n]),(null==o?void 0:o.isFaceStamp)&&!(null==(e=null==o?void 0:o.stampData)?void 0:e.votingSessionId)&&s)?null:Q.createElement(Q.Fragment,null,i&&Q.createElement(Nw,{stamp:i,key:i.guid,testId:"hovered-stamp-tooltip",shouldAnimate:r}))}),NN=Q.memo(function(){return(0,ec.aJ)()?Q.createElement(Nx,null):Q.createElement(NT,null)});var Nk=n(87481),NS=n(821394),NI=n(709655),NA=n(772242),NP=n(988533),NO=n(371643),NL=n(937749),NM=n(206520),ND=n(985190),NR=n(267038),NF=n(336163),NB=n(148886),NU=n(316178),NH=n(951851),NV=n(473680),NG=n(856348),NK=n(736176),NW=n(918434),Nz=n(971843),Nj=n(553227);let NY="browse_modal_empty_search_result--emptyStateText---rbwv ellipsis--ellipsis--Tjyfa text--fontPos13--xW8hS text--_fontBase--QdLsd",NZ="browse_modal_empty_search_result--emptyStateStrongText--fyWIi",NX="browse_modal_empty_search_result--communityLink--5KNv4 text--fontPos13--xW8hS text--_fontBase--QdLsd";function Nq(e){let{defaultDisplayStringResourceType:t,query:n,cta:a,orgNameIfAllowlistEnforced:r}=e;return Q.createElement("div",{className:"browse_modal_empty_search_result--emptyState--XyC30 tiles_view--emptyState--lR8Xc text--fontPos11--2LvXf text--_fontBase--QdLsd"},e.illustration&&Q.createElement(eM.B,{className:"browse_modal_empty_search_result--emptyStateIllustrations--M9hN-",svg:e.illustration,useOriginalSrcFills_DEPRECATED:!0}),Q.createElement("div",{className:"browse_modal_empty_search_result--emptyStateTextWrapper--7z4U6"},r?Q.createElement("span",{className:"browse_modal_empty_search_result--emptyStateText2Lines--xoqUp ellipsis--ellipsisAfter2Lines--Qo-Xh ellipsis--_ellipsisAfterNLines--LzI7k text--fontPos13--xW8hS text--_fontBase--QdLsd"},Q.createElement(eO.Tx,{id:"whiteboard.inserts.couldn_t_find_resource_in_org_allowlist",orgName:r,searchQuery:Q.createElement("span",{className:NZ},n)})):Q.createElement("span",{className:NY},t?Q.createElement(eO.Tx,{id:"whiteboard.inserts.couldn_t_find_default_display_string_resource_type_for",resourceType:t,searchQuery:Q.createElement("span",{className:NZ},n)}):Q.createElement(eO.Tx,{id:"whiteboard.inserts.custom_display_string_search_result",searchQuery:Q.createElement("span",{className:NZ},n)}))),a&&Q.createElement("div",null,a))}function NJ(e){let t=(0,Nj.BI)();return(null==t?void 0:t.shouldOptimizeForIpadApp)||(0,eo.kc)().cmty_m10n_test_apple_os?null:Q.createElement(Q.Fragment,null,e.resourceType&&e.resourceType===NK.bD.HUB_FILE?Q.createElement("span",{className:NY},Q.createElement(eO.Tx,{id:"whiteboard.inserts.if_you_re_still_looking_there_s_much_more_to_see_in_the",link:Q.createElement("a",{className:NX,href:e.url,target:"_blank"},Q.createElement(eO.Tx,{id:"whiteboard.inserts.if_you_re_still_looking_there_s_much_more_to_see_in_the_community"}))})):Q.createElement("a",{className:NX,href:e.url,target:"_blank"},Q.createElement(eO.Tx,{id:"whiteboard.inserts.see_more_from_community"})))}var NQ=n(849359),N$=n(640439),N0=n(298742);let N1="browse_library_items_container--browseLibraryItemsContainer--Keunc";function N2(e){return Q.createElement("div",{className:Object.keys(e.items).length>5?"browse_library_items_container--container--FpYi3":"browse_library_items_container--smallContainer--3V6cZ"},Object.keys(e.items).sort().map(t=>Q.createElement(N5,{items:e.items[t],layoutOverride:e.layoutOverride,key:t,showContextMenu:e.showContextMenu})))}function N5(e){let{height:t,width:n,gridClassName:a}=N4(e.layoutOverride||(0,uz.PI)(e.items)),r=(0,N0.b)(),{currentTab:l}=(0,N$.cX)(),i=(0,$.wA)();return Q.createElement("div",{className:`${a} ${N1}`},e.items.map((a,o)=>Q.createElement(pz.lX,{key:o,item:a,height:t,width:n,showName:!1,shouldHideDescription:!0,shouldShowShadowOnHover:!0,isFigJam:!0,noBackground:!0,isSearch:!1,itemPadding:8,draggable:{sourceForTracking:(0,NG.V)(l),afterSuccessfulInsert:r,clickToInsert:!0},onContextMenu:t=>{e.showContextMenu&&(t.preventDefault(),i(nP.j7({type:N7,data:{fileKey:a.file_key,position:{top:t.clientY,left:t.clientX}}})))}})),Q.createElement(N8,null))}let N4=e=>{switch(e){case uz.rp.SMALL:return{height:60,width:60,gridClassName:"browse_library_items_container--gridContainerSmall--bE7eB"};case uz.rp.NORMAL:return{height:73,width:73,gridClassName:"browse_library_items_container--gridContainerNormal---Y3Kz"};case uz.rp.WIDE:return{width:432,gridClassName:"browse_library_items_container--gridContainerWide--huzZQ"};default:(0,re.xb)(e)}},N3=_O.W.Dropdown,N6=_O.W.Option,N7="FIGJAM_LIBRARY_ITEM_DROPDOWN_KEY";function N8(){var e,t,n;let a=(0,aX.U)(),r=null==(t=(0,NQ.$Q)(null==(e=null==a?void 0:a.data)?void 0:e.fileKey))?void 0:t.data,l=(0,N$.cX)().setSelectedCategory,i=(0,$.wA)();return(null==a?void 0:a.type)===N7&&r?Q.createElement(N3,{style:tT.sx.add(null==(n=null==a?void 0:a.data)?void 0:n.position).add(tT.sx.fixed).$},Q.createElement(N6,{onClick:()=>{i(nP.oB()),l({id:a.data.fileKey,title:r.name,resourceType:NG.R.STICKERS_AND_COMPONENTS})}},Q.createElement(eO.Tx,{id:"whiteboard.inserts.view_stickers_in_this_set"}))):null}function N9(e){var t;let n=(null==(t=(0,NQ.$Q)(e.fileKey).data)?void 0:t.name)||"",a=()=>e.onClick(n),r=(0,uz.PI)(e.items),l=ke(r),{height:i,width:o}=l,s=r===uz.rp.WIDE?2:8,c=(0,N0.b)();return Q.createElement("div",{className:"library_items_compact_view--librariesTwoColumnsItemPadding--Wl9Nv"},Q.createElement("button",{onClick:a,className:l.gridClassName},e.items.slice(0,s).map((e,t)=>Q.createElement(pz.lX,{key:t,item:e,height:i,width:o,showName:!1,shouldHideDescription:!0,shouldShowShadowOnHover:!0,isFigJam:!0,noBackground:!0,isSearch:!1,onItemClick:a,draggable:{sourceForTracking:"universal-insert-figjam-stickers-compact-view",afterSuccessfulInsert:c,clickToInsert:!1}}))),Q.createElement("button",{onClick:a,className:"library_items_compact_view--libraryTitle--wIVmD ellipsis--ellipsis--Tjyfa text--fontPos13--xW8hS text--_fontBase--QdLsd"},n))}let ke=e=>{switch(e){case uz.rp.SMALL:case uz.rp.NORMAL:return{height:40,width:40,gridClassName:"library_items_compact_view--browseLibraryItemsContainer--pNmFL"};case uz.rp.WIDE:return{width:184,height:40,gridClassName:"library_items_compact_view--wideGrid--XbpRp library_items_compact_view--browseLibraryItemsContainer--pNmFL"};default:(0,re.xb)(e)}};var kt=n(927168);let kn="loading_states--title--TC60j loading_states--greyBase--bbKGM",ka="loading_states--firstTitle--QfkUE loading_states--title--TC60j loading_states--greyBase--bbKGM",kr="loading_states--titleLighter--mwtNY loading_states--title--TC60j loading_states--greyBase--bbKGM",kl="loading_states--titleLightest--BQ32t loading_states--title--TC60j loading_states--greyBase--bbKGM",ki="loading_states--largeCard--XHghX",ko="loading_states--container--YyIRL",ks="loading_states--largeCardAndTextContainer--J-GCt",kc="loading_states--titleAndDescriptionContainer--Lopl5",kd="loading_states--sticker--4XK0K loading_states--greyBase--bbKGM",ku="loading_states--pluginTile--ONKW2",km="loading_states--pluginIcon--Tx1hy loading_states--greyBase--bbKGM";function kp(){return Q.createElement(Q.Fragment,null,Q.createElement("div",{className:ka}),Q.createElement("div",{className:ko},Q.createElement(kE,{shouldFade:!1}),Q.createElement(kE,{shouldFade:!1}),Q.createElement(kE,{shouldFade:!0})))}function k_(){return Q.createElement(Q.Fragment,null,Q.createElement("div",{className:ka}),Q.createElement("div",{className:"loading_states--pluginTileContainer--JRZGS"},Q.createElement("div",{className:ku},Q.createElement("div",{className:km}),Q.createElement(ky,null)),Q.createElement("div",{className:ku},Q.createElement("div",{className:km}),Q.createElement(ky,null)),Q.createElement("div",{className:ku},Q.createElement("div",{className:km}),Q.createElement(ky,null)),Q.createElement("div",{className:ku},Q.createElement("div",{className:"loading_states--pluginIconLighter--k7tqf loading_states--pluginIcon--Tx1hy loading_states--greyBase--bbKGM"}),Q.createElement(ky,null)),Q.createElement("div",{className:ku},Q.createElement("div",{className:"loading_states--pluginIconLightest--axJAz loading_states--pluginIcon--Tx1hy loading_states--greyBase--bbKGM"}),Q.createElement(kb,null))))}function kf(){return Q.createElement(Q.Fragment,null,Q.createElement("div",{className:ka}),Q.createElement(kg,null),Q.createElement("div",{className:"loading_states--stickerTitle--YEosJ loading_states--firstTitle--QfkUE loading_states--title--TC60j loading_states--greyBase--bbKGM"}),Q.createElement("div",{className:ko},Q.createElement(kE,{shouldFade:!0})))}function kh(){return Q.createElement("div",{className:"loading_states--flexContainer--t0XH4"},Q.createElement(kv,null),Q.createElement(kg,null),Q.createElement("div",{className:"loading_states--divider--MY-EG"}),Q.createElement(kv,null),Q.createElement("div",{className:ko},Q.createElement(kE,{shouldFade:!0})))}function kg(){return Q.createElement("div",{className:"loading_states--stickerGrid--Wv-o1"},Q.createElement("div",{className:kd}),Q.createElement("div",{className:kd}),Q.createElement("div",{className:kd}),Q.createElement("div",{className:kd}),Q.createElement("div",{className:kd}),Q.createElement("div",{className:kd}),Q.createElement("div",{className:kd}),Q.createElement("div",{className:kd}),Q.createElement("div",{className:kd}),Q.createElement("div",{className:kd}))}function kE(e){return Q.createElement("div",{className:"loading_states--rowContainer--oHoUG"},Q.createElement("div",{className:ks},Q.createElement("div",{className:e.shouldFade?"loading_states--largeCardLighter--67tCH loading_states--largeCard--XHghX":ki}),Q.createElement("div",{className:e.shouldFade?kr:kn})),Q.createElement("div",{className:ks},Q.createElement("div",{className:e.shouldFade?"loading_states--largeCardLightest--P-6Nd loading_states--largeCard--XHghX":ki}),Q.createElement("div",{className:e.shouldFade?kl:kn})))}function kv(){return Q.createElement("div",{className:"loading_states--titleAndDescriptionContainerWithMargin--sUBNg loading_states--titleAndDescriptionContainer--Lopl5"},Q.createElement("div",{className:kn}),Q.createElement("div",{className:"loading_states--description--dilCZ loading_states--title--TC60j loading_states--greyBase--bbKGM"}))}function ky(){return Q.createElement("div",{className:kc},Q.createElement("div",{className:kr}),Q.createElement("div",{className:"loading_states--descriptionLighter--on5VU loading_states--description--dilCZ loading_states--title--TC60j loading_states--greyBase--bbKGM"}))}function kb(){return Q.createElement("div",{className:kc},Q.createElement("div",{className:kl}),Q.createElement("div",{className:"loading_states--descriptionLightest--7XQdm loading_states--description--dilCZ loading_states--title--TC60j loading_states--greyBase--bbKGM"}))}let kC="libraries_tab--sectionTitle--PDAa- ellipsis--ellipsis--Tjyfa text--fontPos13--xW8hS text--_fontBase--QdLsd",kw="libraries_tab--libraryPadding--Dwvws";var kT=n(236705);function kx({query:e}){let{openFile:t,fileVersion:n,loadingState:a,library:r}=(0,ep.R)(e=>({openFile:e.openFile,fileVersion:e.fileVersion,loadingState:e.loadingState,library:e.library})),{assetsPanelSearch:l}=r,{productComponents:i}=(0,uI.g5)(dz.$A.FigJam),o=(0,N$.ik)(i,"components",(e,t)=>!t.some(t=>t.id===e.id),10),s=(0,m_.oh)(dk.fi),c=(0,N$.mk)(o,[!s,(0,m_.mC)(NO.fC)]),d=(0,N$.cX)().setSelectedCategory,u=!t||!n||!(0,m_.D2)(a,(0,mf.yD)(t.key)),m=(0,N$.hY)(),{onToggleLibraryModal:p}=dI({entrypoint:dd.r6.FIGJAM_BROWSE,modalType:"figjam"}),_=Q.useMemo(()=>(0,cq.Ow)(l.normalizedSearchResults),[l.normalizedSearchResults]);return l.query&&e?l.isLoading?Q.createElement(kf,null):Q.createElement(t6.fu,{name:"stickers",properties:{query:e,resourceType:Nz.p.STICKERS_AND_COMPONENTS}},0===_.length?Q.createElement(Nq,{illustration:kT.A,defaultDisplayStringResourceType:"stickers or components",query:e}):Q.createElement("div",{className:kw},Q.createElement(N2,{items:{"":_},showContextMenu:!0,layoutOverride:l.query?uz.rp.NORMAL:void 0}))):Q.createElement(t6.fu,{name:"stickers"},(u||s)&&Q.createElement(kf,null),!u&&!l.query&&Q.createElement(kt.W,{dismissable:!0,buttonText:"Update",formatBannerText:e=>`${e} component ${(0,lA.LD)(e,"update")}`}),Q.createElement("div",{className:kC},Q.createElement(eO.Tx,{id:"whiteboard.inserts.recents"})),Q.createElement(N2,{items:{"":c},showContextMenu:!0,layoutOverride:uz.rp.NORMAL}),Q.createElement("div",{className:kC},Q.createElement(eO.Tx,{id:"whiteboard.inserts.libraries"})),Q.createElement("div",{className:"libraries_tab--librariesTwoColumns--dSOU-"},(!l.query||!e)&&(0,eo.Ay)().user_data&&Q.createElement("div",{className:"libraries_tab--librariesTwoColumnsItemPadding--YeBjB"},Q.createElement("button",{className:"libraries_tab--toggleLibraryModalContainer--lup1l text--fontPos13--xW8hS text--_fontBase--QdLsd",onClick:p,"data-onboarding-key":th.D},Q.createElement(eM.B,{svg:s9.A}),Q.createElement("span",null,Q.createElement(eO.Tx,{id:"whiteboard.inserts.add_your_own"})))),Object.keys(m.fileKeyToSubscribedItems).map(e=>Q.createElement(N9,{key:e,fileKey:e,items:function(e){let t=[],n=kS(e);return Object.keys(n).sort().forEach(e=>{t.push(...n[e])}),t}(m.fileKeyToSubscribedItems[e]),onClick:t=>{d({id:e,title:t,resourceType:NG.R.STICKERS_AND_COMPONENTS})}}))))}function kN(e){let t=(0,N$.hY)();return t.fileKeyToSubscribedItems[e.selectedLibrary.id]?Q.createElement(t6.fu,{name:"detail",properties:{resourceId:e.selectedLibrary.id,resourceType:Nz.p.STICKERS_AND_COMPONENTS}},Q.createElement("div",{className:kw},Q.createElement(N2,{items:kS(t.fileKeyToSubscribedItems[e.selectedLibrary.id]),showContextMenu:!1}))):null}function kk(){let e=(0,$.wA)(),{openFile:t,fileVersion:n,loadingState:a}=(0,ep.R)(e=>({openFile:e.openFile,fileVersion:e.fileVersion,loadingState:e.loadingState})),r=t&&n&&(0,m_.Sc)(a,(0,mf.yD)(t.key));Q.useEffect(()=>{r&&e(cj.zK({}))},[e,r]);let{productComponents:l}=(0,uI.g5)(dz.$A.FigJam),i=(0,N$.ik)(l,"components",(e,t)=>!t.some(t=>t.id===e.id),10),o=(0,N$.mk)(i,[(0,m_.mC)(dk.fi),(0,m_.mC)(NO.fC)]);return Q.createElement(N2,{items:{"":o},showContextMenu:!0,layoutOverride:uz.rp.NORMAL})}function kS(e){let t={};return(0,n_.KQ)(e,"name",{useExpensiveNaturalComparison:e.length<n_.Tw}),e.forEach(e=>{var n;let a=(null==(n=e.containing_frame)?void 0:n.name)||"";t[a]||(t[a]=[]),t[a].push(e)}),t}var kI=n(931538),kA=n(352600),kP=n(406125),kO=n(117276),kL=n(803077),kM=n(204927),kD=n(471967),kR=n(430713),kF=n(318726),kB=n(684136),kU=n(493334),kH=n(704268),kV=n(85741);let kG="figjam_detail_in_editor_top_bar--backButton--Q5crN",kK="figjam_detail_in_editor_top_bar--ctaButton--hKCbt",kW="figjam_detail_in_editor_top_bar--chevronContainerWhite--EZcGk",kz="figjam_detail_in_editor_top_bar--topBar--x9sDw",kj="figjam_detail_in_editor_top_bar--left--K0x8U",kY="figjam_detail_in_editor_top_bar--right--jXKNf",kZ="figjam_detail_in_editor_top_bar--pluginMetadataContainer--I39tz",kX="figjam_detail_in_editor_top_bar--pluginTileNameContainer--11U-p",kq="figjam_detail_in_editor_top_bar--pluginTileName--jini0 text--fontPos13--xW8hS text--_fontBase--QdLsd ellipsis--ellipsis--Tjyfa",kJ="figjam_detail_in_editor_top_bar--pluginTilePublishers--9MpEZ text--fontPos11--2LvXf text--_fontBase--QdLsd ellipsis--ellipsis--Tjyfa",kQ="figjam_detail_in_editor_top_bar--searchCloseButton--Oz51w browse_modal_container--searchCloseButton--WHSfL";function k$(e){let t=(0,$.wA)(),n=Q.useRef(null),a=(0,aX.U)(),r="whiteboard"===(0,mD.lg)(),l=(0,kV.F5)(),i=(0,N$.cX)().currentTab,o=(0,N$.cX)().searchQuery,s=(0,NG.V)(i),c=(0,kH.Gt)(e.pluginId,s),d=(0,kH.dR)(e.pluginId,s),u=(0,kH.RK)(e.pluginId),m=(0,kH.t0)(e.pluginId,c,d).length>0,p=m&&(null==a?void 0:a.type)===eK.LO,_=(0,N0.b)(),{validatePublishedPluginInOrgAllowlist:f,isPluginBlockedByAllowlist:h}=(0,ig.j1)(e.pluginId),g=Q.useCallback(a=>{var i;if(a.stopPropagation(),f()){if(r&&(0,kV.oM)({id:e.pluginId,type:Nz.p.PLUGINS,source:s,options:{...l,query:o}}),m){p?t(nP.oB()):t(nP.j7({type:eK.LO,data:{pluginId:e.pluginId,view:e.view,target:null==(i=n.current)?void 0:i.getBoundingClientRect(),triggeredFrom:s}}));return}u?c():d(),_()}},[f,r,m,_,e.pluginId,e.view,s,l,o,p,t,u,c,d]),{buttonCta:E,isNotInHeader:v}=e,y=(0,$.d4)(e=>(0,cp.zg)(e.selectedView)&&!e.user),[b,C]=Q.useState(y);Q.useEffect(()=>{C(y)},[y]);let w=v?nc.$$:nc.nR,T=y?void 0:g;return Q.createElement("div",{ref:n,"data-not-draggable":!0,"data-testid":"run-cta-button"},Q.createElement(w,{onClick:ec.Ay.isIpad?void 0:T,onPointerDown:ec.Ay.isIpad?T:void 0,className:y||h?"figjam_detail_in_editor_top_bar--disabledButton--F9yLz basic_form--primaryBtn--AU7Gy basic_form--btn--FSrmp ellipsis--ellipsis--Tjyfa text--fontPos11--2LvXf text--_fontBase--QdLsd figjam_detail_in_editor_top_bar--ctaButton--hKCbt":kK},E,m&&Q.createElement(eM.B,{svg:hK.A,className:v||y?kW:"figjam_detail_in_editor_top_bar--chevronContainerBlack--YvD9R"})))}var k0=n(132708),k1=n(541983),k2=n(651505),k5=n(819076),k4=n(194494),k3=n(158678);let k6="browse_plugins_universal_modal_tiles--savedPluginTile--pLNFr browse_plugins_universal_modal_tiles--browsePluginTile--99ESx",k7="browse_plugins_universal_modal_tiles--pluginTileIcon--C0pTJ",k8="browse_plugins_universal_modal_tiles--browsePluginTileRightSide--u74qu",k9="browse_plugins_universal_modal_tiles--savedPluginTileLeftSide--nqHJe browse_plugins_universal_modal_tiles--browsePluginTileRightSide--u74qu",Se="browse_plugins_universal_modal_tiles--pluginTileDescription--gno7V text--fontPos11--2LvXf text--_fontBase--QdLsd ellipsis--ellipsis--Tjyfa",St="browse_plugins_universal_modal_tiles--showOnPluginTileHover--qnFcH";var Sn=n(610837),Sa=n(111431);let Sr=(0,kF.M)(),Sl=Q.forwardRef((e,t)=>{let n=(0,$.wA)(),{localFileId:a,view:r}=e,l=(0,N$.cX)().setPreviewResource,i=(0,ig.nl)(),o=a?i[a]:null,s=(0,ig.kd)(),c=o?o.plugin_id:e.publishedPlugin.id,d=e.publishedPlugin??s.find(e=>e.id===c),u=null==d?void 0:d.versions[d.current_plugin_version_id],m=!!u,p=Q.useRef(null),_=(0,aX.U)(),f=(null==_?void 0:_.type)===k5.lD&&_.data.localFileId===a&&_.data.pluginId===c&&_.data.view===r&&_.data.targetRect,{currentTab:h,searchQuery:g}=(0,N$.cX)(),{dragState:E,onInsertableResourcePointerDown:v}=(0,kR.c)({clickToInsert:!1,afterSuccessfulInsert:(0,N0.b)(),triggeredFrom:(0,NG.V)(h),resource:o??u,searchQuery:g});if(!o&&!d)return null;let y=()=>{a&&Sr.openExtensionDirectory(a)};return Q.createElement(Q.Fragment,null,Q.createElement("div",{className:k6,onPointerDown:v,role:"button",tabIndex:0,ref:t},Q.createElement("div",{role:"button",tabIndex:0,className:k9,onClick:()=>m?l({id:u.plugin_id,type:NG.R.PLUGINS}):y()},Q.createElement("div",{className:k7},m&&u?Q.createElement(aU.V,{plugin:u,loading:"lazy",alt:""}):Q.createElement(eM.B,{svg:Sa.A})),Q.createElement("div",{className:k8},Q.createElement("div",{className:"browse_plugins_universal_modal_tiles--developmentPluginPrimaryText--25RR9"},Q.createElement("span",{className:"browse_plugins_universal_modal_tiles--developmentPluginName--f75Vj browse_plugins_universal_modal_tiles--pluginTileName--z1OSk text--fontPos13--xW8hS text--_fontBase--QdLsd ellipsis--ellipsis--Tjyfa"},u?u.name:o.name),d&&kB.tY.PluginManagementTitleBadge(d)),Q.createElement(k0.A,{localResource:o,publishedResource:d}))),Q.createElement("div",{className:"browse_plugins_universal_modal_tiles--developmentTileRightSide----HW6"},Q.createElement(aJ.K0,{svg:iI.A,ref:p,onClick:e=>{let t=e.currentTarget.getBoundingClientRect();n(nP.j7({type:k5.lD,data:{localFileId:a,pluginId:c,view:r,targetRect:t}}))},className:ea()(St,{"browse_plugins_universal_modal_tiles--iconButtonSelected--pR6Ki browse_plugins_universal_modal_tiles--iconButton--8Dk-i raw_components--iconButtonEnabled--WmVk5 raw_components--_iconButton---ybo6":f,"browse_plugins_universal_modal_tiles--iconButton--8Dk-i raw_components--iconButtonEnabled--WmVk5 raw_components--_iconButton---ybo6":!f}),"data-tooltip-type":nO.Ib.TEXT,"data-tooltip":(0,eO.t)("whiteboard.inserts.plugin_development_options_tooltip")}),f&&Q.createElement(k5.T9,{localResource:o??void 0,publishedResource:o?void 0:d,viewResource:()=>l({id:c,type:NG.R.PLUGINS})}),Q.createElement(k$,{pluginId:c,buttonCta:(0,eO.t)("whiteboard.inserts.plugin_run_cta"),isNotInHeader:!1,view:r}))),Q.createElement(kD.z,{dragState:E}))});function Si(e){let t=(0,kM.xp)(e.pluginId),n=(0,ig.Be)().plugins[e.pluginId],a=Q.useMemo(()=>n||e.pluginVersion||(0,iE.Ar)(t)||iE.lT,[n,t,e.pluginVersion]);return Q.createElement(So,{pluginId:e.pluginId,pluginVersion:a,view:e.view,showLockIcon:e.showLockIcon,plugin:t})}let So=Q.memo(function(e){let{plugin:t,pluginVersion:n}=e,{isSavedForUser:a}=(0,k3.QK)(e.pluginId,NK.vt.PLUGIN),r=(0,N$.cX)().setPreviewResource,l=(0,N0.b)(),{currentTab:i,searchQuery:o}=(0,N$.cX)(),s=(0,kM.EO)(t),c=(0,kM.gn)(t),d=(0,d0.sZ)(),u=(0,ig.ll)(),m=(0,NB.XV)({org:d,extension:t,allowlistedExtensions:u}),{dragState:p,onInsertableResourcePointerDown:_}=(0,kR.c)({clickToInsert:!1,afterSuccessfulInsert:l,triggeredFrom:(0,NG.V)(i),resource:n,searchQuery:o,showRequestFlow:m}),f=(0,ig.bI)(n.plugin_id)&&e.view===Nz.p.PLUGINS,h=(0,Nj.BI)(),g=(0,kA.QP)({resource:t,height:"16",validBadges:[kA.op.FREEMUM,kA.op.OFF_PLATFORM,kA.op.PURCHASED]});if(n===iE.lT||(0,NK.m3)(t)&&((null==h?void 0:h.shouldOptimizeForIpadApp)||(0,eo.kc)().cmty_m10n_test_apple_os))return null;let E=f?Q.createElement(k1.WZ,{resource:t}):s?Q.createElement(Ss,{plugin:t}):c?Q.createElement(kU.Vv,null,Q.createElement(eO.Tx,{id:"community.buyer.update"})):m?Q.createElement("div",{style:tT.sx.add({width:"80px"}).$},Q.createElement(k4.s,{version:n,isPlugin:!0,variant:k4.w.FigJamPluginTile})):Q.createElement(k$,{pluginId:e.pluginId,buttonCta:(0,eO.t)("whiteboard.inserts.plugin_run_cta"),isNotInHeader:!1,view:e.view}),v=(0,gD.kB)(t)||(0,gD.CF)(n),y=f?Q.createElement(k1.e2,{resource:t}):Q.createElement(Q.Fragment,null,Q.createElement("div",{className:"browse_plugins_universal_modal_tiles--pluginTileHeader--gYj6D"},Q.createElement("div",{className:"browse_plugins_universal_modal_tiles--pluginTitle--aUkOj resource_tiles--pluginTitle--dP-tg"},Q.createElement("span",{className:"browse_plugins_universal_modal_tiles--pluginTileName--z1OSk text--fontPos13--xW8hS text--_fontBase--QdLsd ellipsis--ellipsis--Tjyfa"},n.name),g&&Q.createElement("div",{className:"browse_plugins_universal_modal_tiles--pluginTitleBadgeContainer--SQKss resource_tiles--pluginTitleBadgeContainer--Q-9cz"},g),c&&Q.createElement("div",{className:"browse_plugins_universal_modal_tiles--browsePluginTilePaymentError--A0pCZ"},Q.createElement(kU.xY,null)),e.showLockIcon&&Q.createElement(eM.B,{svg:Sn.A}))),Q.createElement("div",{className:ea()(Se,"browse_plugins_universal_modal_tiles--pluginTileDescriptionPadding--qGAaH")},(0,kL.G8)(n,kI.$J)),v&&Q.createElement("div",{className:Se},v));return Q.createElement(Q.Fragment,null,Q.createElement("div",{className:k6,onPointerDown:_,role:"button",tabIndex:0,"data-testid":`figjam-plugin-tile-${e.pluginId}`},Q.createElement("div",{className:k9,onClick:()=>r({id:n.plugin_id,type:NG.R.PLUGINS}),role:"button",tabIndex:0},Q.createElement("div",{className:"browse_plugins_universal_modal_tiles--relativeContainer--yRMHl"},f&&Q.createElement("div",{className:"browse_plugins_universal_modal_tiles--redDot--rXNiG red_dot--baseRedDot--AZelu"}),Q.createElement("div",{className:k7},Q.createElement(aU.V,{plugin:n,loading:"lazy",alt:"",draggable:!1}))),Q.createElement("div",{className:k8},y)),Q.createElement("div",{className:ea()([tw.cx.flex.itemsCenter.mr8.$,tw.cx.if(a,tw.cx.visible).$],{[St]:!a})},Q.createElement(k2._W,{resourceId:e.pluginId,resourceType:NK.vt.PLUGIN,parentView:k2.nN.FIGJAM_PLUGIN_ROW})),Q.createElement("div",null,E)),Q.createElement(kD.z,{dragState:p}))});function Ss(e){let t=(0,N$.cX)().setPreviewResource,n=(0,kM.lt)(e.plugin);return(0,NK.m3)(e.plugin)?Q.createElement("div",{className:"browse_plugins_universal_modal_tiles--priceBadgeContainer--Sf172",onClick:()=>t({id:e.plugin.id,type:NG.R.PLUGINS}),role:"button",tabIndex:0,"data-not-draggable":!0},Q.createElement("div",{className:"browse_plugins_universal_modal_tiles--priceBadge--L2Q5M ellipsis--ellipsis--Tjyfa"},(0,kO.bV)(e.plugin.monetized_resource_metadata)),(0,kO.Lt)({resource:e.plugin,payment:n})&&Q.createElement(kP.w5,{metadata:e.plugin.monetized_resource_metadata,condensed:!0})):null}var Sc=n(880781),Sd=n(6956),Su=n(39064),Sm=n(820370),Sp=n(60983),S_=n(662964),Sf=n(516140),Sh=n(362361),Sg=n(156325);function SE(e){let{imageUrl:t,clientMeta:n,thumbnailIsSet:a,isWhiteboard:r,name:l,hubFileId:i,publishers:o,resizedThumbnailUrls:s}=(0,Sc.fG)()(e.template),c=(0,N0.b)(),{dragState:d,onInsertableResourcePointerDown:u}=(0,Su.B)({resource:e.template,clickToInsert:!0,afterSuccessfulInsert:c,triggeredFrom:e.triggeredFrom}),m=(0,Sf.jq)(e.template);return Q.createElement(Q.Fragment,null,Q.createElement(Sm.sU,{image:Q.createElement("div",{role:"presentation",onPointerDown:u,className:d?Sg.J:void 0},Q.createElement(Sm.WM,{backgroundColor:(0,fp.Cn)(n)},Q.createElement(Sm.Wh.Cover,null,Q.createElement("div",{className:"browse_templates_tab--hoverOverlay--BpdyD"})),Q.createElement(Sm.Wh.Center,null,Q.createElement(Sp.i,{insertTemplate:ey.lQ,isInsertingTemplate:e.isInsertingTemplate,shouldUseOpaqueBackground:!0},(0,NU.Ve)(e.templateInsertionLocation))),Q.createElement(Sh.Ho,{image:t,isSet:a,isWhiteboard:r,hubFileId:i,alt:l,resizedThumbnailUrls:s}))),bottomRow:Q.createElement(Sm.dY.FigJamMetadata,{name:l,onClick:e.onClickTitle,publishers:o,showUserAvatar:e.template.type===NV.n.TeamTemplate}),onContextMenu:m}),Q.createElement(Sd.S,{dragState:d}),Q.createElement(S_.mS,{template:e.template}))}function Sv(){return Q.createElement(Sm.sU,{className:tw.cx.invisible.$,image:Q.createElement("div",{role:"presentation"},Q.createElement(Sm.WM,null,Q.createElement(Sh.Ho,{image:void 0,isSet:!1,isWhiteboard:!0,hubFileId:void 0,alt:""}))),bottomRow:Q.createElement(Sm.dY.FigJamMetadata,{name:"\xa0",onClick:ey.lQ,publishers:[]})})}function Sy(e){let{isInsertingTemplate:t}=(0,ND.Fz)(),n=(0,N$.cX)().setPreviewResource,{currentTab:a}=(0,N$.cX)(),r=(0,NG.V)(a),l=(0,Sc.fG)();return Q.createElement("div",{className:"browse_templates_tab--resourcesGrid--Xwq6v"},e.templates.length?e.templates.map(a=>{let{primaryKey:i}=l(a);return Q.createElement(SE,{template:a,key:i,templateInsertionLocation:e.templateInsertionLocation,triggeredFrom:r,isInsertingTemplate:t(i),onClickTitle:a.type===NV.n.HubFile?()=>{n({id:a.template.id,type:NG.R.TEMPLATES})}:void 0})}):Q.createElement(Sv,null))}SE.displayName="TemplatesHubFileTile",Sv.displayName="BrowseTemplatesFileTilePlaceholder",Sy.displayName="BrowseTemplatesGrid";var Sb=n(148247);let SC="browse_view_divider--browseViewDivider--bS7RU";function Sw(){return Q.createElement("div",{className:SC})}function ST(){return Q.createElement("div",{className:ea()([SC,"browse_view_divider--subSectionDivider--oHRN1"])})}let Sx="browse_explore_list--seeAll--8L87Q text--fontPos13--xW8hS text--_fontBase--QdLsd",SN="browse_explore_list--sectionHeader--vkmM0 text--fontPos13--xW8hS text--_fontBase--QdLsd",Sk="browse_explore_list--categorySectionHeaderContainer--WiX1N";var SS=n(270951);function SI(e){let t;let{shelves:n,isLoading:a}=(0,Sb.d7)(e.shelfType),r=(0,Nj.Kx)(),l=(0,N$.cX)().setSelectedCategory,i=Q.useMemo(()=>{let e={},t=new Set;return n.forEach(n=>{let a=[],r=n.shelf_content;for(let e=0;e<r.length;e++){let n=r[e];if(!t.has(n.id)&&(t.add(n.id),a.push(n),4===a.length))break}e[n.id]=a}),e},[n]);if(!n||0===n.length)return null;if(a)return Q.createElement(t2.kt,{className:"browse_explore_list--loadingSpinner--te4He"});let o=`/community/${e.resourceType===NK.bD.HUB_FILE?"figjam":e.resourceType===NK.bD.PLUGIN?"plugins/figjam":"widgets"}`,s=NG.R.PLUGINS;e.resourceType===NK.bD.HUB_FILE?(t="browse_explore_list--resourcesGrid--BGQAu",s=NG.R.TEMPLATES):e.resourceType===NK.bD.WIDGET?(t="browse_explore_list--widgetTilesGridContainer--k7aKh browse_widgets_view--widgetTilesGridContainer--t5-lL",s=NG.R.WIDGETS):t=void 0;let c=(null==r?void 0:r.shouldOptimizeForIpadApp)||(0,eo.kc)().cmty_m10n_test_apple_os;return Q.createElement(Q.Fragment,null,n.map((n,a)=>{let r=i[n.id];return Q.createElement(Q.Fragment,{key:n.id},0===a?Q.createElement(Sw,null):Q.createElement(ST,null),Q.createElement("button",{className:ea()(Sk,e.resourceType===NK.bD.PLUGIN?"browse_explore_list--pluginCategorySectionHeaderPadding--hW6gC":void 0),onClick:()=>l({id:n.id,title:n.title,resourceType:s})},Q.createElement("div",{className:SN},(0,eO.Yd)(n.i18n_meta.title,n.title)),Q.createElement("div",{className:Sx},Q.createElement(eO.Tx,{id:"whiteboard.inserts.see_all"}))),Q.createElement("div",{className:t},r.map(t=>e.renderResource(t))))}),!c&&Q.createElement("a",{className:"browse_explore_list--communityLink--iNdOV text--fontPos13--xW8hS text--_fontBase--QdLsd",href:o,target:"_blank"},Q.createElement(eM.B,{svg:SS.A,className:"browse_explore_list--communityLinkIcon--4Ve4b text--fontPos11--2LvXf text--_fontBase--QdLsd"}),Q.createElement(eO.Tx,{id:"whiteboard.inserts.browse_more_in_community"})))}function SA({currentOrg:e}){let t=(0,NM.wv)(e),{setSelectedCategory:n}=(0,N$.cX)();return(null==t?void 0:t.length)||null!==t?(null==t?void 0:t.length)?Q.createElement(Q.Fragment,null,Q.createElement("button",{className:Sk,onClick:()=>{n({id:"",title:(0,eO.t)("whiteboard.inserts.org_name_templates",{orgName:e.name}),resourceType:NG.R.TEAM_TEMPLATES})}},Q.createElement("div",{className:SN},Q.createElement(eO.Tx,{id:"whiteboard.inserts.org_name_templates",orgName:e.name})),Q.createElement("div",{className:Sx},Q.createElement(eO.Tx,{id:"whiteboard.inserts.see_all"}))),Q.createElement(Sy,{templates:t.map(e=>({type:NV.n.TeamTemplate,template:e})),templateInsertionLocation:NU.RD.CURRENT_FILE})):null:Q.createElement(kp,null)}function SP(){let e=(0,ND.eE)(dz.$A.FigJam).slice(0,4),t=(0,N$.mk)(e,[(0,m_.mC)(NW.cd.fetchTemplatesMetadata.loadingKeyForPayload({key:dz.$A.FigJam}))]);return Q.createElement(Q.Fragment,null,t.length>0?Q.createElement(Q.Fragment,null,Q.createElement("div",{className:Sk},Q.createElement("div",{className:SN},Q.createElement(eO.Tx,{id:"whiteboard.inserts.recents"}))),Q.createElement(Sy,{templates:t,templateInsertionLocation:NU.RD.CURRENT_FILE})):Q.createElement(Q.Fragment,null))}let SO="_search";function SL(e){let{isInsertingTemplate:t}=(0,ND.Fz)(),n=Q.useRef(null),a=(0,d0.sZ)(),r=(0,NL.hC)(),l=(0,m_.oh)(NA.sz.loadingKeyForPayload({shelfType:NK.cS.FIGJAM_TEMPLATES_PICKER})),i=(0,m_.oh)(NW.cd.fetchTemplatesMetadata.loadingKeyForPayload({key:dz.$A.FigJam}));return l||i?Q.createElement(kp,null):Q.createElement("div",{ref:n},Q.createElement(t6.fu,{name:"templates"},Q.createElement(SP,null),r&&a&&Q.createElement(SA,{currentOrg:a}),Q.createElement(SI,{resourceType:NK.bD.HUB_FILE,shelfType:NK.cS.FIGJAM_TEMPLATES_PICKER,renderResource:n=>Q.createElement(SE,{template:{template:n,type:NV.n.HubFile},key:n.id,templateInsertionLocation:NU.RD.CURRENT_FILE,triggeredFrom:"universal-insert-figjam-templates",isInsertingTemplate:t(n.id),onClickTitle:()=>e.setPreviewHubFile({id:n.id,type:NG.R.TEMPLATES})})})))}SL.displayName="BrowseTemplatesTab";var SM=n(273934),SD=n(831050),SR=n(250853),SF=n(730641),SB=n(159256);let SU="browse_widgets_universal_modal_tiles--widgetImageContainer--Jawtg",SH="browse_widgets_universal_modal_tiles--widgetTileMeta--pIVCD",SV="browse_widgets_universal_modal_tiles--widgetMetadataContainer--BLS2U",SG="browse_widgets_universal_modal_tiles--developmentWidgetPrimaryText--4ORbR",SK="browse_widgets_universal_modal_tiles--iconButton--gcHjb raw_components--iconButtonEnabled--WmVk5 raw_components--_iconButton---ybo6",SW="browse_widgets_universal_modal_tiles--iconButtonSelected--pJ4m9 browse_widgets_universal_modal_tiles--iconButton--gcHjb raw_components--iconButtonEnabled--WmVk5 raw_components--_iconButton---ybo6",Sz="browse_widgets_universal_modal_tiles--widgetResourceActionContainer--tlXT0";function Sj(e){let{publishedWidget:t}=e,n=(0,N$.cX)().setPreviewResource,a=(0,$.wA)(),r=t.id,l=null==t?void 0:t.versions[t.current_plugin_version_id],i=Q.useRef(null),o=(0,aX.U)(),s=o&&(null==o?void 0:o.type)===k5.lD&&o.data.localFileId===r&&o.data.view===e.tab,c=l?l.redirect_snapshot_url||"":SR.J;return Q.createElement(Q.Fragment,null,Q.createElement(Sm.sU,{image:Q.createElement(SM.FK,{className:SU},Q.createElement(SD.z,{src:c,context:dV._Y.WHITEBOARD})),bottomRow:Q.createElement("div",{className:SH},Q.createElement(Sm.dY.MetadataContainer,{className:SV,onClick:()=>n({id:r,type:NG.R.WIDGETS})},Q.createElement(Sm.dY.TextMetadataLayout,{primaryText:Q.createElement("div",{className:SG},Q.createElement("span",null,l.name),t&&kB.tY.PluginManagementTitleBadge(t)),secondaryText:Q.createElement(k0.A,{publishedResource:t,localResource:void 0})})),Q.createElement(Sm.dY.ResourceActionContainer,{className:Sz},Q.createElement(aJ.K0,{svg:iI.A,ref:i,onClick:()=>{var t;let n=null==(t=aP.findDOMNode(i.current))?void 0:t.getBoundingClientRect();a(nP.j7({type:k5.lD,data:{localFileId:r,view:e.tab,targetRect:n}}))},className:s?SW:SK,"data-tooltip-type":nO.Ib.TEXT,"data-tooltip":(0,eO.t)("whiteboard.inserts.widget_options")}),s&&Q.createElement(k5.T9,{publishedResource:t,viewResource:()=>n({id:r,type:NG.R.WIDGETS})})))}))}let SY=(0,kF.M)(),SZ=Q.forwardRef((e,t)=>{let n=(0,ig.yQ)(),{localFileId:a}=e,r=(0,$.wA)(),l=n[a],i=(0,ig.bh)(),o=(0,ig.jg)(),s=Q.useRef(null),c=(0,aX.U)(),d=(0,N$.cX)().setPreviewResource,{currentTab:u,searchQuery:m}=(0,N$.cX)();if(!l)return null;let p=i.find(e=>e.id===n[a].plugin_id),_=l.plugin_id,f=null==p?void 0:p.versions[p.current_plugin_version_id],h=!!f,g=c&&(null==c?void 0:c.type)===k5.lD&&c.data.localFileId===l.localFileId&&c.data.view===e.tab,E=()=>{SY.openExtensionDirectory(l.localFileId)},v=h&&f.redirect_snapshot_url||o[a]&&o[a].metadata.widgetSnapshotImageSrc||SR.J;return Q.createElement(Sm.sU,{image:Q.createElement(SM.FK,{className:SU},Q.createElement(SD._,{src:v,widget:l,analytics:{triggeredFrom:(0,NG.V)(u),searchQuery:m},context:dV._Y.WHITEBOARD})),bottomRow:Q.createElement("div",{ref:t,className:SH},Q.createElement(Sm.dY.MetadataContainer,{className:SV,onClick:()=>h?d({id:_,type:NG.R.WIDGETS}):E()},Q.createElement(Sm.dY.TextMetadataLayout,{primaryText:Q.createElement("div",{className:SG},Q.createElement("span",null,(null==f?void 0:f.name)?null==f?void 0:f.name:l.name),p&&kB.tY.PluginManagementTitleBadge(p)),secondaryText:Q.createElement(k0.A,{localResource:l,publishedResource:p})})),Q.createElement(Sm.dY.ResourceActionContainer,{className:Sz},Q.createElement(aJ.K0,{svg:iI.A,ref:s,onClick:()=>{var t;let n=null==(t=aP.findDOMNode(s.current))?void 0:t.getBoundingClientRect();r(nP.j7({type:k5.lD,data:{localFileId:l.localFileId,view:e.tab,targetRect:n}}))},className:g?SW:SK,"data-tooltip-type":nO.Ib.TEXT,"data-tooltip":(0,eO.t)("whiteboard.inserts.widget_options")}),g&&Q.createElement(k5.T9,{localResource:l,viewResource:()=>d({id:_,type:NG.R.WIDGETS})})))})}),SX=Q.memo(function(e){var t;let{currentTab:n}=(0,N$.cX)(),a=(0,N$.cX)().setPreviewResource,r=(0,$.wA)(),l=e.widgetId,i=(0,kM.aQ)(e.widgetId),o=Q.useMemo(()=>e.widgetVersion||(0,iE.uF)(i),[e.widgetVersion,i]),s=(0,kM.EO)(i),c=(0,kM.gn)(i),d=(0,d0.sZ)(),u=(0,ig.U6)(),m=(0,NB.XV)({org:d,extension:i,allowlistedExtensions:u}),p=!!(s||m),{searchQuery:_}=(0,N$.cX)();Q.useEffect(()=>{i||r(NP.af({id:l,resourceType:NK.bD.WIDGET}))},[l,r,i]);let f=(0,Nj.BI)(),h=(0,$.d4)(e=>e.authedActiveCommunityProfile),{isSavedForUser:g}=(0,k3.QK)(e.widgetId,NK.vt.WIDGET);return(0,SF.yT)()&&SF.RA.has(l)||!o||(0,NK.m3)(i)&&((null==f?void 0:f.shouldOptimizeForIpadApp)||(0,eo.kc)().cmty_m10n_test_apple_os)?null:Q.createElement(Sm.sU,{className:"browse_widgets_universal_modal_tiles--widgetCardContainer--yzVBr resource_tiles--_parentWithHoverAction--m180X",image:Q.createElement(SM.FK,{className:SU},!c&&Q.createElement("div",{className:"browse_widgets_universal_modal_tiles--widgetMonetizationBadge--C1Vye"},(0,kA.$3)({resource:i,authedActiveCommunityProfile:h})),p?Q.createElement(SD.z,{src:o.redirect_snapshot_url,context:dV._Y.WHITEBOARD}):Q.createElement(SD._,{src:o.redirect_snapshot_url,widget:o,analytics:{triggeredFrom:(0,NG.V)(n),searchQuery:_},context:dV._Y.WHITEBOARD})),bottomRow:Q.createElement(Sm.dY.FigJamMetadata,{name:o.name,onClick:()=>a({id:l,type:NG.R.WIDGETS}),publishers:null==(t=null==i?void 0:i.community_publishers)?void 0:t.accepted,showLockIcon:e.showLockIcon,showPaymentError:c,rightAlignedElement:Q.createElement("div",{className:ea()("browse_widgets_universal_modal_tiles--saveButtonInTile--KIOlI",{[SB._0]:!g})},Q.createElement(k2._W,{resourceId:e.widgetId,resourceType:NK.vt.WIDGET,parentView:k2.nN.TILE}))}),onClick:p||c?()=>a({id:l,type:NG.R.WIDGETS}):void 0,dataTestId:`figjam-widget-tile-${l}`})});var Sq=n(395096),SJ=n(917679),SQ=n(425050),S$=n(120128),S0=n(369635),S1=n(911883),S2=n(461224),S5=n(854931);let S4="face_stamps--contentRow--hiGYK",S3="face_stamps--sectionHeader--mWSOw text--fontPos13--xW8hS text--_fontBase--QdLsd";var S6=n(647173),S7=n(428829);function S8(e){return(0,Nc.d0)()?Q.createElement(Q.Fragment,null,Q.createElement(S5.t,{text:(0,eO.t)("whiteboard.inserts.faces_title"),description:(0,eO.t)("whiteboard.inserts.faces_description"),onPointerDown:ey.lQ,onClick:e.onClick,iconComponent:(0,S1._N)(),recordingKey:nh.Pt("inserts","more","facestamps"),rightCaret:!0})):null}function S9(e){let{onBack:t,queryFromAllSearch:n}=e,[a,r]=Q.useState(!1),{faceStampServerSideSearch:l,faceStampSearchIsLoading:i,faceStampSearchHasResolved:o}=(0,SQ.A)({maxResults:20}),[s,c]=Q.useState(""),[d]=(0,Sq.A)(s,200);Q.useEffect(()=>{n&&!a?(l(n),c(n),r(!0)):l(d)},[l,n,d,a]);let u=i||!o,m=Q.useCallback(e=>"Escape"===e.key&&(d?c(""):t(),!0),[d,t]),p=(0,Nc.d2)(d),_=Math.min(p.length,It),f=(0,Nc.U5)(d);return Q.createElement(Q.Fragment,null,Q.createElement(SJ.IW,{focusOnMount:!1,selectTextOnMount:!0,className:"face_stamps--searchBar--vDblE",query:d,placeholder:(0,eO.t)("whiteboard.inserts.faces_search_placeholder"),clearSearch:()=>c(""),onChange:c,isKeyDownHandled:m,hideXIcon:!d}),Q.createElement("div",{className:"face_stamps--contentContainer--0-n3a"},u?Q.createElement(Q.Fragment,null,Q.createElement(In,{rows:1,showHeader:!d}),!d&&Q.createElement(In,{rows:2,showHeader:!0})):d?f.length>0?Q.createElement(Il,{maxRows:4,isLoading:u,users:f}):Q.createElement(Nq,{illustration:S7.A,query:d}):Q.createElement(Q.Fragment,null,Q.createElement(Il,{maxRows:1,title:(0,eO.t)("whiteboard.inserts.recents_header"),users:f.slice(0,_)}),Q.createElement(Il,{maxRows:p.length>0?2:3,isLoading:u,title:(0,eO.t)("whiteboard.inserts.suggested_header"),users:f.slice(_)}))))}function Ie({children:e}){return Q.createElement("div",{className:S3},e)}let It=5;function In({rows:e=1,showHeader:t=!0}){let n=e*It,a=[];for(let e=0;e<n;e++)a.push(Q.createElement(Ir,{key:e}));return Q.createElement(Q.Fragment,null,t&&Q.createElement(Ia,null),Q.createElement("div",{className:ea()(S4,"face_stamps--skeletonRow--AqMaG")},...a))}function Ia(){return Q.createElement("div",{className:ea()(S3,"face_stamps--skeletonHeader--dh0WB face_stamps--sectionHeader--mWSOw text--fontPos13--xW8hS text--_fontBase--QdLsd")})}function Ir(){return Q.createElement("div",{className:"face_stamps--skeletonFaceStampContainer--6nweY"},Q.createElement("div",{className:"face_stamps--skeletonFaceStamp--J8vAD"}),Q.createElement("div",{className:"face_stamps--skeletonFaceStampLabel---4KQM"}))}function Il({users:e,title:t,isLoading:n,maxRows:a}){let{currentTab:r,searchQuery:l}=(0,N$.cX)(),i=(0,NG.V)(r);return 0===e.length&&!0!==n?null:Q.createElement(Q.Fragment,null,t&&Q.createElement(Ie,null,t),Q.createElement("div",{className:S4},n?Q.createElement(S2.Q,null):e.slice(0,a*It).map(e=>Q.createElement(S2.I,{key:e.id,user:e,searchQuery:l,triggeredFrom:i}))))}function Ii({onBack:e,setPinned:t,queryFromAllSearch:n}){let a=(0,$.d4)(e=>e.universalInsertModal),r=(0,cX.LR)(),{faceStampServerSideSearch:l}=(0,SQ.A)({maxResults:20}),i=()=>{""!==n&&l(n),e()};return Q.createElement("div",{className:kz},Q.createElement("div",{className:kj},Q.createElement(eM.B,{svg:S6.A,className:kG,onClick:ec.Ay.isIpad?void 0:i,onPointerDown:ec.Ay.isIpad?i:void 0,"data-not-draggable":!0,"data-does-not-dismiss-modal":!0}),Q.createElement("div",{className:"face_stamps--titleContainer--0IWlF"},Q.createElement("span",{className:"face_stamps--titlePrimary--J3DrZ text--fontPos13--xW8hS text--_fontBase--QdLsd"},Q.createElement(eO.Tx,{id:"whiteboard.inserts.faces_title"})),Q.createElement("span",{className:"face_stamps--titleSecondary--95nwF text--fontPos11--2LvXf text--_fontBase--QdLsd"},Q.createElement(eO.Tx,{id:"whiteboard.inserts.faces_description"})))),Q.createElement("div",{className:kY},a.pinned===S$.t.NOT_PINNED?Q.createElement(S0.O,{setPinned:t}):Q.createElement(aO.Jn,{onClick:r,className:kQ})))}let Io="browse_resources_all_search_view--sectionHeaderContainer--fg20n",Is="browse_resources_all_search_view--sectionHeader--0rdpg text--fontPos13--xW8hS text--_fontBase--QdLsd",Ic="browse_resources_all_search_view--seeMore--t4uuM text--fontPos13--xW8hS text--_fontBase--QdLsd";function Id(e){let{assetsPanelSearch:t}=(0,$.d4)(e=>e.library),n=(0,Nj.BI)(),a=(0,Nc.d0)();if(e.lastPluginSearchQuery!==e.debouncedSearchQuery||e.lastWidgetSearchQuery!==e.debouncedSearchQuery||a&&e.lastFaceStampSearchQuery!==e.debouncedSearchQuery)return Q.createElement(kh,null);if(0===t.normalizedSearchResults.length&&0===e.searchTemplatesResult[SO].length&&0===e.widgetSavedSearchResultIds.length&&0===e.widgetCommunitySearchResultIds.length&&0===e.widgetOrgSearchResultIds.length&&0===e.pluginSavedSearchResultIds.length&&0===e.pluginOrgSearchResultIds.length&&0===e.pluginCommunitySearchResultIds.length&&0===e.widgetDevelopmentSearchResultIds.length&&0===e.pluginDevelopmentSearchResultIds.length&&0===e.moreResult.length&&0===e.teamTemplatesFromSearch.length){let t=!((null==n?void 0:n.shouldOptimizeForIpadApp)||(0,eo.kc)().cmty_m10n_test_apple_os)&&Q.createElement("a",{className:NX,href:"/community/figjam",target:"_blank"},Q.createElement(eO.Tx,{id:"whiteboard.inserts.see_more_from_community"}));return Q.createElement(Nq,{illustration:kT.A,query:e.query,cta:t})}return Q.createElement(t6.fu,{name:"all",properties:{resourceType:"all",query:e.query}},Q.createElement(Ih,{results:e.moreResult}),[()=>Q.createElement(I_,{setCurrentTab:e.setCurrentTab,key:"librarySearchResults"}),()=>a&&Q.createElement(Ip,{faceStampSearchIsLoading:e.faceStampSearchIsLoading,query:e.query,key:"faceStampSearchResults"}),()=>Q.createElement(If,{setCurrentTab:e.setCurrentTab,templateSearchResults:e.searchTemplatesResult,teamTemplatesFromSearch:e.teamTemplatesFromSearch,totalNumTeamTemplatesFromSearch:e.totalNumTeamTemplatesFromSearch,key:"templateSearchResults"}),()=>Q.createElement(Iu,{setCurrentTab:e.setCurrentTab,savedSearchResultIds:e.widgetSavedSearchResultIds,communitySearchResultIds:e.widgetCommunitySearchResultIds,orgSearchResultIds:e.widgetOrgSearchResultIds,developmentSearchResultIds:e.widgetDevelopmentSearchResultIds,searchIsLoading:e.widgetSearchIsLoading,searchHasResolved:e.widgetSearchHasResolved,key:"widgetSearchResults"}),()=>Q.createElement(Im,{setCurrentTab:e.setCurrentTab,savedSearchResultIds:e.pluginSavedSearchResultIds,communitySearchResultIds:e.pluginCommunitySearchResultIds,orgSearchResultIds:e.pluginOrgSearchResultIds,developmentSearchResultIds:e.pluginDevelopmentSearchResultIds,searchIsLoading:e.pluginSearchIsLoading,searchHasResolved:e.pluginSearchHasResolved,key:"pluginSearchResults"})].map(e=>e()))}function Iu(e){let t=e.savedSearchResultIds.concat(e.communitySearchResultIds,e.orgSearchResultIds),n=Math.max(t.length+e.developmentSearchResultIds.length-4,0),a=t.slice(0,4),r=Math.min(e.developmentSearchResultIds.length,4-a.length);return 0===t.length?null:Q.createElement(Q.Fragment,null,Q.createElement("div",{className:Io},Q.createElement("div",null,Q.createElement("div",{className:Is},Q.createElement(eO.Tx,{id:"whiteboard.inserts.widgets"}))),n>0&&Q.createElement("button",{className:Ic,onClick:()=>{e.setCurrentTab(Nz.p.WIDGETS)}},`See ${n} more ${(0,lA.LD)(n,"result")}`)),Q.createElement("div",{className:"browse_resources_all_search_view--widgetTilesGridContainer--MDlpu browse_widgets_view--widgetTilesGridContainer--t5-lL"},Q.createElement(Q.Fragment,null,a.map(e=>Q.createElement(SX,{widgetId:e,key:e})),e.developmentSearchResultIds.slice(0,r).map(e=>Q.createElement(SZ,{localFileId:e,tab:Nz.p.DEVELOPMENT,key:e})))))}function Im(e){let t=e.savedSearchResultIds.concat(e.communitySearchResultIds,e.orgSearchResultIds),n=Math.max(t.length+e.developmentSearchResultIds.length-4,0),a=t.slice(0,4),r=Math.min(e.developmentSearchResultIds.length,4-a.length);return 0===t.length?null:Q.createElement(Q.Fragment,null,Q.createElement("div",{className:ea()(Io,"browse_resources_all_search_view--pluginCategorySectionHeaderPadding--RKhPp")},Q.createElement("div",null,Q.createElement("div",{className:Is},Q.createElement(eO.Tx,{id:"whiteboard.inserts.plugins"}))),n>0&&Q.createElement("button",{className:Ic,onClick:()=>{e.setCurrentTab(Nz.p.PLUGINS)}},`See ${n} more ${(0,lA.LD)(n,"result")}`)),Q.createElement(Q.Fragment,null,a.slice(0,4).map(e=>Q.createElement(Si,{pluginId:e,view:Nz.p.PLUGINS,key:e})),e.developmentSearchResultIds.slice(0,r).map(e=>Q.createElement(Sl,{localFileId:e,view:Nz.p.DEVELOPMENT,key:e}))))}function Ip(e){let t=(0,Nc.U5)(e.query),{setPreviewResource:n}=(0,N$.cX)();return 0===t.length?null:Q.createElement(Q.Fragment,null,Q.createElement("div",{className:Io},Q.createElement("div",{className:Is},Q.createElement(eO.Tx,{id:"whiteboard.inserts.faces_title"})),t.length>5&&!e.faceStampSearchIsLoading&&Q.createElement("button",{className:Ic,onClick:()=>{n({id:"FACE_STAMPS",type:NG.R.ORG_FACE_STAMPS})}},Q.createElement(eO.Tx,{id:"whiteboard.inserts.see_more"}))),Q.createElement("div",{className:N1},e.faceStampSearchIsLoading?Q.createElement("div",{className:"browse_resources_all_search_view--skeletonContainer--W9B65"},Q.createElement(In,{rows:1,showHeader:!1})):Q.createElement(Il,{maxRows:1,isLoading:!1,users:t})))}function I_(e){let{assetsPanelSearch:t}=(0,$.d4)(e=>e.library),n=Q.useMemo(()=>(0,cq.Ow)(t.normalizedSearchResults),[t.normalizedSearchResults]),a=Math.max(n.length-12,0),r=(0,$.wA)(),{openFile:l,fileVersion:i,loadingState:o}=(0,ep.R)(e=>({openFile:e.openFile,fileVersion:e.fileVersion,loadingState:e.loadingState})),s=l&&i&&(0,m_.Sc)(o,(0,mf.yD)(l.key));return(Q.useEffect(()=>{s&&r(cj.zK({}))},[r,s]),0===n.length)?null:Q.createElement(Q.Fragment,null,Q.createElement("div",{className:Io},Q.createElement("div",null,Q.createElement("div",{className:Is},Q.createElement(eO.Tx,{id:"whiteboard.inserts.stickers"}))),a>0&&Q.createElement("button",{className:Ic,onClick:()=>{e.setCurrentTab(Nz.p.STICKERS_AND_COMPONENTS)}},Q.createElement(eO.Tx,{id:"whiteboard.inserts.see_num_more_resources",numMoreResources:a}))),Q.createElement(N2,{items:{"":n.slice(0,12)},showContextMenu:!0,layoutOverride:uz.rp.SMALL}))}function If(e){let t=(0,$.d4)(e=>e.hubFiles),n=(e.templateSearchResults[SO]||[]).map(e=>t[e]),a=[...e.teamTemplatesFromSearch.map(e=>({type:NV.n.TeamTemplate,template:e})),...n.map(e=>({type:NV.n.HubFile,template:e}))],r=Math.max(n.length+e.totalNumTeamTemplatesFromSearch-4,0);return 0===a.length?null:Q.createElement(Q.Fragment,null,Q.createElement("div",{className:Io},Q.createElement("div",{className:Is},Q.createElement(eO.Tx,{id:"whiteboard.inserts.templates"})),r>0&&Q.createElement("button",{className:Ic,onClick:()=>{e.setCurrentTab(Nz.p.TEMPLATES)}},Q.createElement(eO.Tx,{id:"whiteboard.inserts.see_num_more_resources",numMoreResources:r}))),Q.createElement(Sy,{templates:a.slice(0,4),templateInsertionLocation:NU.RD.CURRENT_FILE}))}function Ih(e){return Q.createElement("div",{className:"browse_resources_all_search_view--moreTopPadding--NroRc"},e.results.map((e,t)=>Q.createElement(e,{key:t})))}var Ig=n(439930),IE=n(826666);let Iv="browse_resources_use_cases--sectionHeader--bfznu text--fontPos13--xW8hS text--_fontBase--QdLsd",Iy="browse_resources_use_cases--flexContainer--dANvZ",Ib="browse_resources_use_cases--useCaseSectionHeader--e5Nxj browse_resources_use_cases--sectionHeader--bfznu text--fontPos13--xW8hS text--_fontBase--QdLsd",IC="browse_resources_use_cases--sectionHeaderSubtext--5e-e- text--fontPos11--2LvXf text--_fontBase--QdLsd",Iw="browse_resources_use_cases--resourceContainer--rxSfA browse_explore_category_view--resourceContainer--pdbQU",IT="browse_resources_use_cases--caretRight--UGsAJ",Ix="browse_resources_use_cases--resourceMetadata--AdJJW text--fontPos11--2LvXf text--_fontBase--QdLsd",IN="browse_resources_use_cases--stickerWidgetEllipsis--KpMzQ ellipsis--ellipsis--Tjyfa",Ik="browse_resources_use_cases--templateEllipsis--8hbx5 ellipsis--ellipsis--Tjyfa";function IS({onClick:e,name:t,localizedName:n,localizedDescription:a,children:r}){let l=void 0!==e;return Q.createElement("div",{className:l?"browse_resources_use_cases--useCaseSectionDrilldown--4sijQ browse_resources_use_cases--useCaseSection--c00-9":"browse_resources_use_cases--useCaseSection--c00-9",key:t,onClick:e,role:"presentation"},Q.createElement("div",{className:Iv},n||t,l?Q.createElement(eM.B,{svg:Cf.A,className:IT}):null),Q.createElement("div",{className:IC},a),Q.createElement("div",{className:"browse_resources_use_cases--sectionResources--WMI76"},r))}function II(){let e=(0,$.d4)(e=>e.figjamDefaultInserts.useCases),{setSelectedCategory:t}=(0,N$.cX)(),n=!!(0,eo.kc)().figjam_universal_inserts_all_tab_update,a=e=>"Brainstorm together"===e?(0,eO.t)("whiteboard.inserts.use_cases_brainstorm_together"):"Run a meeting"===e?(0,eO.t)("whiteboard.inserts.use_cases_run_a_meeting"):"Diagram anything"===e?(0,eO.t)("whiteboard.inserts.use_cases_diagram_anything"):"Lead a workshop"===e?(0,eO.t)("whiteboard.inserts.use_cases_lead_a_workshop"):"Break the ice"===e?(0,eO.t)("whiteboard.inserts.use_cases_break_the_ice"):void 0,r=e=>"Brainstorm together"===e?(0,eO.t)("whiteboard.inserts.use_cases_brainstorm_together_description"):"Run a meeting"===e?(0,eO.t)("whiteboard.inserts.use_cases_run_a_meeting_description"):"Diagram anything"===e?(0,eO.t)("whiteboard.inserts.use_cases_diagram_anything_description"):"Lead a workshop"===e?(0,eO.t)("whiteboard.inserts.use_cases_lead_a_workshop_description"):"Break the ice"===e?(0,eO.t)("whiteboard.inserts.use_cases_break_the_ice_description"):void 0,l=e.filter(e=>!e.name.includes("Whats New"));return 0===l.length?Q.createElement(IM,null):Q.createElement(Q.Fragment,null,l.map(e=>"collage_items"===e.name?null:Q.createElement(IS,{onClick:n?void 0:()=>{t({id:e.name,title:e.name,resourceType:NG.R.ALL})},name:e.name,localizedName:a(e.name),localizedDescription:r(e.name),key:e.name},e.resources.slice(0,3).map(t=>Q.createElement(Q.Fragment,{key:[e.name,t?t.id:""].join("_")},t&&"is_widget"in t&&!!t.is_widget&&Q.createElement(IO,{widgetId:t.id,restrictDrilldown:n}),t&&"type"in t&&t.type===lz.PW.COMPONENT&&Q.createElement(IL,{resource:t}),t&&"viewer_mode"in t&&!!t.viewer_mode&&Q.createElement(IP,{template:{type:NV.n.HubFile,template:t},restrictDrilldown:n}))))))}function IA(e){let t=(0,$.d4)(e=>e.figjamDefaultInserts.useCases).find(t=>t.name===e.useCaseName);if(!t)return null;let n=t.resources.filter(e=>"viewer_mode"in e&&!!e.viewer_mode),a=t.resources.filter(e=>"is_widget"in e&&!!e.is_widget),r=t.resources.filter(e=>"type"in e&&e.type===lz.PW.COMPONENT),l=t.resources.filter(e=>"is_widget"in e&&!e.is_widget);return Q.createElement(t6.fu,{name:"use_case",properties:{useCase:t.name}},!!n.length&&Q.createElement(Q.Fragment,null,Q.createElement("div",{className:Ib},Q.createElement(eO.Tx,{id:"whiteboard.inserts.templates"})),Q.createElement(Sy,{templates:n.map(e=>({type:NV.n.HubFile,template:e})),templateInsertionLocation:NU.RD.CURRENT_FILE})),!!a.length&&Q.createElement(Q.Fragment,null,Q.createElement("div",{className:Ib},Q.createElement(eO.Tx,{id:"whiteboard.inserts.widgets"})),Q.createElement("div",{className:"browse_resources_use_cases--widgetTilesGridContainer--gv30z browse_widgets_view--widgetTilesGridContainer--t5-lL"},a.map(e=>Q.createElement("button",{key:e.id,className:Iw},Q.createElement(SX,{widgetId:e.id,key:e.id}))))),!!r.length&&Q.createElement(Q.Fragment,null,Q.createElement("div",{className:Ib},Q.createElement(eO.Tx,{id:"whiteboard.inserts.stickers_and_components"})),Q.createElement(N5,{items:r,showContextMenu:!0})),!!l.length&&Q.createElement(Q.Fragment,null,Q.createElement("div",{className:Ib},Q.createElement(eO.Tx,{id:"whiteboard.inserts.plugins"})),Q.createElement("div",{className:"browse_resources_use_cases--pluginCategoryViewPadding--e1D-M"},l.map(e=>Q.createElement("button",{key:e.id,className:Iw},Q.createElement(Si,{pluginId:e.id,view:Nz.p.ALL,key:e.id}))))))}function IP({template:e,showPublisherName:t=!1,restrictDrilldown:n}){let{imageUrl:a,clientMeta:r,thumbnailIsSet:l,isWhiteboard:i,hubFileId:o,name:s,primaryKey:c,publishers:d,resizedThumbnailUrls:u}=(0,Sc.fG)()(e),m=(0,N$.cX)().setPreviewResource,p=(0,N0.b)(),{isInsertingTemplate:_}=(0,ND.Fz)(),{dragState:f,onInsertableResourcePointerDown:h}=(0,Su.B)({resource:e,clickToInsert:!0,afterSuccessfulInsert:p,triggeredFrom:"universal-insert-figjam-all-use-case"});return Q.createElement("div",{className:"browse_resources_use_cases--templatePreview--vlIll browse_resources_use_cases--resourcePreview--rTL2d",onClick:e=>e.stopPropagation(),role:"button",tabIndex:0},Q.createElement(SM.zq,{image:Q.createElement("div",{role:"presentation",onPointerDown:h,className:f?Sg.J:void 0},Q.createElement(SM.FK,{backgroundColor:(0,fp.Cn)(r)},Q.createElement(SM.zx.Cover,null,Q.createElement("div",{className:"browse_resources_use_cases--hoverOverlay--84hkm browse_templates_tab--hoverOverlay--BpdyD"})),Q.createElement(SM.zx.Center,null,Q.createElement(Sp.i,{insertTemplate:ey.lQ,isInsertingTemplate:_(c),shouldUseOpaqueBackground:!0},(0,NU.Ve)(NU.RD.CURRENT_FILE))),Q.createElement(Sh.Ho,{image:a||void 0,isSet:l,isWhiteboard:i,hubFileId:o,alt:s,resizedThumbnailUrls:u}))),bottomRow:Q.createElement("button",{className:ea()(Ix,t&&d[0]&&"browse_resources_use_cases--resourceMetadataWithPublisher--V9KyE"),onClick:t=>{t.stopPropagation(),n||e.type!==NV.n.HubFile||m({id:e.template.id,type:NG.R.TEMPLATES})},role:e.type===NV.n.HubFile?void 0:"presentation"},Q.createElement("div",{className:Iy},Q.createElement("div",{className:Ik},s),!n&&e.type===NV.n.HubFile&&Q.createElement(eM.B,{svg:Cf.A,className:IT})),t&&d.length>0&&Q.createElement("div",{className:Iy},Q.createElement("div",{className:ea()(Ik,"browse_resources_use_cases--publisher--2akDJ")},Q.createElement(eO.Tx,{id:"whiteboard.inserts.by_publisher_name",publisherName:d[0].name}))))}),Q.createElement(Sd.S,{dragState:f}))}function IO(e){let t=e.widgetId,{setPreviewResource:n}=(0,N$.cX)(),a=(0,$.d4)(e=>e.publishedWidgets[t]),r=(0,iE.uF)(a),{dragState:l,onInsertableResourcePointerDown:i}=(0,IE.P)({resource:r,clickToInsert:!0,afterSuccessfulInsert:(0,N0.b)(),triggeredFrom:"universal-insert-figjam-all-use-case"});return a?Q.createElement("div",{onClick:e=>e.stopPropagation(),role:"button",tabIndex:0},Q.createElement(Sm.sU,{className:"browse_resources_use_cases--widgetPreview--egQ9B browse_resources_use_cases--resourcePreview--rTL2d",image:Q.createElement(Sm.WM,{backgroundColor:"transparent",removeBorder:!0,className:"browse_resources_use_cases--widgetImageContainer--diYt5"},Q.createElement("div",{onPointerDown:i,role:"button",tabIndex:0},Q.createElement("img",{className:ea()({"browse_resources_use_cases--widgetImage--Rciys":!0,[Sg.J]:!!l}),src:r.redirect_snapshot_url,alt:""}))),bottomRow:Q.createElement("button",{className:Ix,onClick:t=>{t.stopPropagation(),e.restrictDrilldown||n({id:a.id,type:NG.R.WIDGETS})}},Q.createElement("div",{className:Iy},Q.createElement("div",{className:IN},r.name),!e.restrictDrilldown&&Q.createElement(eM.B,{svg:Cf.A,className:IT})))}),Q.createElement(Ig.E,{dragState:l})):null}function IL(e){let t=(0,N0.b)();return Q.createElement("div",{className:"browse_resources_use_cases--stickerPreview--ESlWj browse_resources_use_cases--resourcePreview--rTL2d",onClick:e=>e.stopPropagation(),role:"button",tabIndex:0},Q.createElement(pz.lX,{item:e.resource,height:90,width:90,showName:!1,shouldHideDescription:!0,shouldShowShadowOnHover:!0,isFigJam:!0,noBackground:!0,isSearch:!1,draggable:{sourceForTracking:"universal-insert-figjam-all-use-case",afterSuccessfulInsert:t,clickToInsert:!0}}),Q.createElement("button",{className:"browse_resources_use_cases--stickerResourceMetadata--vE2eG browse_resources_use_cases--resourceMetadata--AdJJW text--fontPos11--2LvXf text--_fontBase--QdLsd"},Q.createElement("div",{className:IN},e.resource.name)),Q.createElement(N8,null))}function IM(){return Q.createElement(Q.Fragment,null,Q.createElement(ID,{name:(0,eO.t)("whiteboard.inserts.use_cases_brainstorm_together"),description:(0,eO.t)("whiteboard.inserts.use_cases_brainstorm_together_description")}),Q.createElement(ID,{name:(0,eO.t)("whiteboard.inserts.use_cases_run_a_meeting"),description:(0,eO.t)("whiteboard.inserts.use_cases_run_a_meeting_description")}),Q.createElement(ID,{name:(0,eO.t)("whiteboard.inserts.use_cases_diagram_anything"),description:(0,eO.t)("whiteboard.inserts.use_cases_diagram_anything_description")}),Q.createElement(ID,{name:(0,eO.t)("whiteboard.inserts.use_cases_lead_a_workshop"),description:(0,eO.t)("whiteboard.inserts.use_cases_lead_a_workshop_description")}),Q.createElement(ID,{name:(0,eO.t)("whiteboard.inserts.use_cases_break_the_ice"),description:(0,eO.t)("whiteboard.inserts.use_cases_break_the_ice_description")}))}function ID({name:e,description:t,miniCardsOnly:n=!1}){return Q.createElement("div",{className:ea()("browse_resources_use_cases--useCaseSectionLoading--jAjoI browse_resources_use_cases--useCaseSection--c00-9",{"browse_resources_use_cases--mini_useCaseSectionLoading--Er0Hh":n}),key:e},Q.createElement("div",{className:Iv},e,Q.createElement(eM.B,{svg:Cf.A,className:IT})),Q.createElement("div",{className:IC},t))}function IR({currentOrg:e}){let t=(0,NM.wv)(e),{setSelectedCategory:n}=(0,N$.cX)(),a=(null==t?void 0:t.length)===0,r=(0,eO.t)("whiteboard.inserts.start_from_a_template"),l=(0,eO.t)("whiteboard.inserts.try_handmade_templates_created_by_your_team");return null===t?Q.createElement(ID,{name:r,description:l,miniCardsOnly:!0}):a?null:Q.createElement(IS,{name:r,localizedName:r,localizedDescription:l,onClick:()=>n({resourceType:NG.R.TEAM_TEMPLATES,id:"",title:(0,eO.t)("whiteboard.inserts.org_name_templates",{orgName:e.name})})},Q.createElement(nk.Y,{spacing:32,horizontalAlignItems:"center"},t.map(e=>Q.createElement(IP,{key:e.file_key,template:{type:NV.n.TeamTemplate,template:e},showPublisherName:!0,restrictDrilldown:!1}))))}var IF=n(820456),IB=n(43191),IU=n(785565);function IH(e){let{setPreviewResource:t}=(0,N$.cX)(),n=(0,Nc.d0)(),a=(0,ef.md)(IB.c),r=(0,IU.dQ)(),l=(0,IU.Q6)((null==a?void 0:a.numPrimaryTools)??0),i=r.filter(e=>!l.includes(e));return Q.createElement("div",{className:e.hasTopPadding?"browse_more_view--moreViewContainer--blJLd":void 0},i.map(e=>Q.createElement(IV,{key:e,toolKey:e})),(0,eo.kc)().figjam_mindmaps_entry_enable&&Q.createElement(IF.l7,null),n&&Q.createElement(S8,{onClick:()=>t({id:"FACE_STAMPS",type:NG.R.ORG_FACE_STAMPS})}),Q.createElement(IF.j6,null),Q.createElement(IF.m_,null),Q.createElement(IF.G0,null),Q.createElement(IF.fQ,null))}function IV({toolKey:e}){switch(e){case"text":return Q.createElement(IF.ue,null);case"section":return Q.createElement(IF.Sn,null);case"table":return Q.createElement(IF.vh,null);case"stamp":return Q.createElement(IF.Ox,null);default:return null}}let IG=Q.memo(function(e){let t=t=>(0,rr.ZQ)(t)?Q.createElement(Sl,{localFileId:t.localFileId,view:e.view,key:"development_plugin_"+t.localFileId}):Q.createElement(Si,{pluginId:t.plugin_id,view:e.view,pluginVersion:t,key:"recent_plugin_"+t.plugin_id});return Q.createElement(Q.Fragment,null,e.items.map(e=>t(e)))});function IK(){let e=(0,N$.Hb)(),t=(0,ig.Tg)().filter(e);return Q.createElement(Q.Fragment,null,Q.createElement(IG,{items:t.slice(0,4),view:Nz.p.RECENTS}))}function IW(){let e=(0,ND.eE)(dz.$A.FigJam),t=(0,N$.ik)(e,"templates",(e,t)=>!t.some(t=>t.type===NV.n.HubFile&&t.template.id===e.id),4),n=(0,N$.mk)(t,[(0,m_.mC)(NW.cd.fetchTemplatesMetadata.loadingKeyForPayload({key:dz.$A.FigJam})),(0,m_.mC)(NO.fC)]);return Q.createElement(Sy,{templates:n,templateInsertionLocation:NU.RD.CURRENT_FILE})}let Iz="browse_widgets_view--sectionHeader--rxCOO text--fontPos13--xW8hS text--_fontBase--QdLsd",Ij="browse_widgets_view--loadingSpinner--VdXEO browse_resources_modal--loadingSpinner--pMJQa",IY="browse_widgets_view--widgetTilesGridContainer--t5-lL",IZ=Q.memo(function(e){let t=e=>(0,rr.ZQ)(e)?Q.createElement(SZ,{localFileId:e.localFileId,tab:Nz.p.RECENTS,key:e.localFileId}):Q.createElement(SX,{widgetId:e.plugin_id,widgetVersion:e,key:e.plugin_id,tab:Nz.p.RECENTS});return Q.createElement("div",{className:IY},e.items.map(e=>t(e)))});function IX({}){let e=(0,N$.Sp)(),t=(0,ig.qr)().filter(e);return Q.createElement(IZ,{items:t.slice(0,4)})}var Iq=n(864700);let IJ="browse_resources_all_tab--divider--lN9-d",IQ="browse_resources_all_tab--sectionBottomPadding--3jqXm";var I$=n(816679);function I0(){let e=(0,N$.qZ)(),t=(0,NL.hC)(),n=(0,d0.sZ)(),a=(0,m_.oh)(NO.fC),r=(0,m_.oh)(NW.cd.fetchWidgetsMetadata.loadingKeyForPayload({key:dz.$A.FigJam})),l=(0,m_.oh)(dk.fi),i=(0,m_.oh)(NW.cd.fetchTemplatesMetadata.loadingKeyForPayload({key:dz.$A.FigJam})),o=(0,$.d4)(e=>e.figjamDefaultInserts.useCases),s=!!e&&0===o.length;return a||e&&s||!e&&(r||l||i)?Q.createElement(kh,null):Q.createElement(t6.fu,{name:"all"},Q.createElement("div",null,Q.createElement(Iq.O9,{applyInsertStyling:!0}),t&&n&&Q.createElement(IR,{currentOrg:n}),e?Q.createElement(II,null):Q.createElement(Q.Fragment,null,Q.createElement(I5,null),Q.createElement("div",{className:IJ}),Q.createElement(I4,null),Q.createElement("div",{className:IJ}),Q.createElement(I1,null),Q.createElement("div",{className:IJ}),Q.createElement(I2,null),Q.createElement("div",{className:IJ}),Q.createElement(I3,null))))}function I1(){let e=(0,N$.cX)().setCurrentTab;return Q.createElement("div",{className:IQ},Q.createElement(I6,{title:(0,eO.t)("whiteboard.inserts.widgets"),subtitle:(0,eO.t)("whiteboard.inserts.widgets_subtitle"),onClick:()=>e(Nz.p.WIDGETS),showCaret:!0,shorterSectionHeader:!1}),Q.createElement(IX,null))}function I2(){let e=(0,N$.cX)().setCurrentTab;return Q.createElement("div",{className:IQ},Q.createElement(I6,{title:(0,eO.t)("whiteboard.inserts.plugins"),subtitle:(0,eO.t)("whiteboard.inserts.plugins_subtitle"),onClick:()=>e(Nz.p.PLUGINS),showCaret:!0,shorterSectionHeader:!0}),Q.createElement(IK,null))}function I5(){let e=(0,N$.cX)().setCurrentTab;return Q.createElement("div",{className:IQ},Q.createElement(I6,{title:(0,eO.t)("whiteboard.inserts.stickers"),subtitle:(0,eO.t)("whiteboard.inserts.stickers_subtitle"),onClick:()=>e(Nz.p.STICKERS_AND_COMPONENTS),showCaret:!0,shorterSectionHeader:!1}),Q.createElement(kk,null))}function I4(){let e=(0,N$.cX)().setCurrentTab;return Q.createElement("div",{className:IQ},Q.createElement(I6,{title:(0,eO.t)("whiteboard.inserts.templates"),subtitle:(0,eO.t)("whiteboard.inserts.templates_subtitle"),onClick:()=>e(Nz.p.TEMPLATES),showCaret:!0,shorterSectionHeader:!1}),Q.createElement(IW,null))}function I3(){let e=(0,N$.cX)().setCurrentTab;return Q.createElement("div",{className:IQ},Q.createElement(I6,{title:(0,eO.t)("whiteboard.inserts.more"),onClick:()=>e(Nz.p.MORE),showCaret:!0,shorterSectionHeader:!0}),Q.createElement(IH,{hasTopPadding:!1}))}function I6(e){return Q.createElement("div",{className:ea()(e.subtitle?"browse_resources_all_tab--sectionHeaderContainer--2ZoeS":"browse_resources_all_tab--sectionHeaderContainerNoSubtitle--qdp9l browse_resources_all_tab--sectionHeaderContainer--2ZoeS",e.shorterSectionHeader?"browse_resources_all_tab--sectionHeaderContainerShorter--jEE47":void 0),onClick:e.onClick,role:"button",tabIndex:0},Q.createElement("div",{className:"browse_resources_all_tab--sectionTitleContainer--5Z1j0"},Q.createElement("div",{className:"browse_resources_all_tab--sectionHeader--Xq6Ds text--fontPos16--oMC-G text--_fontBase--QdLsd"}," ",e.title," "),e.showCaret&&Q.createElement(eM.B,{className:"browse_resources_all_tab--expandCaret--IfaSz",svg:I$.A,onClick:e.onClick})),e.subtitle&&Q.createElement("div",{className:"browse_resources_all_tab--sectionHeaderSubtext--7a8Mb text--fontPos13--xW8hS text--_fontBase--QdLsd"},e.subtitle))}var I7=n(66673),I8=n(379648);function I9(e){let{currentTab:t,tabs:n,onTabChanged:a,fadeEdges:r,recordingKey:l,tabGroupHorizontalPadding:i,tabVerticalPadding:o}=e,s=(e,t)=>{e.stopPropagation(),a(t)};return Q.createElement(nx,{fadeEdges:r},Q.createElement("div",{className:"whiteboard_tab_group--tabs--9lkXa",style:void 0!==i?{paddingLeft:i,paddingRight:i}:void 0},n.map(({key:e,title:n})=>Q.createElement(ns.D8,{key:e,recordingKey:nh.Pt(l,e),className:"whiteboard_tab_group--figjamUniversalInsertTabClickTarget--Qvkv7",onClick:()=>a(e),onPointerDown:t=>s(t,e),role:"tab",tabIndex:0,"data-not-draggable":!0},Q.createElement("div",{className:e===t?"whiteboard_tab_group--selectedTab--LPO1K whiteboard_tab_group--tab--I8DQr text--fontPos13--xW8hS text--_fontBase--QdLsd":"whiteboard_tab_group--unselectedTab--Cpfle whiteboard_tab_group--tab--I8DQr text--fontPos13--xW8hS text--_fontBase--QdLsd",style:void 0!==o?{paddingTop:o,paddingBottom:o}:void 0},n),Q.createElement("div",{className:"whiteboard_tab_group--hiddenSelectedTabWidth--YBTTX whiteboard_tab_group--selectedTab--LPO1K whiteboard_tab_group--tab--I8DQr text--fontPos13--xW8hS text--_fontBase--QdLsd"},n)))))}let Ae=e=>e?An():At(),At=()=>[{key:Nz.p.WIDGETS,title:(0,eO.t)("whiteboard.inserts.widgets")},{key:Nz.p.PLUGINS,title:(0,eO.t)("whiteboard.inserts.plugins")},{key:Nz.p.MORE,title:(0,eO.t)("whiteboard.inserts.more")}],An=()=>[{key:Nz.p.ALL,title:(0,eO.t)("whiteboard.inserts.all")},{key:Nz.p.STICKERS_AND_COMPONENTS,title:(0,eO.t)("whiteboard.inserts.stickers")},{key:Nz.p.TEMPLATES,title:(0,eO.t)("whiteboard.inserts.templates")},{key:Nz.p.WIDGETS,title:(0,eO.t)("whiteboard.inserts.widgets")},{key:Nz.p.PLUGINS,title:(0,eO.t)("whiteboard.inserts.plugins")},{key:Nz.p.MORE,title:(0,eO.t)("whiteboard.inserts.more")}];function Aa(){let e=(0,t_.tS)(),{currentTab:t,setCurrentTab:n}=(0,N$.cX)();return Q.createElement(I9,{fadeEdges:!0,tabs:Ae(e),onTabChanged:e=>n(e),currentTab:t,recordingKey:"browseResourcesModal"})}var Ar=n(301280);let Al="browse_all_resources_modal_container--slidingPane--EMUEV sliding_pane--slidingPane--6OmDU",Ai="browse_all_resources_modal_container--slidingPaneLeft--GQIYb sliding_pane--slidingPaneLeft--Wrfdy sliding_pane--slidingPane--6OmDU",Ao={main:0,category:0,detail:0},As=e=>{let t=Q.useRef(Ao[e]);return Q.useEffect(()=>(setTimeout(()=>{Ao[e]=0},0),()=>{Ao[e]=t.current}),[e]),e=>t.current=e};function Ac(e){var t;let[n,a]=Q.useState(0),[r,l]=Q.useState(!1),i=(0,Nj.Kx)(),o=!e.categoryViewContent&&!e.categoryViewHeader&&!e.resourceDetailViewContent&&!e.resourceDetailViewHeader,s=(0,ue.Z)(o);Q.useEffect(()=>{void 0!==s&&(s&&!o||!s&&o)&&l(!0)},[s,o]);let c=null==(t=(0,I7.Gq)())?void 0:t.getPrimaryLocale(!1),d=Q.useRef((0,N$.DN)(c)),u=Q.useRef(null),m=As("main"),p=As("category"),_=As("detail"),f=Q.useCallback(e=>{e&&a(cX.zo-e.getBoundingClientRect().height-1)},[]),h=(0,$.d4)(e=>e.universalInsertModal),g=(0,$.wA)();(0,cX.J$)(h.pinned===S$.t.NOT_PINNED,u,e.entryPointId?`[data-element-target=${e.entryPointId}]`:void 0);let E=(0,aX.U)(),v=(0,cX.LR)(),y=()=>{var t;e.setSearchQuery(""),d.current=(0,N$.DN)(c),null==(t=b.current)||t.focus()},b=Q.useRef(null),{currentTab:C}=(0,N$.cX)();if(Q.useEffect(()=>{var e;(null==i?void 0:i.shouldOptimizeForIpadApp)||null==(e=b.current)||e.focus()},[C,null==i?void 0:i.shouldOptimizeForIpadApp]),!e.initialModalPosition)return null;let w=e.resourceDetailViewContent&&e.resourceDetailViewHeader;return Q.createElement(Q.Fragment,null,h.pinned===S$.t.PINNED&&e.showLeftPinBound&&Q.createElement("div",{className:Ar.BF,style:{width:cX.gR}}),Q.createElement(dn.vx,{ref:u,initialPosition:e.modalPosition||e.initialModalPosition,canResetPosition:e.shouldSnapToPosition,initialWidth:cX.gR,bounds:e.bounds,onEnterBound:()=>e.setShowLeftPinBound(!0),onLeaveBound:()=>e.setShowLeftPinBound(!1),onClose:v,onDragStart:()=>{oy.VU.get("set-tool-default","toolbar")(),g(gL.jy({pinned:S$.t.PINNED}))},onDragEnd:()=>{var t;null==(t=b.current)||t.focus(),e.showLeftPinBound&&e.setPinned()},containerClassName:h.pinned===S$.t.PINNED_AND_DOCKED_LEFT?"browse_all_resources_modal_container--modalContainerPinAnimation--b1eCL browse_all_resources_modal_container--modalContainer--uxh6u":"browse_all_resources_modal_container--modalContainer--uxh6u",contentContainerClassName:"browse_all_resources_modal_container--modalContentContainer---kbUK",isFigJam:!0,arrowPosition:e.shouldHideBottomArrow||h.pinned!==S$.t.NOT_PINNED?void 0:dn.F_.BOTTOM,arrowRelativeX:e.shouldHideBottomArrow||h.pinned!==S$.t.NOT_PINNED?void 0:cX.gR/2},Q.createElement(t6.fu,{name:"universal-insert"},Q.createElement("div",{role:"presentation",className:"browse_all_resources_modal_container--slidingPaneContainer--5a35a sliding_pane--slidingPaneContainer--RQkXf",onClick:e=>{e.stopPropagation(),E&&g(nP.oB())}},Q.createElement("div",{className:o?Al:Ai,onTransitionEnd:()=>{l(!1)}},Q.createElement("div",{ref:f,key:`${e.hasSearchBar}`},e.hasSearchBar&&Q.createElement("div",{className:"browse_all_resources_modal_container--topBarContainer--vkLt6"},Q.createElement("div",{className:"browse_all_resources_modal_container--searchBarContainer--JMkz8","data-not-draggable":!0},Q.createElement(SJ.IW,{focusOnMount:!(null==i?void 0:i.shouldOptimizeForIpadApp),selectTextOnMount:!(null==i?void 0:i.shouldOptimizeForIpadApp),className:"browse_all_resources_modal_container--searchBar--SMTxQ",query:e.searchQuery,placeholder:d.current,clearSearch:y,onChange:e.setSearchQuery,isKeyDownHandled:t=>t.keyCode===es.Uz.ESCAPE&&(e.searchQuery?e.setSearchQuery(""):v(),!0),hideXIcon:!0,ref:b,hasTransparentBackground:!0,onFocus:()=>g(I8.N.startSearch({entryPoint:"figjam:inserts"})),disabled:r,recordingKey:"browseAllResourcesModalSearchBar"}),e.searchQuery&&Q.createElement(ns.D8,{role:"button","aria-label":(0,eO.t)("whiteboard.inserts.clear_search"),onClick:ec.Ay.isIpad?void 0:y,onPointerDown:ec.Ay.isIpad?y:void 0,className:"browse_all_resources_modal_container--searchClearButton--IyQB4 text--fontPos13--xW8hS text--_fontBase--QdLsd","data-not-draggable":!0,"data-does-not-dismiss-modal":!0},Q.createElement(eO.Tx,{id:"whiteboard.inserts.clear"}))),h.pinned===S$.t.NOT_PINNED?Q.createElement(S0.O,{setPinned:e.setPinned}):Q.createElement(aO.Jn,{onClick:v,className:"browse_all_resources_modal_container--searchCloseButton--wpuxs"})),Q.createElement(Aa,null),Q.createElement("div",{className:"browse_all_resources_modal_container--divider--U9jtu"})),Q.createElement("div",{"data-not-draggable":!0},Q.createElement(ab.P,{key:C,height:(0,N$.mS)(h.pinned,n,N$.kD),width:cX.gR,initialScrollTop:Ao.main,onScroll:m,scrollContainerRef:e.mainScrollContainerRef},Q.createElement("div",{className:"browse_all_resources_modal_container--scrollContainerPadding--c9I-y"},e.children)))),e.categoryViewHeader&&e.categoryViewContent?Q.createElement("div",{className:w?Ai:Al},e.categoryViewHeader,Q.createElement("div",{"data-not-draggable":!0},Q.createElement(ab.P,{height:(0,N$.mS)(h.pinned,cX.zo-N$.HI,N$.HI),width:cX.gR,initialScrollTop:Ao.category,onScroll:p,scrollContainerRef:e.categoryScrollContainerRef},e.categoryViewContent))):void 0,e.resourceDetailViewHeader&&e.resourceDetailViewContent?Q.createElement("div",{className:Al},e.resourceDetailViewHeader,Q.createElement("div",{"data-not-draggable":!0},Q.createElement(ab.P,{height:(0,N$.mS)(h.pinned,cX.zo-N$.SK,N$.SK),width:cX.gR,initialScrollTop:Ao.detail,onScroll:_},e.resourceDetailViewContent))):void 0))))}function Ad(e){let{selectedCategory:t,goBack:n}=e,a=(0,$.d4)(e=>e.universalInsertModal),r=(0,cX.LR)();return Q.createElement("div",{className:"browse_explore_category_top_bar--topBar--VdcGk"},Q.createElement("div",{className:"browse_explore_category_top_bar--left--XjCF8"},Q.createElement(eM.B,{svg:S6.A,className:"browse_explore_category_top_bar--backButton--lqLK5",onClick:ec.Ay.isIpad?void 0:n,onPointerDown:ec.Ay.isIpad?n:void 0,"data-not-draggable":!0,"data-does-not-dismiss-modal":!0}),Q.createElement("div",{className:"browse_explore_category_top_bar--categoryNameContainer--b--X4"},Q.createElement("div",{className:"browse_explore_category_top_bar--categoryName--wVRFs text--fontPos13--xW8hS text--_fontBase--QdLsd ellipsis--ellipsis--Tjyfa"},t.title))),Q.createElement("div",{className:"browse_explore_category_top_bar--right--0SLBG"},e.extraContent,a.pinned===S$.t.NOT_PINNED?Q.createElement(S0.O,{setPinned:e.setPinned}):Q.createElement(aO.Jn,{onClick:r,className:"browse_explore_category_top_bar--searchCloseButton--XQ3fr browse_modal_container--searchCloseButton--WHSfL"})))}var Au=n(740625),Am=n(73204);let Ap="browse_explore_category_view--communityLink---iLAP",A_="browse_explore_category_view--loadingSpinner--soJ45",Af="browse_explore_category_view--resourceContainer--pdbQU";var Ah=((C=Ah||{})[C.CLICKED_SEE_MORE=0]="CLICKED_SEE_MORE",C[C.INFINITE_SCROLL=1]="INFINITE_SCROLL",C);function Ag(e){let t=(0,$.wA)(),[n,a]=Q.useState({}),[r,l]=Q.useState({}),i=e.selectedCategoryId,{shelves:o,isLoading:s}=(0,Sb.d7)(e.shelfType),{categories:c,isLoading:d}=(0,k3.Vw)(e.categoryType),[u,m]=Q.useState(!1),p=o?o.find(e=>e.id===i):void 0,_=c?c.find(e=>e.title===(null==p?void 0:p.title)):void 0,f=(0,Nj.Kx)(),h=Q.useCallback(e=>{t(eL.F.enqueue({message:(0,eO.t)("whiteboard.inserts.could_not_fetch_collections",{errorMessage:e}),error:!0}))},[t]),g=e.categoryType===NI.O$.BROWSE_PLUGINS_MODAL?"plugins":"widgets",E={editor_types:["whiteboard","design_and_whiteboard"].toString()},v=`/api/community_categories/${null==_?void 0:_.id}/${g}?${(0,Am.lF)(E)}`,y=Q.useCallback(l=>{(async()=>{let o=n[i],s=r[i];if(p&&(0,Au.u9)(o)&&_&&!u&&(1!==l||s)){m(!0);try{let r;let l=await (0,Au.En)(v,Au.vs,o,Au.AS),s=e.categoryType===NI.O$.BROWSE_PLUGINS_MODAL?l.plugins:l.widgets;if(!Array.isArray(s)){m(!1);return}let c=[],d=[];s.forEach(t=>{e.categoryType===NI.O$.BROWSE_PLUGINS_MODAL?c.push(t):e.categoryType===NI.O$.BROWSE_WIDGETS_MODAL&&d.push(t)}),t(NP.Vx(c)),t(NP.uV(d));let u=s.filter((r=new Set(p.shelf_content.map(e=>e.id)),e=>!r.has(e.id))),_=[...void 0===o?[]:e.categoryType===NI.O$.BROWSE_PLUGINS_MODAL?o.plugins:o.widgets,...u],f=e.categoryType===NI.O$.BROWSE_PLUGINS_MODAL?"plugins":"widgets";a({...n,[i]:{...l,[f]:_}}),m(!1)}catch(t){let e=(0,eO.Jv)(t);e&&h(e)}}})()},[t,e.categoryType,_,i,p,n,u,r,v,h]);if(!o||0===o.length)return null;if(s||d)return Q.createElement(t2.kt,{className:A_});let b=`/community/${e.resourceType===NK.bD.PLUGIN?"plugins/figjam":"widgets"}`,C=()=>{i&&(r[i]||l({...r,[i]:!0}),y(0))},w=()=>{let e=n[i];return(0,Au.u9)(e)},T=t=>Q.createElement("button",{key:t.id,className:Af},e.renderResource(t));return p?Q.createElement(t6.fu,{name:"explore",properties:{resourceType:e.resourceType,selectedCategory:i}},Q.createElement("div",{className:e.resourceType===NK.bD.WIDGET?"browse_explore_category_view--widgetTilesGridContainer--U4Dl6 browse_widgets_view--widgetTilesGridContainer--t5-lL":"browse_explore_category_view--pluginCategoryViewPadding--tst89"},p.shelf_content.map(e=>T(e)),_&&r[i]&&(()=>{let t=e.resourceType===NK.bD.PLUGIN?"plugins":"widgets",a=n[i],r=a&&a[t];return r&&0!==r.length?r.map(e=>T(e)):null})()),(()=>{let e=r[i];return(!e||w())&&i?u||e&&w()?Q.createElement(Q.Fragment,null,Q.createElement(NS.a,{onIntersectionChange:e=>{e.isIntersecting&&!u&&y(1)}}),Q.createElement(t2.kt,{className:A_})):Q.createElement("button",{className:Ap,onClick:C},Q.createElement(eO.Tx,{id:"whiteboard.inserts.see_more"})):(null==f?void 0:f.shouldOptimizeForIpadApp)||(0,eo.kc)().cmty_m10n_test_apple_os?null:Q.createElement("a",{className:Ap,href:b,target:"_blank"},Q.createElement(eM.B,{svg:SS.A,className:"browse_explore_category_view--communityLinkIcon--1X73u text--fontPos11--2LvXf text--_fontBase--QdLsd"}),Q.createElement(eO.Tx,{id:"whiteboard.inserts.browse_more_in_community"}))})()):null}function AE(e){let t=(0,Nc.U5)(e.debouncedSearchQuery),n=(0,Nc.d0)();return 0===e.results.length&&0===t.length?Q.createElement(t6.fu,{name:"more",properties:{query:e.debouncedSearchQuery}},Q.createElement(Nq,{illustration:kT.A,defaultDisplayStringResourceType:"items",query:e.query})):Q.createElement(t6.fu,{name:"more",properties:{query:e.debouncedSearchQuery}},Q.createElement("div",{className:"browse_more_search_view--searchTopPadding--iZQ6F"},n&&Q.createElement(Ip,{faceStampSearchIsLoading:e.faceStampSearchIsLoading,query:e.query}),e.results.map((e,t)=>Q.createElement(e,{key:t}))))}let Av="browse_plugins_search_view--sectionHeader--OKPiP text--fontPos13--xW8hS text--_fontBase--QdLsd";function Ay(e){let{query:t,debouncedSearchQuery:n,hasResolved:a,savedSearchResultIds:r,communitySearchResultIds:l,orgSearchResultIds:i,developmentSearchResultIds:o,lastPluginSearchQuery:s}=e,c=(0,$.d4)(e=>e.currentUserOrgId&&e.orgById[e.currentUserOrgId]),d=r&&r.length>0,u=l&&l.length>0,m=o&&o.length>0,p=c&&i&&i.length>0;return s!==n?Q.createElement(k_,null):!a||d||u||p||m?Q.createElement(t6.fu,{name:"plugins",properties:{resourceType:"plugin",query:n}},d&&Q.createElement(Q.Fragment,null,Q.createElement("div",{className:Av},Q.createElement(eO.Tx,{id:"whiteboard.inserts.plugin_recents"})),r.map(e=>Q.createElement(Si,{pluginId:e,view:Nz.p.SAVED,key:`saved_plugin_${e}`}))),m&&Q.createElement(Q.Fragment,null,Q.createElement("div",{className:Av},Q.createElement(eO.Tx,{id:"whiteboard.inserts.development"})),o.map(e=>Q.createElement(Sl,{localFileId:e,view:Nz.p.DEVELOPMENT,key:"development_plugin_"+e}))),p&&Q.createElement(Q.Fragment,null,Q.createElement("div",{className:Av},Q.createElement(eO.Tx,{id:"whiteboard.inserts.plugin_from_org",orgName:c.name})),i.map(e=>Q.createElement(Si,{pluginId:e,view:Nz.p.EXPLORE,key:`org_plugin_${e}`}))),u&&Q.createElement(Q.Fragment,null,Q.createElement("div",{className:Av},Q.createElement(eO.Tx,{id:"whiteboard.inserts.plugin_from_community"})),l.map(e=>Q.createElement(Si,{pluginId:e,view:Nz.p.EXPLORE,key:`community_plugin_${e}`})))):Q.createElement(t6.fu,{name:"plugins",properties:{resourceType:"plugin",query:n}},Q.createElement(Nq,{illustration:kT.A,defaultDisplayStringResourceType:"plugins",query:t,cta:Q.createElement(NJ,{url:"/community/plugins"}),orgNameIfAllowlistEnforced:c&&c.plugins_whitelist_enforced?c.name:void 0}))}var Ab=n(454546),AC=n(481505);function Aw(e){let t=e.extensionType===rr.Ag.Plugin?AC.E2:AC.Hr,n=(0,d0.sZ)(),a=!!n&&t.hasAllowlist(n);return n&&a?Q.createElement(Ax,{org:n,dedupeOrgSaves:e.dedupeOrgSaves,extensionType:e.extensionType}):null}function AT(e){let{extensionIds:t,extensionType:n}=e;return n===rr.Ag.Plugin?Q.createElement(Q.Fragment,null,t.map(e=>Q.createElement(Si,{pluginId:e,view:Nz.p.EXPLORE,key:e}))):Q.createElement("div",{className:IY},t.map(e=>Q.createElement(SX,{widgetId:e,key:e})))}function Ax(e){let{org:t}=e,n=(e.extensionType===rr.Ag.Plugin?ig.ll:ig.U6)(),a=Q.useMemo(()=>Object.keys(n),[n]),r=(0,t_.tS)(),l=(e.extensionType===rr.Ag.Plugin?rr.Gb:rr.n_)(t.id,r),i=(0,m_.mC)(l),o=(0,ig.Be)(),s=e.extensionType===rr.Ag.Plugin?o.orgPlugins:o.orgWidgets,c=Q.useMemo(()=>e.dedupeOrgSaves?a.filter(e=>!s[e]):a,[a,e.dedupeOrgSaves,s]);return i?0===c.length?null:Q.createElement(Q.Fragment,null,Q.createElement("div",{className:Iz},Q.createElement(eO.Tx,{id:"universal_insert.approved_from_figma_community"})),Q.createElement(AT,{extensionType:e.extensionType,extensionIds:c})):Q.createElement(t2.kt,{className:Ij})}var AN=((w=AN||{}).RECENT_AND_SAVED="recent_and_saved",w.DEVELOPMENT="development",w.ORG="org",w);let Ak="browse_main_view_selector--mainViewHeader--1tbfQ",AS="browse_main_view_selector--mainViewSelectorTitle--WL5Qi text--fontPos13--xW8hS text--_fontBase--QdLsd";function AI(e){let t=(0,$.wA)(),n=(0,aX.U)(),a=(0,d0.sZ)(),r=Q.useCallback(e=>(function(e,t){switch(e){case AN.RECENT_AND_SAVED:return(0,eO.t)("universal_insert.recents_and_saved");case AN.DEVELOPMENT:return(0,eO.t)("universal_insert.development");case AN.ORG:return t?(0,eO.t)("whiteboard.inserts.plugin_from_org",{orgName:t.name}):(0,eO.t)("universal_insert.from_your_org")}})(e,a),[a]),l=[AN.RECENT_AND_SAVED],i=(0,$.d4)(e=>e.universalInsertModal.scrollDevelopmentSectionIntoView),o=Q.useRef(null);if(o.current&&i){t(gL.SI({}));let e=o.current;setTimeout(()=>e.scrollIntoView({behavior:"smooth"}),0)}return(wk.eD&&l.push(AN.DEVELOPMENT),1!==l.length||a)?Q.createElement("div",{className:Ak,ref:o},Q.createElement(aT.l6,{id:"figjam-browse-modal-main-view-select",property:e.currentView,formatter:{format:r},onChange:e.setCurrentView,dispatch:t,inputClassName:AS,className:"browse_main_view_selector--mainViewSelector--l7iuo",dropdownShown:n,dropdownWidth:173,role:"button"},l.map(e=>Q.createElement(aT.c$,{value:e,key:e},r(e))),a&&Q.createElement(aT.sK,null),a&&Q.createElement(aT.c$,{value:AN.ORG},r(AN.ORG)))):Q.createElement("div",{className:ea()(Ak,tw.cx.ml8.mt2.mb2.$)},Q.createElement("div",{className:AS},r(l[0])))}let AA=(0,nf.eU)(AN.RECENT_AND_SAVED),AP=(0,nf.eU)(AN.RECENT_AND_SAVED);var AO=n(715913),AL=n(957756);function AM(){let e=(0,ig.nl)(),t=(0,ig.Im)(),n=(0,ig.kd)().filter(e=>!t[e.id]);if(0===Object.keys(e).length&&0===n.length)return Q.createElement(AL.W,{isWidget:!1});let a=Object.keys(e).reverse();return Q.createElement(Q.Fragment,null,a.map(e=>Q.createElement(Sl,{localFileId:Number(e),view:Nz.p.DEVELOPMENT,key:"development_plugin_"+e})),n.map(e=>Q.createElement(Sl,{publishedPlugin:e,view:Nz.p.DEVELOPMENT,key:"development_plugin_"+e.id})))}function AD(){let e=(0,ig.f6)();return 0===e.length?null:Q.createElement(t6.fu,{name:"invited"},e.map(e=>Q.createElement(Si,{pluginId:e.id,key:e.id,view:Nz.p.PLUGINS,pluginVersion:(0,iE.uF)(e)})),Q.createElement(nk.Y,{padding:{horizontal:24}},Q.createElement("div",{className:tw.cx.wFull.h1.$,style:tT.sx.add({backgroundColor:"var(--color-border, $figmaFGBlack1)"}).$})))}var AR=n(102216),AF=n(975580);function AB(){return Q.createElement("div",{className:tw.cx.flex.flexColumn.itemsCenter.alignCenter.pl16.pr16.$},Q.createElement("div",null,Q.createElement(eM.B,{svg:AF.A,useOriginalSrcFills_DEPRECATED:!0,svgWidth:"90px",autosize:!0})),Q.createElement("div",{className:tw.cx.mb24.mt16.pl36.pr36.$},Q.createElement(eO.Tx,{id:"whiteboard.inserts.plugin_community_disabled",private_plugins:Q.createElement(nc.CY,{href:"https://www.figma.com/plugin-docs",target:"_blank",className:"browse_resources_modal--emptyStateLink--N1T6a",trusted:!0},Q.createElement(eO.Tx,{id:"whiteboard.inserts.plugin_community_disabled_private_plugins"}))})))}let AU="browse_plugins_recents_list--loadingSpinner--ydkCW";function AH(){let e=(0,$.d4)(e=>e.currentUserOrgId?e.orgById[e.currentUserOrgId]:void 0);return e?Q.createElement(AV,{org:e}):Q.createElement(t2.kt,{className:AU})}function AV({org:e}){let t=(0,$.d4)(t=>{var n;let{orgUsersByOrgId:a}=t;return(null==(n=a.orgUsers[e.id][t.user.id])?void 0:n.permission)===dV._D.GUEST}),n=!!(e&&e.plugins_whitelist_enforced),a=(0,ig.ll)(),r=(0,ep.R)(n=>e&&!t?(0,iE.Qt)((0,iE.i8)((0,N$.H6)(Object.values(n.publishedPlugins))),e.id):{}),l=Object.keys(r),i=(0,t_.tS)(),o=(0,rr.Gb)((null==e?void 0:e.id)??"",i),s=(0,m_.mC)(o),c=NP.LP.loadingKeyForPayload((null==e?void 0:e.id)??""),d=(0,m_.mC)(c),u=(0,ig.Be)().orgPlugins,m=Q.useMemo(()=>{let e=Object.values(u).filter(e=>!r[e.plugin_id]);return n&&(e=e.filter(e=>a[e.plugin_id])),e.sort(ig.YW)},[a,n,r,u]),p=(0,AR.Ol)(m),_=!e.public_plugins_allowed||e.plugins_whitelist_enforced&&s&&0===Object.keys(a).length,f=t||d&&0===Object.keys(r).length,h=(0,$.wA)();return(Q.useEffect(()=>{e&&!t&&h(yw.Xt())},[h,e,t]),(!n||s)&&d)?_&&f?Q.createElement(AB,null):Q.createElement(t6.fu,{name:"explore"},l.length>0&&Q.createElement(Q.Fragment,null,l.map(e=>Q.createElement(Si,{pluginId:e,view:Nz.p.EXPLORE,key:e,showLockIcon:!0}))),p.length>0&&Q.createElement(Q.Fragment,null,Q.createElement("div",{className:"browse_plugins_recents_list--sectionHeader--az12L text--fontPos13--xW8hS text--_fontBase--QdLsd"},Q.createElement(eO.Tx,{id:"universal_insert.saved_from_community"})),p.map(e=>{let t=e.plugin_id;return Q.createElement(Si,{pluginId:t,view:Nz.p.EXPLORE,key:t})})),Q.createElement(Aw,{extensionType:rr.Ag.Plugin,dedupeOrgSaves:!0})):Q.createElement(t2.kt,{className:AU})}var AG=n(588402);function AK(){return Q.createElement("div",{className:tw.cx.pl24.pr24.pt8.pb8.$},Q.createElement("div",{className:tw.cx.wFull.h1.$,style:tT.sx.add({backgroundColor:"var(--color-border)"}).$}))}let AW="browse_recent_and_saved_view--subTitle--04tFz text--fontPos12--YsUAh text--_fontBase--QdLsd",Az="browse_recent_and_saved_view--showAllSavedExtensionsButton--l1qOq text--fontPos12--YsUAh text--_fontBase--QdLsd";function Aj(){let{filterByAllowlist:e,filterByPublicResourcesAllowed:t}=(0,ig.jA)(!1),n=(0,N$.Hb)(),a=(0,ig.Tg)().filter(n);a=t(a=e(a));let r=(0,ig.Be)(),l=r.plugins,i=Q.useMemo(()=>Object.values(l).sort(ig.YW).filter(e=>"user"===e.installed_by),[l]),o=(0,eg.xx)(()=>i),s=(0,AR.Ol)(o()),[c,d]=Q.useState(!1),u=Q.useMemo(()=>c?s:s.slice(0,40),[s,c]),m=(0,wu.$D)();if(!r.loaded&&!m)return Q.createElement(t2.kt,{className:"browse_recent_and_saved_view--loadingSpinner--kb6-g"});if(0===a.length&&0===s.length)return Q.createElement(AG.H,{isWidget:!1});let p=a.slice(0,6),_=p.length>0,f=s.length>0;return Q.createElement(Q.Fragment,null,_&&Q.createElement(Q.Fragment,null,Q.createElement("div",{className:AW},Q.createElement(eO.Tx,{id:"universal_insert.recents"})),Q.createElement(IG,{items:p,view:Nz.p.RECENTS})),_&&f&&Q.createElement(AK,null),f&&Q.createElement(Q.Fragment,null,Q.createElement("div",{className:AW},Q.createElement(eO.Tx,{id:"universal_insert.saved"})),Q.createElement(IG,{items:u,view:Nz.p.SAVED}),s.length>40&&!c&&Q.createElement("button",{className:Az,onClick:()=>d(!0)},Q.createElement(eO.Tx,{id:"universal_insert.show_all_saved_plugins"}))))}function AY(){return Q.createElement(SI,{resourceType:NK.bD.PLUGIN,shelfType:NK.cS.BROWSE_PLUGINS_MODAL,renderResource:e=>Q.createElement(Si,{pluginId:e.id,view:Nz.p.EXPLORE,key:e.id})})}function AZ(){let[e,t]=(0,ef.fp)(AP);return Q.createElement(AI,{setCurrentView:t,currentView:e})}function AX(){let e=(0,ef.md)(AP),t=(0,d0.sZ)(),n=!!(t&&t.plugins_whitelist_enforced);return Q.createElement("div",null,Q.createElement(AD,null),Q.createElement("div",{className:tw.cx.flex.justifyBetween.wFull.minW0.$},Q.createElement(AZ,null),e===AN.DEVELOPMENT&&Q.createElement("div",{className:tw.cx.flex.itemsCenter.pr16.$},Q.createElement(Ab.n,{resourceType:NK.bD.PLUGIN}))),e===AN.RECENT_AND_SAVED&&Q.createElement(Q.Fragment,null,Q.createElement(Aj,null),n?Q.createElement(Aw,{extensionType:rr.Ag.Plugin}):Q.createElement(AY,null)),e===AN.DEVELOPMENT&&Q.createElement(AM,null),e===AN.ORG&&Q.createElement(Q.Fragment,null,Q.createElement(AH,null),!n&&Q.createElement(AY,null)))}function Aq(){Q.useEffect(()=>{function e(e){e.key===wJ.S7&&el.D.dispatch(wo.HQ({storeInRecentsKey:dz.$A.FigJam}))}return el.D.dispatch(wo.HQ({storeInRecentsKey:dz.$A.FigJam})),window.addEventListener("storage",e,!1),()=>{window.removeEventListener("storage",e,!1)}},[]);let e=(0,$.d4)(e=>e.currentUserOrgId?e.orgById[e.currentUserOrgId]:void 0),t=e?e.id:"",n=(0,m_.oh)(NA.sz.loadingKeyForPayload({shelfType:NK.cS.BROWSE_PLUGINS_MODAL})),a=(0,t_.tS)(),r=(0,m_.oh)((0,rr.Gb)(t,a)),l=(0,m_.oh)(NP.LP.loadingKeyForPayload(t));return n||r||l?Q.createElement(k_,null):Q.createElement(t6.fu,{name:"plugins"},Q.createElement(AX,null))}var AJ=n(854849),AQ=n(136701),A$=n(341260),A0=n(884053),A1=n(687348);function A2(e){let t=(0,$.d4)(e=>e.universalInsertModal),n=(0,$.wA)(),a=(0,ig.$1)(),r=(0,$.d4)(t=>(0,iE.my)(e.pluginId,t.publishedPlugins)),l=(0,kM.gn)(r),i=Object.values(a).find(e=>e.plugin_id===r.id),o=!!i,s=!!r.id,c=(0,ig.Be)().plugins[e.pluginId]||(0,iE.uF)(r),{isSavedForOrg:d,isSavedForUser:u,onSaveClick:m}=(0,k3.Bj)(c),p=d||u,_=(0,N$.cX)().currentTab,f=(0,NG.V)(_),h=(0,N0.b)(),g=(0,Nj.Kx)(),{orgEntity:E,org:v,appModel:y,selectedView:b,openFile:C,isReadOnly:w,userCanRunPlugins:T,pluginSubmenuDropdownTargetRect:x,activeTextReviewPlugin:N}=(0,ep.R)(e=>{var t,n;return{orgEntity:(0,wP.Jl)(e),org:e.currentUserOrgId?e.orgById[e.currentUserOrgId]:null,appModel:e.mirror.appModel,selectedView:e.selectedView,openFile:e.openFile,isReadOnly:e.mirror.appModel.isReadOnly,userCanRunPlugins:(0,rt.GP)(e),pluginSubmenuDropdownTargetRect:null==(n=null==(t=e.dropdownShown)?void 0:t.data)?void 0:n.targetRect,activeTextReviewPlugin:e.mirror.appModel.activeTextReviewPlugin}});Q.useEffect(()=>{s||n(NP.af({id:e.pluginId,resourceType:NK.bD.PLUGIN}))},[n,e.pluginId,s]);let k={};k[c.plugin_id]=c;let S={openFile:C,allSavedPlugins:k,localExtensions:a,orgEntity:E,org:v,isReadOnly:w,userCanRunPlugins:T,editorType:"whiteboard",activeTextReviewPlugin:N,isDevHandoff:!1,publishedPlugins:{},publishedWidgets:{}},I={openFile:C,allSavedPlugins:{},localExtensions:a,orgEntity:E,org:v,isReadOnly:w,userCanRunPlugins:T,editorType:"whiteboard",activeTextReviewPlugin:N,publishedPlugins:{},publishedWidgets:{}},A=(0,aX.U)(),P=(null==A?void 0:A.type)===A5&&A.data.pluginId===e.pluginId,O=(null==i?void 0:i.manifest.menu)&&i.manifest.menu.length>0?(0,wS.z9)(i.manifest.menu,{localFileId:null==i?void 0:i.localFileId}):[],L=c.manifest.menu&&c.manifest.menu.length>0?(0,wS.z9)(c.manifest.menu,{pluginId:c.plugin_id}):[],M=L.length>0||O.length>0,D=o||M,R=()=>{let t=()=>{let t={type:"run-installed-plugin",pluginId:e.pluginId,command:void 0,parameterOnly:c.manifest.parameters&&!1!==c.manifest.parameterOnly,parameterEntry:(0,wS.cE)(c.manifest.parameters,c.name)};(0,AJ.Im)(S,f,t)};p?t():m(t,!0),h()},F=()=>{if(!i)return;let e=()=>{let e={type:"run-local-plugin",localFileId:i.localFileId,command:void 0,parameterOnly:i.manifest.parameters&&!1!==i.manifest.parameterOnly,parameterEntry:(0,wS.cE)(i.manifest.parameters,i.name)};(0,AJ.Im)(I,f,e)};p?e():m(e,!0),h()};if(!s)return Q.createElement(t2.kt,{className:A1.S});let B=(null==g?void 0:g.shouldOptimizeForIpadApp)||(0,eo.kc)().cmty_m10n_test_apple_os;return Q.createElement(t6.fu,{name:"detail",properties:{resourceId:r.id,isMonetized:(0,NK.m3)(r),resourceType:NK.bD.PLUGIN,editorType:"whiteboard"}},Q.createElement(ab.P,{height:(0,N$.mS)(t.pinned,500,N$.s3)},Q.createElement("div",{className:A1.tJ},l&&Q.createElement(kU.cu,null),Q.createElement("img",{className:A1.VM,src:r.redirect_thumbnail_url||"",alt:`${c.name}`,width:cX.gR,height:cX.gR/2}),Q.createElement("div",{className:A1.oQ},Q.createElement(A0.f,{resource:r})),Q.createElement("div",{className:A1.h_},Q.createElement(id.R,{fallback:null,errorFallback:null,value:c.description})))),!B&&Q.createElement(nc.N_,{className:A1.P0,href:`/community/plugin/${e.pluginId}`,target:"_blank",trusted:!0},Q.createElement(eM.B,{svg:SS.A,className:A1.JX}),Q.createElement(eO.Tx,{id:"whiteboard.inserts.see_more_details_in_community"})),P&&x&&Q.createElement(aq.j,{lean:"left",minWidth:130,rootAndSubmenuMaxWidth:190,leanPadding:0,showPoint:!1,items:(()=>{if(!D)return[];if(!M&&i)return[{displayText:"In-development version",callback:()=>F()},{displayText:"Published version",callback:()=>R()}];let e=e=>()=>(0,AJ.Im)(S,f,e),t=[];L.forEach(n=>{t.push((0,AJ.q4)(n,e))});let a=(0,A$.jv)(t,{appModel:y,selectedView:b});if(!o)return a;let r=e=>()=>(0,AJ.Im)(I,f,e),l=[];O.forEach(e=>{l.push((0,AJ.q4)(e,r))});let s=(0,A$.jv)(l,{appModel:y,selectedView:b}),c=[];return i.error?c.push({displayText:"\u26A0 In-development version",callback:()=>{n((0,n9.to)({type:AQ.r,data:{dispatch:n,error:i.error,resourceType:NK.bD.PLUGIN},showModalsBeneath:!0}))}}):s.length>0?c.push({displayText:"In-development version",children:s}):c.push({displayText:"In-development version",callback:()=>{F()}}),a.length>0?c.push({displayText:"Published version",children:a}):c.push({displayText:"Published version",callback:()=>{R()}}),c})(),onSelectItem:e=>{e.callback&&e.callback("",null,n)},parentRect:x,dispatch:n}))}let A5="DROPDOWN_TYPE_PLUGIN_DETAIL_SUBMENU";function A4(e){let t=e.selectedCategoryId,{shelves:n,isLoading:a}=(0,Sb.d7)(e.shelfType),r=n?n.find(e=>e.id===t):void 0;if(!n||0===n.length)return null;if(a)return Q.createElement(t2.kt,{className:A_});let l=t=>Q.createElement("div",{key:t.id,className:Af,role:"button",tabIndex:0},e.renderResource(t));return r?Q.createElement(t6.fu,{name:"explore",properties:{selectedCategory:t}},Q.createElement("div",{className:"browse_explore_category_view--resourcesGrid--Gvw3Y"},r.shelf_content.map(e=>l(e)))):null}var A3=n(619258),A6=n(369464),A7=n(854918),A8=n(276762);function A9(e){let t=(0,$.wA)(),n=(0,$.d4)(e=>e.universalInsertModal),a=(0,$.d4)(e=>e.hubFiles)[e.id],r=(0,NU.a6)(a),l=(0,Nj.Kx)(),i=(null==l?void 0:l.shouldOptimizeForIpadApp)||(0,eo.kc)().cmty_m10n_test_apple_os;return Q.createElement(t6.fu,{name:"detail",properties:{resourceId:a.id,resourceType:NK.bD.HUB_FILE}},Q.createElement(ab.P,{height:(0,N$.mS)(n.pinned,504,N$.s3)},Q.createElement("div",{className:"browse_templates_preview--embedContainer--8lgx5 hub_file_detail_view--embedContainer--QMuUr detail_view--embedContainer---TcbF"},Q.createElement(A8.Z,{key:a.id,hubFile:a,profileIdToAdminResourceAs:null,fullscreenState:A7.G4.DEFAULT,dispatch:t,containerClassName:"browse_templates_preview--embedContainerInner--0EnCv hub_file_detail_view--iframeContainer---uQYN",disableClickToExpand:!0,disableComments:!0,disableFullscreen:!0,fixedSize:!0})),Q.createElement("div",{className:"browse_templates_preview--description--RScN2 text--fontPos13--xW8hS text--_fontBase--QdLsd"},Q.createElement("div",{className:"browse_templates_preview--textDescription--4t3-n"},(0,kI.$J)(r.description).trim().length>0&&Q.createElement(id.R,{fallback:null,errorFallback:null,value:r.description})))),!i&&Q.createElement(A3.N,{className:"browse_templates_preview--communityLinkBase--1NI6W",href:(0,dX.UI)({path:A6.Uo.FILE,id:a.id}),target:"_blank",trusted:!0},Q.createElement(eM.B,{svg:SS.A,className:"browse_templates_preview--communityLinkIcon--DC-Q4 text--fontPos11--2LvXf text--_fontBase--QdLsd"}),Q.createElement(eO.Tx,{id:"whiteboard.inserts.see_more_details_in_community"})))}var Pe=n(15601);function Pt(e){var t,n,a;let{resourceId:r,goBack:l,buttonCta:i}=e,o=(0,$.d4)(e=>e.hubFiles)[r],s=(0,NU.a6)(o),{insertTemplate:c,isInsertingTemplate:d}=(0,ND.Fz)(),u=(0,N0.b)(),{currentTab:m,searchQuery:p}=(0,N$.cX)(),_=(0,NG.V)(m),f=(0,$.d4)(e=>e.universalInsertModal),h=(0,cX.LR)(),g="whiteboard"===(0,mD.lg)(),E=(0,kV.F5)(),v=(null==(t=o.community_publishers)?void 0:t.accepted)||[];return Q.createElement("div",{className:"browse_templates_preview_top_bar--topBar--6SkwK"},Q.createElement("div",{className:"browse_templates_preview_top_bar--left--vErPQ"},Q.createElement(eM.B,{svg:S6.A,className:"browse_templates_preview_top_bar--backButton--d3Iws",onClick:ec.Ay.isIpad?void 0:l,onPointerDown:ec.Ay.isIpad?l:void 0,"data-not-draggable":!0,"data-does-not-dismiss-modal":!0}),Q.createElement("div",{className:"browse_templates_preview_top_bar--pluginMetadataContainer--WC29F"},Q.createElement("div",{className:"browse_templates_preview_top_bar--pluginTileName--iiS-m text--fontPos13--xW8hS text--_fontBase--QdLsd ellipsis--ellipsis--Tjyfa"},s.name),((null==(n=o.community_publishers)?void 0:n.accepted.length)||0)>0&&Q.createElement("div",{className:"browse_templates_preview_top_bar--pluginTilePublishers--UFpkz text--fontPos11--2LvXf text--_fontBase--QdLsd ellipsis--ellipsis--Tjyfa"},Q.createElement(eO.Tx,{id:"whiteboard.inserts.by_publisher",numPublishers:v.length,firstPublisherName:null==(a=v[0])?void 0:a.name,multiplePublisherSuffix:Q.createElement("span",{"data-tooltip-type":nO.Ib.TEXT,"data-tooltip":(0,Pe.eg)(v.slice(1),v.length,e=>e.name)},Q.createElement(eO.Tx,{id:"whiteboard.inserts.and_others"}))})))),Q.createElement("div",{className:"browse_templates_preview_top_bar--right--jxcsE"},Q.createElement(Sp.i,{insertTemplate:()=>{c({template:{template:o,type:NV.n.HubFile},templateInsertionDirection:eU.hKj.RIGHT,triggeredFrom:_,onSuccess:()=>{g&&(0,kV.oM)({id:o.id,type:Nz.p.TEMPLATES,source:_,options:{...E,query:p}}),u()}})},isInsertingTemplate:d(r)},i),f.pinned===S$.t.NOT_PINNED?Q.createElement(S0.O,{setPinned:e.setPinned}):Q.createElement(aO.Jn,{onClick:h,className:"browse_templates_preview_top_bar--searchCloseButton--itAHE browse_modal_container--searchCloseButton--WHSfL"})))}function Pn(e){let t=(0,$.d4)(e=>e.hubFiles),n=e.templates[SO].map(e=>t[e]),a=(0,NL.hC)(),[r,l]=Q.useState(!a);Q.useEffect(()=>{a&&l(!1)},[e.debouncedSearchQuery,a]);let i=[...e.teamTemplatesFromSearch.map(e=>({type:NV.n.TeamTemplate,template:e})),...r?n.map(e=>({type:NV.n.HubFile,template:e})):[]];return 0!==n.length||0!==e.totalNumTeamTemplatesFromSearch||e.teamTemplatesFromSearchIsLoading?Q.createElement(t6.fu,{name:"templates",properties:{query:e.debouncedSearchQuery}},Q.createElement("div",{className:"browse_templates_tab--templatesSearchTopPadding--h4HNe"},Q.createElement(Sy,{templates:i,templateInsertionLocation:NU.RD.CURRENT_FILE}),!e.teamTemplatesFromSearchIsLoading&&Q.createElement("div",{className:tw.cx.relative.$},Q.createElement(NS.a,{className:tw.cx.absolute.h300.$,style:{top:"-150px"},"data-testid":"load-more-search",onIntersectionChange:({isIntersecting:t})=>{t&&!e.requestLoadMoreTeamTemplatesFromSearch()&&l(!0)}})))):Q.createElement(t6.fu,{name:"templates",properties:{query:e.debouncedSearchQuery}},Q.createElement(Nq,{illustration:kT.A,defaultDisplayStringResourceType:"templates",query:e.query,cta:Q.createElement(NJ,{url:"/community/figjam",resourceType:NK.bD.HUB_FILE})}))}var Pa=n(775259),Pr=n(888835),Pl=n(453144);let Pi=new Pl.Ef([],{keys:["name"]}),Po=new Pl.Ef([],wP.Ih),Ps=new Pl.Ef([],wP.Ih),Pc=new Pl.Ef([],{threshold:.1,matchAllTokens:!0,tokenize:!1,distance:300,keys:[{name:"name",weight:1},{name:"tags",weight:.5}]});Pc.set([{name:"Code block",tags:["snippet","syntax","highlight","program","`"],component:IF.j6},{name:"Timer",tags:["countdown","stopwatch","pomodoro","start","hourglass","clock"],component:IF.m_},{name:"Images",tags:["upload","media","file","gif","jpeg","jpg","png","mov","mp4","movie","video","webm"],component:IF.G0},{name:"Links",tags:["media","across","web","url","site","embed"],component:IF.fQ},{name:"Table",tags:["table","chart","spreadsheet","list","figure","diagram","grid","worksheet","database"],component:IF.vh},...(0,eo.kc)().figjam_mindmaps_entry_enable?[{name:"Mind map",tags:["mindmap","mind","map","diagram","brainstorm"],component:IF.l7}]:[]]);let Pd="";function Pu(){var e;let[t,n]=Q.useState(Pd),[l]=(0,Sq.A)(t,200),i=(0,$.d4)(e=>e.universalInsertModal),[o,s]=Q.useState(i.previewResource),c=(0,kV.F5)(),d=(0,$.wA)(),{shelves:u,hubFiles:m,fileKey:p,initialTab:_}=(0,ep.R)(e=>({shelves:e.communityHub.shelves[NK.cS.FIGJAM_TEMPLATES_PICKER],hubFiles:e.hubFiles,fileKey:e.openFile?e.openFile.key:null,initialTab:e.universalInsertModal.initialTab})),[f,h]=Q.useState(_||a||(p?Nz.p.ALL:Nz.p.WIDGETS));Q.useEffect(()=>{(null==r?void 0:r.type)===NG.R.ORG_FACE_STAMPS&&s({id:"FACE_STAMPS",type:NG.R.ORG_FACE_STAMPS})},[]),Q.useEffect(()=>{Pd=t,a=f,r=o},[f,o,t]);let g=Q.useMemo(()=>(u||[]).reduce((e,t)=>({...e,[t.title]:t.shelf_content.map(e=>e.id)}),{}),[u]),E=null==(e=(0,eo.Ay)().user_data)?void 0:e.id,v=(0,ig.yQ)(),y=(0,ig.nl)(),{pluginServerSideSearch:b,pluginSearchIsLoading:C,pluginSearchHasResolved:w,setLastPluginSearchQuery:T,lastPluginSearchQuery:x}=(0,ig.I5)(Pa.k.Editors.FIGJAM),{widgetServerSideSearch:N,widgetSearchIsLoading:k,widgetSearchHasResolved:S,setLastWidgetSearchQuery:I,lastWidgetSearchQuery:A}=(0,ig.SG)(Pa.k.Editors.FIGJAM),P=(0,NL.hC)(),{templates:O,total:L,requestLoadMore:M,isLoading:D}=(0,ND.qY)(l,P),{faceStampServerSideSearch:R,faceStampSearchIsLoading:F,faceStampSearchHasResolved:B,lastFaceStampSearchQuery:U,setLastFaceStampSearchQuery:H}=(0,SQ.A)({maxResults:20}),[V,G]=Q.useState({[SO]:[]}),[K,W]=Q.useState([]),[z,j]=Q.useState([]),[Y,Z]=Q.useState([]),[X,q]=Q.useState([]),[J,ee]=Q.useState([]),[et,en]=Q.useState([]),[ea,el]=Q.useState([]),[ei,es]=Q.useState([]),[ec,ed]=Q.useState([]);return Q.useEffect(()=>{let e=Object.keys(g).reduce((e,t)=>[...e,...g[t]],[]).map(e=>(0,NU.a6)(m[e]));Pi.set(e)},[g,m]),Q.useEffect(()=>{Po.set(Object.values(y))},[y,d]),Q.useEffect(()=>{Ps.set(Object.values(v))},[v,d]),Q.useEffect(()=>{(f===Nz.p.TEMPLATES||f===Nz.p.ALL)&&(""===l.trim()?G({[SO]:[]}):G({[SO]:[...new Set(Pi.search(l).map(e=>e.hub_file_id))]})),(f===Nz.p.ALL||f===Nz.p.MORE)&&(""===l.trim()?H(null):R(l)),(f===Nz.p.PLUGINS||f===Nz.p.ALL)&&(""===l.trim()?(j([]),ee([]),Z([]),q([]),T(null)):(ee(Po.search(l).map(e=>e.localFileId)),b(l,Z,q,j))),(f===Nz.p.WIDGETS||f===Nz.p.ALL)&&(""===l.trim()?(en([]),ed([]),el([]),es([]),I(null)):(ed(Ps.search(l).map(e=>e.localFileId)),N(l,el,es,en))),(f===Nz.p.STICKERS_AND_COMPONENTS||f===Nz.p.ALL)&&d(cj.ku({query:l})),(f===Nz.p.MORE||f===Nz.p.ALL)&&W(Pc.search(l).map(e=>e.component)),(0,er.sx)("search_query_result",{query:l,selectedTab:f,entry_point:"figjam",scope:"figjam inserts modal",context:"search",...c})},[l,E,p,f]),{searchQuery:t,setSearchQuery:n,currentTab:f,setCurrentTab:h,searchTemplatesResult:V,moreResult:K,pluginSavedSearchResultIds:z,pluginCommunitySearchResultIds:Y,pluginOrgSearchResultIds:X,pluginDevelopmentSearchResultIds:J,pluginSearchIsLoading:C||t!==l,pluginSearchHasResolved:w,widgetSavedSearchResultIds:et,widgetCommunitySearchResultIds:ea,widgetOrgSearchResultIds:ei,widgetDevelopmentSearchResultIds:ec,widgetSearchIsLoading:k||t!==l,widgetSearchHasResolved:S,faceStampSearchIsLoading:F||t!==l,faceStampSearchHasResolved:B,debouncedSearchQuery:l,lastPluginSearchQuery:x,lastWidgetSearchQuery:A,lastFaceStampSearchQuery:U,teamTemplatesFromSearch:O,totalNumTeamTemplatesFromSearch:L,teamTemplatesFromSearchIsLoading:D,requestLoadMoreTeamTemplatesFromSearch:M,previewResource:o,setPreviewResourceAndTrack:e=>{if(s(e),e&&e.type===NG.R.TEMPLATES&&m[e.id]){let t=(0,NU.a6)(m[e.id]);(0,Pr._)("resource_previewed",{fileKey:p,resourceType:"template",resourceName:t.name,resourceId:e.id,templateType:NV.n.HubFile,triggeredFrom:(0,NG.V)(f)})}}}}let Pm="browse_widgets_search_view--sectionHeader--IDC0e text--fontPos13--xW8hS text--_fontBase--QdLsd",Pp="browse_widgets_search_view--widgetTilesGridContainer--b0tIx browse_widgets_view--widgetTilesGridContainer--t5-lL";var P_=n(83958);function Pf(e){let{query:t,debouncedSearchQuery:n,hasResolved:a,savedSearchResultIds:r,communitySearchResultIds:l,orgSearchResultIds:i,developmentSearchResultIds:o,lastWidgetSearchQuery:s}=e,c=(0,$.d4)(e=>e.currentUserOrgId&&e.orgById[e.currentUserOrgId]),d=(0,ig.NU)(),u=r&&r.length>0,m=l&&l.length>0,p=c&&i&&i.length>0,_=o&&o.length>0;return s!==n?Q.createElement(kp,null):!a||u||m||p||_?Q.createElement(t6.fu,{name:"widgets",properties:{resourceType:"widget",query:n}},u&&Q.createElement(Q.Fragment,null,Q.createElement("div",{className:Pm},Q.createElement(eO.Tx,{id:"whiteboard.inserts.saved"})),Q.createElement("div",{className:Pp},r.map(e=>Q.createElement(SX,{widgetId:e,widgetVersion:d[e],key:`saved_plugin_${e}`})))),_&&Q.createElement(Q.Fragment,null,Q.createElement("div",{className:Pm},Q.createElement(eO.Tx,{id:"whiteboard.inserts.development"})),Q.createElement("div",{className:Pp},o.map(e=>Q.createElement(SZ,{tab:Nz.p.DEVELOPMENT,localFileId:e,key:e})))),p&&Q.createElement(Q.Fragment,null,Q.createElement("div",{className:Pm},Q.createElement(eO.Tx,{id:"whiteboard.inserts.widgets_from_org",orgName:c.name})),Q.createElement("div",{className:Pp},i.map(e=>Q.createElement(SX,{widgetId:e,key:e})))),m&&Q.createElement(Q.Fragment,null,Q.createElement("div",{className:Pm},Q.createElement(eO.Tx,{id:"whiteboard.inserts.from_community"})),Q.createElement("div",{className:Pp},l.map(e=>Q.createElement(SX,{widgetId:e,key:e}))))):Q.createElement(t6.fu,{name:"widgets",properties:{resourceType:"widget",query:n}},Q.createElement(Nq,{illustration:P_.A,defaultDisplayStringResourceType:"widgets",query:t,cta:Q.createElement(NJ,{url:"/community/widgets"}),orgNameIfAllowlistEnforced:c&&c.widgets_whitelist_enforced?c.name:void 0}))}function Ph(){let{filterByAllowlist:e}=(0,ig.jA)(!0),t=(0,N$.Sp)(),n=(0,ig.qr)().filter(t);n=e(n);let a=(0,ig.Be)().widgets,r=Q.useMemo(()=>Object.values(a).sort(ig.YW).filter(e=>"user"===e.installed_by),[a]),l=(0,eg.xx)(()=>r),i=(0,AR.Ol)(l()),[o,s]=Q.useState(!1),c=Q.useMemo(()=>o?i:i.slice(0,40),[i,o]),d=Q.useMemo(()=>n.slice(0,6),[n]);if(0===d.length&&0===i.length)return Q.createElement(AG.H,{isWidget:!0});let u=d.length>0,m=i.length>0;return Q.createElement(Q.Fragment,null,u&&Q.createElement(Q.Fragment,null,Q.createElement("div",{className:ea()(AW,tw.cx.mb8.$)},Q.createElement(eO.Tx,{id:"universal_insert.recents"})),Q.createElement(IZ,{items:d})),u&&m&&Q.createElement(AK,null),m&&Q.createElement(Q.Fragment,null,Q.createElement("div",{className:ea()(AW,tw.cx.mb8.$)},Q.createElement(eO.Tx,{id:"universal_insert.saved"})),Q.createElement(IZ,{items:c}),i.length>40&&!o&&Q.createElement("button",{className:Az,onClick:()=>s(!0)},Q.createElement(eO.Tx,{id:"universal_insert.show_all_saved_widgets"}))))}function Pg(){let e=(0,ig.yQ)(),t=(0,ig.bh)().filter(t=>!Object.keys(e).find(n=>e[n].plugin_id===t.id));if(0===Object.keys(e).length&&0===t.length)return Q.createElement(AL.W,{isWidget:!0});let n=Object.keys(e).reverse();return Q.createElement("div",{className:IY},n.map(e=>Q.createElement(SZ,{localFileId:Number(e),tab:Nz.p.DEVELOPMENT,key:e})),t.map(e=>Q.createElement(Sj,{tab:Nz.p.DEVELOPMENT,publishedWidget:e,key:e.id})))}function PE(){let e=(0,ig.wW)();return 0===e.length?null:Q.createElement(t6.fu,{name:"invited"},Q.createElement("div",{className:tw.cx.mt16.$},Q.createElement(nk.Y,{width:"fill-parent",verticalAlignItems:"center",padding:{horizontal:24,vertical:16},horizontalAlignItems:"center",spacing:24,direction:"vertical"},e.map(e=>Q.createElement(Pv,{key:e.id,widget:e})),Q.createElement("div",{className:tw.cx.wFull.h1.$,style:tT.sx.add({backgroundColor:"var(--color-border, $figmaFGBlack1)"}).$}))))}function Pv({widget:e}){let t=(0,iE.uF)(e),{currentTab:n}=Pu();return Q.createElement(nk.Y,null,Q.createElement("div",{className:tw.cx.relative.$},Q.createElement("div",{className:tw.cx.absolute.w8.h8.bRadiusHalf.colorBgDanger.$,style:tT.sx.add({left:"-8px",top:"-8px"}).$}),Q.createElement(Sm.sU,{image:Q.createElement(Sm.WM,{removeBorder:!0},Q.createElement(SD._,{src:t.redirect_snapshot_url,widget:t,analytics:{triggeredFrom:(0,NG.V)(n)},context:dV._Y.WHITEBOARD})),className:tw.cx.w200.$})),Q.createElement(k1.PE,{resource:e}))}var Py=n(814911),Pb=n(286138);function PC(){return Q.createElement("div",{className:tw.cx.flex.flexColumn.itemsCenter.$},Q.createElement("div",null,Q.createElement(eM.B,{svg:Pb.A,useOriginalSrcFills_DEPRECATED:!0,svgWidth:"60px",autosize:!0})),Q.createElement("div",{className:tw.cx.mt16.mb24.$},Q.createElement(eO.Tx,{id:"whiteboard.inserts.disabled_org_widgets_empty_state_description"})))}function Pw(){let e=(0,$.d4)(e=>e.currentUserOrgId?e.orgById[e.currentUserOrgId]:void 0);return e?Q.createElement(PT,{org:e}):Q.createElement(t2.kt,{className:Ij})}function PT({org:e}){let t=(0,$.d4)(t=>{var n;let{orgUsersByOrgId:a}=t;return(null==(n=a.orgUsers[e.id][t.user.id])?void 0:n.permission)===dV._D.GUEST}),n=e&&e.widgets_whitelist_enforced,a=(0,ig.U6)(),r=(0,wA.km)(),l=(0,t_.tS)(),i=(0,rr.n_)((null==e?void 0:e.id)??"",l),o=(0,m_.mC)(i),s=NP.a8.loadingKeyForPayload(e.id??""),c=(0,m_.mC)(s),d=!e.public_plugins_allowed||e.widgets_whitelist_enforced&&o&&0===Object.keys(a).length,u=t||c&&0===r.length,m=(0,ig.Be)().orgWidgets,p=Q.useMemo(()=>{let t=Object.values(m).filter(t=>!(0,Py.s7)(t,e.id));return n&&(t=t.filter(e=>a[e.plugin_id])),t.sort(ig.YW)},[a,n,e.id,m]),_=(0,AR.Ol)(p);return o&&c?d&&u?Q.createElement(PC,null):Q.createElement(t6.fu,{name:"explore"},r.length>0&&Q.createElement(Q.Fragment,null,Q.createElement("div",{className:IY},r.map(e=>{let t=e.plugin_id;return Q.createElement(SX,{widgetId:t,key:t,showLockIcon:!0})}))),_.length>0&&Q.createElement(Q.Fragment,null,Q.createElement("div",{className:Iz},Q.createElement(eO.Tx,{id:"universal_insert.saved_from_community"})),Q.createElement("div",{className:IY},_.map(e=>{let t=e.plugin_id;return Q.createElement(SX,{widgetId:t,key:t})}))),Q.createElement(Aw,{extensionType:rr.Ag.Widget,dedupeOrgSaves:!0})):Q.createElement(t2.kt,{className:Ij})}function Px(){return Q.createElement(SI,{resourceType:NK.bD.WIDGET,shelfType:NK.cS.BROWSE_WIDGETS_MODAL,renderResource:e=>Q.createElement(SX,{widgetId:e.id,key:e.id})})}function PN(){let[e,t]=(0,ef.fp)(AA);return Q.createElement(AI,{setCurrentView:t,currentView:e})}function Pk(){let e=(0,ef.md)(AA),t=(0,d0.sZ)(),n=!!(t&&t.widgets_whitelist_enforced);return Q.createElement("div",null,Q.createElement(PE,null),Q.createElement("div",{className:tw.cx.flex.justifyBetween.wFull.minW0.$},Q.createElement(PN,null),e===AN.DEVELOPMENT&&Q.createElement("div",{className:tw.cx.flex.itemsCenter.pr16.$},Q.createElement(Ab.n,{resourceType:NK.bD.WIDGET}))),e===AN.RECENT_AND_SAVED&&Q.createElement(Q.Fragment,null,Q.createElement(Ph,null),n?Q.createElement(Aw,{extensionType:rr.Ag.Widget}):Q.createElement(Px,null)),e===AN.DEVELOPMENT&&Q.createElement(Pg,null),e===AN.ORG&&Q.createElement(Q.Fragment,null,Q.createElement(Pw,null),!n&&Q.createElement(Px,null)))}function PS(){Q.useEffect(()=>{function e(e){e.key===wJ.xk&&el.D.dispatch(wo.aF({storeInRecentsKey:dz.$A.FigJam}))}return el.D.dispatch(wo.aF({storeInRecentsKey:dz.$A.FigJam})),window.addEventListener("storage",e,!1),()=>{window.removeEventListener("storage",e,!1)}},[]);let e=(0,$.d4)(e=>e.currentUserOrgId?e.orgById[e.currentUserOrgId]:void 0),t=e?e.id:"",n=(0,m_.oh)(NA.sz.loadingKeyForPayload({shelfType:NK.cS.BROWSE_WIDGETS_MODAL})),a=(0,t_.tS)(),r=(0,m_.oh)((0,rr.n_)(t,a)),l=(0,m_.oh)(NP.a8.loadingKeyForPayload(t)),i=(0,m_.mC)(NW.cd.fetchWidgetsMetadata.loadingKeyForPayload({key:dz.$A.FigJam}));return n||r||l||!i?Q.createElement(kp,null):Q.createElement(t6.fu,{name:"widgets"},Q.createElement(Pk,null))}var PI=n(761938),PA=n(118338),PP=n(684601),PO=n(130758),PL=n(5542),PM=n(629236),PD=n(610185);function PR(e){var t,n,a;let{resourceId:r,goBack:l}=e,i=(0,$.d4)(e=>e.authedActiveCommunityProfile),o=(0,kM.xp)(r),s=!!o.id,c=(0,ig.Be)().plugins[r]||(0,iE.uF)(o),d=(0,$.d4)(e=>(0,cp.zg)(e.selectedView)&&!e.user),u=(null==(t=o.community_publishers)?void 0:t.accepted)||[],m=(0,$.wA)(),p=(0,$.d4)(e=>e.universalInsertModal),_=(0,cX.LR)();Q.useEffect(()=>{s||m(NP.af({id:r,resourceType:NK.bD.PLUGIN}))},[m,r,s]);let f=(0,kM.EO)(o),h=Object.values((0,ig.$1)()).find(t=>String(t.plugin_id)===e.resourceId),g=(0,d0.sZ)(),E=(0,ig.ll)(),v=!h&&(0,NB.XV)({org:g,extension:o,allowlistedExtensions:E});return Q.createElement("div",{className:kz},Q.createElement("div",{className:kj},Q.createElement(eM.B,{svg:S6.A,className:kG,onClick:ec.Ay.isIpad?void 0:l,onPointerDown:ec.Ay.isIpad?l:void 0,"data-not-draggable":!0,"data-does-not-dismiss-modal":!0}),Q.createElement("div",{className:kZ},Q.createElement("div",{className:kX},Q.createElement("div",{className:kq},c.name),(0,kA.$3)({resource:o,height:"16",validBadges:[kA.op.PURCHASED],authedActiveCommunityProfile:i})||Q.createElement(PM.I,{badges:o.badges,height:"16",hideTooltip:!0})),((null==(n=o.community_publishers)?void 0:n.accepted.length)||0)>0&&Q.createElement("div",{className:kJ},Q.createElement(eO.Tx,{id:"whiteboard.inserts.by_publisher",numPublishers:u.length,firstPublisherName:null==(a=u[0])?void 0:a.name,multiplePublisherSuffix:Q.createElement("span",{"data-tooltip-type":nO.Ib.TEXT,"data-tooltip":(0,Pe.eg)(u.slice(1),u.length,e=>e.name)},Q.createElement(eO.Tx,{id:"whiteboard.inserts.and_others"}))})))),Q.createElement("div",{className:kY},Q.createElement("div",{className:tw.cx.mr8.$},f&&!(0,eo.kc)().community_hub_admin_reviewer?Q.createElement(PD.I,{resource:o,context:NK.aL.INSERTS,payment:o.community_resource_payment}):Q.createElement("div",{"data-tooltip-type":d?nO.Ib.TEXT:void 0,"data-tooltip":d?(0,eO.t)("whiteboard.inserts.log_in_or_sign_up_to_use",{resourceType:NK.vt.PLUGIN}):void 0},v?Q.createElement(k4.s,{version:c,isPlugin:!0}):Q.createElement(k$,{pluginId:o.id,buttonCta:(0,eO.t)("whiteboard.inserts.plugin_run_cta"),isNotInHeader:!0,view:Nz.p.PLUGINS}))),Q.createElement(k2._W,{resourceId:o.id,resourceType:NK.vt.PLUGIN,parentView:k2.nN.DETAIL}),p.pinned===S$.t.NOT_PINNED?Q.createElement(S0.O,{setPinned:e.setPinned,noMargin:!0}):Q.createElement(aO.Jn,{onClick:_,className:kQ})))}function PF(e,t,n,a,r,l){let[i,o]=Q.useState(e()),[s,c]=Q.useState(!1),[d,u]=Q.useState(!1);Q.useLayoutEffect(()=>{let t=(0,cd.s)(()=>{n===S$.t.PINNED_AND_DOCKED_LEFT&&u(!0),o(e())},100);return window.addEventListener("resize",t),()=>{window.removeEventListener("resize",t)}},[e,n]);let m=(0,$.wA)(),p=Q.useCallback(()=>{m(gL.jy({initialX:a.x,initialY:a.y,pinned:S$.t.PINNED_AND_DOCKED_LEFT})),u(!0),t(a),oy.VU.get("set-tool-default","toolbar")()},[m,a,t,u]);Q.useEffect(()=>{n===S$.t.NOT_PINNED&&r&&l&&(m(gL.jy({initialX:r.x,initialY:r.y,pinned:S$.t.NOT_PINNED})),u(!0),t(r))},[m,t,n,r,l]);let _=(0,$.d4)(e=>{var t;return null==(t=e.mirror)?void 0:t.appModel.showUi}),f=(0,ue.Z)(_),h=(0,cX.LR)();return Q.useEffect(()=>{f&&!_?h():!f&&_&&n===S$.t.PINNED_AND_DOCKED_LEFT&&p()},[h,n,f,p,_]),Q.useEffect(()=>{d&&u(!1)},[d]),{bounds:i,showLeftPinBound:s,setShowLeftPinBound:c,shouldSnapToPosition:d,setPinned:p}}var PB=n(141106);function PU(e){var t,n;let{resourceId:a,goBack:r}=e,l=(0,kM.aQ)(e.resourceId),i=(null==l?void 0:l.community_publishers.accepted)||[],o=(0,$.wA)(),s=(0,$.d4)(e=>e.universalInsertModal),c=(0,cX.LR)(),d=Object.values((0,ig.yQ)()).find(e=>e.plugin_id===a),u=(0,$.d4)(e=>e.authedActiveCommunityProfile),m=(0,ig.bh)().find(e=>e.id===a),p=wk.eD&&!!m&&!d,_=!!d||p,f=(0,aX.U)(),h=(null==f?void 0:f.type)===PH&&f.data.widgetId===a,g=(0,iE.uF)(l),E=(0,N$.cX)().currentTab,v=(0,N$.cX)().searchQuery,y=(0,NG.V)(E),b="whiteboard"===(0,mD.lg)(),C=(0,kV.F5)(),w=Object.values((0,ig.$1)()).find(t=>String(t.plugin_id)===e.resourceId),T=(0,d0.sZ)(),x=(0,ig.U6)(),N=!w&&(0,NB.XV)({extension:l,org:T,allowlistedExtensions:x});Q.useEffect(()=>{l||o(NP.af({id:a,resourceType:NK.bD.WIDGET}))},[a,o,l]);let k=(0,N0.b)(),S=cU.nc.user("insert-published-widget",()=>{(0,PB.j)({pluginID:g.plugin_id,widgetName:g.name,pluginVersionID:g.id,triggeredFrom:y}),b&&(0,kV.oM)({id:g.plugin_id,type:Nz.p.WIDGETS,source:y,options:{...C,query:v}}),k()}),I=(0,kM.EO)(l);if(!l)return null;let A=_?e=>{if(_){if(e.preventDefault(),e.stopPropagation(),h)o(nP.oB());else{let t=e.target.getBoundingClientRect();o(nP.j7({type:PH,data:{targetRect:t,widgetId:a}}))}}}:S;return Q.createElement("div",{className:kz},Q.createElement("div",{className:kj},Q.createElement(eM.B,{svg:S6.A,className:kG,onClick:ec.Ay.isIpad?void 0:r,onPointerDown:ec.Ay.isIpad?r:void 0,"data-not-draggable":!0,"data-does-not-dismiss-modal":!0}),Q.createElement("div",{className:kZ},Q.createElement("div",{className:kX},Q.createElement("div",{className:kq},g.name),(0,kA.$3)({resource:l,height:"16",validBadges:[kA.op.PURCHASED],authedActiveCommunityProfile:u})||Q.createElement(PM.I,{badges:l.badges,height:"16",hideTooltip:!0})),((null==(t=l.community_publishers)?void 0:t.accepted.length)||0)>0&&Q.createElement("div",{className:kJ},Q.createElement(eO.Tx,{id:"whiteboard.inserts.by_publisher",numPublishers:i.length,firstPublisherName:null==(n=i[0])?void 0:n.name,multiplePublisherSuffix:Q.createElement("span",{"data-tooltip-type":nO.Ib.TEXT,"data-tooltip":(0,Pe.eg)(i.slice(1),i.length,e=>e.name)},Q.createElement(eO.Tx,{id:"whiteboard.inserts.and_others"}))})))),Q.createElement("div",{className:kY},Q.createElement("div",{className:tw.cx.mr8.$},I&&!(0,eo.kc)().community_hub_admin_reviewer?Q.createElement(PD.I,{resource:l,context:NK.aL.INSERTS}):N?Q.createElement(k4.s,{version:g,isPlugin:!1}):Q.createElement(nc.$$,{onClick:ec.Ay.isIpad?void 0:A,onPointerDown:ec.Ay.isIpad?A:void 0,className:_?kK:void 0,"data-not-draggable":!0,dataTestId:"add-widget-button"},(0,eO.t)("whiteboard.inserts.add_widget"),_&&Q.createElement(eM.B,{svg:hK.A,className:kW}))),Q.createElement("div",null,Q.createElement(k2._W,{resourceId:l.id,resourceType:NK.vt.WIDGET,parentView:k2.nN.DETAIL})),s.pinned===S$.t.NOT_PINNED?Q.createElement(S0.O,{setPinned:e.setPinned,noMargin:!0}):Q.createElement(aO.Jn,{onClick:c,className:kQ})))}let PH="DROPDOWN_TYPE_WIDGET_DETAIL_SUBMENU";function PV(){let{openFile:e,fileVersion:t,loadingState:n,universalInsertModal:a}=(0,ep.R)(e=>({openFile:e.openFile,fileVersion:e.fileVersion,loadingState:e.loadingState,universalInsertModal:e.universalInsertModal})),{searchQuery:r,setSearchQuery:i,currentTab:o,setCurrentTab:s,searchTemplatesResult:c,moreResult:d,pluginSavedSearchResultIds:u,pluginCommunitySearchResultIds:m,pluginOrgSearchResultIds:p,pluginDevelopmentSearchResultIds:_,pluginSearchIsLoading:f,pluginSearchHasResolved:h,widgetSavedSearchResultIds:g,widgetCommunitySearchResultIds:E,widgetOrgSearchResultIds:v,widgetSearchIsLoading:y,widgetSearchHasResolved:b,widgetDevelopmentSearchResultIds:C,faceStampSearchIsLoading:w,faceStampSearchHasResolved:T,debouncedSearchQuery:x,lastPluginSearchQuery:N,lastWidgetSearchQuery:k,lastFaceStampSearchQuery:S,teamTemplatesFromSearch:I,totalNumTeamTemplatesFromSearch:A,teamTemplatesFromSearchIsLoading:P,requestLoadMoreTeamTemplatesFromSearch:O,previewResource:L,setPreviewResourceAndTrack:M}=Pu(),[D,R]=Q.useState(a.initialSelectedCategory??l),F=(0,ef.md)(NR.D);Q.useEffect(()=>{(0,eo.kc)().figjam_forcibly_close_curator&&F&&!PO.l.has(F)&&(0,uj.YQ)({id:NF.X,properties:{requester:NF.Y.FigjamUniversalInsertsMenuOpen}})},[F]),Q.useEffect(()=>{a.previewResource&&M(a.previewResource)},[M,a.previewResource]),Q.useEffect(()=>{l=D},[D]),Q.useEffect(()=>{a.initialSearch&&i(a.initialSearch)},[a.initialSearch,i]);let{isInsertingTemplate:B}=(0,ND.Fz)(),U=(0,$.wA)(),H=(0,PA.W6)(),V=a.sourceRect,[G,K]=Q.useMemo(()=>{if(H&&V)return[void 0,{kind:"sourceRect",sourceRect:V}];{let e=PP.b;return[e,{kind:"buttonTarget",buttonTarget:e}]}},[H,V]),{initialModalPosition:W,modalPosition:z,setModalPosition:j}=(0,cX.ts)(K,cX.AH,cX.gR),{bounds:Y,showLeftPinBound:Z,setShowLeftPinBound:X,shouldSnapToPosition:q,setPinned:J}=PF(PK,j,a.pinned,N$.t$,W,a.showing);Q.useEffect(()=>{U(NW.cd.fetchTemplatesMetadata({key:dz.$A.FigJam,orgId:null==e?void 0:e.parentOrgId})),U(NW.cd.fetchWidgetsMetadata({key:dz.$A.FigJam})),U(NO.GU({}))},[U,null==e?void 0:e.parentOrgId]),Q.useEffect(()=>{U(NA.sz({shelfType:NK.cS.FIGJAM_TEMPLATES_PICKER}))},[U]);let ee=Object.keys((0,ig.yQ)()).join(","),et=(0,at.iZ)(),en=(0,d0.sZ)(),ea=(0,NH.G7)(en),er=(0,NL.hC)(),el=Q.useRef(null),ei=Q.useRef(null);Q.useEffect(()=>{et&&(U(wl._J()),U(yw.aq()))},[U,et,ee]),(0,Nk.IT)((0,NP.se)()),(0,Nk.IT)((0,NP.fd)()),Q.useEffect(()=>{U(cj.cr({shouldSearchDefaultLibraries:!0}))},[U]);let es=e&&t&&(0,m_.Sc)(n,(0,mf.yD)(e.key));Q.useEffect(()=>{es&&U(cj.zK({}))},[U,es]),Q.useEffect(()=>{var e;"function"==typeof(null==(e=ei.current)?void 0:e.scroll)&&ei.current.scroll({top:0,behavior:"smooth"})},[x]);let{filterOptions:ec,selectedTeamOrWorkspaceOrLicenseGroupIds:ed,isMyTeamsOnly:eu,onFilterChange:em,requestLoadMore:e_,requestLoadMoreForTeam:eh,templatesByTeam:eg,userTeamOrWorkspaceIds:eE,isLoadingTeamTemplates:ev}=(0,NM.GT)(er?en:null),ey=Q.useCallback(()=>s(Nz.p.MORE),[s]);return Q.createElement(N$.Td.Provider,{value:{setPreviewResource:M,currentTab:o,setCurrentTab:s,setSelectedCategory:R,searchQuery:r}},Q.createElement(Ac,{hasSearchBar:!0,searchQuery:r,setSearchQuery:i,resourceDetailViewContent:L&&L.id&&L.type?L.type===NG.R.TEMPLATES?Q.createElement(A9,{id:L.id,selectedCategoryId:"",setPreviewHubFile:M}):L.type===NG.R.WIDGETS?Q.createElement(PI.xl,{id:L.id}):L.type===NG.R.PLUGINS?Q.createElement(A2,{pluginId:L.id}):L.type===NG.R.ORG_FACE_STAMPS?Q.createElement(S9,{onBack:ey,queryFromAllSearch:""!==x?x:null}):void 0:null,resourceDetailViewHeader:L&&L.id&&L.type?L.type===NG.R.TEMPLATES?Q.createElement(Pt,{resourceId:L.id,goBack:()=>{M(void 0)},buttonCta:(0,eO.t)("whiteboard.inserts.add_template"),setPinned:J}):L.type===NG.R.WIDGETS?Q.createElement(PU,{resourceId:L.id,goBack:()=>M(void 0),setPinned:J}):L.type===NG.R.PLUGINS?Q.createElement(PR,{resourceId:L.id,goBack:()=>M(void 0),setPinned:J}):L.type===NG.R.ORG_FACE_STAMPS?Q.createElement(Ii,{onBack:()=>M(void 0),setPinned:J,queryFromAllSearch:x}):void 0:null,categoryViewContent:D?D.resourceType===NG.R.TEMPLATES?Q.createElement(A4,{selectedCategoryId:D.id,shelfType:NK.cS.FIGJAM_TEMPLATES_PICKER,setPreviewHubFile:M,renderResource:e=>Q.createElement(SE,{template:{type:NV.n.HubFile,template:e},key:e.id,templateInsertionLocation:NU.RD.CURRENT_FILE,triggeredFrom:(0,NG.V)(o),isInsertingTemplate:B(e.id),onClickTitle:()=>M({id:e.id,type:NG.R.TEMPLATES})})}):D.resourceType===NG.R.STICKERS_AND_COMPONENTS?Q.createElement(kN,{selectedLibrary:D,setSelectedLibrary:R}):D.resourceType===NG.R.WIDGETS?Q.createElement(Ag,{selectedCategoryId:D.id,goBack:()=>R(void 0),resourceType:NK.bD.WIDGET,shelfType:NK.cS.BROWSE_WIDGETS_MODAL,categoryType:NI.O$.BROWSE_WIDGETS_MODAL,renderResource:e=>Q.createElement(SX,{widgetId:e.id,key:e.id})}):D.resourceType===NG.R.PLUGINS?Q.createElement(Ag,{selectedCategoryId:D.id,goBack:()=>R(void 0),resourceType:NK.bD.PLUGIN,shelfType:NK.cS.BROWSE_PLUGINS_MODAL,categoryType:NI.O$.BROWSE_PLUGINS_MODAL,renderResource:e=>Q.createElement(Si,{pluginId:e.id,view:Nz.p.EXPLORE,key:e.id})}):D.resourceType===NG.R.ALL?Q.createElement(IA,{useCaseName:D.id}):D.resourceType===NG.R.TEAM_TEMPLATES?eg.length||ev?Q.createElement(t6.fu,{name:"custom_org_templates"},eg.map(({team_id:e,team_name:t,workspace_name:n,templates:a})=>Q.createElement(Q.Fragment,{key:e},Q.createElement(PL.Z0,{teamName:t,workspaceName:ea?n:null,teamId:e,onRequestLoadMoreForTeam:eh,minimalSpacing:!0},Q.createElement(Sy,{templates:a.map(e=>({type:NV.n.TeamTemplate,template:e}))})))),Q.createElement(NS.a,{"data-testid":"load-more-teams",className:tw.cx.relative.$,style:{bottom:"250px"},onIntersectionChange:({isIntersecting:e})=>{e&&e_()}})):Q.createElement(Iq.Ht,null):void 0:null,categoryViewHeader:function(){if(!D)return;let e=D.resourceType===NG.R.TEAM_TEMPLATES?Q.createElement("div",{className:tw.cx.mr8.$},Q.createElement(PL.DL,{filterOptions:ec,selectedIds:ed,isMyTeamsOnly:eu,onFilterChange:e=>{var t,n;"function"==typeof(null==(t=el.current)?void 0:t.scroll)&&(null==(n=el.current)||n.scroll({top:0,behavior:"smooth"})),em(e)},userTeamOrWorkspaceIds:new Set(eE),showWorkspaces:ea})):void 0;return Q.createElement(Ad,{selectedCategory:D,goBack:()=>{R(void 0)},setPinned:J,extraContent:e})}(),setPinned:J,initialModalPosition:W,modalPosition:z,shouldHideBottomArrow:!0,bounds:Y,showLeftPinBound:Z,setShowLeftPinBound:X,shouldSnapToPosition:q,entryPointId:G,categoryScrollContainerRef:el,mainScrollContainerRef:ei},Q.createElement(PG,{setPinned:J,setPreviewResource:M,setPreviewHubFile:M,searchQuery:r,currentTab:o,setCurrentTab:s,searchTemplatesResult:c,moreResult:d,pluginSavedSearchResultIds:u,pluginCommunitySearchResultIds:m,pluginOrgSearchResultIds:p,pluginDevelopmentSearchResultIds:_,pluginSearchIsLoading:f,pluginSearchHasResolved:h,widgetSavedSearchResultIds:g,widgetCommunitySearchResultIds:E,widgetOrgSearchResultIds:v,widgetSearchIsLoading:y,widgetSearchHasResolved:b,faceStampSearchIsLoading:w,faceStampSearchHasResolved:T,widgetDevelopmentSearchResultIds:C,debouncedSearchQuery:x,lastPluginSearchQuery:N,lastWidgetSearchQuery:k,lastFaceStampSearchQuery:S,teamTemplatesFromSearch:I,totalNumTeamTemplatesFromSearch:A,teamTemplatesFromSearchIsLoading:P,requestLoadMoreTeamTemplatesFromSearch:O})))}function PG({setPreviewResource:e,searchQuery:t,currentTab:n,setCurrentTab:a,searchTemplatesResult:r,moreResult:l,pluginSavedSearchResultIds:i,pluginCommunitySearchResultIds:o,pluginOrgSearchResultIds:s,pluginDevelopmentSearchResultIds:c,pluginSearchIsLoading:d,pluginSearchHasResolved:u,widgetSavedSearchResultIds:m,widgetCommunitySearchResultIds:p,widgetOrgSearchResultIds:_,widgetSearchIsLoading:f,widgetSearchHasResolved:h,widgetDevelopmentSearchResultIds:g,faceStampSearchIsLoading:E,faceStampSearchHasResolved:v,debouncedSearchQuery:y,lastPluginSearchQuery:b,lastWidgetSearchQuery:C,lastFaceStampSearchQuery:w,teamTemplatesFromSearch:T,teamTemplatesFromSearchIsLoading:x,totalNumTeamTemplatesFromSearch:N,requestLoadMoreTeamTemplatesFromSearch:k}){let S=(0,Nc.U5)(t),I=(0,d0.sZ)(),A=(0,ig.ll)(),P=(0,ig.U6)(),O=Q.useMemo(()=>(0,NB.Cs)({org:I,isWidget:!1})?o:I&&I.plugins_whitelist_enforced?o.filter(e=>A[e]):o,[I,A,o]),L=Q.useMemo(()=>(0,NB.Cs)({org:I,isWidget:!0})?p:I&&I.widgets_whitelist_enforced?p.filter(e=>P[e]):p,[I,P,p]);return n===Nz.p.ALL?t?Q.createElement(Id,{query:t,setCurrentTab:a,searchTemplatesResult:r,moreResult:l,pluginSavedSearchResultIds:i,pluginCommunitySearchResultIds:O,pluginOrgSearchResultIds:s,pluginDevelopmentSearchResultIds:c,pluginSearchIsLoading:d,pluginSearchHasResolved:u,widgetSavedSearchResultIds:m,widgetCommunitySearchResultIds:L,widgetOrgSearchResultIds:_,widgetDevelopmentSearchResultIds:g,widgetSearchIsLoading:f,widgetSearchHasResolved:h,faceStampSearchIsLoading:E,faceStampSearchHasResolved:v,faceStampSearchResults:S,debouncedSearchQuery:y,lastPluginSearchQuery:b,lastWidgetSearchQuery:C,lastFaceStampSearchQuery:w,teamTemplatesFromSearch:T,totalNumTeamTemplatesFromSearch:N}):Q.createElement(I0,null):n===Nz.p.WIDGETS?t?Q.createElement(Pf,{query:t,debouncedSearchQuery:y,hasResolved:h,savedSearchResultIds:m,communitySearchResultIds:L,orgSearchResultIds:_,developmentSearchResultIds:g,lastWidgetSearchQuery:C}):Q.createElement(PS,null):n===Nz.p.STICKERS_AND_COMPONENTS?Q.createElement(kx,{query:t}):n===Nz.p.PLUGINS?t?Q.createElement(Ay,{query:t,debouncedSearchQuery:y,savedSearchResultIds:i,communitySearchResultIds:O,developmentSearchResultIds:c,orgSearchResultIds:s,hasResolved:u,lastPluginSearchQuery:b}):Q.createElement(Aq,null):n===Nz.p.TEMPLATES?t?Q.createElement(Pn,{templates:r,teamTemplatesFromSearch:T,totalNumTeamTemplatesFromSearch:N,teamTemplatesFromSearchIsLoading:x,requestLoadMoreTeamTemplatesFromSearch:k,query:t,debouncedSearchQuery:y}):Q.createElement(SL,{setPreviewHubFile:e}):n===Nz.p.MORE?t?Q.createElement(AE,{results:l,query:t,debouncedSearchQuery:y,faceStampSearchIsLoading:E}):Q.createElement(t6.fu,{name:"more2"},Q.createElement(IH,{hasTopPadding:!0})):Q.createElement(Q.Fragment,null)}function PK(){return{x:-cX.gR,y:0,width:2*cX.gR+N$.wR,height:window.innerHeight}}let PW=(0,aE.Ju)(function(e){return Q.createElement(tS.Nb,{size:"small",className:ot.yl,disableClickOutsideToHide:!0,hide:ey.lQ},Q.createElement("div",{className:ot.DD},Q.createElement(eO.Tx,{id:"file_migration.updating.title"})),Q.createElement("div",{className:ot.jE},Q.createElement(eO.Tx,{id:"file_migration.updating.message"})))},"FileMigrationWarningModal");var Pz=n(994552),Pj=n(631730),PY=n(379021),PZ=n(297130),PX=n(112953),Pq=n(200528),PJ=n(390655),PQ=n(302324);let P$=(0,nf.eU)(0),P0=(0,nf.eU)(e=>e(P$)>0);function P1({isVisible:e}){let t=(0,e_.Xr)(P$);(0,Q.useLayoutEffect)(()=>{if(e)return t(e=>e+1),()=>t(e=>Math.max(0,e-1))},[e,t])}var P2=n(269794),P5=n(99767),P4=n(703248);let P3="voice_widget--modal--xsQ2A",P6="voice_widget--searchShowing--CNCMp",P7="voice_widget--show--O6ORx voice_widget--modal--xsQ2A",P8="voice_widget--icon--wW-wb",P9="voice_widget--iconContainer--CuKNM",Oe="voice_widget--muteButtonPosition--J282V",Ot="voice_widget--topRow--O1wj-",On="voice_widget--voiceModalPanel--KD-J1";function Oa(e){let{fileKey:t}=e;var{userIdsInCall:n}=(0,Pq.W5)(t);let a=n.size,r=(0,ae.aV)(),l=(0,at.iZ)(),i=(0,eG.J2)(eU.Ez5.uiState().showCanvasSearch);Q.useEffect(()=>{!ec.XN&&(null==l?void 0:l.id)&&!n.has(l.id)&&(0,PQ.w$)(a)},[a,null==l?void 0:l.id,n]);let o=!r&&!ec.XN;return(P1({isVisible:o}),o)?Q.createElement("div",{className:ea()(P3,{[P7]:!0,[P6]:i})},Q.createElement(nM.Id,{className:On},Q.createElement("div",{className:Ot},Q.createElement("div",{className:"voice_widget--joinModalCountGroup--zxI6Q"},Q.createElement(P2.A.HeadphonesIcon,{className:P4.QH,size:24}),n.size),Q.createElement(P5.K,{fileKey:e.fileKey,"data-tooltip-type":nO.Ib.TEXT,"data-tooltip":(0,eO.t)("collaboration.voice.join_conversation"),isJoinWidget:!0,"data-onboarding-key":"audio-nux-key"},Q.createElement(eO.Tx,{id:"collaboration.voice.join"}))))):Q.createElement(Q.Fragment,null)}function Or(e){return Q.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},Q.createElement("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M15.755 7.234a1 1 0 0 1-1.505-.87c.002-.52-.342-1.138-1.038-1.26a7.038 7.038 0 0 0-2.424 0c-.696.122-1.04.74-1.038 1.26a1 1 0 0 1-1.505.87c-.45-.262-1.155-.273-1.608.267A6.994 6.994 0 0 0 5.42 9.603c-.241.664.122 1.27.574 1.527a1 1 0 0 1 0 1.74c-.452.258-.815.863-.574 1.527a6.994 6.994 0 0 0 1.216 2.102c.453.54 1.158.529 1.608.267a1 1 0 0 1 1.505.87c-.002.52.342 1.138 1.038 1.26a7.04 7.04 0 0 0 2.424 0c.696-.122 1.04-.74 1.038-1.26a1 1 0 0 1 1.505-.87c.45.262 1.155.273 1.608-.267a6.993 6.993 0 0 0 1.216-2.102c.241-.664-.122-1.27-.574-1.528a1 1 0 0 1 0-1.739c.452-.258.815-.864.574-1.527a6.993 6.993 0 0 0-1.216-2.102c-.453-.54-1.158-.529-1.608-.267Zm-1.505.869a2 2 0 0 0 2.008-.005c.112-.064.257-.052.34.046.444.53.8 1.139 1.041 1.802.044.12-.018.252-.13.316a2 2 0 0 0 0 3.476c.112.064.174.195.13.316a5.995 5.995 0 0 1-1.042 1.802c-.082.098-.227.11-.339.046a2 2 0 0 0-3.008 1.737c0 .13-.083.249-.21.271a6.04 6.04 0 0 1-2.08 0c-.127-.022-.21-.142-.21-.27a2 2 0 0 0-3.008-1.74c-.112.065-.257.053-.34-.045a5.995 5.995 0 0 1-1.041-1.802c-.044-.12.018-.252.13-.316a2 2 0 0 0 0-3.476c-.112-.064-.174-.195-.13-.316a5.994 5.994 0 0 1 1.042-1.802c.083-.098.227-.11.339-.046A2 2 0 0 0 10.75 6.36c0-.13.083-.249.21-.271a6.038 6.038 0 0 1 2.08 0c.127.022.21.141.21.27a2 2 0 0 0 1 1.743ZM10.5 12a1.5 1.5 0 1 1 3 0 1.5 1.5 0 0 1-3 0ZM12 9.5a2.5 2.5 0 1 0 0 5 2.5 2.5 0 0 0 0-5Z",clipRule:"evenodd"}))}var Ol=n(560973),Oi=n(150853),Oo=n(764338),Os=n(10787);let Oc="captions_dialog--showGradient--ZAHRk";var Od=n(727507),Ou=n(554653);let Om="DROPDOWN_TYPE_CAPTIONS_DIALOG_TYPE_SIZE";function Op({caption:e,user:t}){let n=e.userId+"_"+e.timestamp;return Q.createElement("div",{className:"captions_dialog--captionRow--pgS-N",key:n},Q.createElement("div",null,Q.createElement(Ns.Ro,{className:"captions_dialog--avatar--ISexR",entity:{...t,id:e.userId},size:24}),Q.createElement("div",{className:"captions_dialog--name--SmWv6"},t?t.name:e.userId)),e.text.map((e,t)=>Q.createElement("div",{className:"captions_dialog--paragraph--SjDQd",key:n+"_"+t},e.map((e,a)=>Q.createElement("div",{className:"captions_dialog--sentence--SJkHn",key:n+"_"+t+"_"+a},`${e} `)))))}let O_=()=>({small:{style:"captions_dialog--smallText--aUeBx",label:(0,eO.t)("collaboration.voice.small")},medium:{style:"captions_dialog--mediumText--ODxEN",label:(0,eO.t)("collaboration.voice.medium")},large:{style:"captions_dialog--largeText---t1d2",label:(0,eO.t)("collaboration.voice.large")},x_large:{style:"captions_dialog--xlargeText--C60DA",label:(0,eO.t)("collaboration.voice.x_large")}}),Of=Date.now();function Oh({call:e}){var t;let n=O_(),[a,r]=Q.useState([]),[l,i]=Q.useState(n.small.style),[o,s]=Q.useState(!1),[c,d]=Q.useState(!1),[u,m]=Q.useState(!1),p=(0,$.d4)(e=>{if(!e.openFile)throw Error("Open file required");return e.openFile}),_=(0,$.d4)(e=>e.voice.activeCall[p.key]),f=(0,$.wA)(),[h,g]=Q.useState(null),E=(0,aX.U)(),v=Q.useRef(null),y=!!(E&&E.type===Om),b=a.reduce((e,t)=>e.add(t.userId),new Set),C=(0,Pq.bF)(b,p.key).reduce((e,t)=>(e[t.userID]=t,e),{});Q.useEffect(()=>{let t=e=>{e&&r(e)};return e.audioCaptionStream.subscribe(t),()=>e.audioCaptionStream.unsubscribe(t)}),Q.useEffect(()=>{h&&h.scrollHeight-h.scrollTop-h.clientHeight<150&&Of<Date.now()-150&&h.scrollTo({top:h.scrollHeight-h.clientHeight,behavior:"smooth"})}),Q.useEffect(()=>{h&&!u&&(h.scrollTop=h.scrollHeight-h.clientHeight)},[h,u]);let w=!u&&_;return Q.createElement("div",{className:["captions_dialog--captionsDialog--gOIvh",l].join(" ")},Q.createElement("div",{className:["captions_dialog--topDivider--BlM0x captions_dialog--_divider--m8Skg",o?Oc:""].join(" ")}),w&&Q.createElement("div",{className:"captions_dialog--scrollContainer--WuVOJ",ref:e=>g(e),onScroll:e=>{h&&(d(0!=h.scrollHeight-h.scrollTop-h.clientHeight),s(0!==h.scrollTop))},onWheel:e=>{e.deltaY<0&&(Of=Date.now())}},Q.createElement("div",{className:"captions_dialog--scrollContainerInner--db2cV"},a.map(e=>Q.createElement(Op,{key:e.timestamp,caption:e,user:C[e.userId]})))),w&&Q.createElement("div",{className:["captions_dialog--bottomDivider--WBbo5 captions_dialog--_divider--m8Skg",c?Oc:""].join(" ")}),w&&Q.createElement("button",{onClick:()=>h.scrollTo({top:h.scrollHeight-h.clientHeight,behavior:"smooth"}),className:`captions_dialog--scrollToBottomButton--SeU-4 ${c?"captions_dialog--show--LLYog":""}`},Q.createElement(eO.Tx,{id:"collaboration.voice.new_transcripts"})),Q.createElement("div",{className:"captions_dialog--header--SA3Wv",onClick:()=>m(!u)},Q.createElement(eM.B,{className:w?"captions_dialog--closedCaptionsIconMaximized--N-lwT":"captions_dialog--closedCaptionsIconMinimized--Ou0WE",svg:Od.A}),Q.createElement("span",{className:"captions_dialog--label---1DXk"},Q.createElement(eO.Tx,{id:"collaboration.voice.closed_captions"})),Q.createElement(iZ.Ex,{text:(0,eO.t)("collaboration.voice.beta"),className:"captions_dialog--betaTag--qFyxq",color:iZ.zE.BRAND}),Q.createElement(aJ.K0,{svg:Ou.A,ref:v,className:"captions_dialog--typeSizeIcon--Xhxj-",onClick:e=>{e.stopPropagation(),f(lZ.gR({type:Om}))},"data-tooltip-type":nO.Ib.TEXT,"data-tooltip":(0,eO.t)("collaboration.voice.text_size")}),v.current&&y&&Q.createElement(aq.j,{displayOverTarget:!0,dispatch:f,items:Object.keys(n).map(e=>({name:e,displayText:n[e].label,className:[n[e].style,"captions_dialog--dropdownTextOptions--ma0Ue"].join(" "),isChecked:n[e].style===l})),showPoint:!0,parentRect:null==(t=v.current)?void 0:t.getBoundingClientRect(),onSelectItem:e=>{e.name&&i(n[e.name].style)},minWidth:96}),Q.createElement("div",{style:{clear:"both"}})))}var Og=n(995687),OE=n(118786),Ov=n(271078),Oy=n(247866);let Ob=[PJ.$E.WARNING_RECV_AUDIO_DECODE_FAILED,PJ.$E.WARNING_SEND_AUDIO_BITRATE_TOO_LOW,PJ.$E.WARNING_AUDIO_OUTPUT_LEVEL_TOO_LOW,PJ.$E.WARNING_AUDIO_INPUT_LEVEL_TOO_LOW];function OC(e){let t;if((0,Ov.Im)(e.activeWarnings))return null;for(let n of Ob)if(e.activeWarnings[n]){t=e.activeWarnings[n];break}return t?Q.createElement("div",{className:e.className,"data-tooltip-type":nO.Ib.TEXT,"data-tooltip":t,"data-tooltip-show-below":!0,"data-tooltip-timeout-delay":50},Q.createElement(eM.B,{className:P8,svg:Oy.A})):null}function Ow(e){switch(e){case PJ.$E.WARNING_AUDIO_INPUT_LEVEL_TOO_LOW:return"Mic volume low. Consider switching devices.";case PJ.$E.WARNING_AUDIO_OUTPUT_LEVEL_TOO_LOW:return"Speaker or headphone volume low. Consider switching devices.";case PJ.$E.WARNING_SEND_AUDIO_BITRATE_TOO_LOW:case PJ.$E.WARNING_RECV_AUDIO_DECODE_FAILED:return"Connection is poor. Check your internet or leave and rejoin the conversation.";default:return null}}function OT(e){let{callEvent:t,onClick:n,notificationUserId:a}=e.notification,[r,l]=Q.useState(null),[i,o]=Q.useState(!1),s=Q.useRef(),c=Q.useRef(t),[d,u]=Q.useState(),m=(0,$.d4)(e=>e.multiplayer.allUsers),p=(0,$.d4)(e=>e.voice.voiceUsersById),_=(0,aD.GS)(),f=Q.useMemo(()=>{if(a){if(a in p)return p[a].name;let e=m.find(e=>e.userID===a);if(e)return e.name}return"User"},[a,p,m]),h=null==d?void 0:d.href,g=Q.useMemo(()=>h?"a":"div",[h]);if(Q.useEffect(()=>()=>{(null==s?void 0:s.current)&&clearTimeout(s.current)},[]),Q.useEffect(()=>{let e=()=>{o(!1),l(null)};d?(o(!0),l(null),d.persist||l(setTimeout(()=>{e()},2e3))):e()},[d]),Q.useEffect(()=>()=>{r&&clearTimeout(r)},[r]),Q.useEffect(()=>{switch(c.current=t,t){case PJ.$E.CONNECTED:u({msg:(0,eO.t)("collaboration.voice.connected"),type:PJ.w.SUCCESS,icon:_?Q.createElement(OE.g,null):void 0});break;case PJ.$E.CONNECTED_WITH_MIC_DISABLED:u({msg:(0,eO.t)("collaboration.voice.connected_check_your_microphone_permissions_to_start_chatting"),allowMultiLine:!0,type:PJ.w.SUCCESS});break;case PJ.$E.CONNECTING:u({msg:(0,eO.t)("collaboration.voice.connecting"),type:PJ.w.PENDING,persist:!0});break;case PJ.$E.ERROR:u({msg:(0,eO.t)("collaboration.voice.something_went_wrong_try_again"),type:PJ.w.ERROR,persist:!0});break;case PJ.$E.CALL_INACTIVE:u({msg:(0,eO.t)("collaboration.voice.things_got_quiet_for_awhile_so_we_ended_the_conversation"),type:PJ.w.PENDING,persist:!1,allowMultiLine:!0});break;case PJ.$E.TOKEN_WILL_EXPIRE:u({msg:(0,eO.t)("collaboration.voice.it_s_been_quiet_for_a_while_so_we_ll_end_the_conversation_in_20_seconds_n_click_to_stay_on"),type:PJ.w.MESSAGE,persist:!0,onClick:n,allowMultiLine:!0});break;case PJ.$E.TOKEN_EXPIRED:u({msg:(0,eO.t)("collaboration.voice.audio_has_timed_out_click_to_rejoin"),type:PJ.w.ERROR,persist:!0,onClick:n});break;case PJ.$E.USER_JOINED:u({truncatedPrefix:f,msg:(0,eO.t)("collaboration.voice.joined"),type:PJ.w.MESSAGE});break;case PJ.$E.USER_LEFT:u({truncatedPrefix:f,msg:(0,eO.t)("collaboration.voice.left"),type:PJ.w.MESSAGE});break;case PJ.$E.ERROR_MICROPHONE_PERMISSIONS_DENIED:let e=(0,eO.t)("collaboration.voice.enable_mic_access_in_your_browser_to_join");wk.eD&&(e=(0,eO.t)("collaboration.voice.enable_mic_access_for_the_figma_app_to_join")),u({msg:e,type:PJ.w.ERROR,href:PZ.AM.TROUBLESHOOT});break;case PJ.$E.WARNING_MICROPHONE_LEVELS_HIGH_AND_MUTED:u({msg:(0,eO.t)("collaboration.voice.want_to_unmute_click_the_mic"),type:PJ.w.PENDING});break;case PJ.$E.ERROR_ON_LEAVE:u({msg:(0,eO.t)("collaboration.voice.couldn_t_leave_please_try_again"),type:PJ.w.ERROR});break;case PJ.$E.SYSTEM_INCOMPATIBLE:u({msg:(0,eO.t)("collaboration.voice.figma_audio_won_t_work_on_your_device_learn_why"),type:PJ.w.ERROR,persist:!0,allowMultiLine:!0,href:PZ.AM.TROUBLESHOOT});break;case PJ.$E.DISCONNECTING:case PJ.$E.RECONNECTING:s.current=setTimeout(()=>{c.current===PJ.$E.RECONNECTING&&(u({msg:(0,eO.t)("collaboration.voice.attempting_to_reconnect"),type:PJ.w.PENDING,persist:!0}),s.current=void 0)},1500);break;case PJ.$E.WARNING_AUDIO_INPUT_LEVEL_TOO_LOW:case PJ.$E.WARNING_AUDIO_OUTPUT_LEVEL_TOO_LOW:case PJ.$E.WARNING_SEND_AUDIO_BITRATE_TOO_LOW:case PJ.$E.WARNING_RECV_AUDIO_DECODE_FAILED:let a=Ow(t);if(!a)break;u({msg:a,type:PJ.w.WARNING,allowMultiLine:!0})}},[t]),void 0===t)return Q.createElement(Q.Fragment,null);let E=["expanded"===e.widgetState?"voice_flash_notifications--flashExpandedList--NkNnw voice_flash_notifications--flash--8i3SH":"voice_flash_notifications--flash--8i3SH",i?function(){switch(null==d?void 0:d.type){case PJ.w.ERROR:return"voice_flash_notifications--flashError--6fLPW";case PJ.w.WARNING:return"voice_flash_notifications--flashWarning--tdCit";case PJ.w.MESSAGE:return"voice_flash_notifications--flashMessage--lt-k-";case PJ.w.SUCCESS:return"voice_flash_notifications--flashSuccess--hmpUM";case PJ.w.PENDING:default:return"voice_flash_notifications--flashPending--Hzt7W"}}():"voice_flash_notifications--flashHidden--uYI96"];return Q.createElement(nM.Id,{onClick:null==d?void 0:d.onClick,className:E.join(" ")},Q.createElement(g,{className:(null==d?void 0:d.allowMultiLine)?"voice_flash_notifications--flashNotificationMessageWrap--eXghM voice_flash_notifications--flashNotificationMessageBase--wxFPN":"voice_flash_notifications--flashNotificationMessageEllipsis--eBEYX voice_flash_notifications--flashNotificationMessageBase--wxFPN ellipsis--ellipsis--Tjyfa",target:"_blank",rel:"noopener",href:null==d?void 0:d.href},(null==d?void 0:d.truncatedPrefix)&&Q.createElement("span",{className:"voice_flash_notifications--truncatedPrefix---gMQI ellipsis--ellipsis--Tjyfa"},null==d?void 0:d.truncatedPrefix),null==d?void 0:d.icon,null==d?void 0:d.msg))}var Ox=n(613275),ON=n(54971),Ok=n(525459);let OS="active_speakers_row--name--LtwVz ellipsis--ellipsis--Tjyfa",OI="active_speakers_row--pos1--88uza active_speakers_row--pos--D59NJ",OA="active_speakers_row--fadeOut--2tZhG",OP="active_speakers_row--willFadeIn--fFCX6",OO="active_speakers_row--activeSpeakerRowAvatar--zKOXb",OL=(e,t)=>e.userID===t.userID,OM=(e,t)=>{let n=e.sort((e,t)=>e.userID>t.userID?-1:1).map(e=>e.userID),a=t.sort((e,t)=>e.userID>t.userID?-1:1).map(e=>e.userID);if(n.length!==a.length)return!0;for(let e=0;e<n.length;e++)if(n[e]!==a[e])return!0;return!1},OD=(e,t)=>{let n=t.filter(t=>!e.find(e=>OL(e,t))),a=e.filter(e=>!t.find(t=>OL(e,t))),r=e.map(e=>a.indexOf(e)>-1?e:void 0),l=e.map(e=>-1===a.indexOf(e)?e:n.shift()).filter(e=>!!e);return n.length>0&&l.push(...n),t.length>1&&1===e.length&&(r[1]=e[0]),{fadeOut:r,active:l}},OR=(0,$.Ng)((e,t)=>({...t,observingSessionID:e.multiplayer.observingSessionID,presenterSessionID:e.multiplayer.presenterSessionID??null}))(function({user:e,classNames:t,observingSessionID:n,presenterSessionID:a,call:r}){let l;let i=(Array.isArray(t)?[...t,OO]:[t,OO]).join(" "),o=(0,PZ.eo)(),s=Q.createElement(Ns.Ro,{entity:{...e,id:e.userID},className:"active_speakers_row--activeSpeakerRowAvatarWithoutMultiplayer--W-S0A",size:24,key:e.userID}),c=e=>{e.stopPropagation()};return"sessionID"in e&&(l=`active-speaker-row-voice-avatar-session-${e.sessionID}`,s=Q.createElement(ON.vQ,{sessionID:null==e?void 0:e.sessionID,observingSessionID:n,presenterSessionID:a??null,nominatedSessionID:null,user:e,showColorIndicators:!0,tooltipProxyId:l}),c=t=>{t.stopPropagation(),t.preventDefault(),o(e)}),Q.createElement("div",{className:i},Q.createElement("div",{className:"active_speakers_row--avatarObserveClickTarget--T1JH- voice_toolbar--avatarObserveClickTarget--QALFw",onClick:c,"data-tooltip-proxy-element-id":l}),s,Q.createElement(Ok.i,{userId:e.userID,microphoneStyle:PJ.bU.FULL,call:r,volumeIconMutedState:Ok.S.MINI,className:"active_speakers_row--voiceIndicatorPositioning--YqGFz"}))});function OF({user:e,classNames:t}){return Q.createElement("div",{className:OS+" "+(Array.isArray(t)?t.join(" "):t)},e.name)}let OB=["active_speakers_row--pos0--Dc1bB active_speakers_row--pos--D59NJ",OI,"active_speakers_row--pos2--b5pkb active_speakers_row--pos--D59NJ","active_speakers_row--pos3--EAAkN active_speakers_row--pos--D59NJ","active_speakers_row--pos4--R5-5y active_speakers_row--pos--D59NJ","active_speakers_row--pos5--FYPvT active_speakers_row--pos--D59NJ","active_speakers_row--pos6--PTsn8 active_speakers_row--pos--D59NJ","active_speakers_row--pos7--DjtPj active_speakers_row--pos--D59NJ"];class OU extends Q.Component{constructor(e){super(e),this.displayString="ActiveSpeakersRow",this.node=null,this.state={active:[],fadeOut:[]}}componentWillMount(){this.setState(OD(this.state.active,this.props.users))}shouldComponentUpdate(e,t){return e===this.props||(OM(this.props.users,e.users)&&this.setState(OD(this.state.active,e.users)),!1)}render(){let e=(e,t)=>`${e.name}-${t}`,t=[],n=PX.h.getInstance();if(!n)return null;if(1===this.state.fadeOut.length&&this.state.fadeOut[0]){let a=this.state.fadeOut[0];t.push(Q.createElement(OR,{call:n,key:e(a,"avatar"),user:a,classNames:[OB[0],OA]}),Q.createElement(OF,{key:e(a,"name"),user:a,classNames:[OI,OA,OS]}))}else if(2===this.state.fadeOut.length&&!this.state.fadeOut[0]&&this.state.fadeOut[1]){let n=this.state.fadeOut[1];t.push(Q.createElement(OF,{key:e(n,"name"),user:n,classNames:[OI,OA,OS]}))}else t.push.apply(t,this.state.fadeOut.map((t,a)=>t&&Q.createElement(OR,{call:n,key:e(t,"avatar"),user:t,classNames:[OB[a],OA]})));if(1===this.state.active.length){let a=this.state.active[0];t.push(Q.createElement(OR,{call:n,key:e(a,"avatar"),user:a,classNames:[OB[0],OP]}),Q.createElement(OF,{key:e(a,"name"),user:a,classNames:[OI,OP,OS]}))}else t.push.apply(t,this.state.active.map((t,a)=>Q.createElement(OR,{call:n,key:e(t,"avatar"),user:t,classNames:[OB[a],OP]})));return t.sort((e,t)=>null===e.key||null===t.key?0:e.key>t.key?-1:1),setTimeout(()=>{var e;null==(e=this.node)||e.querySelectorAll("."+OP).forEach(e=>e.classList.remove(OP))},10),Q.createElement("div",{ref:e=>this.node=e,className:"active_speakers_row--activeSpeakerRow--l5ylB"},t)}}function OH(e){let{call:t,usersInCall:n}=e,a=(0,at.iZ)(),r=(0,Oo.mt)(t),l=Q.useMemo(()=>{var e;return(null==(e=null==r?void 0:r.filter(e=>e!==(null==a?void 0:a.id)))?void 0:e.slice(0,6).reduce((e,t)=>{let a=n.find(({userID:e})=>e===t);return a?e.concat([a]):e},[]))||[]},[r,n,a]);return Q.createElement(OU,{users:l})}function OV(e){let{children:t,headerText:n,collapsedContent:a,theme:r,onToggle:l,collapseStateOverride:i}=e,[o,s]=Q.useState(!1),c=i||o;return Q.createElement("span",{"data-editor-theme":r},Q.createElement(nM.fI,{className:c?"voice_collapsible_dropdown--isCollapsed--SwBvz":""},Q.createElement("span",{className:"voice_collapsible_dropdown--dropdownSectionTitle--lpt22",onClick:t=>{t.preventDefault(),t.stopPropagation(),l&&!0!==e.hideToggleOption&&l(!c),s(!c)}},c?a:n,!e.hideToggleOption&&Q.createElement(eM.B,{svg:c?oQ.A:gh.A,className:"voice_collapsible_dropdown--voiceDropdownChevronIcon--JgQxE"}))),!c&&t&&Q.createElement(Q.Fragment,null,t))}var OG=n(714786);let OK=(0,$.Ng)(e=>({showWidgetParticipantList:e.voice.showWidgetParticipantList}))(function(e){let{showWidgetParticipantList:t}=e,n=(0,at.iZ)(),a=(0,$.wA)(),{userIdsInCall:r}=(0,Pq.W5)(e.fileKey),l=(0,Pq.bF)(r,e.fileKey),i=(0,PZ.eo)(),{usersInCall:o,callMetadata:s}=Q.useMemo(()=>({usersInCall:l.filter(e=>e.userID!==(null==n?void 0:n.id)),callMetadata:{microphoneStyle:PJ.bU.FULL,call:e.call}}),[l,n,e.call]);return Q.createElement(Q.Fragment,null,Q.createElement(ON.sK,null),o.length>0&&Q.createElement("div",{className:OG.ev},Q.createElement(OV,{headerText:`${e.currentUserInCall?"You and ":""}`+(0,lA.td)(o.length,"person","people")+" in conversation",collapseStateOverride:!t,collapsedContent:Q.createElement(OH,{usersInCall:o,call:e.call}),hideToggleOption:o.length<2,onToggle:e=>a(PY.yF(!e))},Q.createElement(ab.P,{className:OG.YM},o.map(e=>Q.createElement(Ox.Q,{key:"sessionID"in e?e.sessionID:e.userID,callMetadata:s,user:e,isOverflow:!0,onUserClick:i}))))))});var OW=n(912925),Oz=n(173919);function Oj(e){return Q.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},Q.createElement("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M9.5 14.5 12 17l1 1V6l-1 1-2.5 2.5h-3a.5.5 0 0 0-.5.5v4a.5.5 0 0 0 .5.5h3Zm2.793-9.207L9.086 8.5H6.5A1.5 1.5 0 0 0 5 10v4a1.5 1.5 0 0 0 1.5 1.5h2.586l3.207 3.207A1 1 0 0 0 14 18V6a1 1 0 0 0-1.707-.707ZM16.16 16.51c-.317.152-.66-.098-.66-.45 0-.213.13-.401.32-.498a4 4 0 0 0 0-7.126.568.568 0 0 1-.32-.498c0-.352.343-.602.66-.45a5 5 0 0 1 0 9.022Zm.138-2.582c-.3.356-.798.088-.798-.377a.72.72 0 0 1 .141-.409A1.99 1.99 0 0 0 16 12c0-.425-.133-.82-.359-1.143a.72.72 0 0 1-.141-.408c0-.465.499-.734.798-.377.438.521.702 1.194.702 1.928a2.99 2.99 0 0 1-.702 1.929Z",clipRule:"evenodd"}))}function OY(e){return Q.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},Q.createElement("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M7 8h10a1 1 0 0 1 1 1v6a1 1 0 0 1-1 1H7a1 1 0 0 1-1-1V9a1 1 0 0 1 1-1ZM5 9a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v6a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V9Zm4.5 5a.5.5 0 0 0 0 1h2a.5.5 0 0 0 0-1h-2Zm4.5-1.5a.5.5 0 0 1 .5-.5h2a.5.5 0 0 1 0 1h-2a.5.5 0 0 1-.5-.5Zm-3.5-.5a.5.5 0 0 0 0 1h2a.5.5 0 0 0 0-1h-2Zm2.5 2.5a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 0 1h-1a.5.5 0 0 1-.5-.5ZM7.5 12a.5.5 0 0 0 0 1h1a.5.5 0 0 0 0-1h-1Z",clipRule:"evenodd"}))}let OZ="device_controls--pointingDropdown--hSJ1h",OX="device_controls--containerWithPadding--IlJeH",Oq="device_controls--deviceControlRow--kSC19",OJ="device_controls--controlLabel--Yp1lV",OQ="device_controls--iconContainer--TuXUt",O$="device_controls--dropdownContainer--DfMXW",O0="device_controls--dropdownInput--w72f-",O1="device_controls--dropdownChevron--UBe58",O2="device_controls--divider--Z8rM-";var O5=n(909345);let O4="MICROPHONE_CONTROL_DROPDOWN",O3="PLAYBACK_DEVICE_CONTROL_DROPDOWN",O6=(0,rT.jz)(uT.aHA);function O7(e,t,n,a,r,l,i){let o=(0,$.wA)(),[s,c]=(0,Q.useState)(null),[d,u]=(0,Q.useState)([]),m=(0,$.d4)(e=>{var t;return(null==(t=e.dropdownShown)?void 0:t.type)===a}),p=(0,bS.wm)(()=>d.map(e=>e.deviceId),[d]),_=(0,Q.useCallback)(async()=>{try{let e=await t(),n=new Set(p);(p.length!==e.length||e.some(e=>!(e.deviceId in n)))&&u(e)}catch{i||o(eL.F.enqueue({message:(0,eO.t)("collaboration.voice.error_fetching_devices"),error:!0,type:"voice-device-error"}))}},[p,o,t,i]),f=(0,Q.useCallback)(async()=>{try{if(l&&!ec.Ay.chrome)return;let t=await e();t.deviceId!==(null==s?void 0:s.deviceId)&&c(t)}catch{}},[l,e,s]),h=(0,Q.useCallback)(async e=>{e.deviceId!==(null==s?void 0:s.deviceId)&&c(e);try{await n(e)}catch{o(eL.F.enqueue({message:(0,eO.t)("collaboration.voice.error_selecting_device"),error:!0,type:"voice-device-error"})),await f()}},[f,n,o,s]);return(0,Q.useEffect)(()=>{(r||m)&&_()},[r,m,_]),(0,Q.useEffect)(()=>{f(),_()},[]),[s,d,h]}function O8(e){var t;let[n,a,r]=O7(e.call.currentMicrophone,e.call.getMicrophones,e.call.setMicrophone,O4,e.isOpen,!1,e.microphonePermissionDenied),[l,i,o]=O7(e.call.currentPlaybackDevice,e.call.getPlaybackDevices,e.call.setPlaybackDevice,O4,e.isOpen,!0,e.microphonePermissionDenied),s=null==(t=e.targetRef.current)?void 0:t.getBoundingClientRect();return e.isOpen?Q.createElement(O9,{targetRect:s,currentMicrophone:n,microphoneDevices:a,setMicrophone:r,currentPlaybackDevice:l,playbackDevices:i,setPlaybackDevice:o}):null}function O9(e){let{targetRect:t,currentMicrophone:n,microphoneDevices:a,setMicrophone:r,currentPlaybackDevice:l,playbackDevices:i,setPlaybackDevice:o}=e,s=(0,$.wA)(),c=(0,aD.GS)(),[d,u]=(0,Q.useState)({type:""}),m=()=>{u({type:""})},p={format:e=>(null==e?void 0:e.label)||"",isEqual:(e,t)=>e.deviceId===t.deviceId},_=Q.createElement(aT.l6,{className:O$,inputClassName:O0,chevronClassName:O1,id:O4,svg:c?O5.A:void 0,ui3Icon:c?Q.createElement(Oz.P,null):void 0,property:n||{deviceId:"not_found",label:(0,eO.t)("collaboration.voice.microphone_not_found"),groupId:"not_found",kind:"audioinput",toJSON:()=>null},dispatch:s,dropdownShown:d,onChange:e=>{r(e)},formatter:p,neverConstrain:!0,onHideDropdownOverride:m,onShowDropdownOverride:()=>u({type:O4})},a.map(e=>Q.createElement(aT.c$,{key:e.deviceId,value:e},e.label))),f=Q.createElement(aT.l6,{className:O$,inputClassName:O0,chevronClassName:O1,id:O3,property:l||{deviceId:"not_found",label:(0,eO.t)("collaboration.voice.playback_device_not_found"),groupId:"not_found",kind:"audiooutput",toJSON:()=>null},svg:c?O5.A:void 0,ui3Icon:c?Q.createElement(Oj,null):void 0,dispatch:s,dropdownShown:d,onChange:e=>{o(e)},formatter:p,neverConstrain:!0,onHideDropdownOverride:m,onShowDropdownOverride:()=>u({type:O3})},i.map(e=>Q.createElement(aT.c$,{key:e.deviceId,value:e},e.label))),h=Q.createElement(Q.Fragment,null,Q.createElement("div",{className:O2}),!(0,wQ.WO)()&&Q.createElement(Lt,null),(0,wQ.WO)()&&Q.createElement(Le,null));return c?Q.createElement(ho.Cf,{className:OZ,targetRect:t,minWidth:O6,propagateCloseClick:!0,lean:"left",leanPadding:52},Q.createElement("div",{onClick:e=>e.stopPropagation()},Q.createElement("div",{className:"device_controls--header---h3P-"},(0,eO.t)("collaboration.voice.audio_settings"),Q.createElement(aO.Jn,{onClick:()=>s(nP.oB())})),Q.createElement("div",{className:"device_controls--container--VR8KK"},Q.createElement(nM.fI,{className:Oq},Q.createElement("span",{className:OJ},Q.createElement(eO.Tx,{id:"collaboration.voice.microphone"})),_),ec.Ay.chrome&&Q.createElement(nM.fI,{className:Oq},Q.createElement("span",{className:OJ},Q.createElement(eO.Tx,{id:"collaboration.voice.speakers"})),f))),(0,wQ.X0)()&&h):Q.createElement(ho.Cf,{showPoint:!!t,targetRect:t,className:OZ,minWidth:280,propagateCloseClick:!0},Q.createElement("div",{onClick:e=>e.stopPropagation()},Q.createElement("div",{className:OX},Q.createElement(nM.fI,{className:Oq},Q.createElement("span",{className:OQ},Q.createElement(P2.A.Unmuted,{size:24})),Q.createElement("span",{className:OJ},Q.createElement(eO.Tx,{id:"collaboration.voice.microphone"}))),Q.createElement(nM.fI,{className:Oq},_)),ec.Ay.chrome&&Q.createElement(Q.Fragment,null,Q.createElement("div",{className:O2}),Q.createElement("div",{className:OX},Q.createElement(nM.fI,{className:Oq},Q.createElement("span",{className:OQ},Q.createElement(eM.B,{svg:O5.A})),Q.createElement("span",{className:OJ},Q.createElement(eO.Tx,{id:"collaboration.voice.speakers"}))),Q.createElement(nM.fI,{className:Oq},f))),(0,wQ.X0)()&&h))}function Le(){let e=(0,$.d4)(e=>e.voice.captionsInstallProgress),t=(0,$.d4)(e=>e.voice.showCaptions),n=(0,$.wA)(),a=Q.useId(),r=Q.createElement(nd.U,{className:OQ,svg:Od.A},Q.createElement(OY,null)),l=Q.createElement(eO.Tx,{id:"collaboration.voice.closed_captioning"}),i=Q.createElement(iZ.Ex,{text:(0,eO.t)("collaboration.voice.beta"),className:"device_controls--betaTag---VTFI",color:iZ.zE.BRAND});return t&&(0,wQ.Mw)(e)&&(l=Q.createElement(eO.Tx,{id:"collaboration.voice.setting_up_closed_captions_install_progress",installProgress:e}),r=Q.createElement(t2.kt,{className:"device_controls--captionsLoadingSpinner--ivdGQ"}),i=Q.createElement(Q.Fragment,null)),Q.createElement(Tn.J,{className:"device_controls--closedCaptionRow--OdIHt raw_components--singleRow--W5dYN raw_components--_singleRow--yTGIY raw_components--singleRowHeight--dKM4t raw_components--_row--rHucX raw_components--row--NThzm device_controls--deviceControlRowWithHover--KUbHL device_controls--deviceControlRow--kSC19",htmlFor:a,"data-preferred-theme":"dark"},r,Q.createElement("span",{className:"device_controls--captionToggleLabel--MjCYn device_controls--controlLabelFullOpacity--1nEqI device_controls--controlLabel--Yp1lV"},l,i),Q.createElement(OW.v,{id:a,checked:t,onChange:(e,{event:t})=>{t.stopPropagation(),(0,er.sx)("voice_captions_toggle",{value:e,source:"voice_widget"}),(0,wQ.HJ)(n,e)}}))}function Lt(){let e=PZ.AM.ACCESSIBILITY;return Q.createElement(t6.L0,{target:"_blank",rel:"noopener",href:e,trackingEventName:"Learn more about captioning"},Q.createElement(nM.fI,{className:"device_controls--deviceControlRowWithHover--KUbHL device_controls--deviceControlRow--kSC19"},Q.createElement(eM.B,{className:OQ,svg:Od.A}),Q.createElement("span",{className:"device_controls--controlLabelFullOpacity--1nEqI device_controls--controlLabel--Yp1lV"},Q.createElement(eO.Tx,{id:"collaboration.voice.learn_how_to_turn_on_closed_captioning"}))))}var Ln=n(654703),La=n(776836);let Lr="DEVICE_CONTROL_DROPDOWN",Ll=null,Li=null,Lo=null;function Ls(e){let{call:t,fileKey:n,user:a,callEvent:r,notificationUserId:l,callEventCallback:i}=e,o=(0,$.Pj)(),[s,c]=(0,Q.useState)(null),[d,u]=(0,Q.useState)(),[m,p]=(0,Q.useState)(!1),[_,f]=(0,Q.useState)(!1),[h,g]=(0,Q.useState)(!1),[E,v]=(0,Q.useState)(!1),y=(0,$.d4)(e=>e.voice.snapWidget),[b,C]=(0,Q.useState)(!1),[w,T]=(0,Q.useState)(!1),[x,N]=(0,Q.useState)({}),{userIdsInCall:k}=(0,Pq.W5)(n);(0,Oi.W)();let S=(0,$.d4)(e=>e.voice.showCaptions),I=(0,$.d4)(e=>e.voice.captionsInstallProgress),A=(0,$.d4)(e=>{var t;return(null==(t=e.dropdownShown)?void 0:t.type)===Lr}),P=(0,$.d4)(e=>e.voice.activeCall[n]||!1),O=(0,$.d4)(e=>e.voice.showWidgetParticipantList),L=(0,Q.useRef)(null),M=(0,aD.GS)(),D=(0,$.wA)(),R=(0,eG.J2)(eU.Ez5.uiState().showCanvasSearch),F={in:()=>{g(!0)},out:()=>(g(!1),new Promise(e=>setTimeout(e,300)))};Q.useEffect(()=>{let e=t.getSystemCompatibility();if(c(e),!e){i(PJ.$E.SYSTEM_INCOMPATIBLE);return}return Ll||Li||(Li=new Audio("https://static.figma.com/uploads/94721b53827c353075273e54a45ea41850ee0284"),(Ll=new Audio("https://static.figma.com/uploads/d917bf9964749c47b46d367572a5dd28a559bd2f")).load(),Li.load(),[Li,Ll].forEach(e=>e.volume=.5)),()=>{D(PY.Pp(!1))}},[]),Q.useEffect(()=>{!P&&s&&H(),window.requestAnimationFrame(()=>F.in())},[s]),Q.useEffect(()=>{let e;switch(r){case PJ.$E.DISCONNECTED:w&&(null==Li||Li.play(),T(!1)),D(PY.oI({fileKey:n}));break;case PJ.$E.TOKEN_WILL_EXPIRE_DETECT_MIC_INPUT:(function e(n){if(Date.now()>=n){i(PJ.$E.TOKEN_WILL_EXPIRE);return}if(t.isLocalUserSpeaking()){G(!1);return}setTimeout(()=>{e(n)},500)})(Date.now()+1e4);break;case PJ.$E.CONNECTED:case PJ.$E.CONNECTED_WITH_MIC_DISABLED:b&&(setTimeout(()=>null==Ll?void 0:Ll.play(),400),C(!1)),D(PY.rO({fileKey:n}));break;case PJ.$E.CALL_INACTIVE:t.leave();break;case PJ.$E.TOKEN_WILL_EXPIRE:e=()=>G(!0);break;case PJ.$E.TOKEN_EXPIRED:e=H;break;case PJ.$E.USER_JOINED:case PJ.$E.USER_LEFT:if(Lo)return;break;case PJ.$E.WARNING_AUDIO_INPUT_LEVEL_TOO_LOW:case PJ.$E.WARNING_AUDIO_OUTPUT_LEVEL_TOO_LOW:case PJ.$E.WARNING_SEND_AUDIO_BITRATE_TOO_LOW:case PJ.$E.WARNING_RECV_AUDIO_DECODE_FAILED:let a=Ow(r);if(!a)break;N({...x,[r]:a});break;case PJ.$E.WARNING_AUDIO_INPUT_LEVEL_TOO_LOW_RECOVER:case PJ.$E.WARNING_AUDIO_OUTPUT_LEVEL_TOO_LOW_RECOVER:case PJ.$E.WARNING_SEND_AUDIO_BITRATE_TOO_LOW_RECOVER:case PJ.$E.WARNING_RECV_AUDIO_DECODE_FAILED_RECOVER:let o=function(e){switch(e){case PJ.$E.WARNING_AUDIO_INPUT_LEVEL_TOO_LOW_RECOVER:return PJ.$E.WARNING_AUDIO_INPUT_LEVEL_TOO_LOW;case PJ.$E.WARNING_AUDIO_OUTPUT_LEVEL_TOO_LOW_RECOVER:return PJ.$E.WARNING_AUDIO_OUTPUT_LEVEL_TOO_LOW;case PJ.$E.WARNING_SEND_AUDIO_BITRATE_TOO_LOW_RECOVER:return PJ.$E.WARNING_SEND_AUDIO_BITRATE_TOO_LOW;case PJ.$E.WARNING_RECV_AUDIO_DECODE_FAILED_RECOVER:return PJ.$E.WARNING_RECV_AUDIO_DECODE_FAILED;default:return null}}(r);if(!o)break;delete x[o],N(x)}void 0!==r&&u({callEvent:r,onClick:e,notificationUserId:l})},[r]),Q.useEffect(()=>{v(!0)},[y]),Q.useEffect(()=>{E&&v(!1)},[E]);let[B,U]=(0,Q.useState)(!0),H=async()=>{if(U(!0),!t.getSystemCompatibility()){U(!1),i(PJ.$E.SYSTEM_INCOMPATIBLE);return}p(!0),C(!0),Lo=setTimeout(()=>{Lo=null},5e3);try{let{data:e}=await i1.Ay.post(`/api/voice/${n}/auth`),a=await (0,Ol.JL)(e.meta.user_encryption_key),r=await (0,Ol.We)(a,e.meta.call_user_id);if(r!=r)throw Error(`User ID does not match local user ID.
local: ${r}
remote: ${r}`);await t.join({appId:e.meta.app_id,callId:e.meta.call_id,token:e.meta.auth_token,callUserId:e.meta.call_user_id,userId:r,encryptionKey:e.meta.call_encryption_key,userEncryptionKey:a,setParticipantIdsCallback:V,callEventCallback:i,store:o,fileKey:n})}catch(e){U(!1),i(PJ.$E.ERROR)}p(!1),U(!1)};function V(e){D(PY.cb(e))}P1({isVisible:h});let G=async e=>{let{data:a}=await i1.Ay.post(`/api/voice/${n}/auth`,{call_user_id:t.uid});await t.renewToken(a.meta.auth_token),e?i(PJ.$E.CONNECTED):i(PJ.$E.TOKEN_SILENTLY_RENEWED)},K=async()=>{p(!0),T(!0);try{await Promise.all([F.out(),t.leave()]),D(PY.oI({fileKey:n})),null==Li||Li.play(),A&&D(nP.oB()),D(PY.Pp(!1))}catch{F.in(),i(PJ.$E.ERROR_ON_LEAVE)}p(!1)},W=async e=>{(0,cB.ds)("voice_user_mute_toggle",n,o.getState(),{source:"voice_widget",muted:!e}),e?await t.unmute():await t.mute()},z=d?d&&k.size>1&&O?"expanded":"collapsed":null;S&&(0,wQ.nN)(I)&&((0,cB.ds)("voice_caption_download_error",n,o.getState(),{error_code:I,source:"voice_widget"}),(0,wQ.HJ)(D,!1),D((0,n9.to)({type:Os.L,data:{dispatch:D,installProgress:I}})));let j=Q.createElement("span",{onClick:()=>{(0,cB.ds)("voice_widget_minimized_toggle",n,o.getState(),{minimized:!1}),D(PY.Pp(!1))},className:["voice_widget--dismissButtonPosition--eEXoz",P9].join(" "),"data-tooltip-type":nO.Ib.TEXT,"data-tooltip":(0,eO.t)("collaboration.voice.minimize")},Q.createElement(nd.U,{className:P8,svg:Ln.A,fallbackSvg:Ln.A},Q.createElement(fU.A,null)));return Q.createElement(Q.Fragment,null,Q.createElement("div",{className:ea()(P3,{[P7]:h,[P6]:R})},Q.createElement(nM.Id,{className:On},Q.createElement("div",{className:Ot},Q.createElement("span",{className:P||_?"voice_widget--currentUser--L7Z6l":"voice_widget--inactiveCurrentUser--yVaZY voice_widget--currentUser--L7Z6l"},Q.createElement(Lc,{user:a,call:e.call})),Q.createElement(OC,{className:"voice_widget--warningIcon--WJPdH",activeWarnings:x}),Q.createElement(Og.Y,{userId:a.id,onMuteButtonClickCallback:W,disabled:t.microphonePermissionDenied,className:[Oe,P9].join(" "),disabledClassName:[Oe,"voice_widget--muteButtonDisabled--fJzUI"].join(" ")}),Q.createElement("span",{className:["voice_widget--controlsButtonPosition--TTGIU",A?"voice_widget--controlsButtonActive--vE2c-":P9].join(" "),onMouseDown:()=>{A?D(nP.oB()):((0,cB.ds)("voice_widget_open_settings",n,o.getState()),D(nP.j7({type:Lr})))},onClick:e=>e.stopPropagation(),ref:L,"data-tooltip-type":nO.Ib.TEXT,"data-tooltip":(0,eO.t)("collaboration.voice.settings")},Q.createElement(nd.U,{className:P8,svg:La.A,fallbackSvg:La.A},Q.createElement(Or,null))),Q.createElement("button",{className:P?"voice_widget--leaveButton--UUdxH basic_form--btn--FSrmp ellipsis--ellipsis--Tjyfa text--fontPos11--2LvXf text--_fontBase--QdLsd":"voice_widget--joinButton--WvZPr basic_form--btn--FSrmp ellipsis--ellipsis--Tjyfa text--fontPos11--2LvXf text--_fontBase--QdLsd",onClick:P?K:H,disabled:!s||m,onMouseEnter:()=>f(!0),onMouseLeave:()=>f(!1)},P||B?Q.createElement(eO.Tx,{id:"collaboration.voice.leave"}):Q.createElement(eO.Tx,{id:"collaboration.voice.join"})),!M&&j),P&&Q.createElement(OK,{fileKey:n,currentUserInCall:P,call:t}),(0,wQ.WO)()&&S&&Q.createElement(Oh,{call:t})),!M&&d&&Q.createElement(OT,{notification:d,widgetState:z})),M&&d&&Q.createElement(OT,{notification:d,widgetState:z}),Q.createElement(O8,{isOpen:A,call:t,targetRef:L,microphonePermissionDenied:t.microphonePermissionDenied}))}function Lc({user:e,call:t}){return Q.createElement(Q.Fragment,null,Q.createElement(Ld,{user:e,call:t}),Q.createElement(Ns.Ro,{entity:e,size:24,className:"voice_widget--undraggableImage--muN9g"}))}function Ld({user:e,call:t}){let n=(0,Oo.Wl)(e.id,t);return!n||n.isMuted?null:Q.createElement(Ok.i,{userId:e.id,microphoneStyle:PJ.bU.FULL,className:"voice_widget--avatarVoiceIndicator--zfWwx",volumeIconMutedState:Ok.S.NONE,call:t})}function Lu(){let e=(0,$.d4)(e=>e.mirror.appModel.showUi),t=(0,$.d4)(e=>{var t;return(null==(t=e.openFile)?void 0:t.key)||null}),n=(0,at.iZ)(),a=(0,$.d4)(e=>e.voice.showWidget),r=(0,$.d4)(e=>t&&t in e.voice.activeCall),l=(0,$.d4)(e=>t&&!!e.voice.activeCall[t]),{userIdsInCall:i}=(0,Pq.W5)(t,!0),o=(0,Pq.bF)(i,t).length,s=(0,PZ.qr)(),c=(0,$.wA)(),[d,u]=(0,Q.useState)(),[m,p]=(0,Q.useState)(),_=(0,aD.GS)(),f=Q.useCallback((e,t)=>{PJ.GA.has(e)&&c(PY.Pp(!0)),t&&p(t),u(e)},[c]),h=(0,$.d4)(e=>e.voice.captionsInstallProgress),g=(0,$.d4)(e=>e.voice.showCaptions);return(Q.useEffect(()=>{s&&(s.captionsToggleEnabled=g,s.streamAudioForCaptions(g&&100===h))},[g,h,s]),Q.useEffect(()=>{a||(p(void 0),u(void 0))},[a]),Q.useEffect(()=>{t&&!r&&o>0?c(PY.Zq({fileKey:t})):t&&r&&!l&&0===o&&c(PY.a6({fileKey:t}))},[o,t,r,l,c]),Q.useEffect(()=>()=>{PX.h.leave(),t&&c(PY.a6({fileKey:t}))},[c,t]),e&&t&&n)?_&&r&&!a?Q.createElement(Oa,{fileKey:t}):s&&a?Q.createElement(Ls,{fileKey:t,user:n,call:s,notificationUserId:m,callEvent:d,callEventCallback:f}):Q.createElement(Q.Fragment,null):Q.createElement(Q.Fragment,null)}var Lm=n(256859),Lp=n(87382),L_=n(903228),Lf=n(606267),Lh=((T=Lh||{})[T.V1=1]="V1",T[T.MIN=1]="MIN",T[T.MAX=1]="MAX",T),Lg=n(808584);let LE=new Map([["TRANSFORM_ITEM",eU.ibQ.TRANSFORM_ITEM],["STACK_ITEM",eU.ibQ.STACK_ITEM],["CONSTRAINTS_ITEM",eU.ibQ.CONSTRAINTS_ITEM],["LAYER_ITEM",eU.ibQ.LAYER_ITEM],["TYPE_ITEM",eU.ibQ.TYPE_ITEM],["FILL_ITEM",eU.ibQ.FILL_ITEM],["STROKE_ITEM",eU.ibQ.STROKE_ITEM],["SELECTION_COLORS",eU.ibQ.SELECTION_COLORS],["EFFECTS_ITEM",eU.ibQ.EFFECTS_ITEM]]),Lv=()=>{let e=(0,Nj.ap)();if(e&&e.nativePropertiesPanelSupportedVersions){let t=e.nativePropertiesPanelSupportedVersions.min,n=e.nativePropertiesPanelSupportedVersions.max,a=Lh.MIN,r=Lh.MAX;if(a<=n&&t<=r)return Math.min(n,r)}},Ly=e=>{if(void 0!==e){if(e===Lh.V1)return{version:Lh.V1,items:[{identifier:"ALIGNMENT",label:"Alignment"},{identifier:"TRANSFORM_ITEM",label:"Transform"},{identifier:"STACK_ITEM",label:(0,eO.t)("fullscreen.properties_panel.stack_panel.auto_layout")},{identifier:"CONSTRAINTS_ITEM",label:(0,eO.t)("fullscreen.properties_panel.constraints_panel.constraints")},{identifier:"LAYER_ITEM",label:(0,eO.t)("fullscreen.layer_panel.layer")},{identifier:"TYPE_ITEM",label:(0,eO.t)("fullscreen.type_panel.text")},{identifier:"FILL_ITEM",label:(0,eO.t)("fullscreen.properties_panel.fill.fill")},{identifier:"STROKE_ITEM",label:(0,eO.t)("fullscreen.properties_panel.fill.stroke")},{identifier:"SELECTION_COLORS",label:(0,eO.t)("fullscreen.properties_panel.fill.selection_colors")},{identifier:"EFFECTS_ITEM",label:(0,eO.t)("properties_panel.effects.effects")}]};(0,eh.xb)(e)}},Lb=e=>{let t=function(e){let t=(0,eG.J2)(eU.Ez5.propertiesPanelState().shownPropertiesPanels),n=(0,$.d4)(e=>e.mirror.selectionProperties),a=(0,$.d4)(e=>e.mirror.selectedStyleProperties),r=(0,$.d4)(e=>e.mirror.selectionPaints);if(!e)return[];let l=[];for(let i of e.items){let e=i.identifier,o=LE.get(e);switch(e){case"ALIGNMENT":(0,Lg.d6)(t)&&l.push(e);break;case"STACK_ITEM":(0,Lg.IY)(t,!1,n,a.guid?a:void 0,!1)&&l.push(e);break;case"SELECTION_COLORS":(0,Lg.fI)(t,!1,r)&&l.push(e);break;default:o&&t[o]&&l.push(e)}}return l}(Ly(e));return e?{version:e,itemIdentifiers:t}:null};function LC(){var e;let t=Lv(),n=(0,Nj.ap)(),a=Lb(t);return a&&(null==(e=null==n?void 0:n.nativePropertiesPanelUpdateDisplayState)||e.call(n,a)),Q.createElement(Q.Fragment,null)}var Lw=n(823232);let LT=function(){return null};var Lx=n(107317);let LN=void 0,Lk=function(){return null};var LS=n(994192),LI=n(714889),LA=n(55959),LP=n(2338),LO=n(556086),LL=n(367571),LM=n(751988),LD=n(55362),LR=n(268176),LF=n(818171);let LB="banners--bannerLabel--3jj-4";function LU(){let e=(0,t4.BC)(),t=(0,t4.w_)(),n=Q.useCallback(()=>{e.hidden||e.onClick(t3.i$.TopBanner)},[e]);return e.hidden||t?null:Q.createElement(nc.tM,{className:"banners--bannerButton--G4mb8",onClick:n,disabled:e.disabled},e.label)}function LH(){let e=(0,t4.nH)(),t=(0,t4.w_)();return e?Q.createElement("div",{className:LB},Q.createElement(eO.Tx,{id:"dev_handoff.paywall.banner.description_starter_viewer",title:Q.createElement("strong",null,Q.createElement(eO.Tx,{id:"dev_handoff.paywall.banner.title"}))})):t?Q.createElement("div",{className:LB},Q.createElement(eO.Tx,{id:"dev_handoff.paywall.banner.description_pending",title:Q.createElement("strong",null,Q.createElement(eO.Tx,{id:"dev_handoff.paywall.request_pending"}))})):Q.createElement("div",{className:LB},Q.createElement(eO.Tx,{id:"dev_handoff.paywall.banner.description",title:Q.createElement("strong",null,Q.createElement(eO.Tx,{id:"dev_handoff.paywall.banner.title"}))}))}function LV(){return Q.createElement("div",{className:LB},Q.createElement(eO.Tx,{id:"dev_handoff.paywall.banner.description_in_trial",numDays:to.Hw9,title:Q.createElement("strong",null,Q.createElement(eO.Tx,{id:"dev_handoff.paywall.request_pending"}))}))}var LG=n(100096),LK=n(352604),LW=n(455317),Lz=n(677029),Lj=n(298046),LY=n(517699),LZ=n(243559),LX=n(750475);let Lq=JSON.parse('{"safari":"16","firefox":"101","chrome":"88","edge":"121","deprecatedOn":"2024-03-18T08:00:00.000Z"}');var LJ=n(478398),LQ=n(819258),L$=n(315457),L0=n(10388),L1=n(87171);let L2=({state:e})=>{let t=e.mirror.appModel.multiplayerSessionState!==eU.kul.UNJOINED,n=!e.mirror.appModel.isReadOnly;if(e.showingUpgradeBanner)return{id:LX.om.MultiplayerSessionUpgrade,bannerType:LX.x1.INFO,icon:L1.A,mainText:(0,eO.t)("banner.multiplayer_session_upgrade.page_out_of_date"),description:t?(0,eO.t)("banner.multiplayer_session_upgrade.out_of_date.connected"):(0,eO.t)("banner.multiplayer_session_upgrade.out_of_date.not_connected"),button:{buttonText:n?(0,eO.t)("banner.multiplayer_session_upgrade.save_and_reload"):(0,eO.t)("banner.multiplayer_session_upgrade.reload"),onClick:()=>{(0,er.sx)("Upgrade Banner Clicked"),eU.h3O.startUpgrade()}}}};function L5({hubFile:e}){return(0,LF._)(e)?Q.createElement(eO.Tx,{id:"banner.freemium_preview.this_is_just_a_preview"}):Q.createElement(eO.Tx,{id:"banner.freemium_preview.get_the_full_file_on_community"})}function L4({hubFile:e}){return(0,LF._)(e)?Q.createElement(eO.Tx,{id:"banner.freemium_preview.you_purchased_this_file_already"}):Q.createElement(eO.Tx,{id:"banner.freemium_preview.this_is_just_a_preview_of_the_file_you_can_buy_on_community"})}function L3({hubFile:e}){let t=(0,LF._)(e),n=t?"":`?${LW.Tb}`;return Q.createElement(LR.A6,{to:`/community/file/${e.id}${n}`},Q.createElement(nc.tM,{trackingProperties:{trackingDescriptor:t?c5.c.OPEN_IN_COMMUNITY:c5.c.BUY_THE_RESOURCE}},t?Q.createElement(eO.Tx,{id:"banner.freemium_preview.open_in_community"}):Q.createElement(eO.Tx,{id:"banner.freemium_preview.buy_the_resource"})))}let L6=[({})=>{let{deprecatedOn:e,...t}=Lq,n=new Date(e);if(n>new Date(new Date().getTime()+24192e5)||!ec.Ay.isUnsupportedBrowser(t))return;let a=n>new Date?(0,eO.t)("banner.browser_deprecation.description",{deprecationDate:n}):(0,eO.t)("banner.browser_deprecation.description_now");return{id:LX.om.BrowserDeprecationBanner,dismissible:!0,bannerType:LX.x1.WARN,icon:L1.A,mainText:(0,eO.t)("banner.browser_deprecation.title"),description:a,button:{buttonText:(0,eO.t)("banner.browser_deprecation.learn_more"),onClick:()=>ei.Ay.redirect("https://help.figma.com/hc/en-us/articles/360039827194-Figma-browser-requirements","_blank")}}},L2,({state:e,dispatch:t})=>{let n=e.openFile,a=null==n?void 0:n.teamId,r=a?e.teams[a]:null,l=a&&(0,cQ.canAdminTeam)(a,e);if(r&&r.subscription===dV.Qh.PAST_DUE)return{id:LX.om.ProTeamPastDue,bannerType:LX.x1.WARN,icon:L1.A,mainText:(0,eO.t)("banner.pro_team_past_due.locked"),description:l?(0,eO.t)("banner.pro_team_past_due.update_payment_source.can_admin",{teamName:r.name}):(0,eO.t)("banner.pro_team_past_due.update_payment_source.no_admin",{teamName:r.name}),button:l?{buttonText:(0,eO.t)("banner.pro_team_past_due.update_payment"),onClick:()=>{null==t||t(nP.$T({view:"teamAdminConsole",teamId:a,teamAdminConsoleViewTab:Lj.I.SETTINGS}))}}:void 0}},({state:e,dispatch:t})=>{let n=e.openFile,a=null==n?void 0:n.teamId,r=a?e.teams[a]:null,l=a&&(0,cQ.canAdminTeam)(a,e);if(r&&r.subscription===dV.Qh.GRACE_PERIOD)return{id:LX.om.ProTeamChargeFailed,bannerType:LX.x1.WARN,icon:L1.A,mainText:(0,eO.t)("banner.pro_team_charge_failed.payment_failed"),description:l?(0,eO.t)("banner.pro_team_charge_failed.unsuccessful_team_charge.can_admin",{teamName:r.name}):(0,eO.t)("banner.pro_team_charge_failed.unsuccessful_team_charge.no_admin",{teamName:r.name}),button:l?{buttonText:(0,eO.t)("banner.pro_team_charge_failed.update_payment"),onClick:()=>{null==t||t(nP.$T({view:"teamAdminConsole",teamId:a,teamAdminConsoleViewTab:Lj.I.SETTINGS}))}}:void 0,dismissible:!0}},({state:e,dispatch:t})=>{let n=e.openFile,a=null==n?void 0:n.teamId,r=a?e.teams[a]:null,l=a&&(0,cQ.canAdminTeam)(a,e);if(r&&r.subscription===dV.Qh.NO_MONTHLY_SUB_EDITOR_COUNT_EXCEEDED){let e=l?Q.createElement("span",null,Q.createElement(eO.Tx,{id:"banner.pro_team_no_monthly_sub.over_limit_as_admin.seat_rename",contactSupportLink:Q.createElement("a",{href:`mailto:${(0,eo.W4)()}`},Q.createElement(eO.Tx,{id:"banner.pro_team_no_monthly_sub.contact_support"}))})):Q.createElement("span",null,Q.createElement(eO.Tx,{id:"banner.pro_team_no_monthly_sub.over_team_limit_without_admin.seat_rename",teamName:r.name}));return{id:LX.om.ProTeamNoMonthlySubEditorCountExceeded,bannerType:LX.x1.WARN,icon:L1.A,mainText:(0,eO.t)("banner.pro_team_no_monthly_sub.locked"),description:e,button:l?{buttonText:(0,eO.t)("banner.pro_team_no_monthly_sub.manage_plan"),onClick:()=>{null==t||t(nP.$T({view:"teamAdminConsole",teamId:a,teamAdminConsoleViewTab:Lj.I.SETTINGS}))}}:void 0}}},({state:e,dispatch:t})=>{var n;let a=e.openFile,r=null==a?void 0:a.teamId,l=r?e.teams[r]:null;if(!l||!a)return;let i=(0,cQ.canEditTeam)(l.id,e),o=(0,cK.oc)(l.id,e),s=Lz.ng.canSeeExpiredProTrialBanner(e.userTeamFlags,l,e),c=null==(n=e.userTeamFlags[l.id])?void 0:n[Lz.lg];if(s&&(o||i&&!c)){let n,r,s;return o?(s=LX.x1.WARN_SOFT,n=i?Q.createElement(eO.Tx,{id:"banner.pro_trial_expiry.locked_description",lowerUsageLink:Q.createElement("button",{onClick:e=>{e.preventDefault(),null==t||t(n9.to({type:LZ.I,data:{teamId:l.id}}))}},Q.createElement(eO.Tx,{id:"banner.pro_trial_expiry.lower_usage"})),upgradeLink:Q.createElement(t6.$z,{onClick:n=>{n.preventDefault(),t(LK.WX({teamId:l.id,selectedView:e.selectedView}))}},Q.createElement(eO.Tx,{id:"banner.pro_trial_expiry.upgrade"}))}):Q.createElement(eO.Tx,{id:"banner.pro_trial_expiry.locked_description_for_viewer_on_team",teamName:l.name}),r={buttonText:(0,eO.t)("banner.pro_trial_expiry.move_this_file_cta"),onClick:()=>(0,LY.h)({key:a.key,name:a.name,folder_id:a.folderId,team_id:a.teamId,editor_type:a.editorType,parent_org_id:a.parentOrgId},null,t)}):(s=LX.x1.INFO,n=Q.createElement(eO.Tx,{id:"banner.pro_trial_expiry.expiry_description",teamName:l.name}),r={buttonText:(0,eO.t)("banner.pro_trial_upgrade_cta.upgrade_to_professional"),onClick:()=>t(LK.WX({teamId:l.id,selectedView:e.selectedView}))}),{id:LX.om.ProTrialsExpiryBanner,bannerType:s,icon:L1.A,mainText:(0,eO.t)("banner.pro_trial_expiry.title"),dismissible:!o,onDismiss:o?void 0:()=>{t(tU.bE({all_team_flags:[{team_id:l.id,flags:{[Lz.lg]:!0}}]}))},description:n,button:i?r:void 0}}},({state:e,dispatch:t})=>{var n;let a=null==(n=e.openFile)?void 0:n.teamId,r=a?e.teams[a]:null,l=a&&(0,cQ.canEditTeam)(a,e);if(r&&!(0,cK.n0)(r)&&!r.student_team&&(0,cK.oc)(r.id,e)){let n;return n=l?Q.createElement("span",null,Q.createElement("b",{style:tT.sx.fontSemiBold.$},Q.createElement(eO.Tx,{id:"banner.free_limit_locked.team_locked_over_starter_limits",teamName:r.name})," "),Q.createElement(eO.Tx,{id:"banner.free_limit_locked.upgrade_team_or_lower_usage",teamName:r.name,learnMoreLink:Q.createElement(Q.Fragment,null,Q.createElement("a",{href:"#",onClick:e=>{e.preventDefault(),null==t||t(n9.to({type:LZ.I,data:{teamId:a}}))}},Q.createElement(eO.Tx,{id:"banner.free_limit_locked.learn_more"})))})):Q.createElement("span",null,Q.createElement("b",{style:tT.sx.fontSemiBold.$},Q.createElement(eO.Tx,{id:"banner.free_limit_locked.team_locked_over_starter_limits",teamName:r.name}))," ",Q.createElement(eO.Tx,{id:"banner.free_limit_locked.ask_your_team_admin_for_details"})),{id:LX.om.StarterTeamOverFreeLimitAndLocked,bannerType:LX.x1.WARN,icon:L1.A,mainText:(0,eO.t)("banner.free_limit_locked.locked"),description:n,button:l?{buttonText:(0,eO.t)("banner.free_limit_locked.upgrade_now"),onClick:()=>t(LK.WX({teamId:a,selectedView:e.selectedView}))}:void 0}}},({state:e,dispatch:t})=>{var n;if((0,rt.R$)(e.user,e.currentUserOrgId)){let a=e.orgById[e.user.external_restricted_org_id].name,r=e.openFile,l=!!r&&(null==(n=e.fileByKey[r.key])?void 0:n.viewer_export_restricted);if(a)return{id:LX.om.ExternalContentControlBanner,bannerType:LX.x1.WARN,icon:L1.A,mainText:Q.createElement(eO.Tx,{id:"external_collaboration_restricted.banner.title"}),description:Q.createElement(eO.Tx,{id:"external_collaboration_restricted.banner.restriction_description",organizationName:a}),button:l?void 0:{buttonText:(0,eO.t)("external_collaboration_restricted.banner.export_file"),onClick:()=>{(null==r?void 0:r.editorType)==="design"?t(cM.u1({id:eK.C9})):t(cM.TB({selectionArea:0,canvasArea:0,nodeCounts:{selectionNodeCount:0,canvasNodeCount:0,selectionStickyCount:0,canvasStickyCount:0,selectionTableCount:0,canvasTableCount:0}}))}},dismissible:!1}}},({state:e,dispatch:t})=>{let n=e.openFile;if(e.currentUserOrgId&&(null==n?void 0:n.project)&&(0,uO.n3)(n.project))return{id:LX.om.OrphanedOrgDraftsFile,bannerType:LX.x1.WARN,icon:L1.A,mainText:(0,eO.t)("banner.orphaned_projects.file_in_an_abandoned_project"),description:(0,eO.t)("banner.orphaned_projects.move_to_project"),button:{buttonText:(0,eO.t)("banner.orphaned_projects.back_to_files"),onClick:()=>null==t?void 0:t(nP.$T({view:"recentFiles"}))}}},({state:e,dispatch:t})=>{let n=e.openFile,a=null==n?void 0:n.teamId,r=a?e.teams[a]:null;if(!(e.currentUserOrgId&&(null==n?void 0:n.project)&&(0,uO.n3)(n.project))&&!r&&n&&(0,cK.f4)(n.folderId,n.teamId,e))return{id:LX.om.PersonalProjectDeprecatedFile,bannerType:LX.x1.WARN,icon:L1.A,mainText:(0,eO.t)("banner.personal_projects.locked"),description:Q.createElement(Q.Fragment,null,Q.createElement(eO.Tx,{id:"banner.personal_projects.deprecation_message",learnMoreLink:Q.createElement("a",{href:"/pricing-faq#what-changes-for-me"},Q.createElement(eO.Tx,{id:"banner.personal_projects.learn_more"}))})),button:{buttonText:(0,eO.t)("banner.personal_projects.back_to_files"),onClick:()=>null==t?void 0:t(nP.$T({view:"recentFiles"}))}}},({state:e,context:t})=>{var n,a;let r=e.openFile,l=null==(n=e.openFile)?void 0:n.teamId,i=l?e.teams[l]:null;if(l&&e.user&&i&&!(null==(a=t.workshopInfo)?void 0:a.enabled)&&(null==r?void 0:r.canEditIgnoreEduGracePeriod)&&e.teams[l]&&(0,LD.GU)(e.userEduGracePeriods,(0,LD.cn)(e.user),l,!!e.teams[l].student_team).showAccessRestricted)return{id:LX.om.EduGracePeriodAccessRestricted,bannerType:LX.x1.WARN,icon:L1.A,mainText:(0,eO.t)("banner.edu_grace_period.verification_required"),description:(0,eO.t)("banner.edu_grace_period.editing_restricted_on_file",{teamName:i.name}),button:{buttonText:(0,eO.t)("banner.edu_grace_period.verify_status_button"),onClick:()=>ei.Ay.redirect("/education/apply","_blank")}}},({state:e,context:t})=>{var n,a;let r=e.openFile,l=null==(n=e.openFile)?void 0:n.teamId,i=l?e.teams[l]:null;if(l&&e.user){let n=i&&!(null==(a=t.workshopInfo)?void 0:a.enabled)&&(null==r?void 0:r.canEditIgnoreEduGracePeriod)&&e.teams[l]&&(0,LD.GU)(e.userEduGracePeriods,(0,LD.cn)(e.user),l,!!e.teams[l].student_team).showReminder,o=(0,LD.zR)(e.userEduGracePeriods,l);if(n)return{id:LX.om.EduGracePeriodShowReminder,bannerType:LX.x1.INFO,icon:L$.A,mainText:(0,eO.t)("banner.edu_grace_period.verification_required"),description:(0,eO.t)("banner.edu_grace_period.grace_period_team_reminder",{teamName:i.name,endDate:o}),dismissible:!0,button:{buttonText:(0,eO.t)("banner.edu_grace_period.verify_status_button"),onClick:()=>ei.Ay.redirect("/education/apply","_blank")}}}},({state:e,dispatch:t,context:n})=>{let a=e.openFile,r=n.workshopInfo,l=e.user;if(!(null==r?void 0:r.enabled)||!a||!l)return;let i=!a.isTryFile&&!a.parentOrgId&&a.folderId===l.drafts_folder_id,o=e.userFlags.dismissed_figjam_try_drafts_banner;if(i&&!o){let e=(0,n5.A)(),n=Math.ceil((0,n5.A)(r.until).diff(e,"hours",!0));return{id:LX.om.FigJamTryDraftsBanner,bannerType:LX.x1.INFO,icon:L$.A,mainText:n>1?(0,eO.t)("figjam_try.drafts_banner_title_more_time",{num_hours:n}):(0,eO.t)("figjam_try.drafts_banner_title_1_hour_or_less"),description:(0,eO.t)("figjam_try.drafts_banner_description"),onDismiss:()=>null==t?void 0:t(tB.b({dismissed_figjam_try_drafts_banner:!0})),dismissible:!0,button:{buttonText:(0,eO.t)("figjam_try.move_file"),onClick:()=>(0,LY.h)({key:a.key,name:a.name,folder_id:a.folderId,team_id:a.teamId,editor_type:a.editorType,parent_org_id:a.parentOrgId},null,t)}}}},({state:e,dispatch:t,context:n})=>{let a=e.openFile,r=n.workshopInfo,l=e.user,i=null==a?void 0:a.key,o=!!(null==a?void 0:a.isTryFile),s=e.userFlags.dismissed_figjam_try_claim_banner;if(!o||ec.Ay.isMeetDevice||!l||!(null==r?void 0:r.enabled)||!i||s)return;let c=(0,n5.A)(),d=Math.ceil((0,n5.A)(r.until).diff(c,"hours",!0)),u=()=>{t(LG.Q({file_key:i}))};return{id:LX.om.FigJamTryClaimBanner,bannerType:LX.x1.INFO,icon:L$.A,mainText:d>1?(0,eO.t)("figjam_try_v2.timer_hours_left",{hoursLeft:d}):(0,eO.t)("figjam_try.claim_banner_title_1_hour_or_less"),description:(0,eO.t)("figjam_try_v2.logged_in.after_that_this_board_will_be_deleted"),onDismiss:()=>null==t?void 0:t(tB.b({dismissed_figjam_try_claim_banner:!0})),dismissible:!0,button:{buttonText:(0,eO.t)("figjam_try_v2.claim_file_logged_in"),onClick:()=>u()}}},({state:{openFile:e,figFileDuplicatedFromHubFile:t,hubFiles:n}})=>{if(!e)return;let a=t[e.key];if(!a||!a.isPreview)return;let r=n[a.hubFileId];if(r&&r.monetized_resource_metadata)return{id:LX.om.FreemiumPreviewBanner,bannerType:LX.x1.INFO,icon:L$.A,dismissible:!1,mainText:Q.createElement(L5,{hubFile:r}),description:Q.createElement(L4,{hubFile:r}),button:{type:LX.MA.CUSTOM,element:Q.createElement(L3,{hubFile:r})}}},({state:e,dispatch:t})=>{let n=e.userFlags.dismissed_desktop_download_banner_prompt;if("fullscreen"===e.selectedView.view&&!n&&!wk.eD&&(0,eo.kc)().desktop_download_banner_prompt)return{id:LX.om.DesktopDownloadBanner,bannerType:LX.x1.INFO,icon:L0.A,mainText:(0,eO.t)("banner.desktop_download_title"),description:(0,eO.t)("banner.desktop_download_description"),button:{buttonText:(0,eO.t)("banner.desktop_download_button"),onClick:()=>{ei.Ay.redirect(`/download/desktop/${ec.Ay.mac?"mac":"win"}`,"_blank")}},dismissible:!0,onDismiss:()=>null==t?void 0:t(tB.b({dismissed_desktop_download_banner_prompt:!0}))}}],L7=[L2,({state:e,context:t})=>{var n,a;let r=(0,tZ.P)(e),l=(0,d4.ZT)(e);if((0,sZ.$A)(e.selectedView)&&(null==(n=t.devModeInfo)||!n.canAccessDevMode)&&(null==(a=t.devModeInfo)||!a.isInDevModePaywallRedesignExperiment))return{id:LX.om.DevModePaywallBanner,bannerType:LX.x1.INFO,dismissible:!1,mainText:Q.createElement(LH,null),icon:LQ.A,button:{type:LX.MA.CUSTOM,element:Q.createElement(LU,null)},dataTestId:"dev-mode-paywall-banner",additionalTrackingProperties:{currentPlan:r,teamId:l}}},({state:e,dispatch:t,context:n})=>{var a,r;if((0,sZ.$A)(e.selectedView)&&(null==(a=n.devModeInfo)?void 0:a.isInTrial)&&!e.userFlags.dev_mode_has_dismissed_in_trial_banner&&(null==(r=n.devModeInfo)||!r.isInDevModePaywallRedesignExperiment))return{id:LX.om.DevModeInTrialBanner,bannerType:LX.x1.INFO,dismissible:!0,onDismiss:()=>null==t?void 0:t(tB.b({dev_mode_has_dismissed_in_trial_banner:!0})),mainText:Q.createElement(LV,null),icon:LQ.A,dataTestId:"dev-mode-trial-banner"}}],L8=[({state:e})=>{if(e.showingFileCreationFailureBanner)return{id:LX.om.FileCreationFailureBanner,bannerType:LX.x1.WARN,dismissible:!1,mainText:Q.createElement(eO.Tx,{id:"banner.file_creation_failure.title"}),description:Q.createElement(eO.Tx,{id:"banner.file_creation_failure.description"})}}];(0,eo.b5)()&&L6.push(({state:e})=>{var t;if((null==(t=e.openFile)?void 0:t._name)==="_BANNERTEST PAYMENT")return{id:LX.om.TestWarningBanner,bannerType:LX.x1.WARN,icon:L1.A,mainText:"Payment failed",description:"Our last attempted charge was unsuccessful. Please update your payment source as soon as possible. File editing will be locked after 3 more failed attempts.",button:{buttonText:"Update payment",onClick:()=>{}},dismissible:!0}},({state:e})=>{var t;if((null==(t=e.openFile)?void 0:t._name)==="_BANNERTEST OOM")return{id:LX.om.TestOOMBanner,bannerType:LX.x1.WARN,icon:L1.A,mainText:"80% of memory used",customElem:Q.createElement("div",{className:LJ.DB},Q.createElement(mW,{memoryUsagePercent:80})),description:Q.createElement(Q.Fragment,null,Q.createElement("b",{style:tT.sx.fontSemiBold.$},"This file is almost out of browser memory.")," Remove content to lower memory use to 50% or less. This will ensure you can continue to work in this file safely."),button:{buttonText:"Show memory-reduction tips",onClick:()=>{}}}},({state:e})=>{var t;if((null==(t=e.openFile)?void 0:t._name)==="_BANNERTEST EDU")return{id:LX.om.TestInfoBanner,bannerType:LX.x1.INFO,icon:L$.A,mainText:"File in Education Team",description:"This file is in an Education team. To keep editing this file after 00/00, verify that you're a student or educator.",button:{buttonText:"Verify status",onClick:()=>ei.Ay.redirect("/education/apply","_blank")}}});let L9=vq()((e,t,n,a,r)=>{let l=function(e,t,n){let{openFile:a}=n;if(!a)return Me({state:e,dispatch:t,context:n},L8);let r=a.teamId,l=r?e.teams[r]:null;if(!r||l)return Me({state:e,dispatch:t,context:n},(0,sZ.$A)(e.selectedView)?L7:L6)}(e,t,n);((null==l?void 0:l.id)!==(null==a?void 0:a.id)||(null==l?void 0:l.mainText)!==(null==a?void 0:a.mainText))&&r(l)},1e3,{leading:!0,trailing:!0});function Me(e,t){for(let n of t){let t=n(e);if(t)return t}}function Mt(e){let t=function(e){let[t,n]=(0,Q.useState)(),a=(0,$.wA)(),r=(0,wu.nF)(),l=(0,cV.Mk)(),i=function(){var e,t;let n=(0,t_.tS)()??"",a=(0,eh.Rs)(tf.oBY,{key:n});return{canAccessDevMode:(0,ti._I)(),isInTrial:!!(null==(t=null==(e=a.data)?void 0:e.file)?void 0:t.hasPermission),isInDevModePaywallRedesignExperiment:(0,tm.HV)()}}();return L9((0,$.d4)(e=>e),a,{...e,workshopInfo:r,memoryUsageInfo:l,devModeInfo:i},t,n),Q.useEffect(()=>()=>{L9.cancel()},[]),t}(e.context),n=(0,$.d4)(e=>e.mirror.appModel.showUi),[a,r]=(0,Q.useState)(n&&!!t),l=(null==t?void 0:t.additionalTrackingProperties)||{},i=null==t?void 0:t.id;Q.useEffect(()=>{r(n&&!!i)},[n,i]);let o=(0,mD.lg)(),s=(0,sZ.ks)();if(!a||!t)return Q.createElement(Q.Fragment,null);let c={bannerId:LX.om[t.id],bannerType:t.bannerType,bannerLocation:e.context.location,...l};return Q.createElement(t6.fu,{name:"TopBanner",properties:c},Q.createElement(LM.C,{key:t.id,content:t,onDismiss:()=>r(!1),editorType:s?"dev_handoff":o,dataTestId:t.dataTestId}))}var Mn=n(262712),Ma=n(62981),Mr=n(407023),Ml=n(465223),Mi=n(865328),Mo=n(903398);let Ms=(e,t)=>e.filter(e=>t.get(e));var Mc=((x=Mc||{}).DismissImmediately="dismiss-immediately",x.NoAutoDismiss="no-auto-dismiss",x.StartAutoDismissTimer="start-auto-dismiss-timer",x.noop="no-op",x),Md=n(903684),Mu=n(62573);function Mm({onClose:e,onSummarize:t,onAutoDismiss:n}){let{lastSummarizableSelection:a}=function({onAutoDismiss:e}){let t=(0,Mo.cF)(),[n,a]=(0,Q.useState)(0),r=(0,$.d4)(e=>e.mirror.sceneGraphSelection),l=Q.useMemo(()=>Object.entries(r).filter(([e,t])=>t).map(([e,t])=>e),[r]),[i,o]=(0,Q.useState)([]),s=Q.useMemo(()=>!Ms(i,new tN.qo).length,[i]);return(0,Q.useEffect)(()=>{switch(function({currentAutoDismissTimeoutId:e,stickySummarizationEnabledForSelection:t,lastSummarizableSelectionHasBeenDeleted:n}){return t?"no-auto-dismiss":n?"dismiss-immediately":e?"no-op":"start-auto-dismiss-timer"}({currentAutoDismissTimeoutId:n,stickySummarizationEnabledForSelection:t,lastSummarizableSelectionHasBeenDeleted:s})){case Mc.DismissImmediately:window.clearTimeout(n),a(0),e();break;case Mc.NoAutoDismiss:o(l),window.clearTimeout(n),a(0);break;case Mc.StartAutoDismissTimer:a(window.setTimeout(()=>{e()},1e4))}},[l,t,s,n,e]),{lastSummarizableSelection:i}}({onAutoDismiss:n});(0,Q.useEffect)(()=>{ef.zl.set(Md.EH,e=>e+1),ef.zl.set(Md.ji,()=>new Date().toISOString())},[]);let r=(0,tb.Av)(),{summarizeCanvasSelection:l}=(0,Ma.ss)(eU.cfv.ABOVE,!1),i=(0,Mi.Cb)(),o=(0,e_.Xr)(Mr.v);return Q.createElement(EO.P.div,{initial:{top:-250},animate:{top:r},transition:{duration:.6},className:"ai_summary_nudge--container--Xt3Ld"},Q.createElement("div",{className:"ai_summary_nudge--topContent--EYXY0"},Q.createElement("div",{className:"ai_summary_nudge--topBar--3FRaK"},Q.createElement(aL.E,{fontSize:14,fontWeight:"medium"},Q.createElement(eO.Tx,{id:"whiteboard.ai_summary.nudge.title"})),Q.createElement("div",{className:"ai_summary_nudge--closeButton--2Lr8q"},Q.createElement(aO.Jn,{"data-testid":"close-button",onClick:e}))),Q.createElement("div",null,Q.createElement(aL.E,{fontSize:14,color:"secondary"},Q.createElement(eO.Tx,{id:"whiteboard.ai_summary.nudge.subtitle"}))),Q.createElement("div",{className:"ai_summary_nudge--numberContainer--JqUxZ"},Q.createElement(M_,{num:1}),Q.createElement(M_,{num:2})),Q.createElement(Mp,{"data-testid":"summarize-button",onClick:()=>{eV.wr(),eV.Dh(a),l(),t(),i&&o(!0)},trackingProperties:{text:"summarize"}})),Q.createElement("div",{className:"ai_summary_nudge--middlePerforation--z5eDN"}),Q.createElement("div",{className:"ai_summary_nudge--bottomContent--EiPHE"},Q.createElement("div",null,Q.createElement("span",{className:tw.cx.colorTextTertiary.$},Q.createElement(eO.Tx,{id:"whiteboard.ai_summary.nudge.disclaimer"})),Q.createElement(A3.N,{className:tw.cx.inline.$,href:Ml.nG,target:"_blank",trusted:!0},Q.createElement("span",null," "),Q.createElement(eO.Tx,{id:"whiteboard.inline_menu.ai_quick_actions_dropdown_disclaimer_cta"})))),Q.createElement("div",{className:"ai_summary_nudge--bottomPerforation---VeRC"}))}let Mp=(0,t6.tf)(function({onClick:e}){return Q.createElement(tC.$$,{style:{maxWidth:"initial"},className:"ai_summary_nudge--button--DlY6r",onClick:e,"data-testid":"summarize-button"},Q.createElement("div",{className:"ai_summary_nudge--buttonContents--oUSGP"},Q.createElement(eM.B,{svg:Mu.A,className:"ai_summary_nudge--svgIcon---Lky-"}),Q.createElement(eO.Tx,{id:"whiteboard.ai_summary.nudge.cta"}),Q.createElement("div",{className:"ai_summary_nudge--badgeWrapper--QRaRq"},Q.createElement(Mn.G,{location:"SUMMARIZE_NUDGE",overrideText:(0,eO.t)("whiteboard.inline_menu.ai_quick_actions_beta_badge_text")}))))});function M_({num:e}){let t=184/e;return Q.createElement("div",{className:"ai_summary_nudge--numberGraphic--CnM2r"},Q.createElement(aL.E,{fontSize:14,color:"secondary"},e),Q.createElement("div",{className:"ai_summary_nudge--textPlaceholder--tx2Yp",style:{width:`${t}px`}}))}var Mf=n(389030),Mh=n(646021);function Mg(){let e=(0,$.wA)(),t=(0,ef.md)(Md.ji),n=(0,ef.md)(Md.EH),a=function(){let e=(0,ef.md)(Mf.Bl),t=(0,ef.md)(Md.xo),n=(0,ef.md)(Md.MC),a=(0,ef.md)(Md.ji),r=(0,ef.md)(Md.EH);return Q.useMemo(()=>{if("loaded"!==t.status||"loaded"!==n.status||"loaded"!==e.status||e.data)return(0,eh.gB)({isEligibleToShowUser:!1});let l=new Date(a).getTime()>Date.now()-864e5;return r>=3||t.data||n.data||l?(0,eh.gB)({isEligibleToShowUser:!1}):(0,eh.gB)({isEligibleToShowUser:!0})},[e,t,n,r,a])}(),r=function(){let e=(0,$.d4)(e=>e.mirror.selectionProperties.whiteboardSelectionCanShowAiSummaryNudge),t=function(e=2e3){let t=(0,$.d4)(e=>e.mirror.selectionProperties.whiteboardNumSelected),[n,a]=Q.useState({hasDebounceSettled:!1,numNodesSelected:void 0}),r=(0,hs.A)(e=>{a({hasDebounceSettled:!0,numNodesSelected:e})},e);Q.useEffect(()=>{a({hasDebounceSettled:!1,numNodesSelected:t}),r(t??0)},[r,t]);let l=n.numNodesSelected!==t;return n.hasDebounceSettled&&!l}(),n=Q.useMemo(()=>{if(!t)return!0;let{data:e}=(0,Mh.b7)(new tN.qo);return JSON.stringify(e.map(e=>({t:e.t,id:e.id,type:e.type,stamps:e.stamps}))).length>12e3},[t]);return t&&e&&!n}(),l=(0,$.d4)(e=>e.mirror.selectionProperties.numSelectedByType),{show:i,isShowing:o,complete:s}=(0,tp.e)({overlay:tv.RSb,priority:th.N.SECONDARY_MODAL},[a]);return Q.useEffect(()=>{i({canShow:e=>e.isEligibleToShowUser&&!!r})},[l,i,n,t,r]),Q.createElement(g4.M,{isShowing:o},o&&Q.createElement(t6.fu,{name:Ex.e0.AI_SUMMARY_TOPBAR_NUDGE},Q.createElement(Mm,{onClose:()=>{e(tB.b({[Md.l0]:!0})),s()},onSummarize:()=>{e(tB.b({[Md.zp]:!0})),e(tB.b({[Md.l0]:!0})),s()},onAutoDismiss:()=>{s()}})))}var ME=n(979282),Mv=n(613431),My=n(501727),Mb=n(980058),MC=n(33276);let Mw=(0,tc.r1)(Mb.IR);function MT(){let e=(0,e_.md)(Mv.mp),t=(0,e_.md)(Mv.t),n=(0,e_.md)(Mw),a=(0,e_.md)(t_.yV),r=(0,$.wA)(),{uniqueId:l,isShowing:i,show:o,complete:s}=(0,tp.e)({overlay:tv.B14,priority:th.N.SECONDARY_MODAL},[e,t,n]),c=(0,ME.hn)();return(0,Eo.E)(l,"properties-panel-select-tab",e=>{var t;(null==(t=e.properties)?void 0:t.tab)==="prototype"&&o({canShow:(e,t,n)=>(function(e){let t=Date.now();return e.getTime()<=t-2592e6})(e)&&t&&c()&&!n})}),Q.createElement(de.X,{isShowing:i,title:Q.createElement(eO.Tx,{id:"upsell.advanced_prototyping.title"}),description:Q.createElement(eO.Tx,{id:"upsell.advanced_prototyping.description"}),media:Q.createElement(MC.w,{src:"https://static.figma.com/uploads/30507591ad5cd385aaf75d4a16ef140b74ec821b",aspectRatio:1.75}),primaryCta:{label:Q.createElement(eO.Tx,{id:"upsell.advanced_prototyping.see_plans"}),type:"button",onClick:()=>{var e;r(n9.to({type:mv.V,data:{upsellSource:my.b.ADVANCED_PROTOTYPING_UPSELL,teamId:null==(e=null==a?void 0:a.team)?void 0:e.id,openCheckoutInNewTab:!0,featureList:(0,My.xp)(My.Q1.filter(e=>e!==My.Xj.AUDIO_CONVERSATIONS),My.Xj.ADVANCED_PROTOTYPING)}})),s()},ctaTrackingDescriptor:c5.c.SEE_PLANS},secondaryCta:{label:Q.createElement(eO.Tx,{id:"general.learn_more"}),type:"link",href:"https://help.figma.com/hc/en-us/articles/14506587589399-Use-variables-in-prototypes",ctaTrackingDescriptor:c5.c.LEARN_MORE},trackingContextName:"Advanced Prototype Upsell Popup",userFlagOnShow:Mb.IR,position:dt.Q.BOTTOM_RIGHT,onClose:s})}let Mx="seen_audio_nux",MN=(0,tc.r1)(Mx);function Mk(){let e=(0,ef.md)(MN),t=(0,aD.GS)(),n=(0,tp.e)({overlay:tv.y4J,priority:th.N.SECONDARY_MODAL},[e]);return(0,Eo.E)(n.uniqueId,"Context Viewed",e=>{var t;let a=null==(t=e.properties)?void 0:t.name;"join-call-with-others"===a?n.show({canShow:e=>!e}):"should-close-open-audio-nux"===a&&n.isShowing&&n.complete()}),(0,Eo.E)(n.uniqueId,"Lost DOM Target",()=>{n.isShowing&&n.complete()}),Q.createElement(c9.rq,{isShowing:n.isShowing,userFlagOnShow:Mx,emphasized:!0,title:Q.createElement(eO.Tx,{id:"collaboration.voice.join_the_conversation"}),description:Q.createElement("div",{style:t?{display:"inline"}:void 0},Q.createElement(PQ.OS,null)),targetKey:"audio-nux-key",onClose:n.complete,trackingContextName:"audio_nux_pointer"})}var MS=n(430699),MI=n(331063),MA=n(592806),MP=n(882810),MO=n(787336),ML=n(986987),MM=((N=MM||{})[N.DONT_SHOW=0]="DONT_SHOW",N[N.DEFAULT_TO_SRGB=1]="DEFAULT_TO_SRGB",N[N.DEFAULT_TO_DISPLAY_P3=2]="DEFAULT_TO_DISPLAY_P3",N);let MD={"Export PNG with Color Profile":"867977941678289774"};function MR(){let{plugins:e}=(0,ig.wH)(),t=Object.fromEntries(Object.entries(MD).filter(([t,n])=>Object.values(e).some(e=>e.manifest.id===n)));return Object.keys(t).length>0?t:null}function MF(){let e=(0,ML.Av)();return(0,ML.tK)(e)}let MB=(0,nf.eU)(null),MU="color_management_default_to_p3_modal--onboardingFooter--VSeAU",MH="color_management_default_to_p3_modal--content--FzYUr",MV="seen_color_management_default_to_p3_modal",MG=mM.tO,MK=Eh.O0,MW="color_management_default_to_p3_modal";function Mz(){let e=(0,tp.e)({overlay:tv.t_E,priority:th.N.SURVEY}),{currentStep:t,next:n,back:a}=(0,c4.A)({numSteps:2,onComplete:e.complete}),r=(0,fQ.f)(MV),[l]=(0,MP.jJ)(),i=MF(),o=MR(),[s,c]=(0,ef.fp)(MB),d=(0,MS.jK)(),[u,m]=(0,Q.useState)(!1),[p]=(0,ef.fp)(MA.n$),_=(0,MS.C$)();return Q.useEffect(()=>{r||null!=s||d.colorProfilePreference!==MI.M.DEFAULT||(c(MI.M.DISPLAY_P3),_(MI.M.DISPLAY_P3,{canSeeP3:i,desktopSetting:l,p3Plugins:o}),e.show())},[i,s,l,r,e,o,c,_,d.colorProfilePreference]),(0,Eo.E)(e.uniqueId,ER.kF,()=>{e.isShowing&&0===t&&e.complete()}),(0,Eo.E)(e.uniqueId,Eh.nu,()=>{e.isShowing&&1===t&&e.complete()}),(0,Eo.E)(e.uniqueId,ER.kL,()=>{u||e.isShowing||0!==t||p||(n(),e.show())}),(0,Eo.E)(e.uniqueId,MA.E1,()=>{u||e.isShowing||0!==t||(n(),e.show())}),Q.createElement(c8.U,{currentStep:t,isShowing:e.isShowing},Q.createElement(tg.h,{modalType:tE.q3.ANNOUNCEMENT_POINTER,title:Q.createElement(Q.Fragment,null,Q.createElement(eO.Tx,{id:"fullscreen.color_management.curator.default_to_p3.user_color_profile.title"})),ctaText:Q.createElement(eO.Tx,{id:"general.next"}),onClickPrimaryCta:n,stepCounter:Q.createElement("span",{className:MU},Q.createElement(eO.Tx,{id:"fullscreen.color_management.curator.step_1of2"})),element:Mj,onboardingKey:MG,trackingContextName:MW,userFlagOnShow:MV,isShowing:e.isShowing,onClose:e.complete,onManualDismiss:()=>{e.complete(),m(!0)},width:300}),Q.createElement(tg.h,{modalType:tE.q3.ANNOUNCEMENT_POINTER,title:Q.createElement(Q.Fragment,null,Q.createElement(eO.Tx,{id:"fullscreen.color_management.curator.change_document_color_profile.title"})),ctaText:Q.createElement(eO.Tx,{id:"general.got_it"}),onClickPrimaryCta:()=>{e.complete(),m(!0)},secondaryCtaText:Q.createElement("div",{onClick:a},Q.createElement(eO.Tx,{id:"general.previous"})),preventDismissOnClickSecondaryCta:!0,stepCounter:Q.createElement("span",{className:MU},Q.createElement(eO.Tx,{id:"fullscreen.color_management.curator.step_2of2"})),element:MY,onboardingKey:MK,userFlagOnShow:MV,trackingContextName:MW,isShowing:e.isShowing,onClose:e.complete,onManualDismiss:()=>{e.complete(),m(!0)},width:300}))}function Mj(){return Q.createElement("p",{className:MH},Q.createElement(eO.Tx,{id:"fullscreen.color_management.curator.default_to_p3.user_color_profile.content",colorProfileSetting:Q.createElement("strong",null,Q.createElement(eO.Tx,{id:"fullscreen.color_management.curator.color_profile_setting"}))})," ",Q.createElement("a",{href:MO.s,target:"_blank"},Q.createElement(eO.Tx,{id:"rcs.rcs_shared.learn_more"})))}function MY(){return Q.createElement("p",{className:MH},Q.createElement(eO.Tx,{id:"fullscreen.color_management.curator.change_document_color_profile.content",fileColorProfile:Q.createElement("strong",null,Q.createElement(eO.Tx,{id:"fullscreen.color_management.curator.file_color_profile"}))})," ",Q.createElement("a",{href:MO.s,target:"_blank"},Q.createElement(eO.Tx,{id:"rcs.rcs_shared.learn_more"})))}function MZ(){let[e]=(0,MP.jJ)(),t=MF(),n=MR(),[a,r]=(0,ef.fp)(MB),l=(0,MS.jK)(),i=(0,MS.C$)();return Q.useEffect(()=>{null==a&&l.colorProfilePreference===MI.M.DEFAULT&&(r(MI.M.SRGB),i(MI.M.SRGB,{canSeeP3:t,desktopSetting:e,p3Plugins:n}))},[t,a,e,n,r,i,l.colorProfilePreference]),null}function MX(){let e=function(){let e=(0,MS.jK)().colorProfilePreference!==MI.M.DEFAULT,t=function(){let[e]=(0,MP.jJ)(),t=MF(),n=MR();return t&&n&&["unmanaged","default",null].includes(e)?MI.M.DISPLAY_P3:MI.M.SRGB}(),[n]=(0,ef.fp)(MB);return e&&null===n?0:t===MI.M.SRGB?1:t===MI.M.DISPLAY_P3?2:0}();if(!function(e){let t=(0,ae.aV)(),[n,a]=function(e){let[t,n]=Q.useState(!1),[a,r]=Q.useState(!1);return Q.useEffect(()=>{let e;return a&&(e=setTimeout(()=>{n(!t),r(!1)},2e3)),()=>clearTimeout(e)},[a,t,2e3]),[t,Q.useCallback(()=>r(!0),[])]}(2e3);return Q.useEffect(()=>{t||a()},[t,a]),n}(0))return null;switch(e){case MM.DONT_SHOW:return null;case MM.DEFAULT_TO_SRGB:return Q.createElement(MZ,null);case MM.DEFAULT_TO_DISPLAY_P3:return Q.createElement(Mz,null)}}var Mq=n(840054),MJ=n(818671);function MQ(){var e,t,n;let a=(0,tp.e)({overlay:tv.qnr,priority:th.N.DEFAULT_MODAL}),r=(0,$.wA)(),l=(0,$.Pj)(),i=(0,c6.Fk)((e,t)=>(0,cH.zC)(e,t),l.getState().mirror.appModel.currentPage),o=(0,NM.JU)((0,NM.J3)()),s=!!(null==(e=(0,t_.q5)())?void 0:e.template),c=(0,ae.aV)(),d=!!(0,fQ.f)("seen_custom_template_publish_nudge"),u=null==(n=null==(t=(0,fQ.f)("figjam_editor_onboarded"))?void 0:t.updatedAt)?void 0:n.getTime(),m=!!u&&u<Date.now()-12096e5,p=!c&&!d&&o&&!i&&!s&&m;return((0,Q.useEffect)(()=>{p&&setTimeout(()=>{a.show(),r(tB.b({seen_custom_template_publish_nudge:!0}))},1e3)},[r,a,p]),a.isShowing)?Q.createElement(Mq.i,{step:{modalType:tE.q3.DRAGGABLE,element:MJ.ZH,trackingContextName:"custom_template_publish_nudge",onboardingKey:mM.v4,title:Q.createElement("div",{className:tw.cx.font13.fontMedium.pl8.pt16.pb16.$},Q.createElement(eO.Tx,{id:"whiteboard.inserts.custom_templates_header"})),width:300,disableFooter:!0,hideStepCounter:!0,disableHighlight:!0},onClickPrimaryCta:a.complete,onClose:a.complete,dismissModal:a.complete,dispatch:r}):null}let M$=(0,tc.r1)("seen_desktop_download_modal_prompt"),M0=(0,tc.r1)("seen_desktop_download_modal_prompt_v2"),M1=(0,Mv.tH)("used_desktop_app");function M2(){let e=(0,ef.md)(M$),t=(0,ef.md)(M0),n=(0,ef.md)(Mv.mp),a=(0,ef.md)(M1),{getConfig:r}=(0,eC.I7)("exp_desktop_download_prompts_v2"),l=()=>r().get("should_show_desktop_modal_prompt_v2",!1),{isShowing:i,show:o,complete:s}=(0,tp.e)({overlay:tv.kmj,priority:th.N.DEFAULT_MODAL,experiment:{check:()=>l(),predicate:e=>e,postCheck:e=>!e}},[t,e,n]);if((0,ts.h)(()=>{wk.eD||a||o({canShow:(e,t,n)=>(function(e){let t=Date.now();return e.getTime()<=t-12096e5})(n)&&!t})}),!i)return null;let c=()=>{s()};return Q.createElement(de.X,{isShowing:i,title:Q.createElement(eO.Tx,{id:"desktop_download_modal_prompt.download_the_figma_desktop_app"}),description:Q.createElement(eO.Tx,{id:"desktop_download_modal_prompt.level_up_your_workflow_with_tabs"}),media:Q.createElement(MC.y,{aspectRatio:1.75,alt:"A graphic showing the desktop app with tabs",src:"https://static.figma.com/uploads/cedfb41ea4da3cb80d5d062e5b648aa1d6a5cf1b"}),primaryCta:{label:Q.createElement(eO.Tx,{id:"desktop_download_modal_prompt.get_the_desktop_app"}),type:"button",onClick:()=>{(0,er.sx)("desktop_modal_download_prompt_cta_clicked_v2"),c(),ei.Ay.redirect(`/download/desktop/${ec.Ay.mac?"mac":"win"}`,"_blank")},ctaTrackingDescriptor:c5.c.DESKTOP_APP_DOWNLOAD},trackingContextName:"Desktop Download Modal Prompt",onClose:c,userFlagOnShow:"seen_desktop_download_modal_prompt_v2",position:dt.Q.BOTTOM_RIGHT,secondaryCta:{label:Q.createElement(eO.Tx,{id:"desktop_download_modal_prompt.learn_more"}),type:"link",href:"https://help.figma.com/hc/articles/5601429983767-Guide-to-the-Figma-desktop-app",ctaTrackingDescriptor:c5.c.LEARN_MORE}})}var M5=n(369928),M4=n(290850);let M3="desktop_fullscreen_tabs_hidden_onboarded",M6=(0,tc.r1)(M3);function M7(){let e=(0,ef.md)(M6),t=(0,ef.md)(Mv.mp),n=(0,tp.e)({overlay:tv.Yb4,priority:th.N.DEFAULT_MODAL},[e,t]);return(0,Eo.E)(n.uniqueId,"Desktop Entered Full Screen",()=>{n.show({canShow:(e,t)=>!e&&t.getTime()<new Date("2021-08-01").getTime()})}),Q.createElement(tg.h,{isShowing:n.isShowing,modalType:tE.q3.SELF_CONTAINED,trackingContextName:"Desktop Tab Bar Hidden In Full Screen Pointer",element:M8,userFlagOnShow:M3,onClickPrimaryCta:n.complete,onClose:n.complete,onManualDismiss:n.complete})}function M8(e){let t=(0,$.d4)(M5.C);return Q.createElement(M4.OA,{shouldCenterModal:!0,dismissModal:e.dismissModal,targetKey:"desktop-tab-bar",width:320,ctaText:(0,eO.t)("rcs.desktop_tab_bar_hidden_in_full_screen_pointer.cancel_button"),onClickPrimaryCta:e.dismissModal,topOffset:55,title:(0,eO.t)("rcs.desktop_tab_bar_hidden_in_full_screen_pointer.title"),backgroundColor:t?"#9747FF":""},Q.createElement("p",null,ec.Ay.mac?Q.createElement(eO.Tx,{id:"rcs.desktop_tab_bar_hidden_in_full_screen_pointer.modal_text_for_mac"}):Q.createElement(eO.Tx,{id:"rcs.desktop_tab_bar_hidden_in_full_screen_pointer.modal_text_for_non_mac"})))}var M9=n(103815),De=n(237949),Dt=n(323549),Dn=n(822498),Da=n(482485);function Dr(){let e=(0,$.wA)(),t=(0,d0.dq)(),n=(0,ef.md)((0,tf.syM)({currentOrgId:t})),a=(0,tp.e)({overlay:tv.tWD,priority:th.N.DEFAULT_MODAL},[n]),r=(0,M9.w)(),l=(0,$.d4)(e=>(0,Dt.Cy)(e.mirror)),i=(0,ae.aV)(),o=(0,$.d4)(e=>e.openFile),s=!!(0,fQ.f)("has_seen_feed_first_time_post_overlay"),c=!!(0,fQ.f)("has_visited_feed"),d=Q.useMemo(()=>!i&&!(l.length<Da._)&&!s&&!!c&&!!r&&!!o&&"design"===o.editorType,[l,s,i,c,r,o]);Q.useEffect(()=>{d&&setTimeout(()=>{a.show({canShow:e=>{let{currentUser:{feedPosts:t}}=e;return!t||0===t.length}})},Da.q)},[a,d]);let u=Q.useCallback(()=>{o&&l&&(e((0,n9.to)({type:Dn.g_,data:{fileKey:o.key,initialTab:A7.A5.POST_TO_FEED,source:De.nk.teamFeedNux}})),a.complete())},[a,e,l,o]);return Q.createElement(c9.rq,{isShowing:a.isShowing,targetKey:mM.v4,trackingContextName:"Team feed first time post",title:Q.createElement(eO.Tx,{id:"rcs.feed_onboarding.first_time_post.title"}),description:Q.createElement("p",{"data-testid":"team-feed-first-time-post"},Q.createElement(eO.Tx,{id:"rcs.feed_onboarding.first_time_post.content"})),primaryCta:{label:Q.createElement(eO.Tx,{id:"rcs.feed_onboarding.first_time_post.cta"}),type:"button",onClick:u,ctaTrackingDescriptor:c5.c.DONE},onClose:a.complete,userFlagOnShow:"has_seen_feed_first_time_post_overlay",emphasized:!0})}function Dl(){let e=(0,$.wA)(),t=(0,d0.dq)(),n=(0,ef.md)((0,tf.syM)({currentOrgId:t})),a=(0,tp.e)({overlay:tv.RKk,priority:th.N.DEFAULT_MODAL},[n]),r=(0,M9.w)(),l=(0,$.d4)(e=>(0,Dt.Cy)(e.mirror)),i=(0,ae.aV)(),o=(0,$.d4)(e=>e.openFile),s=!!(0,fQ.f)("has_seen_feed_weekly_prompt_overlay"),c=!!(0,fQ.f)("has_visited_feed"),d=Q.useMemo(()=>!i&&!(l.length<Da._)&&!s&&!!c&&!!r&&!!o&&"design"===o.editorType,[l,s,i,c,r,o]);Q.useEffect(()=>{d&&setTimeout(()=>{a.show({canShow:e=>{let{currentUser:{feedPosts:t}}=e,n=new Date(Date.now()-6048e5);return!!(t&&t.length>0&&t[0].createdAt<n)}})},Da.q)},[a,d]);let u=Q.useCallback(()=>{o&&l&&(e((0,n9.to)({type:Dn.g_,data:{fileKey:o.key,initialTab:A7.A5.POST_TO_FEED,source:De.nk.teamFeedNux}})),a.complete())},[a,e,l,o]);return Q.createElement(c9.rq,{isShowing:a.isShowing,targetKey:mM.v4,trackingContextName:"Team feed weekly prompt",title:Q.createElement(eO.Tx,{id:"rcs.feed_onboarding.weekly_prompt.title"}),description:Q.createElement("p",null,Q.createElement(eO.Tx,{id:"rcs.feed_onboarding.weekly_prompt.content"})),primaryCta:{label:Q.createElement(eO.Tx,{id:"rcs.feed_onboarding.weekly_prompt.cta"}),type:"button",onClick:u,ctaTrackingDescriptor:c5.c.DONE},onClose:a.complete,userFlagOnShow:"has_seen_feed_weekly_prompt_overlay",emphasized:!0})}var Di=n(902047),Do=n(69296);function Ds(){let e=(0,ef.md)(Es.sH),t=(0,tp.e)({overlay:tv.qQF,priority:th.N.SECONDARY_MODAL},[e]);return(0,ts.h)(()=>{t.show({canShow:e=>e})}),Q.createElement(tg.h,{isShowing:t.isShowing,modalType:tE.q3.SELF_CONTAINED,trackingContextName:"FigJam disabled by org",element:Do.oX,onClickPrimaryCta:t.complete,onClose:t.complete,onManualDismiss:t.complete})}var Dc=n(672820),Dd=n(856920),Du=n(536770);function Dm(e){let{jobTitle:t,viewedSidebar:n,setViewedSidebar:a}=e,r=(0,$.wA)(),l=(0,Dc.j)(t);return Q.useMemo(()=>{n||(a(!0),r(gL.En({initialX:0,initialY:0,pinned:S$.t.PINNED_AND_DOCKED_LEFT,initialSelectedCategory:l})))},[r,l,n,a]),Q.createElement(Q.Fragment,null)}function Dp(){let e=(0,at.TA)(),t=(0,$.d4)(e=>e.openFile),n=(0,$.d4)(e=>e.mirror.appModel.currentPage),a=(0,c6.Fk)((e,t)=>(0,cH.zC)(e,t),n),r=(0,$.d4)(e=>!(0,Du.zP)(e.mirror.appModel.currentTool)),l=(0,Du.Uj)(t,e||""),i=(0,tc.Fu)("interacted_figjam_whats_new_v2_cta"),o=(0,ef.md)(i),s=(0,ef.md)(Mv.NT),c=(0,Dd.E)(s,["education"]),d=(0,ef.md)(Es.wg),[u,m]=Q.useState(!1),p=(0,tp.e)({overlay:tv.hsL,priority:th.N.HIGH_PRIORITY_MODAL},[o,s]);(0,ts.h)(()=>{p.show({canShow:e=>(0,Du.SS)(e)&&d&&(0,Du.ZQ)(t)&&a&&!r&&l})});let _=(0,cX.LR)(),f=()=>{_(),p.complete()};return Q.createElement(tg.h,{isShowing:p.isShowing,modalType:tE.q3.SELF_CONTAINED,trackingContextName:"FigJam Templates",element:()=>Q.createElement(Dm,{jobTitle:c,viewedSidebar:u,setViewedSidebar:m}),testId:"figjam_templates_whats_new_overlay",onClickPrimaryCta:p.complete,onClose:f,onManualDismiss:f})}var D_=n(691477),Df=n(566806),Dh=n(747019),Dg=n(1457),DE=n(911060),Dv=n(377372),Dy=n(384890);let Db=(0,aE.Ju)(function(){let e=(0,$.wA)();return Q.createElement(t6.fu,{name:"google_device_try_file_claim_success_modal"},Q.createElement(tS.aF,{disableKeyboardEventPropagation:!0,className:Dy.tQ},Q.createElement("div",{className:Dy.Dg},Q.createElement("img",{className:Dy.Sl,src:"https://static.figma.com/uploads/e94b4d90f07d46f80c5d4d47a16ee2cd8df688bf",alt:""})),Q.createElement(Dg.k0,{multiple:2}),Q.createElement("div",{className:Dy.FS},Q.createElement("h1",{className:Dy.DX},Q.createElement(eO.Tx,{id:"google_device_try_file_modal.claim_success.header"})," ")),Q.createElement(Dg.k0,{multiple:1}),Q.createElement("div",{className:Dy.FS},Q.createElement("div",{className:Dy.Kc},Q.createElement(eO.Tx,{id:"google_device_try_file_modal.claim_success.description"}))),Q.createElement(Dg.k0,{multiple:3}),Q.createElement(nc.nD,{type:"close",fullWidth:!0,onClick:t=>{t.preventDefault(),t.stopPropagation(),e(n9.Ce())}},Q.createElement(eO.Tx,{id:"google_device_try_file_modal.claim_success.button"}))))},"GOOGLE_DEVICE_TRY_FILE_CLAIM_SUCCESS_MODAL");var DC=n(626869),Dw=n(248228);let DT=(0,Dw.nF)((e,{fileKey:t,emailAddress:n,isResentEmail:a,onSuccess:r},{loadingKey:l})=>{let i=w1.L.setClaimEmail({fileKey:t,emailAddress:n});(0,DC.N)(i,e,l),i.then(()=>{if(a){e.dispatch(eL.F.enqueue({message:(0,eO.t)("google_device_try_file_modal.resent_email.visual_bell")}));return}null==r||r(n)}).catch(t=>{var n;if((null==(n=t.data)?void 0:n.message)==="Hit Claim Email Job timeout lock"){e.dispatch(eL.F.enqueue({message:(0,eO.t)("google_device_try_file_modal.resent_email.email_resent")}));return}e.dispatch(Dv.s.error((0,eO.t)("google_device_try_file_modal.enter_email.failed_to_send")))})}),Dx=(0,Dw.nF)((e,{fileKey:t},{loadingKey:n})=>{let a=w1.L.claimDeviceFile({fileKey:t});(0,DC.N)(a,e,n),a.then(()=>{e.dispatch(n9.to({type:Db,data:{}}))}).catch(t=>{e.dispatch(Dv.s.error((0,eO.t)("google_device_try_file.save_board.generic_error")))})}),DN="figjam_try_confirm_save_steps--descriptionBold--ou7xj";function Dk({dismissModal:e}){let t=(0,$.wA)(),n=(0,t_.tS)(),a=(0,$.d4)(e=>{var t;return null==(t=e.user)?void 0:t.email_validated_at}),r=(0,$.d4)(e=>n?e.loadingState[LG.Q.loadingKeyForPayload({file_key:n})]:null),l=(0,$.d4)(e=>n?e.loadingState[Dx.loadingKeyForPayload({fileKey:n})]:null),i=(0,D_.s)(),o=(0,Nj.Kx)(),s=r===Dh.r.LOADING||"loading"===i.status||l===Dh.r.LOADING,c=r===Dh.r.SUCCESS||l===Dh.r.SUCCESS;(0,Q.useEffect)(()=>{c&&(e(),(null==o?void 0:o.updateFigJamTrySaveStatus)&&o.updateFigJamTrySaveStatus(Lf.Fl.SAVED))},[c,e,o]);let d=(0,Nj.pt)();if((0,Q.useEffect)(()=>{d&&(d._claim_fig_jam_try_file=e=>{t(LG.Q({file_key:e}))})},[d,t]),(0,Q.useEffect)(()=>{(null==o?void 0:o.updateFigJamTrySaveStatus)&&n&&a&&o.updateFigJamTrySaveStatus(Lf.Fl.REQUESTED)},[o,n,a]),!n||!a)return null;let u=(0,n5.A)(a).isAfter((0,n5.A)().subtract(5,"minutes"));return Q.createElement("div",{className:"figjam_try_confirm_save_steps--modalContent--DezcS"},Q.createElement("div",{className:"figjam_try_confirm_save_steps--textContent--9da6-"},Q.createElement("h1",{className:"figjam_try_confirm_save_steps--headline--RRPzl text--fontPos20--Bcz97 text--_fontBase--QdLsd"},Q.createElement(eO.Tx,{id:"figjam_try.save_modal.headline"})),Q.createElement(Dg.k0,{multiple:1}),Q.createElement("p",{className:"figjam_try_confirm_save_steps--description--bpGw9 text--fontPos13--xW8hS text--_fontBase--QdLsd"},u?Q.createElement(eO.Tx,{id:"figjam_try.save_modal.new_team"}):Q.createElement(eO.Tx,{id:"figjam_try.save_modal.save_one_team",share:Q.createElement("p",{className:DN},Q.createElement(eO.Tx,{id:"figjam_try.save_modal.share"})),file_duplicate:Q.createElement("p",{className:DN},Q.createElement(eO.Tx,{id:"figjam_try.save_modal.file_duplicates"}))})),Q.createElement(Dg.k0,{multiple:3}),Q.createElement(nc.nD,{onClick:()=>{var e;"loaded"===i.status&&void 0!==(0,eh.oA)(null==(e=i.data)?void 0:e.deviceTryFile)?t(Dx({fileKey:n})):t(LG.Q({file_key:n}))},disabled:s,fullWidth:!0,trackingProperties:{buttonContext:"Let\u2019s jam"}},Q.createElement(DE.x,{isLoading:s},()=>Q.createElement(eO.Tx,{id:"figjam_try.save_modal.cta"})))))}function DS(){let e=(0,tp.e)({overlay:tv.JGK,priority:th.N.HIGH_PRIORITY_MODAL}),t=(0,ef.md)(t_.yV),n=null==t?void 0:t.isTryFile,a=(0,Nj.Kx)(),r=(0,D_.s)(),[l,i]=Q.useState(!1);return(0,Q.useEffect)(()=>{e.isShowing&&!n&&(e.complete(),(null==a?void 0:a.updateFigJamTrySaveStatus)&&a.updateFigJamTrySaveStatus(Lf.Fl.SAVED))},[n,e,a]),(0,Q.useEffect)(()=>{var t;let o=(0,Df.QL)(mM.ao.key)===mM.ao.value;if("loaded"!==r.status)return;let s=void 0!==(0,eh.oA)(null==(t=r.data)?void 0:t.deviceTryFile);o&&s&&!l?(e.show(),i(!0)):o&&n&&!s?(e.show(),(null==a?void 0:a.updateFigJamTrySaveStatus)&&a.updateFigJamTrySaveStatus(Lf.Fl.REQUESTED)):o&&!n&&(null==a?void 0:a.updateFigJamTrySaveStatus)&&a.updateFigJamTrySaveStatus(Lf.Fl.SAVED)},[e,n,r,l,a]),Q.createElement(tg.h,{isShowing:e.isShowing,trackingContextName:"Figjam Try Confirm Save Modal",modalType:tE.q3.WELCOME,element:({dismissModal:e})=>Q.createElement(Dk,{dismissModal:e}),onClickPrimaryCta:e.complete,onClose:e.complete,onManualDismiss:e.complete})}tE.q3.WELCOME,({dismissModal:e})=>Q.createElement(Dk,{dismissModal:e});var DI=n(37625);let DA="figjam_try_confirm_save--textContainer--9YaF4";function DP(){let[e,t]=Q.useState(!1),{show:n,isShowing:a,complete:r}=(0,tp.e)({overlay:tv.XAb,priority:th.N.HIGH_PRIORITY_MODAL}),l=(0,ef.md)(t_.yV),i=null==l?void 0:l.isTryFile,o=(0,D_.s)(),s=(0,Df.QL)(mM.ao.key)===mM.ao.value,c=(0,ef.md)(DI.N);return(0,Q.useEffect)(()=>{var t,a,r,l;!e&&s&&!i&&"loaded"===o.status&&(null==(a=(0,eh.oA)(null==(t=o.data)?void 0:t.deviceTryFile))?void 0:a.claimedAt)&&(null==(l=(0,eh.oA)(null==(r=o.data)?void 0:r.deviceTryFile))?void 0:l.claimedByUserId)!==c.data&&n()},[e,i,s,o,n,c]),Q.createElement(g4.M,{isShowing:a},Q.createElement(DO,{onClose:()=>{r(),t(!0)}}))}function DO(e){return Q.createElement(t6.fu,{name:"figjam_try_device_already_claimed_overlay"},Q.createElement(tS.aF,{onHide:e.onClose,disableKeyboardEventPropagation:!0,className:"figjam_try_confirm_save--googleTryDeviceAlreadyClaimedModal--T7bRi"},Q.createElement("div",{className:DA},Q.createElement("h1",{className:"figjam_try_confirm_save--googleTryDeviceAlreadyClaimedHeader--vNLRA text--fontPos20--Bcz97 text--_fontBase--QdLsd"},Q.createElement(eO.Tx,{id:"figjam_try.already_claimed_modal.header"}))),Q.createElement(Dg.k0,{multiple:1}),Q.createElement("div",{className:DA},Q.createElement("div",{className:"figjam_try_confirm_save--googleTryDeviceAlreadyClaimedDescription--WXdx- text--fontPos13--xW8hS text--_fontBase--QdLsd"},Q.createElement(eO.Tx,{id:"figjam_try.already_claimed_modal.description",file_duplicate:Q.createElement("p",{className:"figjam_try_confirm_save--googleTryDeviceAlreadyClaimedDescriptionBold--CZgl4"},Q.createElement(eO.Tx,{id:"figjam_try.already_claimed_modal.file_duplicate"}))}))),Q.createElement(Dg.k0,{multiple:3}),Q.createElement(nc.nD,{type:"close",fullWidth:!0,onClick:e.onClose},Q.createElement(eO.Tx,{id:"figjam_try.already_claimed_modal.continue"}))))}var DL=n(170095),DM=n(178782);let DD=(0,tc.r1)(DL.USER_FLAG_V2),DR=(0,Mv.tH)("last_figjam_at"),DF=(0,tc.r1)("dont_show_figjam_updates_in_figma_design");function DB(){let e=(0,ef.md)(DF),t=(0,ef.md)(Es.wg),n=(0,ef.md)(Mv.mp),a=(0,ef.md)(DR),r=(0,ef.md)(DD),l=(0,ef.md)(Mv.NT),i=(0,ef.md)(Mv.Ot),o=(0,cJ.jO)(),s=(0,tp.e)({overlay:tv.Ttn,priority:th.N.DEFAULT_MODAL},[e,n,r,i,l]);return(0,ts.h)(()=>{s.show({canShow:(e,n,r,l)=>{if(e||l)return!1;let i=(0,Dd.f)({userCreatedAt:n,lastUsedFigjamDate:a,hasSeenOverlayV2:r});return(!t||o)&&i}})}),Q.createElement(DM.A,{context:"editor",jobTitle:(0,Dd.E)(l,["education"]),isShowing:s.isShowing,onClickPrimaryCta:s.complete,onClose:s.complete,onManualDismiss:s.complete})}var DU=n(832181);let DH=(0,gp.bt)(e=>e.userAnalyticsData);var DV=n(926581);let DG=(0,nf.eU)(!1);var DK=n(456804),DW=n(272583);let Dz="gen1_design_onboarding--navigationModal--7yIMU",Dj="gen1_design_onboarding--topbar--zFow3",DY="gen1_design_onboarding--modalContents--1tk2v",DZ="gen1_design_onboarding--selectedOption--R73uD",DX="gen1_design_onboarding--unselectedOption--eNh-q",Dq="gen1_design_onboarding--closeButton--ieOv1";function DJ(e){let{currStepNum:t,totalNumSteps:n,primaryCtaText:a,onClickPrimaryCta:r}=e,l=`${t} of ${n}`;return Q.createElement("div",{className:"gen1_design_onboarding--bottomRow--x6Q0-"},Q.createElement("div",{className:tw.cx.colorTextSecondary.fontMedium.$},l),Q.createElement("div",{className:tw.cx.flex.gap8.$},e.secondaryCtaText&&Q.createElement(nc.tM,{onClick:e.onSecondaryCtaClick},e.secondaryCtaText),Q.createElement(nc.vd,{onClick:r},a)))}function DQ(e){let[t,n]=(0,Q.useState)(DW.fp.MOUSE),a=(0,$.wA)();return Q.createElement(vR.wz,null,Q.createElement("div",{className:Dz},Q.createElement("div",{className:Dj},Q.createElement(aO.Jn,{onClick:()=>{e.dismissModal(),a(tB.b({dismissed_gen1_design_onboarding_navigation:!0}))},className:Dq}),Q.createElement("button",{className:ea()(tw.cx.pt12.pb12.pl16.pr16.$,{[DZ]:t===DW.fp.MOUSE,[DX]:t!==DW.fp.MOUSE}),onClick:()=>n(DW.fp.MOUSE)},Q.createElement(eO.Tx,{id:"tooltips_plus_onboarding.mouse"})),Q.createElement("button",{className:ea()(tw.cx.pt12.pb12.pl16.pr16.$,{[DZ]:t===DW.fp.TRACKPAD,[DX]:t!==DW.fp.TRACKPAD}),onClick:()=>n(DW.fp.TRACKPAD)},Q.createElement(eO.Tx,{id:"tooltips_plus_onboarding.trackpad"}))),Q.createElement("div",{className:DY},Q.createElement("h1",{className:tw.cx.fontMedium.font13.$},Q.createElement(eO.Tx,{id:"gen1_design_onboarding.take_a_look_at_your_first_figma_file"})),Q.createElement(nc.Kz,{multiple:1.5,direction:"y"}),Q.createElement(DW.Vr,{peripheral:t}),Q.createElement(nc.Kz,{multiple:2,direction:"y"}),Q.createElement(DW.jD,{peripheral:t}),Q.createElement(nc.Kz,{multiple:3,direction:"y"}),Q.createElement(DJ,{currStepNum:e.currStepNum,totalNumSteps:e.totalNumSteps,onClickPrimaryCta:()=>{e.onClickPrimaryCta(),a(tB.b({dismissed_gen1_design_onboarding_navigation:!0}))},primaryCtaText:(0,eO.t)("general.next")}))))}let D$=[function({isShowing:e,onClickPrimaryCta:t,onClose:n,currStepNum:a,totalNumSteps:r}){return Q.createElement(g4.M,{isShowing:e,userFlagOnShow:"seen_gen1_design_onboarding_navigation"},Q.createElement(t6.fu,{name:"Gen 1 Design Onboarding - Navigation"},Q.createElement(DQ,{currStepNum:a,totalNumSteps:r,onClickPrimaryCta:t,dismissModal:n})))},function({isShowing:e,onClickPrimaryCta:t,onClickSecondaryCta:n,onClose:a,totalNumSteps:r,currStepNum:l}){let i=(0,ae.dH)();return(0,ts.h)(()=>{i!==eU.NLJ.COMMENTS&&lT.Y5.triggerAction("set-tool-comments")}),Q.createElement(c9.rq,{isShowing:e,title:Q.createElement(eO.Tx,{id:"gen1_design_onboarding.so_what_do_you_think"}),description:Q.createElement(eO.Tx,{id:"gen1_design_onboarding.leave_a_comment_anywhere_in_the_canvas_to_give_feedback_ask_questions_or_mention_someone"}),targetKey:"comment",trackingContextName:"Gen 1 Design Onboarding - Comments",userFlagOnShow:"seen_gen1_design_onboarding_comments",onClose:a,primaryCta:{label:Q.createElement(eO.Tx,{id:"general.next"}),type:"button",onClick:t,ctaTrackingDescriptor:c5.c.NEXT},secondaryCta:{label:Q.createElement(eO.Tx,{id:"general.back"}),type:"button",onClick:()=>{lT.Y5.triggerAction("set-tool-default"),n()},ctaTrackingDescriptor:c5.c.BACK},stepCounter:{stepNum:l,totalNumSteps:r},disableHighlight:!0})},function({isShowing:e,onClickPrimaryCta:t,onClickSecondaryCta:n,onClose:a,totalNumSteps:r,currStepNum:l}){let i={isShowing:e,title:Q.createElement(eO.Tx,{id:"gen1_design_onboarding.see_what_else_your_team_is_up_to"}),description:Q.createElement(eO.Tx,{id:"gen1_design_onboarding.head_to_the_top_corner_and_select_back_to_files_to_browse_your_team_s_other_projects"}),trackingContextName:"Gen 1 Design Onboarding - File Browser",primaryCta:{label:Q.createElement(eO.Tx,{id:"general.got_it"}),type:"button",onClick:t,ctaTrackingDescriptor:c5.c.GOT_IT},secondaryCta:{label:Q.createElement(eO.Tx,{id:"general.back"}),type:"button",onClick:n,ctaTrackingDescriptor:c5.c.BACK},onClose:a,stepCounter:{stepNum:l,totalNumSteps:r}};if(wk.eD){let e=ec.Ay.mac?{top:10,left:75}:{top:10,left:21};return Q.createElement(c9.rq,{...i,fixedPosition:!0,location:{...e,pointerOffset:16,pointerPosition:DK.F_.TOP}})}return Q.createElement(c9.rq,{...i,targetKey:mM.tO,disableHighlight:!0})}];function D0(){let{getConfig:e}=(0,eC.I7)("exp_gen1_design_onboarding_async"),t=(0,tp.e)({overlay:tv.ZxA,priority:th.N.HIGH_PRIORITY_MODAL-1,experiment:{check:()=>e().get("show_onboarding",!1),predicate:e=>e,postCheck:()=>!0}}),n=(0,Q.useCallback)(()=>{t.complete()},[t]),a=(0,c4.A)({numSteps:D$.length,onComplete:n});(0,Eo.E)(t.uniqueId,"Context Viewed",e=>{var t;(null==(t=e.properties)?void 0:t.name)==="Editor > Toolbar > Editor Menu"&&a.currentStep===D$.length-1&&n()}),(0,ts.h)(()=>{t.isShowing||t.show()});let r=(0,Q.useMemo)(()=>D$.map((e,t)=>Q.createElement(e,{onClickPrimaryCta:a.next,onClickSecondaryCta:a.back,onClose:n,isShowing:!0,currStepNum:t+1,totalNumSteps:D$.length})),[n,a]);return t.isShowing?Q.createElement(c8.U,{currentStep:a.currentStep,isShowing:t.isShowing,children:r}):null}function D1({onClose:e,advanceStep:t,isShowing:n}){let a=(0,ae.dH)();return(0,Q.useEffect)(()=>{a===eU.NLJ.COMMENTS&&t()},[t,a]),Q.createElement(c9.rq,{onClose:e,description:Q.createElement("div",{className:tw.cx.font13.fontMedium.lh18.$},Q.createElement(eO.Tx,{id:"gen1_design_onboarding_sync.leave_comments_and_mention_others"})),trackingContextName:"Gen 1 Design Onboarding Sync \u2014 Comment",targetKey:"comment",isShowing:n,emphasized:!0,shouldCenterArrow:dn.EL.FALLBACK,clickOutsideToHide:!1,width:320,highlightBlue:!0})}function D2({overlay:e,onClose:t,advanceStep:n,isShowing:a}){let r=(0,$.wA)(),l=(0,Q.useCallback)(()=>{r(tB.b({dismissed_gen1_design_onboarding_sync_follow:!0})),n()},[n,r]),i=(0,ef.md)(DU.th),o=i?i.length:0;return(0,Eo.E)(e.uniqueId,"start_following",()=>{l()}),(0,Q.useEffect)(()=>{0===o&&l()},[l,o]),Q.createElement(c9.rq,{onClose:e=>{r(tB.b({dismissed_gen1_design_onboarding_sync_follow:!0})),t(e)},description:Q.createElement("div",{className:tw.cx.font13.fontMedium.lh18.$},Q.createElement(eO.Tx,{id:"gen1_design_onboarding_sync.follow_teammates_in_this_file"})),trackingContextName:"Gen 1 Design Onboarding Sync \u2014 Follow",targetKey:o>1?"multiplayer-avatars":"multiplayer-observation-nux-key",isShowing:a,emphasized:!0,shouldCenterArrow:dn.EL.FALLBACK,userFlagOnShow:"seen_gen1_design_onboarding_sync_follow",clickOutsideToHide:!1,width:249,...o>1?{disableHighlight:!0}:{highlightBlue:!0}})}function D5({onClose:e}){let[t,n]=(0,Q.useState)(DW.fp.MOUSE);return Q.createElement(vR.wz,null,Q.createElement("div",{className:Dz},Q.createElement("div",{className:Dj},Q.createElement(aO.Jn,{onClick:e,className:Dq}),Q.createElement("button",{className:ea()(tw.cx.pt12.pb12.pl16.pr16.$,{[DZ]:t===DW.fp.MOUSE,[DX]:t!==DW.fp.MOUSE}),onClick:()=>n(DW.fp.MOUSE)},Q.createElement(eO.Tx,{id:"tooltips_plus_onboarding.mouse"})),Q.createElement("button",{className:ea()(tw.cx.pt12.pb12.pl16.pr16.$,{[DZ]:t===DW.fp.TRACKPAD,[DX]:t!==DW.fp.TRACKPAD}),onClick:()=>n(DW.fp.TRACKPAD)},Q.createElement(eO.Tx,{id:"tooltips_plus_onboarding.trackpad"}))),Q.createElement("div",{className:DY},Q.createElement(DW.Vr,{peripheral:t}),Q.createElement(nc.Kz,{multiple:2,direction:"y"}),Q.createElement(DW.jD,{peripheral:t}))))}function D4({onClose:e,advanceStep:t,isShowing:n}){return Q.createElement(g4.M,{isShowing:n},Q.createElement(t6.fu,{name:"Gen 1 Design Onboarding Sync \u2014 Navigation"},Q.createElement(D5,{onClose:e})))}function D3({setOnboardingToAsync:e}){let{getConfig:t}=(0,eC.I7)("exp_gen1_design_onboarding_sync"),n=(0,tp.e)({overlay:tv.uUL,priority:th.N.HIGH_PRIORITY_MODAL-1,experiment:{check:()=>t().get("show_onboarding",!1),predicate:t=>(t||e(),t),postCheck:()=>!0}}),a=(0,Q.useCallback)(()=>{n.complete()},[n]),r=!!(0,fQ.f)("has_panned_in_design_file"),l=!!(0,fQ.f)("has_zoomed_in_design_file"),i=(0,c4.A)({numSteps:r&&l?2:3,onComplete:a});return((0,ts.h)(()=>{n.isShowing||n.show()}),n.isShowing)?0===i.currentStep?Q.createElement(D2,{overlay:n,isShowing:n.isShowing,advanceStep:i.next,onClose:a}):1===i.currentStep?Q.createElement(D1,{isShowing:n.isShowing,advanceStep:i.next,onClose:a}):Q.createElement(D4,{isShowing:n.isShowing,advanceStep:i.next,onClose:a}):null}var D6=((k=D6||{}).SYNC="sync",k.ASYNC="async",k);function D7(){let[e,t]=(0,Q.useState)(null),n=(0,ef.md)(t_.yV),a=(0,ef.md)(DV.kS),r=(null==n?void 0:n.creatorId)===a,l=!!(0,fQ.f)("not_gen_0"),i=!!(0,fQ.f)("dismissed_gen1_design_onboarding_navigation"),o=!!(0,fQ.f)("dismissed_gen1_design_onboarding_sync_follow"),s=!!(0,fQ.f)("seen_gen1_design_onboarding_navigation"),c=!!(0,fQ.f)("seen_gen1_design_onboarding_sync_follow"),d=(0,at.J$)(),u=(0,n5.A)().subtract(7,"day").isBefore((0,n5.A)(d)),m=(0,ef.md)(DH),p=(0,ef.md)(DG)&&(null==m?void 0:m.first_design_at)==null,_=l&&!r&&u&&!(i||o)&&(p||s||c),f=(0,ef.md)(DU.th);if((0,Q.useEffect)(()=>{_&&null===e&&void 0!==f&&(f.length>0&&!s?t("sync"):c||t("async"))},[e,_,f,s,c]),null!==e)switch(e){case"sync":return Q.createElement(D3,{setOnboardingToAsync:()=>{t("async")}});case"async":return Q.createElement(D0,null)}return null}var D8=n(672649),D9=n(2972);let Re="dismissed_local_component_asset_panel_pointer",Rt=(0,tc.r1)(Re);function Rn(){let e=(0,$.wA)(),t=(0,at.TA)(),n=(0,ef.md)(Es.wg),a=(0,ef.md)(Rt),r=(0,ef.md)(Es.NZ),l=(0,ef.md)(Es.pQ),i=(0,ef.md)(Mv.t),o=(0,ef.md)(Es.JM),s=(0,$.d4)(e=>{var t;return(null==(t=e.openFile)?void 0:t.teamId)==null}),{isShowing:c,show:d,complete:u,uniqueId:m}=(0,tp.e)({overlay:tv.Smd,priority:th.N.SECONDARY_MODAL,experiment:{check:()=>(0,cY.Hz)(t??void 0),predicate:e=>e,postCheck:e=>!e}},[a,i,l,o]),p=(0,Q.useCallback)(()=>{n&&d({canShow:(e,t,n,a)=>a&&t&&(n||r)})},[n,r,d]),_=(0,Q.useCallback)(()=>{c&&(u(),e(tB.b({[Re]:!0})))},[e,u,c]);return(0,Eo.E)(m,"action_create_symbol",p),(0,Eo.E)(m,"component_instance_inserted",_),Q.createElement(c9.rq,{isShowing:c,targetKey:mM.Qr,description:s?Q.createElement(eO.Tx,{id:"design_systems.assets_panel.drag_drop_component_draft"}):Q.createElement(eO.Tx,{id:"design_systems.assets_panel.drag_drop_component"}),primaryCta:{label:Q.createElement(eO.Tx,{id:"design_systems.assets_panel.got_it"}),type:"button",onClick:_,ctaTrackingDescriptor:c5.c.GOT_IT},onClose:_,trackingContextName:"Local Component Asset Panel Pointer",arrowPosition:DK.F_.LEFT_TITLE,emphasized:!0})}var Ra=n(822061);let Rr=(0,tc.r1)("seen_mobile_comment_download_modal_prompt");function Rl(){let e=(0,$.wA)(),t=(0,ef.md)(Rr),n=(0,$.d4)(e=>{var t;return null==(t=e.userAnalyticsData)?void 0:t.is_active_mobile_user}),a=(0,$.d4)(e=>{var t;return null==(t=e.user)?void 0:t.created_at}),r=(0,n5.A)(a).add(14,"day").isSameOrAfter((0,n5.A)()),{isShowing:l,show:i,complete:o,uniqueId:s}=(0,tp.e)({overlay:tv.H2x,priority:th.N.DEFAULT_MODAL},[t]);if((0,Eo.E)(s,Ra.w,(0,Q.useCallback)(()=>{i({canShow:e=>!!(0,eo.kc)().mobile_download_modal_prompts&&!e&&!r&&!n})},[i,n,r])),!l)return null;let c=()=>{i1.Ay.post("/api/send_mobile_download_email",{type:"comment"}),(0,er.sx)("post_comment_mobile_app_download_prompt_email_me_cta_clicked"),o(),e(eL.F.enqueue({message:(0,eO.t)("rcs.mobile_comment_reply_upsell.email_sent")}))};return Q.createElement(de.X,{isShowing:l,title:Q.createElement(eO.Tx,{id:"mobile_download_prompts.never_miss_a_comment"}),description:Q.createElement(eO.Tx,{id:"mobile_download_prompts.scan_the_qr_code"}),media:Q.createElement(MC.y,{aspectRatio:1.75,alt:"A graphic show mobile comments with a qr code",src:"https://static.figma.com/uploads/6c270bb31fb5af03393425b7f0a6462ec59d04ab"}),primaryCta:{label:Q.createElement(eO.Tx,{id:"mobile_download_prompts.email_me"}),type:"button",onClick:()=>c(),ctaTrackingDescriptor:c5.c.MOBILE_APP_DOWNLOAD_COMMENT_PROMPT_CLICKED},trackingContextName:"Mobile Comment Download Modal Prompt",onClose:()=>{o()},userFlagOnShow:"seen_mobile_comment_download_modal_prompt",position:dt.Q.BOTTOM_RIGHT,secondaryCta:{label:Q.createElement(eO.Tx,{id:"mobile_download_prompts.learn_more"}),type:"link",href:"https://help.figma.com/hc/en-us/articles/1500007537281-Guide-to-the-Figma-mobile-app",ctaTrackingDescriptor:c5.c.LEARN_MORE}})}var Ri=n(783159),Ro=n(184799),Rs=n(70259),Rc=n(448119);function Rd(e){return Q.createElement("div",{className:"connector_modal_wrapper--connectorModalWrapper--uCUjA"},e.children)}var Ru=n(292910),Rm=n(905884);let Rp="onboard_figjam_viewer--contentContainer--t9zim",R_="onboard_figjam_viewer--imageContainer--rvqD8",Rf="onboard_figjam_viewer--image--ZdwAA",Rh="onboard_figjam_viewer--mainContent--8TgvP text--fontPos12Whyte---tkNx text--_fontBaseWhyte--efAjI",Rg="onboard_figjam_viewer--normal--HjE2J",RE="onboard_figjam_viewer--bold--kC3mV";class Rv extends Q.PureComponent{render(){return Q.createElement("div",{className:Rp},Q.createElement("div",{className:R_},Q.createElement("span",{className:"onboard_figjam_viewer--imgHelper--SJXYZ","aria-hidden":"true"}),Q.createElement("img",{className:Rf,src:this.props.imgSrc,alt:""})),Q.createElement("div",{className:ea()({[Rh]:!0,[Rg]:!this.props.isBold,[RE]:!!this.props.isBold})},this.props.titleText&&Q.createElement("div",{className:"onboard_figjam_viewer--title--k1Gpk"},this.props.titleText),Q.createElement("div",{className:"onboard_figjam_viewer--text--xkcTB"},this.props.bodyText),Q.createElement("div",{className:"onboard_figjam_viewer--bottomContentRow--PgTeU"},Q.createElement("div",{className:ea()({"onboard_figjam_viewer--secondaryText--THVcI":!0,[Rg]:!this.props.isBold,[RE]:!!this.props.isBold})},this.props.steps?Q.createElement(eO.Tx,{id:"rcs.rcs_shared.step_counter",currentStepNum:this.props.steps.current,totalNumSteps:this.props.steps.total}):Q.createElement(Q.Fragment,null)),Q.createElement(nc.vd,{className:ea()({"onboard_figjam_viewer--ctaButton--aFKKt text--fontPos12Whyte---tkNx text--_fontBaseWhyte--efAjI":!0,[RE]:!!this.props.isBold}),onClick:this.props.onNext,autoFocus:!0},this.props.buttonText,!this.props.buttonText&&this.props.steps&&this.props.steps.current===this.props.steps.total&&Q.createElement(eO.Tx,{id:"rcs.rcs_shared.done"}),!this.props.buttonText&&this.props.steps&&this.props.steps.current<this.props.steps.total&&Q.createElement(eO.Tx,{id:"rcs.figjam_onboarding.next"})))),Q.createElement(aO.Jn,{className:ea()({"onboard_figjam_viewer--closeButton--hm43f close_button--closeX--Bc-63":!0,[Rg]:!this.props.isBold,[RE]:!!this.props.isBold}),onClick:this.props.onDismiss,innerText:"close",svg:hW.default}))}}Rv.displayName="FigJamOnboardingModal";var Ry=n(151638);function Rb(e){let t=(0,Rm.O)();(0,Q.useEffect)(()=>(lT.Y5.triggerAction("set-tool-hand",null),()=>lT.Y5.triggerAction("set-tool-default",null)),[]),(0,Q.useEffect)(()=>(t({eventName:"hand_tooltip_shown"}),()=>t({eventName:"pan_zoom_completed"})),[t]);let n=(0,cY.Un)();return Q.createElement(Rd,null,Q.createElement(M4.Dv,{targetType:"dom",targetKey:Ry.N,topPadding:-6,hasShadow:e.hasShadow},Q.createElement(Rv,{bodyText:Q.createElement("span",null,Q.createElement(eO.Tx,{id:"rcs.figjam_onboarding.use_the_hand_tool_and_drag_to_move_around_hold_space_to_activate_it_anytime",spaceKey:Q.createElement("b",null,Q.createElement(eO.Tx,{id:"rcs.figjam_onboarding.space"}))})),onNext:e.onClickPrimaryCta,steps:{current:2,total:n?2:3},onDismiss:()=>{e.dismissModal(),t({eventName:"hand_tooltip_dismissed"})},imgSrc:"https://static.figma.com/uploads/07ff49c75c8933ea70ff2e4776503291c31a35ef"})))}var RC=n(897670);function Rw(e){let t=ec.Ay.mac?(0,eO.t)("rcs.figjam_onboarding.cmd"):(0,eO.t)("rcs.figjam_onboarding.ctrl"),n=(0,RC.O)()?28:-3,a=(0,cY.Un)(),r=(0,Rm.O)();return(0,Q.useEffect)(()=>{r({eventName:"zoom_tooltip_shown"})},[r]),Q.createElement(Rd,null,Q.createElement(M4.Dv,{targetType:"dom",topPadding:n,targetKey:Ry.q,hasShadow:e.hasShadow},Q.createElement(Rv,{bodyText:Q.createElement("span",null,Q.createElement(eO.Tx,{id:"rcs.figjam_onboarding.pinch_to_zoom_on_a_trackpad_hold_command_while_scrolling_or_use",commandKey:Q.createElement("b",null,t),plusOrMinusKeys:Q.createElement("b",null,Q.createElement(eO.Tx,{id:"rcs.figjam_onboarding.plus_or_minus"}))})),onNext:e.onClickPrimaryCta,steps:{current:1,total:a?2:3},onDismiss:()=>{e.dismissModal(),r({eventName:"zoom_tooltip_dismissed"})},imgSrc:"https://static.figma.com/uploads/4e36d3bbbf8633fef1b86238f66bb1bf54f54d2a"})))}function RT(e){return Q.createElement(tg.h,{testId:e.testId?e.testId:"ZoomConnectorOverlay",modalType:tE.q3.SELF_CONTAINED,trackingContextName:"FigJam Editor Onboarding - Zoom",element:Rw,isShowing:e.isShowing,onClickPrimaryCta:e.onClickPrimaryCta,onClose:e.onClose,onManualDismiss:e.onManualDismiss})}function Rx(e){let t=(0,cY.Un)();return Q.createElement(tg.h,{testId:e.testId?e.testId:"HandToolConnectorOverlay",modalType:tE.q3.SELF_CONTAINED,trackingContextName:"FigJam Editor Onboarding - Hand Tool",userFlagOnShow:t?"figjam_editor_onboarded":void 0,element:Rb,isShowing:e.isShowing,onClickPrimaryCta:e.onClickPrimaryCta,onClose:e.onClose,onManualDismiss:e.onManualDismiss})}let RN=[RT,Rx,function(e){return Q.createElement(tg.h,{testId:e.testId?e.testId:"ShareConnectorOverlay",modalType:tE.q3.SELF_CONTAINED,trackingContextName:"FigJam Editor Onboarding - Share",userFlagOnShow:"figjam_editor_onboarded",element:e=>Q.createElement(Rd,null,Q.createElement(M4.Dv,{targetType:"dom",targetKey:mM.v4,topPadding:-6},Q.createElement(Rv,{bodyText:Q.createElement("span",null,Q.createElement(eO.Tx,{id:"rcs.figjam_onboarding.invite_others_or_share_this_file_with_a_link_to_jam_with_your_team"})),onNext:e.onClickPrimaryCta,steps:{current:3,total:3},onDismiss:e.dismissModal,imgSrc:"https://static.figma.com/uploads/8f3066fc3906f11f2601a390725f2b7af58e01a1"}))),isShowing:e.isShowing,onClickPrimaryCta:e.onClickPrimaryCta,onClose:e.onClose,onManualDismiss:e.onManualDismiss})}];function Rk(){let e=(0,$.d4)(e=>{var t;return null==(t=e.userFlags)?void 0:t.figjam_editor_onboarded}),t=(0,mD.ow)(),n=!(0,lN.Td)(),a=(0,t_.q5)(),r=null==a?void 0:a.creatorId,l=(0,at.TA)();return t&&!(null===a||r===l)&&n&&!e}function RS(e){let t=(0,$.wA)();return()=>{t(tB.b({figjam_editor_onboarded:!0})),e()}}function RI({overlayUniqueId:e,afterReset:t}){let n=(0,$.wA)();(0,Eo.E)(e,"Reset Onboarding",()=>{n(tB.b({figjam_editor_onboarded:!1,figjam_browse_templates_modal_onboarded:!1,figjam_browse_templates_modal_onboarding_item_selected:!1,figjam_participant_onboarded:!1})),t&&t()})}function RA({steps:e,onComplete:t,isShowing:n,overlayUniqueId:a}){let{currentStep:r,next:l,reset:i}=(0,c4.A)({numSteps:e.length,onComplete:t});return RI({overlayUniqueId:a,afterReset:i}),Q.createElement(c8.U,{currentStep:r,isShowing:n,children:Q.useMemo(()=>e.map(e=>Q.createElement(e,{onClickPrimaryCta:l,onClose:ey.lQ,onManualDismiss:t,isShowing:n})),[l,t,n,e])})}var RP=n(706059),RO=n(935413),RL=n(549298),RM=n(965528),RD=n(246755),RR=n(221033),RF=n(526329),RB=n(246152);function RU(e){return Q.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},Q.createElement("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M6 6h12a1 1 0 0 1 1 1v3H5V7a1 1 0 0 1 1-1Zm-1 5v6a1 1 0 0 0 1 1h3v-7H5Zm5 7h8a1 1 0 0 0 1-1v-6h-9v7ZM4 7a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V7Z",clipRule:"evenodd"}))}var RH=n(235441),RV=n(815193);let RG=(0,Q.memo)(function(e){let{tooltipText:t,isActive:n,onClick:a,recordingKey:r,addLeftMargin:l,dataElementTarget:i,onboardingKey:o,disabled:s,dataTestId:c}=e,d="text"in e&&!!e.text,u=ea()((0,RV.M)(!s,n),{"whiteboard_toolbar_item--toolButtonWithText--rtLKk":d,"whiteboard_toolbar_item--toolButtonContainer--ZUXZ0":!0,"whiteboard_toolbar_item--toolButtonContainerWithMargin--QCajI":l});return Q.createElement(ns.GG,{className:ea()(u,"whiteboard_toolbar_item--iconButton--P72LO toolbar_view--iconButton--1MUm6"),"data-tooltip-type":nO.Ib.TEXT,"data-testid":c,"data-tooltip":t,"data-element-target":i,onKeyDown:e=>(0,w_.hx)({e,onClickHandler:a}),onClick:a,recordingKey:r,tabIndex:0,"aria-label":t,"aria-pressed":n,"data-fullscreen-intercept":!0,"data-onboarding-key":o,disabled:s},"icon"in e&&Q.createElement(eM.B,{svg:e.icon}),d&&Q.createElement("div",null,e.text),"children"in e&&Q.createElement(Q.Fragment,null,e.children))}),RK=(0,t6.tf)(RG),RW=(0,Q.memo)((0,Q.forwardRef)(function({tooltip:e,isActive:t,onClick:n,recordingKey:a,dataElementTarget:r,onboardingKey:l,disabled:i,dataTestId:o,children:s},c){let d=ea()("whiteboard_toolbar_item_ui3--button--vF5Eu",{"whiteboard_toolbar_item_ui3--active--EWNz5":t});return Q.createElement(ns.GG,{forwardedRef:c,className:d,"data-tooltip-type":e.type,"data-testid":o,"data-tooltip":e.type===nO.Ib.TEXT?e.text:e.key,"data-element-target":r,onKeyDown:e=>(0,w_.hx)({e,onClickHandler:n}),onClick:n,recordingKey:a,tabIndex:0,"aria-label":e.type===nO.Ib.TEXT?e.text:e.ariaLabel,"aria-pressed":t,"data-fullscreen-intercept":!0,"data-onboarding-key":l,disabled:i},s)})),Rz=(0,t6.tf)(RW);var Rj=n(663364);let RY="templates_toolbar";function RZ(){let e=(0,aD.GS)(),t=(0,$.wA)(),n=(0,$.d4)(e=>{var t;return(null==(t=e.modalShown)?void 0:t.type)===RB.PH.type}),a=!(0,SF.yT)()&&(0,LI.Uy)(),r=(0,eO.t)("whiteboard.inserts.templates"),l={isActive:n,onClick:()=>{n?t(n9.Ce()):(RH.oW.trigger("action",eU.KWd.CLEAR),(0,RB.KF)(t,{triggeredFrom:"toolbar",templateInsertionLocation:NU.RD.CURRENT_FILE}))},trackingProperties:{trackingDescriptor:c5.c.TEMPLATES_TOOLBAR_ITEM_CLICKED},onboardingKey:RY};return e?Q.createElement(Rz,{tooltip:{type:nO.Ib.TEXT,text:r},...l},Q.createElement(RU,null)):Q.createElement(RK,{icon:Rj.A,addLeftMargin:!a,tooltipText:r,...l})}var RX=n(462426);function Rq({onClickPrimaryCta:e,useCase:t}){let n=(0,t_.q5)(),a=(0,$.wA)(),r=(0,Rm.O)();return{onNext:(0,Q.useCallback)(()=>{n&&(a((0,n9.to)({type:Dn.g_,data:{fileKey:n.key,source:De.nk.expFigJamOnboardingShareVariant}})),(0,uj.YQ)({id:"open share modal"}),r({eventName:"share_board_clicked",useCase:t})),e()},[n,a,e,r,t])}}let RJ="make_something_assets--svg--hgXqn",RQ="make_something_assets--svgHovered--3XZdi",R$="make_something_assets--transformable--Ku46s",R0="make_something_assets--transformLeftBrainstorm--To6dH",R1="make_something_assets--transformRightBrainstorm--DH4Yj",R2="make_something_assets--transformLeftUpdates--HVSJ5",R5="make_something_assets--transformRightUpdates--jOJJ-",R4="make_something_assets--transformLeftPlanning--6tBWf",R3="make_something_assets--transformRightPlanning--H2U0C",R6="make_something_assets--transformRightDiagramming--2ff-F";function R7(e){return Q.createElement("svg",{width:"136",viewBox:"0 0 196 136",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:ea()(RJ,{[RQ]:e.hovered})},Q.createElement("rect",{x:"27.1868",y:"27.8497",width:"141.626",height:"142.374",fill:"#E5F4FF",stroke:"black",strokeWidth:"0.373684"}),Q.createElement("rect",{x:"27.1868",y:"3.18684",width:"141.626",height:"19.8053",fill:"#0D99FF",stroke:"black",strokeWidth:"0.373684"}),Q.createElement("g",{filter:"url(#filter0_d_351_43460)"},Q.createElement("rect",{x:"37.4653",y:"38.1284",width:"34.3789",height:"34.3789",fill:"#FFD45B"}),Q.createElement("rect",{x:"37.6522",y:"38.3153",width:"34.0053",height:"34.0053",stroke:"black",strokeWidth:"0.373684"})),Q.createElement("g",{filter:"url(#filter1_d_351_43460)"},Q.createElement("rect",{x:"124.157",y:"81",width:"34.3789",height:"34.3789",fill:"#FFD45B"}),Q.createElement("rect",{x:"124.344",y:"81.1868",width:"34.0053",height:"34.0053",stroke:"black",strokeWidth:"0.373684"})),Q.createElement("g",{filter:"url(#filter2_d_351_43460)"},Q.createElement("rect",{x:"81",y:"38",width:"34.3789",height:"34.3789",fill:"#80CAFF"}),Q.createElement("rect",{x:"81.1868",y:"38.1868",width:"34.0053",height:"34.0053",stroke:"black",strokeWidth:"0.373684"})),Q.createElement("g",{filter:"url(#filter3_d_351_43460)"},Q.createElement("rect",{x:"80.8096",y:"123.326",width:"34.3789",height:"34.3789",fill:"#80CAFF"}),Q.createElement("rect",{x:"80.9964",y:"123.513",width:"34.0053",height:"34.0053",stroke:"black",strokeWidth:"0.373684"})),Q.createElement("rect",{x:"84.9214",y:"128.181",width:"24.2895",height:"4.48421",fill:"black",fillOpacity:"0.2"}),Q.createElement("rect",{x:"40.8262",y:"42.2361",width:"24.2895",height:"4.48421",fill:"black",fillOpacity:"0.2"}),Q.createElement("rect",{x:"129.021",y:"85.1079",width:"24.2895",height:"4.48421",fill:"black",fillOpacity:"0.2"}),Q.createElement("rect",{x:"129.021",y:"100.057",width:"24.2895",height:"4.48421",fill:"black",fillOpacity:"0.2"}),Q.createElement("rect",{x:"40.8262",y:"49.7126",width:"18.3105",height:"4.48421",fill:"black",fillOpacity:"0.2"}),Q.createElement("rect",{x:"129.021",y:"92.584",width:"20.9263",height:"4.48421",fill:"black",fillOpacity:"0.2"}),Q.createElement("path",{d:"M87.4033 45.8193C88.2079 46.4289 88.9008 47.0959 89.6122 47.8073",stroke:"black",strokeWidth:"1.49474",strokeLinecap:"round"}),Q.createElement("path",{d:"M97.5591 43.8335V48.0303",stroke:"black",strokeWidth:"1.49474",strokeLinecap:"round"}),Q.createElement("path",{d:"M103.975 49.5765C106.065 48.776 108.231 47.9817 110.38 47.3677",stroke:"black",strokeWidth:"1.49474",strokeLinecap:"round"}),Q.createElement("path",{d:"M103.748 57.5273H109.491",stroke:"black",strokeWidth:"1.49474",strokeLinecap:"round"}),Q.createElement("path",{d:"M98.8926 62.6094V67.4688",stroke:"black",strokeWidth:"1.49474",strokeLinecap:"round"}),Q.createElement("path",{d:"M90.1268 58.5264C89.2081 59.2528 88.1169 59.8811 87.2876 60.7104",stroke:"black",strokeWidth:"1.49474",strokeLinecap:"round"}),Q.createElement("g",{filter:"url(#filter4_d_351_43460)"},Q.createElement("rect",{x:"81",y:"80.7251",width:"34.3789",height:"34.3789",fill:"#FFD45B"}),Q.createElement("rect",{x:"81.1868",y:"80.9119",width:"34.0053",height:"34.0053",stroke:"black",strokeWidth:"0.373684"})),Q.createElement("path",{d:"M108.795 102.748L108.954 102.837L109.047 102.681L109.454 101.997C109.755 101.492 110.248 101.121 110.825 100.966C111.402 100.812 112.014 100.886 112.527 101.173C113.039 101.459 113.41 101.933 113.559 102.489C113.708 103.046 113.625 103.642 113.324 104.146L113.324 104.146L112.957 104.763L112.957 104.763L110.552 108.797L105.825 106.155C105.313 105.869 104.942 105.395 104.793 104.839C104.644 104.282 104.728 103.687 105.028 103.183C105.329 102.678 105.821 102.308 106.398 102.153C106.975 101.998 107.587 102.073 108.1 102.36L108.795 102.748Z",fill:"#F24E1E",stroke:"black",strokeWidth:"0.373684"}),Q.createElement("path",{d:"M116.865 94.0866L116.958 94.2427L117.116 94.154L117.811 93.7653C118.324 93.4788 118.936 93.4037 119.513 93.5582C120.09 93.7127 120.583 94.0836 120.884 94.5878C121.185 95.0918 121.269 95.6876 121.12 96.2442C120.971 96.8009 120.6 97.2749 120.088 97.5613L120.088 97.5614L119.461 97.9124L119.461 97.9125L115.362 100.203L112.589 95.5518C112.288 95.0478 112.204 94.4522 112.353 93.8958C112.502 93.3393 112.873 92.8655 113.385 92.5793C113.897 92.293 114.51 92.2181 115.087 92.3727C115.664 92.5273 116.156 92.8982 116.457 93.4024L116.865 94.0866Z",fill:"#F24E1E",stroke:"black",strokeWidth:"0.373684"}),Q.createElement("g",{filter:"url(#filter5_d_351_43460)",className:ea()(R$,R1)},Q.createElement("rect",{x:"124",y:"37.761",width:"34.3789",height:"34.3789",fill:"#FFD45B"}),Q.createElement("rect",{x:"124.187",y:"37.9478",width:"34.0053",height:"34.0053",stroke:"black",strokeWidth:"0.373684"})),Q.createElement("path",{d:"M131.262 57.6483C132.364 58.2951 133.535 59.063 134.814 59.2976C138.578 59.9876 139.728 56.6784 139.99 53.525C140.181 51.2338 140.49 47.2706 137.707 46.3822C135.469 45.668 135.63 48.5222 135.525 50.0614C135.198 54.8126 139.249 59.0839 144.177 57.7244C145.893 57.251 147.804 55.2775 148.694 53.7787C149.217 52.8971 149.432 51.8588 149.988 51.0257",stroke:"black",strokeWidth:"1.49474",strokeLinecap:"round",className:ea()(R$,R1)}),Q.createElement("circle",{cx:"150.532",cy:"37.7597",r:"3.92368",fill:"#A259FF",stroke:"black",strokeWidth:"0.373684",className:ea()(R$,R1)}),Q.createElement("g",{filter:"url(#filter6_d_351_43460)",className:ea()(R$,R0)},Q.createElement("rect",{x:"37",y:"81.208",width:"34.3789",height:"34.3789",fill:"#80CAFF"}),Q.createElement("rect",{x:"37.1868",y:"81.3948",width:"34.0053",height:"34.0053",stroke:"black",strokeWidth:"0.373684"})),Q.createElement("rect",{className:ea()(R$,R0),x:"41.8633",y:"87.5618",width:"24.2895",height:"4.48421",fill:"black",fillOpacity:"0.2"}),Q.createElement("circle",{className:ea()(R$,R0),cx:"70.6325",cy:"98.0258",r:"3.92368",fill:"#A259FF",stroke:"black",strokeWidth:"0.373684"}),Q.createElement("circle",{className:ea()(R$,R0),cx:"61.2902",cy:"106.617",r:"3.92368",fill:"#A259FF",stroke:"black",strokeWidth:"0.373684"}),Q.createElement("defs",null,Q.createElement("filter",{id:"filter0_d_351_43460",x:"37.4653",y:"38.1284",width:"35.1263",height:"35.1263",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},Q.createElement("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),Q.createElement("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),Q.createElement("feOffset",{dx:"0.747368",dy:"0.747368"}),Q.createElement("feComposite",{in2:"hardAlpha",operator:"out"}),Q.createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"}),Q.createElement("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_351_43460"}),Q.createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_351_43460",result:"shape"})),Q.createElement("filter",{id:"filter1_d_351_43460",x:"124.157",y:"81",width:"35.1263",height:"35.1263",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},Q.createElement("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),Q.createElement("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),Q.createElement("feOffset",{dx:"0.747368",dy:"0.747368"}),Q.createElement("feComposite",{in2:"hardAlpha",operator:"out"}),Q.createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"}),Q.createElement("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_351_43460"}),Q.createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_351_43460",result:"shape"})),Q.createElement("filter",{id:"filter2_d_351_43460",x:"81",y:"38",width:"35.1263",height:"35.1263",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},Q.createElement("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),Q.createElement("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),Q.createElement("feOffset",{dx:"0.747368",dy:"0.747368"}),Q.createElement("feComposite",{in2:"hardAlpha",operator:"out"}),Q.createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"}),Q.createElement("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_351_43460"}),Q.createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_351_43460",result:"shape"})),Q.createElement("filter",{id:"filter3_d_351_43460",x:"80.8096",y:"123.326",width:"35.1263",height:"35.1263",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},Q.createElement("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),Q.createElement("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),Q.createElement("feOffset",{dx:"0.747368",dy:"0.747368"}),Q.createElement("feComposite",{in2:"hardAlpha",operator:"out"}),Q.createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"}),Q.createElement("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_351_43460"}),Q.createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_351_43460",result:"shape"})),Q.createElement("filter",{id:"filter4_d_351_43460",x:"81",y:"80.7251",width:"35.1263",height:"35.1263",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},Q.createElement("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),Q.createElement("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),Q.createElement("feOffset",{dx:"0.747368",dy:"0.747368"}),Q.createElement("feComposite",{in2:"hardAlpha",operator:"out"}),Q.createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"}),Q.createElement("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_351_43460"}),Q.createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_351_43460",result:"shape"})),Q.createElement("filter",{id:"filter5_d_351_43460",x:"124",y:"37.761",width:"35.1263",height:"35.1263",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},Q.createElement("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),Q.createElement("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),Q.createElement("feOffset",{dx:"0.747368",dy:"0.747368"}),Q.createElement("feComposite",{in2:"hardAlpha",operator:"out"}),Q.createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"}),Q.createElement("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_351_43460"}),Q.createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_351_43460",result:"shape"})),Q.createElement("filter",{id:"filter6_d_351_43460",x:"37",y:"81.208",width:"35.1263",height:"35.1263",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},Q.createElement("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),Q.createElement("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),Q.createElement("feOffset",{dx:"0.747368",dy:"0.747368"}),Q.createElement("feComposite",{in2:"hardAlpha",operator:"out"}),Q.createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"}),Q.createElement("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_351_43460"}),Q.createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_351_43460",result:"shape"}))))}function R8(e){return Q.createElement("svg",{width:"136",viewBox:"0 0 196 136",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:ea()(RJ,{[RQ]:e.hovered})},Q.createElement("rect",{width:"196",height:"121.761",fill:"white"}),Q.createElement("rect",{x:"27.183",y:"49.6627",width:"43.186",height:"23.7889",rx:"2.01291",fill:"#FFE8A3",stroke:"black",strokeWidth:"0.365983"}),Q.createElement("rect",{x:"31.7598",y:"59.3601",width:"17.9332",height:"4.3918",fill:"black",fillOpacity:"0.2"}),Q.createElement("circle",{cx:"58.6556",cy:"61.7423",r:"5.48975",fill:"white",stroke:"black",strokeWidth:"0.365983"}),Q.createElement("rect",{x:"76.5885",y:"49.6627",width:"42.82",height:"23.7889",rx:"2.01291",fill:"#FFE8A3",stroke:"black",strokeWidth:"0.365983"}),Q.createElement("rect",{x:"80.7957",y:"59.3601",width:"17.9332",height:"4.3918",fill:"black",fillOpacity:"0.2"}),Q.createElement("circle",{cx:"109.161",cy:"61.7423",r:"5.48975",fill:"white",stroke:"black",strokeWidth:"0.365983"}),Q.createElement("rect",{x:"76.5888",y:"3.18299",width:"42.82",height:"23.7889",rx:"2.01291",fill:"#FFCD29",stroke:"black",strokeWidth:"0.365983"}),Q.createElement("rect",{x:"80.7959",y:"12.8804",width:"17.9332",height:"4.3918",fill:"black",fillOpacity:"0.2"}),Q.createElement("circle",{cx:"110.261",cy:"15.2623",r:"5.48975",fill:"white",stroke:"black",strokeWidth:"0.365983"}),Q.createElement("rect",{x:"125.631",y:"130.178",width:"43.0186",height:"23.7889",rx:"2.01291",fill:"#FFE8A3",stroke:"black",strokeWidth:"0.365983"}),Q.createElement("rect",{x:"27.183",y:"89.9188",width:"43.186",height:"23.7889",rx:"2.01291",fill:"#FFE8A3",stroke:"black",strokeWidth:"0.365983"}),Q.createElement("rect",{x:"33.5896",y:"99.6157",width:"17.9332",height:"4.3918",fill:"black",fillOpacity:"0.2"}),Q.createElement("circle",{cx:"60.4899",cy:"101.998",r:"5.48975",fill:"white",stroke:"black",strokeWidth:"0.365983"}),Q.createElement("g",{clipPath:"url(#clip0_351_43276)"},Q.createElement("path",{d:"M61.0894 105.123C60.3396 105.1 59.722 104.946 59.1311 104.674C58.9431 104.588 58.7461 104.522 58.5542 104.448C58.3001 104.35 58.0777 104.2 57.9633 103.952C57.7015 103.384 57.427 102.818 57.2237 102.227C57.0344 101.676 57.1513 101.125 57.4918 100.655C57.7562 100.29 57.9163 99.8986 58.0319 99.4665C58.1742 98.9366 58.5669 98.643 59.1006 98.5287C59.3459 98.4766 59.5785 98.4931 59.8123 98.5833C60.0296 98.6672 60.2545 98.6812 60.482 98.6189C60.9039 98.5032 61.2889 98.6227 61.6663 98.8044C61.843 98.8883 62.0234 98.9772 62.2128 99.0192C62.8367 99.1564 63.157 99.5669 63.2421 100.164C63.284 100.46 63.2599 100.769 63.2383 101.07C63.2192 101.333 63.2472 101.582 63.331 101.83C63.5483 102.473 63.5153 103.102 63.2179 103.716C63.0362 104.092 62.7389 104.346 62.378 104.541C62.1251 104.677 61.8735 104.816 61.6282 104.966C61.43 105.087 61.2177 105.129 61.0894 105.123ZM61.083 104.886C61.2787 104.889 61.4274 104.827 61.6269 104.673C61.7616 104.57 61.9218 104.499 62.0704 104.415C62.2458 104.317 62.4517 104.251 62.594 104.118C63.1989 103.548 63.3361 102.819 63.1328 102.055C63.0019 101.562 62.9625 101.089 63.0197 100.591C63.0934 99.9405 62.7376 99.4512 62.1136 99.2784C61.8976 99.2187 61.6905 99.117 61.4872 99.0192C61.2266 98.8946 60.9585 98.7866 60.6713 98.8553C60.2977 98.9442 59.9419 98.9163 59.5835 98.7955C59.4666 98.7561 59.3345 98.7206 59.215 98.7345C58.7347 98.7904 58.3979 99.0738 58.2772 99.5237C58.1463 100.013 57.9264 100.439 57.6545 100.859C57.3724 101.296 57.2974 101.795 57.4982 102.297C57.6964 102.793 57.9125 103.284 58.126 103.774C58.2314 104.018 58.417 104.181 58.6673 104.274C58.9037 104.362 59.1426 104.444 59.3726 104.547C59.8796 104.772 60.4172 104.848 61.083 104.886Z",fill:"black"}),Q.createElement("path",{d:"M60.5404 103.175C60.0016 103.198 59.5072 103.112 59.1222 102.711C59.0561 102.642 58.9938 102.566 58.9544 102.481C58.9354 102.441 58.9189 102.367 58.9926 102.326C59.0383 102.3 59.0968 102.327 59.1336 102.355C59.2264 102.424 59.3039 102.514 59.3979 102.583C59.8402 102.909 60.3294 103.011 60.8593 102.856C61.1275 102.778 61.3143 102.581 61.4795 102.365C61.5405 102.286 61.6078 102.167 61.7184 102.25C61.8289 102.333 61.7298 102.435 61.6726 102.511C61.3842 102.895 61.036 103.177 60.5404 103.175Z",fill:"black"}),Q.createElement("path",{d:"M62.2294 101.088C62.2281 101.243 62.1099 101.367 61.9701 101.365C61.8253 101.362 61.7045 101.234 61.7083 101.088C61.7122 100.928 61.824 100.801 61.96 100.803C62.1124 100.805 62.2319 100.93 62.2294 101.088Z",fill:"black"}),Q.createElement("path",{d:"M58.9061 101.294C58.9048 101.449 58.7867 101.573 58.6469 101.571C58.502 101.568 58.3813 101.44 58.3851 101.294C58.3889 101.134 58.5007 101.007 58.6367 101.009C58.7879 101.01 58.9074 101.136 58.9061 101.294Z",fill:"black"})),Q.createElement("path",{d:"M96.5399 30.8149C96.5399 30.6128 96.7037 30.449 96.9058 30.449C97.108 30.449 97.2718 30.6128 97.2718 30.8149H96.5399ZM147.121 45.7131C146.978 45.856 146.747 45.856 146.604 45.7131L144.275 43.384C144.132 43.241 144.132 43.0093 144.275 42.8664C144.418 42.7234 144.649 42.7234 144.792 42.8664L146.863 44.9367L148.933 42.8664C149.076 42.7234 149.308 42.7234 149.45 42.8664C149.593 43.0093 149.593 43.241 149.45 43.384L147.121 45.7131ZM97.2718 30.8149V33.1938H96.5399V30.8149H97.2718ZM101.298 37.2196H142.471V37.9516H101.298V37.2196ZM147.229 41.9774V45.4543H146.497V41.9774H147.229ZM142.471 37.2196C145.098 37.2196 147.229 39.3498 147.229 41.9774H146.497C146.497 39.754 144.694 37.9516 142.471 37.9516V37.2196ZM97.2718 33.1938C97.2718 35.4172 99.0742 37.2196 101.298 37.2196V37.9516C98.67 37.9516 96.5399 35.8215 96.5399 33.1938H97.2718Z",fill:"black"}),Q.createElement("path",{d:"M97.2684 30.8149C97.2684 30.6128 97.1045 30.449 96.9024 30.449C96.7002 30.449 96.5364 30.6128 96.5364 30.8149H97.2684ZM46.5039 45.7131C46.6468 45.856 46.8786 45.856 47.0215 45.7131L49.3506 43.384C49.4935 43.241 49.4935 43.0093 49.3506 42.8664C49.2077 42.7234 48.9759 42.7234 48.833 42.8664L46.7627 44.9367L44.6924 42.8664C44.5495 42.7234 44.3177 42.7234 44.1748 42.8664C44.0319 43.0093 44.0319 43.241 44.1748 43.384L46.5039 45.7131ZM96.5364 30.8149V33.1938H97.2684V30.8149H96.5364ZM92.5106 37.2196H51.1545V37.9516H92.5106V37.2196ZM46.3967 41.9774V45.4543H47.1287V41.9774H46.3967ZM51.1545 37.2196C48.5268 37.2196 46.3967 39.3498 46.3967 41.9774H47.1287C47.1287 39.754 48.9311 37.9516 51.1545 37.9516V37.2196ZM96.5364 33.1938C96.5364 35.4172 94.734 37.2196 92.5106 37.2196V37.9516C95.1382 37.9516 97.2684 35.8215 97.2684 33.1938H96.5364Z",fill:"black"}),Q.createElement("path",{d:"M97.2686 30.6304C97.2686 30.4282 97.1047 30.2644 96.9026 30.2644C96.7005 30.2644 96.5366 30.4282 96.5366 30.6304H97.2686ZM96.6438 46.0775C96.7867 46.2204 97.0185 46.2204 97.1614 46.0775L99.4905 43.7484C99.6334 43.6054 99.6334 43.3737 99.4905 43.2308C99.3476 43.0879 99.1158 43.0879 98.9729 43.2308L96.9026 45.3011L94.8323 43.2308C94.6894 43.0879 94.4576 43.0879 94.3147 43.2308C94.1718 43.3737 94.1718 43.6054 94.3147 43.7484L96.6438 46.0775ZM96.5366 30.6304V45.8187H97.2686V30.6304H96.5366Z",fill:"black"}),Q.createElement("g",{clipPath:"url(#clip1_351_43276)"},Q.createElement("path",{d:"M58.8788 58.1369C59.7645 58.1496 60.4813 58.5105 61.1522 59.0925C62.5348 60.2921 62.6352 63.1971 60.4584 64.5085C58.9563 65.4133 56.9612 64.9838 55.998 63.3356C54.9331 61.5146 55.7781 59.0887 57.7364 58.3465C58.1036 58.2068 58.4836 58.133 58.8788 58.1369ZM61.8321 61.2731C61.8524 60.625 61.5258 59.874 60.9565 59.2831C60.2271 58.527 59.2867 58.2677 58.2511 58.5079C56.3449 58.9476 55.3105 61.1016 56.1263 62.9023C56.7032 64.1756 58.0592 64.8885 59.3554 64.6C60.8155 64.2747 61.8384 62.9874 61.8321 61.2731Z",fill:"black"}),Q.createElement("path",{d:"M61.0418 62.2874C60.6491 63.2747 59.9489 63.8517 58.8903 63.8644C57.983 63.8746 57.3159 63.426 56.9105 62.5885C56.8851 62.6 56.8546 62.6152 56.8253 62.6254C56.7834 62.6406 56.7593 62.6508 56.7211 62.6025C56.7033 62.5796 56.6754 62.539 56.7275 62.497C56.8558 62.3916 56.9943 62.3001 57.1341 62.2124C57.1557 62.1984 57.2066 62.1971 57.2358 62.2416C57.2676 62.2912 57.2472 62.3229 57.2282 62.3484C57.1926 62.3954 57.1418 62.431 57.0909 62.4754C57.5764 63.2188 58.2232 63.6661 59.1483 63.5734C59.9641 63.492 60.5716 62.8872 60.794 62.1743C60.8041 62.1425 60.7685 62.1196 60.7342 62.0777C60.6771 62.0103 60.6377 61.9989 60.7025 61.8909C60.7495 61.8235 60.8219 61.8629 60.8639 61.8845C60.9973 61.9544 61.1294 62.0319 61.2464 62.126C61.2921 62.1628 61.376 62.2175 61.3213 62.3153C61.2705 62.4144 61.2006 62.3496 61.118 62.3255C61.0951 62.3153 61.0723 62.3013 61.0418 62.2874Z",fill:"black"}),Q.createElement("path",{d:"M57.3933 60.2757C57.4657 60.1588 57.5445 60.066 57.6881 60.0953C57.8254 60.1232 57.8813 60.2427 57.8825 60.3532C57.8864 60.5718 57.8825 60.7967 57.8343 61.009C57.7847 61.2275 57.683 61.4359 57.5928 61.6431C57.5293 61.7892 57.4289 61.8184 57.3196 61.7117C56.9689 61.3661 56.7566 60.9518 56.7795 60.446C56.7859 60.3024 56.8634 60.1842 57.007 60.1359C57.162 60.0838 57.2815 60.155 57.3933 60.2757ZM57.6754 60.2999C57.6754 60.2999 57.6475 60.2592 57.6004 60.2732C57.5649 60.2706 57.5255 60.4219 57.5026 60.5019C57.481 60.5769 57.4848 60.6315 57.4314 60.6404C57.3463 60.6481 57.3526 60.5756 57.3171 60.54C57.3005 60.5223 57.2205 60.2961 57.1061 60.338C57.0324 60.3647 57.0286 60.4727 57.0324 60.5375C57.0502 60.8666 57.2001 61.1487 57.378 61.4512C57.5407 61.0611 57.7834 60.5375 57.6754 60.2999Z",fill:"black"}),Q.createElement("path",{d:"M60.2957 60.1701C60.3885 60.118 60.4761 60.0736 60.5626 60.0914C60.6909 60.118 60.7163 60.2527 60.7278 60.3697C60.7646 60.742 60.6032 61.0571 60.4291 61.3672C60.3897 61.4371 60.3338 61.4981 60.297 61.5705C60.1915 61.7764 60.0098 61.7383 59.9094 61.5616C59.6997 61.1893 59.5802 60.7801 59.6184 60.3442C59.6323 60.1778 59.6946 60.0189 59.8789 59.9757C60.0644 59.93 60.2258 60.0469 60.2957 60.1701ZM60.067 61.3837C60.086 61.474 60.1051 61.4041 60.1229 61.3863C60.2499 61.1957 60.3783 61.005 60.4533 60.7954C60.5117 60.6314 60.6655 60.2159 60.5041 60.2578C60.4647 60.2604 60.424 60.3811 60.3897 60.4421C60.3618 60.4904 60.3046 60.5679 60.2804 60.5717C60.1877 60.5742 60.1991 60.4904 60.1813 60.4421C60.1394 60.3328 60.1432 60.1612 59.9869 60.1816C59.8319 60.2019 59.8497 60.3735 59.87 60.4853C59.9234 60.7865 59.9996 61.0851 60.067 61.3837Z",fill:"black"})),Q.createElement("g",{clipPath:"url(#clip2_351_43276)"},Q.createElement("path",{d:"M106.15 61.4002C106.19 60.3696 106.623 59.3517 107.641 58.6439C107.894 58.4685 108.194 58.3541 108.485 58.2436C110.078 57.6387 112.02 58.7328 112.438 60.7102C112.736 62.1156 112.387 63.3546 111.281 64.3014C109.773 65.5912 107.534 65.1172 106.591 63.3432C106.3 62.7917 106.153 62.2046 106.15 61.4002ZM109.218 64.6076C109.862 64.6089 110.388 64.4424 110.809 64.1489C112.465 62.9912 112.596 60.3836 111.064 59.062C110.367 58.4596 109.556 58.302 108.681 58.4965C108.409 58.5575 108.146 58.715 107.913 58.879C106.537 59.8511 106.176 61.8602 107.116 63.3127C107.638 64.1209 108.377 64.5784 109.218 64.6076Z",fill:"black"}),Q.createElement("path",{d:"M108.781 63.6393C108.761 63.6736 108.735 63.708 108.716 63.7384C108.668 63.816 108.644 63.8439 108.552 63.8122C108.484 63.7728 108.498 63.6863 108.515 63.6393C108.564 63.5072 108.627 63.3801 108.701 63.2594C108.73 63.2111 108.787 63.1247 108.847 63.1526C108.893 63.1806 108.927 63.1971 108.888 63.3305C108.88 63.3559 108.871 63.3864 108.858 63.4271C109.174 63.586 109.496 63.6037 109.829 63.5237C110.313 63.4068 110.757 63.0421 111.012 62.5935C111.119 62.4054 111.164 62.225 111.222 61.9975C111.235 61.9505 111.269 61.8717 111.247 61.8577C111.218 61.8399 111.183 61.817 111.141 61.7992C111.059 61.7662 111.067 61.7052 111.084 61.6658C111.111 61.5972 111.165 61.5896 111.198 61.5985C111.387 61.6468 111.574 61.7078 111.758 61.7713C111.784 61.7802 111.818 61.8081 111.805 61.8691C111.791 61.9327 111.749 61.9441 111.713 61.9505C111.655 61.9606 111.593 61.9454 111.517 61.939C111.493 62.042 111.471 62.15 111.441 62.2542C111.208 63.0649 110.709 63.6139 109.876 63.8274C109.542 63.9125 109.203 63.8477 108.781 63.6393Z",fill:"black"}),Q.createElement("path",{d:"M110.475 60.4918C110.475 60.3914 110.46 60.2859 110.481 60.1906C110.495 60.1296 110.527 60.0368 110.611 60.0381C110.692 60.0394 110.753 60.0991 110.772 60.1525C110.894 60.4994 110.944 60.859 110.894 61.2237C110.89 61.3216 110.795 61.38 110.752 61.38C110.674 61.38 110.597 61.3279 110.575 61.2377C110.517 60.9937 110.464 60.493 110.475 60.4918Z",fill:"black"}),Q.createElement("path",{d:"M107.785 60.4853C107.791 60.4243 107.829 60.3175 107.921 60.2997C108.017 60.2743 108.052 60.39 108.063 60.4408C108.118 60.6848 108.104 60.639 108.132 60.9809C108.134 61.005 108.143 61.4129 108.133 61.5235C108.123 61.6404 108.059 61.6989 108.002 61.7014C107.894 61.7078 107.86 61.6353 107.836 61.5502C107.761 61.2909 107.725 61.0279 107.785 60.4853Z",fill:"black"})),Q.createElement("g",{clipPath:"url(#clip3_351_43276)"},Q.createElement("path",{d:"M111.595 18.3869C110.845 18.364 110.227 18.2102 109.637 17.9383C109.448 17.8519 109.251 17.7858 109.06 17.7121C108.805 17.6142 108.583 17.4643 108.469 17.2165C108.207 16.6485 107.932 16.0817 107.729 15.4908C107.54 14.9405 107.657 14.389 107.997 13.9188C108.262 13.5541 108.422 13.1627 108.537 12.7307C108.68 12.2007 109.072 11.9072 109.606 11.7928C109.851 11.7407 110.084 11.7572 110.318 11.8475C110.535 11.9313 110.76 11.9453 110.987 11.883C111.409 11.7674 111.794 11.8869 112.172 12.0686C112.348 12.1525 112.529 12.2414 112.718 12.2833C113.342 12.4206 113.662 12.831 113.747 13.4283C113.789 13.7244 113.765 14.0332 113.744 14.3344C113.725 14.5974 113.753 14.8465 113.836 15.0943C114.054 15.7373 114.021 16.3663 113.723 16.9801C113.542 17.3563 113.244 17.6104 112.883 17.8049C112.63 17.9408 112.379 18.0806 112.134 18.2306C111.935 18.3513 111.723 18.3932 111.595 18.3869ZM111.588 18.1505C111.784 18.1531 111.933 18.0908 112.132 17.937C112.267 17.8341 112.427 17.7629 112.576 17.6791C112.751 17.5812 112.957 17.5151 113.099 17.3817C113.704 16.8124 113.842 16.083 113.638 15.3192C113.507 14.8262 113.468 14.3534 113.525 13.8553C113.599 13.2047 113.243 12.7154 112.619 12.5426C112.403 12.4829 112.196 12.3812 111.993 12.2833C111.732 12.1588 111.464 12.0508 111.177 12.1194C110.803 12.2084 110.447 12.1804 110.089 12.0597C109.972 12.0203 109.84 11.9847 109.72 11.9987C109.24 12.0546 108.903 12.338 108.783 12.7878C108.652 13.2771 108.432 13.7028 108.16 14.1234C107.878 14.5606 107.803 15.0587 108.004 15.5607C108.202 16.0575 108.418 16.5481 108.631 17.0386C108.737 17.2826 108.922 17.4452 109.173 17.538C109.409 17.6257 109.648 17.7083 109.878 17.8112C110.385 18.0361 110.923 18.1124 111.588 18.1505Z",fill:"black"}),Q.createElement("path",{d:"M111.046 16.4389C110.507 16.4618 110.013 16.3766 109.628 15.975C109.561 15.9064 109.499 15.8302 109.46 15.745C109.441 15.7056 109.424 15.6307 109.498 15.59C109.544 15.5646 109.602 15.5913 109.639 15.6192C109.732 15.6878 109.809 15.7781 109.903 15.8467C110.346 16.1733 110.835 16.2749 111.365 16.1199C111.633 16.0424 111.82 15.8454 111.985 15.6294C112.046 15.5506 112.113 15.4312 112.224 15.5138C112.334 15.5976 112.235 15.6993 112.178 15.7755C111.89 16.1593 111.541 16.4414 111.046 16.4389Z",fill:"black"}),Q.createElement("path",{d:"M112.735 14.3521C112.733 14.5071 112.615 14.6316 112.475 14.6291C112.331 14.6266 112.21 14.4982 112.214 14.3521C112.218 14.192 112.329 14.0649 112.465 14.0674C112.618 14.0687 112.737 14.1945 112.735 14.3521Z",fill:"black"}),Q.createElement("path",{d:"M109.411 14.5579C109.41 14.7129 109.292 14.8375 109.152 14.8349C109.007 14.8324 108.887 14.704 108.89 14.5579C108.894 14.3978 109.006 14.2707 109.142 14.2732C109.293 14.2745 109.413 14.4003 109.411 14.5579Z",fill:"black"})),Q.createElement("path",{d:"M48.5913 77.6602C48.5913 77.458 48.4275 77.2942 48.2253 77.2942C48.0232 77.2942 47.8594 77.458 47.8594 77.6602H48.5913ZM47.9666 85.6046C48.1095 85.7475 48.3412 85.7475 48.4841 85.6046L50.8132 83.2755C50.9562 83.1326 50.9562 82.9008 50.8132 82.7579C50.6703 82.615 50.4386 82.615 50.2957 82.7579L48.2253 84.8282L46.155 82.7579C46.0121 82.615 45.7804 82.615 45.6375 82.7579C45.4945 82.9008 45.4945 83.1326 45.6375 83.2755L47.9666 85.6046ZM47.8594 77.6602V85.3458H48.5913V77.6602H47.8594Z",fill:"black"}),Q.createElement("rect",{x:"125.264",y:"50.1747",width:"43.186",height:"23.7889",rx:"2.01291",fill:"#FFE8A3",stroke:"black",strokeWidth:"0.365983",className:ea()(R$,R6)}),Q.createElement("rect",{x:"131.664",y:"59.8726",width:"17.9332",height:"4.3918",fill:"black",fillOpacity:"0.2",className:ea()(R$,R6)}),Q.createElement("circle",{cx:"158.567",cy:"62.2545",r:"5.48975",fill:"white",stroke:"black",strokeWidth:"0.365983",className:ea()(R$,R6)}),Q.createElement("g",{clipPath:"url(#clip4_351_43276)",className:ea()(R$,R6)},Q.createElement("path",{d:"M156.152 60.7639C156.525 60.325 156.935 59.9056 157.388 59.5486C157.703 59.3 157.811 59.2875 157.985 59.2403C158.032 59.2278 158.074 59.1986 158.114 59.1695C159.805 57.9764 161.959 58.8222 162.375 60.9278C162.652 62.325 161.939 63.7125 160.714 64.2792C160.695 64.2889 160.666 64.2917 160.656 64.307C160.413 64.6875 159.918 64.8347 159.617 64.9097C159.556 64.932 159.509 64.9958 159.453 65.0375C159.41 65.0695 159.367 65.1042 159.318 65.1264C157.725 65.8653 156.013 64.8764 155.638 63.2403C155.585 63.0097 155.353 61.6181 156.152 60.7639ZM159.47 64.1903C160.038 64.1875 160.409 64.0945 160.741 63.9125C162.338 63.0361 162.577 60.6556 161.171 59.4931C160.366 58.8278 159.335 58.7153 158.43 59.3528C157.353 60.1097 156.963 61.6611 157.566 62.8333C157.999 63.6764 158.686 64.1417 159.47 64.1903ZM160.013 64.55C160.082 64.525 160.092 64.507 160.081 64.4986C160.081 64.4986 160.052 64.4986 160.003 64.5C158.753 64.5945 157.813 64.0972 157.256 62.9764C156.711 61.882 156.843 60.807 157.486 59.7778C157.435 59.8028 157.393 59.8333 157.356 59.8681C156.489 60.6528 156.234 61.982 156.734 63.1181C157.195 64.1667 158.163 64.7889 159.252 64.7111C159.507 64.6931 159.759 64.6056 160.013 64.55ZM156.342 60.9472C156.343 60.907 156.306 60.957 156.3 60.9639C156.281 60.9903 156.261 61.0181 156.245 61.0458C156.016 61.432 155.873 61.85 155.853 62.2986C155.807 63.3208 156.166 64.1681 157.031 64.7458C157.606 65.1306 158.245 65.2097 158.913 65.0014C157.936 64.9028 157.175 64.45 156.661 63.6139C156.148 62.7806 156.066 61.8861 156.342 60.9472Z",fill:"black"}),Q.createElement("path",{d:"M160.525 61.8376C160.717 61.8445 160.78 61.9445 160.717 62.1251C160.561 62.5695 160.124 62.7862 159.678 62.6307C159.414 62.5376 159.207 62.3682 159.064 62.1265C158.955 61.9404 159.003 61.8334 159.218 61.8195C159.443 61.8043 160.316 61.8293 160.525 61.8376ZM160.482 62.0543C160.099 62.0543 159.725 62.0543 159.348 62.0543C159.731 62.5001 160.298 62.5084 160.482 62.0543Z",fill:"black"}),Q.createElement("path",{d:"M158.963 61.0499C158.964 61.2666 158.756 61.4638 158.528 61.4624C158.33 61.461 158.191 61.2819 158.189 61.0916C158.186 60.9013 158.381 60.7138 158.595 60.7082C158.8 60.7013 158.963 60.8513 158.963 61.0499ZM158.546 60.9124C158.443 60.9291 158.411 61.0263 158.42 61.0999C158.431 61.2069 158.511 61.2332 158.561 61.2346C158.609 61.236 158.702 61.1888 158.721 61.0971C158.746 61.0041 158.693 60.8777 158.546 60.9124Z",fill:"black"}),Q.createElement("path",{d:"M161.617 61.1082C161.614 61.318 161.466 61.4721 161.267 61.4707C161.053 61.4694 160.899 61.2957 160.906 61.0638C160.912 60.8624 161.062 60.7069 161.248 60.711C161.441 60.7166 161.62 60.9082 161.617 61.1082ZM161.425 61.1027C161.425 60.9957 161.368 60.9235 161.28 60.9235C161.225 60.9235 161.134 60.9652 161.134 61.0791C161.134 61.2777 161.28 61.2666 161.28 61.2666C161.357 61.2638 161.425 61.2319 161.425 61.1027Z",fill:"black"})),Q.createElement("rect",{x:"125.259",y:"90.4347",width:"43.186",height:"23.7889",rx:"2.01291",fill:"#FFE8A3",stroke:"black",strokeWidth:"0.365983"}),Q.createElement("rect",{x:"131.662",y:"100.132",width:"17.9332",height:"4.3918",fill:"black",fillOpacity:"0.2"}),Q.createElement("circle",{cx:"158.562",cy:"102.514",r:"5.48975",fill:"white",stroke:"black",strokeWidth:"0.365983"}),Q.createElement("g",{clipPath:"url(#clip5_351_43276)"},Q.createElement("path",{d:"M155.773 101.196C156.115 100.794 156.49 100.41 156.904 100.084C157.192 99.8563 157.291 99.8449 157.45 99.8017C157.493 99.7903 157.532 99.7636 157.568 99.7369C159.115 98.6453 161.086 99.4192 161.467 101.346C161.72 102.624 161.068 103.894 159.947 104.412C159.93 104.421 159.903 104.424 159.894 104.437C159.672 104.786 159.219 104.92 158.943 104.989C158.887 105.009 158.844 105.068 158.793 105.106C158.754 105.135 158.715 105.167 158.67 105.187C157.213 105.863 155.646 104.958 155.303 103.462C155.254 103.251 155.042 101.977 155.773 101.196ZM158.809 104.331C159.328 104.328 159.668 104.243 159.971 104.077C161.433 103.275 161.651 101.097 160.365 100.033C159.628 99.4243 158.685 99.3213 157.857 99.9046C156.872 100.597 156.515 102.017 157.066 103.089C157.463 103.861 158.092 104.286 158.809 104.331ZM159.306 104.66C159.369 104.637 159.378 104.62 159.368 104.613C159.368 104.613 159.341 104.613 159.297 104.614C158.153 104.701 157.293 104.246 156.783 103.22C156.285 102.219 156.406 101.235 156.994 100.293C156.947 100.316 156.909 100.344 156.875 100.376C156.082 101.094 155.848 102.31 156.305 103.35C156.727 104.309 157.613 104.878 158.609 104.807C158.843 104.791 159.073 104.711 159.306 104.66ZM155.947 101.363C155.948 101.327 155.914 101.372 155.909 101.379C155.891 101.403 155.873 101.428 155.858 101.454C155.648 101.807 155.517 102.189 155.5 102.6C155.458 103.535 155.786 104.31 156.577 104.839C157.103 105.191 157.688 105.263 158.299 105.073C157.406 104.983 156.709 104.568 156.239 103.803C155.769 103.041 155.694 102.223 155.947 101.363Z",fill:"black"}),Q.createElement("path",{d:"M159.774 102.178C159.95 102.185 160.007 102.276 159.95 102.441C159.808 102.848 159.407 103.046 158.999 102.904C158.758 102.819 158.568 102.664 158.438 102.442C158.337 102.272 158.382 102.174 158.579 102.162C158.785 102.148 159.583 102.171 159.774 102.178ZM159.735 102.376C159.384 102.376 159.042 102.376 158.697 102.376C159.048 102.784 159.566 102.792 159.735 102.376Z",fill:"black"}),Q.createElement("path",{d:"M158.345 101.458C158.346 101.656 158.155 101.836 157.947 101.835C157.765 101.834 157.638 101.67 157.637 101.496C157.634 101.322 157.812 101.15 158.008 101.145C158.196 101.139 158.345 101.276 158.345 101.458ZM157.964 101.332C157.87 101.347 157.84 101.436 157.848 101.503C157.858 101.601 157.932 101.625 157.978 101.627C158.021 101.628 158.106 101.585 158.124 101.501C158.147 101.416 158.098 101.3 157.964 101.332Z",fill:"black"}),Q.createElement("path",{d:"M160.773 101.511C160.771 101.703 160.635 101.844 160.453 101.843C160.257 101.841 160.116 101.683 160.123 101.47C160.128 101.286 160.265 101.144 160.435 101.148C160.612 101.153 160.776 101.328 160.773 101.511ZM160.598 101.506C160.598 101.408 160.546 101.342 160.465 101.342C160.415 101.342 160.331 101.38 160.331 101.484C160.331 101.666 160.465 101.656 160.465 101.656C160.536 101.653 160.598 101.624 160.598 101.506Z",fill:"black"})),Q.createElement("path",{className:ea()(R$,R6),d:"M147.77 78.1765C147.77 77.9744 147.606 77.8105 147.404 77.8105C147.202 77.8105 147.038 77.9744 147.038 78.1765H147.77ZM147.145 86.1209C147.288 86.2639 147.52 86.2639 147.663 86.1209L149.992 83.7918C150.135 83.6489 150.135 83.4172 149.992 83.2743C149.849 83.1313 149.617 83.1313 149.474 83.2743L147.404 85.3446L145.333 83.2743C145.191 83.1313 144.959 83.1313 144.816 83.2743C144.673 83.4172 144.673 83.6489 144.816 83.7918L147.145 86.1209ZM147.038 78.1765V85.8622H147.77V78.1765H147.038Z",fill:"black"}),Q.createElement("path",{d:"M147.77 118.432C147.77 118.23 147.606 118.066 147.404 118.066C147.202 118.066 147.038 118.23 147.038 118.432H147.77ZM147.145 126.376C147.288 126.519 147.52 126.519 147.663 126.376L149.992 124.047C150.135 123.904 150.135 123.673 149.992 123.53C149.849 123.387 149.617 123.387 149.474 123.53L147.404 125.6L145.333 123.53C145.191 123.387 144.959 123.387 144.816 123.53C144.673 123.673 144.673 123.904 144.816 124.047L147.145 126.376ZM147.038 118.432V126.118H147.77V118.432H147.038Z",fill:"black"}),Q.createElement("defs",null,Q.createElement("clipPath",{id:"clip0_351_43276"},Q.createElement("rect",{width:"7.31966",height:"7.31966",fill:"white",transform:"translate(56.6428 98.1511)"})),Q.createElement("clipPath",{id:"clip1_351_43276"},Q.createElement("rect",{width:"7.31966",height:"7.31966",fill:"white",transform:"translate(55.1821 57.8955)"})),Q.createElement("clipPath",{id:"clip2_351_43276"},Q.createElement("rect",{width:"7.31966",height:"7.31966",fill:"white",transform:"translate(105.685 57.8955)"})),Q.createElement("clipPath",{id:"clip3_351_43276"},Q.createElement("rect",{width:"7.31966",height:"7.31966",fill:"white",transform:"translate(107.148 11.4153)"})),Q.createElement("clipPath",{id:"clip4_351_43276"},Q.createElement("rect",{width:"8",height:"8",fill:"white",transform:"translate(155 58)"})),Q.createElement("clipPath",{id:"clip5_351_43276"},Q.createElement("rect",{width:"7.31966",height:"7.31966",fill:"white",transform:"translate(154.719 98.6667)"}))))}function R9(e){return Q.createElement("svg",{width:"136",viewBox:"0 0 196 122",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:ea()(RJ,{[RQ]:e.hovered})},Q.createElement("rect",{x:"27.1929",y:"3.19293",width:"69.0706",height:"15.0489",fill:"black",stroke:"black",strokeWidth:"0.38587"}),Q.createElement("rect",{x:"99.7337",y:"3.19293",width:"69.0706",height:"15.0489",fill:"black",stroke:"black",strokeWidth:"0.38587"}),Q.createElement("rect",{x:"99.7337",y:"23.2581",width:"69.0706",height:"15.0489",rx:"2.12228",fill:"#BDE3FF",stroke:"black",strokeWidth:"0.38587"}),Q.createElement("rect",{x:"27.1929",y:"43.3228",width:"99.1685",height:"15.0489",rx:"2.12228",fill:"#E4CCFF",stroke:"black",strokeWidth:"0.38587"}),Q.createElement("rect",{x:"27.1929",y:"103.518",width:"99.1685",height:"15.0489",rx:"2.12228",fill:"#FFE8A3",stroke:"black",strokeWidth:"0.38587"}),Q.createElement("rect",{x:"76.5833",y:"63.3882",width:"92.2228",height:"15.0489",rx:"2.12228",fill:"#BDE3FF",stroke:"black",strokeWidth:"0.38587"}),Q.createElement("rect",{x:"83.3374",y:"68.5977",width:"25.8533",height:"4.63043",fill:"black",fillOpacity:"0.2"}),Q.createElement("rect",{x:"32.7886",y:"108.728",width:"32.0272",height:"4.63043",fill:"black",fillOpacity:"0.2"}),Q.createElement("rect",{x:"33.561",y:"48.5325",width:"31.2554",height:"4.63043",fill:"black",fillOpacity:"0.2"}),Q.createElement("rect",{x:"104.947",y:"28.4675",width:"21.6087",height:"4.63043",fill:"black",fillOpacity:"0.2"}),Q.createElement("path",{d:"M161.035 74.752C160.165 74.7255 159.449 74.5471 158.764 74.2317C158.546 74.1315 158.317 74.0549 158.095 73.9694C157.8 73.8559 157.542 73.682 157.409 73.3946C157.106 72.7358 156.787 72.0785 156.552 71.3932C156.332 70.755 156.468 70.1154 156.863 69.5701C157.169 69.1471 157.355 68.6932 157.489 68.1921C157.654 67.5775 158.109 67.237 158.728 67.1044C159.013 67.044 159.283 67.0631 159.554 67.1678C159.806 67.2651 160.067 67.2813 160.33 67.209C160.82 67.0749 161.266 67.2135 161.704 67.4242C161.909 67.5215 162.118 67.6247 162.338 67.6733C163.061 67.8325 163.433 68.3085 163.532 69.0012C163.58 69.3446 163.552 69.7027 163.527 70.052C163.505 70.3571 163.537 70.646 163.635 70.9334C163.887 71.6791 163.848 72.4086 163.504 73.1205C163.293 73.5567 162.948 73.8515 162.529 74.077C162.236 74.2347 161.944 74.3968 161.66 74.5707C161.43 74.7107 161.184 74.7594 161.035 74.752ZM161.028 74.4779C161.255 74.4808 161.427 74.4086 161.658 74.2303C161.815 74.1109 162 74.0284 162.173 73.9311C162.376 73.8176 162.615 73.741 162.78 73.5862C163.481 72.9259 163.641 72.08 163.405 71.1942C163.253 70.6224 163.207 70.0741 163.274 69.4964C163.359 68.7418 162.946 68.1744 162.223 67.974C161.972 67.9047 161.732 67.7868 161.496 67.6733C161.194 67.5289 160.883 67.4036 160.55 67.4832C160.117 67.5863 159.704 67.5539 159.288 67.4139C159.153 67.3682 159 67.327 158.861 67.3432C158.304 67.408 157.913 67.7367 157.773 68.2584C157.622 68.8258 157.367 69.3195 157.051 69.8074C156.724 70.3144 156.637 70.8921 156.87 71.4742C157.1 72.0505 157.35 72.6194 157.598 73.1883C157.72 73.4713 157.936 73.6599 158.226 73.7675C158.5 73.8692 158.777 73.965 159.044 74.0844C159.632 74.3452 160.255 74.4337 161.028 74.4779Z",fill:"black"}),Q.createElement("path",{d:"M160.398 72.4923C159.773 72.5188 159.2 72.4201 158.753 71.9543C158.677 71.8747 158.605 71.7863 158.559 71.6876C158.537 71.6419 158.518 71.5549 158.603 71.5078C158.656 71.4783 158.724 71.5092 158.767 71.5417C158.874 71.6212 158.964 71.7259 159.073 71.8055C159.586 72.1842 160.154 72.3021 160.768 72.1223C161.079 72.0324 161.296 71.804 161.487 71.5535C161.558 71.4621 161.636 71.3235 161.764 71.4193C161.893 71.5166 161.778 71.6345 161.711 71.7229C161.377 72.168 160.973 72.4952 160.398 72.4923Z",fill:"black"}),Q.createElement("path",{d:"M162.357 70.0724C162.355 70.2522 162.218 70.3966 162.056 70.3937C161.888 70.3907 161.748 70.2419 161.753 70.0724C161.757 69.8867 161.887 69.7393 162.044 69.7422C162.221 69.7437 162.36 69.8896 162.357 70.0724Z",fill:"black"}),Q.createElement("path",{d:"M158.503 70.3111C158.501 70.4909 158.364 70.6354 158.202 70.6324C158.034 70.6295 157.894 70.4806 157.899 70.3111C157.903 70.1254 158.033 69.9781 158.19 69.981C158.366 69.9825 158.504 70.1284 158.503 70.3111Z",fill:"black"}),Q.createElement("g",{clipPath:"url(#clip0_351_42930)"},Q.createElement("path",{d:"M160.653 34.6219C159.783 34.5953 159.067 34.417 158.381 34.1016C158.163 34.0014 157.935 33.9248 157.712 33.8393C157.418 33.7258 157.16 33.5519 157.027 33.2645C156.723 32.6057 156.405 31.9484 156.169 31.2631C155.95 30.6249 156.085 29.9853 156.48 29.44C156.787 29.017 156.973 28.563 157.107 28.0619C157.272 27.4474 157.727 27.1069 158.346 26.9743C158.631 26.9139 158.9 26.933 159.171 27.0377C159.423 27.1349 159.684 27.1511 159.948 27.0789C160.437 26.9448 160.884 27.0833 161.322 27.2941C161.527 27.3914 161.736 27.4945 161.955 27.5432C162.679 27.7023 163.051 28.1784 163.149 28.8711C163.198 29.2145 163.17 29.5726 163.145 29.9219C163.123 30.227 163.155 30.5158 163.252 30.8032C163.504 31.549 163.466 32.2785 163.121 32.9904C162.91 33.4266 162.566 33.7214 162.147 33.9469C161.854 34.1046 161.562 34.2667 161.278 34.4406C161.048 34.5806 160.801 34.6292 160.653 34.6219ZM160.645 34.3477C160.872 34.3507 161.045 34.2785 161.276 34.1001C161.432 33.9808 161.618 33.8982 161.79 33.801C161.994 33.6875 162.233 33.6108 162.398 33.4561C163.099 32.7958 163.258 31.9499 163.023 31.0641C162.871 30.4923 162.825 29.944 162.891 29.3663C162.977 28.6117 162.564 28.0443 161.841 27.8438C161.59 27.7746 161.35 27.6567 161.114 27.5432C160.812 27.3987 160.501 27.2735 160.168 27.353C159.734 27.4562 159.322 27.4238 158.906 27.2838C158.771 27.2381 158.617 27.1968 158.479 27.213C157.922 27.2779 157.531 27.6065 157.391 28.1283C157.239 28.6957 156.984 29.1894 156.669 29.6772C156.342 30.1842 156.255 30.762 156.488 31.3441C156.718 31.9204 156.968 32.4893 157.216 33.0582C157.338 33.3411 157.553 33.5298 157.844 33.6374C158.118 33.7391 158.395 33.8349 158.662 33.9542C159.25 34.2151 159.873 34.3035 160.645 34.3477Z",fill:"black"}),Q.createElement("path",{d:"M160.016 32.3624C159.391 32.3889 158.818 32.2902 158.371 31.8244C158.294 31.7449 158.222 31.6564 158.177 31.5577C158.154 31.512 158.135 31.425 158.221 31.3779C158.274 31.3484 158.342 31.3794 158.384 31.4118C158.492 31.4914 158.582 31.596 158.691 31.6756C159.204 32.0544 159.771 32.1723 160.386 31.9925C160.697 31.9026 160.913 31.6741 161.105 31.4236C161.176 31.3322 161.254 31.1937 161.382 31.2895C161.51 31.3867 161.395 31.5046 161.329 31.5931C160.994 32.0381 160.591 32.3653 160.016 32.3624Z",fill:"black"}),Q.createElement("path",{d:"M161.974 29.9422C161.973 30.122 161.836 30.2665 161.674 30.2635C161.506 30.2606 161.366 30.1117 161.37 29.9422C161.375 29.7565 161.504 29.6092 161.662 29.6121C161.839 29.6136 161.977 29.7595 161.974 29.9422Z",fill:"black"}),Q.createElement("path",{d:"M158.12 30.181C158.119 30.3608 157.982 30.5052 157.82 30.5023C157.652 30.4993 157.512 30.3505 157.516 30.181C157.521 29.9953 157.65 29.8479 157.808 29.8509C157.983 29.8523 158.122 29.9983 158.12 30.181Z",fill:"black"})),Q.createElement("g",{clipPath:"url(#clip1_351_42930)"},Q.createElement("path",{d:"M114.675 114.329C114.278 114.328 114.256 114.309 114.215 113.917C114.185 113.631 114.162 113.343 114.154 113.056C114.112 111.501 114.087 109.946 114.039 108.393C114.025 107.893 114.025 107.893 114.462 107.849C114.934 107.802 115.45 107.815 115.924 107.803C117.613 107.764 119.304 107.73 120.993 107.694C121.058 107.693 121.127 107.697 121.183 107.703C121.305 107.716 121.319 107.809 121.321 107.868C121.332 108.088 121.311 108.309 121.311 108.53C121.308 110.144 121.308 111.758 121.307 113.371C121.307 113.565 121.302 113.759 121.301 113.952C121.298 114.281 121.192 114.39 120.854 114.388C120.221 114.387 119.587 114.381 118.953 114.378C118.542 114.377 115.69 114.332 114.675 114.329ZM120.946 108.032L114.356 108.123C114.336 108.123 114.319 108.141 114.321 108.16C114.384 110.116 114.446 112.049 114.51 114.007C114.51 114.026 114.526 114.042 114.545 114.042H120.952C120.977 114.042 120.996 114.021 120.996 113.998V108.082C120.996 108.054 120.974 108.032 120.946 108.032Z",fill:"black"}),Q.createElement("path",{d:"M117.683 112.39C117.071 112.373 116.501 112.219 116.016 111.83C115.935 111.765 115.826 111.613 115.852 111.563C115.929 111.42 116.057 111.56 116.151 111.608C117.205 112.155 118.252 112.161 119.295 111.585C119.361 111.548 119.432 111.519 119.504 111.499C119.535 111.492 119.577 111.488 119.607 111.536C119.628 111.567 119.616 111.617 119.599 111.645C119.568 111.692 119.522 111.734 119.476 111.769C118.953 112.188 118.358 112.403 117.683 112.39Z",fill:"black"}),Q.createElement("path",{d:"M117.349 109.66C117.133 110.082 116.915 110.502 116.696 110.922C116.68 110.953 116.576 111.096 116.462 111.038C116.421 111.018 116.384 110.978 116.384 110.884C116.384 110.836 116.405 110.78 116.427 110.735C116.627 110.338 116.829 109.942 117.034 109.548C117.063 109.492 117.102 109.433 117.152 109.398C117.193 109.369 117.267 109.354 117.311 109.37C117.469 109.426 117.373 109.615 117.349 109.66Z",fill:"black"}),Q.createElement("path",{d:"M119.47 109.498C119.606 109.477 119.652 109.594 119.618 109.695C119.59 109.784 119.551 109.871 119.507 109.952C119.342 110.248 119.174 110.543 119.003 110.835C118.953 110.922 118.885 111.016 118.766 110.959C118.632 110.894 118.682 110.776 118.73 110.686C118.915 110.341 119.103 109.998 119.299 109.659C119.339 109.589 119.401 109.498 119.47 109.498Z",fill:"black"})),Q.createElement("path",{d:"M66.4764 69.1441C66.5074 69.1087 66.5118 69.0557 66.4853 69.0159C66.2111 68.6622 65.9414 68.3306 65.6894 67.9857C65.4064 67.5966 65.4816 67.2959 65.9459 67.2031C67.2679 66.9334 68.5899 66.646 69.9296 66.4912C70.8138 66.394 70.9819 66.4205 70.8802 67.464C70.7608 68.6975 70.6105 69.6924 70.4336 70.9171C70.1727 72.7033 70.1064 72.92 69.7704 72.7431C69.6908 72.6989 69.4653 72.5795 69.3017 72.4381C69.1072 72.27 68.8728 72.1064 68.7623 71.9871C68.0902 72.973 67.5597 73.5478 66.7771 74.2729C65.4241 75.8028 62.873 76.0327 60.9187 74.3393C60.2953 73.7999 59.694 73.2383 59.0838 72.6857C58.1067 71.8014 56.9704 71.6289 55.7987 72.1418C54.9675 72.5044 54.2026 73.0261 53.4332 73.5125C52.0626 74.3791 50.6168 74.8787 48.9809 74.5161C48.6271 74.4365 48.2823 74.2818 47.9507 74.1226C47.4466 73.8794 47.2123 73.4727 47.2079 72.8935C47.2034 71.6289 47.1239 70.36 47.146 69.0955C47.1636 68.1449 47.3847 67.9945 48.3265 68.1625C50.1967 68.4897 51.9565 68.136 53.6631 67.3623C54.8039 66.845 55.9844 66.478 57.2445 66.3365C59.0175 66.2039 61.1486 66.8715 62.5856 68.4499C63.178 69.0999 63.9651 69.5553 64.8361 69.6879C65.4595 69.7719 65.8972 69.7321 66.4764 69.1441ZM66.4013 67.8265C66.64 68.1714 66.9009 68.4853 67.0777 68.839C67.1706 69.0291 67.3209 69.206 67.1131 69.5155C66.5737 70.3114 65.3888 70.8552 64.4381 70.5545C63.912 70.3909 63.4035 70.1124 62.9525 69.794C62.1876 69.2635 61.5112 68.6003 60.7286 68.1095C60.1626 67.7513 59.5038 67.4816 58.8495 67.3446C57.4832 67.0572 56.148 67.3578 54.879 67.8751C52.6993 68.7683 50.5283 69.6437 47.986 68.9142C47.986 70.1124 47.9949 71.2399 47.9816 72.3629C47.9728 73.3666 47.8357 73.2472 48.8349 73.5611C48.9853 73.6097 49.14 73.6495 49.2948 73.6716C50.6831 73.8794 51.8813 73.4019 53.022 72.6635C53.756 72.186 54.4899 71.682 55.2814 71.315C56.9969 70.5192 58.5134 70.8685 59.8443 72.2037C60.4146 72.7741 61.0292 73.3091 61.6836 73.7822C62.8022 74.5913 64.0225 75.1617 65.5037 74.3304C66.7284 73.5169 67.6304 72.6812 68.2317 71.3504C68.4837 70.7933 68.5368 70.8198 68.9613 71.2708C69.0983 71.4167 69.0983 71.4167 69.3592 71.6643C69.5537 71.9031 69.5626 71.6687 69.5758 71.483C69.7925 70.0151 69.9517 68.6489 70.1772 67.1235C68.8773 67.3623 67.6702 67.5878 66.4013 67.8265Z",fill:"black"}),Q.createElement("rect",{x:"27.1929",y:"23.2581",width:"69.0706",height:"15.0489",rx:"2.12228",fill:"#E4CCFF",stroke:"black",strokeWidth:"0.38587",className:ea()(R$,R4)}),Q.createElement("rect",{x:"33.561",y:"29.2361",width:"21.6087",height:"4.63043",fill:"black",fillOpacity:"0.2",className:ea()(R$,R4)}),Q.createElement("g",{clipPath:"url(#clip2_351_42930)",className:ea()(R$,R4)},Q.createElement("path",{d:"M83.8767 30.6015C83.9224 29.4063 84.425 28.2258 85.6055 27.4048C85.8988 27.2015 86.2466 27.0688 86.5841 26.9406C88.4322 26.2391 90.6842 27.508 91.1691 29.8013C91.514 31.4313 91.1102 32.8682 89.8265 33.9662C88.0785 35.4621 85.4817 34.9124 84.3881 32.855C84.0506 32.2153 83.8797 31.5344 83.8767 30.6015ZM87.4345 34.3214C88.1817 34.3229 88.7919 34.1298 89.2797 33.7894C91.2001 32.4467 91.3519 29.4225 89.5759 27.8897C88.7668 27.1911 87.8265 27.0084 86.8111 27.2339C86.4957 27.3046 86.1906 27.4874 85.9209 27.6775C84.3247 28.805 83.9062 31.135 84.9968 32.8196C85.6025 33.7569 86.4588 34.2875 87.4345 34.3214Z",fill:"black"}),Q.createElement("path",{d:"M86.9275 33.1983C86.9039 33.2381 86.8744 33.2779 86.8523 33.3133C86.7963 33.4032 86.7683 33.4356 86.6622 33.3987C86.5826 33.3531 86.5988 33.2528 86.6194 33.1983C86.6754 33.045 86.7491 32.8976 86.8346 32.7576C86.8685 32.7016 86.9348 32.6014 87.0041 32.6338C87.0572 32.6663 87.097 32.6854 87.0513 32.8402C87.0424 32.8696 87.0321 32.905 87.0174 32.9522C87.3829 33.1364 87.7572 33.157 88.1434 33.0642C88.7049 32.9286 89.2192 32.5056 89.5155 31.9854C89.6393 31.7672 89.6909 31.558 89.7586 31.2941C89.7734 31.2396 89.8132 31.1482 89.7881 31.132C89.7542 31.1114 89.713 31.0849 89.6643 31.0642C89.57 31.0259 89.5788 30.9552 89.598 30.9095C89.6304 30.8299 89.6923 30.8211 89.7306 30.8314C89.9502 30.8874 90.1669 30.9581 90.3806 31.0318C90.4101 31.0421 90.4499 31.0745 90.4351 31.1453C90.4189 31.219 90.3703 31.2322 90.3275 31.2396C90.2612 31.2514 90.189 31.2337 90.1006 31.2263C90.0726 31.3457 90.0475 31.471 90.0121 31.5919C89.7424 32.5321 89.1632 33.1688 88.1979 33.4164C87.8103 33.5152 87.4168 33.44 86.9275 33.1983Z",fill:"black"}),Q.createElement("path",{d:"M88.892 29.5476C88.892 29.4312 88.8744 29.3089 88.8994 29.1984C88.9156 29.1276 88.9525 29.02 89.0497 29.0215C89.1441 29.023 89.2148 29.0922 89.2369 29.1541C89.3784 29.5565 89.4359 29.9736 89.3784 30.3966C89.374 30.51 89.2634 30.5778 89.2133 30.5778C89.1234 30.5778 89.0335 30.5174 89.0085 30.4128C88.9407 30.1298 88.8788 29.5491 88.892 29.5476Z",fill:"black"}),Q.createElement("path",{d:"M85.772 29.5404C85.7793 29.4697 85.8235 29.3459 85.9296 29.3252C86.0417 29.2957 86.0815 29.4299 86.0947 29.4888C86.1581 29.7718 86.1419 29.7187 86.1743 30.1152C86.1772 30.1432 86.1876 30.6163 86.1758 30.7445C86.164 30.8801 86.0903 30.9479 86.024 30.9508C85.8987 30.9582 85.8589 30.8742 85.8309 30.7754C85.7439 30.4748 85.7027 30.1697 85.772 29.5404Z",fill:"black"})),Q.createElement("rect",{x:"106.08",y:"83.0787",width:"62.5109",height:"15.0489",rx:"2.12228",fill:"#AFF4C6",stroke:"black",strokeWidth:"0.38587",className:ea()(R$,R3)}),Q.createElement("rect",{x:"112.062",y:"88.2883",width:"22.7663",height:"4.63043",fill:"black",fillOpacity:"0.2",className:ea()(R$,R3)}),Q.createElement("defs",null,Q.createElement("clipPath",{id:"clip0_351_42930"},Q.createElement("rect",{width:"8.48913",height:"8.48913",fill:"white",transform:"translate(155.496 26.5366)"})),Q.createElement("clipPath",{id:"clip1_351_42930"},Q.createElement("rect",{width:"8.48913",height:"8.48913",fill:"white",transform:"translate(113.435 106.797)"})),Q.createElement("clipPath",{id:"clip2_351_42930"},Q.createElement("rect",{width:"8.48913",height:"8.48913",fill:"white",transform:"translate(83.3374 26.5366)"}))))}function Fe(e){return Q.createElement("svg",{width:"136",viewBox:"0 0 196 136",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:ea()(RJ,{[RQ]:e.hovered})},Q.createElement("rect",{x:"27.172",y:"7.98674",width:"141.765",height:"41.2909",fill:"#E4CCFF"}),Q.createElement("g",{filter:"url(#filter0_d_351_120552)"},Q.createElement("rect",{x:"63.4768",y:"13.321",width:"30.6241",height:"30.6241",fill:"#FFD45B"}),Q.createElement("rect",{x:"63.6489",y:"13.4931",width:"30.28",height:"30.28",stroke:"black",strokeWidth:"0.344091"})),Q.createElement("rect",{x:"67.6057",y:"17.4517",width:"22.0218",height:"4.12909",fill:"black",fillOpacity:"0.2"}),Q.createElement("rect",{x:"67.6057",y:"23.3",width:"19.2691",height:"4.12909",fill:"black",fillOpacity:"0.2"}),Q.createElement("g",{filter:"url(#filter1_d_351_120552)"},Q.createElement("rect",{x:"98.2268",y:"13.321",width:"30.6241",height:"30.6241",fill:"#FFD45B"}),Q.createElement("rect",{x:"98.3989",y:"13.4931",width:"30.28",height:"30.28",stroke:"black",strokeWidth:"0.344091"})),Q.createElement("rect",{x:"102.355",y:"17.4517",width:"22.0218",height:"4.12909",fill:"black",fillOpacity:"0.2"}),Q.createElement("rect",{x:"102.355",y:"23.3",width:"19.2691",height:"4.12909",fill:"black",fillOpacity:"0.2"}),Q.createElement("g",{filter:"url(#filter2_d_351_120552)"},Q.createElement("rect",{x:"132.977",y:"13.321",width:"30.6241",height:"30.6241",fill:"#FFD45B"}),Q.createElement("rect",{x:"133.149",y:"13.4931",width:"30.28",height:"30.28",stroke:"black",strokeWidth:"0.344091"})),Q.createElement("rect",{x:"137.109",y:"17.4517",width:"22.0218",height:"4.12909",fill:"black",fillOpacity:"0.2"}),Q.createElement("rect",{x:"137.109",y:"23.3",width:"19.2691",height:"4.12909",fill:"black",fillOpacity:"0.2"}),Q.createElement("rect",{x:"27.172",y:"7.98674",width:"141.765",height:"41.2909",stroke:"black",strokeWidth:"0.344091"}),Q.createElement("rect",{x:"27.172",y:"55.1305",width:"141.765",height:"41.2909",fill:"#BDE3FF"}),Q.createElement("g",{filter:"url(#filter3_d_351_120552)"},Q.createElement("rect",{x:"32.5081",y:"60.4646",width:"26.8391",height:"30.6241",fill:"white"}),Q.createElement("rect",{x:"32.6801",y:"60.6366",width:"26.495",height:"30.28",stroke:"black",strokeWidth:"0.344091"})),Q.createElement("rect",{x:"35.4333",y:"63.0461",width:"20.9895",height:"18.5809",fill:"#F5F5F5",stroke:"black",strokeWidth:"0.344091"}),Q.createElement("g",{filter:"url(#filter4_d_351_120552)"},Q.createElement("rect",{x:"63.4768",y:"60.4646",width:"30.6241",height:"30.6241",fill:"#FFD45B"}),Q.createElement("rect",{x:"63.6489",y:"60.6366",width:"30.28",height:"30.28",stroke:"black",strokeWidth:"0.344091"})),Q.createElement("rect",{x:"67.6057",y:"64.5955",width:"22.0218",height:"4.12909",fill:"black",fillOpacity:"0.2"}),Q.createElement("rect",{x:"67.6057",y:"70.4438",width:"19.2691",height:"4.12909",fill:"black",fillOpacity:"0.2"}),Q.createElement("g",{filter:"url(#filter5_d_351_120552)"},Q.createElement("rect",{x:"98.2268",y:"60.4646",width:"30.6241",height:"30.6241",fill:"#FFD45B"}),Q.createElement("rect",{x:"98.3989",y:"60.6366",width:"30.28",height:"30.28",stroke:"black",strokeWidth:"0.344091"})),Q.createElement("rect",{x:"102.355",y:"64.5955",width:"22.0218",height:"4.12909",fill:"black",fillOpacity:"0.2"}),Q.createElement("rect",{x:"102.355",y:"70.4438",width:"19.2691",height:"4.12909",fill:"black",fillOpacity:"0.2"}),Q.createElement("g",{clipPath:"url(#clip0_351_120552)"},Q.createElement("path",{d:"M52.4628 72.139C52.4653 75.5713 50.0667 78.5645 46.8075 79.1817C46.4186 79.2545 45.9344 79.3649 45.4652 79.3423C43.9397 79.2746 42.7856 78.9007 41.6465 77.9398C40.0834 76.6175 39.3433 74.8813 39.3884 72.8616C39.4461 70.2497 40.5727 68.1497 42.8057 66.7597C44.8831 65.4651 47.0785 65.3396 49.2663 66.5113C51.2635 67.5801 52.4603 69.7429 52.4628 72.139ZM51.8631 72.2494C51.8631 72.1992 51.8606 72.149 51.8556 72.0988C51.8105 71.7074 51.7804 71.3135 51.7101 70.9297C51.1732 67.9741 48.4785 65.9945 45.558 66.3959C41.215 66.993 38.6809 72.1214 40.816 75.9527C41.9451 77.9774 44.5018 79.0864 46.4563 78.705C49.5423 78.1029 51.7879 75.3906 51.8631 72.2494Z",fill:"black"}),Q.createElement("path",{d:"M42.6576 74.7006C44.424 75.9777 47.5 76.2537 49.0179 74.3719C49.038 74.3468 49.0581 74.3268 49.0506 74.3217C48.9778 74.1812 48.7495 74.0081 48.9276 73.8551C49.1108 73.697 49.2563 73.8952 49.3767 74.0156C49.5524 74.1913 49.7305 74.3694 49.876 74.5701C49.9362 74.6554 50.0767 74.7934 49.9362 74.9139C49.8158 75.0318 49.7054 74.9716 49.5624 74.8637C49.5047 74.821 49.442 74.7658 49.4018 74.7332C49.2061 74.9139 49.033 75.0895 48.8448 75.2501C47.7384 76.196 46.4387 76.4067 45.0512 76.1884C44.0827 76.0354 43.1895 75.6741 42.4092 75.0594C42.3867 75.0418 42.3089 74.959 42.2738 74.9565C42.2035 74.9515 42.1859 74.9992 42.0931 75.0318C42.0279 75.0544 41.9902 75.1221 41.8598 74.9841C41.7519 74.8737 41.8272 74.7583 41.8773 74.7182C42.1408 74.5074 42.4193 74.3142 42.7053 74.1336C42.758 74.101 42.8784 74.0734 42.9386 74.1787C43.0039 74.2916 42.9437 74.3518 42.9035 74.4146C42.8433 74.5074 42.7505 74.5827 42.6551 74.6755C42.6526 74.6855 42.6526 74.6956 42.6576 74.7006Z",fill:"black"}),Q.createElement("path",{d:"M49.5523 72.5779C49.5824 72.5804 49.6151 72.5729 49.6427 72.5603C49.8384 72.4575 49.8308 72.1639 49.8308 71.9858C49.8283 71.6094 49.7832 71.2958 49.7807 70.9345C49.7807 70.7865 49.7731 70.6284 49.8133 70.4904C49.8384 70.4051 49.9488 70.2972 50.0265 70.2922C50.1043 70.2872 50.2247 70.3223 50.2624 70.4603C50.4054 71.0549 50.4104 71.8403 50.3025 72.3496C50.2122 72.7786 49.8308 72.9894 49.5047 72.9919C49.1509 72.9944 48.762 72.7385 48.6566 72.3044C48.5437 71.8377 48.5362 71.3435 48.486 70.8617C48.4835 70.8341 48.4835 70.7438 48.486 70.7162C48.5061 70.5481 48.5663 70.4528 48.7821 70.4653C48.9401 70.4703 48.9853 70.6962 49.0154 70.8266C49.0681 71.0574 49.0505 71.3033 49.0907 71.5392C49.1534 71.898 49.191 72.5528 49.5523 72.5779Z",fill:"black"}),Q.createElement("path",{d:"M42.7832 70.9848C42.7983 70.8819 42.7807 70.7339 42.989 70.7013C43.1721 70.6737 43.2549 70.8593 43.2625 70.9471C43.3051 71.4414 43.3528 71.9407 43.3126 72.4325C43.275 72.8891 42.866 73.273 42.4972 73.3181C42.0732 73.3708 41.604 73.1124 41.4635 72.6257C41.333 72.1765 41.2778 71.6396 41.2804 71.2206C41.2804 71.1504 41.3029 71.0174 41.4309 70.9973C41.594 70.9622 41.6316 71.1077 41.6542 71.1855C41.7495 71.4991 41.7972 71.8253 41.8951 72.1389C41.9528 72.3246 42.0456 72.5128 42.1685 72.6583C42.3693 72.8941 42.6327 72.849 42.713 72.5529C42.7908 72.2619 42.7506 71.198 42.7832 70.9848Z",fill:"black"})),Q.createElement("path",{d:"M97.2147 88.2858L97.2147 88.2858L95.4155 90.1223L95.8404 92.7175C95.8404 92.7175 95.8404 92.7175 95.8404 92.7175C95.9069 93.1235 95.4922 93.4743 95.107 93.2618L92.891 92.0416L90.675 93.2618L90.6749 93.2619L97.2147 88.2858ZM97.2147 88.2858C97.5016 87.9928 97.3551 87.4674 96.9341 87.4033L97.2147 88.2858ZM90.3664 90.1223L89.9415 92.7175L92.4384 84.6696L92.4383 84.6698C92.4383 84.6698 92.4383 84.6698 92.4382 84.6699L91.3279 87.0259L88.8479 87.4033C88.8479 87.4033 88.8479 87.4033 88.8479 87.4033C88.4269 87.4674 88.2803 87.9928 88.5673 88.2858L88.5673 88.2858L90.3664 90.1223Z",fill:"#FFC700",stroke:"black",strokeWidth:"0.344091"}),Q.createElement("rect",{x:"27.172",y:"55.1305",width:"141.765",height:"41.2909",stroke:"black",strokeWidth:"0.344091"}),Q.createElement("rect",{x:"27.172",y:"103.172",width:"141.765",height:"41.2909",fill:"#93E396"}),Q.createElement("g",{filter:"url(#filter6_d_351_120552)"},Q.createElement("rect",{x:"32.5081",y:"108.506",width:"26.8391",height:"30.6241",fill:"white"}),Q.createElement("rect",{x:"32.6801",y:"108.678",width:"26.495",height:"30.28",stroke:"black",strokeWidth:"0.344091"})),Q.createElement("rect",{x:"35.4333",y:"111.088",width:"20.9895",height:"18.5809",fill:"#F5F5F5",stroke:"black",strokeWidth:"0.344091"}),Q.createElement("g",{clipPath:"url(#clip1_351_120552)"},Q.createElement("path",{d:"M45.5755 113.495C47.3906 113.521 48.8594 114.261 50.2344 115.453C53.0677 117.912 53.2735 123.865 48.8125 126.552C45.7344 128.406 41.6458 127.526 39.6719 124.149C37.4896 120.417 39.2214 115.445 43.2344 113.925C43.987 113.638 44.7656 113.487 45.5755 113.495ZM51.6276 119.922C51.6693 118.594 51 117.055 49.8333 115.844C48.3386 114.294 46.4115 113.763 44.2891 114.255C40.3828 115.156 38.263 119.57 39.9349 123.261C41.1172 125.87 43.8958 127.331 46.5521 126.74C49.5443 126.073 51.6406 123.435 51.6276 119.922Z",fill:"black"}),Q.createElement("path",{d:"M50.0078 122C49.2031 124.023 47.7682 125.206 45.5989 125.232C43.7396 125.253 42.3724 124.333 41.5417 122.617C41.4896 122.641 41.4271 122.672 41.3672 122.693C41.2812 122.724 41.2318 122.745 41.1536 122.646C41.1172 122.599 41.0599 122.516 41.1667 122.43C41.4297 122.213 41.7135 122.026 42 121.846C42.0443 121.818 42.1484 121.815 42.2083 121.906C42.2734 122.008 42.2318 122.073 42.1927 122.125C42.1198 122.221 42.0156 122.294 41.9114 122.385C42.9062 123.909 44.2318 124.825 46.1276 124.635C47.7995 124.469 49.0443 123.229 49.5 121.768C49.5208 121.703 49.4479 121.656 49.3776 121.57C49.2604 121.432 49.1797 121.409 49.3125 121.187C49.4088 121.049 49.5573 121.13 49.6432 121.174C49.9167 121.318 50.1875 121.476 50.4271 121.669C50.5208 121.745 50.6927 121.857 50.5807 122.057C50.4766 122.26 50.3333 122.128 50.1641 122.078C50.1172 122.057 50.0703 122.029 50.0078 122Z",fill:"black"}),Q.createElement("path",{d:"M42.5313 117.878C42.6797 117.638 42.8412 117.448 43.1354 117.508C43.4167 117.565 43.5313 117.81 43.5339 118.036C43.5417 118.484 43.5339 118.945 43.4349 119.38C43.3334 119.828 43.125 120.255 42.9401 120.68C42.8099 120.979 42.6042 121.039 42.3802 120.82C41.6615 120.112 41.2266 119.263 41.2735 118.226C41.2865 117.932 41.4453 117.69 41.7396 117.591C42.0573 117.484 42.3021 117.63 42.5313 117.878ZM43.1094 117.927C43.1094 117.927 43.0521 117.844 42.9558 117.872C42.8828 117.867 42.8021 118.177 42.7552 118.341C42.711 118.495 42.7188 118.607 42.6094 118.625C42.4349 118.641 42.4479 118.492 42.375 118.419C42.3412 118.383 42.1771 117.919 41.9427 118.005C41.7917 118.06 41.7839 118.281 41.7917 118.414C41.8282 119.088 42.1354 119.667 42.5 120.286C42.8334 119.487 43.3308 118.414 43.1094 117.927Z",fill:"black"}),Q.createElement("path",{d:"M48.4791 117.661C48.6692 117.555 48.8489 117.463 49.026 117.5C49.289 117.555 49.3411 117.831 49.3645 118.07C49.44 118.833 49.1093 119.479 48.7525 120.115C48.6718 120.258 48.5572 120.383 48.4817 120.531C48.2656 120.953 47.8932 120.875 47.6874 120.513C47.2578 119.75 47.013 118.911 47.0911 118.018C47.1197 117.677 47.2473 117.352 47.6249 117.263C48.0052 117.169 48.3359 117.409 48.4791 117.661ZM48.0104 120.148C48.0494 120.333 48.0885 120.19 48.1249 120.154C48.3854 119.763 48.6484 119.372 48.802 118.943C48.9218 118.607 49.2369 117.755 48.9062 117.841C48.8255 117.846 48.7421 118.094 48.6718 118.219C48.6145 118.318 48.4973 118.476 48.4479 118.484C48.2578 118.49 48.2812 118.318 48.2447 118.219C48.1588 117.995 48.1666 117.643 47.8463 117.685C47.5286 117.726 47.565 118.078 47.6067 118.307C47.7161 118.924 47.8723 119.536 48.0104 120.148Z",fill:"black"})),Q.createElement("g",{filter:"url(#filter7_d_351_120552)"},Q.createElement("rect",{x:"63.4768",y:"108.506",width:"30.6241",height:"30.6241",fill:"#FFD45B"}),Q.createElement("rect",{x:"63.6489",y:"108.678",width:"30.28",height:"30.28",stroke:"black",strokeWidth:"0.344091"})),Q.createElement("rect",{x:"67.6057",y:"112.637",width:"22.0218",height:"4.12909",fill:"black",fillOpacity:"0.2"}),Q.createElement("rect",{x:"67.6057",y:"118.485",width:"19.2691",height:"4.12909",fill:"black",fillOpacity:"0.2"}),Q.createElement("g",{filter:"url(#filter8_d_351_120552)"},Q.createElement("rect",{x:"98.2268",y:"108.506",width:"30.6241",height:"30.6241",fill:"#FFD45B"}),Q.createElement("rect",{x:"98.3989",y:"108.678",width:"30.28",height:"30.28",stroke:"black",strokeWidth:"0.344091"})),Q.createElement("rect",{x:"102.355",y:"112.637",width:"22.0218",height:"4.12909",fill:"black",fillOpacity:"0.2"}),Q.createElement("rect",{x:"102.355",y:"118.485",width:"19.2691",height:"4.12909",fill:"black",fillOpacity:"0.2"}),Q.createElement("g",{filter:"url(#filter9_d_351_120552)"},Q.createElement("rect",{x:"134",y:"108.506",width:"30.6241",height:"30.6241",fill:"#FFD45B"}),Q.createElement("rect",{x:"134.172",y:"108.678",width:"30.28",height:"30.28",stroke:"black",strokeWidth:"0.344091"})),Q.createElement("rect",{x:"138.129",y:"112.637",width:"22.0218",height:"4.12909",fill:"black",fillOpacity:"0.2"}),Q.createElement("rect",{x:"138.129",y:"118.485",width:"19.2691",height:"4.12909",fill:"black",fillOpacity:"0.2"}),Q.createElement("rect",{x:"27.172",y:"103.172",width:"141.765",height:"41.2909",stroke:"black",strokeWidth:"0.344091"}),Q.createElement("path",{d:"M163.058 5.32444L163.144 5.46819L163.29 5.38648L163.93 5.02854C164.401 4.76472 164.965 4.6956 165.497 4.83787C166.028 4.98013 166.482 5.32166 166.759 5.78594C167.036 6.25002 167.113 6.7986 166.976 7.31116C166.839 7.82371 166.498 8.26021 166.026 8.52392L166.026 8.52399L165.449 8.84723L165.449 8.84732L161.674 10.9565L159.121 6.67356C158.844 6.20954 158.767 5.66108 158.904 5.1487C159.041 4.63631 159.382 4.20002 159.854 3.93649C160.326 3.67286 160.889 3.60389 161.421 3.74625C161.952 3.8886 162.406 4.23014 162.682 4.69436L163.058 5.32444Z",fill:"#F24E1E",stroke:"black",strokeWidth:"0.344091"}),Q.createElement("g",{clipPath:"url(#clip2_351_120552)"},Q.createElement("path",{d:"M50.4871 107.641C48.8069 109.488 47.7973 109.61 46.2305 108.164C44.1148 111.157 42.1849 111.774 39.8514 110.153C39.3857 111.079 38.7655 112.239 37.5921 112.305C36.4645 112.372 35.5675 111.561 35.5655 111.477C35.4727 112.106 34.6737 113.559 33.4639 113.686C32.2099 113.819 31.2714 113.252 30.5935 112.255C29.723 110.962 29.5512 109.451 29.3703 107.956C29.191 106.467 29.0468 104.962 28.982 103.463C28.9502 102.678 29.0635 101.875 29.1937 101.087C29.2925 100.431 29.6597 99.9338 30.3896 99.8121C31.1194 99.6905 31.6381 100.065 31.9285 100.641C32.3488 101.47 32.6502 102.369 32.9353 103.077C33.2923 102.692 33.636 101.824 34.3226 101.609C35.0214 101.392 35.4604 101.455 36.3429 102.413C36.466 102.004 36.5602 101.635 36.6897 101.277C36.8358 100.882 36.9849 100.473 37.1984 100.113C37.8619 99.0194 38.6917 99.0087 39.483 100.068C41.3417 97.8755 42.7542 97.6508 45.017 99.1989C45.1976 98.6844 45.3353 98.1548 45.5664 97.6599C45.9532 96.8325 46.466 96.1419 47.5332 96.2202C48.4276 96.284 49.1693 96.9204 49.4516 97.9734C49.6358 98.6678 49.71 99.3903 49.8425 100.137C50.3717 99.6633 50.906 99.2599 51.6015 99.843C51.9154 98.8326 52.1853 97.879 52.518 96.9418C52.6775 96.4977 52.9121 96.067 53.1866 95.691C53.8238 94.8256 54.8328 94.8797 55.2722 95.86C55.5988 96.6025 55.8035 97.4282 55.8874 98.2393C56.1186 100.567 56.1084 102.892 55.4407 105.164C55.1061 106.296 54.4433 107.24 53.5059 107.974C52.1712 109.011 51.4815 108.934 50.4871 107.641ZM39.1546 101.785C39.0891 101.528 38.9628 100.247 38.431 100.253C38.0747 100.207 37.9209 100.878 37.8281 101.226C37.5065 102.512 37.3242 103.834 36.9597 105.104C36.8457 105.497 36.6329 105.708 36.3764 105.748C36.1323 105.836 36.0697 105.286 36.0118 105.034C35.8691 104.375 35.8318 103.695 35.6418 103.054C35.5686 102.793 35.455 102.425 34.9767 102.437C34.7887 102.44 34.5019 102.539 34.3083 102.901C34.0965 103.293 33.9031 103.707 33.7862 104.14C33.5734 104.91 33.4662 105.712 33.2259 106.475C33.1403 106.751 33.0228 107.08 32.747 107.222C32.492 107.268 32.2728 107.149 32.1872 106.305C32.1341 105.818 32.0887 105.335 32.0157 104.847C31.8459 103.7 31.6608 102.544 31.3612 101.424C31.2831 101.119 31.078 100.495 30.4631 100.684C29.8482 100.874 29.9096 101.47 29.9595 101.945C29.9644 101.989 29.9784 102.044 29.9848 102.095C30.134 103.39 30.2893 104.683 30.4324 105.98C30.6126 107.625 30.698 109.282 30.9957 110.903C31.2384 112.233 32.1254 112.904 33.1276 112.829C34.0977 112.757 34.5588 112.118 34.7112 110.629C34.7807 109.935 34.8013 109.227 34.9106 108.536C34.9416 108.326 35.0266 107.947 35.3415 107.957C35.6613 108.012 35.7028 108.352 35.753 108.574C35.8707 109.136 35.8113 109.743 36.0098 110.264C36.1478 110.626 36.541 110.993 36.9117 111.146C37.3912 111.342 37.9451 111.194 38.2282 110.698C38.5189 110.182 38.8062 109.627 38.9192 109.052C39.3781 106.599 39.4945 104.13 39.1546 101.785ZM50.8522 100.321C50.6149 100.258 50.3557 100.923 50.2715 101.178C50.0578 101.792 49.9284 102.43 49.7147 103.044C49.647 103.237 49.5064 103.527 49.2543 103.533C48.9942 103.482 48.9645 103.366 48.8893 103.021C48.8485 102.837 48.8275 102.628 48.8218 102.427C48.7926 101.55 48.8153 100.673 48.7357 99.8021C48.6756 99.1606 48.5757 98.4902 48.3279 97.9031C48.1793 97.5509 47.7245 97.1208 47.3882 97.1028C47.0656 97.0877 46.6017 97.4861 46.4018 97.8234C46.0823 98.38 45.9086 99.0228 45.7102 99.6459C45.6547 99.8358 45.6715 100.105 45.7672 100.275C46.8416 102.238 46.9952 104.339 46.6722 106.483C46.563 107.2 46.9941 107.487 47.413 107.803C47.8581 108.144 48.4053 108.147 48.8005 107.76C49.2155 107.348 49.5459 106.834 49.8595 106.331C50.0246 106.061 50.0502 105.703 50.206 105.423C50.2847 105.273 50.5023 105.107 50.6476 105.115C50.7592 105.119 50.9256 105.362 50.9616 105.529C51.0227 105.793 50.986 106.082 51.0211 106.346C51.1198 107.062 51.2231 107.517 51.6431 107.735C51.8624 107.881 52.5903 107.395 52.9417 107.091C54.0901 106.088 54.7064 104.76 54.7639 103.255C54.8461 101.237 54.8412 99.2094 54.7797 97.1893C54.7667 96.7568 54.7833 95.881 54.1461 95.9074C53.7619 95.8041 53.4068 96.5518 53.3005 96.9498C52.8868 98.4345 52.594 99.9599 52.2232 101.46C52.1499 101.758 52.0432 102.358 51.7501 102.433C51.4493 102.477 51.3007 102.405 51.1703 101.488C51.1212 101.169 51.1439 100.292 50.8522 100.321ZM45.4285 102.079C45.2305 101.635 45.0085 100.996 44.6721 100.419C43.5398 98.484 41.2245 98.5104 40.1057 100.468C39.9544 100.741 39.8878 101.142 39.9537 101.45C40.4517 103.651 40.4271 105.869 40.2406 108.089C40.1474 109.225 40.646 109.852 41.8126 109.938C43.2636 110.041 44.5426 109.168 45.2218 107.602C45.9719 105.856 45.931 103.407 45.4285 102.079Z",fill:"black"}),Q.createElement("path",{d:"M59.6396 92.9477C59.6565 93.5223 59.7124 95.0885 59.7076 96.163C59.6942 97.6363 59.661 99.1083 59.5957 100.582C59.5728 101.154 59.472 101.726 59.3543 102.283C59.2411 102.806 58.8621 103.105 58.3303 103.111C57.7603 103.12 57.3065 102.872 57.0987 102.313C57.001 102.059 56.917 101.781 56.9124 101.509C56.9306 98.9612 57.0382 96.5596 57.0869 94.004C57.0898 93.6845 57.1071 93.2183 57.1818 92.9C57.328 92.2512 57.6344 91.8216 58.4066 91.8907C59.0794 91.9528 59.6227 92.3732 59.6396 92.9477ZM58.2221 102.332C58.2955 102.339 58.3705 102.352 58.4373 102.283C58.5789 102.175 58.5611 102.004 58.5634 101.861C58.6363 98.9672 58.7107 96.0798 58.7514 93.1879C58.7564 92.9785 58.7327 92.5553 58.3965 92.5632C57.9562 92.5458 58.0021 93.3861 57.9966 93.7713C57.9589 96.3956 57.9427 99.0275 57.9433 101.649C57.9446 101.882 57.9833 102.263 58.2221 102.332Z",fill:"black"}),Q.createElement("path",{d:"M59.9054 105.251C60.1529 106.345 59.539 107.276 58.6658 107.474C57.8782 107.649 57.0496 107.055 56.8431 106.171C56.6145 105.176 57.0259 104.394 57.9922 104.179C58.8348 103.99 59.7065 104.372 59.9054 105.251ZM57.6513 105.847C57.8325 106.555 58.3501 106.468 58.4661 106.438C58.8092 106.305 59.0463 106.062 58.7828 105.388C58.71 105.205 58.5347 105.003 58.249 105.031C57.696 105.081 57.5609 105.519 57.6513 105.847Z",fill:"black"}),Q.createElement("path",{d:"M42.9659 102.547C42.9771 102.921 43.0739 105.537 43.0732 107.085C43.0759 107.299 42.9866 107.738 42.5969 107.74C42.2333 107.768 42.0919 107.343 42.0754 107.126C41.9862 105.607 41.9396 104.078 41.9404 102.555C41.9392 102.322 42.0882 101.913 42.4165 101.848C42.8885 101.812 42.9547 102.172 42.9659 102.547Z",fill:"black"})),Q.createElement("g",{filter:"url(#filter10_d_351_120552)",className:ea()(R$,R5)},Q.createElement("rect",{x:"132.649",y:"60.1077",width:"30.6241",height:"30.6241",fill:"#FFD45B"}),Q.createElement("rect",{x:"132.821",y:"60.2797",width:"30.28",height:"30.28",stroke:"black",strokeWidth:"0.344091"})),Q.createElement("rect",{x:"136.782",y:"64.2385",width:"22.0218",height:"4.12909",fill:"black",fillOpacity:"0.2",className:ea()(R$,R5)}),Q.createElement("rect",{x:"136.782",y:"70.0869",width:"19.2691",height:"4.12909",fill:"black",fillOpacity:"0.2",className:ea()(R$,R5)}),Q.createElement("g",{filter:"url(#filter11_d_351_120552)",className:ea()(R$,R2)},Q.createElement("rect",{x:"32.7107",y:"12.5178",width:"26.8391",height:"30.6241",fill:"white"}),Q.createElement("rect",{x:"32.8827",y:"12.6899",width:"26.495",height:"30.28",stroke:"black",strokeWidth:"0.344091"})),Q.createElement("rect",{x:"35.6359",y:"15.0993",width:"20.9895",height:"18.5809",fill:"#F5F5F5",stroke:"black",strokeWidth:"0.344091",className:ea()(R$,R2)}),Q.createElement("path",{className:ea()(R$,R2),d:"M40.2485 22.3512C41.0198 21.4451 41.8657 20.5791 42.8005 19.8422C43.4514 19.3289 43.6751 19.3031 44.0335 19.2056C44.131 19.1798 44.217 19.1196 44.3002 19.0594C47.7898 16.5963 52.2372 18.3425 53.0974 22.6896C53.668 25.5742 52.1971 28.4387 49.668 29.6086C49.6278 29.6287 49.5676 29.6345 49.5476 29.666C49.0458 30.4517 48.025 30.7556 47.4027 30.9105C47.2766 30.9563 47.1791 31.0882 47.0644 31.1743C46.9755 31.2402 46.8866 31.3119 46.7862 31.3578C43.4973 32.8832 39.9618 30.8416 39.1876 27.4638C39.0786 26.9878 38.5997 24.1147 40.2485 22.3512ZM47.0988 29.4251C48.2716 29.4194 49.0372 29.2273 49.7225 28.8516C53.02 27.0423 53.5132 22.1275 50.6114 19.7275C48.9483 18.354 46.8206 18.1217 44.9511 19.4379C42.7288 21.0006 41.9231 24.2036 43.1675 26.6237C44.0622 28.3642 45.4816 29.3248 47.0988 29.4251ZM48.2199 30.1678C48.3633 30.1162 48.3834 30.0789 48.3604 30.0617C48.3604 30.0617 48.3002 30.0617 48.1999 30.0646C45.6192 30.2596 43.6779 29.233 42.5281 26.919C41.4041 24.6595 41.6765 22.4401 43.0041 20.3153C42.898 20.3669 42.812 20.43 42.7346 20.5017C40.9453 22.1218 40.4177 24.8659 41.45 27.2115C42.4019 29.3764 44.4005 30.661 46.6486 30.5004C47.1762 30.4631 47.6952 30.2825 48.2199 30.1678ZM40.6413 22.7297C40.6442 22.6465 40.5668 22.7498 40.5553 22.7641C40.5152 22.8186 40.475 22.8759 40.4406 22.9333C39.9675 23.7304 39.6722 24.5935 39.632 25.5197C39.5374 27.6301 40.2772 29.3793 42.0636 30.5721C43.2507 31.3664 44.5697 31.5298 45.9489 31.0997C43.9331 30.8961 42.3618 29.9613 41.3009 28.2352C40.2399 26.5147 40.0707 24.6681 40.6413 22.7297Z",fill:"black"}),Q.createElement("path",{className:ea()(R$,R2),d:"M49.2781 24.5675C49.6738 24.5819 49.8028 24.7883 49.6738 25.1611C49.3526 26.0787 48.4494 26.526 47.529 26.2048C46.9841 26.0127 46.5569 25.6629 46.2616 25.164C46.035 24.7797 46.1354 24.5589 46.5798 24.5303C47.0444 24.4987 48.8451 24.5503 49.2781 24.5675ZM49.1892 25.0149C48.3978 25.0149 47.6265 25.0149 46.8465 25.0149C47.6379 25.9353 48.8078 25.9525 49.1892 25.0149Z",fill:"black"}),Q.createElement("path",{className:ea()(R$,R2),d:"M46.0523 22.9417C46.0552 23.389 45.625 23.7962 45.1548 23.7933C44.7447 23.7905 44.458 23.4206 44.4551 23.0277C44.4494 22.6349 44.8508 22.2478 45.2924 22.2363C45.7168 22.222 46.0523 22.5317 46.0523 22.9417ZM45.1921 22.6578C44.9799 22.6922 44.9139 22.893 44.9311 23.0449C44.9541 23.2657 45.1204 23.3202 45.2236 23.3231C45.3211 23.3259 45.5132 23.2284 45.5534 23.0392C45.605 22.8471 45.496 22.5861 45.1921 22.6578Z",fill:"black"}),Q.createElement("path",{className:ea()(R$,R2),d:"M51.5318 23.0622C51.5261 23.4952 51.2193 23.8135 50.8092 23.8106C50.3676 23.8077 50.0494 23.4493 50.0637 22.9704C50.0752 22.5547 50.3848 22.2335 50.7691 22.2421C51.1677 22.2536 51.5376 22.6493 51.5318 23.0622ZM51.1361 23.0507C51.1361 22.8299 51.0185 22.6808 50.835 22.6808C50.7232 22.6808 50.534 22.7669 50.534 23.002C50.534 23.412 50.835 23.3891 50.835 23.3891C50.9956 23.3833 51.1361 23.3174 51.1361 23.0507Z",fill:"black"}),Q.createElement("defs",null,Q.createElement("filter",{id:"filter0_d_351_120552",x:"63.4768",y:"13.321",width:"31.3122",height:"31.3122",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},Q.createElement("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),Q.createElement("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),Q.createElement("feOffset",{dx:"0.688182",dy:"0.688182"}),Q.createElement("feComposite",{in2:"hardAlpha",operator:"out"}),Q.createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"}),Q.createElement("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_351_120552"}),Q.createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_351_120552",result:"shape"})),Q.createElement("filter",{id:"filter1_d_351_120552",x:"98.2268",y:"13.321",width:"31.3122",height:"31.3122",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},Q.createElement("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),Q.createElement("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),Q.createElement("feOffset",{dx:"0.688182",dy:"0.688182"}),Q.createElement("feComposite",{in2:"hardAlpha",operator:"out"}),Q.createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"}),Q.createElement("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_351_120552"}),Q.createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_351_120552",result:"shape"})),Q.createElement("filter",{id:"filter2_d_351_120552",x:"132.977",y:"13.321",width:"31.3122",height:"31.3122",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},Q.createElement("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),Q.createElement("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),Q.createElement("feOffset",{dx:"0.688182",dy:"0.688182"}),Q.createElement("feComposite",{in2:"hardAlpha",operator:"out"}),Q.createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"}),Q.createElement("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_351_120552"}),Q.createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_351_120552",result:"shape"})),Q.createElement("filter",{id:"filter3_d_351_120552",x:"32.5081",y:"60.4646",width:"27.5273",height:"31.3122",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},Q.createElement("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),Q.createElement("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),Q.createElement("feOffset",{dx:"0.688182",dy:"0.688182"}),Q.createElement("feComposite",{in2:"hardAlpha",operator:"out"}),Q.createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"}),Q.createElement("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_351_120552"}),Q.createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_351_120552",result:"shape"})),Q.createElement("filter",{id:"filter4_d_351_120552",x:"63.4768",y:"60.4646",width:"31.3122",height:"31.3122",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},Q.createElement("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),Q.createElement("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),Q.createElement("feOffset",{dx:"0.688182",dy:"0.688182"}),Q.createElement("feComposite",{in2:"hardAlpha",operator:"out"}),Q.createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"}),Q.createElement("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_351_120552"}),Q.createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_351_120552",result:"shape"})),Q.createElement("filter",{id:"filter5_d_351_120552",x:"98.2268",y:"60.4646",width:"31.3122",height:"31.3122",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},Q.createElement("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),Q.createElement("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),Q.createElement("feOffset",{dx:"0.688182",dy:"0.688182"}),Q.createElement("feComposite",{in2:"hardAlpha",operator:"out"}),Q.createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"}),Q.createElement("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_351_120552"}),Q.createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_351_120552",result:"shape"})),Q.createElement("filter",{id:"filter6_d_351_120552",x:"32.5081",y:"108.506",width:"27.5273",height:"31.3122",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},Q.createElement("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),Q.createElement("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),Q.createElement("feOffset",{dx:"0.688182",dy:"0.688182"}),Q.createElement("feComposite",{in2:"hardAlpha",operator:"out"}),Q.createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"}),Q.createElement("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_351_120552"}),Q.createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_351_120552",result:"shape"})),Q.createElement("filter",{id:"filter7_d_351_120552",x:"63.4768",y:"108.506",width:"31.3122",height:"31.3122",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},Q.createElement("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),Q.createElement("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),Q.createElement("feOffset",{dx:"0.688182",dy:"0.688182"}),Q.createElement("feComposite",{in2:"hardAlpha",operator:"out"}),Q.createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"}),Q.createElement("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_351_120552"}),Q.createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_351_120552",result:"shape"})),Q.createElement("filter",{id:"filter8_d_351_120552",x:"98.2268",y:"108.506",width:"31.3122",height:"31.3122",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},Q.createElement("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),Q.createElement("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),Q.createElement("feOffset",{dx:"0.688182",dy:"0.688182"}),Q.createElement("feComposite",{in2:"hardAlpha",operator:"out"}),Q.createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"}),Q.createElement("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_351_120552"}),Q.createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_351_120552",result:"shape"})),Q.createElement("filter",{id:"filter9_d_351_120552",x:"134",y:"108.506",width:"31.3122",height:"31.3122",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},Q.createElement("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),Q.createElement("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),Q.createElement("feOffset",{dx:"0.688182",dy:"0.688182"}),Q.createElement("feComposite",{in2:"hardAlpha",operator:"out"}),Q.createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"}),Q.createElement("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_351_120552"}),Q.createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_351_120552",result:"shape"})),Q.createElement("filter",{id:"filter10_d_351_120552",x:"132.649",y:"60.1077",width:"31.3122",height:"31.3122",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},Q.createElement("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),Q.createElement("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),Q.createElement("feOffset",{dx:"0.688182",dy:"0.688182"}),Q.createElement("feComposite",{in2:"hardAlpha",operator:"out"}),Q.createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"}),Q.createElement("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_351_120552"}),Q.createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_351_120552",result:"shape"})),Q.createElement("filter",{id:"filter11_d_351_120552",x:"32.7107",y:"12.5178",width:"27.5273",height:"31.3122",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},Q.createElement("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),Q.createElement("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),Q.createElement("feOffset",{dx:"0.688182",dy:"0.688182"}),Q.createElement("feComposite",{in2:"hardAlpha",operator:"out"}),Q.createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"}),Q.createElement("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_351_120552"}),Q.createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_351_120552",result:"shape"})),Q.createElement("clipPath",{id:"clip0_351_120552"},Q.createElement("rect",{width:"14.4518",height:"14.4518",fill:"white",transform:"translate(38.6985 65.2793)"})),Q.createElement("clipPath",{id:"clip1_351_120552"},Q.createElement("rect",{width:"15",height:"15",fill:"white",transform:"translate(38 113)"})),Q.createElement("clipPath",{id:"clip2_351_120552"},Q.createElement("rect",{width:"36.296",height:"36.296",fill:"white",transform:"translate(23 89.9951) rotate(-14.3491)"}))))}var Ft=n(99969),Fn=n(537240);let Fa="browse_templates_make_something_onboarding--faded--UuXrP";var Fr=n(764350),Fl=n(325570),Fi=n(518577),Fo=n(13303);let Fs="loadingMakeSomethingTemplate",Fc=e=>{let t=(0,e_.Xr)(RP.w),{name:n}=(0,t6.j6)(),a=(0,$.wA)(),[r,l]=(0,Q.useState)(Ft.fD.NONE),i=(0,Q.useCallback)(e=>{a(RL.Ji({isActive:e}))},[a]);(0,Q.useEffect)(()=>(i(!0),()=>{i(!1)}),[i]);let o=(0,ww.g)();(0,Q.useEffect)(()=>{var e;return o&&(null==(e=eU.gw5)||e.setFigjamStarterKitEnabled(!0)),()=>{var e;null==(e=eU.gw5)||e.setFigjamStarterKitEnabled(!1)}},[o]);let s=(0,e_.Xr)(RF.Qs);(0,Q.useEffect)(()=>{s({type:"CLOSE"})},[s]);let c=(0,Rm.O)(),d=(0,Q.useRef)(Date.now()),u=e.onHideModal,m=(0,Q.useCallback)(()=>{u(),(0,uj.YQ)({id:Ft.Lz}),a(tB.b({figjam_browse_templates_modal_onboarding_item_selected:!0})),a(n9.Ce()),t(RP.tX.COMPLETED)},[u,a,t]),p=t=>{(!e.shouldAcceptClickUseCaseTile||e.shouldAcceptClickUseCaseTile())&&((0,cB.Cu)({trackingContext:n,text:`${t} tile clicked`},"CTA Clicked"),e.onClickUseCaseTile(t))};function _(t,a){var r;(0,cB.Cu)({trackingContext:n,text:`${t} tile hovered`},"CTA Hovered"),l(t),null==(r=e.onUseCasePreview)||r.call(e,t,a)}let f=[{headerText:(0,eO.t)("figjam_onboarding_make_something.templates_modal.button_title.brainstorm"),headerIcon:Fr.A,previewSvg:e=>Q.createElement(R7,{hovered:e}),useCase:Ft.fD.BRAINSTORM,previewType:eU.KpW.MAKE_SOMETHING_BRAINSTORM},{headerText:(0,eO.t)("figjam_onboarding_make_something.templates_modal.button_title.team_updates"),headerIcon:Fo.A,previewSvg:e=>Q.createElement(Fe,{hovered:e}),useCase:Ft.fD.UPDATES,previewType:eU.KpW.MAKE_SOMETHING_TEAM_UPDATES},{headerText:(0,eO.t)("figjam_onboarding_make_something.templates_modal.button_title.planning_ahead"),headerIcon:Fl.A,previewSvg:e=>Q.createElement(R9,{hovered:e}),useCase:Ft.fD.PLAN,previewType:eU.KpW.MAKE_SOMETHING_PLANNING},{headerText:(0,eO.t)("figjam_onboarding_make_something.templates_modal.button_title.team_chart"),headerIcon:Fi.A,previewSvg:e=>Q.createElement(R8,{hovered:e}),useCase:Ft.fD.TEAM,previewType:eU.KpW.MAKE_SOMETHING_TEAM_CHART}];function h(e,t){let n=f.findIndex(t=>t.useCase===e)+t;return n>f.length-1?n=0:n<0&&(n=f.length-1),n}return{hoveredUseCase:r,setHoveredUseCase:l,onClickCloseButton:()=>{e.onHideModal(),(0,uj.YQ)({id:Ft.Lz}),t(RP.tX.COMPLETED);let n=Math.round((Date.now()-d.current)/1e3);c({eventName:"msv2_dismissed",style:e.style,secondsAfterShown:n})},onClickMoreTemplatesButton:()=>{(0,RB.KF)(a,{templateInsertionLocation:e.templateInsertionLocation,triggeredFrom:"makeSomething",onTemplateInsertedCurrentFile:m,onTemplateInsertedNewFile:m,hideModal:()=>{a(n9.Ce())}}),c({eventName:"more_templates_clicked",style:e.style})},onClickUseCaseTile:p,onUseCasePreview:_,useCaseTiles:f,onListBoxKeydown:function(e){let t;if("Enter"===e.key){r!==Ft.fD.NONE&&f.find(({useCase:e})=>e===r)&&p(r);return}if("Home"===e.key)t=0;else if("End"===e.key)t=f.length-1;else if(["ArrowUp","ArrowLeft"].includes(e.key))t=h(r,-1);else{if(!["ArrowDown","ArrowRight"].includes(e.key))return;t=h(r,1)}let n=f[t];l(n.useCase),_(n.useCase,n.previewType)}}},Fd={[Ft.fD.BRAINSTORM]:Ft.qy.BRAINSTORM_TEMPLATE_BUTTON_INTERACTED,[Ft.fD.PLAN]:Ft.qy.PLANNING_AHEAD_TEMPLATE_BUTTON_INTERACTED,[Ft.fD.UPDATES]:Ft.qy.TEAM_UPDATES_TEMPLATE_BUTTON_INTERACTED,[Ft.fD.TEAM]:Ft.qy.TEAM_CHART_TEMPLATE_BUTTON_INTERACTED},Fu=(0,LS.n)(({onSuccess:e}={})=>{let t=(0,e_.Xr)(RP.w),n=(0,$.wA)(),a=(0,ae.aV)(),r=(0,ww.g)(),l=(0,$.d4)(e=>e.mirror.appModel.multiplayerSessionState===eU.kul.JOINED),{hubFiles:i,templates:o,categoryIds:s,isLoading:c}=(0,Sf.bg)({templatesShelfType:NK.cS.FIGJAM_SIMPLE_TEMPLATES_PICKER,source:"make-something-v2"}),{insertTemplate:d}=(0,ND.Fz)(),u=(0,Q.useMemo)(()=>{let e={};return Object.keys(i).filter(e=>s.some(t=>o[t].includes(e))).reduce((e,t)=>{let n=i[t];return e[(0,NU.a6)(n).name.toUpperCase()]=n,e},e),e},[i,o,s]),m=r&&!c&&!a&&l;return{insert:(0,Q.useCallback)(a=>{if(!m)return;if(a===Ft.fD.NONE){null==e||e();return}let r=u[a],l=Fd[a];d({template:{template:r,type:NV.n.HubFile},onSuccess:()=>{null==e||e(),n(eL.F.dequeue({matchType:Fs})),(0,uj.YQ)({id:l}),n(tB.b({figjam_browse_templates_modal_onboarding_item_selected:!0})),t(RP.tX.USE_CASE_STEPS),a===Ft.fD.PLAN?eU.glU.setCanvasZoomScale(.8):a===Ft.fD.TEAM&&eU.glU.setCanvasZoomScale(1.2)},triggeredFrom:"browse-templates-make-something",selectTemplateAfterInsertion:!1}),n(eL.F.enqueue({message:(0,eO.t)("figjam_onboarding_make_something.visual_bell.loading_template"),icon:RO.zX.SPINNER,type:Fs}))},[n,e,d,t,u,m]),canInsert:m}});function Fm(e){let t=(0,$.d4)(e=>{var t,n,a;let r=null==(n=null==(t=null==e?void 0:e.mirror)?void 0:t.appModel)?void 0:n.currentPage,l=null==(a=null==e?void 0:e.mirror)?void 0:a.sceneGraph,i=null==l?void 0:l.get(r);return!i||!i.childrenNodes.length||i.childrenAreAllGhosts}),n=(0,cY.Un)(),a=(0,Rm.O)(),r=!n||t,l=r?"banner":"popup",i=()=>{var t;null==(t=e.hideModal)||t.call(e)},o=e=>{a({eventName:"use_case_hovered",useCase:e,style:l})},s=e=>{a({eventName:"use_case_clicked",useCase:e,style:l})};return function(e){let t=(0,Rm.O)(),n=(0,ue.Z)(e);(0,Q.useEffect)(()=>{if(!n){t({eventName:"msv2_shown",style:e});return}if(n!==e){t({eventName:"msv2_style_changed",style:e,prevStyle:n});return}},[n,e,t])}(l),r?Q.createElement(Fp,{onHideModal:i,trackUseCaseHover:o,trackUseCaseClick:s}):Q.createElement(F_,{onHideModal:i,trackUseCaseHover:o,trackUseCaseClick:s})}function Fp(e){let{onHideModal:t,trackUseCaseHover:n,trackUseCaseClick:a}=e,[r,l]=(0,Q.useState)(!1),i=(0,Q.useRef)(!1),{insert:o,canInsert:s}=Fu({onSuccess:()=>{i.current=!1}}),{hoveredUseCase:c,setHoveredUseCase:d,onClickCloseButton:u,onClickMoreTemplatesButton:m,onClickUseCaseTile:p,onUseCasePreview:_,useCaseTiles:f,onListBoxKeydown:h}=Fc({templateInsertionLocation:NU.RD.CURRENT_FILE,onHideModal:t,onClickUseCaseTile(e){i.current=!0,o(e),t(),a(e)},onUseCasePreview(e,t){eU.gw5.clearFigjamStarterKitPreview(),eU.gw5.rotateFigjamStarterKitStrings(),eU.gw5.showFigjamStarterKitPreview(t),n(e)},shouldAcceptClickUseCaseTile:()=>!i.current,style:"banner"});function g(){l(!1),eU.gw5.clearFigjamStarterKitPreview(),d(Ft.fD.NONE)}let E=(0,cY.Un)();return s?Q.createElement(tS.Nb,{size:"fitContent",className:"browse_templates_make_something_onboarding--modalContainer--tYRC4",backgroundClassName:E?"browse_templates_make_something_onboarding--modalBackgroundWithPassthroughClicks--Lrf3O browse_templates_make_something_onboarding--modalBackground--Cyb7O":"browse_templates_make_something_onboarding--modalBackground--Cyb7O",hide:t,tintedModalBackground:!1,disableClickOutsideToHide:!0,enableEscapeToClose:!0,disableFocusOnRerender:!0},Q.createElement(hn.i,null,Q.createElement("div",{className:ea()("browse_templates_make_something_onboarding--closeHeader--tGUaS",{[Fa]:r})},Q.createElement(aO.Jn,{dataTestId:"MakeSomethingCloseButton",onClick:u,trackingEventName:"modal closed"})),Q.createElement("div",{className:"browse_templates_make_something_onboarding--makeSomethingContainer--rxr6G"},Q.createElement("div",{className:ea()("browse_templates_make_something_onboarding--titleContainer--41-OQ",{[Fa]:r})},Q.createElement("div",{className:"browse_templates_make_something_onboarding--title--OqmHP text--fontPos20Whyte--o3mBO text--_fontBaseWhyte--efAjI"},Q.createElement(eO.Tx,{id:"figjam_onboarding_make_something.templates_modal.main_title"})),Q.createElement("div",{className:"browse_templates_make_something_onboarding--subtitle--T-kBc text--fontPos14Whyte--pEiDq text--_fontBaseWhyte--efAjI"},Q.createElement(eO.Tx,{id:"figjam_onboarding_make_something.templates_modal.main_subtitle"})),Q.createElement("div",{className:ea()("browse_templates_make_something_onboarding--templateButtonContainer--ey3hb",{[Fa]:r})},Q.createElement(nc.vd,{className:ea()({"browse_templates_make_something_onboarding--templateButtonParent--4zUAI text--fontPos12Whyte---tkNx text--_fontBaseWhyte--efAjI":!0}),trackingEventName:"more templates click",onClick:m,onFocus:g,autoFocus:!1,tabIndex:0},Q.createElement("div",{className:"browse_templates_make_something_onboarding--templateButton--gmFOn"},Q.createElement("div",{className:"browse_templates_make_something_onboarding--templateButtonContent--Sl5TE text--fontPos11Whyte--wZDnv text--_fontBaseWhyte--efAjI"},Q.createElement(eM.B,{svg:Rj.A,className:"browse_templates_make_something_onboarding--templatesButtonIcon--m4jW4",useOriginalSrcFills_DEPRECATED:!0}),Q.createElement("div",{className:"browse_templates_make_something_onboarding--templatesButtonText--CzC6F"},Q.createElement(eO.Tx,{id:"figjam_onboarding_make_something.templates_modal.button_title.templates_button"}))))))),Q.createElement("div",{"aria-activedescendant":c,"aria-label":(0,eO.t)("figjam_onboarding_make_something.use_case_listbox.aria_label"),"aria-orientation":"horizontal",className:"browse_templates_make_something_onboarding--listItems--57vh3",onKeyDown:h,onMouseEnter:()=>l(!0),onMouseLeave:g,role:"listbox",tabIndex:0},f.map(({headerIcon:e,headerText:t,useCase:n,previewSvg:a,previewType:r})=>Q.createElement("div",{tabIndex:-1,role:"option",className:ea()("browse_templates_make_something_onboarding--useCaseContainer--nnBm-",{[Fa]:![Ft.fD.NONE,n].includes(c)}),onFocus:()=>_(n,r),onMouseEnter:()=>_(n,r),onClick:()=>p(n),key:n,"aria-label":t,"aria-selected":c===n,id:`make-something-onboarding-${n}`},Q.createElement("div",{className:"browse_templates_make_something_onboarding--useCaseHeader--0ad0i text--fontPos11Whyte--wZDnv text--_fontBaseWhyte--efAjI"},Q.createElement(eM.B,{svg:e,height:"28px",width:"28px",autosize:!0,className:"browse_templates_make_something_onboarding--useCaseIcon--0Dqvb",useOriginalSrcFills_DEPRECATED:!0}),t),Q.createElement("div",{className:"browse_templates_make_something_onboarding--previewContainer--lohmG"},a(c===n)))))))):null}function F_(e){let{onHideModal:t,trackUseCaseHover:n,trackUseCaseClick:a}=e,{shiftPopupUp:r,popupRef:l}=function(){var e;let t=null==(e=(0,RX.C)())?void 0:e.dltContainerNode,n=(0,Q.useRef)(null),[a,r]=(0,Q.useState)(!1);return(0,Q.useLayoutEffect)(()=>{let e=(0,cd.s)(()=>{var e;let a=null==(e=n.current)?void 0:e.getBoundingClientRect(),l=null==t?void 0:t.getBoundingClientRect();a&&l&&r(l.left-a.right<24)},100);return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[t]),{popupRef:n,shiftPopupUp:a}}(),i=(0,$.wA)(),o=(0,RR.Bq)(),{hoveredUseCase:s,setHoveredUseCase:c,onClickCloseButton:d,onClickMoreTemplatesButton:u,onClickUseCaseTile:m,onUseCasePreview:p,useCaseTiles:_,onListBoxKeydown:f}=Fc({templateInsertionLocation:NU.RD.NEW_FILE,onHideModal:t,onClickUseCaseTile(e){i(RM.zE({state:o,from:w0.f6.FIGJAM_MAKE_SOMETHING_POPUP,editorType:dV._Y.WHITEBOARD,team:void 0,openNewFileIn:w0.ai.NEW_TAB,figjamMakeSomethingUseCase:e})),a(e)},onUseCasePreview(e){n(e)},style:"popup"});return Q.createElement(tS.Nb,{modalRef:l,className:"browse_templates_make_something_onboarding--popupModal--y2117",backgroundClassName:ea()("browse_templates_make_something_onboarding--popupBackground--qUE9z",{"browse_templates_make_something_onboarding--popupBackgroundAboveDlt--3VTFo":r}),size:"fitContent",hide:t,tintedModalBackground:!1,disableClickOutsideToHide:!0,enableEscapeToClose:!0,disableFocusOnRerender:!0},Q.createElement(hn.i,null,Q.createElement("div",{className:"browse_templates_make_something_onboarding--popupHeader--gqTTZ"},Q.createElement("div",{className:"browse_templates_make_something_onboarding--popupTitle--qSiMo text--fontPos14Whyte--pEiDq text--_fontBaseWhyte--efAjI"},Q.createElement(eO.Tx,{id:"figjam_onboarding_make_something.popup.title"})),Q.createElement(aO.Jn,{dataTestId:"MakeSomethingCloseButton",onClick:d,trackingEventName:"modal closed"})),Q.createElement("div",{"aria-activedescendant":s,"aria-label":(0,eO.t)("figjam_onboarding_make_something.use_case_listbox.aria_label"),"aria-orientation":"horizontal",onKeyDown:f,role:"listbox",tabIndex:0},_.map(({headerIcon:e,headerText:t,useCase:n})=>Q.createElement("button",{className:ea()("browse_templates_make_something_onboarding--popupButton--r5tGZ text--fontPos12Whyte---tkNx text--_fontBaseWhyte--efAjI",{"browse_templates_make_something_onboarding--popupButtonActive--EbHMe":s===n}),tabIndex:-1,role:"option",onFocus:()=>p(n),onBlur:()=>c(Ft.fD.NONE),onMouseEnter:()=>p(n),onMouseLeave:()=>c(Ft.fD.NONE),onClick:()=>m(n),key:n,"aria-label":t,"aria-selected":s===n,id:`make-something-onboarding-${n}`},Q.createElement(eM.B,{className:ea()({"browse_templates_make_something_onboarding--brainstormIcon--O0mh5":n===Ft.fD.BRAINSTORM}),svg:e,height:n===Ft.fD.BRAINSTORM?"16px":"20px",width:n===Ft.fD.BRAINSTORM?"16px":"20px",autosize:!0,useOriginalSrcFills_DEPRECATED:!0}),t)),Q.createElement(t6.Co,{className:"browse_templates_make_something_onboarding--popupTemplates--aTTD4 text--fontPos12Whyte---tkNx text--_fontBaseWhyte--efAjI",trackingEventName:"more templates click",onFocus:()=>c(Ft.fD.NONE),onMouseEnter:()=>c(Ft.fD.NONE),onClick:u,tabIndex:0},Q.createElement(eO.Tx,{id:"figjam_onboarding_make_something.templates_modal.button_title.templates_button"})))))}function Ff(){let{insert:e,canInsert:t}=Fu(),[n,a]=(0,ef.fp)(RP.l5),r=(0,Q.useRef)(!1);return(0,Q.useEffect)(()=>{t&&n!==Ft.fD.NONE&&!r.current&&(e(n),r.current=!0)},[n,e,t]),(0,Q.useEffect)(()=>()=>a(Ft.fD.NONE),[a]),null}Ft.Og,tE.q3.SELF_CONTAINED,e=>Q.createElement(Fm,{hideModal:e.dismissModal});let Fh=`${Ft.Og} Templates Toolbar Connector Tooltip`,Fg=`${Ft.Og} Templates Toolbar Onboarding Finished Connector Tooltip`;function FE(e){return Q.createElement(M4.Dv,{targetType:"dom",targetKey:RY,topPadding:-6,autoWidth:!0,isBold:!0,arrowPosition:dn.F_.BOTTOM},Q.createElement(RD.mI,{bodyText:Q.createElement("span",{className:ea()(Fn.RL)},Q.createElement(eO.Tx,{id:"figjam_onboarding_make_something.templates_toolbar_connector.body_text",boldText:Q.createElement("b",null,Q.createElement(eO.Tx,{id:"figjam_onboarding_make_something.templates_toolbar_connector.body_text_bold"}))})),buttonText:Q.createElement(eO.Tx,{id:"figjam_onboarding_make_something.templates_toolbar_connector.done_button"}),onButtonClick:e.onClickPrimaryCta}))}function Fv(e){return Q.createElement(M4.Dv,{targetType:"dom",targetKey:RY,topPadding:-6,autoWidth:!0,isBold:!0,arrowPosition:dn.F_.BOTTOM},Q.createElement(RD.mI,{titleText:Q.createElement("span",{className:"browse_templates_make_something_onboarding--tooltipTitle--EmYZQ"},Q.createElement(eO.Tx,{id:"figjam_onboarding_make_something.templates_toolbar_onboarding_finished_connector.title_want_to_try_something_else"})),bodyText:Q.createElement("span",{className:Fn.$s},Q.createElement(eO.Tx,{id:"figjam_onboarding_make_something.templates_toolbar_onboarding_finished_connector.body_text",boldText:Q.createElement("b",null,Q.createElement(eO.Tx,{id:"figjam_onboarding_make_something.templates_toolbar_onboarding_finished_connector.body_text_bold"}))})),buttonText:Q.createElement(eO.Tx,{id:"figjam_onboarding_make_something.templates_toolbar_connector.done_button"}),onButtonClick:e.onClickPrimaryCta}))}function Fy(e){let t=(0,e_.Xr)(RP.w);return(0,ts.h)(()=>{t(RP.tX.MODAL_SHOWING)}),Q.createElement(tg.h,{testId:e.testId?e.testId:"MakeSomethingOnboardingOverlay",modalType:tE.q3.SELF_CONTAINED,trackingContextName:"Make Something Modal Onboarding",element:Q.useCallback(e=>Q.createElement(Fm,{hideModal:e.dismissModal}),[]),isShowing:e.isShowing,onClickPrimaryCta:e.onClickPrimaryCta,onClose:e.onClose,onManualDismiss:e.onManualDismiss})}tE.q3.SELF_CONTAINED,tE.q3.SELF_CONTAINED;let Fb="figjam_unified_onboarding_product",FC="figjam_unified_onboarding_pz";function Fw(e){(0,uj.YQ)({id:e===cY.jg.PRODUCT_THEN_PZ?Fb:FC})}let FT=[RT,Rx];function Fx(){let e=(0,ef.md)(cY.Am),{show:t,uniqueId:n,isShowing:a,complete:r}=(0,tp.e)({overlay:tv.wRI,priority:th.N.OVERRIDING_MODAL}),l=RS((0,Q.useCallback)(()=>{r(),e===cY.jg.PZ_THEN_PRODUCT&&(0,uj.YQ)({id:Fb})},[r,e]));return(0,Eo.E)(n,FC,()=>{t()}),Q.createElement(RA,{steps:FT,onComplete:l,isShowing:a,overlayUniqueId:n})}function FN(){let e=(0,ef.md)(cY.Am),t=(0,ef.md)(RP.w),{show:n,uniqueId:a,isShowing:r,complete:l}=(0,tp.e)({overlay:tv.Kze,priority:th.N.OVERRIDING_MODAL}),i=RS(l);return(0,Eo.E)(a,Fb,()=>{n()}),(0,Q.useEffect)(()=>{t===RP.tX.COMPLETED&&e===cY.jg.PRODUCT_THEN_PZ&&(0,uj.YQ)({id:FC})},[t,e]),Q.createElement(Fy,{onClickPrimaryCta:i,onClose:ey.lQ,onManualDismiss:i,isShowing:r})}var Fk=n(974844),FS=n(450341),FI=n(414712),FA=n(574079),FP=n(288706),FO=n(728482);let FL="figjam_participant_onboarded";var FM=((S=FM||{}).CREATE_STICKY="create_sticky",S.CREATE_STAMP="create_stamp",S.CANVAS_ZOOM="first_user_zoom_with_device",S.CANVAS_PAN="first_user_pan_with_device",S);function FD(e,t,n){let a=(0,e_.Xr)(FO.EW),r=(0,FO.yk)(e);(0,Eo.E)(n.uniqueId,t,()=>{r&&a({type:"DISMISS_TOOLTIP",tooltip:e})})}let FR=(0,tc.r1)(FL);function FF(){let e=Rk(),t=(0,ef.md)(FR),n=(0,ef.md)(FO.$j),a=(0,ef.md)((0,FP.Rq)(Es.Sb)),r="hasData"===a.state&&a.data||void 0,l=(0,at.TA)(),{resetFullscreenEvents:i}=function(){let e=(0,y4.q)(),t=(0,FO.LW)(),n=Q.useCallback(()=>{(0,er.sx)(FM.CANVAS_ZOOM)},[]),a=Q.useCallback(()=>{(0,er.sx)(FM.CANVAS_PAN)},[]);return Q.useEffect(()=>{if(e&&t)return eU.glU.setUsedZoomAction(!1),eU.glU.setUsedPanAction(!1),lT.Y5.fromFullscreen.on("zoomActionMessageForOnboarding",n),lT.Y5.fromFullscreen.on("panActionMessageForOnboarding",a),()=>{lT.Y5.fromFullscreen.removeListener("zoomActionMessageForOnboarding",n),lT.Y5.fromFullscreen.removeListener("panActionMessageForOnboarding",a)}},[e,t,a,n]),{resetFullscreenEvents:()=>{eU.glU.setUsedZoomAction(!1),eU.glU.setUsedPanAction(!1)}}}(),o=(0,e_.Xr)(FO.EW),s=(0,$.wA)(),c=(0,tp.e)({overlay:tv.P0g,priority:th.N.OVERRIDING_MODAL+1},[t,a]);return RI({overlayUniqueId:c.uniqueId,afterReset:Q.useCallback(()=>{s(tB.b({[FL]:!1})),e&&!1===r&&(i(),o({type:"INITIALIZE_ONBOARDING"}),s(tB.b({[FL]:!0})))},[e,r,o,s,i])}),FD(FO.eh.STICKY,FM.CREATE_STICKY,c),FD(FO.eh.STAMP,FM.CREATE_STAMP,c),FD(FO.eh.ZOOM,FM.CANVAS_ZOOM,c),FD(FO.eh.PAN,FM.CANVAS_PAN,c),(0,Q.useEffect)(()=>{c.isShowing&&n&&c.complete()},[n,c]),(0,Q.useEffect)(()=>{e&&!n&&c.show({onShow:()=>{i(),o({type:"INITIALIZE_ONBOARDING"}),s(tB.b({[FL]:!0}))},canShow:(e,t)=>!e&&!t})},[n,e,c,l,o,s,i]),Q.createElement("div",{"data-testid":"FigJamParticipantOnboardingOverlay"})}var FB=n(633007);let FU=(0,LS.D)(e=>{e(FB.dY())}),FH=(0,LS.D)((e,t)=>{t(lZ.V3({url:e}))});function FV(e){let t=(0,$.wA)(),n=(0,ep.R)(e=>{let t=(0,cJ.uF)(e.fileByKey,(0,cQ.getPermissionsState)(e)),n=FB.dY.loadingKeyForPayload();return{isLoading:(0,m_.VP)(e.loadingState,n),tutorialFileUrl:t,shouldShowLoadingState:!t,didFail:(0,m_.aF)(e.loadingState,n)}});Q.useEffect(()=>{n.tutorialFileUrl||n.isLoading||FU(t)},[]);let{dismissModal:a}=e;return Q.useEffect(()=>{n.didFail&&(a(),FG("failure","curator"))},[n.didFail,a]),Q.useEffect(()=>{let e=setTimeout(()=>{n.isLoading&&FG("timeout","curator")},5e3);return()=>clearTimeout(e)},[n.isLoading]),Q.createElement("div",{className:"onboard_figjam_viewer--openTutorialModalContainer--O1ld1"},Q.createElement("div",{className:"onboard_figjam_viewer--openTutorialModalShadow--HF-Gb onboard_figjam_viewer--openTutorialModalBase--vDoVP"},Q.createElement("div",{className:"onboard_figjam_viewer--openTutorialModal--3j-H4 onboard_figjam_viewer--openTutorialModalBase--vDoVP"},Q.createElement("div",{className:Rp},Q.createElement("div",{className:R_},Q.createElement("img",{className:Rf,src:"https://static.figma.com/uploads/964c3ddf18b0f2712b664efde991dfc4f2c58eb8",alt:""})),Q.createElement("div",{className:ea()({[Rh]:!0,[Rg]:!0})},Q.createElement("div",{className:"onboard_figjam_viewer--openTutorialModalText--9oABQ onboard_figjam_viewer--text--xkcTB"},Q.createElement(eO.Tx,{id:"rcs.figjam_onboarding.for_more_tips_and_tricks_here_s_a_2_minute_hands_on_tutorial"})),Q.createElement("div",{className:"onboard_figjam_viewer--openTutorialBottomContentRow--rVWqG onboard_figjam_viewer--bottomContentRow--PgTeU"},Q.createElement("div",{className:"onboard_figjam_viewer--secondaryTextClickable--iF6eC onboard_figjam_viewer--secondaryText--THVcI",onClick:e.dismissModal},Q.createElement(eO.Tx,{id:"rcs.figjam_onboarding.maybe_later"})),Q.createElement(nc.vd,{className:n.shouldShowLoadingState?"onboard_figjam_viewer--openTutorialButtonDisabled--EYffC onboard_figjam_viewer--openTutorialButton--4AqFo onboard_figjam_viewer--ctaButton--aFKKt text--fontPos12Whyte---tkNx text--_fontBaseWhyte--efAjI":"onboard_figjam_viewer--openTutorialButton--4AqFo onboard_figjam_viewer--ctaButton--aFKKt text--fontPos12Whyte---tkNx text--_fontBaseWhyte--efAjI",onClick:()=>{n.tutorialFileUrl&&FH(n.tutorialFileUrl,t),e.dismissModal()},disabled:n.shouldShowLoadingState},n.shouldShowLoadingState?Q.createElement(t2.kt,{className:"onboard_figjam_viewer--openTutorialSpinner--zV-nH publish_modal--spinner--7DaqW"}):Q.createElement(eO.Tx,{id:"rcs.figjam_onboarding.open_tutorial"}))))))))}function FG(e,t){(0,ar.kF)("type",e),(0,ar.kF)("source",t),(0,ar.us)("FigJam onboarding - failed to load open tutorial button")}async function FK(e){let t=(await e).data;if(!t)return!1;let n=(0,Fk.kd)(t),a=(0,Fk.mW)(n,"figjam_editor_onboarded");return!a&&!a&&!(()=>{let e=(0,ew.DN)();try{return!!e.get(ws.Xk)}catch(e){}return!1})()}function FW({openFile:e}){var t;return!!(e&&(null==(t=e.trackTags)?void 0:t.isTemplate)&&e.editorType===dV._Y.WHITEBOARD)}function Fz(e){return Q.createElement(tg.h,{testId:e.testId?e.testId:"OpenFigJamTutorialOverlay",modalType:tE.q3.SELF_CONTAINED,trackingContextName:"FigJam Editor Onboarding - Open Tutorial",userFlagOnShow:"figjam_editor_onboarded",element:FV,isShowing:e.isShowing,onClickPrimaryCta:e.onClickPrimaryCta,onClose:e.onClose,onManualDismiss:e.onManualDismiss})}function Fj(){let e=(0,$.wA)(),t=(0,tp.e)({overlay:tv.MJs,priority:th.N.OVERRIDING_MODAL}),n=function(e,t){let n=(0,Q.useRef)(),a=(0,Q.useRef)(),r=(0,Q.useRef)();return((0,Q.useEffect)(()=>()=>{var e;null==(e=n.current)||e.call(n)},[]),a.current)?a.current:null==n.current||null==r.current?(a.current=new Promise(l=>{var i;null==(i=n.current)||i.call(n),n.current=(0,i$.WB)().subscribe(e,t,e=>{("loaded"===e.status||e.errors)&&(r.current=e,l(r.current),a.current=void 0)})}),a.current):Promise.resolve(r.current)}(tf.Tej,{}),a=(0,ef.md)(t_.yV),r=(0,lN.Td)(),l=!FW({openFile:a});(0,Eo.E)(t.uniqueId,"Context Viewed",e=>{var a,r,l;let i=null==(a=e.properties)?void 0:a.name,o=null==(r=e.properties)?void 0:r.productType,s=null==(l=e.properties)?void 0:l.canEdit;i!==Ex.e0.EDITOR||"figjam"!==o||s||FK(n).then(e=>{e&&t.show()})});let{currentStep:i,next:o,reset:s}=(0,c4.A)({numSteps:l?4:3,onComplete:t.complete});(0,Eo.E)(t.uniqueId,"Reset Onboarding",()=>{e(tB.b({figjam_editor_onboarded:!1})),r&&(s(),t.show())});let c=RS(t.complete),d=Q.useMemo(()=>{let e=RN.map(e=>Q.createElement(e,{key:e.name,isShowing:t.isShowing,onClickPrimaryCta:o,onClose:ey.lQ,onManualDismiss:c}));return l&&e.push(Q.createElement(Fz,{key:"OpenFigJamTutorialOverlay",isShowing:t.isShowing,onClickPrimaryCta:o,onClose:ey.lQ,onManualDismiss:c,testId:"open_figjam_tutorial_overlay"})),e},[o,c,t.isShowing,l]);return Q.createElement(c8.U,{currentStep:i,isShowing:t.isShowing,children:d})}let FY="Browse Templates Modal";function FZ(e){return Q.createElement(tg.h,{testId:e.testId,modalType:tE.q3.WELCOME,trackingContextName:FY,element:Q.useCallback(e=>Q.createElement(RB.N$,{editorType:dV._Y.WHITEBOARD,templateInsertionLocation:NU.RD.CURRENT_FILE,triggeredFrom:"newFile",hideModal:e.dismissModal,hideTintedModalBackground:!0}),[]),isShowing:e.isShowing,onClickPrimaryCta:e.onClickPrimaryCta,onClose:e.onClose,onManualDismiss:e.onManualDismiss})}function FX(e){return Q.createElement(tg.h,{testId:e.testId,modalType:tE.q3.WELCOME,trackingContextName:FY,element:Q.useCallback(e=>Q.createElement(RB.N$,{editorType:dV._Y.WHITEBOARD,templateInsertionLocation:NU.RD.CURRENT_FILE,triggeredFrom:"newFile",hideModal:e.onClickPrimaryCta,hideTintedModalBackground:!0}),[]),isShowing:e.isShowing,onClickPrimaryCta:e.onClickPrimaryCta,onClose:e.onClose,onManualDismiss:e.onManualDismiss})}let Fq=(0,LS.D)(()=>{let e=(0,ew.DN)();try{return!!e.get(ws.Xk)}catch(e){}return!1});function FJ({userFlags:e,emailValidatedAt:t,userSpace:n,isTemplateFile:a,isTryFile:r,canvasEmpty:l,onboardedToFigJam:i,jobTitle:o,cameFromWhatsNew:s}){let c=(0,Fk.mW)(e,"not_gen_0"),d=n===Ex.qo.ORG,u=(0,FA.d2)({emailValidatedAt:t,jobTitle:o});if((i||Fq())&&(d||c||u))return[];if(!u&&(0,Fk.of)(e)&&!d&&!s)return r?[FA.vm,r?FX:FZ]:[FA.vm,Fy];let m=(0,Ru.O)()?[]:RN;if(a)return m;let p=[...m,Fz];return s||r||!l?p:[Fy]}function FQ({openFile:e}){let t=(0,ef.md)(RP.l5),n=(0,ef.md)(Es.zo),a=(0,ef.md)(cY.Am);return t!==Ft.fD.NONE?null:("loaded"!==n.status||n.data)&&!a?Q.createElement(F2,{openFile:e}):Q.createElement(F1,{openFile:e})}let F$=(0,nf.eU)(!1),F0=(e,t)=>{let[n,a]=(0,ef.fp)(F$),r=(0,e_.Xr)(cY.Am),l=(0,e_.Xr)(RP.w),i=(0,ef.md)(Es.zo),o=(0,ae.aV)(),s=(0,ef.md)(FS.dO).status===FI.c.LOADING;(0,Eo.E)(e,"Context Viewed",e=>{var t,n,r;let l=null==(t=e.properties)?void 0:t.name,i=null==(n=e.properties)?void 0:n.productType,o=null==(r=e.properties)?void 0:r.canEdit;l===Ex.e0.EDITOR&&"figjam"===i&&o&&a(!0)}),RI({overlayUniqueId:e,afterReset:()=>{r(null),l(RP.tX.NOT_STARTED),a(!0)}}),(0,Q.useEffect)(()=>{!n||"loaded"!==i.status||o||s||(a(!1),t())},[n,a,t,i.status,o,s])};function F1({openFile:e}){let t=(0,ef.md)(Mv.g5),n=(0,ef.md)(tc.qG),a=(0,ef.md)(Mv.d2),r=(0,ef.md)(Mv.NT),l=(0,$.d4)(e=>e.mirror.appModel.currentPage),i=(0,c6.Fk)((e,t)=>(0,cH.zC)(e,t),l),o=(0,ef.md)(Es.zo),s=(0,tc.Fu)("interacted_figjam_whats_new_v2_cta"),c=(0,ef.md)(s),d=(0,e_.Xr)(cY.Am),{getConfig:u}=(0,eC.XV)("exposed_exp_figjam_unified_onboarding","figjam_unified_onboarding"),m=(0,Q.useCallback)(()=>{let e=u().get("sequence",cY.jg.DEFAULT);return d(e),e},[u,d]),[p,_]=(0,Q.useState)(!1),[f,h]=(0,Q.useState)(!1),[g,E]=(0,Q.useState)([]),{show:v,uniqueId:y,isShowing:b,complete:C,experimentResult:w}=(0,tp.e)({overlay:tv.zoI,priority:th.N.OVERRIDING_MODAL,experiment:{check:m,predicate:e=>e!==cY.jg.DEFAULT,postCheck:(e,t,n,a,r)=>{let l=n===Ex.qo.ORG,i=!(0,FA.d2)({emailValidatedAt:t,jobTitle:r})&&(0,Fk.of)(e)&&!l;return h(i),a||Fq()||_(!0),i}}},[n,t,a,o,r,c]),T=(0,Q.useRef)(i);(0,Q.useEffect)(()=>{T.current=i},[i]);let{show:x,isShowing:N,complete:k}=(0,tp.e)({overlay:tv.lLk,priority:th.N.OVERRIDING_MODAL,experiment:{check:m,predicate:e=>e===cY.jg.DEFAULT,postCheck:(t,n,a,r,l,i)=>{let o=FJ({userFlags:t,emailValidatedAt:n,userSpace:a,isTemplateFile:FW({openFile:e}),isTryFile:e.isTryFile,canvasEmpty:T.current,onboardedToFigJam:r,jobTitle:l,cameFromWhatsNew:(0,Du.SS)(i)}),s=o.length>0;return s&&E(o),s}}},[n,t,a,o,r,c]),S=w||cY.jg.DEFAULT,I=S===cY.jg.DEFAULT?N:b,A=S===cY.jg.DEFAULT?k:C,P=(0,Q.useMemo)(()=>S===cY.jg.DEFAULT?g:f?[FA.vm]:[],[S,f,g]);F0(y,(0,Q.useCallback)(()=>{v(),x()},[v,x]));let O=RS(A),L=(0,Q.useCallback)(()=>{S===cY.jg.DEFAULT?O():p&&(A(),Fw(S))},[O,A,p,S]);return((0,Q.useEffect)(()=>{0===P.length&&p&&S!==cY.jg.DEFAULT&&Fw(S)},[p,P,S]),w&&I&&0!==P.length)?Q.createElement(RA,{steps:P,onComplete:L,isShowing:I,overlayUniqueId:y}):null}function F2({openFile:e}){let t=(0,ef.md)(Mv.g5),n=(0,ef.md)(tc.qG),a=(0,ef.md)(Mv.d2),r=(0,ef.md)(Mv.NT),l=(0,$.d4)(e=>e.mirror.appModel.currentPage),i=(0,c6.Fk)((e,t)=>(0,cH.zC)(e,t),l),o=(0,ef.md)(Es.zo),s=(0,tc.Fu)("interacted_figjam_whats_new_v2_cta"),c=(0,ef.md)(s),{show:d,uniqueId:u,isShowing:m,complete:p}=(0,tp.e)({overlay:tv.lLk,priority:th.N.OVERRIDING_MODAL},[n,t,a,o,r,c]),[_,f]=(0,Q.useState)([]);F0(u,(0,Q.useCallback)(()=>{d({canShow:(t,n,a,r,l,o)=>{let s=FJ({userFlags:t,emailValidatedAt:n,userSpace:a,isTemplateFile:FW({openFile:e}),isTryFile:e.isTryFile,canvasEmpty:i,onboardedToFigJam:r,jobTitle:l,cameFromWhatsNew:(0,Du.SS)(o)}),c=s.length>0;return c&&f(s),c}})},[d,f,i,e]));let h=RS(p);return m&&0!==_.length?Q.createElement(RA,{steps:_,onComplete:h,isShowing:m,overlayUniqueId:u}):null}function F5({openFile:e}){return"figjam_participant_onboarding"===function(){let e=Rk(),t=(0,at.TA)();return e&&(0,cY.dQ)(t)?"figjam_participant_onboarding":"figjam_editor_onboarding"}()?Q.createElement(FF,null):Q.createElement(FQ,{openFile:e})}let F4=(0,nf.eU)(async()=>{if(document.fonts&&FontFace){let e=new FontFace("Whyte","url(https://static.figma.com/webfont/1/Whyte-Regular.woff)");document.fonts.add(e)}await document.fonts.ready}),F3=(0,FP.Rq)(F4);function F6(e){return Q.createElement(tg.h,{testId:e.testId,modalType:tE.q3.SELF_CONTAINED,trackingContextName:Fh,userFlagOnShow:"figjam_browse_templates_modal_onboarded",element:FE,isShowing:e.isShowing,onClickPrimaryCta:e.onClickPrimaryCta,onClose:e.onClose,onManualDismiss:e.onManualDismiss})}function F7(e){return Q.createElement(tg.h,{testId:e.testId,modalType:tE.q3.SELF_CONTAINED,trackingContextName:Fg,userFlagOnShow:"figjam_browse_templates_modal_onboarded",element:Fv,isShowing:e.isShowing,onClickPrimaryCta:e.onClickPrimaryCta,onClose:e.onClose,onManualDismiss:e.onManualDismiss})}function F8(){let e=(0,tc.r1)("figjam_browse_templates_modal_onboarded"),t=(0,ef.md)(e),n=(0,ef.md)(F3),[a,r]=(0,Q.useState)(!1),l=(0,cY.Un)(),{show:i,isShowing:o,uniqueId:s,complete:c}=(0,tp.e)({overlay:tv.kp0,priority:th.N.OVERRIDING_MODAL},[t,n]);return(0,Eo.E)(s,Ft.Lz,()=>{r(!0),i({canShow:e=>!e&&!l})}),(0,Eo.E)(s,mM.P7,()=>{i({canShow:e=>!e&&!l})}),a?Q.createElement(F6,{isShowing:o,onClickPrimaryCta:c,onClose:c,onManualDismiss:c}):Q.createElement(F7,{isShowing:o,onClickPrimaryCta:c,onClose:c,onManualDismiss:c})}var F9=n(189265),Be=n(443622),Bt=n(423723),Bn=n(858918),Ba=n(605584);function Br(e){return Q.createElement(RD.vX,{onSkipClick:e.dismissModal,useCase:Ft.fD.BRAINSTORM},Q.createElement(RD.wV,{bodyText:Q.createElement("span",{className:Fn.R9},Q.createElement(eO.Tx,{id:"figjam_onboarding_make_something.brainstorm.fig_jam_s_great_for_brainstorming",boldText:Q.createElement("b",null,Q.createElement(eO.Tx,{id:"figjam_onboarding_make_something.brainstorm.fig_jam_s_great_for_brainstorming_prefix"}))})),buttonText:Q.createElement(eO.Tx,{id:"figjam_onboarding_make_something.brainstorm.go_on"}),onButtonClick:e.onClickPrimaryCta,svg:Fr.A}))}function Bl(e){let{onClickPrimaryCta:t,dismissModal:n}=e;return Q.useEffect(()=>{function e(){t()}return lT.Y5.fromFullscreen.on("createdSticky",e),()=>{lT.Y5.fromFullscreen.removeListener("createdSticky",e)}},[t]),Q.createElement(RD.vX,{onSkipClick:n,useCase:Ft.fD.BRAINSTORM},Q.createElement(M4.Dv,{targetType:"dom",targetKey:Be.s,topPadding:-22,autoWidth:!0,isBold:!0},Q.createElement(RD.mI,{bodyText:Q.createElement("span",null,Q.createElement(eO.Tx,{id:"figjam_onboarding_make_something.brainstorm.sticky_notes_let_you_share_ideas_go_ahead_drag_one_into_the_blue_box_above",boldText:Q.createElement("b",null,Q.createElement(eO.Tx,{id:"figjam_onboarding_make_something.brainstorm.sticky_notes_let_you_share_ideas_go_ahead_drag_one_into_the_blue_box_above_bold_text"}))}))})))}function Bi(e){let[t]=Q.useState(()=>eU.glU.getPointerModalNodeId("createdSticky")||""),{handleTargetLost:n}=(0,M4.Du)({shouldSkipConnectorModalAtom:RP.aG,skipConnectorModal:e.onClickPrimaryCta});return Q.createElement(RD.vX,{onSkipClick:e.dismissModal,useCase:Ft.fD.BRAINSTORM},Q.createElement(M4.Dv,{targetType:"canvas",targetKey:t,topPadding:-4,isBold:!0,autoWidth:!0,arrowPosition:dn.F_.LEFT_TITLE,onTargetLost:n},Q.createElement(RD.mI,{bodyText:Q.createElement("span",null,Q.createElement(eO.Tx,{id:"figjam_onboarding_make_something.brainstorm.just_like_that_keep_it_to_one_idea_per_sticky_next_let_s_check_out_stamps",boldText:Q.createElement("b",null,Q.createElement(eO.Tx,{id:"figjam_onboarding_make_something.brainstorm.just_like_that_keep_it_to_one_idea_per_sticky_next_let_s_check_out_stamps_bold_text"}))})),buttonText:Q.createElement(eO.Tx,{id:"figjam_onboarding_make_something.brainstorm.next"}),onButtonClick:e.onClickPrimaryCta})))}function Bo(e){let{onClickPrimaryCta:t,dismissModal:n}=e,{handleTargetLost:a}=(0,M4.Du)({shouldSkipConnectorModalAtom:RP.aG,skipConnectorModal:e.onClickPrimaryCta});return Q.useEffect(()=>{function e(){t()}return lT.Y5.fromFullscreen.on("createdStamp",e),()=>{lT.Y5.fromFullscreen.removeListener("createdStamp",e)}},[t]),Q.createElement(RD.vX,{onSkipClick:n,useCase:Ft.fD.BRAINSTORM},Q.createElement(M4.Dv,{targetType:"dom",targetKey:Bt.E$,topPadding:-27,isBold:!0,autoWidth:!0,onTargetLost:a},Q.createElement(RD.mI,{bodyText:Q.createElement("span",null,Q.createElement(eO.Tx,{id:"figjam_onboarding_make_something.brainstorm.stamps_are_here_or_press_e_they_re_good_for_voting_go_ahead_stamp_something",boldText:Q.createElement("b",null,Q.createElement(eO.Tx,{id:"figjam_onboarding_make_something.brainstorm.stamps_are_here_or_press_e_they_re_good_for_voting_go_ahead_stamp_something_bold_text"}))}))})))}function Bs(e){let[t]=Q.useState(()=>eU.glU.getPointerModalNodeId("createdStamp")||""),{handleTargetLost:n}=(0,M4.Du)({shouldSkipConnectorModalAtom:RP.aG,skipConnectorModal:e.onClickPrimaryCta});return Q.createElement(RD.vX,{onSkipClick:e.dismissModal,useCase:Ft.fD.BRAINSTORM},Q.createElement(M4.Dv,{targetType:"canvas",targetKey:t,topPadding:-4,isBold:!0,autoWidth:!0,arrowPosition:dn.F_.TOP,onTargetLost:n},Q.createElement(RD.mI,{bodyText:Q.createElement("span",null,Q.createElement(eO.Tx,{id:"figjam_onboarding_make_something.brainstorm.lovely_just_one_more_thing",boldText:Q.createElement("b",null,Q.createElement(eO.Tx,{id:"figjam_onboarding_make_something.brainstorm.lovely_just_one_more_thing_bold_text"}))})),buttonText:Q.createElement(eO.Tx,{id:"figjam_onboarding_make_something.brainstorm.next"}),onButtonClick:e.onClickPrimaryCta})))}function Bc(e){let t=(0,$.wA)(),n=(0,Ba.MR)(),a=(0,Ba.qU)(),[r,l]=Q.useState("invalid"),{handleTargetLost:i}=(0,M4.Du)({shouldSkipConnectorModalAtom:RP.aG,skipConnectorModal:e.onClickPrimaryCta});return Q.useEffect(()=>(n({source:Ba.OO.MAKE_SOMETHING_V2_ONBOARDING}),t(F9.lu({state:"open",userInitiated:!1})),l(Bn.Hm),()=>{a({source:Ba.OO.MAKE_SOMETHING_V2_ONBOARDING}),t(F9.lu({state:"closed",userInitiated:!1}))}),[a,t,n]),Q.createElement(RD.vX,{onSkipClick:e.dismissModal,useCase:Ft.fD.BRAINSTORM},Q.createElement(M4.Dv,{targetType:"dom",targetKey:r,topPadding:-4,isBold:!0,autoWidth:!0,onTargetLost:i},Q.createElement(RD.mI,{bodyText:Q.createElement("span",null,Q.createElement(eO.Tx,{id:"figjam_onboarding_make_something.brainstorm.use_the_timer_to_keep_things_moving",boldText:Q.createElement("b",null,Q.createElement(eO.Tx,{id:"figjam_onboarding_make_something.brainstorm.use_the_timer_to_keep_things_moving_bold_text"}))})),buttonText:Q.createElement(eO.Tx,{id:"figjam_onboarding_make_something.brainstorm.next"}),onButtonClick:e.onClickPrimaryCta})))}function Bd(e){let{onNext:t}=Rq({...e,useCase:Ft.fD.BRAINSTORM});return Q.createElement(M4.Dv,{targetType:"dom",targetKey:mM.v4,topPadding:-4,isBold:!0,hasShadow:!0},Q.createElement(Rv,{titleText:Q.createElement(eO.Tx,{id:"figjam_onboarding_make_something.brainstorm.when_you_re_ready"}),bodyText:Q.createElement(eO.Tx,{id:"figjam_onboarding_make_something.brainstorm.start_a_brainstorm_by_inviting_a_few_people_here_that_s_it"}),buttonText:Q.createElement(eO.Tx,{id:"figjam_onboarding_make_something.brainstorm.share_board"}),onNext:t,onDismiss:e.dismissModal,imgSrc:RD.mN,isBold:!0}))}function Bu(e){return(0,RD.rL)({useCase:Ft.fD.BRAINSTORM,stepName:"Intro",stepNum:1}),Q.createElement(tg.h,{testId:e.testId,modalType:tE.q3.SELF_CONTAINED,trackingContextName:`${RD.CM} - Brainstorm - Intro`,userFlagOnShow:"figjam_editor_onboarded",element:Br,isShowing:e.isShowing,onClickPrimaryCta:e.onClickPrimaryCta,onClose:e.onClose,onManualDismiss:e.onManualDismiss})}function Bm(e){return(0,RD.rL)({useCase:Ft.fD.BRAINSTORM,stepName:"Sticky Prompt",stepNum:2}),Q.createElement(tg.h,{testId:e.testId,modalType:tE.q3.SELF_CONTAINED,trackingContextName:`${RD.CM} - Brainstorm - Sticky Prompt`,userFlagOnShow:"figjam_editor_onboarded",element:Bl,isShowing:e.isShowing,onClickPrimaryCta:e.onClickPrimaryCta,onClose:e.onClose,onManualDismiss:e.onManualDismiss})}function Bp(e){return(0,RD.rL)({useCase:Ft.fD.BRAINSTORM,stepName:"Sticky Reaction",stepNum:3}),Q.createElement(tg.h,{testId:e.testId,modalType:tE.q3.SELF_CONTAINED,trackingContextName:`${RD.CM} - Brainstorm - Sticky Reaction`,userFlagOnShow:"figjam_editor_onboarded",element:Bi,isShowing:e.isShowing,onClickPrimaryCta:e.onClickPrimaryCta,onClose:e.onClose,onManualDismiss:e.onManualDismiss})}function B_(e){return(0,RD.rL)({useCase:Ft.fD.BRAINSTORM,stepName:"Stamp Prompt",stepNum:4}),Q.createElement(tg.h,{testId:e.testId,modalType:tE.q3.SELF_CONTAINED,trackingContextName:`${RD.CM} - Brainstorm - Stamp Prompt`,userFlagOnShow:"figjam_editor_onboarded",element:Bo,isShowing:e.isShowing,onClickPrimaryCta:e.onClickPrimaryCta,onClose:e.onClose,onManualDismiss:e.onManualDismiss})}function Bf(e){return(0,RD.rL)({useCase:Ft.fD.BRAINSTORM,stepName:"Stamp Reaction",stepNum:5}),Q.createElement(tg.h,{testId:e.testId,modalType:tE.q3.SELF_CONTAINED,trackingContextName:`${RD.CM} - Brainstorm - Stamp Reaction`,userFlagOnShow:"figjam_editor_onboarded",element:Bs,isShowing:e.isShowing,onClickPrimaryCta:e.onClickPrimaryCta,onClose:e.onClose,onManualDismiss:e.onManualDismiss})}function Bh(e){return(0,RD.rL)({useCase:Ft.fD.BRAINSTORM,stepName:"Timer",stepNum:6}),Q.createElement(tg.h,{testId:e.testId,modalType:tE.q3.SELF_CONTAINED,trackingContextName:`${RD.CM} - Brainstorm - Timer`,userFlagOnShow:"figjam_editor_onboarded",element:Bc,isShowing:e.isShowing,onClickPrimaryCta:e.onClickPrimaryCta,onClose:e.onClose,onManualDismiss:e.onManualDismiss})}function Bg(e){let t=(0,Rm.O)();return(0,RD.rL)({useCase:Ft.fD.BRAINSTORM,stepName:"Share",stepNum:7}),Q.createElement(tg.h,{testId:e.testId,modalType:tE.q3.SELF_CONTAINED,trackingContextName:`${RD.CM} - Brainstorm - Share`,userFlagOnShow:"figjam_editor_onboarded",element:Bd,isShowing:e.isShowing,onClickPrimaryCta:e.onClickPrimaryCta,onClose:()=>{t({eventName:"msv2_completed",useCase:Ft.fD.BRAINSTORM}),e.onClose()},onManualDismiss:e.onManualDismiss})}var BE=n(325512);function Bv(e){return Q.useEffect(()=>{eU.glU.populatePointerModalNodeTrackerForPlanningAhead()},[]),Q.createElement(RD.vX,{onSkipClick:e.dismissModal,useCase:Ft.fD.PLAN},Q.createElement(RD.wV,{bodyText:Q.createElement("span",{className:Fn.R9},Q.createElement(eO.Tx,{id:"figjam_onboarding_make_something.planning_ahead.fig_jam_s_great_for_planning_ahead_here_s_how_it_s_done",boldText:Q.createElement("b",null,Q.createElement(eO.Tx,{id:"figjam_onboarding_make_something.planning_ahead.fig_jam_s_great_for_planning_ahead_here_s_how_it_s_done_bold_text"}))})),buttonText:Q.createElement(eO.Tx,{id:"figjam_onboarding_make_something.brainstorm.go_on"}),onButtonClick:e.onClickPrimaryCta,svg:Fl.A}))}function By(e){let[t]=Q.useState(()=>eU.glU.getPointerModalNodeId("planningAheadInitialNode")||""),{handleTargetLost:n}=(0,M4.Du)({shouldSkipConnectorModalAtom:RP.aG,skipConnectorModal:e.onClickPrimaryCta});return Q.createElement(RD.vX,{onSkipClick:e.dismissModal,useCase:Ft.fD.PLAN},Q.createElement(M4.Dv,{targetType:"canvas",targetKey:t,topPadding:-7,isBold:!0,autoWidth:!0,arrowPosition:dn.F_.BOTTOM,onTargetLost:n},Q.createElement(RD.mI,{bodyText:Q.createElement("span",null,Q.createElement(eO.Tx,{id:"figjam_onboarding_make_something.planning_ahead.start_with_a_simple_timeline_with_a_row_for_each_member_of_your_team"})),buttonText:Q.createElement(eO.Tx,{id:"figjam_onboarding_make_something.brainstorm.next"}),onButtonClick:e.onClickPrimaryCta})))}function Bb(e){let{onClickPrimaryCta:t,dismissModal:n}=e,[a]=Q.useState(()=>eU.glU.getPointerModalNodeId("planningAheadPerson")||""),{handleTargetLost:r}=(0,M4.Du)({shouldSkipConnectorModalAtom:RP.aG,skipConnectorModal:e.onClickPrimaryCta});return Q.useEffect(()=>{function e(){t()}return lT.Y5.fromFullscreen.on("finishedEditingText",e),()=>{lT.Y5.fromFullscreen.removeListener("finishedEditingText",e)}},[t]),Q.createElement(RD.vX,{onSkipClick:n,useCase:Ft.fD.PLAN},Q.createElement(M4.Dv,{targetType:"canvas",targetKey:a,topPadding:2,isBold:!0,autoWidth:!0,arrowPosition:dn.F_.LEFT_TITLE,onTargetLost:r},Q.createElement(RD.mI,{bodyText:Q.createElement("span",null,Q.createElement(eO.Tx,{id:"figjam_onboarding_make_something.planning_ahead.type_your_name_here_right_at_the_top",boldText:Q.createElement("b",null,Q.createElement(eO.Tx,{id:"figjam_onboarding_make_something.planning_ahead.type_your_name_here_right_at_the_top_bold_text"}))}))})))}function BC(e){let{onClickPrimaryCta:t,dismissModal:n}=e,[a]=Q.useState(()=>eU.glU.getPointerModalNodeId("planningAheadProject")||""),{handleTargetLost:r}=(0,M4.Du)({shouldSkipConnectorModalAtom:RP.aG,skipConnectorModal:e.onClickPrimaryCta});return Q.useEffect(()=>{function e(){t()}return lT.Y5.fromFullscreen.on("finishedEditingShapeWithText",e),()=>{lT.Y5.fromFullscreen.removeListener("finishedEditingShapeWithText",e)}},[t]),Q.createElement(RD.vX,{onSkipClick:n,useCase:Ft.fD.PLAN},Q.createElement(M4.Dv,{targetType:"canvas",targetKey:a,topPadding:-6,isBold:!0,autoWidth:!0,arrowPosition:dn.F_.BOTTOM,onTargetLost:r},Q.createElement(RD.mI,{bodyText:Q.createElement("span",null,Q.createElement(eO.Tx,{id:"figjam_onboarding_make_something.planning_ahead.what_are_you_working_on_this_month_rename_this_block_to_your_current_project",boldText:Q.createElement("b",null,Q.createElement(eO.Tx,{id:"figjam_onboarding_make_something.planning_ahead.what_are_you_working_on_this_month_rename_this_block_to_your_current_project_bold_text"}))}))})))}function Bw(e){let[t]=Q.useState(()=>eU.glU.getPointerModalNodeId("planningAheadProject")||""),{handleTargetLost:n}=(0,M4.Du)({shouldSkipConnectorModalAtom:RP.aG,skipConnectorModal:e.onClickPrimaryCta});return Q.createElement(RD.vX,{onSkipClick:e.dismissModal,useCase:Ft.fD.PLAN},Q.createElement(M4.Dv,{targetType:"canvas",targetKey:t,topPadding:-4,isBold:!0,autoWidth:!0,arrowPosition:dn.F_.LEFT_TITLE,onTargetLost:n},Q.createElement(RD.mI,{bodyText:Q.createElement(eO.Tx,{id:"figjam_onboarding_make_something.planning_ahead.you_can_resize_blocks_by_dragging_their_ends"}),buttonText:Q.createElement(eO.Tx,{id:"figjam_onboarding_make_something.brainstorm.next"}),onButtonClick:e.onClickPrimaryCta})))}function BT(e){let{handleTargetLost:t}=(0,M4.Du)({shouldSkipConnectorModalAtom:RP.aG,skipConnectorModal:e.onClickPrimaryCta});return Q.createElement(RD.vX,{onSkipClick:e.dismissModal,useCase:Ft.fD.PLAN},Q.createElement(M4.Dv,{targetType:"dom",targetKey:BE.BC,topPadding:-23,isBold:!0,autoWidth:!0,onTargetLost:t},Q.createElement(RD.mI,{bodyText:Q.createElement(eO.Tx,{id:"figjam_onboarding_make_something.planning_ahead.and_grab_more_shapes_as_needed_from_your_toolbar"}),buttonText:Q.createElement(eO.Tx,{id:"figjam_onboarding_make_something.brainstorm.next"}),onButtonClick:e.onClickPrimaryCta})))}function Bx(e){let{onNext:t}=Rq({...e,useCase:Ft.fD.PLAN});return Q.createElement(M4.Dv,{targetType:"dom",targetKey:mM.v4,topPadding:-4,isBold:!0,autoWidth:!0,hasShadow:!0},Q.createElement(Rv,{titleText:Q.createElement(eO.Tx,{id:"figjam_onboarding_make_something.planning_ahead.try_it_with_your_team"}),bodyText:Q.createElement(eO.Tx,{id:"figjam_onboarding_make_something.planning_ahead.share_this_board_and_your_whole_team_can_contribute"}),buttonText:Q.createElement(eO.Tx,{id:"figjam_onboarding_make_something.brainstorm.share_board"}),onNext:t,onDismiss:e.dismissModal,imgSrc:RD.mN,isBold:!0}))}function BN(e){return(0,RD.rL)({useCase:Ft.fD.PLAN,stepName:"Intro",stepNum:1}),Q.createElement(tg.h,{testId:e.testId,modalType:tE.q3.SELF_CONTAINED,trackingContextName:`${RD.CM} - Planning Ahead - Intro`,userFlagOnShow:"figjam_editor_onboarded",element:Bv,isShowing:e.isShowing,onClickPrimaryCta:e.onClickPrimaryCta,onClose:e.onClose,onManualDismiss:e.onManualDismiss})}function Bk(e){return(0,RD.rL)({useCase:Ft.fD.PLAN,stepName:"Section",stepNum:2}),Q.createElement(tg.h,{testId:e.testId,modalType:tE.q3.SELF_CONTAINED,trackingContextName:`${RD.CM} - Planning Ahead - Section`,userFlagOnShow:"figjam_editor_onboarded",element:By,isShowing:e.isShowing,onClickPrimaryCta:e.onClickPrimaryCta,onClose:e.onClose,onManualDismiss:e.onManualDismiss})}function BS(e){return(0,RD.rL)({useCase:Ft.fD.PLAN,stepName:"Person",stepNum:3}),Q.createElement(tg.h,{testId:e.testId,modalType:tE.q3.SELF_CONTAINED,trackingContextName:`${RD.CM} - Planning Ahead - Person`,userFlagOnShow:"figjam_editor_onboarded",element:Bb,isShowing:e.isShowing,onClickPrimaryCta:e.onClickPrimaryCta,onClose:e.onClose,onManualDismiss:e.onManualDismiss})}function BI(e){return(0,RD.rL)({useCase:Ft.fD.PLAN,stepName:"Project Name",stepNum:4}),Q.createElement(tg.h,{testId:e.testId,modalType:tE.q3.SELF_CONTAINED,trackingContextName:`${RD.CM} - Planning Ahead - Project Name`,userFlagOnShow:"figjam_editor_onboarded",element:BC,isShowing:e.isShowing,onClickPrimaryCta:e.onClickPrimaryCta,onClose:e.onClose,onManualDismiss:e.onManualDismiss})}function BA(e){return(0,RD.rL)({useCase:Ft.fD.PLAN,stepName:"Project Block",stepNum:5}),Q.createElement(tg.h,{testId:e.testId,modalType:tE.q3.SELF_CONTAINED,trackingContextName:`${RD.CM} - Planning Ahead - Project Block`,userFlagOnShow:"figjam_editor_onboarded",element:Bw,isShowing:e.isShowing,onClickPrimaryCta:e.onClickPrimaryCta,onClose:e.onClose,onManualDismiss:e.onManualDismiss})}function BP(e){return(0,RD.rL)({useCase:Ft.fD.PLAN,stepName:"Shape",stepNum:6}),Q.createElement(tg.h,{testId:e.testId,modalType:tE.q3.SELF_CONTAINED,trackingContextName:`${RD.CM} - Planning Ahead - Shape`,userFlagOnShow:"figjam_editor_onboarded",element:BT,isShowing:e.isShowing,onClickPrimaryCta:e.onClickPrimaryCta,onClose:e.onClose,onManualDismiss:e.onManualDismiss})}function BO(e){let t=(0,Rm.O)();return(0,RD.rL)({useCase:Ft.fD.PLAN,stepName:"Share",stepNum:7}),Q.createElement(tg.h,{testId:e.testId,modalType:tE.q3.SELF_CONTAINED,trackingContextName:`${RD.CM} - Planning Ahead - Share`,userFlagOnShow:"figjam_editor_onboarded",element:Bx,isShowing:e.isShowing,onClickPrimaryCta:e.onClickPrimaryCta,onClose:()=>{t({eventName:"msv2_completed",useCase:Ft.fD.PLAN}),e.onClose()},onManualDismiss:e.onManualDismiss})}function BL(e){return Q.useEffect(()=>{eU.glU.populatePointerModalNodeTrackerForTeamChart()},[]),Q.createElement(RD.vX,{onSkipClick:e.dismissModal,useCase:Ft.fD.TEAM},Q.createElement(RD.wV,{bodyText:Q.createElement("span",{className:Fn.R9},Q.createElement(eO.Tx,{id:"figjam_onboarding_make_something.team_chart.in_fig_jam_you_can_diagram_all_sorts_of_things_here_s_an_example",boldText:Q.createElement("b",null,Q.createElement(eO.Tx,{id:"figjam_onboarding_make_something.team_chart.in_fig_jam_you_can_diagram_all_sorts_of_things_here_s_an_example_bold_text"}))})),buttonText:Q.createElement(eO.Tx,{id:"figjam_onboarding_make_something.brainstorm.go_on"}),onButtonClick:e.onClickPrimaryCta,svg:Fi.A}))}function BM(e){let{onClickPrimaryCta:t,dismissModal:n}=e,[a]=Q.useState(()=>eU.glU.getPointerModalNodeId("teamChartName")||""),{handleTargetLost:r}=(0,M4.Du)({shouldSkipConnectorModalAtom:RP.aG,skipConnectorModal:e.onClickPrimaryCta});return Q.useEffect(()=>{function e(){t()}return lT.Y5.fromFullscreen.on("finishedEditingShapeWithText",e),()=>{lT.Y5.fromFullscreen.removeListener("finishedEditingShapeWithText",e)}},[t]),Q.createElement(RD.vX,{onSkipClick:n,useCase:Ft.fD.TEAM},Q.createElement(M4.Dv,{targetType:"canvas",targetKey:a,topPadding:-6,isBold:!0,autoWidth:!0,arrowPosition:dn.F_.BOTTOM,onTargetLost:r},Q.createElement(RD.mI,{bodyText:Q.createElement("span",null,Q.createElement(eO.Tx,{id:"figjam_onboarding_make_something.team_chart.double_click_this_text_to_type_in_the_manager_s_name_go_ahead_try_it",boldText:Q.createElement("b",null,Q.createElement(eO.Tx,{id:"figjam_onboarding_make_something.team_chart.double_click_this_text_to_type_in_the_manager_s_name_go_ahead_try_it_bold_text"}))}))})))}function BD(e){let[t]=Q.useState(()=>eU.glU.getPointerModalNodeId("teamChartImage")||""),{handleTargetLost:n}=(0,M4.Du)({shouldSkipConnectorModalAtom:RP.aG,skipConnectorModal:e.onClickPrimaryCta});return Q.createElement(RD.vX,{onSkipClick:e.dismissModal,useCase:Ft.fD.TEAM},Q.createElement(M4.Dv,{targetType:"canvas",targetKey:t,topPadding:-4,isBold:!0,autoWidth:!0,arrowPosition:dn.F_.LEFT_TITLE,onTargetLost:n},Q.createElement(RD.mI,{bodyText:Q.createElement("span",null,Q.createElement(eO.Tx,{id:"figjam_onboarding_make_something.team_chart.you_can_add_images_by_simply_dragging_them_into_fig_jam"})),buttonText:Q.createElement(eO.Tx,{id:"figjam_onboarding_make_something.brainstorm.next"}),onButtonClick:e.onClickPrimaryCta})))}function BR(e){let{onClickPrimaryCta:t,dismissModal:n}=e,[a]=Q.useState(()=>eU.glU.getPointerModalNodeId("teamChartQuickCreate")||""),{handleTargetLost:r}=(0,M4.Du)({shouldSkipConnectorModalAtom:RP.aG,skipConnectorModal:e.onClickPrimaryCta});return Q.useEffect(()=>{function e(){t()}return lT.Y5.fromFullscreen.on("quickCreate",e),()=>{lT.Y5.fromFullscreen.removeListener("quickCreate",e)}},[t]),Q.createElement(RD.vX,{onSkipClick:n,useCase:Ft.fD.TEAM},Q.createElement(M4.Dv,{targetType:"canvas",targetKey:a,topPadding:-4,isBold:!0,autoWidth:!0,arrowPosition:dn.F_.RIGHT_TITLE,onTargetLost:r},Q.createElement(RD.mI,{bodyText:Q.createElement("span",null,Q.createElement(eO.Tx,{id:"figjam_onboarding_make_something.team_chart.adding_to_a_diagram_is_simple_hover_over_a_shape_and_click_this_button_try_it",boldText:Q.createElement("b",null,Q.createElement(eO.Tx,{id:"figjam_onboarding_make_something.team_chart.adding_to_a_diagram_is_simple_hover_over_a_shape_and_click_this_button_try_it_bold_text"}))}))})))}function BF(e){let{handleTargetLost:t}=(0,M4.Du)({shouldSkipConnectorModalAtom:RP.aG,skipConnectorModal:e.onClickPrimaryCta});return Q.createElement(RD.vX,{onSkipClick:e.dismissModal,useCase:Ft.fD.TEAM},Q.createElement(M4.Dv,{targetType:"dom",targetKey:BE.BC,topPadding:-23,isBold:!0,autoWidth:!0,onTargetLost:t},Q.createElement(RD.mI,{bodyText:Q.createElement("span",null,Q.createElement(eO.Tx,{id:"figjam_onboarding_make_something.team_chart.you_can_also_grab_more_shapes_from_here"})),buttonText:Q.createElement(eO.Tx,{id:"figjam_onboarding_make_something.brainstorm.next"}),onButtonClick:e.onClickPrimaryCta})))}function BB(e){let{handleTargetLost:t}=(0,M4.Du)({shouldSkipConnectorModalAtom:RP.aG,skipConnectorModal:e.onClickPrimaryCta});return Q.createElement(RD.vX,{onSkipClick:e.dismissModal,useCase:Ft.fD.TEAM},Q.createElement(M4.Dv,{targetType:"dom",targetKey:BE.Nr,isBold:!0,autoWidth:!0,onTargetLost:t},Q.createElement(RD.mI,{bodyText:Q.createElement("span",null,Q.createElement(eO.Tx,{id:"figjam_onboarding_make_something.team_chart.and_use_the_connector_tool_to_connect_any_two_things_together"})),buttonText:Q.createElement(eO.Tx,{id:"figjam_onboarding_make_something.brainstorm.next"}),onButtonClick:e.onClickPrimaryCta})))}function BU(e){let{onNext:t}=Rq({...e,useCase:Ft.fD.TEAM});return Q.createElement(M4.Dv,{targetType:"dom",targetKey:mM.v4,topPadding:-4,isBold:!0,autoWidth:!0,hasShadow:!0},Q.createElement(Rv,{titleText:Q.createElement(eO.Tx,{id:"figjam_onboarding_make_something.team_chart.diagram_together"}),bodyText:Q.createElement("span",null,Q.createElement(eO.Tx,{id:"figjam_onboarding_make_something.team_chart.share_this_board_and_your_whole_team_can_pitch_in"})),buttonText:Q.createElement(eO.Tx,{id:"figjam_onboarding_make_something.brainstorm.share_board"}),onNext:t,onDismiss:e.dismissModal,imgSrc:RD.mN,isBold:!0}))}function BH(e){return(0,RD.rL)({useCase:Ft.fD.TEAM,stepName:"Intro",stepNum:1}),Q.createElement(tg.h,{testId:e.testId,modalType:tE.q3.SELF_CONTAINED,trackingContextName:`${RD.CM} - Team Chart - Intro`,userFlagOnShow:"figjam_editor_onboarded",element:BL,isShowing:e.isShowing,onClickPrimaryCta:e.onClickPrimaryCta,onClose:e.onClose,onManualDismiss:e.onManualDismiss})}function BV(e){return(0,RD.rL)({useCase:Ft.fD.TEAM,stepName:"Name",stepNum:2}),Q.createElement(tg.h,{testId:e.testId,modalType:tE.q3.SELF_CONTAINED,trackingContextName:`${RD.CM} - Team Chart - Name`,userFlagOnShow:"figjam_editor_onboarded",element:BM,isShowing:e.isShowing,onClickPrimaryCta:e.onClickPrimaryCta,onClose:e.onClose,onManualDismiss:e.onManualDismiss})}function BG(e){return(0,RD.rL)({useCase:Ft.fD.TEAM,stepName:"Image",stepNum:3}),Q.createElement(tg.h,{testId:e.testId,modalType:tE.q3.SELF_CONTAINED,trackingContextName:`${RD.CM} - Team Chart - Image`,userFlagOnShow:"figjam_editor_onboarded",element:BD,isShowing:e.isShowing,onClickPrimaryCta:e.onClickPrimaryCta,onClose:e.onClose,onManualDismiss:e.onManualDismiss})}function BK(e){return(0,RD.rL)({useCase:Ft.fD.TEAM,stepName:"Quick Create",stepNum:4}),Q.createElement(tg.h,{testId:e.testId,modalType:tE.q3.SELF_CONTAINED,trackingContextName:`${RD.CM} - Team Chart - Quick Create`,userFlagOnShow:"figjam_editor_onboarded",element:BR,isShowing:e.isShowing,onClickPrimaryCta:e.onClickPrimaryCta,onClose:e.onClose,onManualDismiss:e.onManualDismiss})}function BW(e){return(0,RD.rL)({useCase:Ft.fD.TEAM,stepName:"Shape",stepNum:5}),Q.createElement(tg.h,{testId:e.testId,modalType:tE.q3.SELF_CONTAINED,trackingContextName:`${RD.CM} - Team Chart - Shape`,userFlagOnShow:"figjam_editor_onboarded",element:BF,isShowing:e.isShowing,onClickPrimaryCta:e.onClickPrimaryCta,onClose:e.onClose,onManualDismiss:e.onManualDismiss})}function Bz(e){return(0,RD.rL)({useCase:Ft.fD.TEAM,stepName:"Connector",stepNum:6}),Q.createElement(tg.h,{testId:e.testId,modalType:tE.q3.SELF_CONTAINED,trackingContextName:`${RD.CM} - Team Chart - Connector`,userFlagOnShow:"figjam_editor_onboarded",element:BB,isShowing:e.isShowing,onClickPrimaryCta:e.onClickPrimaryCta,onClose:e.onClose,onManualDismiss:e.onManualDismiss})}function Bj(e){let t=(0,Rm.O)();return(0,RD.rL)({useCase:Ft.fD.TEAM,stepName:"Share",stepNum:7}),Q.createElement(tg.h,{testId:e.testId,modalType:tE.q3.SELF_CONTAINED,trackingContextName:`${RD.CM} - Team Chart - Share`,userFlagOnShow:"figjam_editor_onboarded",element:BU,isShowing:e.isShowing,onClickPrimaryCta:e.onClickPrimaryCta,onClose:()=>{t({eventName:"msv2_completed",useCase:Ft.fD.TEAM}),e.onClose()},onManualDismiss:e.onManualDismiss})}function BY(e){return Q.useEffect(()=>{eU.glU.populatePointerModalNodeTrackerForTeamUpdates()},[]),Q.createElement(RD.vX,{onSkipClick:e.dismissModal,useCase:Ft.fD.UPDATES},Q.createElement(RD.wV,{bodyText:Q.createElement("span",{className:Fn.R9},Q.createElement(eO.Tx,{id:"figjam_onboarding_make_something.team_updates.fig_jam_s_great_for_team_syncs_here_s_how_it_works",boldText:Q.createElement("b",null,Q.createElement(eO.Tx,{id:"figjam_onboarding_make_something.team_updates.fig_jam_s_great_for_team_syncs_here_s_how_it_works_bold_text"}))})),buttonText:Q.createElement(eO.Tx,{id:"figjam_onboarding_make_something.brainstorm.go_on"}),onButtonClick:e.onClickPrimaryCta,svg:Fo.A}))}function BZ(e){let[t]=Q.useState(()=>eU.glU.getPointerModalNodeId("teamUpdatesSection")||""),{handleTargetLost:n}=(0,M4.Du)({shouldSkipConnectorModalAtom:RP.aG,skipConnectorModal:e.onClickPrimaryCta});return Q.createElement(RD.vX,{onSkipClick:e.dismissModal,useCase:Ft.fD.UPDATES},Q.createElement(M4.Dv,{targetType:"canvas",targetKey:t,topPadding:-6,isBold:!0,autoWidth:!0,arrowPosition:dn.F_.BOTTOM,onTargetLost:n},Q.createElement(RD.mI,{bodyText:Q.createElement("span",null,Q.createElement(eO.Tx,{id:"figjam_onboarding_make_something.team_updates.each_person_gets_a_row_of_their_own_for_sharing_updates_and_priorities"})),buttonText:Q.createElement(eO.Tx,{id:"figjam_onboarding_make_something.brainstorm.next"}),onButtonClick:e.onClickPrimaryCta})))}function BX(e){let[t]=Q.useState(()=>eU.glU.getPointerModalNodeId("teamUpdatesPhotoBooth")||""),{handleTargetLost:n}=(0,M4.Du)({shouldSkipConnectorModalAtom:RP.aG,skipConnectorModal:e.onClickPrimaryCta});return Q.createElement(RD.vX,{onSkipClick:e.dismissModal,useCase:Ft.fD.UPDATES},Q.createElement(M4.Dv,{targetType:"canvas",targetKey:t,topPadding:-6,isBold:!0,autoWidth:!0,arrowPosition:dn.F_.BOTTOM,onTargetLost:n},Q.createElement(RD.mI,{bodyText:Q.createElement("span",null,Q.createElement(eO.Tx,{id:"figjam_onboarding_make_something.team_updates.take_a_selfie_then_drag_it_into_whichever_row_you_d_like_try_and_click_the_red_dot",boldText:Q.createElement("b",null,Q.createElement(eO.Tx,{id:"figjam_onboarding_make_something.team_updates.take_a_selfie_then_drag_it_into_whichever_row_you_d_like_try_and_click_the_red_dot_bold_text"}))})),buttonText:Q.createElement(eO.Tx,{id:"figjam_onboarding_make_something.brainstorm.next"}),onButtonClick:e.onClickPrimaryCta})))}function Bq(e){let[t]=Q.useState(()=>eU.glU.getPointerModalNodeId("teamUpdatesUpdates")||""),{handleTargetLost:n}=(0,M4.Du)({shouldSkipConnectorModalAtom:RP.aG,skipConnectorModal:e.onClickPrimaryCta});return Q.createElement(RD.vX,{onSkipClick:e.dismissModal,useCase:Ft.fD.UPDATES},Q.createElement(M4.Dv,{targetType:"canvas",targetKey:t,topPadding:-5,isBold:!0,autoWidth:!0,arrowPosition:dn.F_.BOTTOM,onTargetLost:n},Q.createElement(RD.mI,{bodyText:Q.createElement("span",null,Q.createElement(eO.Tx,{id:"figjam_onboarding_make_something.team_updates.your_whole_team_can_share_updates_here"})),buttonText:Q.createElement(eO.Tx,{id:"figjam_onboarding_make_something.brainstorm.next"}),onButtonClick:e.onClickPrimaryCta})))}function BJ(e){let[t]=Q.useState(()=>eU.glU.getPointerModalNodeId("teamUpdatesImportantDates")||""),{handleTargetLost:n}=(0,M4.Du)({shouldSkipConnectorModalAtom:RP.aG,skipConnectorModal:e.onClickPrimaryCta});return Q.createElement(RD.vX,{onSkipClick:e.dismissModal,useCase:Ft.fD.UPDATES},Q.createElement(M4.Dv,{targetType:"canvas",targetKey:t,topPadding:-5,isBold:!0,autoWidth:!0,arrowPosition:dn.F_.BOTTOM,onTargetLost:n},Q.createElement(RD.mI,{bodyText:Q.createElement("span",null,Q.createElement(eO.Tx,{id:"figjam_onboarding_make_something.team_updates.and_can_add_important_dates_to_the_calendar_over_here"})),buttonText:Q.createElement(eO.Tx,{id:"figjam_onboarding_make_something.brainstorm.next"}),onButtonClick:e.onClickPrimaryCta})))}function BQ(e){let{onClickPrimaryCta:t,dismissModal:n}=e,[a]=Q.useState(()=>eU.glU.getPointerModalNodeId("teamUpdatesSticky")||""),{handleTargetLost:r}=(0,M4.Du)({shouldSkipConnectorModalAtom:RP.aG,skipConnectorModal:e.onClickPrimaryCta});return Q.useEffect(()=>{function e(){t()}return lT.Y5.fromFullscreen.on("finishedEditingSticky",e),()=>{lT.Y5.fromFullscreen.removeListener("finishedEditingSticky",e)}},[t]),Q.createElement(RD.vX,{onSkipClick:n,useCase:Ft.fD.UPDATES},Q.createElement(M4.Dv,{targetType:"canvas",targetKey:a,topPadding:-16,isBold:!0,autoWidth:!0,arrowPosition:dn.F_.TOP,onTargetLost:r},Q.createElement(RD.mI,{bodyText:Q.createElement("span",null,Q.createElement(eO.Tx,{id:"figjam_onboarding_make_something.team_updates.give_it_a_go_try_typing_your_priorities_in_this_sticky_note",boldText:Q.createElement("b",null,Q.createElement(eO.Tx,{id:"figjam_onboarding_make_something.team_updates.give_it_a_go_try_typing_your_priorities_in_this_sticky_note_bold_text"}))}))})))}function B$(e){let{onNext:t}=Rq({...e,useCase:Ft.fD.UPDATES});return Q.createElement(M4.Dv,{targetType:"dom",targetKey:mM.v4,topPadding:-4,isBold:!0,autoWidth:!0,hasShadow:!0},Q.createElement(Rv,{titleText:Q.createElement(eO.Tx,{id:"figjam_onboarding_make_something.brainstorm.when_you_re_ready"}),bodyText:Q.createElement(eO.Tx,{id:"figjam_onboarding_make_something.team_updates.invite_your_teammates_and_run_a_quick_team_check_in"}),buttonText:Q.createElement(eO.Tx,{id:"figjam_onboarding_make_something.brainstorm.share_board"}),onNext:t,onDismiss:e.dismissModal,imgSrc:RD.mN,isBold:!0}))}function B0(e){return(0,RD.rL)({useCase:Ft.fD.UPDATES,stepName:"Intro",stepNum:1}),Q.createElement(tg.h,{testId:e.testId,modalType:tE.q3.SELF_CONTAINED,trackingContextName:`${RD.CM} - Team Updates - Intro`,userFlagOnShow:"figjam_editor_onboarded",element:BY,isShowing:e.isShowing,onClickPrimaryCta:e.onClickPrimaryCta,onClose:e.onClose,onManualDismiss:e.onManualDismiss})}function B1(e){return(0,RD.rL)({useCase:Ft.fD.UPDATES,stepName:"Section",stepNum:2}),Q.createElement(tg.h,{testId:e.testId,modalType:tE.q3.SELF_CONTAINED,trackingContextName:`${RD.CM} - Team Updates - Section`,userFlagOnShow:"figjam_editor_onboarded",element:BZ,isShowing:e.isShowing,onClickPrimaryCta:e.onClickPrimaryCta,onClose:e.onClose,onManualDismiss:e.onManualDismiss})}function B2(e){return(0,RD.rL)({useCase:Ft.fD.UPDATES,stepName:"Photo Booth",stepNum:3}),Q.createElement(tg.h,{testId:e.testId,modalType:tE.q3.SELF_CONTAINED,trackingContextName:`${RD.CM} - Team Updates - Photo Booth`,userFlagOnShow:"figjam_editor_onboarded",element:BX,isShowing:e.isShowing,onClickPrimaryCta:e.onClickPrimaryCta,onClose:e.onClose,onManualDismiss:e.onManualDismiss})}function B5(e){return(0,RD.rL)({useCase:Ft.fD.UPDATES,stepName:"Updates",stepNum:4}),Q.createElement(tg.h,{testId:e.testId,modalType:tE.q3.SELF_CONTAINED,trackingContextName:`${RD.CM} - Team Updates - Updates`,userFlagOnShow:"figjam_editor_onboarded",element:Bq,isShowing:e.isShowing,onClickPrimaryCta:e.onClickPrimaryCta,onClose:e.onClose,onManualDismiss:e.onManualDismiss})}function B4(e){return(0,RD.rL)({useCase:Ft.fD.UPDATES,stepName:"Important Dates",stepNum:5}),Q.createElement(tg.h,{testId:e.testId,modalType:tE.q3.SELF_CONTAINED,trackingContextName:`${RD.CM} - Team Updates - Important Dates`,userFlagOnShow:"figjam_editor_onboarded",element:BJ,isShowing:e.isShowing,onClickPrimaryCta:e.onClickPrimaryCta,onClose:e.onClose,onManualDismiss:e.onManualDismiss})}function B3(e){return(0,RD.rL)({useCase:Ft.fD.UPDATES,stepName:"Sticky",stepNum:6}),Q.createElement(tg.h,{testId:e.testId,modalType:tE.q3.SELF_CONTAINED,trackingContextName:`${RD.CM} - Team Updates - Sticky`,userFlagOnShow:"figjam_editor_onboarded",element:BQ,isShowing:e.isShowing,onClickPrimaryCta:e.onClickPrimaryCta,onClose:e.onClose,onManualDismiss:e.onManualDismiss})}function B6(e){let t=(0,Rm.O)();return(0,RD.rL)({useCase:Ft.fD.UPDATES,stepName:"Share",stepNum:7}),Q.createElement(tg.h,{testId:e.testId,modalType:tE.q3.SELF_CONTAINED,trackingContextName:`${RD.CM} - Team Updates - Share`,userFlagOnShow:"figjam_editor_onboarded",element:B$,isShowing:e.isShowing,onClickPrimaryCta:e.onClickPrimaryCta,onClose:()=>{t({eventName:"msv2_completed",useCase:Ft.fD.UPDATES}),e.onClose()},onManualDismiss:e.onManualDismiss})}function B7(e){switch(e){case Ft.qy.BRAINSTORM_TEMPLATE_BUTTON_INTERACTED:return[Bu,Bm,Bp,B_,Bf,Bh,Bg,B8];case Ft.qy.TEAM_UPDATES_TEMPLATE_BUTTON_INTERACTED:return[B0,B1,B2,B5,B4,B3,B6,B8];case Ft.qy.PLANNING_AHEAD_TEMPLATE_BUTTON_INTERACTED:return[BN,Bk,BS,BI,BA,BP,BO,B8];case Ft.qy.TEAM_CHART_TEMPLATE_BUTTON_INTERACTED:return[BH,BV,BG,BK,BW,Bz,Bj,B8];default:return[]}}function B8({onClickPrimaryCta:e}){let t=(0,$.d4)(e=>e.modalShown),n=(0,Q.useRef)(t);return(0,Q.useEffect)(()=>{!t&&n.current&&(e(),(0,uj.YQ)({id:mM.P7}))},[e,t]),Q.createElement(Q.Fragment,null)}function B9(){let[e,t]=Q.useState([]),n=(0,e_.Xr)(RP.w),{complete:a,uniqueId:r,show:l,isShowing:i}=(0,tp.e)({overlay:tv.Njd,priority:th.N.OVERRIDING_MODAL}),o=Q.useCallback(()=>{a(),n(RP.tX.COMPLETED)},[a,n]);return((0,Eo.E)(r,Ft.qy.BRAINSTORM_TEMPLATE_BUTTON_INTERACTED,()=>{t(B7(Ft.qy.BRAINSTORM_TEMPLATE_BUTTON_INTERACTED)),n(RP.tX.USE_CASE_STEPS),l()}),(0,Eo.E)(r,Ft.qy.TEAM_UPDATES_TEMPLATE_BUTTON_INTERACTED,()=>{t(B7(Ft.qy.TEAM_UPDATES_TEMPLATE_BUTTON_INTERACTED)),n(RP.tX.USE_CASE_STEPS),l()}),(0,Eo.E)(r,Ft.qy.PLANNING_AHEAD_TEMPLATE_BUTTON_INTERACTED,()=>{t(B7(Ft.qy.PLANNING_AHEAD_TEMPLATE_BUTTON_INTERACTED)),n(RP.tX.USE_CASE_STEPS),l()}),(0,Eo.E)(r,Ft.qy.TEAM_CHART_TEMPLATE_BUTTON_INTERACTED,()=>{t(B7(Ft.qy.TEAM_CHART_TEMPLATE_BUTTON_INTERACTED)),n(RP.tX.USE_CASE_STEPS),l()}),RI({overlayUniqueId:r,afterReset:a}),0===e.length)?null:Q.createElement(RA,{steps:e,onComplete:o,isShowing:i,overlayUniqueId:r})}var Ue=n(133055),Ut=n(332475),Un=n(833458),Ua=n(375274);let Ur="edit_action_experiment_dont_show_again";function Ul({dismissModal:e}){let t=(0,Ua.E)(),n=(0,$.wA)(),a=(0,t_.q5)();return Q.createElement(Q.Fragment,null,Q.createElement("div",{className:"edit_action_experiment_steps--header--kBYL2 onboarding--editorOnboardingHeader--Kk5Cb"},Q.createElement(eO.Tx,{id:"pro_edit_action.heading"})),Q.createElement("div",{className:"edit_action_experiment_steps--content---HMhp"},Q.createElement(eO.Tx,{id:"pro_edit_action.body_text"})),Q.createElement("div",{className:"edit_action_experiment_steps--cta--3U128"},Q.createElement(nc.tM,{onClick:()=>{n(tB.b({[Ur]:!0})),e()},trackingProperties:{text:"Not now"}},Q.createElement(eO.Tx,{id:"pro_edit_action.dismiss_button_text"})),Q.createElement(nc.vd,{className:"edit_action_experiment_steps--primaryButton--R2FKA",onClick:()=>{e(),a&&t(a,Un.$5)},trackingProperties:{text:"Start editing"}},Q.createElement(eO.Tx,{id:"pro_edit_action.primary_button_text"}))))}var Ui=n(422469),Uo=n(124191);let Us=(0,Ui.Op)({initial:"await_button_or_fullscreen",states:[{id:"await_button_or_fullscreen",transitions:[(0,Ui.nr)("Context Viewed","check_in_drafts",{condition:({event:e})=>"Editor > Toolbar > File Edit Button"===e.properties.name||"Editor > Toolbelt > File Edit Button"===e.properties.name}),(0,Ui.nr)(Uo.R,"check_show_button",{condition:({event:e})=>0!==e.properties.numSelected&&null!=e.properties.numSelected}),(0,Ui.nr)(wF.cZ,"check_show_button")]},{id:"check_in_drafts",transitions:[(0,Ui.MR)("static_checks_in_drafts","await_button_or_fullscreen",{condition:({event:e})=>!e.succeeded}),(0,Ui.MR)("static_checks_in_drafts","show_overlay",{condition:({event:e})=>e.succeeded})]},{id:"check_show_button",transitions:[(0,Ui.MR)("static_checks_show_button","await_button_or_fullscreen",{condition:({event:e})=>!e.succeeded}),(0,Ui.MR)("static_checks_show_button","show_overlay",{condition:({event:e})=>e.succeeded})]},{id:"show_overlay",terminal:!0}]}),Uc="edit_action_experiment_shown_once",Ud="edit_action_experiment_shown_twice",Uu=(0,tc.r1)("edit_action_experiment_dont_show_again"),Um=(0,tc.r1)(Uc),Up=(0,tc.r1)(Ud);function U_(){let e=(0,$.wA)(),t=(0,Ut.eD)(Us),n=(0,ef.md)(Uu),a=(0,ef.md)(Es.$q),r=(0,ef.md)(Um),l=(0,ef.md)(Up),i=(0,ef.md)(Es.aT),o=(0,tp.e)({overlay:tv.UGT,priority:th.N.HIGH_PRIORITY_MODAL},[n,r,l]),s=(0,Q.useCallback)(()=>{o.show({canShow:e=>!e})},[o]),c=(0,Q.useCallback)(()=>{"loaded"!==r.status||r.data||e(tB.b({[Uc]:!0})),"loaded"===r.status&&r.data&&e(tB.b({[Ud]:!0})),o.complete()},[e,o,r]);(0,Ut.ST)(t,(0,Q.useCallback)(({to:e})=>{"check_in_drafts"===e&&t.transition({id:"static_checks_in_drafts",succeeded:!a}),"check_show_button"===e&&t.transition({id:"static_checks_show_button",succeeded:i}),"show_overlay"===e&&(s(),t.reset())},[a,t,i,s]));let d=(0,Q.useCallback)(({dismissModal:e})=>Q.createElement(Ul,{dismissModal:e}),[]);return Q.createElement(tg.h,{className:"edit_action_experiment_steps--modal--3KhyN pointer_modal--walkThroughModal--6eTVS pointer_modal--pointerModal--wrpFz",element:d,disableHighlight:!0,isShowing:o.isShowing,modalType:tE.q3.WALK_THROUGH,onboardingKey:Un.m7,onClickPrimaryCta:c,onClose:c,onManualDismiss:c,shouldCenterArrow:dn.EL.FALLBACK,shouldDismissWhenLostDOMTarget:!0,trackingContextName:"Edit Action Experiment Modal (no checkbox)",width:300-2*M4.uv,additionalOnExplicitDismiss:()=>{e(tB.b({[Ur]:!0}))}})}var Uf=n(105243),Uh=n(900472),Ug=n(68065);function UE(){return Q.createElement("svg",{width:"146",height:"191",viewBox:"0 0 146 191",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Q.createElement("path",{d:"M35 153H3C1.34315 153 0 154.343 0 156V188C0 189.657 1.34315 191 3 191H35C36.6569 191 38 189.657 38 188V156C38 154.343 36.6569 153 35 153Z",fill:"#007BE5"}),Q.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M23.875 166.25C22.4943 166.25 21.375 167.369 21.375 168.75C21.375 170.131 22.4943 171.25 23.875 171.25C25.2557 171.25 26.375 170.131 26.375 168.75C26.375 167.369 25.2557 166.25 23.875 166.25ZM19.875 168.75C19.875 166.541 21.6659 164.75 23.875 164.75C26.0841 164.75 27.875 166.541 27.875 168.75C27.875 170.3 26.9937 171.644 25.7049 172.308C28.337 173.03 30.3125 175.271 30.3125 178.012V179.312V180.062H29.5625H20.5625H19.8125H18.1875H8.4375H7.6875V179.312V178.012C7.6875 175.271 9.663 173.03 12.2951 172.308C11.0063 171.644 10.125 170.3 10.125 168.75C10.125 166.541 11.9159 164.75 14.125 164.75C16.3341 164.75 18.125 166.541 18.125 168.75C18.125 170.3 17.2437 171.644 15.9549 172.308C17.1449 172.634 18.2008 173.271 19.0005 174.125C19.7985 173.271 20.8514 172.633 22.0433 172.307C20.7555 171.642 19.875 170.299 19.875 168.75ZM9.1875 178.012C9.1875 175.617 11.3334 173.562 14.125 173.562C16.9166 173.562 19.0625 175.617 19.0625 178.012V178.562H18.1875H9.1875V178.012ZM20.5625 178.562H28.8125V178.012C28.8125 175.617 26.6666 173.562 23.875 173.562C22.2296 173.562 20.7911 174.286 19.8997 175.374C20.323 176.164 20.5625 177.058 20.5625 178.012V178.562ZM11.625 168.75C11.625 167.369 12.7443 166.25 14.125 166.25C15.5057 166.25 16.625 167.369 16.625 168.75C16.625 170.131 15.5057 171.25 14.125 171.25C12.7443 171.25 11.625 170.131 11.625 168.75Z",fill:"white"}),Q.createElement("path",{d:"M89 153H57C55.3431 153 54 154.343 54 156V188C54 189.657 55.3431 191 57 191H89C90.6569 191 92 189.657 92 188V156C92 154.343 90.6569 153 89 153Z",fill:"#9747FF"}),Q.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M77.875 166.25C76.4943 166.25 75.375 167.369 75.375 168.75C75.375 170.131 76.4943 171.25 77.875 171.25C79.2557 171.25 80.375 170.131 80.375 168.75C80.375 167.369 79.2557 166.25 77.875 166.25ZM73.875 168.75C73.875 166.541 75.6659 164.75 77.875 164.75C80.0841 164.75 81.875 166.541 81.875 168.75C81.875 170.3 80.9937 171.644 79.7049 172.308C82.337 173.03 84.3125 175.271 84.3125 178.012V179.312V180.062H83.5625H74.5625H73.8125H72.1875H62.4375H61.6875V179.312V178.012C61.6875 175.271 63.663 173.03 66.2951 172.308C65.0063 171.644 64.125 170.3 64.125 168.75C64.125 166.541 65.9159 164.75 68.125 164.75C70.3341 164.75 72.125 166.541 72.125 168.75C72.125 170.3 71.2437 171.644 69.9549 172.308C71.1449 172.634 72.2008 173.271 73.0005 174.125C73.7985 173.271 74.8514 172.633 76.0433 172.307C74.7555 171.642 73.875 170.299 73.875 168.75ZM63.1875 178.012C63.1875 175.617 65.3334 173.562 68.125 173.562C70.9166 173.562 73.0625 175.617 73.0625 178.012V178.562H72.1875H63.1875V178.012ZM74.5625 178.562H82.8125V178.012C82.8125 175.617 80.6666 173.562 77.875 173.562C76.2296 173.562 74.7911 174.286 73.8997 175.374C74.323 176.164 74.5625 177.058 74.5625 178.012V178.562ZM65.625 168.75C65.625 167.369 66.7443 166.25 68.125 166.25C69.5057 166.25 70.625 167.369 70.625 168.75C70.625 170.131 69.5057 171.25 68.125 171.25C66.7443 171.25 65.625 170.131 65.625 168.75Z",fill:"white"}),Q.createElement("path",{d:"M143 153H111C109.343 153 108 154.343 108 156V188C108 189.657 109.343 191 111 191H143C144.657 191 146 189.657 146 188V156C146 154.343 144.657 153 143 153Z",fill:"#FFCD29"}),Q.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M131.875 166.25C130.494 166.25 129.375 167.369 129.375 168.75C129.375 170.131 130.494 171.25 131.875 171.25C133.256 171.25 134.375 170.131 134.375 168.75C134.375 167.369 133.256 166.25 131.875 166.25ZM127.875 168.75C127.875 166.541 129.666 164.75 131.875 164.75C134.084 164.75 135.875 166.541 135.875 168.75C135.875 170.3 134.994 171.644 133.705 172.308C136.337 173.03 138.312 175.271 138.312 178.012V179.312V180.062H137.562H128.562H127.812H126.188H116.438H115.688V179.312V178.012C115.688 175.271 117.663 173.03 120.295 172.308C119.006 171.644 118.125 170.3 118.125 168.75C118.125 166.541 119.916 164.75 122.125 164.75C124.334 164.75 126.125 166.541 126.125 168.75C126.125 170.3 125.244 171.644 123.955 172.308C125.145 172.634 126.201 173.271 127 174.125C127.799 173.271 128.851 172.633 130.043 172.307C128.755 171.642 127.875 170.299 127.875 168.75ZM117.188 178.012C117.188 175.617 119.333 173.562 122.125 173.562C124.917 173.562 127.062 175.617 127.062 178.012V178.562H126.188H117.188V178.012ZM128.562 178.562H136.812V178.012C136.812 175.617 134.667 173.562 131.875 173.562C130.23 173.562 128.791 174.286 127.9 175.374C128.323 176.164 128.562 177.058 128.562 178.012V178.562ZM119.625 168.75C119.625 167.369 120.744 166.25 122.125 166.25C123.506 166.25 124.625 167.369 124.625 168.75C124.625 170.131 123.506 171.25 122.125 171.25C120.744 171.25 119.625 170.131 119.625 168.75Z",fill:"white"}),Q.createElement("path",{d:"M112.581 1L125 13.7668V113H20V1H112.581Z",fill:"white"}),Q.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M19.5 0.5H112.792L125.5 13.5637V113.5H19.5V0.5ZM20.5 1.5V112.5H124.5V14.2668H112.081V1.5H20.5ZM113.081 2.23108L123.816 13.2668H113.081V2.23108Z",fill:"black",fillOpacity:"0.8"}),Q.createElement("path",{d:"M38 71C41.866 71 45 67.866 45 64C45 60.134 41.866 57 38 57C34.134 57 31 60.134 31 64C31 67.866 34.134 71 38 71Z",fill:"#56CCF2",fillOpacity:"0.8"}),Q.createElement("path",{d:"M60 71C63.866 71 67 67.866 67 64C67 60.134 63.866 57 60 57C56.134 57 53 60.134 53 64C53 67.866 56.134 71 60 71Z",fill:"#EB5757"}),Q.createElement("path",{d:"M82 71C85.866 71 89 67.866 89 64C89 60.134 85.866 57 82 57C78.134 57 75 60.134 75 64C75 67.866 78.134 71 82 71Z",fill:"#F2994A"}),Q.createElement("path",{d:"M104 71C107.866 71 111 67.866 111 64C111 60.134 107.866 57 104 57C100.134 57 97 60.134 97 64C97 67.866 100.134 71 104 71Z",fill:"#F2C94C"}),Q.createElement("path",{d:"M38 49C41.866 49 45 45.866 45 42C45 38.134 41.866 35 38 35C34.134 35 31 38.134 31 42C31 45.866 34.134 49 38 49Z",fill:"#333333"}),Q.createElement("path",{d:"M60 49C63.866 49 67 45.866 67 42C67 38.134 63.866 35 60 35C56.134 35 53 38.134 53 42C53 45.866 56.134 49 60 49Z",fill:"#4F4F4F"}),Q.createElement("path",{d:"M82 49C85.866 49 89 45.866 89 42C89 38.134 85.866 35 82 35C78.134 35 75 38.134 75 42C75 45.866 78.134 49 82 49Z",fill:"#828282"}),Q.createElement("path",{d:"M104 49C107.866 49 111 45.866 111 42C111 38.134 107.866 35 104 35C100.134 35 97 38.134 97 42C97 45.866 100.134 49 104 49Z",fill:"#E0E0E0"}),Q.createElement("path",{d:"M36.66 20L36.1 18.36H33.26L32.68 20H31.05L33.72 13H35.69L38.34 20H36.66ZM33.7 17.1H35.67L35.15 15.58C34.99 15.11 34.97 14.59 34.96 13.85H34.42C34.41 14.59 34.4 15.11 34.23 15.59L33.7 17.1ZM39.9023 21.95C38.9523 21.95 38.6523 21.49 38.6523 21.01C38.6523 20.61 38.9823 20.32 39.3423 20.21V19.75C39.0223 19.66 38.7723 19.44 38.7723 19.08C38.7723 18.54 39.1623 18.28 39.5923 18.14V17.69C39.2423 17.44 39.0223 17.16 39.0223 16.65C39.0223 15.6 39.9323 14.85 41.1023 14.85C41.9223 14.85 42.6723 15.17 42.9323 15.9H43.3623C43.4423 15.17 43.6723 15 44.1523 15H44.4123V16.08H43.8623C43.5523 16.08 43.4723 16.15 43.4123 16.66L43.4023 16.75C43.2823 17.83 42.4123 18.49 41.2423 18.49C40.8723 18.49 40.5023 18.45 40.2023 18.32C39.9223 18.4 39.8223 18.51 39.8223 18.67C39.8223 18.89 40.0323 18.89 40.3223 18.89H42.4723C43.5423 18.89 44.2123 19.59 44.2123 20.4C44.2123 21.41 43.4523 21.95 42.4723 21.95H39.9023ZM41.2323 17.56C41.7623 17.56 42.1123 17.22 42.1123 16.71C42.1123 16.19 41.7623 15.81 41.2323 15.81C40.7023 15.81 40.3523 16.19 40.3523 16.71C40.3523 17.22 40.7023 17.56 41.2323 17.56ZM40.2423 20.92H42.1923C42.6623 20.92 42.8123 20.73 42.8123 20.45C42.8123 20.22 42.6623 20 42.1923 20H40.0023C39.8823 20.07 39.7423 20.25 39.7423 20.45C39.7423 20.77 39.9723 20.92 40.2423 20.92Z",fill:"black",fillOpacity:"0.8"}),Q.createElement("path",{d:"M54.62 20L53.97 18.15H50.89L50.23 20H49.15L51.78 13H53.16L55.74 20H54.62ZM51.22 17.23H53.64L52.97 15.33C52.77 14.75 52.66 14.35 52.65 13.7H52.23C52.21 14.35 52.11 14.76 51.9 15.33L51.22 17.23ZM57.4441 21.95C56.5441 21.95 56.2441 21.45 56.2441 21.05C56.2441 20.6 56.5041 20.27 56.9341 20.08V19.72C56.6641 19.63 56.4441 19.41 56.4441 19.11C56.4441 18.73 56.7041 18.43 57.1841 18.23V17.87C56.8741 17.62 56.6441 17.28 56.6441 16.64C56.6441 15.7 57.4141 14.9 58.5441 14.9C59.5941 14.9 60.0441 15.46 60.2141 15.87H60.5641C60.6041 15.4 60.8441 15.04 61.3241 15.04H61.6641V15.82H61.2541C60.8341 15.82 60.6741 15.92 60.6341 16.49L60.6141 16.73C60.5241 17.85 59.7541 18.57 58.6441 18.57C58.3041 18.57 57.9841 18.53 57.7041 18.38C57.4341 18.49 57.2641 18.67 57.2641 18.85C57.2641 19.02 57.3641 19.17 57.7041 19.17H59.8541C60.8241 19.17 61.4541 19.73 61.4541 20.56C61.4541 21.49 60.7341 21.95 59.8741 21.95H57.4441ZM58.6441 17.83C59.2941 17.83 59.7141 17.4 59.7141 16.74C59.7141 16.09 59.2941 15.64 58.6441 15.64C57.9941 15.64 57.5741 16.09 57.5741 16.74C57.5741 17.4 57.9941 17.83 58.6441 17.83ZM57.8241 21.15H59.7541C60.1541 21.15 60.5041 21.04 60.5041 20.57C60.5041 20.1 60.1541 20 59.7541 20H57.4341C57.2741 20.1 57.0741 20.32 57.0741 20.63C57.0741 21.03 57.3441 21.15 57.8241 21.15Z",fill:"black",fillOpacity:"0.8"}),Q.createElement("path",{d:"M67.4862 20H66.2205L68.5249 13.4545H69.9886L72.2962 20H71.0305L69.2823 14.7969H69.2312L67.4862 20ZM67.5277 17.4336H70.9794V18.386H67.5277V17.4336ZM75.1377 21.9432C74.7222 21.9432 74.3653 21.8867 74.067 21.7738C73.7687 21.663 73.529 21.5138 73.3479 21.3263C73.1668 21.1388 73.0411 20.9311 72.9708 20.7031L74.0127 20.4506C74.0596 20.5465 74.1277 20.6413 74.2172 20.7351C74.3067 20.831 74.4271 20.9098 74.5784 20.9716C74.7318 21.0355 74.9246 21.0675 75.1569 21.0675C75.485 21.0675 75.7566 20.9876 75.9718 20.8278C76.187 20.6701 76.2946 20.4102 76.2946 20.0479V19.1179H76.2371C76.1775 19.2372 76.0901 19.3597 75.975 19.4854C75.8621 19.6112 75.7119 19.7166 75.5244 19.8018C75.339 19.8871 75.1057 19.9297 74.8245 19.9297C74.4473 19.9297 74.1054 19.8413 73.7986 19.6644C73.4939 19.4854 73.251 19.2191 73.0699 18.8654C72.8909 18.5096 72.8014 18.0643 72.8014 17.5295C72.8014 16.9904 72.8909 16.5355 73.0699 16.1648C73.251 15.7919 73.4949 15.5096 73.8017 15.3178C74.1086 15.1239 74.4505 15.027 74.8277 15.027C75.1153 15.027 75.3518 15.076 75.5372 15.174C75.7247 15.2699 75.8738 15.386 75.9846 15.5224C76.0954 15.6566 76.1796 15.7834 76.2371 15.9027H76.301V15.0909H77.442V20.0799C77.442 20.4996 77.3419 20.8469 77.1416 21.1218C76.9413 21.3967 76.6675 21.6023 76.3202 21.7386C75.9729 21.875 75.5787 21.9432 75.1377 21.9432ZM75.1473 19.022C75.3923 19.022 75.6011 18.9624 75.7737 18.843C75.9463 18.7237 76.0773 18.5522 76.1668 18.3285C76.2563 18.1048 76.301 17.8363 76.301 17.5231C76.301 17.2141 76.2563 16.9435 76.1668 16.7113C76.0794 16.479 75.9495 16.299 75.7769 16.1712C75.6064 16.0412 75.3966 15.9762 75.1473 15.9762C74.8895 15.9762 74.6743 16.0433 74.5017 16.1776C74.3291 16.3118 74.1991 16.4961 74.1118 16.7305C74.0244 16.9627 73.9807 17.2269 73.9807 17.5231C73.9807 17.8235 74.0244 18.0866 74.1118 18.3125C74.2013 18.5362 74.3323 18.7109 74.5049 18.8366C74.6796 18.9602 74.8937 19.022 75.1473 19.022Z",fill:"black",fillOpacity:"0.8"}),Q.createElement("path",{d:"M84.0611 20H83.2301L85.6335 13.4545H86.4517L88.8551 20H88.0241L86.0682 14.4901H86.017L84.0611 20ZM84.3679 17.4432H87.7173V18.1463H84.3679V17.4432ZM91.7989 21.9432C91.4346 21.9432 91.1213 21.8963 90.8593 21.8026C90.5972 21.7109 90.3788 21.5895 90.2041 21.4382C90.0315 21.2891 89.8941 21.1293 89.7918 20.9588L90.3927 20.5369C90.4608 20.6264 90.5471 20.7287 90.6515 20.8438C90.7559 20.9609 90.8987 21.0621 91.0798 21.1474C91.263 21.2347 91.5027 21.2784 91.7989 21.2784C92.1952 21.2784 92.5223 21.1825 92.7801 20.9908C93.0379 20.799 93.1668 20.4986 93.1668 20.0895V19.0923H93.1029C93.0475 19.1818 92.9687 19.2926 92.8664 19.4247C92.7662 19.5547 92.6213 19.6708 92.4317 19.7731C92.2442 19.8732 91.9907 19.9233 91.6711 19.9233C91.2748 19.9233 90.9189 19.8295 90.6036 19.642C90.2904 19.4545 90.0422 19.1818 89.8589 18.8239C89.6778 18.4659 89.5873 18.0312 89.5873 17.5199C89.5873 17.017 89.6757 16.5792 89.8525 16.2063C90.0294 15.8313 90.2755 15.5415 90.5908 15.337C90.9062 15.1303 91.2705 15.027 91.6838 15.027C92.0035 15.027 92.257 15.0803 92.4445 15.1868C92.6341 15.2912 92.779 15.4105 92.8792 15.5447C92.9814 15.6768 93.0603 15.7855 93.1157 15.8707H93.1924V15.0909H93.9211V20.1406C93.9211 20.5625 93.8252 20.9055 93.6334 21.1697C93.4438 21.4361 93.1881 21.631 92.8664 21.7546C92.5468 21.8803 92.191 21.9432 91.7989 21.9432ZM91.7733 19.2457C92.0759 19.2457 92.3316 19.1765 92.5404 19.038C92.7492 18.8995 92.9079 18.7003 93.0166 18.4403C93.1253 18.1804 93.1796 17.8693 93.1796 17.5071C93.1796 17.1534 93.1263 16.8413 93.0198 16.5707C92.9133 16.3001 92.7556 16.0881 92.5468 15.9347C92.338 15.7812 92.0802 15.7045 91.7733 15.7045C91.4537 15.7045 91.1874 15.7855 90.9743 15.9474C90.7634 16.1094 90.6047 16.3267 90.4981 16.5994C90.3937 16.8722 90.3415 17.1747 90.3415 17.5071C90.3415 17.848 90.3948 18.1495 90.5013 18.4116C90.61 18.6715 90.7698 18.8761 90.9807 19.0252C91.1938 19.1722 91.458 19.2457 91.7733 19.2457Z",fill:"black",fillOpacity:"0.8"}),Q.createElement("path",{d:"M75.8419 93V88.6364H77.4399C77.7496 88.6364 78.006 88.6875 78.2091 88.7898C78.4122 88.8906 78.5642 89.0277 78.6651 89.201C78.7659 89.3729 78.8163 89.5668 78.8163 89.7827C78.8163 89.9645 78.783 90.1179 78.7162 90.2429C78.6494 90.3665 78.5599 90.4659 78.4477 90.5412C78.3369 90.6151 78.2148 90.669 78.0813 90.7031V90.7457C78.2261 90.7528 78.3675 90.7997 78.5053 90.8864C78.6445 90.9716 78.7595 91.093 78.8504 91.2507C78.9413 91.4084 78.9868 91.6001 78.9868 91.826C78.9868 92.049 78.9342 92.2493 78.8291 92.4268C78.7254 92.603 78.5649 92.7429 78.3476 92.8466C78.1303 92.9489 77.8526 93 77.5145 93H75.8419ZM76.5003 92.4354H77.4506C77.7659 92.4354 77.9918 92.3743 78.1281 92.2521C78.2645 92.13 78.3327 91.9773 78.3327 91.794C78.3327 91.6562 78.2979 91.5298 78.2283 91.4148C78.1587 91.2997 78.0592 91.2081 77.93 91.1399C77.8021 91.0717 77.6501 91.0376 77.474 91.0376H76.5003V92.4354ZM76.5003 90.5241H77.3824C77.5301 90.5241 77.6629 90.4957 77.7808 90.4389C77.9001 90.3821 77.9946 90.3026 78.0642 90.2003C78.1352 90.0966 78.1707 89.9744 78.1707 89.8338C78.1707 89.6534 78.1075 89.5021 77.9811 89.38C77.8547 89.2578 77.6608 89.1967 77.3994 89.1967H76.5003V90.5241ZM81.8197 91.6428V89.7273H82.4589V93H81.8325V92.4332H81.7984C81.7231 92.608 81.6024 92.7536 81.4362 92.87C81.2714 92.9851 81.0662 93.0426 80.8204 93.0426C80.6102 93.0426 80.4241 92.9964 80.2622 92.9041C80.1017 92.8104 79.9752 92.6719 79.8829 92.4886C79.792 92.3054 79.7465 92.0788 79.7465 91.8089V89.7273H80.3836V91.7322C80.3836 91.9553 80.4454 92.1328 80.569 92.2649C80.6926 92.397 80.8531 92.4631 81.0505 92.4631C81.1698 92.4631 81.2885 92.4332 81.4063 92.3736C81.5257 92.3139 81.6244 92.2237 81.7025 92.103C81.7821 91.9822 81.8211 91.8288 81.8197 91.6428ZM84.8726 89.7273V90.2386H83.085V89.7273H84.8726ZM83.5644 88.9432H84.2014V92.0391C84.2014 92.1626 84.2199 92.2557 84.2568 92.3182C84.2938 92.3793 84.3414 92.4212 84.3996 92.4439C84.4593 92.4652 84.5239 92.4759 84.5935 92.4759C84.6446 92.4759 84.6894 92.4723 84.7277 92.4652C84.7661 92.4581 84.7959 92.4524 84.8172 92.4482L84.9323 92.9744C84.8953 92.9886 84.8428 93.0028 84.7746 93.017C84.7064 93.0327 84.6212 93.0412 84.5189 93.0426C84.3513 93.0455 84.195 93.0156 84.0502 92.9531C83.9053 92.8906 83.7881 92.794 83.6986 92.6634C83.6091 92.5327 83.5644 92.3686 83.5644 92.1712V88.9432ZM87.135 89.7273V90.2386H85.3474V89.7273H87.135ZM85.8268 88.9432H86.4639V92.0391C86.4639 92.1626 86.4823 92.2557 86.5193 92.3182C86.5562 92.3793 86.6038 92.4212 86.662 92.4439C86.7217 92.4652 86.7863 92.4759 86.8559 92.4759C86.907 92.4759 86.9518 92.4723 86.9901 92.4652C87.0285 92.4581 87.0583 92.4524 87.0796 92.4482L87.1947 92.9744C87.1578 92.9886 87.1052 93.0028 87.037 93.017C86.9688 93.0327 86.8836 93.0412 86.7813 93.0426C86.6137 93.0455 86.4575 93.0156 86.3126 92.9531C86.1677 92.8906 86.0505 92.794 85.961 92.6634C85.8715 92.5327 85.8268 92.3686 85.8268 92.1712V88.9432ZM89.2131 93.0661C88.9063 93.0661 88.6386 92.9957 88.4099 92.8551C88.1812 92.7145 88.0036 92.5178 87.8772 92.2649C87.7508 92.0121 87.6876 91.7166 87.6876 91.3786C87.6876 91.0391 87.7508 90.7422 87.8772 90.4879C88.0036 90.2337 88.1812 90.0362 88.4099 89.8956C88.6386 89.755 88.9063 89.6847 89.2131 89.6847C89.52 89.6847 89.7877 89.755 90.0164 89.8956C90.2451 90.0362 90.4227 90.2337 90.5491 90.4879C90.6755 90.7422 90.7387 91.0391 90.7387 91.3786C90.7387 91.7166 90.6755 92.0121 90.5491 92.2649C90.4227 92.5178 90.2451 92.7145 90.0164 92.8551C89.7877 92.9957 89.52 93.0661 89.2131 93.0661ZM89.2153 92.5312C89.4141 92.5312 89.5789 92.4787 89.7096 92.3736C89.8403 92.2685 89.9369 92.1286 89.9994 91.9538C90.0633 91.7791 90.0952 91.5866 90.0952 91.3764C90.0952 91.1676 90.0633 90.9759 89.9994 90.8011C89.9369 90.625 89.8403 90.4837 89.7096 90.3771C89.5789 90.2706 89.4141 90.2173 89.2153 90.2173C89.015 90.2173 88.8488 90.2706 88.7167 90.3771C88.586 90.4837 88.4887 90.625 88.4248 90.8011C88.3623 90.9759 88.331 91.1676 88.331 91.3764C88.331 91.5866 88.3623 91.7791 88.4248 91.9538C88.4887 92.1286 88.586 92.2685 88.7167 92.3736C88.8488 92.4787 89.015 92.5312 89.2153 92.5312ZM92.1169 91.0568V93H91.4798V89.7273H92.0913V90.2599H92.1318C92.2071 90.0866 92.325 89.9474 92.4855 89.8423C92.6474 89.7372 92.8513 89.6847 93.097 89.6847C93.32 89.6847 93.5153 89.7315 93.683 89.8253C93.8506 89.9176 93.9805 90.0554 94.0729 90.2386C94.1652 90.4219 94.2114 90.6484 94.2114 90.9183V93H93.5743V90.995C93.5743 90.7578 93.5125 90.5724 93.3889 90.4389C93.2653 90.304 93.0956 90.2365 92.8797 90.2365C92.732 90.2365 92.6006 90.2685 92.4855 90.3324C92.3719 90.3963 92.2817 90.4901 92.2149 90.6136C92.1496 90.7358 92.1169 90.8835 92.1169 91.0568Z",fill:"black",fillOpacity:"0.8"}),Q.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M73 83C71.8954 83 71 83.8954 71 85V97C71 98.1046 71.8954 99 73 99H97C98.1046 99 99 98.1046 99 97V85C99 83.8954 98.1046 83 97 83H73ZM70 85C70 83.3431 71.3431 82 73 82H97C98.6569 82 100 83.3431 100 85V97C100 98.6569 98.6569 100 97 100H73C71.3431 100 70 98.6569 70 97V85Z",fill:"black",fillOpacity:"0.8"}),Q.createElement("path",{d:"M58 82H34C32.3431 82 31 83.3431 31 85V97C31 98.6569 32.3431 100 34 100H58C59.6569 100 61 98.6569 61 97V85C61 83.3431 59.6569 82 58 82Z",fill:"#56CCF2",fillOpacity:"0.8"}),Q.createElement("path",{d:"M36.7669 93V88.6364H38.3649C38.6746 88.6364 38.931 88.6875 39.1341 88.7898C39.3372 88.8906 39.4892 89.0277 39.5901 89.201C39.6909 89.3729 39.7413 89.5668 39.7413 89.7827C39.7413 89.9645 39.708 90.1179 39.6412 90.2429C39.5744 90.3665 39.4849 90.4659 39.3727 90.5412C39.2619 90.6151 39.1398 90.669 39.0063 90.7031V90.7457C39.1511 90.7528 39.2925 90.7997 39.4303 90.8864C39.5695 90.9716 39.6845 91.093 39.7754 91.2507C39.8663 91.4084 39.9118 91.6001 39.9118 91.826C39.9118 92.049 39.8592 92.2493 39.7541 92.4268C39.6504 92.603 39.4899 92.7429 39.2726 92.8466C39.0553 92.9489 38.7776 93 38.4395 93H36.7669ZM37.4253 92.4354H38.3756C38.6909 92.4354 38.9168 92.3743 39.0531 92.2521C39.1895 92.13 39.2577 91.9773 39.2577 91.794C39.2577 91.6562 39.2229 91.5298 39.1533 91.4148C39.0837 91.2997 38.9842 91.2081 38.855 91.1399C38.7271 91.0717 38.5751 91.0376 38.399 91.0376H37.4253V92.4354ZM37.4253 90.5241H38.3074C38.4551 90.5241 38.5879 90.4957 38.7058 90.4389C38.8251 90.3821 38.9196 90.3026 38.9892 90.2003C39.0602 90.0966 39.0957 89.9744 39.0957 89.8338C39.0957 89.6534 39.0325 89.5021 38.9061 89.38C38.7797 89.2578 38.5858 89.1967 38.3244 89.1967H37.4253V90.5241ZM42.7747 91.6428V89.7273H43.4139V93H42.7875V92.4332H42.7534C42.6781 92.608 42.5574 92.7536 42.3912 92.87C42.2264 92.9851 42.0212 93.0426 41.7754 93.0426C41.5652 93.0426 41.3791 92.9964 41.2172 92.9041C41.0567 92.8104 40.9302 92.6719 40.8379 92.4886C40.747 92.3054 40.7015 92.0788 40.7015 91.8089V89.7273H41.3386V91.7322C41.3386 91.9553 41.4004 92.1328 41.524 92.2649C41.6476 92.397 41.8081 92.4631 42.0055 92.4631C42.1248 92.4631 42.2435 92.4332 42.3613 92.3736C42.4807 92.3139 42.5794 92.2237 42.6575 92.103C42.7371 91.9822 42.7761 91.8288 42.7747 91.6428ZM45.8576 89.7273V90.2386H44.07V89.7273H45.8576ZM44.5494 88.9432H45.1864V92.0391C45.1864 92.1626 45.2049 92.2557 45.2418 92.3182C45.2788 92.3793 45.3264 92.4212 45.3846 92.4439C45.4443 92.4652 45.5089 92.4759 45.5785 92.4759C45.6296 92.4759 45.6744 92.4723 45.7127 92.4652C45.7511 92.4581 45.7809 92.4524 45.8022 92.4482L45.9173 92.9744C45.8803 92.9886 45.8278 93.0028 45.7596 93.017C45.6914 93.0327 45.6062 93.0412 45.5039 93.0426C45.3363 93.0455 45.18 93.0156 45.0352 92.9531C44.8903 92.8906 44.7731 92.794 44.6836 92.6634C44.5941 92.5327 44.5494 92.3686 44.5494 92.1712V88.9432ZM48.15 89.7273V90.2386H46.3624V89.7273H48.15ZM46.8418 88.9432H47.4789V92.0391C47.4789 92.1626 47.4973 92.2557 47.5343 92.3182C47.5712 92.3793 47.6188 92.4212 47.677 92.4439C47.7367 92.4652 47.8013 92.4759 47.8709 92.4759C47.922 92.4759 47.9668 92.4723 48.0051 92.4652C48.0435 92.4581 48.0733 92.4524 48.0946 92.4482L48.2097 92.9744C48.1728 92.9886 48.1202 93.0028 48.052 93.017C47.9838 93.0327 47.8986 93.0412 47.7963 93.0426C47.6287 93.0455 47.4725 93.0156 47.3276 92.9531C47.1827 92.8906 47.0655 92.794 46.976 92.6634C46.8865 92.5327 46.8418 92.3686 46.8418 92.1712V88.9432ZM50.2581 93.0661C49.9513 93.0661 49.6836 92.9957 49.4549 92.8551C49.2262 92.7145 49.0486 92.5178 48.9222 92.2649C48.7958 92.0121 48.7326 91.7166 48.7326 91.3786C48.7326 91.0391 48.7958 90.7422 48.9222 90.4879C49.0486 90.2337 49.2262 90.0362 49.4549 89.8956C49.6836 89.755 49.9513 89.6847 50.2581 89.6847C50.565 89.6847 50.8327 89.755 51.0614 89.8956C51.2901 90.0362 51.4677 90.2337 51.5941 90.4879C51.7205 90.7422 51.7837 91.0391 51.7837 91.3786C51.7837 91.7166 51.7205 92.0121 51.5941 92.2649C51.4677 92.5178 51.2901 92.7145 51.0614 92.8551C50.8327 92.9957 50.565 93.0661 50.2581 93.0661ZM50.2603 92.5312C50.4591 92.5312 50.6239 92.4787 50.7546 92.3736C50.8853 92.2685 50.9819 92.1286 51.0444 91.9538C51.1083 91.7791 51.1402 91.5866 51.1402 91.3764C51.1402 91.1676 51.1083 90.9759 51.0444 90.8011C50.9819 90.625 50.8853 90.4837 50.7546 90.3771C50.6239 90.2706 50.4591 90.2173 50.2603 90.2173C50.06 90.2173 49.8938 90.2706 49.7617 90.3771C49.631 90.4837 49.5337 90.625 49.4698 90.8011C49.4073 90.9759 49.376 91.1676 49.376 91.3764C49.376 91.5866 49.4073 91.7791 49.4698 91.9538C49.5337 92.1286 49.631 92.2685 49.7617 92.3736C49.8938 92.4787 50.06 92.5312 50.2603 92.5312ZM53.1919 91.0568V93H52.5548V89.7273H53.1663V90.2599H53.2068C53.2821 90.0866 53.4 89.9474 53.5605 89.8423C53.7224 89.7372 53.9263 89.6847 54.172 89.6847C54.395 89.6847 54.5903 89.7315 54.758 89.8253C54.9256 89.9176 55.0555 90.0554 55.1479 90.2386C55.2402 90.4219 55.2864 90.6484 55.2864 90.9183V93H54.6493V90.995C54.6493 90.7578 54.5875 90.5724 54.4639 90.4389C54.3403 90.304 54.1706 90.2365 53.9547 90.2365C53.807 90.2365 53.6756 90.2685 53.5605 90.3324C53.4469 90.3963 53.3567 90.4901 53.2899 90.6136C53.2246 90.7358 53.1919 90.8835 53.1919 91.0568Z",fill:"white"}),Q.createElement("mask",{id:"mask0_1_30",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:"20",y:"121",width:"107",height:"22"},Q.createElement("path",{d:"M126.001 121H20.5566V143H126.001V121Z",fill:"white"})),Q.createElement("g",{mask:"url(#mask0_1_30)",className:"oss_sales_upsell_modal--graphicLine--6Z-mU"},Q.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M73 143V121H74V143H73Z"}),Q.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M40.5566 121.477L20.5566 143L19.8759 142.267L39.8759 120.745L40.5566 121.477Z"}),Q.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M126 142.523L106 121L106.681 120.267L126.681 141.79L126 142.523Z"})))}let Uv=[{key:1,elem:Q.createElement(eO.Tx,{id:"oss_sales_upsell_overlay.feature1"})},{key:2,elem:Q.createElement(eO.Tx,{id:"oss_sales_upsell_overlay.feature2"})},{key:3,elem:Q.createElement(eO.Tx,{id:"oss_sales_upsell_overlay.feature3"})}],Uy=(0,aE.Ju)(function({onDismiss:e}){let t=(0,ef.md)(t_.yV),n=(0,$.wA)();return Q.createElement(tS.Rw,{isLoading:!(null==t?void 0:t.teamId),confirmationTitle:Q.createElement(eO.Tx,{id:"oss_sales_upsell_overlay.title"}),titleClass:"oss_sales_upsell_modal--title--wpaS5",confirmText:Q.createElement(eO.Tx,{id:"oss_sales_upsell_overlay.primary_cta"}),cancelText:Q.createElement(eO.Tx,{id:"oss_sales_upsell_overlay.secondary_cta"}),onConfirm:()=>{if(!(null==t?void 0:t.teamId))return;let e=my.b.LIBRARY_DUPLICATE_OSS_SALES_UPSELL;n((0,n9.to)({type:mv.V,data:{upsellSource:e,teamId:t.teamId,isProCurrent:!0,overrideHighlightedPlan:"none",openCheckoutInNewTab:!0}}))},onCancel:()=>{n((0,n9.to)({type:Ug.lk,data:{source:Ug.B7.LIBRARY_DUPLICATE_OSS_SALES_UPSELL,overridePlaceholderText:(0,eO.t)("oss_sales_upsell_overlay.contact_sales_form.text_placeholder")}}))},onCloseButtonClick:e,className:"oss_sales_upsell_modal--modal--fdI6U",overrideOnHide:e,hideOnConfirm:!1,hideOnCancel:!1,autoFocusCta:!1},Q.createElement("div",{className:tw.cx.lh24.font13.pt24.pr0.pb32.pl0.$},Q.createElement(nk.Y,{spacing:"40px"},Q.createElement(nk.Y,{direction:"vertical",spacing:"12px"},Q.createElement("p",null,Q.createElement(eO.Tx,{id:"oss_sales_upsell_overlay.body1"})),Q.createElement(nk.Y,{direction:"vertical",spacing:8},Q.createElement("p",{className:tw.cx.fontSemiBold.$},Q.createElement(eO.Tx,{id:"oss_sales_upsell_overlay.body2"})),Q.createElement(nk.Y,{direction:"vertical",spacing:8},Uv.map(e=>Q.createElement(nk.Y,{key:e.key,spacing:8,horizontalAlignItems:"start"},Q.createElement("p",null,"\u2713"),Q.createElement("p",null,e.elem))))),Q.createElement("p",{className:tw.cx.pt4.$},Q.createElement(eO.Tx,{id:"oss_sales_upsell_overlay.body3"}))),Q.createElement("div",{className:tw.cx.mr16.$},Q.createElement(UE,null)))),Q.createElement("div",{className:tw.cx.bt1.colorBorder.bSolid.$}))},"OssSalesUpsellModal");function Ub(){let e=(0,ef.md)(t_.As),t=(0,ef.md)(t_.ze);return e&&t?Q.createElement(UC,{teamId:e,fileKey:t}):null}function UC({teamId:e,fileKey:t}){let n=(0,$.wA)(),a=(0,ef.md)(Mv.M$),r=(0,eh.Rs)(tf.TNJ,{id:e}),l=(0,tp.e)({overlay:tv.jRE,priority:th.N.DEFAULT_MODAL},[a,r]),i=(0,Uf.b6)({undefinedIfKnownDomain:!0});return(0,ts.h)(()=>{l.show({canShow:(e,n)=>{var a;return!!(i&&(0,Uh.nN)(t))&&!e&&null!=(a=n.team)&&!!a.hasPermission}})}),(0,Q.useEffect)(()=>{l.isShowing&&(0,Uh.wj)()},[i,l.isShowing]),Q.createElement(tg.h,{isShowing:l.isShowing,modalType:tE.q3.FEATURE_UPDATE,element:function(e){return(0,ts.h)(()=>{n((0,n9.to)({type:Uy,data:{onDismiss:e.dismissModal}}))}),Q.createElement("div",null)},trackingContextName:"oss_sales_upsell_overlay",onClickPrimaryCta:ey.lQ,onClose:l.complete,onManualDismiss:l.complete,testId:"oss_sales_upsell_overlay_test_id"})}var Uw=n(865017);let UT="seen_outline_mode_shortcut_pref_overlay",Ux=(0,tc.r1)(UT),UN=new Date("2024-03-15T18:00:00.000Z").getTime();function Uk(e){let t=(0,e_.md)(Mv.mp),n=(0,e_.md)(Ux),a=(0,eH.S0)(),{show:r,isShowing:l,complete:i,uniqueId:o}=(0,tp.e)({overlay:tv.x9K,priority:th.N.DEFAULT_MODAL},[n,t]),s=TU.y.isApple(),c=TU.y.isChromeOS(),d=Q.useMemo(()=>Q.createElement(Uw.S,{shortcut:s?"\u21E7\u2318O":"Ctrl+Shift+O"}),[s]),u=Q.useMemo(()=>Q.createElement(Uw.S,{shortcut:s?"\u2325\u2318O":"Ctrl+Alt+O"}),[s]),m=Q.useMemo(()=>Q.createElement(Uw.S,{shortcut:c?"Alt+Shift+3":s?"\u23253":"Alt+3"}),[s,c]),[p,_]=Q.useState(!1);return Q.useEffect(()=>{l&&a&&i()},[l,a,i]),(0,Eo.E)(o,["show_outline_shortcuts_overlay"],e=>{var t;l||_((null==(t=e.properties)?void 0:t.entrypoint)==="alt+meta+O"),r({canShow:(e,t)=>!!(0,eo.kc)().ce_outlines_shortcut_onboarding&&!a&&!e&&null!=t&&t.getTime()<=UN})}),Q.createElement(de.X,{width:350,isShowing:l,title:Q.createElement(eO.Tx,{id:"fullscreen.outline_shortcuts_onboarding.title"}),description:Q.createElement("div",null,p?Q.createElement(eO.Tx,{id:"fullscreen.outline_shortcuts_onboarding.changed_shortcuts"}):Q.createElement(eO.Tx,{id:"fullscreen.outline_shortcuts_onboarding.changed_outline_shortcuts"}),Q.createElement("ul",{className:"outline_mode_shortcut_pref_overlay--shortcutList--DJ5Vg"},Q.createElement("li",null,Q.createElement(eO.Tx,{id:"fullscreen.outline_shortcuts_onboarding.show_outlines_updated",showOutlines:Q.createElement("strong",null,Q.createElement(eO.Tx,{id:"fullscreen.outline_shortcuts_onboarding.show_outlines"})),showOutlinesKeyCommand:d})),Q.createElement("li",null,Q.createElement(eO.Tx,{id:"fullscreen.outline_shortcuts_onboarding.outline_stroke_updated",outlineStroke:Q.createElement("strong",null,Q.createElement(eO.Tx,{id:"fullscreen.outline_shortcuts_onboarding.outline_stroke"})),outlineStrokeKeyCommand:u})),p?Q.createElement("li",null,Q.createElement(eO.Tx,{id:"fullscreen.outline_shortcuts_onboarding.team_library_updated",teamLibrary:Q.createElement("strong",null,Q.createElement(eO.Tx,{id:"fullscreen.outline_shortcuts_onboarding.team_library"})),teamLibraryKeyCommand:m})):null),Q.createElement(eO.Tx,{id:"fullscreen.outline_shortcuts_onboarding.opt_out_options"})),primaryCta:{label:Q.createElement(eO.Tx,{id:"fullscreen.outline_shortcuts_onboarding.got_it"}),type:"button",onClick:i,ctaTrackingDescriptor:c5.c.GOT_IT},secondaryCta:{label:Q.createElement(eO.Tx,{id:"fullscreen.outline_shortcuts_onboarding.keep_old_shortcuts"}),type:"button",onClick:()=>{lT.Y5.triggerAction("toggle-use-old-outline-shortcuts"),i()},ctaTrackingDescriptor:c5.c.KEEP_OLD_SHORTCUTS,tooltipProperties:{"data-tooltip-type":nO.Ib.SPECIAL,"data-tooltip":nO.MW.OLD_OUTLINE_SHORTCUTS,"data-tooltip-show-above":!0,"data-tooltip-show-immediately":!0,"data-tooltip-hide-immediately":!0}},trackingContextName:"Outline Shortcuts Preference Onboarding Modal",userFlagOnShow:UT,position:dt.Q.BOTTOM_RIGHT,onClose:i})}var US=n(381109);function UI(){let{show:e,isShowing:t,complete:n,uniqueId:a}=(0,tp.e)({overlay:tv.Q8d,priority:th.N.DEFAULT_MODAL}),r=!!(0,fQ.f)("seen_pinned_comments_education_callout"),l=!!(0,fQ.f)("has_toggled_comment_pin"),i=(0,t_.q5)(),o=(0,at.TA)(),s=Q.useContext(US.kw),c=(0,pn.Z)();return((0,Eo.E)(a,"Context Viewed",t=>{var n;(null==(n=t.properties)?void 0:n.name)==="Editor > Pin comment icon"&&e({canShow:()=>!r&&(null==i?void 0:i.creatorId)===o&&!l,onShow:()=>{let{offsetX:e,offsetY:t,zoomScale:n}=s.getViewportInfo();c({centerX:e,centerY:t-72/n,scale:n})}})}),t)?Q.createElement("div",{onClick:()=>{n()},role:"button",tabIndex:0},Q.createElement(c9.rq,{userFlagOnShow:"seen_pinned_comments_education_callout",description:Q.createElement("div",{className:tw.cx.alignCenter.$},Q.createElement(eO.Tx,{id:"comments.pinning.pinned_comments_always_show_up_first_great_for_a_project_intro_or_important_info"})),onClose:()=>n(),trackingContextName:"Pinned Comments Creator Education Callout",targetKey:"pin-comment-icon",isShowing:t,arrowPosition:DK.F_.BOTTOM,width:320,disableHighlight:!0,emphasized:!0,hideCloseButton:!0,pointerOffsetOverride:196,zIndex:dt.R.UNSET,onTargetLost:()=>n()})):null}function UA(){let{show:e,isShowing:t,complete:n,uniqueId:a}=(0,tp.e)({overlay:tv.S$N,priority:th.N.DEFAULT_MODAL}),r=(0,$.wA)(),l=!!(0,fQ.f)("seen_pinned_comments_navigation_callout"),i=(0,t_.q5)(),o=(0,at.TA)(),s=t&&!l;Q.useEffect(()=>{s&&r(tB.b({seen_pinned_comments_navigation_callout:!0}))},[r,s]);let c=Q.useContext(US.kw),d=(0,pn.Z)();return((0,Eo.E)(a,"Context Viewed",a=>{var r,s;(null==(r=a.properties)?void 0:r.name)==="Editor > Pin comment icon"&&(t&&l&&(null==(s=a.properties)?void 0:s.isPinned)&&n(),e({canShow:()=>{var e;return!l&&(null==i?void 0:i.creatorId)!==o&&!!(null==(e=a.properties)?void 0:e.isPinned)},onShow:()=>{let{offsetX:e,offsetY:t,zoomScale:n}=c.getViewportInfo();d({centerX:e,centerY:t-72/n,scale:n})}}))}),t)?Q.createElement("div",{onClick:()=>{n()},role:"button",tabIndex:0},Q.createElement(c9.rq,{userFlagOnShow:"seen_pinned_comments_education_callout",description:Q.createElement("div",{className:tw.cx.justifyCenter.alignCenter.$},Q.createElement(eO.Tx,{id:"comments.pinning.feedback_giver_callout"})),onClose:()=>n(),trackingContextName:"Pinned Comments Feedback Giver Education Callout",targetKey:"thread-header-left-section",isShowing:t,arrowPosition:DK.F_.BOTTOM,width:320,disableHighlight:!0,emphasized:!0,hideCloseButton:!0,pointToLeftEdge:!0,pointerOffsetOverride:20,zIndex:dt.R.UNSET,onTargetLost:()=>n()})):null}var UP=n(690111),UO=n(507727),UL=n(734303),UM=n(664269),UD=n(564201),UR=n(356151),UF=n(900295),UB=n(21882);let UU=UR.qv.AUDIO,UH=UR.qQ.getOnboardingStepTriggerEventId(UU),UV=UR.qQ.getOnboardingStepUserFlag(UU),UG=(0,tc.r1)(UV);function UK(e){let t=(0,ef.md)(UG),{show:n,isShowing:a,complete:r,uniqueId:l}=(0,tp.e)({overlay:tv.U3h,priority:th.N.OVERRIDING_MODAL,experiment:e.experimentCheck?{check:e.experimentCheck,predicate:e=>e,postCheck:()=>!0}:void 0},[t]),i=(0,$.wA)(),o=(0,$.d4)(e=>{var t;return(null==(t=e.openFile)?void 0:t.key)&&!!e.voice.activeCall[e.openFile.key]}),s=(0,$.d4)(e=>{let{allUsers:t,deviceNameFilter:n}=e.multiplayer;return new Set(t.filter(e=>e.deviceName===n).map(e=>e.userID)).size}),c=(0,Q.useCallback)(()=>i(tB.b({[UV]:!0})),[i]);return(0,Eo.E)(l,[UF.M8],(0,Q.useCallback)(()=>{s<2||o||n({canShow:e=>!e,onShow:c})},[n,c,o,s])),(0,Eo.E)(l,[UH],(0,Q.useCallback)(()=>{n({onBlocked:e=>UR.qQ.trackActivelyTriggeredOnboardingStepBlocked(e,UU)})},[n])),Q.createElement(g4.M,{isShowing:a},Q.createElement(t6.fu,{name:UM.S.getTooltipTrackingContext(UU),properties:UM.S.getTrackingProperties()},Q.createElement(UB.Mi,{dismissModal:r})))}let UW=UR.qv.COMPONENT_PUBLISHING,Uz=UR.qQ.getOnboardingStepTriggerEventId(UW),Uj=UR.qQ.getOnboardingStepUserFlag(UW),UY=(0,tc.r1)(Uj);function UZ(e){let t=(0,ef.md)(UY),{show:n,isShowing:a,complete:r,uniqueId:l}=(0,tp.e)({overlay:tv.K_4,priority:th.N.OVERRIDING_MODAL,experiment:e.experimentCheck?{check:e.experimentCheck,predicate:e=>e,postCheck:()=>!0}:void 0},[t]),i=(0,$.wA)(),o=(0,Q.useCallback)(()=>i(tB.b({[Uj]:!0})),[i]);return(0,Eo.E)(l,["action_create_symbol"],(0,Q.useCallback)(()=>{n({onShow:o,canShow:e=>!e})},[n,o])),(0,Eo.E)(l,[Uz],(0,Q.useCallback)(()=>{n({onBlocked:e=>UR.qQ.trackActivelyTriggeredOnboardingStepBlocked(e,UW)})},[n])),Q.createElement(g4.M,{isShowing:a},Q.createElement(t6.fu,{name:UM.S.getTooltipTrackingContext(UW),properties:UM.S.getTrackingProperties()},Q.createElement(UB.Ec,{dismissModal:r})))}let UX=UR.qv.OPEN_SESSIONS,Uq=UR.qQ.getOnboardingStepTriggerEventId(UX),UJ=UR.qQ.getOnboardingStepUserFlag(UX),UQ=(0,tc.r1)(UJ);function U$(e){let t=(0,ef.md)(UQ),{show:n,isShowing:a,complete:r,uniqueId:l}=(0,tp.e)({overlay:tv.bJw,priority:th.N.OVERRIDING_MODAL,experiment:e.experimentCheck?{check:e.experimentCheck,predicate:e=>e,postCheck:()=>!0}:void 0},[t]),i=(0,$.wA)(),o=(0,$.d4)(e=>(0,cp.zg)(e.selectedView)),s=(0,$.d4)(e=>{var t;return(null==(t=e.modalShown)?void 0:t.type)===Dn.g_.type}),c=(0,ue.Z)(s),d=(0,Q.useCallback)(()=>i(tB.b({[UJ]:!0})),[i]);return(0,Eo.E)(l,["multiplayer_toolbar_share_button"],(0,Q.useCallback)(()=>{o||n({onShow:d,canShow:e=>!e})},[n,d,o])),(0,Eo.E)(l,[Uq],(0,Q.useCallback)(()=>{n({onShow:()=>i((0,n9.to)({type:Dn.g_,data:{source:De.nk.expProTrialsV3CardStackWidget}})),onBlocked:e=>UR.qQ.trackActivelyTriggeredOnboardingStepBlocked(e,UX)})},[n,i])),Q.useEffect(()=>{!s&&c&&r()},[r,s,c]),Q.createElement(g4.M,{isShowing:a},Q.createElement(t6.fu,{name:UM.S.getTooltipTrackingContext(UX),properties:UM.S.getTrackingProperties()},Q.createElement(UB.Nm,{dismissModal:r})))}let U0=UR.qv.PASSWORD_PROTECTION,U1=UR.qQ.getOnboardingStepTriggerEventId(U0),U2=UR.qQ.getOnboardingStepUserFlag(U0),U5=UR.qQ.getOnboardingStepUserFlag(UR.qv.OPEN_SESSIONS),U4=(0,tc.r1)(U2),U3=(0,tc.r1)(U5);function U6(e){let t=(0,ef.md)(U4),n=(0,ef.md)(U3),{show:a,isShowing:r,complete:l,uniqueId:i}=(0,tp.e)({overlay:tv.GUu,priority:th.N.OVERRIDING_MODAL,experiment:e.experimentCheck?{check:e.experimentCheck,predicate:e=>e,postCheck:()=>!0}:void 0},[t,n]),o=(0,$.wA)(),s=(0,$.d4)(e=>"whiteboard"===(0,mD.AU)(e.selectedView)),c=(0,$.d4)(e=>(0,cp.zg)(e.selectedView)),d=(0,$.d4)(e=>{var t;return(null==(t=e.modalShown)?void 0:t.type)===Dn.g_.type}),u=(0,ue.Z)(d),m=(0,Q.useCallback)(()=>o(tB.b({[U2]:!0})),[o]);return(0,Eo.E)(i,["multiplayer_toolbar_share_button"],(0,Q.useCallback)(()=>{c||a({onShow:m,canShow:(e,t)=>!e&&(!s||!!t)})},[a,m,s,c])),(0,Eo.E)(i,[U1],(0,Q.useCallback)(()=>{a({onShow:()=>o((0,n9.to)({type:Dn.g_,data:{source:De.nk.expProTrialsV3CardStackWidget}})),onBlocked:e=>UR.qQ.trackActivelyTriggeredOnboardingStepBlocked(e,U0)})},[a,o])),Q.useEffect(()=>{!d&&u&&l()},[l,d,u]),Q.createElement(g4.M,{isShowing:r},Q.createElement(t6.fu,{name:UM.S.getTooltipTrackingContext(U0),properties:UM.S.getTrackingProperties()},Q.createElement(UB._G,{dismissModal:l})))}let U7=UR.qv.UNLIMITED_PAGES,U8=UR.qQ.getOnboardingStepTriggerEventId(U7),U9=UR.qQ.getOnboardingStepUserFlag(U7),He=(0,tc.r1)(U9);function Ht(e){let t=(0,ef.md)(He),{show:n,isShowing:a,complete:r,uniqueId:l}=(0,tp.e)({overlay:tv.fR0,priority:th.N.OVERRIDING_MODAL,experiment:e.experimentCheck?{check:e.experimentCheck,predicate:e=>e,postCheck:()=>!0}:void 0},[t]),i=(0,$.wA)(),o=(0,Q.useCallback)(()=>i(tB.b({[U9]:!0})),[i]);return(0,ts.h)(()=>{n({onShow:o,canShow:e=>!e})}),(0,Eo.E)(l,[U8],(0,Q.useCallback)(()=>{n({onBlocked:e=>UR.qQ.trackActivelyTriggeredOnboardingStepBlocked(e,U7)})},[n])),Q.createElement(g4.M,{isShowing:a},Q.createElement(t6.fu,{name:UM.S.getTooltipTrackingContext(U7),properties:UM.S.getTrackingProperties()},Q.createElement(UB.BI,{dismissModal:r})))}var Hn=n(317589);let Ha=UR.qv.VIDEO,Hr=UR.qQ.getOnboardingStepTriggerEventId(Ha),Hl=UR.qQ.getOnboardingStepUserFlag(Ha),Hi=(0,tc.r1)(Hl);function Ho(e){let t=(0,ef.md)(Hi),{show:n,isShowing:a,complete:r,uniqueId:l}=(0,tp.e)({overlay:tv.juT,priority:th.N.OVERRIDING_MODAL,experiment:e.experimentCheck?{check:e.experimentCheck,predicate:e=>e,postCheck:()=>!0}:void 0},[t]),i=(0,$.wA)(),o=(0,$.d4)(e=>{var t;return(null==(t=e.dropdownShown)?void 0:t.type)==="flyout-dropdown-shape-flyout"}),s=(0,ue.Z)(o),c=(0,Q.useCallback)(()=>i(tB.b({[Hl]:!0})),[i]);return(0,Q.useEffect)(()=>{o&&n({onShow:c,canShow:e=>!e})},[n,c,o]),(0,Eo.E)(l,[Hr],(0,Q.useCallback)(()=>{let e=(0,Hn.xT)("shape-flyout");e&&n({onShow:()=>i(nP.j7({type:"flyout-dropdown-shape-flyout",data:{items:tz.yY.children,targetRect:e.getBoundingClientRect()}})),onBlocked:e=>UR.qQ.trackActivelyTriggeredOnboardingStepBlocked(e,Ha)})},[n,i])),Q.useEffect(()=>{s&&!o&&a&&r()},[s,o,r,a]),Q.createElement(g4.M,{isShowing:a},Q.createElement(t6.fu,{name:UM.S.getTooltipTrackingContext(Ha),properties:UM.S.getTrackingProperties()},Q.createElement(UB.Lz,{dismissModal:r})))}let Hs="seen_pro_onboarding_variables_overlay",Hc=(0,tc.r1)(Hs);function Hd(){let e=(0,ef.md)(Hc),t=(0,ME.kO)(),{show:n,isShowing:a,complete:r}=(0,tp.e)({overlay:tv.wwW,priority:th.N.DEFAULT_MODAL,experiment:{check:t,predicate:e=>e,postCheck:e=>!e}},[e]);return(0,ts.h)(()=>{n()}),Q.createElement(g4.M,{isShowing:a,userFlagOnShow:Hs},Q.createElement(t6.fu,{name:UM.S.getTooltipTrackingContext("Variables"),properties:UM.S.getTrackingProperties()},Q.createElement(UB.rQ,{dismissModal:r})))}let Hu="seen_pro_onboarding_voting_overlay",Hm=(0,tc.r1)(Hu);function Hp(){let e=(0,ef.md)(Hm),t=(0,ME.kO)(),{show:n,isShowing:a,complete:r,uniqueId:l}=(0,tp.e)({overlay:tv.oyU,priority:th.N.DEFAULT_MODAL,experiment:{check:t,predicate:e=>e,postCheck:e=>!e}},[e]),i=(0,$.d4)(e=>!!e.modalShown),o=(0,$.d4)(e=>{let{allUsers:t,deviceNameFilter:n}=e.multiplayer;return new Set(t.filter(e=>e.deviceName===n).map(e=>e.userID)).size});return(0,Eo.E)(l,[UF.M8],(0,Q.useCallback)(()=>{i||o<2||n()},[n,i,o])),Q.createElement(g4.M,{isShowing:a,userFlagOnShow:Hu},Q.createElement(t6.fu,{name:UM.S.getTooltipTrackingContext("Voting"),properties:UM.S.getTrackingProperties()},Q.createElement(UB.lj,{dismissModal:r})))}function H_(e){let{teamId:t,isDesignEditor:n,isFigJamEditor:a}=e,r=function(){let e=(0,ef.md)(UO.P),t=(0,sZ.ks)(),n=(0,ae.p8)("showUi"),a=(0,ae.aV)(),r=(0,$.d4)(e=>e.openFile),l=(0,$.d4)(e=>e.selectedView),i=(0,$.d4)(e=>e.userFlags),o=(0,$.d4)(e=>e.notifications.length>0);return!!r&&!!r.editorType&&!!r.canEdit&&UM.S.canSeeOnboardingInFile({editorType:r.editorType,selectedView:l,showStarterKit:e!==UL.iH.FALSE,userFlags:i,hasNotifications:o,isDevHandoffView:t,isAppUiShown:n,isLoading:a})}(),l=(0,t_.q5)(),i=(0,$.d4)(e=>e.teams[t])||null,o=(0,y1.yy)()||null,s=(null==l?void 0:l.editorType)||null,c=(0,$.d4)(e=>(0,cQ.canEditTeam)(t,e)),d=(0,wQ.Lk)(),u=(0,UD.M_)({team:i,org:o,editorType:s}),m=(0,ME.kO)();return r&&i&&i.pro_team&&c?Q.createElement("div",{"data-testid":"proOnboardingOverlayWrapper"},Q.createElement(U6,{experimentCheck:m}),d&&Q.createElement(UK,{experimentCheck:m}),n&&Q.createElement(UZ,{experimentCheck:m}),n&&Q.createElement(Ht,{experimentCheck:m}),n&&Q.createElement(Ho,{experimentCheck:m}),a&&u&&Q.createElement(U$,{experimentCheck:m}),a&&Q.createElement(Hp,null),n&&Q.createElement(Hd,null)):null}var Hf=n(615822);function Hh(e){let{teamId:t,isDesignEditor:n,isFigJamEditor:a}=e,r=(0,Hf.i)(t),l=(0,t_.q5)(),i=(0,$.d4)(e=>e.teams[t])||null,o=(0,y1.yy)()||null,s=(null==l?void 0:l.editorType)||null,c=(0,wQ.Lk)(),d=(0,UD.M_)({team:i,org:o,editorType:s});return r?Q.createElement("div",{"data-testid":"proTrialsV3EditorOverlayWrapper"},Q.createElement(U6,null),c&&Q.createElement(UK,null),n&&Q.createElement(UZ,null),n&&Q.createElement(Ht,null),n&&Q.createElement(Ho,null),a&&d&&Q.createElement(U$,null)):null}var Hg=n(278922),HE=n(283393),Hv=n(24319),Hy=n(983238);let Hb="seen_figjam_section_preset_picker_callout",HC=(0,tc.Fu)(Hb),Hw=e=>(0,$.d4)(t=>{if(!e)return!1;let n=Object.keys(t.mirror.sceneGraphSelection);return 1===n.length&&n[0]===e});function HT({sectionNodeId:e,isShowing:t,complete:n}){let a=(0,ez._X)({subscribeToUpdates_expensive:!0}),r=tN.qo.instance.get(e);if(!r)return null;let l=r.sectionPresetPickerCalloutPosition;if(isNaN(l.x)||isNaN(l.y))return null;let i=(0,ez.Z0)(a,l,!0),o=parseFloat(Hy._1),s={top:i.y+a.y+o+2,left:i.x+a.x-150,pointerOffset:150-o,pointerPosition:DK.F_.TOP};return Q.createElement(c9.rq,{isShowing:t,userFlagOnShow:Hb,fixedPosition:!0,location:s,onClose:n,clickOutsideToHide:!0,trackingContextName:"section_preset_picker_callout",title:Q.createElement(eO.Tx,{id:"whiteboard.section_presets_onboarding.picker_callout.title"}),description:Q.createElement(eO.Tx,{id:"whiteboard.section_presets_onboarding.picker_callout.description"}),primaryCta:{label:Q.createElement(eO.Tx,{id:"rcs.got_it"}),type:"button",onClick:n,ctaTrackingDescriptor:c5.c.GOT_IT},width:300})}function Hx(){let e=(0,y4.q)(),t=(0,ef.md)(HE.w),n=(0,ef.md)(Hv.m5),a=(0,ef.md)(HC),r=(0,Q.useRef)({numShown:0,hasLoggedToSentry:!1}),[l,i]=(0,Q.useState)(null),o=Hw(l),{show:s,isShowing:c,complete:d}=(0,tp.e)({overlay:tv.Byv,priority:th.N.DEFAULT_MODAL},[n,a]);return((0,Q.useEffect)(()=>{t&&l&&o&&e&&s({canShow:(e,t)=>!!e&&!t})},[s,e,t,l,o]),(0,Q.useEffect)(()=>{if("loaded"===a.status&&!a.data&&"loaded"===n.status&&n.data)return(0,Hg.H)(function(e){i(e)})},[a,n]),(0,Q.useEffect)(()=>{c&&r.current.numShown++,r.current.numShown>1&&!r.current.hasLoggedToSentry&&(r.current.hasLoggedToSentry=!0,(0,ar.x1)("SectionPresetPickerCallout","Callout shown more than once, this should not happen. Please investigate.",void 0,{reportAsSentryError:!0}))},[c]),c&&l)?Q.createElement(HT,{sectionNodeId:l,isShowing:c,complete:d}):null}var HN=n(453071),Hk=n(123660),HS=((I=HS||{}).AwaitIsShowing="AwaitIsShowing",I.AwaitPastedElementsSelected="AwaitPastedElementsSelected",I.AwaitOtherElementsSelected="AwaitOtherElementsSelected",I.Completed="Completed",I),HI=((A=HI||{}).OnShow="OnShowUpsellLibariesConsecutivePaste",A[A.SelectionChanged=Uo.R]="SelectionChanged",A);let HA=(0,Ui.Op)({initial:"AwaitIsShowing",states:[{id:"AwaitIsShowing",transitions:[(0,Ui.nr)("OnShowUpsellLibariesConsecutivePaste","AwaitPastedElementsSelected")]},{id:"AwaitPastedElementsSelected",transitions:[(0,Ui.nr)(HI.SelectionChanged,"AwaitOtherElementsSelected",{condition:({event:e})=>!!e.properties.didSelectedNodeIdsChange})]},{id:"AwaitOtherElementsSelected",transitions:[(0,Ui.nr)(HI.SelectionChanged,"Completed",{condition:({event:e})=>!!e.properties.didSelectedNodeIdsChange})]},{id:"Completed",terminal:!0}]}),HP=(0,Hk.rn)("paste_deselected_machine",HA),HO=(0,tc.r1)("explicitly_dismissed_create_component_pointer"),HL=(0,Mv.tH)("first_component_created_date");function HM(){let e=(0,$.wA)(),t=(0,ef.md)(Mv.t),n=(0,ef.md)(Es.NZ),a=(0,ef.md)(Es.pQ),r=(0,cJ.jO)(),l=(0,ef.md)(HL),i=(0,ef.md)(HO),o=(0,Ut.zl)(HP),s=(0,tp.e)({overlay:tv.g4U,priority:th.N.SECONDARY_MODAL},[t,a,i]);return(0,Eo.E)(s.uniqueId,HN.zb,()=>{null===l&&s.show({canShow:(e,t,a)=>e&&(t||n)&&r&&!a,onShow:()=>{(0,uj.YQ)({id:HI.OnShow})}})}),(0,Eo.E)(s.uniqueId,"action_create_symbol",()=>{s.isShowing&&(e(tB.b({explicitly_dismissed_create_component_pointer:!0})),s.complete())}),(0,Ut.ST)(o,({to:e})=>{e===HS.Completed&&(s.complete(),o.reset())}),Q.createElement(HD,{isShowing:s.isShowing,onAbort:s.complete},Q.createElement(tg.h,{isShowing:s.isShowing,modalType:tE.q3.SELF_CONTAINED,trackingContextName:"Consecutive Paste Create Component Pointer",element:Do.gL,onClickPrimaryCta:s.complete,onClose:s.complete,onManualDismiss:s.complete,testId:"upsell_libraries_consecutive_paste_overlay"}))}function HD(e){var t;let[n,a]=Q.useState(!1),r=null==(t=(0,eo.Ay)().user_data)?void 0:t.id,{isShowing:l,onAbort:i}=e;return Q.useEffect(()=>{!n&&l&&((0,cY.Hz)(r)?a(!0):i())},[a,n,l,i,r]),n?e.children:null}var HR=n(972045);let HF="seen_chrome_version_warning",HB=["Chrome/77.0.3865.75","Chrome/77.0.3865.90","Chrome/77.0.3865.105"];function HU(e){let t=navigator&&navigator.userAgent&&navigator.userAgent.match(/CrOS/),n=Q.createElement(eO.Tx,{id:"rcs.chrome_version.please_update_your_browser_to_avoid_losing_work"}),a=Q.createElement("p",null,Q.createElement(eO.Tx,{id:"rcs.chrome_version.the_version_of_chrome_you_are_using_has_a_networking_issue_which_may_prevent_you_from_saving_your_work_please_upgrade_your_browser_to_version_77_0_3865_120_or_greater_to_avoid_any_issues",upgradeYourBrowser:Q.createElement(nc.Us,{target:"_blank",href:"https://help.figma.com/hc/articles/360040035734",trusted:!0},Q.createElement(eO.Tx,{id:"rcs.chrome_version.upgrade_your_browser"}))}));return t&&(n=Q.createElement(eO.Tx,{id:"rcs.chrome_version.please_update_chrome_os_to_avoid_losing_work"}),a=Q.createElement("p",null,Q.createElement(eO.Tx,{id:"rcs.chrome_version.the_version_of_chrome_os_you_are_using_has_a_networking_issue_which_may_prevent_you_from_saving_your_work_a_patch_has_been_released_with_version_77_0_3865_120_starting_november_4_2019_make_sure_to_allow_chrome_os_to_update_automatically",updateAutomatically:Q.createElement(nc.Us,{target:"_blank",href:"https://support.google.com/chromebook/answer/177889",trusted:!0},Q.createElement(eO.Tx,{id:"rcs.chrome_version.update_automatically"}))}))),Q.createElement(vR.mS,null,Q.createElement("h1",null,n),Q.createElement("br",null),a,Q.createElement("br",null),Q.createElement(function(){return Q.createElement("p",null,Q.createElement(eO.Tx,{id:"rcs.chrome_version.if_you_have_any_questions_please_email_us_at",figmaSupportEmail:Q.createElement(nc.Us,{href:`mailto:${(0,eo.W4)()}`,trusted:!0},(0,eo.W4)())}))},null),Q.createElement(aO.Jn,{className:HR.b,onMouseDown:e=>e.stopPropagation(),onClick:e.dismissModal,innerText:"close"}))}let HH=(0,tc.r1)(HF);function HV(){let e=(0,t_.q5)(),t=null==e?void 0:e.canEdit,n=(0,ef.md)(HH),a=(0,tp.e)({overlay:tv.ZTu,priority:th.N.URGENT_ALERT},[n]);return(0,ts.h)(()=>{let e=(0,dY.n5)()||"";t&&HB.includes(e)&&a.show({canShow:e=>!e})}),Q.createElement(tg.h,{modalType:tE.q3.DRAGGABLE,trackingContextName:"Chrome Version Warning Redalert 10-16-19",disableFooter:!0,userFlagOnShow:HF,element:HU,onClickPrimaryCta:a.complete,onClose:a.complete,onManualDismiss:a.complete,isShowing:a.isShowing,currentStepIndex:0,totalNumSteps:1})}var HG=n(251002),HK=n(971639),HW=n(29295);let Hz="seen_workflow_interop_diagram_onboarding",Hj=(0,tc.r1)(Hz),HY="FigJam Diagram Onboarding (Workflow Interop Experiment)",HZ={connectors:`${HY} - Connectors`,shapes:`${HY} - Shapes`,templates:`${HY} - Templates`};function HX(){!function(){let e=(0,ae.p8)("pagesList");(0,Q.useMemo)(()=>{let t=(0,Df.QL)("preservePageIndex");if(t&&e.length>0){(0,Df.EM)("preservePageIndex");let n=parseInt(t);if(isNaN(n)||n<0||n>=e.length)return;e.forEach((e,t)=>{t!==n&&lT.Y5.triggerAction("page-delete",{args:{nodeId:e.nodeId,skipVisualBell:!0}})})}},[e])}(),function(){let{insertTemplate:e}=(0,ND.Fz)(),t=(0,$.wA)();(0,ts.h)(()=>{let n=(0,Df.QL)("templateId");null!=n&&((0,Df.EM)("templateId"),t(wa.ts({hubFileId:n,callback:t=>{e({template:{template:t,type:NV.n.HubFile},userTriggered:!1,templateInsertionDirection:eU.hKj.ABOVE,triggeredFrom:"workflow-interop"})}})))})}();let e=(0,ef.md)(Hj),t=(0,tp.e)({overlay:tv.uPw,priority:th.N.OVERRIDING_MODAL},[e]),n=function(e){let t=(0,$.wA)();return Q.useMemo(()=>[{title:Q.createElement(eO.Tx,{id:"rcs.figjam_diagram_onboarding.connectors_title"}),trackingContextName:HZ.connectors,arrowPosition:DK.F_.BOTTOM,media:Q.createElement(MC.y,{src:"https://static.figma.com/uploads/2655e9f0e4247dff3d5a46cf59f788473bffe0c6",aspectRatio:900/508,alt:(0,eO.t)("rcs.figjam_diagram_onboarding.connectors_title")}),description:Q.createElement(eO.Tx,{id:"rcs.figjam_diagram_onboarding.connectors"}),targetKey:BE.BC,onClose:ey.lQ},{title:Q.createElement(eO.Tx,{id:"rcs.figjam_diagram_onboarding.shapes_title"}),trackingContextName:HZ.shapes,arrowPosition:DK.F_.BOTTOM,media:Q.createElement(MC.y,{aspectRatio:900/507,src:"https://static.figma.com/uploads/0c9201d8164c2390cdcf3fb8d316b6bacdddb438",alt:(0,eO.t)("rcs.figjam_diagram_onboarding.shapes_title")}),description:Q.createElement(eO.Tx,{id:"rcs.figjam_diagram_onboarding.shapes"}),targetKey:BE.BC,onClose:ey.lQ},{title:Q.createElement(eO.Tx,{id:"rcs.figjam_diagram_onboarding.templates_title"}),trackingContextName:HZ.templates,arrowPosition:DK.F_.BOTTOM,media:Q.createElement(MC.y,{aspectRatio:900/505,src:"https://static.figma.com/uploads/b8b42ba263794abd20364c3da0f3f4993fd4ed86",alt:(0,eO.t)("rcs.figjam_diagram_onboarding.templates_title")}),description:Q.createElement(eO.Tx,{id:"rcs.figjam_diagram_onboarding.templates"}),targetKey:HW.yl,secondaryCta:{type:"button",label:Q.createElement(eO.Tx,{id:"rcs.figjam_diagram_onboarding.see_templates"}),onClick:()=>{t(gL.En({initialX:0,initialY:0,initialTab:Nz.p.TEMPLATES})),e.complete()}},onClose:ey.lQ}],[t,e])}(t);return(0,ts.h)(()=>{(0,Df.QL)(HG.tX.key)===HG.tX.value&&t.show({canShow:e=>!e})}),Q.createElement(HK.WZ,{testId:"workflow-interop-machine-overlay",userFlagOnShow:Hz,isShowing:t.isShowing,onComplete:t.complete,steps:n})}let Hq="seen_figjam_workshop_onboarding",HJ=(0,tc.r1)(Hq);function HQ(e){let t=(0,ef.md)(Es.J1),n=(0,ef.md)(HJ),a=(0,ef.md)(Es.zo),r=(0,ef.md)(Es.PD),l=(0,tp.e)({overlay:tv.Fq3,priority:th.N.SECONDARY_MODAL},[t,n,a,r]);return(0,ts.h)(()=>{l.show({canShow:(e,t,n,a)=>e&&!t&&n&&!a})}),Q.createElement(tg.h,{onboardingKey:mM.v4,modalType:tE.q3.DRAGGABLE,trackingContextName:"Fig Jam Workshop Onboarding",title:()=>(0,eO.t)("rcs.figjam_workshop.invite_the_world_to_your_workshop"),disableFooter:!0,width:301,element:H$,isShowing:l.isShowing,onClickPrimaryCta:l.complete,onClose:l.complete,onManualDismiss:l.complete,currentStepIndex:0,totalNumSteps:1,userFlagOnShow:Hq})}function H$(e){return Q.createElement(Q.Fragment,null,Q.createElement(vR.Gv,{width:301,src:"https://static.figma.com/uploads/a97e76df2b43ae8b408127c1c63ea0b8485ba8ac"}),Q.createElement(vR.ak,null,Q.createElement(eO.Tx,{id:"rcs.figjam_workshop.open_sessions_let_you_jam_with_anyone_even_people_who_don_t_have_a_figma_account"})))}var H0=n(80962),H1=n(608005),H2=n(64029),H5=n(871259),H4=n(334068),H3=n(930480),H6=n(283726),H7=n(256320);function H8(){let e=(0,$.wA)(),t=(0,H6.C)();return Q.useEffect(()=>{if(t)return;let n=(0,ER.Es)(),a=document.querySelector(`[data-tooltip=${n}]`);return a&&e(nP.j7({type:yu.pi,data:{targetRect:a.getBoundingClientRect()}})),()=>{e(nP.oB())}},[t,e]),Q.createElement(Q.Fragment,null,Q.createElement(vR.Gv,{width:350,src:"https://static.figma.com/uploads/30b3da35c8e26b773e6fc4b88528ff8077543ad8"}),Q.createElement(vR.ak,null,Q.createElement(eO.Tx,{id:"rcs.back_to_file_browser.the_file_browser_allows_you_to"}),Q.createElement("br",null),Q.createElement("br",null),Q.createElement(eO.Tx,{id:"rcs.back_to_file_browser.you_can_head_there_by_clicking_on_option_in_the_main_menu",optionName:Q.createElement("span",{className:HR.Cr},Q.createElement(eO.Tx,{id:"rcs.back_to_file_browser.back_to_files"}))})))}function H9(e){return Q.createElement(tg.h,{testId:"BackToFileBrowserOverlay",modalType:tE.q3.DRAGGABLE,trackingContextName:"Back to File Browser Modal",element:H8,isShowing:e.isShowing,onClickPrimaryCta:e.onClickPrimaryCta,onClose:e.onClose,onManualDismiss:e.onManualDismiss,headerClassName:HR.Yl,footerClassName:H7.ay,title:Q.createElement(eO.Tx,{id:"rcs.back_to_file_browser.file_browser"}),onboardingKey:"back-to-files",pointDirection:tE._L.LEFT_TITLE,currentStepIndex:e.currentStepIndex,totalNumSteps:e.totalNumSteps,userFlagOnShow:"back_to_file_browser_onboarded",UNSAFE_disableFocus:!0})}function Ve(){return Q.createElement("div",null,Q.createElement(vR.Gv,{src:"https://static.figma.com/app/onboarding/page-3.gif"}),Q.createElement(vR.ak,null,Q.createElement(eO.Tx,{id:"rcs.comments.leave_notes_right_in_your_design_files"}),Q.createElement("br",null),Q.createElement("br",null),Q.createElement(eO.Tx,{id:"rcs.comments.get_feedback_requests_and_copy_updates_where_you_ll_use_them_not_in_your_inbox"})))}function Vt(e){return Q.createElement(t6.fu,{name:"Community Hub Duplicate Onboarding Modal"},Q.createElement(g4.M,{userFlagOnShow:"editor_community_duplicate_onboarded",isShowing:e.isShowing},Q.createElement(tS.Nb,{className:HR.W8,hide:e.onManualDismiss,size:tE.pN,disableClickOutsideToHide:!0},Q.createElement("div",{className:HR.SI},Q.createElement("h1",null,Q.createElement(eO.Tx,{id:"rcs.community_hub_file_duplicate.welcome_to_figma"})),Q.createElement(nc.Kz,{multiple:4}),Q.createElement("p",null,Q.createElement(eO.Tx,{id:"rcs.community_hub_file_duplicate.you_just_duplicated_this_file_from_the_community_to_get_started_let_us_show_you_some_of_the_things_that_make_figma_special_and_different_from_other_design_tools"})),Q.createElement(nc.Kz,{multiple:4}),Q.createElement(Dg.Go,{fullWidth:!1,onClick:e.onClickPrimaryCta},Q.createElement(eO.Tx,{id:"rcs.community_hub_file_duplicate.show_me_around"})),Q.createElement(nc.Kz,{multiple:3}),Q.createElement(nc.Ph,{className:HR.X8,onClick:e.onManualDismiss,trusted:!0},Q.createElement(eO.Tx,{id:"rcs.community_hub_file_duplicate.no_thanks"}))))))}function Vn(){return Q.createElement("div",null,Q.createElement(vR.Gv,{src:"https://static.figma.com/app/onboarding/export.png",width:350}),Q.createElement(vR.ak,null,Q.createElement(eO.Tx,{id:"rcs.export.export_your_designs_for_use_in_production_or_to_share_with_your_team"}),Q.createElement("br",null),Q.createElement("br",null),Q.createElement(eO.Tx,{id:"rcs.export.figma_can_export_to_png_jpeg_svg_and_pdf"})))}function Va(){return Q.createElement("div",null,Q.createElement(vR.Gv,{src:"https://static.figma.com/app/onboarding/livepreview.gif"}),Q.createElement(vR.ak,null,Q.createElement(eO.Tx,{id:"rcs.live_device_preview.to_view_your_frames_live_on_your_device_just_download_figma_mirror",linkToIOS:Q.createElement(vR.lp,{href:"https://itunes.apple.com/app/figma-mirror/id1152747299"},Q.createElement(eO.Tx,{id:"rcs.live_device_preview.i_os"})),linkToAndroid:Q.createElement(vR.lp,{href:"https://play.google.com/store/apps/details?id=com.figma.mirror&hl=en"},Q.createElement(eO.Tx,{id:"rcs.live_device_preview.android"}))}),Q.createElement("br",null),Q.createElement("br",null),Q.createElement(eO.Tx,{id:"rcs.live_device_preview.they_ll_update_instantly_no_matter_what_network_you_re_on_and_with_no_need_to_connect_via_usb"})))}function Vr(){return Q.createElement("div",null,Q.createElement(vR.Gv,{src:"https://static.figma.com/app/onboarding/multiplayer.gif"}),Q.createElement(vR.ak,null,Q.createElement(eO.Tx,{id:"rcs.multiplayer.collaborate_in_real_time_with_your_team_and_never_worry_about_your_files"}),Q.createElement("br",null),Q.createElement("br",null),Q.createElement(eO.Tx,{id:"rcs.multiplayer.no_syncing_no_waiting_no_merge_conflicts"})))}function Vl(){return Q.createElement("div",null,Q.createElement(vR.Gv,{src:"https://static.figma.com/app/onboarding/sharing.gif"}),Q.createElement(vR.ak,null,Q.createElement(eO.Tx,{id:"rcs.sharing.share_your_projects_with_teammates_clients_and_stakeholders"}),Q.createElement("br",null),Q.createElement("br",null),Q.createElement(eO.Tx,{id:"rcs.sharing.control_their_access_with_granular_permissions_and_manage_their_access_in_one_simple_place"})))}function Vi(){let e=(0,$.wA)(),t=(0,$.Pj)();return Q.useEffect(()=>{let n=t.getState().leftPanel.activeTab;return e(cM.FP({tab:eU.xae.ASSETS})),()=>{e(cM.FP({tab:n}))}},[e,t]),Q.createElement("div",null,Q.createElement(vR.Gv,{src:"https://static.figma.com/app/onboarding/library.gif"}),Q.createElement(vR.ak,null,Q.createElement(eO.Tx,{id:"rcs.team_library.share_components_and_styles_across_your_team_by_publishing_them"}),Q.createElement("br",null),Q.createElement("br",null),Q.createElement(eO.Tx,{id:"rcs.team_library.enable_quick_access_to_other_libraries_in_this_file"})))}function Vo(){return Q.createElement("div",null,Q.createElement(vR.Gv,{src:"https://static.figma.com/uploads/238ff8ea8ab49de9355932f62342f3f859ad8f4a"}),Q.createElement(vR.ak,null,Q.createElement(eO.Tx,{id:"rcs.universal_inserts.insert_components_from_your_libraries"})))}let Vs=["editor_community_duplicate_onboarded","editor_onboarded","shared_component_library_onboarded","shared_component_publish_onboarded","library_modal_onboarded","styles_onboarded","pdf_onboarded","coco_onboarded","line_height_update_onboarded","gifs_onboarded","opentype_onboarded","seen_community_hub_landing_editor_onboarding","variants_onboarded","multiple_starting_points_onboarded"],Vc=[function(e){return Q.createElement(de.X,{emphasized:!0,testId:"LaunchNuxModalViewOverlay",trackingContextName:"LaunchNux",isShowing:e.isShowing,position:dt.Q.BOTTOM_RIGHT,title:Q.createElement(eO.Tx,{id:"rcs.launch_nux_modal.take_a_quick_tour_of_figma"}),description:Q.createElement(eO.Tx,{id:"rcs.launch_nux_modal.walk_through_figma_s_unique_editor_and_collaboration_features"}),primaryCta:{type:"button",label:Q.createElement(eO.Tx,{id:"rcs.launch_nux_modal.show_me_around"}),onClick:e.onClickPrimaryCta,ctaTrackingDescriptor:c5.c.SHOW_ME_AROUND},secondaryCta:{type:"button",label:Q.createElement(eO.Tx,{id:"rcs.launch_nux_modal.no_thanks"}),onClick:e.onManualDismiss,ctaTrackingDescriptor:c5.c.NO_THANKS},onClose:e.onManualDismiss})},function(e){return Q.createElement(c9.rq,{testId:"ConstraintsOverlay",trackingContextName:"Constraints Onboarding Modal",title:Q.createElement(eO.Tx,{id:"rcs.constraints.constraints"}),media:Q.createElement(MC.y,{src:"https://static.figma.com/app/onboarding/page-2.gif",alt:"An animation showing how constraints works in Figma.",aspectRatio:1280/720}),description:Q.createElement(Q.Fragment,null,Q.createElement(eO.Tx,{id:"rcs.constraints.setting_precise_constraints_lets_you_build_fluid_layouts_to_support_multiple_device_sizes_and_breakpoints_within_the_same_group"}),Q.createElement("br",null),Q.createElement("br",null),Q.createElement(eO.Tx,{id:"rcs.constraints.all_of_your_layers_adjust_the_way_you_expect_no_magic_you_get_full_control"})),isShowing:e.isShowing,primaryCta:{type:"button",label:Q.createElement(eO.Tx,{id:"rcs.rcs_shared.next"}),onClick:e.onClickPrimaryCta,ctaTrackingDescriptor:c5.c.NEXT},onClose:e.onManualDismiss,targetKey:"frame",secondaryCta:{type:"link",label:Q.createElement(eO.Tx,{id:"rcs.rcs_shared.learn_more"}),href:"https://help.figma.com/hc/articles/360039957734",ctaTrackingDescriptor:c5.c.LEARN_MORE},stepCounter:{stepNum:e.currentStepIndex+1,totalNumSteps:e.totalNumSteps}})},function(e){return Q.createElement(c9.rq,{testId:"VectorNetworksOverlay",trackingContextName:"Vector Networks Onboarding Modal",title:Q.createElement(eO.Tx,{id:"rcs.vector_networks.vector_networks"}),media:Q.createElement(MC.y,{src:"https://static.figma.com/app/onboarding/page-1.gif",alt:"An animation showing how to use the pen tool",aspectRatio:1280/720}),description:Q.createElement(Q.Fragment,null,Q.createElement(eO.Tx,{id:"rcs.vector_networks.pen_tools_have_always_been_scary_to_use"}),Q.createElement("br",null),Q.createElement("br",null),Q.createElement(eO.Tx,{id:"rcs.vector_networks.now_they_re_both_simpler_and_more_powerful_paths_finally_work_the_way_they_should"})),isShowing:e.isShowing,primaryCta:{type:"button",label:Q.createElement(eO.Tx,{id:"rcs.rcs_shared.next"}),onClick:e.onClickPrimaryCta,ctaTrackingDescriptor:c5.c.NEXT},onClose:e.onManualDismiss,targetKey:"pen",secondaryCta:{type:"link",label:Q.createElement(eO.Tx,{id:"rcs.rcs_shared.learn_more"}),href:"https://help.figma.com/hc/articles/360040450213",ctaTrackingDescriptor:c5.c.LEARN_MORE},stepCounter:{stepNum:e.currentStepIndex+1,totalNumSteps:e.totalNumSteps}})},function(e){return Q.createElement(tg.h,{testId:"UniversalInsertsOverlay",modalType:tE.q3.DRAGGABLE,trackingContextName:"Universal Inserts Onboarding Modal",element:Vo,isShowing:e.isShowing,onClickPrimaryCta:e.onClickPrimaryCta,onClose:e.onClose,onManualDismiss:e.onManualDismiss,headerClassName:HR.Yl,footerClassName:H7.ay,title:Q.createElement(eO.Tx,{id:"rcs.universal_inserts.find_components_plugins_and_widgets"}),onboardingKey:"insert",additionalButton:{onClickBehavior:"link",label:Q.createElement(eO.Tx,{id:"rcs.rcs_shared.learn_more"}),href:"https://help.figma.com/hc/articles/360038510693-Guide-to-Figma-Community"},currentStepIndex:e.currentStepIndex,totalNumSteps:e.totalNumSteps,UNSAFE_disableFocus:!0})},function(e){return Q.createElement(tg.h,{testId:"CommentsOverlayOverlay",modalType:tE.q3.DRAGGABLE,trackingContextName:"Comments Onboarding Modal",element:Ve,isShowing:e.isShowing,onClickPrimaryCta:e.onClickPrimaryCta,onClose:e.onClose,onManualDismiss:e.onManualDismiss,headerClassName:HR.Yl,footerClassName:H7.ay,title:Q.createElement(eO.Tx,{id:"rcs.comments.comments"}),onboardingKey:"comment",additionalButton:{onClickBehavior:"link",label:Q.createElement(eO.Tx,{id:"rcs.rcs_shared.learn_more"}),href:"https://help.figma.com/hc/articles/360039825314"},currentStepIndex:e.currentStepIndex,totalNumSteps:e.totalNumSteps,UNSAFE_disableFocus:!0})},function(e){return Q.createElement(tg.h,{testId:"SharingOverlay",modalType:tE.q3.DRAGGABLE,trackingContextName:"Sharing Onboarding Modal",element:Vl,isShowing:e.isShowing,onClickPrimaryCta:e.onClickPrimaryCta,onClose:e.onClose,onManualDismiss:e.onManualDismiss,headerClassName:HR.Yl,footerClassName:H7.ay,title:Q.createElement(eO.Tx,{id:"rcs.sharing.sharing_and_permissions"}),onboardingKey:mM.v4,additionalButton:{onClickBehavior:"link",label:Q.createElement(eO.Tx,{id:"rcs.rcs_shared.learn_more"}),href:"https://help.figma.com/hc/articles/360039485514"},currentStepIndex:e.currentStepIndex,totalNumSteps:e.totalNumSteps,UNSAFE_disableFocus:!0})},function(e){return Q.createElement(tg.h,{testId:"MultiplayerOverlay",modalType:tE.q3.DRAGGABLE,trackingContextName:"Multiplayer Onboarding Modal",element:Vr,isShowing:e.isShowing,onClickPrimaryCta:e.onClickPrimaryCta,onClose:e.onClose,onManualDismiss:e.onManualDismiss,headerClassName:HR.Yl,footerClassName:H7.ay,title:Q.createElement(eO.Tx,{id:"rcs.multiplayer.multiplayer"}),onboardingKey:mM.v4,additionalButton:{onClickBehavior:"link",label:Q.createElement(eO.Tx,{id:"rcs.rcs_shared.learn_more"}),href:"https://blog.figma.com/multiplayer-editing-in-figma-8f8076c6c3a6"},currentStepIndex:e.currentStepIndex,totalNumSteps:e.totalNumSteps,UNSAFE_disableFocus:!0})},function(e){return Q.createElement(tg.h,{testId:"TeamLibraryOverlay",modalType:tE.q3.DRAGGABLE,trackingContextName:"Team Library Onboarding Modal",element:Vi,isShowing:e.isShowing,onClickPrimaryCta:e.onClickPrimaryCta,onClose:e.onClose,onManualDismiss:e.onManualDismiss,headerClassName:HR.Yl,footerClassName:H7.ay,title:Q.createElement(eO.Tx,{id:"rcs.team_library.team_library"}),onboardingKey:"library",additionalButton:{onClickBehavior:"link",label:Q.createElement(eO.Tx,{id:"rcs.rcs_shared.learn_more"}),href:"https://help.figma.com/hc/articles/360041051154"},currentStepIndex:e.currentStepIndex,totalNumSteps:e.totalNumSteps,userFlagOnShow:"library_modal_onboarded",UNSAFE_disableFocus:!0})},function(e){return Q.createElement(tg.h,{testId:"ExportOverlay",modalType:tE.q3.DRAGGABLE,trackingContextName:"Export Onboarding Modal",element:Vn,isShowing:e.isShowing,onClickPrimaryCta:e.onClickPrimaryCta,onClose:e.onClose,onManualDismiss:e.onManualDismiss,headerClassName:HR.Yl,footerClassName:H7.ay,title:Q.createElement(eO.Tx,{id:"rcs.export.export"}),additionalButton:{onClickBehavior:"link",label:Q.createElement(eO.Tx,{id:"rcs.rcs_shared.learn_more"}),href:"https://help.figma.com/hc/articles/360040028114"},currentStepIndex:e.currentStepIndex,totalNumSteps:e.totalNumSteps,UNSAFE_disableFocus:!0})},function(e){return Q.createElement(tg.h,{testId:"LiveDevicePreviewOverlay",modalType:tE.q3.DRAGGABLE,trackingContextName:"Live Device Preview Onboarding Modal",element:Va,isShowing:e.isShowing,onClickPrimaryCta:e.onClickPrimaryCta,onClose:e.onClose,onManualDismiss:e.onManualDismiss,headerClassName:HR.Yl,footerClassName:H7.ay,title:Q.createElement(eO.Tx,{id:"rcs.live_device_preview.live_device_preview"}),currentStepIndex:e.currentStepIndex,totalNumSteps:e.totalNumSteps,UNSAFE_disableFocus:!0})}];function Vd(){return wk.eD||(0,H3.ce)()?Vc:[...Vc,H9]}function Vu(){let e=(0,$.wA)(),t=(0,ef.md)(tc.qG),n=(0,ef.md)(Mv.d2),a=(0,ef.md)(Mv.g5),r=(0,ef.md)(Mv.NT),l=(0,t_.q5)(),i=(0,n4.Vq)(l)&&(0,cB.pi)({editorType:l.editorType})===dV._Y.DESIGN,o=(0,n4.Vq)(l)&&l.canEdit,s=(0,tp.e)({overlay:tv.LiP,priority:th.N.OVERRIDING_MODAL},[t,a,n,r]),[c,d]=Q.useState([]),u=Q.useCallback(e=>{s.show({canShow:(t,n,a,r)=>{let l=(function({userFlags:e,emailValidatedAt:t,userSpace:n,isReset:a,jobTitle:r}){let l=(0,cJ._q)(e),i=(0,Fk.mW)(e,"editor_community_duplicate_onboarded"),o=(0,FA.d2)({emailValidatedAt:t,jobTitle:r}),s=(0,Fk.mW)(e,"claimed_invite_with_pending_user_mention"),c=(0,Fk.mW)(e,"has_closed_comment"),d=!!ei.Ay.location.hash,u="community"===(0,Fk.MS)(e),m=n===Ex.qo.ORG,p=(0,cY.XX)(e),_=(0,Df.QL)(NU.pt.KEY)===NU.pt.VALUE;if(l&&!a||s&&!c&&d)return[];if(!_&&!p)return Vd();if(i||o)return[];if(u){if(!m)return p?[(0,eo.kc)().nux_gen0_overlay_design_editor?null:FA.vm]:[(0,eo.kc)().nux_gen0_overlay_design_editor?null:FA.vm,Vt,...Vd()];if(!p)return[Vt,...Vd()]}else if(!p&&(!l||a))return[Vt,...Vd()];return[]})({userFlags:t,emailValidatedAt:n,userSpace:a,isReset:e,jobTitle:r}).filter(e=>!!e);return l.length>0&&(d(l),!0)}})},[s]);Q.useEffect(()=>{o&&i&&u(!1)},[u,o,i]),(0,Eo.E)(s.uniqueId,"Reset Onboarding",()=>u(!0));let m=Q.useCallback(()=>{let t={};for(let e of Vs)t[e]=!0;e(tB.b(t)),s.complete()},[e,s]);return s.isShowing&&0!==c.length?Q.createElement(Vm,{steps:c,onComplete:m}):null}function Vm(e){let{steps:t,onComplete:n}=e,a=(0,c4.A)({numSteps:t.length,onComplete:n});return Q.createElement(c8.U,{currentStep:a.currentStep,isShowing:!0,children:t.map((e,r)=>Q.createElement(e,{onClickPrimaryCta:a.next,onClose:ey.lQ,onManualDismiss:n,isShowing:!0,currentStepIndex:r,totalNumSteps:t.length}))})}var Vp=n(556369),V_=n(311792),Vf=n(344125),Vh=n(922128),Vg=n(876490);let VE=[Vp.wn.CREATE_FRAME,Vp.wn.FORMAT_FRAME,Vp.wn.CREATE_TEXT,Vp.wn.FORMAT_TEXT];var Vv=n(388155),Vy=n(45734);let Vb=(0,pF.Lg)()?0:300;class VC{constructor(e,t,n,a,r,l,i,o,s,c,d,u,m,p,_,f,h,g,E,v,y){this.setCursorBotX=e,this.setCursorBotY=t,this.setCursorBotChat=n,this.setCursorBotAnimationDuration=a,this.setCursorBotTutorialPhase=r,this.setCursorType=l,this.setCursorDirection=i,this.setToolbarActionWithSimulatedHover=o,this.setCursorBotAnimationLayerPosition=s,this.setCursorBotOverlayType=c,this.setCursorBotTutorialDuration=d,this.hasWaved=u,this.cursorBotX=m,this.cursorBotY=p,this.getViewportInfo=_,this.navigate=f,this.sceneGraph=h,this.infoForSentry=g,this.dispatch=E,this.insertTemplate=v,this.appModel=y,this.waitForDuration=(e,t)=>new Promise(n=>{this.setTimeoutWrapper({callback:n,delay:(0,pF.Lg)()&&!t?0:e,isBlockingTutorialExecution:!0})}),this.unblockUserEventsTimeout=null,this.blockUserEvents=()=>{eU.Ez5.editorState().shouldBlockUserEvents.set(!0),cR.wt.setIsCursorBotEditing(!0),(0,pF.Lg)()||(this.unblockUserEventsTimeout=setTimeout(()=>{this.unblockUserEvents()},6e4))},this.unblockUserEvents=()=>{this.setCursorBotTutorialPhase(Vp.h0.AWAITING_PLAYBACK),eU.Ez5.editorState().shouldBlockUserEvents.set(!1),this.unblockUserEventsTimeout&&clearTimeout(this.unblockUserEventsTimeout),this.unblockUserEventsTimeout=null,cR.wt.setIsCursorBotEditing(!1)},this.animateChat=(e,t)=>{if(e>t.length||this.shouldStop)return;let n=t.slice(0,e);this.setCursorBotChat(n),this.setTimeoutWrapper({callback:()=>{this.animateChat(e+1,t)},delay:(0,pF.Lg)()?0:35,isBlockingTutorialExecution:!1})},this.startingStateHubFiles={},this.shouldStop=!1,this.timeoutIds=[],this.pendingCallbacksToRun=[]}runTutorial(e,t){let n=async()=>{for(let t of(await this.setupStateAndCanvas(e),e.steps)){if(this.shouldStop)return;try{await this.transition(t)}catch(e){this.logErrorAndStopTutorial("Could not execute step",{step:t,err:e});return}}this.resetStateAndMarkTutorialComplete(e.tutorialPlayedUserFlag,t)};(0,Vv.Lk)(H1.tF);let a=window.performance.now();return this.currentTutorialRunningPromise=n(),this.currentTutorialRunningPromise.finally(()=>{(0,Vv.Dz)(H1.tF);let t=window.performance.now()-a;(0,ar.Lo)(H1.tF,"Tutorial completed or stopped",{elapsedDuration:t,tutorialName:e.name})}),this.currentTutorialRunningPromise}insertStartingStateFromHubFile({hubFileId:e,nodeWidth:t,nodeHeight:n}){if(!e)throw Error("Hub file ID is not provided");let a=async e=>{let a=eU.qmM.findBoundsToCenterNewTopLevelNode(t+88,n),r=a.origin.x+88,l=a.origin.y;await this.centerViewportAroundCanvasRect({x:r,y:l,width:t,height:n}),await this.waitForDuration(this.moveCursorBot({x:r+t/2,y:l+n/2,coordinateType:"canvas",animationDuration:600})),await this.transition({type:Vp.HQ.SET_CHAT,message:"Here\u2019s another example..."}),await this.insertTemplate({template:{type:NV.n.HubFile,template:e},userTriggered:!1,editScopeType:eU.zkO.ONBOARDING,triggeredFrom:"cursor-bot",templateInsertionDirection:eU.hKj.CUSTOM_POSITION,templateCustomPosition:{x:r,y:l},selectTemplateAfterInsertion:!0}),await this.waitForDuration(500)};return this.startingStateHubFiles[e]?a(this.startingStateHubFiles[e]):new Promise((t,n)=>{this.dispatch(wa.ts({hubFileId:e,callback:async e=>{try{this.startingStateHubFiles[e.id]=e,await a(e),t()}catch(e){n(e)}}}))})}logSentryError(e,t){(0,ar.x1)(H1.tF,e,t,{reportAsSentryError:!0})}logErrorAndStopTutorial(e,t){this.logSentryError(e,t),this.dispatch(Dv.s.error("Could not run tutorial. Please try again later.")),this.stopCurrentTutorial()}async stopCurrentTutorial(e){this.shouldStop=!0,this.timeoutIds.forEach(e=>clearTimeout(e)),this.pendingCallbacksToRun.forEach(e=>e()),await this.currentTutorialRunningPromise,this.resetCursorBotStateToDefaults(),this.unblockUserEvents(),e&&(0,er.sx)("Cursor Bot Tutorial Stopped",{...e})}updatePositionState(e,t){this.cursorBotX=e,this.cursorBotY=t}updateSceneGraphReference(e){this.sceneGraph=e}updateInfoForSentry(e){this.infoForSentry=e}updateAppModel(e){this.appModel=e}updateHasWaved(e){this.hasWaved=e}setTimeoutWrapper({callback:e,delay:t,isBlockingTutorialExecution:n}){this.timeoutIds.push(setTimeout(e,t)),n&&this.pendingCallbacksToRun.push(e)}resetCursorBotStateToDefaults(){this.tutorialParentNode=void 0,this.setCursorBotX(H0.Lw),this.setCursorBotY(H0.WW),this.setCursorBotChat(""),this.setCursorBotAnimationDuration(0),this.setCursorType(eU.z7E.DEFAULT),this.setToolbarActionWithSimulatedHover(void 0),this.setCursorDirection(Vp.zu.DEFAULT),this.setCursorBotOverlayType(Vp.JJ.CANVAS),this.timeoutIds=[],this.pendingCallbacksToRun=[]}async navigateToPageNodesOrDefaultViewport(){var e;let t=null==(e=this.sceneGraph.getCurrentPage())?void 0:e.childrenGuids;t&&t.length>0?eU.NfO.scrollAndZoomIntoView(t):await this.navigate({centerX:0,centerY:0,scale:3})}getSelectedNodeIfMatches(e){if(""!==eU.glU.getFirstSelectedNodeIdForCurrentPage()){let t=eU.glU.getFirstSelectedNodeIdForCurrentPage(),n=this.sceneGraph.get(t);if(n&&e(n,this.sceneGraph))return n}}computeAndSetTutorialDuration(e){let t=e.duration;if(e.startingState){let{centerNodeMatcher:n,resetStartingState:a}=e.startingState;!(0,eW.cy)(n,this.sceneGraph)&&a&&(t+=3e3)}this.hasWaved||(t+=H1.Y4+H1.YX),this.setCursorBotTutorialDuration(t),(0,ar.Lo)(H1.tF,"Estimated tutorial duration",{tutorialDuration:t,tutorialName:e.name})}async setupStateAndCanvas(e){if(this.blockUserEvents(),this.shouldStop=!1,this.timeoutIds=[],this.computeAndSetTutorialDuration(e),e.startingViewportFrameType&&this.setCursorBotOverlayType(e.startingViewportFrameType),this.setCursorBotTutorialPhase(Vp.h0.PLAYING),this.hasWaved||(this.setTimeoutWrapper({callback:()=>{this.hasWaved=!0,this.dispatch(tB.b({cursor_bot_v2_has_greeted_with_wave:!0}))},delay:H1.Y4,isBlockingTutorialExecution:!1}),await this.transition({type:Vp.HQ.SET_CHAT,message:"Certainly! Here\u2019s how...",additionalDelay:H1.YX,preDelay:H1.Y4})),void 0!==e.startingState){let t;let{centerNodeMatcher:n,prioritizeSelectedNode:a,resetStartingState:r}=e.startingState;if(a&&(t=this.getSelectedNodeIfMatches(n)),t||(t=(0,eW.WY)(n,this.sceneGraph)),!t&&r)try{await this.insertStartingStateFromHubFile(r),t=(0,eW.cy)(n,this.sceneGraph)}catch(t){this.logErrorAndStopTutorial("Could not insert starting state from hub file for tutorial",{err:t,tutorialName:e.name});return}if(t){this.tutorialParentNode=(0,eW.E6)(this.sceneGraph,t.guid)??void 0;let e={centerX:t.absoluteBoundingBox.x+t.absoluteBoundingBox.w/2,centerY:t.absoluteBoundingBox.y+t.absoluteBoundingBox.h/2,scale:.2},n=eU.NfO.getViewportBounds(),a=(0,H1.dK)(t,{width:n.width,height:n.height,zoom:this.getViewportInfo().zoomScale});null==a||isNaN(a)||(e.scale=a),await this.navigate(e)}else await this.navigateToPageNodesOrDefaultViewport()}else await this.navigateToPageNodesOrDefaultViewport()}resetStateAndMarkTutorialComplete(e,t){setTimeout(()=>{this.dispatch(tB.b({[e]:!0})),null==t||t(),this.resetCursorBotStateToDefaults(),this.unblockUserEvents()},Vb)}async centerViewportAroundCanvasRect(e,t=!1){let{x:n,y:a,width:r,height:l}=e,i=this.getViewportInfo();if(t&&(0,ez.UN)(e,i))return;let o=i.zoomScale;(r*o>i.width||l*o>i.height)&&(o=Math.min(i.width/r,i.height/l)/1.1),await this.navigate({centerX:n+r/2,centerY:a+l/2,scale:o})}moveCursorBot({x:e,y:t,coordinateType:n,animationDuration:a}){if("canvas"===n){let n=this.getViewportInfo(),a=(0,ez.Z0)(n,{x:e,y:t});e=a.x+n.x,t=a.y+n.y}return a=a||function(e,t,n,a){let r=Math.abs(e-t),l=Math.abs(n-a);return Math.min(Math.round(1.6*Math.sqrt(r*r+l*l)),3e3)}(this.cursorBotX,e,this.cursorBotY,t),this.setCursorBotAnimationDuration(a),this.setCursorBotX(e),this.setCursorBotY(t),a}repositionNode(e,t,n){cU.l7.onboarding("reposition-node",()=>e.relativeTransform={...e.relativeTransform,m02:t,m12:n})}async insertNode(e,t,n,a,r){let l;if("RECTANGLE"===e.nodeType){let t=await (0,H1.mF)({imgSrc:e.imgSrc,desiredWidth:e.width,desiredHeight:e.height});l=t?this.sceneGraph.get(t):null}else l=cU.l7.onboarding("create-node",()=>this.sceneGraph.createNode(e.nodeType));if(!l)return null;if(cU.l7.onboarding("size",()=>{l&&eU.Egt.setSelectedNodeAndCanvas(l.guid,!1)}),r){let e=(0,eW.cy)(r,this.sceneGraph,this.tutorialParentNode);cU.l7.onboarding("append-child",()=>l&&(null==e?void 0:e.appendChild(l)))}if(this.repositionNode(l,n,a),cU.l7.onboarding("rename-node",()=>{l&&(l.name=t)}),"FRAME"===e.nodeType)cU.l7.onboarding("resize-frame",()=>null==l?void 0:l.resizeWithoutConstraints(e.width||100,e.height||100));else if("TEXT"===e.nodeType){eU.glU.triggerAction("set-tool-default",null),this.setCursorType(eU.z7E.DEFAULT);let t=l.parentNode;if(null!==t){let e="CANVAS"===t.type?t.backgroundColor:t.fills[0].color;cU.l7.onboarding("set-text-color",()=>{l&&(l.fills=[{...l.fills[0],color:(0,ty.HD)(e||ty.UE)?ty.UE:ty.Uv}])})}let n=e.text.length,a=e.typingDurationPerCharMs||50,r=500;for(let t=0;t<n;t++)this.setTimeoutWrapper({callback:()=>{cU.l7.onboarding("set-text",()=>{var n,a,r,i;null==l||l.spliceCharacters((null==(a=null==(n=l.textData)?void 0:n.characters)?void 0:a.length)??t,(null==(i=null==(r=l.textData)?void 0:r.characters)?void 0:i.length)??t,e.text[t],"BEFORE")})},delay:r,isBlockingTutorialExecution:!1}),r+=Math.max(a-t,40);e.shouldCenterAlign&&this.setTimeoutWrapper({callback:()=>{cU.l7.onboarding("set-text-horizontal-alignment",()=>{l&&(l.textAlignHorizontal="CENTER",l.textAlignVertical="CENTER")})},delay:r,isBlockingTutorialExecution:!1}),await this.waitForDuration(r)}return l}getCursorBotNodeInsertionLocation(e){var t,n;let a;if(e.locationType===Vp.bn.INSIDE_SCENE_NODE){let{parentMatcher:r,useDefaultLocationIfParentNotFound:l}=e.location,i=(0,eW.cy)(r,this.sceneGraph,this.tutorialParentNode);if(!i)return l?this.getCursorBotNodeInsertionLocation({...e,locationType:Vp.bn.DEFAULT}):void 0;let o=(null==(t=e.location)?void 0:t.offsetX)??0,s=(null==(n=e.location)?void 0:n.offsetY)??0,{absoluteBoundingBox:{x:c,y:d,w:u,h:m}}=i;e.location.shouldPositionRelativeToCenterOfParent&&(o+=u/2,s+=m/2),a={cursorBotX:c+o,cursorBotY:d+s,insertionX:o,insertionY:s}}else if(e.locationType===Vp.bn.CANVAS_COORDINATE)a={cursorBotX:e.location.x,cursorBotY:e.location.y,insertionX:e.location.x,insertionY:e.location.y};else{let t=eU.qmM.findBoundsToCenterNewTopLevelNode(e.payload.width??100,e.payload.height??100);a={cursorBotX:t.origin.x,cursorBotY:t.origin.y,insertionX:t.origin.x,insertionY:t.origin.y}}if(void 0!==e.cursorPosition&&null==e.nodeDrawingAnimationDuration){let t=e.payload.width??100,n=e.payload.height??100;switch(e.cursorPosition){case Vp.$2.BOTTOM_LEFT:a.cursorBotY+=n;break;case Vp.$2.BOTTOM_RIGHT:a.cursorBotX+=t,a.cursorBotY+=n;case Vp.$2.TOP_LEFT:}}return a}async transition(e){var t;if(this.shouldStop)return;let n=async()=>{switch(e.type){case Vp.HQ.SET_CHAT:{e.preDelay&&await this.waitForDuration(e.preDelay);let{message:t}=e;e.hasBackupMessage&&e.shouldShowBackupMessage(this.sceneGraph)&&(t=e.backupMessage),this.animateChat(1,t);return}case Vp.HQ.CLEAR_CHAT:this.setCursorBotChat("");return;case Vp.HQ.TARGET_DOM_NODE:{let t=(0,Hn.xT)(e.dataOnboardingKey);if(!t){let t={name:e.dataOnboardingKey,...this.infoForSentry};e.continueIfNotFound?this.logSentryError("Failed to find DOM node to target",t):this.logErrorAndStopTutorial("Failed to find DOM node to target",t);return}let{targetX:n,targetY:a}=(0,H1.L7)(t,e.position,e.offset);await this.waitForDuration(this.moveCursorBot({x:n,y:a,coordinateType:"dom",animationDuration:e.cursorBotMovementAnimationDuration})),e.triggerHoverOfItemWithName&&this.setToolbarActionWithSimulatedHover(e.triggerHoverOfItemWithName);return}case Vp.HQ.TARGET_SCENE_NODE:{let t=(0,eW.cy)(e.meetsConditions,this.sceneGraph,this.tutorialParentNode);if(e.prioritizeSelectedNode&&(t=this.getSelectedNodeIfMatches(e.meetsConditions)??t),!t){e.continueIfNotFound||this.logErrorAndStopTutorial("Failed to find scene node to target",{name:e.nodeNameForLogging});return}await this.centerViewportAroundCanvasRect({x:t.absoluteBoundingBox.x,y:t.absoluteBoundingBox.y,width:t.absoluteBoundingBox.w,height:t.absoluteBoundingBox.h},!0);let n=e.position||{x:Vp.GF.RIGHT,y:Vp.NI.BOTTOM},{targetX:a,targetY:r}=(0,H1.L7)(t,n,e.offset);await this.waitForDuration(this.moveCursorBot({x:a,y:r,coordinateType:"canvas",animationDuration:e.cursorBotMovementAnimationDuration})),e.shouldSelect&&eU.Egt.setSelectedNodeAndCanvas(t.guid,!1);return}case Vp.HQ.SELECT_SCENE_NODE:{let t;if(e.prioritizeSelectedNode&&(t=this.getSelectedNodeIfMatches(e.meetsConditions)),t||(t=(0,eW.cy)(e.meetsConditions,this.sceneGraph,this.tutorialParentNode)),!t){this.logErrorAndStopTutorial("Failed to find scene node to select",{name:e.nodeNameForLogging});return}eU.Egt.setSelectedNodeAndCanvas(t.guid,!1);return}case Vp.HQ.INSERT_NODE:{let t=this.getCursorBotNodeInsertionLocation(e);if(void 0===t){this.logErrorAndStopTutorial("Could not find parent scene node to insert node",{name:e.nodeNameForLogging});return}let n=e.payload.height??100,a=e.payload.width??100;await this.centerViewportAroundCanvasRect({x:t.cursorBotX,y:t.cursorBotY,width:a,height:n},!0),await this.waitForDuration(this.moveCursorBot({x:t.cursorBotX,y:t.cursorBotY,coordinateType:"canvas",animationDuration:e.cursorMovementAnimationDuration||600})),e.nodeDrawingAnimationDuration&&"FRAME"===e.payload.nodeType&&(this.setCursorBotAnimationLayerPosition({x:t.cursorBotX,y:t.cursorBotY,width:a,height:n,duration:e.nodeDrawingAnimationDuration}),await this.waitForDuration(this.moveCursorBot({x:t.cursorBotX+a,y:t.cursorBotY+n,coordinateType:"canvas",animationDuration:e.nodeDrawingAnimationDuration})));let r=t.insertionX??t.cursorBotX,l=t.insertionY??t.cursorBotY;await this.insertNode(e.payload,e.nodeName,r,l,e.locationType===Vp.bn.INSIDE_SCENE_NODE?e.location.parentMatcher:void 0),this.setCursorBotAnimationLayerPosition(null);return}case Vp.HQ.MOVE_CURSOR_TO_CENTER_SCREEN:return this.waitForDuration(this.moveCursorBot({x:this.getViewportInfo().offsetX,y:this.getViewportInfo().offsetY,coordinateType:"canvas",animationDuration:e.cursorBotMovementAnimationDuration}));case Vp.HQ.CHANGE_TOOL:[eU.NLJ.FRAME,eU.NLJ.TYPE].includes(e.toolType)?(e.toolType===eU.NLJ.TYPE?eU.glU.triggerAction("set-tool-type",null):e.toolType===eU.NLJ.FRAME&&eU.glU.triggerAction("set-tool-frame",null),this.setCursorType(eU.z7E.CROSSHAIR)):e.toolType===eU.NLJ.HAND?(eU.glU.triggerAction("set-tool-hand",null),this.setCursorType(eU.z7E.HAND)):e.toolType===eU.NLJ.NONE&&(eU.glU.triggerAction("set-tool-default",null),this.setCursorType(eU.z7E.DEFAULT));return;case Vp.HQ.MOVE_VIEWPORT:if("displace"===e.movementType)return this.navigate({centerX:this.getViewportInfo().offsetX+e.xDisplacement,centerY:this.getViewportInfo().offsetY+e.yDisplacement,scale:this.getViewportInfo().zoomScale});return this.navigate({centerX:e.centerX,centerY:e.centerY,scale:e.scale||this.getViewportInfo().zoomScale});case Vp.HQ.ADJUST_ZOOM_LEVEL:return this.navigate({centerX:this.getViewportInfo().offsetX,centerY:this.getViewportInfo().offsetY,scale:e.scale});case Vp.HQ.SET_CURSOR_DIRECTION:this.setCursorDirection(e.direction);return;case Vp.HQ.SET_PROPERTIES_PANEL_TAB:(0,eV.NT)(e.tab);return;case Vp.HQ.UPDATE_SELECTED_NODE_PROPERTIES:{let t=eU.glU.getFirstSelectedNodeIdForCurrentPage(),n=this.sceneGraph.get(t);if(!n){(0,ar.x1)(H1.tF,"Failed to find selected node to update",void 0,{reportAsSentryError:!0});return}this.appModel.activeCanvasEditModeType===eU.m1T.TEXT&&((0,eV.wr)(),eU.Egt.setSelectedNodeAndCanvas(t,!1)),lT.Y5.updateSelectionProperties({..."function"==typeof e.properties?e.properties(n):e.properties},{shouldCommit:Vy.zk.YES,editScopeType:eU.zkO.ONBOARDING});return}case Vp.HQ.SCROLL_PROPERTIES_PANEL:(0,H1.$1)(e.value);return;case Vp.HQ.FOCUS_INPUT:{let t=document.querySelector(e.selector);t?t.focus():(0,ar.x1)(H1.tF,"Failed to find input to focus",{selector:e.selector},{reportAsSentryError:!0});return}case Vp.HQ.SET_VIEWPORT_FRAME_TYPE:this.setCursorBotOverlayType(e.viewportFrameType);return}};await n();let a=e.additionalDelay||0;e.type===Vp.HQ.SET_CHAT&&(a+=35*e.message.length),a>0&&await this.waitForDuration(a,e.type===Vp.HQ.SET_CHAT),await (null==(t=e.callback)?void 0:t.call(e,this.dispatch))}}function Vw(){let[e,t]=(0,ef.fp)(H0.jr),[n,a]=(0,ef.fp)(H0.Sf),r=(0,e_.Xr)(H0.H7),l=(0,e_.Xr)(H0.nG),i=(0,e_.Xr)(H0.Ds),o=(0,e_.Xr)(H0.Dh),s=(0,e_.Xr)(H0.a8),c=(0,e_.Xr)(H0.iB),d=(0,e_.Xr)(H0.oO),u=(0,e_.Xr)(H0.$i),m=(0,e_.Xr)(H0.jE),p=!!(0,fQ.f)("cursor_bot_v2_has_greeted_with_wave"),_=Q.useContext(US.kw),f=(0,pn.Z)(),h=(0,$.d4)(e=>e.mirror.sceneGraph),g=(0,$.wA)(),{insertTemplate:E}=(0,ND.Fz)(),v=(0,eF.VW)(),y=(0,eG.J2)((0,eV.aY)()),b=(0,$.d4)(e=>e.mirror.appModel.showUi),C=(0,$.d4)(e=>e.mirror.appModel),w=Q.useRef();return w.current||(w.current=new VC(t,a,l,i,s,c,r,d,o,u,m,p,e,n,()=>_.getViewportInfo(),f,h,{selectedNodeType:null==v?void 0:v.type,isUiShown:b,propertiesPanelTab:y},g,E,C)),Q.useEffect(()=>{var t;null==(t=w.current)||t.updatePositionState(e,n)},[e,n]),Q.useEffect(()=>{var e;null==(e=w.current)||e.updateSceneGraphReference(h)},[h]),Q.useEffect(()=>{var e;null==(e=w.current)||e.updateInfoForSentry({selectedNodeType:null==v?void 0:v.type,isUiShown:b,propertiesPanelTab:y})},[v,y,b]),Q.useEffect(()=>{var e;null==(e=w.current)||e.updateAppModel(C)},[C]),Q.useEffect(()=>{var e;null==(e=w.current)||e.updateHasWaved(p)},[p]),w.current}var VT=n(302245),Vx=n(858383);function VN({isReplay:e,props:t}){let n,a,r,l;let i=(0,fQ.f)("cursor_bot_v2_make_show_me_primary_cta"),o=()=>{var e;null==(e=t.onClickNext)||e.call(t),eU.glU.triggerActionInUserEditScope("set-tool-default",null)},s=t.isFollowUp?(0,eO.t)("cursor_bot.got_it"):(0,eO.t)("tooltips_plus_onboarding.next"),c=t.isFollowUp?c5.c.GOT_IT:c5.c.NEXT;return i?(n={ctaText:e?(0,eO.t)("cursor_bot.show_me_again"):(0,eO.t)("cursor_bot.show_me"),ctaTrackingDescriptor:e?c5.c.SHOW_ME_AGAIN:c5.c.SHOW_ME},a={ctaText:s,ctaTrackingDescriptor:c},r=t.onClickShowMe,l=o):(n={ctaText:s,ctaTrackingDescriptor:c},a={ctaText:e?(0,eO.t)("cursor_bot.show_me_again"):(0,eO.t)("cursor_bot.show_me"),ctaTrackingDescriptor:e?c5.c.SHOW_ME_AGAIN:c5.c.SHOW_ME},r=o,l=t.onClickShowMe),{primaryCtaProps:n,secondaryCtaProps:a,onPrimaryCtaClick:r,onSecondaryCtaClick:l}}var Vk=n(564511);let VS="Watermelon",VI="Cherries",VA={r:1,g:1,b:1,a:1},VP={r:237/255,g:239/255,b:228/255,a:1},VO={r:225/255,g:228/255,b:217/255,a:1},VL={family:"Inter",style:"Regular"},VM="Rainier cherries",VD="$3.99 / lb",VR="Grown in Linden, CA",VF="Semi Bold",VB="Italic",VU="Roboto Serif",VH={r:71/255,g:103/255,b:48/255,a:1},VV={r:116/255,g:121/255,b:109/255,a:1},VG={value:130/1.21,units:"PERCENT"},VK={value:150/1.21,units:"PERCENT"};function VW(e,t){return!(!VY(e)||!(0,eW.cy)(e=>e.name===VS,t,e)||(0,eW.cy)(e=>e.name===VI,t,e))}function Vz(e,t){return!!function(e){let t=e.parentNode;return"FRAME"===e.type&&e.name===VI&&395===e.absoluteBoundingBox.w&&416===e.absoluteBoundingBox.h&&!!t&&VY(t)}(e)&&(void 0===t||e.childrenGuids.length===t)}function Vj(e,t){var n,a,r,l;return!!(Vz(e,t)&&0===e.cornerRadius&&(null==(a=null==(n=e.strokePaints)?void 0:n.data)?void 0:a.length)===0&&(0,Vk.Vm)(null==(l=null==(r=e.fillPaints)?void 0:r.data[0])?void 0:l.color,VA))}function VY(e){return!!e&&"FRAME"===e.type&&"Products"===e.name&&1440===e.absoluteBoundingBox.w&&900===e.absoluteBoundingBox.h}function VZ(e){return[{type:"SOLID",color:e,blendMode:"NORMAL",opacity:1,visible:!0}]}function VX(e){return"FRAME"===e.type&&e.absoluteBoundingBox.w>=90&&!!e.parentNode&&0===e.childrenGuids.length}let Vq="Hello";function VJ(e,t){if(void 0!==t&&e.name.toLowerCase()!==t.toLowerCase()||"TEXT"!==e.type||12!==e.fontSize||e.fontName.family!==VL.family||e.fontName.style!==VL.style)return!1;let n=e.parentNode;return!!n&&Vj(n,4)}function VQ(e,t){var n,a;let r=Vp.wn.CREATE_FRAME,{tutorialPlayedUserFlag:l,stepCompletedUserFlag:i}=(0,H1.Of)(r,t);return{name:r,tutorialPlayedUserFlag:l,stepCompletedUserFlag:i,duration:t?8900:5200,startingState:t?{centerNodeMatcher:VW,resetStartingState:{hubFileId:null==(a=null==(n=(0,eo.Ay)())?void 0:n.cursor_bot)?void 0:a.product_page_hub_file_id,nodeWidth:1440,nodeHeight:900}}:void 0,steps:function(e,t){let n=[{type:Vp.HQ.SET_CHAT,message:"Just click and drag, like this.",additionalDelay:600},{type:Vp.HQ.CHANGE_TOOL,toolType:eU.NLJ.FRAME}];return t?n.push({type:Vp.HQ.INSERT_NODE,payload:{nodeType:"FRAME",width:395,height:416},nodeName:VI,locationType:Vp.bn.INSIDE_SCENE_NODE,location:{parentMatcher:VW,offsetX:523,offsetY:285},nodeNameForLogging:Vp.Le.PRODUCT_FRAME_CHERRIES_FRAME,additionalDelay:1200,cursorMovementAnimationDuration:600,nodeDrawingAnimationDuration:1500},{type:Vp.HQ.SET_CHAT,message:"Then add elements into frames, like images.",additionalDelay:700},{type:Vp.HQ.INSERT_NODE,locationType:Vp.bn.INSIDE_SCENE_NODE,location:{parentMatcher:e=>Vj(e,0)},payload:{nodeType:"RECTANGLE",fillType:"image",imgSrc:"https://static.figma.com/uploads/eccc694a7069c9cafd11d1b91b27e0a5c5e7a394",width:395,height:310},nodeName:"Image",nodeNameForLogging:Vp.Le.CHERRIES_FRAME_CHERRIES_IMAGE,additionalDelay:1e3,cursorMovementAnimationDuration:600,cursorPosition:Vp.$2.BOTTOM_RIGHT},{type:Vp.HQ.SELECT_SCENE_NODE,meetsConditions:e=>Vj(e,1),nodeNameForLogging:Vp.Le.PRODUCT_FRAME_CHERRIES_FRAME}):n.push({type:Vp.HQ.INSERT_NODE,payload:{nodeType:"FRAME",width:117,height:48},locationType:Vp.bn.DEFAULT,nodeName:"Frame 1",nodeNameForLogging:Vp.Le.NO_BASICS_FILE_FRAME,additionalDelay:1500,cursorMovementAnimationDuration:500,nodeDrawingAnimationDuration:1500}),n.push({type:Vp.HQ.CLEAR_CHAT}),n}(0,t),TooltipElement:t=>{let{primaryCtaProps:n,secondaryCtaProps:a,onPrimaryCtaClick:r,onSecondaryCtaClick:l}=VN({isReplay:e,props:t});return Q.createElement(Vx.e,{onPrimaryCtaClick:r,onSecondaryCtaClick:l,primaryCtaProps:n,secondaryCtaProps:a,onClose:t.onClickClose,bodyText:(0,eO.t)("cursor_bot.a_frame_will_hold_the_rest_of_your_design"),fromCursorBot:!0})}}}var V$=n(999626);function V0(e){let t=(0,$.d4)(e=>e.isFullscreenDocumentLoaded);return Q.useEffect(()=>{t&&eU.glU.triggerAction("set-tool-type",null)},[t]),Q.createElement(V$.b,{dismissModal:e.onClose,disableHighlight:!0,targetKey:"tool-type-onboarding",title:Q.createElement(eO.Tx,{id:"cursor_bot.add_words_where_needed"}),trackingContextName:"Cursor Bot Create Text Step",lowerLeftText:Q.createElement(t6.$z,{onClick:e.onBackCtaClick,className:tw.cx.textInherit__DEPRECATED.bgTransparent.$,trackingProperties:{ctaTrackingDescriptor:c5.c.BACK}},Q.createElement(eO.Tx,{id:"general.back"})),onPrimaryCtaClick:e.onPrimaryCtaClick,primaryCtaProps:e.primaryCtaProps,onSecondaryCtaClick:e.onSecondaryCtaClick,secondaryCtaProps:e.secondaryCtaProps,pointsTo:"toolbar"},Q.createElement(eO.Tx,{id:"cursor_bot.all_designs_need_words_so_create_a_text_layer_anywhere_and_start_typing_simple_as_that"}))}function V1(e,t,n){var a,r;let l=Vp.wn.CREATE_TEXT,{tutorialPlayedUserFlag:i,stepCompletedUserFlag:o}=(0,H1.Of)(l,t);return{name:l,tutorialPlayedUserFlag:i,stepCompletedUserFlag:o,duration:t?11400:6600,startingState:t?{centerNodeMatcher:e=>Vj(e,1),resetStartingState:{hubFileId:null==(r=null==(a=(0,eo.Ay)())?void 0:a.cursor_bot)?void 0:r.ginger_no_text_hub_file_id,nodeWidth:1440,nodeHeight:900}}:{centerNodeMatcher:VX},steps:function({shouldSkipYup:e,isInBasicsFile:t}){let n=[];return t?n.push({type:Vp.HQ.SET_CHAT,message:(e?"":"Yup: ")+"Just click into your frame and type.",additionalDelay:500}):n.push({type:Vp.HQ.SET_CHAT,message:(e?"":"Yup: ")+"Just click into your frame and type.",additionalDelay:500,hasBackupMessage:!0,shouldShowBackupMessage:e=>void 0===(0,eW.cy)(VX,e),backupMessage:(e?"":"Yup: ")+"Just click to add a text node and type."}),n.push({type:Vp.HQ.CHANGE_TOOL,toolType:eU.NLJ.TYPE,additionalDelay:1200}),t?n.push({type:Vp.HQ.INSERT_NODE,nodeName:VM,payload:{nodeType:"TEXT",text:VM,height:16},locationType:Vp.bn.INSIDE_SCENE_NODE,location:{parentMatcher:e=>Vj(e,1),offsetX:24,offsetY:334},cursorPosition:Vp.$2.BOTTOM_LEFT,nodeNameForLogging:Vp.Le.CHERRIES_FRAME_CHERRIES_TEXT,cursorMovementAnimationDuration:600,additionalDelay:400},{type:Vp.HQ.CHANGE_TOOL,toolType:eU.NLJ.TYPE,additionalDelay:300},{type:Vp.HQ.INSERT_NODE,nodeName:VD,payload:{nodeType:"TEXT",text:VD,height:16},locationType:Vp.bn.INSIDE_SCENE_NODE,location:{parentMatcher:e=>Vj(e,2),offsetX:316,offsetY:334},cursorPosition:Vp.$2.BOTTOM_LEFT,nodeNameForLogging:Vp.Le.CHERRIES_FRAME_PRICE_TEXT,additionalDelay:400},{type:Vp.HQ.CHANGE_TOOL,toolType:eU.NLJ.TYPE,additionalDelay:300},{type:Vp.HQ.INSERT_NODE,nodeName:VR,payload:{nodeType:"TEXT",text:VR,height:16},locationType:Vp.bn.INSIDE_SCENE_NODE,location:{parentMatcher:e=>Vj(e,3),offsetX:24,offsetY:368},cursorPosition:Vp.$2.BOTTOM_LEFT,nodeNameForLogging:Vp.Le.CHERRIES_FRAME_GROWN_TEXT,additionalDelay:1e3}):n.push({type:Vp.HQ.INSERT_NODE,nodeName:Vq,payload:{nodeType:"TEXT",text:Vq,width:29,height:16,shouldCenterAlign:!0,typingDurationPerCharMs:200},cursorPosition:Vp.$2.BOTTOM_LEFT,locationType:Vp.bn.INSIDE_SCENE_NODE,location:{parentMatcher:VX,offsetX:-14.5,offsetY:-7.5,shouldPositionRelativeToCenterOfParent:!0,useDefaultLocationIfParentNotFound:!0},nodeNameForLogging:Vp.Le.NO_BASICS_FILE_TEXT,cursorMovementAnimationDuration:600,additionalDelay:1500}),n}({shouldSkipYup:e||!n,isInBasicsFile:t}),TooltipElement:t=>{let{primaryCtaProps:n,secondaryCtaProps:a,onPrimaryCtaClick:r,onSecondaryCtaClick:l}=VN({isReplay:e,props:t});return Q.createElement(V0,{onPrimaryCtaClick:r,onSecondaryCtaClick:l,primaryCtaProps:n,secondaryCtaProps:a,onClose:t.onClickClose,onBackCtaClick:t.onClickBack})}}}var V2=n(527808),V5=n(722432);function V4(e,t){var n,a;let r=Vp.wn.FORMAT_FRAME,{tutorialPlayedUserFlag:l,stepCompletedUserFlag:i}=(0,H1.Of)(r,t);return{name:r,tutorialPlayedUserFlag:l,stepCompletedUserFlag:i,duration:t?17500:9400,steps:function(e){let t=[];return t.push({type:Vp.HQ.SET_PROPERTIES_PANEL_TAB,tab:eU.FAf.DESIGN}),e?t.push({type:Vp.HQ.SELECT_SCENE_NODE,meetsConditions:e=>Vj(e,4),nodeNameForLogging:Vp.Le.PRODUCT_FRAME_CHERRIES_FRAME,additionalDelay:400}):t.push({type:Vp.HQ.SELECT_SCENE_NODE,meetsConditions:e=>"FRAME"===e.type,nodeNameForLogging:Vp.Le.NO_BASICS_FILE_FRAME,additionalDelay:400,prioritizeSelectedNode:!0}),t.push({type:Vp.HQ.SET_CURSOR_DIRECTION,direction:Vp.zu.RIGHT},{type:Vp.HQ.SET_CHAT,message:"Change how your frames look here.",additionalDelay:500},{type:Vp.HQ.TARGET_DOM_NODE,dataOnboardingKey:V2.W,offset:{x:-28,y:132},position:{x:Vp.GF.LEFT,y:Vp.NI.TOP},cursorBotMovementAnimationDuration:600},{type:Vp.HQ.SET_VIEWPORT_FRAME_TYPE,viewportFrameType:Vp.JJ.PROPERTIES_PANEL,additionalDelay:1500},{type:Vp.HQ.SET_CHAT,message:e?"For example: Add color...":"For example: Their color!",additionalDelay:1e3},{type:Vp.HQ.TARGET_DOM_NODE,dataOnboardingKey:(0,cJ.Lh)(cJ.D8.PROPERTIES_PANEL_TITLE,"fill"),position:{x:Vp.GF.LEFT,y:Vp.NI.CENTER},additionalDelay:500,cursorBotMovementAnimationDuration:1e3},{type:Vp.HQ.UPDATE_SELECTED_NODE_PROPERTIES,properties:()=>({fillPaints:VZ(e?VP:function(){let e=["r","g","b"].map(e=>({c:e,sort:Math.random()})).sort((e,t)=>e.sort-t.sort).map(({c:e})=>e);return{r:0,g:86/255,b:65/255,[e[0]]:0,[e[1]]:86/255,[e[2]]:Math.floor(86*Math.random())/255,a:1}}())}),additionalDelay:0},{type:Vp.HQ.FOCUS_INPUT,selector:`[data-onboarding-key="${(0,cJ.Lh)(cJ.D8.PAINT_PANEL_ROW,"paint-1-0")}"] input`,additionalDelay:1500},{type:Vp.HQ.CLEAR_CHAT}),e&&t.push({type:Vp.HQ.TARGET_DOM_NODE,dataOnboardingKey:(0,cJ.Lh)(cJ.D8.PROPERTIES_PANEL_TITLE,"stroke"),position:{x:Vp.GF.LEFT,y:Vp.NI.CENTER},cursorBotMovementAnimationDuration:300,additionalDelay:300},{type:Vp.HQ.SET_CHAT,message:"A border...",additionalDelay:500},{type:Vp.HQ.UPDATE_SELECTED_NODE_PROPERTIES,properties:{strokePaints:VZ(VO),strokeWeight:2},additionalDelay:10},{type:Vp.HQ.FOCUS_INPUT,selector:`[data-onboarding-key="${(0,cJ.Lh)(cJ.D8.PAINT_PANEL_ROW,"paint-2-0")}"] input`,additionalDelay:1500},{type:Vp.HQ.SCROLL_PROPERTIES_PANEL,value:0,additionalDelay:500},{type:Vp.HQ.CLEAR_CHAT},{type:Vp.HQ.TARGET_DOM_NODE,dataOnboardingKey:(0,cJ.Lh)(cJ.D8.SCRUBBABLE_CONTROL,"corner-radius"),offset:{x:-25,y:5},cursorBotMovementAnimationDuration:700,additionalDelay:300},{type:Vp.HQ.SET_CHAT,message:"Or rounded corners!",additionalDelay:500},{type:Vp.HQ.UPDATE_SELECTED_NODE_PROPERTIES,properties:{cornerRadius:24},additionalDelay:10},{type:Vp.HQ.FOCUS_INPUT,selector:`[data-onboarding-key="${(0,cJ.Lh)(cJ.D8.SCRUBBABLE_CONTROL,"corner-radius")}"] input`,additionalDelay:2500},{type:Vp.HQ.CLEAR_CHAT}),t}(t),startingState:t?{centerNodeMatcher:e=>Vj(e,4),resetStartingState:{hubFileId:null==(a=null==(n=(0,eo.Ay)())?void 0:n.cursor_bot)?void 0:a.ginger_formatted_text_hub_file_id,nodeHeight:900,nodeWidth:1440}}:{centerNodeMatcher:e=>"FRAME"===e.type},TooltipElement:n=>{let{primaryCtaProps:a,secondaryCtaProps:r,onPrimaryCtaClick:l,onSecondaryCtaClick:i}=VN({isReplay:e,props:n});return Q.createElement(V5.Z,{onPrimaryCtaClick:l,primaryCtaProps:a,secondaryCtaProps:r,onSecondaryCtaClick:i,lowerLeftText:n.onClickBack?Q.createElement(t6.$z,{onClick:n.onClickBack,className:tw.cx.textInherit__DEPRECATED.bgTransparent.$,trackingProperties:{ctaTrackingDescriptor:c5.c.BACK}},Q.createElement(eO.Tx,{id:"cursor_bot.back"})):void 0,onClose:n.onClickClose,skip:n.skip,frameNodeMatcher:t?e=>(0,eW.WY)(e=>Vz(e,4),e)||(0,eW.cy)((e,t)=>(function(e,t){let n=e.parentNode;return"FRAME"===e.type&&e.name===VS&&!!n&&VW(n,t)})(e,t),e):void 0,title:(0,eO.t)("cursor_bot.make_it_look_just_right"),bodyText:t?(0,eO.t)("cursor_bot.design_panel_can_change_objects"):(0,eO.t)("cursor_bot.design_panel_is_key"),fromCursorBot:!0,isFollowUp:n.isFollowUp})}}}var V3=n(903533);function V6(e,t){var n,a;let r=Vp.wn.FORMAT_TEXT,{tutorialPlayedUserFlag:l,stepCompletedUserFlag:i}=(0,H1.Of)(r,t);return{name:r,tutorialPlayedUserFlag:l,stepCompletedUserFlag:i,duration:t?10500:8500,steps:function(e){let t=[];return t.push({type:Vp.HQ.SET_PROPERTIES_PANEL_TAB,tab:eU.FAf.DESIGN}),e&&t.push({type:Vp.HQ.SELECT_SCENE_NODE,meetsConditions:e=>VJ(e,VR),prioritizeSelectedNode:!0,nodeNameForLogging:Vp.Le.CHERRIES_FRAME_GROWN_TEXT,additionalDelay:1e3},{type:Vp.HQ.TARGET_DOM_NODE,dataOnboardingKey:V3.B,offset:{x:-150,y:-50},cursorBotMovementAnimationDuration:800},{type:Vp.HQ.SET_CHAT,message:"Change how your text looks here.",additionalDelay:1500}),t.push({type:Vp.HQ.SET_CURSOR_DIRECTION,direction:Vp.zu.RIGHT},{type:Vp.HQ.SET_CHAT,message:"Pick your style, size, alignment, and more.",additionalDelay:1200}),e?t.push({type:Vp.HQ.SELECT_SCENE_NODE,meetsConditions:e=>VJ(e,VM),nodeNameForLogging:Vp.Le.CHERRIES_FRAME_CHERRIES_TEXT,prioritizeSelectedNode:!0},{type:Vp.HQ.TARGET_DOM_NODE,dataOnboardingKey:(0,cJ.Lh)(cJ.D8.TEXT_PANEL,"font-style-button"),position:{x:Vp.GF.LEFT,y:Vp.NI.CENTER},cursorBotMovementAnimationDuration:500,additionalDelay:1e3},{type:Vp.HQ.UPDATE_SELECTED_NODE_PROPERTIES,properties:{fontSize:20,fontStyle:VF,lineHeight:VG}},{type:Vp.HQ.SELECT_SCENE_NODE,meetsConditions:e=>VJ(e,VD),nodeNameForLogging:Vp.Le.CHERRIES_FRAME_PRICE_TEXT},{type:Vp.HQ.UPDATE_SELECTED_NODE_PROPERTIES,properties:{fillPaints:VZ(VH),fontSize:20,fontStyle:VF,lineHeight:VG,textAlignHorizontal:"RIGHT"}},{type:Vp.HQ.SELECT_SCENE_NODE,meetsConditions:e=>VJ(e,VR),nodeNameForLogging:Vp.Le.CHERRIES_FRAME_GROWN_TEXT},{type:Vp.HQ.UPDATE_SELECTED_NODE_PROPERTIES,properties:{fillPaints:VZ(VV),fontSize:16,lineHeight:VK},additionalDelay:1500}):t.push({type:Vp.HQ.TARGET_DOM_NODE,dataOnboardingKey:(0,cJ.Lh)(cJ.D8.TEXT_PANEL,"font-picker-button"),position:{x:Vp.GF.LEFT,y:Vp.NI.CENTER},cursorBotMovementAnimationDuration:600,additionalDelay:500},{type:Vp.HQ.UPDATE_SELECTED_NODE_PROPERTIES,properties:e=>({fontFamily:e.fontName.family===VU?VL.family:VU}),additionalDelay:300},{type:Vp.HQ.TARGET_DOM_NODE,dataOnboardingKey:(0,cJ.Lh)(cJ.D8.TEXT_PANEL,"font-style-button"),position:{x:Vp.GF.LEFT,y:Vp.NI.CENTER},cursorBotMovementAnimationDuration:600,additionalDelay:500},{type:Vp.HQ.UPDATE_SELECTED_NODE_PROPERTIES,properties:e=>({fontStyle:e.fontName.style===VB?VL.style:VB}),additionalDelay:300},{type:Vp.HQ.TARGET_DOM_NODE,dataOnboardingKey:(0,cJ.Lh)(cJ.D8.SCRUBBABLE_CONTROL,"font-size"),position:{x:Vp.GF.LEFT,y:Vp.NI.CENTER},cursorBotMovementAnimationDuration:600},{type:Vp.HQ.FOCUS_INPUT,selector:`[data-onboarding-key="${(0,cJ.Lh)(cJ.D8.SCRUBBABLE_CONTROL,"font-size")}"] input`,additionalDelay:500},{type:Vp.HQ.UPDATE_SELECTED_NODE_PROPERTIES,properties:e=>({fontSize:16===e.fontSize?12:16}),additionalDelay:1500}),t.push({type:Vp.HQ.CLEAR_CHAT}),t}(t),startingViewportFrameType:t?Vp.JJ.TEXT_PANEL:Vp.JJ.PROPERTIES_PANEL,startingState:t?{centerNodeMatcher:e=>(function(e,t){if(!Vj(e,4))return!1;for(let t of e.childrenNodes)if("TEXT"===t.type&&!VJ(t))return!1;return!0})(e,0),resetStartingState:{hubFileId:null==(a=null==(n=(0,eo.Ay)())?void 0:n.cursor_bot)?void 0:a.ginger_hub_file_id,nodeHeight:900,nodeWidth:1440}}:{centerNodeMatcher:e=>"TEXT"===e.type},TooltipElement:n=>{let a=(0,eF.VW)(),{primaryCtaProps:r,secondaryCtaProps:l,onPrimaryCtaClick:i,onSecondaryCtaClick:o}=VN({isReplay:e,props:n});return Q.createElement(V3.P,{onPrimaryCtaClick:i,primaryCtaProps:r,secondaryCtaProps:l,onSecondaryCtaClick:o,lowerLeftText:n.onClickBack?Q.createElement(t6.$z,{onClick:n.onClickBack,className:tw.cx.textInherit__DEPRECATED.bgTransparent.$,trackingProperties:{ctaTrackingDescriptor:c5.c.BACK}},Q.createElement(eO.Tx,{id:"cursor_bot.back"})):void 0,onClose:n.onClickClose,getNodeToSelect:t?()=>(0,eW.WY)(e=>"TEXT"===e.type&&(e.name===VR||"Grown in Tracy, CA"===e.name),tN.qo.instance):()=>(null==a?void 0:a.type)==="TEXT"?a:(0,eW.WY)(e=>"TEXT"===e.type,tN.qo.instance),skip:n.skip,title:t?(0,eO.t)("cursor_bot.pick_the_perfect_font"):(0,eO.t)("cursor_bot.and_pick_the_perfect_font"),bodyText:(0,eO.t)("cursor_bot.use_the_design_panel_to_turn_basic_text_into_titles"),fromCursorBot:!0,isFollowUp:n.isFollowUp})}}}let V7=(0,VT.Mz)([e=>e.userFlags,(e,t)=>t],(e,t)=>t.reduce((t,n)=>({...t,[n.name]:!!e[n.stepCompletedUserFlag]}),{}));var V8=((P=V8||{}).PanAndZoom="pan_and_zoom",P.YoureAllSet="youre_all_set",P),V9=n(813169),Ge=n(423095),Gt=n(246497);let Gn=Q.memo(({currentTutorial:e,stateManager:t})=>{let n;let a=(0,ef.md)(H0.a8),r=(0,ef.md)(H0.jE),l=Q.useCallback(()=>{let e=s.current;return e?Math.min(Math.round(e/r*100),100):0},[r]);Q.useEffect(()=>{let n=n=>{n&&27===n.keyCode&&(0,H1.XC)(a)&&((0,er.sx)("Cursor Bot Tutorial Canceled via Escape",{tutorialName:e.name}),t.stopCurrentTutorial({timeElapsed:s.current,tutorialPercentageComplete:l(),tutorialName:e.name,stopTrigger:Vp.mf.ESC_KEY}))};return window.addEventListener("keydown",n),()=>window.removeEventListener("keydown",n)},[a,t,l,e.name]);let[i,o]=(0,ef.fp)(H0.mH),s=Q.useRef(0),c=Q.useRef();if(Q.useEffect(()=>{if(!(0,H1.XC)(a)){s.current=0,clearInterval(c.current),c.current=void 0;return}let e=setInterval(()=>s.current+=17,17);return c.current=e,()=>clearInterval(e)},[a]),(0,H1.XC)(a)){let e=l(),t=(0,V9.keyframes)({from:{backgroundPosition:`${100-e}% center`},to:{backgroundPosition:"left"}}),a=r-s.current;n={animation:`${t} ${a}ms linear`}}let d=(0,ez.ni)(),u=Q.useMemo(()=>({top:d.y+V_.hH+4}),[d.y]);return Q.createElement("div",{className:Gt.CL,style:u},Q.createElement("div",{className:ea()({[Ge.e]:i}),onAnimationEnd:()=>{o(!1)}},Q.createElement("div",{className:Gt.KB,style:n},Q.createElement(nc.Kz,{multiple:1,direction:"x"}),Q.createElement("div",null,e.name),Q.createElement(nc.Kz,{multiple:1,direction:"x"}),Q.createElement(t6.$z,{className:Gt.gd,onClick:()=>{t.stopCurrentTutorial({timeElapsed:s.current,tutorialPercentageComplete:l(),tutorialName:e.name,stopTrigger:Vp.mf.STOP_BTN})},"data-tooltip-type":nO.Ib.TEXT,"data-tooltip":(0,eO.t)("cursor_bot.stop_tutorial"),trackingProperties:{trackingDescriptor:c5.c.STOP_TUTORIAL,tutorialName:e.name},"aria-label":(0,eO.t)("cursor_bot.stop_tutorial")},Q.createElement(eO.Tx,{id:"collaboration.spotlight.bell.presenter.stop"})))))}),Ga="create_frame_animation--frameCornerSquare--TEcO4";function Gr(){let e=(0,ez._X)({subscribeToUpdates_expensive:!1}),t=(0,ef.md)(H0.Dh);if(null==t)return null;let{x:n,y:a,width:r,height:l,duration:i}=t,o=(0,ez.Yb)(e,{x:n,y:a,width:r,height:l}),s=e.x+o.x,c=e.y+o.y;return Q.createElement("div",{style:{top:c,left:s,width:`${o.width}px`,height:`${o.height}px`,position:"absolute"}},Q.createElement("div",{style:{border:"1px solid #4497F7",animationDuration:`${i}ms`},className:"create_frame_animation--animationFrame--4fuzR"},Q.createElement("div",{style:{top:-3,left:-3,background:"#ffffff"},className:Ga}),Q.createElement("div",{style:{top:-3,left:"calc(100% - 3px)",background:"#ffffff"},className:ea()(Ga)}),Q.createElement("div",{style:{top:"calc(100% - 3px)",left:"calc(100% - 3px)",background:"#ffffff"},className:Ga}),Q.createElement("div",{style:{top:"calc(100% - 3px)",left:-3,background:"#ffffff"},className:Ga})))}function Gl(){var e;let{isShowing:t,show:n,complete:a,uniqueId:r}=(0,tp.e)({overlay:tv.SyB,priority:th.N.OVERRIDING_MODAL}),l=(0,$.wA)(),i=(0,$.Pj)(),o=(0,$.d4)(e=>e.isFullscreenDocumentLoaded),s=(0,$.d4)(e=>e.mirror.appModel.multiplayerSessionState===eU.kul.JOINED),c=Vw(),d=(0,ef.md)(H0.a8),u=(0,fQ.f)("has_cursor_bot_onboarding_v2");!function(e,t,n){let a=(0,at.iZ)(),r=(0,$.wA)(),l=(0,fQ.f)("has_cursor_bot_onboarding_v2"),i=(0,t_.Cq)({useSinatraType:!0}),o=(0,cJ.WO)(null==a?void 0:a.id,i,["exp_cursor_bot_onboarding"]),s=e=>{let a={...function(e){let t={format_text_step_shown:!1,design_panel_step_shown:!1};for(let n of(e?t.cursor_bot_v2__basics_onboarded=!1:(t.has_zoomed_in_design_file=!1,t.has_panned_in_design_file=!1,t.cursor_bot_v2__basics_onboarded=!1,t.cursor_bot_v2__no_basics_onboarded=!1),VE)){let{tutorialPlayedUserFlag:a,stepCompletedUserFlag:r}=(0,H1.Of)(n,e);t[a]=!1,t[r]=!1}return t}(o),cursor_bot_v2__basics_file__started_flow:!1,cursor_bot_v2_has_greeted_with_wave:!1};e&&(a.has_cursor_bot_onboarding_v2=!0),r(tB.b(a)),t||n()};(0,Eo.E)(e,Vg.Wl,()=>{(null==i?void 0:i.editor_type)===dV._Y.DESIGN?s(!0):r(Dv.s.error("Cursor Bot can only be run in Figma design."))}),(0,Eo.E)(e,"Reset Onboarding",()=>{l&&(null==i?void 0:i.editor_type)===dV._Y.DESIGN&&s()})}(r,t,n);let[m,p]=Q.useState(Vh.en.FORWARD),_=function(){let e=(0,fQ.f)("has_cursor_bot_onboarding_v2"),t=(0,fQ.f)("cursor_bot_v2__basics_file__started_flow"),n=(0,cJ.Ai)(["exp_cursor_bot_onboarding"]),a=(0,cJ.jm)(n),r=function(e){let t=!!(0,fQ.f)("cursor_bot_v2_has_greeted_with_wave"),n=!!(0,fQ.f)((0,H1.Of)(Vp.wn.CREATE_FRAME,e).tutorialPlayedUserFlag),a=!!(0,fQ.f)((0,H1.Of)(Vp.wn.FORMAT_FRAME,e).tutorialPlayedUserFlag),r=!!(0,fQ.f)((0,H1.Of)(Vp.wn.CREATE_TEXT,e).tutorialPlayedUserFlag),l=!!(0,fQ.f)((0,H1.Of)(Vp.wn.FORMAT_TEXT,e).tutorialPlayedUserFlag);return(0,Q.useMemo)(()=>e?[VQ(n,e),V1(r,e,t),V6(l,e),V4(a,e)]:[VQ(n,e),V4(a,e),V1(r,e,t),V6(l,e)],[e,t,n,r,l,a])}(n),l=(0,$.d4)(e=>V7(e,r));if(!e||a||!n&&t)return null;let i=0;if(r.forEach(e=>{l[e.name]&&(i+=1)}),i>=r.length)return n?"youre_all_set":"pan_and_zoom";let o={...r[i]};return i>0&&(o.previousTutorialCompleteUserFlag=r[i-1].stepCompletedUserFlag),o}(),f=(0,cJ.Ai)(["exp_cursor_bot_onboarding"]),h=(0,cJ.Y3)(),g=(0,cJ.jm)(f),E=h||g,v=null==(e=(0,t_.q5)())?void 0:e.canEdit;Q.useEffect(()=>{!E&&!t&&u&&_&&o&&s&&v&&n()},[E,t,n,u,_,o,s,v]),Q.useEffect(()=>{t&&(g||!_)&&a()},[t,a,g,_]);let y=(0,fQ.f)("cursor_bot_v2__basics_file__started_flow");if(Q.useEffect(()=>{t&&f&&!y&&l(tB.b({cursor_bot_v2__basics_file__started_flow:!0}))},[l,f,t,y]),!t||!_)return null;let b=()=>{f?l(tB.b({cursor_bot_v2__basics_onboarded:!0})):l(tB.b({cursor_bot_v2__no_basics_onboarded:!0})),a()};if(_===V8.YoureAllSet)return Q.createElement(Vf.J,{onPrimaryCtaClick:()=>{let e=(0,wY.xA)(i.getState(),w0.ai.NEW_TAB,"drafts",{from:w0.f6.CURSOR_BOT_END_MODAL,selectedView:i.getState().selectedView},dV._Y.DESIGN,void 0);l(RM.uM(e)),b()},onSecondaryCtaClick:b,onClose:b});if(_===V8.PanAndZoom)return Q.createElement(DW.iF,{markComplete:b});if(d===Vp.h0.PLAYING)return Q.createElement(Gi,{cursorBotStateManager:c,currentTutorial:_});let C=()=>{_.previousTutorialCompleteUserFlag&&(p(Vh.en.BACKWARD),l(tB.b({[_.previousTutorialCompleteUserFlag]:!1})))},w=()=>{p(Vh.en.FORWARD),l(tB.b({[_.stepCompletedUserFlag]:!0}))};return Q.createElement(_.TooltipElement,{onClickShowMe:()=>c.runTutorial(_),onClickNext:w,onClickClose:b,onClickBack:C,skip:m===Vh.en.BACKWARD?C:w})}function Gi({cursorBotStateManager:e,currentTutorial:t}){return Q.createElement(Q.Fragment,null,Q.createElement(Vg.Yh,null),Q.createElement(Gn,{currentTutorial:t,stateManager:e}),Q.createElement(Gr,null),Q.createElement(V_.Qe,null))}function Go(){let{uniqueId:e,show:t,isShowing:n,complete:a}=(0,tp.e)({overlay:tv.a9B,priority:th.N.OVERRIDING_MODAL}),r=(0,$.wA)(),l=(0,fQ.f)("cursor_bot_v2__no_basics_file__played_frame_formatting"),i=(0,fQ.f)("design_panel_step_shown"),o=(0,fQ.f)("cursor_bot_v2__basics_file__started_flow"),s=(0,cJ.Ai)(["exp_cursor_bot_onboarding"]),c=Vw();(0,Eo.E)(e,"create_frame",Q.useCallback(()=>{!l||i||o||s||n||t()},[i,o,n,l,t,s]));let d=(0,ef.md)(H0.a8),u=!!(0,fQ.f)((0,H1.Of)(Vp.wn.FORMAT_FRAME,!1).tutorialPlayedUserFlag),m=Q.useMemo(()=>V4(u,!1),[u]);if(!n)return null;if(d===Vp.h0.PLAYING)return Q.createElement(Gi,{cursorBotStateManager:c,currentTutorial:m});let p=()=>{r(tB.b({design_panel_step_shown:!0})),a()};return Q.createElement(m.TooltipElement,{onClickNext:p,onClickShowMe:()=>{c.runTutorial(m)},onClickClose:p,skip:p,isFollowUp:!0})}function Gs(){let{uniqueId:e,show:t,isShowing:n,complete:a}=(0,tp.e)({overlay:tv.ENg,priority:th.N.OVERRIDING_MODAL}),r=(0,$.wA)(),l=(0,fQ.f)("cursor_bot_v2__no_basics_file__played_text_formatting"),i=(0,fQ.f)("format_text_step_shown"),o=(0,fQ.f)("cursor_bot_v2__basics_file__started_flow"),s=Vw(),c=(0,cJ.Ai)(["exp_cursor_bot_onboarding"]),[d,u]=Q.useState(!1),m=(0,eF.VW)(),p=(0,$.d4)(e=>e.mirror.appModel.activeCanvasEditModeType);(0,Eo.E)(e,"create_text",()=>{u(!0)}),Q.useEffect(()=>{!l||i||o||c||n||!d||(null==m?void 0:m.type)!=="TEXT"||p!==eU.m1T.DESIGN_LAYOUT||n||t()},[m,d,n,t,p,l,i,o,c]);let _=!!(0,fQ.f)((0,H1.Of)(Vp.wn.FORMAT_TEXT,!1).tutorialPlayedUserFlag),f=Q.useMemo(()=>V6(_,!1),[_]),h=(0,ef.md)(H0.a8);if(!n)return null;if(h===Vp.h0.PLAYING)return Q.createElement(Gi,{cursorBotStateManager:s,currentTutorial:f});let g=()=>{r(tB.b({format_text_step_shown:!0})),a()};return Q.createElement(f.TooltipElement,{onClickNext:g,onClickShowMe:()=>{s.runTutorial(f)},onClickClose:g,skip:g,isFollowUp:!0})}function Gc(){let e=(0,tp.e)({overlay:tv.CVA,priority:th.N.OVERRIDING_MODAL}),t=(0,fQ.f)("no_figma_basics_tooltips_design_panel_step"),n=(0,fQ.f)("design_panel_step_shown"),a=(0,fQ.f)("started_figma_basics_onboarding"),r=(0,$.wA)(),l=t&&!n&&!a;if((0,Eo.E)(e.uniqueId,"create_frame",Q.useCallback(()=>{l&&!e.isShowing&&e.show()},[e,l])),!e.isShowing)return null;let i=()=>{e.complete(),r(tB.b({design_panel_step_shown:!0}))};return Q.createElement(c9.rq,{onClose:i,title:Q.createElement(eO.Tx,{id:"tooltips_plus_onboarding.change_properties_in_the_design_panel"}),description:Q.createElement(eO.Tx,{id:"tooltips_plus_onboarding.design_panel.description"}),trackingContextName:"Tooltips+ > Reactive Follow Ups > Frame Formatting",isShowing:e.isShowing,targetKey:V2.W,arrowPosition:DK.F_.RIGHT_BODY,onTargetLost:i,emphasized:!0,disableHighlight:!0})}function Gd(){let e=(0,tp.e)({overlay:tv.IQ,priority:th.N.OVERRIDING_MODAL}),t=(0,fQ.f)("no_figma_basics_tooltips_format_text_step"),n=(0,fQ.f)("format_text_step_shown"),a=(0,fQ.f)("started_figma_basics_onboarding"),r=(0,$.wA)(),l=!n&&t&&!a;if((0,Eo.E)(e.uniqueId,"create_text",Q.useCallback(()=>{l&&!e.isShowing&&e.show()},[e,l])),!e.isShowing)return null;let i=()=>{e.complete(),r(tB.b({format_text_step_shown:!0}))};return Q.createElement(c9.rq,{onClose:i,title:Q.createElement(eO.Tx,{id:"tooltips_plus_onboarding.text_formatting.title"}),description:Q.createElement(eO.Tx,{id:"tooltips_plus_onboarding.text_formatting.description"}),trackingContextName:"Tooltips+ > Reactive Follow Ups > Text Formatting",isShowing:e.isShowing,targetKey:V3.B,arrowPosition:DK.F_.RIGHT_BODY,onTargetLost:i,emphasized:!0,disableHighlight:!0})}var Gu=n(394137),Gm=n(841563),Gp=n.n(Gm),G_=n(909021),Gf=n(897844),Gh=n(705582);function Gg(e){let t;let{file:n,org:a,overlay:r}=e,l=(0,G_.B)(n,a.id),i=(0,Q.useRef)(void 0),o=r.complete;if((0,Q.useEffect)(()=>{var e;l&&i.current&&!Gp()(l.filePermissionsData,null==(e=i.current)?void 0:e.filePermissionsData)&&o(),i.current=l},[l,o]),!l)return null;let s=l.isBranch,c=l.branchMatchesRepo,d=l.linkExpiresAt,u=(0,De.Ch)(l.filePermissionsData,e.org),m=(0,Gh.M3)((0,n5.A)(d)),p=!c&&s?Q.createElement(eO.Tx,{id:"link_expired_overlay.different_branch_permissions_header"}):Q.createElement(eO.Tx,{id:"link_expired_overlay.header"});return t=c?Q.createElement(eO.Tx,{id:"link_expired_overlay.same_branch_permissions_body",formattedTimestamp:m,audience:u}):s?Q.createElement(eO.Tx,{id:"link_expired_overlay.different_branch_permissions_body",formattedTimestamp:m,audience:u}):Q.createElement(eO.Tx,{id:"link_expired_overlay.body",formattedTimestamp:m,audience:u}),Q.createElement(c9.rq,{isShowing:r.isShowing,trackingContextName:"Link Expired Overlay",title:p,description:t,targetKey:mM.v4,onClose:r.complete})}let GE=(0,gp.bt)(e=>e.modalShown);function Gv(e){var t;let n=(0,Q.useRef)(null),a=(0,tp.e)({overlay:tv.K_h,priority:th.N.SECONDARY_MODAL}),r=(0,d0.sZ)(),l=(0,ef.md)(t_.yV),i=(null==(t=(0,ef.md)(GE))?void 0:t.type)===Dn.jS;return((0,Eo.E)(a.uniqueId,[Gf.q2],()=>{r&&l&&!a.isShowing&&!i&&a.show()}),(0,Q.useEffect)(()=>(a.isShowing?n.current=setTimeout(()=>{n.current=null,a.complete()},45e3):n.current&&clearTimeout(n.current),()=>{n.current&&clearTimeout(n.current)}),[a]),r&&l)?Q.createElement(Gg,{overlay:a,org:r,file:l}):null}function Gy(e){return Q.createElement("svg",{width:"64",height:"63",viewBox:"0 0 64 63",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Q.createElement("rect",{x:"16.75",y:"9.75",width:"29.6538",height:"43.5",rx:"14.8269",stroke:"var(--color-icon)",strokeWidth:"1.5"}),Q.createElement("rect",{x:"27.1348",y:"18.4043",width:"8.88461",height:"15.8077",rx:"4.44231",fill:"var(--color-icon-brand)",fillOpacity:"whiteboard"===e.editorType?"0.7":"1",stroke:"var(--color-icon)",strokeWidth:"1.5"}),Q.createElement("circle",{cx:"52.7863",cy:"7.78613",r:"6.21283",transform:"rotate(-45 52.7863 7.78613)",stroke:"var(--color-icon)",strokeWidth:"1.5"}),Q.createElement("path",{d:"M57.1794 12.1797L62.3048 17.305",stroke:"var(--color-icon)",strokeWidth:"1.5"}),Q.createElement("path",{d:"M52.7864 4.67871L52.7864 10.8915",stroke:"var(--color-icon)",strokeWidth:"1.5"}),Q.createElement("path",{d:"M55.8928 7.78613L49.68 7.78613",stroke:"var(--color-icon)",strokeWidth:"1.5"}))}function Gb(e){return Q.createElement("svg",{width:"70",height:"63",viewBox:"0 0 70 63",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Q.createElement("g",{clipPath:"url(#clip0_2769_43640)"},Q.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M59.6328 10.3728V13.8403L57.4197 13.8392L60.4724 16.6418L63.523 13.8403H61.3729V10.3728H64.8466L64.8455 12.5395L67.6274 9.48573L64.8466 6.43085V8.63279H61.387V5.13676L63.5393 5.13785L60.4866 2.3418L57.4317 5.13676H59.6328V8.63279H56.1354V6.43085L53.3394 9.48573L56.1365 12.5395L56.1354 10.3728H59.6328Z",fill:"var(--color-icon)"}),Q.createElement("rect",{x:"32.7745",y:"5.02452",width:"29.6538",height:"43.5",rx:"14.8269",transform:"rotate(30 32.7745 5.02452)",stroke:"var(--color-icon)",strokeWidth:"1.5"}),Q.createElement("path",{d:"M47.1082 13.7744L50.1631 17.2744L52.6631 21.2744L52.9009 29.6727L47.6631 38.2744L38.9208 32.1445L43.6631 24.2744L43.6985 21.9253L42.5477 20.6685L47.1082 13.7744Z",fill:"var(--color-icon-brand)",fillOpacity:"whiteboard"===e.editorType?"0.7":"1"}),Q.createElement("rect",{x:"32.7745",y:"5.02452",width:"29.6538",height:"43.5",rx:"14.8269",transform:"rotate(30 32.7745 5.02452)",stroke:"var(--color-icon)",strokeWidth:"1.5"}),Q.createElement("rect",{x:"37.4408",y:"17.712",width:"8.88461",height:"15.8077",rx:"4.44231",transform:"rotate(30 37.4408 17.712)",stroke:"var(--color-icon)",strokeWidth:"1.5"})),Q.createElement("defs",null,Q.createElement("clipPath",{id:"clip0_2769_43640"},Q.createElement("rect",{width:"70",height:"64",fill:"var(--color-icon)"}))))}let GC="existing_user_pan_zoom--instruction--Q3Ost",Gw="existing_user_pan_zoom--instructionText--xoJ8M";function GT({dismissModal:e,onClickPrimaryCta:t}){let n=(0,mD.lg)();return Q.createElement("div",null,Q.createElement("div",{className:"existing_user_pan_zoom--announcementContent--EUu9P text--fontPos11--2LvXf text--_fontBase--QdLsd"},Q.createElement("p",null,Q.createElement(eO.Tx,{id:"mouse_navigation_preferences_modal.existing_user.body",filePref:Q.createElement("span",{className:tw.cx.font11.fontMedium.lh16.$},Q.createElement(eO.Tx,{id:"mouse_navigation_preferences.existing_user.body.file_preferences"}))})),Q.createElement("div",{className:"existing_user_pan_zoom--zoomPanInstructions--tHKvv"},Q.createElement("div",{className:GC},Q.createElement(Gy,{editorType:n}),Q.createElement("p",{className:Gw},Q.createElement(eO.Tx,{id:"mouse_navigation_preferences_modal.existing_user.scroll_to_zoom"}))),Q.createElement("div",{className:GC},Q.createElement(Gb,{editorType:n}),Q.createElement("p",{className:Gw},Q.createElement(eO.Tx,{id:"mouse_navigation_preferences_modal.existing_user.right-click_to_pan"})))),Q.createElement("div",{className:"existing_user_pan_zoom--ctasRow--gB2IA"},Q.createElement("div",{className:"existing_user_pan_zoom--ctas--OA-Ac"},Q.createElement(tC.nR,{onClick:e},(0,eO.t)("mouse_navigation_preferences_modal.existing_user.dismiss_button")),Q.createElement(lP.$,{variant:"primary",onClick:t},(0,eO.t)("mouse_navigation_preferences_modal.existing_user.try_it"))))))}function Gx(e){let t=(0,$.wA)(),n=(0,Q.useCallback)(()=>{lT.Y5.triggerAction("set-right-click-pan-enabled"),(0,ev.np)({navigationPreference:ev.wc.MouseScrollToZoom,enabled:!0}),lT.Y5.triggerAction("set-scroll-wheel-zoom-enabled"),(0,ev.np)({navigationPreference:ev.wc.RightClickDragToPan,enabled:!0})},[]);return Q.createElement(Mq.i,{step:{trackingContextName:"Pan Zoom Existing Onboarding: announcement modal",element:GT,modalType:tE.q3.DRAGGABLE,onboardingKey:mM.tO,title:Q.createElement("div",{className:tw.cx.font13.fontMedium.pl8.pt16.pb16.$},Q.createElement(eO.Tx,{id:"mouse_navigation_preferences_modal.existing_user.header"})),headerClassName:"existing_user_pan_zoom--announcementModalHeader--si-tX",width:300,disableFooter:!0,hideStepCounter:!0,disableHighlight:!0},onClickPrimaryCta:()=>{e.onClickPrimaryCta(),n()},onClose:ey.lQ,dismissModal:e.onManualDismiss,dispatch:t})}function GN(e){return Q.createElement(c9.rq,{isShowing:e.isShowing,trackingContextName:"pan_zoom_pref_tooltip",onClose:e.onManualDismiss,targetKey:mM.tO,emphasized:!0,title:Q.createElement(eO.Tx,{id:"mouse_navigation_preferences_tooltip.existing_user.header"}),description:Q.createElement(eO.Tx,{id:"mouse_navigation_preferences_tooltip.existing_user.body",filePref:Q.createElement("span",{className:tw.cx.fontMedium.$},Q.createElement(eO.Tx,{id:"mouse_navigation_preferences.existing_user.body.file_preferences"}))}),arrowPosition:dn.F_.BOTTOM,shouldCenterArrow:void 0})}let Gk=(0,tc.r1)("welcome_onboarded"),GS=(0,tc.r1)("orgs_onboarded"),GI=(0,tc.r1)("pan_zoom_existing_user_announcement");function GA(){let e=(0,ae.aV)(),t=(0,$.wA)(),n=(0,ef.md)(GI),a=(0,ef.md)(Gk),r=(0,ef.md)(GS),l=(0,ef.md)(Es.JM),i=(0,ef.md)(Mv.Fy),{complete:o,isShowing:s,show:c}=(0,tp.e)({overlay:tv.oLh,priority:th.N.DEFAULT_MODAL},[n,a,r,l,i]),d=(0,Q.useCallback)(()=>{t(tB.b({pan_zoom_existing_user_announcement:!0})),o()},[o,t]),u=(0,c4.A)({numSteps:2,onComplete:d}),m=(0,Q.useCallback)(()=>{s||(u.reset(),c({canShow:(e,t,n,a,r)=>{let l=!!((0,eo.kc)().navigation_mode_scroll_to_pref&&(0,eo.kc)().figjam_navigation_mode),i=!ec.Xb&&!ec.aR,o=(0,n5.A)("2024-03-31"),s=(0,n5.A)().startOf("day").isBefore(o);return!e&&(t||n)&&a&&r&&l&&i&&s}}))},[s,c,u]);return(0,Q.useEffect)(()=>{if(!e){let e=setTimeout(()=>m(),1e3);return()=>clearTimeout(e)}},[m,e]),Q.createElement(c8.U,{currentStep:u.currentStep,isShowing:s},Q.createElement(Gx,{isShowing:s,onManualDismiss:d,onClickPrimaryCta:u.next}),Q.createElement(GN,{isShowing:s,onManualDismiss:u.next}))}let GP=Q.memo(function({isFigjamEditor:e,isDesignEditor:t,openFile:n}){let a=Q.useRef(!t);return(Q.useEffect(()=>{a.current=!t},[t]),!function(e){let t=(0,ef.md)(H0.a8),n=(0,$.d4)(e=>{var t;return null==(t=e.user)?void 0:t.created_at}),a=!!n&&(0,n5.A)("2023-05-01").isBefore(n);Q.useEffect(()=>{if(!a){e.current=!0;return}e.current=e.current||(0,H1.XC)(t)},[e,t,a]);let r=(0,$.wA)();(0,H4.yE)("x",e),(0,H4.yE)("y",e),(0,H4.yE)("width",e),(0,H4.yE)("height",e),(0,H4.yE)("angle",e),(0,H4.yE)("cornerRadius",e),(0,H4.yE)("strokePaints",e),(0,H4.yE)("fillPaints",e),(0,H4.yE)("effects",e),(0,H4.yE)("fontSize",e),(0,H4.yE)("fontFamily",e),(0,H4.yE)("fontStyle",e),(0,H5.g)("has_zoomed_in_design_file",e),(0,H2.U)("has_panned_in_design_file",e);let l=(0,fQ.f)("has_created_text"),i=(0,fQ.f)("has_created_frame"),o=(0,fQ.f)("has_selected_frame_tool"),s=(0,tp.e)({overlay:tv._5$,priority:0});(0,Eo.E)(s.uniqueId,"action_set_tool_frame",Q.useCallback(()=>{e&&e.current||o||r(tB.b({has_selected_frame_tool:!0}))},[e,r,o])),(0,Eo.E)(s.uniqueId,"create_frame",Q.useCallback(()=>{e&&e.current||i||r(tB.b({has_created_frame:!0}))},[e,r,i])),(0,Eo.E)(s.uniqueId,"create_text",Q.useCallback(()=>{e&&e.current||l||r(tB.b({has_created_text:!0}))},[e,r,l])),e.current}(a),!function(e){let t=(0,$.wA)(),n=(0,ef.md)(DV.mp),a=null!=n&&(0,n5.A)("2023-10-31").isBefore(n),r=!!(0,fQ.f)("has_opened_design_editor"),[l,i]=(0,ef.fp)(DG);(0,Q.useEffect)(()=>{a&&!r&&e&&(i(!0),t(tB.b({has_opened_design_editor:!0})))},[t,r,e,i,a]),(0,Q.useEffect)(()=>{l&&!e&&i(!1)},[l,e,i])}(t),aZ.z4.getIsExtension()||!n)?null:Q.createElement(Q.Fragment,null,Q.createElement(GO,{isFigjamEditor:e,isDesignEditor:t,openFile:n}),!ec.Ay.isIpadNative&&Q.createElement(GL,{isFigjamEditor:e,isDesignEditor:t,openFile:n}))});function GO({isFigjamEditor:e}){return Q.createElement(Q.Fragment,null,e&&Q.createElement(Ei.p,null,Q.createElement(DS,null),Q.createElement(DP,null)))}function GL({isFigjamEditor:e,isDesignEditor:t,openFile:n}){let a=(0,SF.tG)(),r=(0,SF.yT)();return Q.createElement(Q.Fragment,null,t&&!(0,pF.nl)()&&Q.createElement(Ei.p,null,Q.createElement(MX,null)),e&&!t&&Q.createElement(Gu.Q,null,Q.createElement(Ei.p,null,Q.createElement(MQ,null))),Q.createElement(Ei.p,null,Q.createElement(D9.P,null)),(null==n?void 0:n.teamId)&&Q.createElement(Gu.Q,null,Q.createElement(Ei.p,{featureFlag:"pro_trials_v3_ux"},Q.createElement(Hh,{teamId:n.teamId,isDesignEditor:t,isFigJamEditor:e}))),(null==n?void 0:n.teamId)&&Q.createElement(Gu.Q,null,Q.createElement(Ei.p,null,Q.createElement(H_,{teamId:n.teamId,isDesignEditor:t,isFigJamEditor:e}))),t&&Q.createElement(Ei.p,null,Q.createElement(Rn,null)),Q.createElement(Ei.p,null,Q.createElement(Ri.A,null)),Q.createElement(Ei.p,null,Q.createElement(Ro.F,null)),Q.createElement(Ei.p,null,Q.createElement(Rs.w,null)),!ec.Xb&&Q.createElement(Ei.p,null,Q.createElement(D8.$l,null)),(null==n?void 0:n.canEditCanvas)&&e&&!t&&Q.createElement(Ei.p,null,Q.createElement(F5,{openFile:n}),Q.createElement(B9,null),Q.createElement(Ff,null),Q.createElement(F8,null),Q.createElement(Fx,null),Q.createElement(FN,null)),e&&!t&&Q.createElement(Ei.p,null,Q.createElement(Fj,null)),Q.createElement(Ei.p,null,Q.createElement(Ue.KX,null)),e&&Q.createElement(Ei.p,null,Q.createElement(HQ,null)),Q.createElement(Ei.p,null,Q.createElement(U_,null)),Q.createElement(Ei.p,{featureFlag:"xr_debounce_threshold"},Q.createElement(Dr,null),Q.createElement(Dl,null)),Q.createElement(Ei.p,null,Q.createElement(UP.Wk,null)),t&&Q.createElement(Ei.p,null,Q.createElement(HV,null)),t&&Q.createElement(Ei.p,null,Q.createElement(Vu,null)),t&&Q.createElement(Ei.p,{featureFlag:"exp_gen1_design_onboard_async_ff"},Q.createElement(D7,null)),e&&Q.createElement(Ei.p,null,Q.createElement(HX,null)),Q.createElement(Ei.p,null,Q.createElement(Gv,null)),Q.createElement(Ei.p,null,Q.createElement(Mk,null)),e&&Q.createElement(Q.Fragment,null,Q.createElement(Ei.p,null,Q.createElement(Dp,null))),t&&(null==n?void 0:n.canEdit)&&Q.createElement(Ei.p,null,Q.createElement(HM,null)),t&&Q.createElement(Ei.p,null,Q.createElement(DB,null)),e&&Q.createElement(Ei.p,null,Q.createElement(Ds,null)),Q.createElement(Ei.p,null,Q.createElement(M7,null)),Q.createElement(Ei.p,null,Q.createElement(M2,null)),!ec.Xb&&Q.createElement(Ei.p,null,Q.createElement(Rl,null)),Q.createElement(Ei.p,null,Q.createElement(Rc.b,null)),t&&Q.createElement(Ei.p,null,Q.createElement(Ub,null)),t&&Q.createElement(Ei.p,null,Q.createElement(Gc,null),Q.createElement(Gd,null)),t&&Q.createElement(Ei.p,{featureFlag:"cursor_bot"},Q.createElement(Go,null),Q.createElement(Gs,null)),e&&!r&&(0,eo.kc)().figjam_summarization&&!(0,eo.kc)().figjam_synthesize_handbrake&&Q.createElement(Ei.p,{featureFlag:"figjam_summarization_nudge"},e&&Q.createElement(Mg,null)),e&&!r&&(0,eo.kc)().figjam_summarization&&!(0,eo.kc)().figjam_synthesize_handbrake&&Q.createElement(Ei.p,{featureFlag:"figjam_summarization_nudge"},e&&Q.createElement(Mr.Cw,null)),a&&Q.createElement(Ei.p,null,e&&Q.createElement(Di.vi,null)),t&&Q.createElement(Ei.p,null,Q.createElement(MT,null)),e&&Q.createElement(Ei.p,null,Q.createElement(Hv.rj,null),Q.createElement(Hx,null)),t&&Q.createElement(Ei.p,{featureFlag:"rollout_pinned_comments_ff"},Q.createElement(UI,null),Q.createElement(UA,null)),t&&Q.createElement(Ei.p,{featureFlag:"ce_outline_mode_shortcut_pref"},Q.createElement(Uk,null)),(0,eo.kc)().navigation_mode_scroll_to_pref&&(0,eo.kc)().figjam_navigation_mode&&(0,eo.kc)().nav_pref_existing_user_overlay&&Q.createElement(Ei.p,null,Q.createElement(GA,null)))}var GM=n(69128),GD=n(297757);function GR(){let e=(0,$.d4)(e=>e.universalInsertModal),t=(0,$.d4)(e=>e.mirror.appModel.showUi),{fdPreviewResource:n,initialFdView:a,initialFdResourceTab:r}=e,l=null==n?void 0:n.type,{activeTab:d,setCurrentViewOrTab:u,currentView:m}=function(){let{initialFdResourceTab:e,initialFdView:t}=(0,$.d4)(e=>e.universalInsertModal),[n,a]=Q.useState(e||o||gR.s.COMPONENT),[r,l]=Q.useState(e===gR.s.PLUGIN&&t||s||"recents_and_saved"),[i,d]=Q.useState(e===gR.s.WIDGET&&t||c||"recents_and_saved"),u=Q.useCallback(e=>{e===gR.s.PLUGIN?s=r:e===gR.s.WIDGET&&(c=i)},[r,i]),m=n===gR.s.PLUGIN?r:i,p=Q.useCallback(({newView:e,newTab:t})=>{let s=t===gR.s.PLUGIN?r:t===gR.s.WIDGET?i:void 0;e&&s!==e&&(u(n),(t||n)===gR.s.PLUGIN?l(e):(t||n)===gR.s.WIDGET&&d(e)),t&&n!==t&&(u(n),o=n,a(t))},[n,r,i,u]);return Q.useEffect(()=>{p({newView:t,newTab:e})},[e,t]),Q.useEffect(()=>{o=n,u(n)},[n,u]),Q.useMemo(()=>({activeTab:n,currentView:m,setCurrentViewOrTab:p}),[n,m,p])}(),p="ui3"===(0,et.DP)().version,_=(0,$.wA)(),f=Q.useRef(null),[h]=Q.useState(a?"":i||"");Q.useEffect(()=>{(0,uj.YQ)({id:"figma-inserts-opened"}),(0,uj.YQ)({id:Ue.ko})},[]),Q.useEffect(()=>{i=h},[h]),Q.useEffect(()=>_(yw.aq()),[_]),(0,Nk.IT)((0,NP.se)()),(0,Nk.IT)((0,NP.fd)()),Q.useEffect(()=>{u({newTab:l||r})},[r,l]);let g=(0,mD.E3)(),[E,v]=Q.useState(),y=p?gD.tS:gD.Zv;(0,cX.J$)(e.pinned===S$.t.NOT_PINNED,f,y);let b=(0,gD.CK)(),C=(0,gD.CG)(),{bounds:w,showLeftPinBound:T,setShowLeftPinBound:x,shouldSnapToPosition:N,setPinned:k}=PF(GF,v,e.pinned,b,C,e.showing),S=(0,cX.LR)(),I=(0,aX.U)(),A=Q.useCallback(e=>{e.stopPropagation(),I&&_(nP.oB())},[_,I]),P=Q.useMemo(()=>({activeTab:d,viewResource:e=>{_(gL.IN({fdPreviewResource:e}))},closeResource:()=>{_(gL.IN({fdPreviewResource:void 0}))},closeModal:S,pinModal:k,setCurrentViewOrTab:u,currentView:m}),[d,S,k,_,u,m]),O=Q.useCallback(e=>{oy.VU.get("set-tool-default","toolbar")(),_(gL.jy({pinned:S$.t.PINNED})),A(e)},[_,A]),L=Q.useCallback(()=>{T&&k()},[T,k]);if(!e.showing)return null;let M={height:"auto",overflow:"hidden"};return(e.pinned!==S$.t.NOT_PINNED||p||(M.borderTopLeftRadius="0px"),"dev_handoff"===g)?null:Q.createElement(t6.fu,{name:"universal-insert"},e.pinned===S$.t.PINNED&&T&&Q.createElement("div",{className:Ar.kV,style:{left:b.x,top:b.y,width:gD.AN}}),Q.createElement(gD.B0.Provider,{value:P},Q.createElement(dn.vx,{initialPosition:E||new lB.Mi(e.initialX,e.initialY),initialWidth:gD.AN,bounds:w,onEnterBound:()=>x(!0),onLeaveBound:()=>x(!1),canResetPosition:N,onClose:S,onDragStart:O,onDragEnd:L,minTopMargin:t?void 0:0,onClick:A,ref:f,containerClassName:e.pinned===S$.t.PINNED_AND_DOCKED_LEFT?GD.gC:GD.jT,frameStyle:M},Q.createElement(gM.z,null))))}function GF(){return{x:-gD.AN,y:0,width:2*gD.AN+gD.wR,height:window.innerHeight}}var GB=n(320766),GU=n(682679),GH=n(115653),GV=n(499116),GG=n(848234);function GK(e){let{onDismiss:t,canUpgrade:n}=e;return Q.createElement(t6.fu,{name:"Workshop Expired File Banner"},Q.createElement("div",{className:`workshop_expiry_footer--banner--ELf7G ${ot.yl}`},Q.createElement("div",{className:"workshop_expiry_footer--bannerContent--w2Lw1"},Q.createElement(GG.oS,{className:"workshop_expiry_footer--icon--mM-A8",type:GG.y1.WHITEBOARD}),Q.createElement("div",{className:"workshop_expiry_footer--textContent--TN7cv"},Q.createElement("span",{className:"workshop_expiry_footer--title--cmlOu text--fontPos13Whyte--VhWqH text--_fontBaseWhyte--efAjI"},Q.createElement(eO.Tx,{id:"whiteboard.open_sessions.expiry_banner_title"})),n&&Q.createElement("span",{className:"workshop_expiry_footer--subtitle--jmRvc text--fontPos13Whyte--VhWqH text--_fontBaseWhyte--efAjI"},Q.createElement(eO.Tx,{id:"whiteboard.open_sessions.expiry_banner_prompt"})))),Q.createElement(aO.Jn,{onClick:t,className:"workshop_expiry_footer--closeButton--L8lrO"})))}var GW=n(897442),Gz=n(705525);function Gj(e){let{onWorkshopExpired:t}=e;!function(){let e=(0,$.wA)(),t=(0,at.iZ)(),n=!t,a=(0,wu.nF)(),r=a.enabled,l=a.enabled?a.id:null,i=(0,$.d4)(e=>e.progressBarState.mode),o=(0,$.d4)(e=>{var t;return null==(t=e.openFile)?void 0:t.isTryFile}),s=(0,Q.useMemo)(()=>{if(!t||null==l)return!1;if(o)return!0;let e=(0,ew.DN)();try{return e.get((0,Gz.v6)(l)).includes(t.email)}catch(e){return!1}},[t,l,o]),c=null==t?void 0:t.email;(0,Q.useEffect)(()=>{c&&l&&o&&(0,Gz.kO)(l,c)},[c,l,o]);let d=(0,$.d4)(e=>{var t;return null==(t=e.openFile)?void 0:t.canEdit}),u=(0,$.d4)(e=>{var t;return null==(t=e.openFile)?void 0:t.key}),m=(0,$.d4)(e=>{var t;return null==(t=e.openFile)?void 0:t.name});(0,Q.useEffect)(()=>{if(r&&!(0,GH.T)(i)){let t=localStorage.getItem((0,UD.KK)(l));n?t?(0,ws.QA)(t):e(n9.$O({type:GW.e})):d||s||e(n9.$O({type:GW.e}))}},[e,n,r,l,i,d,s]),(0,Q.useEffect)(()=>{if(r&&!(0,GH.T)(i)&&n&&o&&u&&m===(0,eO.t)("fullscreen.fullscreen_view_selector.untitled")){let t=localStorage.getItem((0,UD.KK)(l));t&&e(LG.S({userName:t,file_key:u}))}},[r,i,l,n,o,u,m,e])}();let{showEditFileFooter:n,userCanSeeEditButton:a,dismissEditFileFooter:r}=function(e){let[t,n]=(0,Q.useState)(!1),a=(0,$.wA)(),r=(0,at.iZ)(),l=(0,$.d4)(e=>{var t;return null==(t=e.openFile)?void 0:t.name}),i=!r,o=(0,$.d4)(e=>e.openFile),{userCanEditFile:s,userCanSeeEditButton:c}=(0,Q.useMemo)(()=>i?{userCanEditFile:!1,userCanSeeEditButton:!1}:o?{userCanEditFile:o.canEdit,userCanSeeEditButton:o.showEditButton}:{userCanEditFile:!1,userCanSeeEditButton:!1},[i,o]),d=(0,Nj.Kx)(),u=(0,wu.nF)(),m=u.enabled,p=(0,ue.Z)(m),_=u.enabled?u.until.valueOf():null,f=(0,Q.useRef)(null),h=(0,Q.useCallback)(()=>{var t;if(!i){null==(t=eU.h3O)||t.reconnect(!1),s||n(!0);return}a(GB.I.init({origin:"logged_out_footer",formState:GU.qB.SIGN_UP,redirectUrl:ei.Ay.location.pathname})),(null==d?void 0:d.updateFigJamTryExpiration)?u.enabled&&u.until?d.updateFigJamTryExpiration(u.until):d.updateFigJamTryExpiration(new Date):a(n9.to({type:GV.x,data:{headerText:(0,eO.t)("whiteboard.open_sessions.expiry_modal_title",{file_name:l||""}),subtitle:(0,eO.t)("whiteboard.open_sessions.expiry_modal_subtext"),disableHiding:!0}})),e()},[a,e,i,s,l,d,u]);return(0,Q.useEffect)(()=>{if(m&&_){let e=Math.max(_-Date.now(),0);f.current=setTimeout(()=>{f.current=null,h()},e)}return()=>{f.current&&clearTimeout(f.current)}},[a,m,_,h]),(0,Q.useEffect)(()=>{var e;null!=p&&m!==p&&(m?null==(e=eU.h3O)||e.reconnect(!1):(f.current&&clearTimeout(f.current),h()))},[a,m,p,h]),{showEditFileFooter:t,dismissEditFileFooter:(0,Q.useCallback)(()=>{n(!1)},[]),userCanSeeEditButton:c}}(t);return n?Q.createElement(GK,{onDismiss:r,canUpgrade:a}):null}var GY=n(91335),GZ=n(848642),GX=n(819147),Gq=n(826368),GJ=n(538411);function GQ({children:e}){let[t,n]=(0,Q.useState)(null),a=(0,hs.A)(()=>n(!0),500),r=t?ey.lQ:a;return(0,Q.useEffect)(r),t&&Q.createElement("div",{className:GJ.Q,role:"status"},e)}function G$(){let e=(0,$.d4)(e=>e.mirror.appModel.keyboardShortcuts),t=(0,yu.c1)(e,"present-as-prototype");return Q.createElement(GQ,null,Q.createElement(eO.Tx,{id:"fullscreen.toolbar.screenreader_notice",shortcut:t}))}function G0(){let e=(0,$.d4)(e=>e.mirror.appModel.keyboardShortcuts);if((0,$.d4)(e=>e.screenreader.enabled))return null;let t=(0,yu.c1)(e,"open-shortcuts").replace("?",(0,eO.t)("general.question_mark")),n=(0,yu.c1)(e,"toggle-menu");return Q.createElement(GQ,null,Q.createElement(eO.Tx,{id:"fullscreen.toolbar.screenreader_notice_figjam",shortcut:t,quickActionsShortcut:n}))}var G1=n(262563),G2=n(443208),G5=n(971428);class G4{constructor(e){this.store=e}get graph(){return this.store.getState().mirror.sceneGraph}children(e){return(0,G1.dl)(this.graph,e)?[]:eU.glU.getSortedChildGuids(e.guid).map(e=>this.graph.get(e)).filter(n4.Vq)}id(e){return e.guid}isRoot(e){let t=this.parent(e);return!t||"DOCUMENT"===t.type}parent(e){let t=e.parentNode;return t&&"DOCUMENT"!==t.type?t:void 0}interpret(e){if(!e||"SECTION_OVERLAY"===e.type)return{inclusion:G5.v.OMIT};if("CANVAS"===e.type)return{inclusion:G5.v.INCLUDE};if(e.resizeToFit)return{inclusion:G5.v.CHILDREN};let t=(0,G1.xR)(eU.Egt.getNodeTransformProperties(e.guid)),n=(0,G1.U3)(e),a=(0,G1.sh)({type:e.type,name:e.name}),r=(0,G1.q4)(e),l=(0,G1.q4)(e.textSublayer),i=eU.Egt.getStickableFrequencies(e.guid)||{},o=e.accessibleLabel,s="TABLE"===e.type?(0,G1.qJ)(this.graph,e):null,c="SECTION"===e.type&&e.sectionContentsHidden;return{guid:e.guid,inclusion:G5.v.INCLUDE,type:e.type,author:e.authorVisible&&e.authorName?e.authorName:null,directTextContent:r,innerTextContent:l,tableCells:s,transformProperties:t,ariaRole:n,name:e.name,headerLabel:a,shapeType:"SHAPE_WITH_TEXT"===e.type?e.shapeWithTextType:null,stampFrequencies:i,accessibleLabel:o,contentsHidden:c}}comparePayloads({transformProperties:e,directTextContent:t,innerTextContent:n,stampFrequencies:a,accessibleLabel:r,...l},{transformProperties:i,directTextContent:o,innerTextContent:s,stampFrequencies:c,accessibleLabel:d,...u}){return(0,$.bN)(l,u)&&(0,$.bN)(e,i)&&(0,$.bN)(a,c)&&(0,$.bN)(r,d)&&(0,an.c2)(t,o)&&(0,an.c2)(n,s)}}let G3=Q.createContext({getLastEventWasTab:()=>!1});function G6({children:e}){let t=(0,Q.useRef)(!1),n=(0,Q.useCallback)(()=>{t.current=!1},[]),a=(0,Q.useCallback)(e=>{"Tab"===e.key?t.current=!0:t.current=!1},[]);(0,Q.useEffect)(()=>(document.addEventListener("pointerdown",n),document.addEventListener("pointermove",n),document.addEventListener("keydown",a),()=>{document.removeEventListener("mousedown",n),document.removeEventListener("mousemove",n),document.removeEventListener("keydown",a)}),[a,n]);let r=(0,Q.useCallback)(()=>t.current,[]),l=(0,Q.useMemo)(()=>({getLastEventWasTab:r}),[r]);return Q.createElement(G3.Provider,{value:l},e)}var G7=n(210908);let G8="textInputRegistered";var G9=n(420711);let{viewportContainerToCss:Ke}=(0,G1.oD)(),Kt=(0,Q.memo)(function({currentPage:e,editorType:t}){return Q.createElement(G6,null,Q.createElement(Kn,{editorType:t,currentPage:e}))});function Kn({currentPage:e,editorType:t}){!function(e){var t;let n=(0,pn.Z)(e.loggerEvent),{getLastEventWasTab:a}=(0,Q.useContext)(G3),r=(0,$.d4)(e=>1===Object.keys(e.mirror.sceneGraphSelection).length?Object.keys(e.mirror.sceneGraphSelection)[0]:null),l=eU.CUU&&eU.CUU.exists(eU.Sie.REDUX)?null==(t=eU.CUU.getSelectedTextRange(eU.Sie.REDUX))?void 0:t.textNodeId:null,i=r||l;Q.useEffect(()=>{i&&a()&&n((0,ez.QZ)({nodeId:i,...G2.B5}),G2.tp)},[n,a,i])}({loggerEvent:"whiteboard"===t?"figjam_navigate":"design_navigate"});let n=(0,GZ.e_)();(0,pV.of)(t);let a=(0,$.wA)(),r=(0,$.d4)(e=>!!e.modalShown);return(0,Q.useEffect)(()=>{n&&ec.Xb&&(r||a(eL.F.enqueue({message:(0,eO.t)("fullscreen.accessibility.platform_error"),role:"alert",type:"accessibility-dom-react-error"})),a((0,GY.mC)({errorType:"platform_error"})))},[a,r,n]),ec.Xb?null:n&&"whiteboard"===t?Q.createElement(eP.tH,{onError:()=>{r||a(eL.F.enqueue({message:(0,eO.t)("fullscreen.accessibility.dom_error"),role:"alert",type:"accessibility-dom-react-error"})),a((0,GY.mC)({errorType:"render_error"}))},fallback:Q.createElement("div",null),boundaryKey:"FigjamAccessibilityTreeInnerWithViewport"},Q.createElement(Ka,{currentPage:e})):Q.createElement(G0,null)}function Ka({currentPage:e}){let t=(0,ez._X)({subscribeToUpdates_expensive:!0});!function(){let e=(0,Q.useRef)(),t=(0,Q.useRef)(!1),n=(0,Q.useRef)({value:null}),a=lT.Y5&&lT.Y5.isReady()&&eU.VDs.getFocusElementsRegistered(),r=(0,$.d4)(e=>e.mirror.appModel.activeCanvasEditModeType),l=(0,$.d4)(e=>e.mirror.sceneGraphSelection),i=(0,$.d4)(e=>e.mirror.sceneGraph),{textValue:o,selectionRange:s}=(0,ep.R)(e=>{let t=e.mirror.appModel.activeCanvasEditModeType,n=e.mirror.sceneGraph,a=e.mirror.sceneGraphSelection;if(t!==eU.m1T.TEXT)return{textValue:null,selectionRange:null};let r=Object.keys(a);if(0===r.length)return{textValue:null,selectionRange:null};let l=n.get(r[r.length-1]);if(null==l)return{textValue:null,selectionRange:null};let i=null!=l.containingCanvas?n.get(l.containingCanvas):null,o=null==i?void 0:i.getSelectedTextRange();return{textValue:null==l?void 0:l.textContent,selectionRange:o}});n.current.value=o,n.current.selectionStart=null==s?void 0:s.start,n.current.selectionEnd=null==s?void 0:s.end;let c=(0,Q.useCallback)((n,a,r)=>{t.current||null==e.current||null==n||(e.current.value=n),t.current||null==e.current||null==a||null==r||e.current.setSelectionRange(a,r)},[]);(0,Q.useEffect)(()=>{c(o,null==s?void 0:s.start,null==s?void 0:s.end)},[o,null==s?void 0:s.end,null==s?void 0:s.start,null==s?void 0:s.textNodeId,c]);let d=()=>{t.current=!1},u=()=>{t.current=!0},m=(0,Q.useCallback)(()=>{c(n.current.value,n.current.selectionStart,n.current.selectionEnd),t.current=!1},[c]);(0,Q.useEffect)(()=>{var t,n,r,l,i,o;if(a){if(e.current=function(){var e;let t=null==(e=document.getElementById("fullscreen-root"))?void 0:e.getElementsByClassName("focus-target"),n=null==t?null:Array.from(t).filter(e=>"textarea"===e.tagName.toLowerCase()&&!e.hasAttribute("readonly")).map(e=>e);return(null==n?void 0:n.length)===1?n[0]:null}(),null==(t=e.current)?void 0:t.hasAttribute(G8)){TB.k.error("Input mirror hook registered multiple times");return}return null==(n=e.current)||n.setAttribute(G8,"true"),null==(r=e.current)||r.addEventListener("compositionend",d),null==(l=e.current)||l.addEventListener("compositionstart",u),null==(i=e.current)||i.addEventListener("focus",m),null==(o=e.current)||o.addEventListener("input",d),()=>{var t,n,a,r,l;null==(t=e.current)||t.removeAttribute(G8),null==(n=e.current)||n.removeEventListener("compositionend",d),null==(a=e.current)||a.removeEventListener("compositionstart",u),null==(r=e.current)||r.removeEventListener("focus",m),null==(l=e.current)||l.removeEventListener("input",d)}}},[a,m]);let p=r===eU.m1T.TEXT?function(e,t){let n=Object.keys(t),a=n.length>0?e.get(n[0]):null,{guid:r,type:l,shapeWithTextType:i}=a??{guid:void 0,type:void 0,shapeWithTextType:void 0};if(null==r)return"";if("SHAPE_WITH_TEXT"===l)return(0,G1.ZG)(i);if("TABLE"===l){let t=e.get(n[n.length-1]);if(null==t)return(0,G7.r)(l);{let{tableCellRowIndex:e,tableCellColumnIndex:n}=t;return(0,eO.t)("fullscreen.accessibility_dom.node_name_table_cell",{r:e,c:n})}}return(null==a?void 0:a.isSymbolSublayer)||(null==a?void 0:a.isInstanceSublayer)?(0,eO.t)("fullscreen.accessibility_dom.node_name_instance"):(0,G7.r)(l)}(i,l):"";(0,Q.useEffect)(()=>{e.current&&(e.current.ariaLabel=p)},[p])}();let[n]=(0,Sq.A)(t,500,{trailing:!0}),a=(0,eG.J2)((0,eH.UK)().accessibilityDomDebug),r=(0,lN.Td)();(0,GX.gf)();let l=(0,$.wA)();(0,Q.useEffect)(()=>{l((0,GY.mC)({errorType:null}))},[l]);let i=(0,GZ.s5)();(0,Q.useEffect)(()=>{i(GZ.hu.FIGJAM_INITIAL_TREE_LOAD)},[i]);let o=Q.useRef(null),s=Ke(n),c=ea()(G9.kL,{[G9.Qg]:!a});return Q.createElement("div",{className:c,ref:e=>{(0,w_.QP)("canvas",e),o.current=e},id:pV.Gl,"aria-label":r?(0,lA.Yx)([(0,eO.t)("fullscreen.accessibility.main_region"),(0,eO.t)("fullscreen.filename_view.view-only")],"unit"):(0,eO.t)("fullscreen.accessibility.main_region"),role:"main",tabIndex:0,"data-fullscreen-intercept-dangerously-include-tab":!0,onFocusCapture:()=>{var e;null==(e=o.current)||e.setAttribute("aria-hidden","false")}},Q.createElement("div",{style:s},Q.createElement(Kr,{currentPage:e})))}let Kr=Q.memo(function({currentPage:e}){let t=(0,ww.g)(),n=(0,$.Pj)(),a=Q.useMemo(()=>new G4(n),[n]),r=(0,Gq._)(a,GZ.hu.FIGJAM_UPDATE_NODE),l=(0,pn.Z)("figjam_navigate"),i=(0,eG.J2)((0,eH.UK)().accessibilityDomDebug),o=(0,$.d4)(lD.dK);(0,$.d4)(lD.Xt);let s=(0,hs.A)(()=>{if(!t)return;let e=eU.AlE.getActiveDocument(),n=eU.yGz.flushChangedNodes(e);if(n.length){let e=n.map(e=>o.get(e)).filter(n4.Vq);r.updateDirtyNodes(e)}},500,{leading:!0,trailing:!0,maxWait:1e3});(0,Q.useEffect)(s);let c=t?eU.AlE.getActiveDocument():void 0;return(0,Q.useEffect)(()=>{if(void 0!==c)return eU.yGz.setMapping(c,eU.Zbk.FIGJAM),()=>{eU.yGz.flushChangedNodes(c),eU.yGz.setMapping(c,eU.Zbk.NONE)}},[c]),(0,Q.useEffect)(()=>{if(!t)return;let a=n.getState().mirror.sceneGraph.get(e);a&&r.updateDirtyNodes([a])},[e,t,n,r]),Q.createElement(G2.U5,{nodeId:e,isDebugMode:i,navigate:l,accessibilityScope:r})});var Kl=n(272291),Ki=n(945158),Ko=n(109210),Ks=n(369700);let Kc="annotation--annotationContainer--k4xiM",Kd="annotation--wrapperEditing--C2Zlx",Ku="annotation--createAnnotation--tWKSM annotation--_annotationBase--MPByC",Km="annotation--contentContainer--vSuqs",Kp="annotation--properties--1p6UF",K_="annotation--noValue--HHQOU",Kf="annotation--propertyOptionIconSvg--LypST",Kh="annotation--icon--w1enR",Kg="annotation--chit--3je6E",KE="annotation--solidPaint--ClR6h",Kv="annotation--solidPaintValue--9PQMf annotation--_ellipsis--8F1VE",Ky="annotation--variablePill--VNxoI";function Kb({valueProps:e,isHovered:t,variableContainerClassName:n}){if("mixed"===e.format){let a=e.value.some(e=>!!e.variable);return Q.createElement("div",{className:ea()("annotation--multipleVariableWrapper--OW3M1",a&&"annotation--vertical--zmpVv")},e.value.map((r,l)=>Q.createElement("div",{key:l,className:"annotation--multipleVariableValue--5-5xk"},Q.createElement(Kb,{valueProps:r,isHovered:t,variableContainerClassName:n}),l<e.value.length-1&&!a&&Q.createElement("span",null,", "))))}let a=`${(0,nL.m3)(e)}`;return e.variable?Q.createElement(ax.w,{dataTestId:"styledValueVariable",containerClassName:ea()(Ky,n),text:e.variable,disableHover:!0,isHovered:t,isInferred:e.isSuggestedVariable,tooltip:e.isSuggestedVariable?(0,eO.t)("dev_handoff.variables.inferred_value",{value:a}):a}):Q.createElement(Q.Fragment,null,a)}var KC=n(617617);function Kw({svg:e}){return Q.createElement(eM.B,{svg:e,className:ea()(Kh,Kf)})}var KT=n(258890),Kx=n(996620),KN=n(957069);function Kk({node:e,variable:t,isPreview:n=!1}){return t?n?Q.createElement(Q.Fragment,null,t.name):Q.createElement(ax.w,{containerClassName:Ky,text:t.name,disableHover:!0}):(0,KC.rO)(e.stackPrimaryAlignItems)?Q.createElement(eO.Tx,{id:"dev_handoff.annotations.auto"}):Q.createElement(Q.Fragment,null,(0,nL.nd)(e.stackSpacing,"px"))}function KS({node:e,isPreview:t=!1}){var n,a;let r=(0,ia.u)(null==(a=null==(n=e.boundVariables)?void 0:n.itemSpacing)?void 0:a.id);return Q.createElement("div",{className:r?void 0:"annotation--spacingProperty--RCjSM annotation--coloredProperty--OTQ6l"},Q.createElement("span",null,Q.createElement(Kk,{node:e,variable:r,isPreview:t})))}function KI({rawValues:e,variables:t,isPreview:n=!1}){var a;if(e.length!==t.length)throw Error("<ManySidedProperty /> must have the same number of rawValues and variables");let r=t.map((t,n)=>({value:e[n],format:"pixels",variable:null==t?void 0:t.name})),l=null==(a=r[0])?void 0:a.variable;for(let e of r)if(e.variable!==l){if(n)return Q.createElement(eO.Tx,{id:"fullscreen.mixed"});return Q.createElement(Kb,{variableContainerClassName:Ky,valueProps:{format:"mixed",value:r}})}return l?n?Q.createElement(Q.Fragment,null,l):Q.createElement(Kb,{variableContainerClassName:Ky,valueProps:r[0]}):e.some(t=>t!==e[0])?n?Q.createElement(eO.Tx,{id:"fullscreen.mixed"}):Q.createElement(Kb,{variableContainerClassName:Ky,valueProps:{format:"pixels",value:e}}):Q.createElement(Kb,{variableContainerClassName:Ky,valueProps:{format:"pixels",value:e[0]}})}function KA({node:e,isPreview:t=!1}){var n,a,r,l,i,o,s,c;let{stackTopPadding:d,stackRightPadding:u,stackBottomPadding:m,stackLeftPadding:p}=e,_=(0,ia.u)(null==(a=null==(n=e.boundVariables)?void 0:n.paddingTop)?void 0:a.id),f=(0,ia.u)(null==(l=null==(r=e.boundVariables)?void 0:r.paddingRight)?void 0:l.id),h=(0,ia.u)(null==(o=null==(i=e.boundVariables)?void 0:i.paddingBottom)?void 0:o.id),g=(0,ia.u)(null==(c=null==(s=e.boundVariables)?void 0:s.paddingLeft)?void 0:c.id),E=[_,f,h,g].some(e=>!!e);return Q.createElement("div",{className:ea()(E?void 0:"annotation--paddingProperty--ckvG6 annotation--coloredProperty--OTQ6l")},Q.createElement("span",null,Q.createElement(KI,{rawValues:[d,u,m,p],variables:[_,f,h,g],isPreview:t})))}function KP({node:e}){if("WRAP"===e.stackWrap)return Q.createElement(Kw,{svg:KN.A});switch(e.stackMode){case"HORIZONTAL":return Q.createElement(Kw,{svg:KT.A});case"VERTICAL":return Q.createElement(Kw,{svg:Kx.A});default:return null}}function KO({node:e}){if("WRAP"===e.stackWrap)return Q.createElement(eO.Tx,{id:"fullscreen.properties_panel.stack_panel.wrap"});switch(e.stackMode){case"HORIZONTAL":return Q.createElement(eO.Tx,{id:"dev_handoff.annotations.autolayout_horizontal"});case"VERTICAL":return Q.createElement(eO.Tx,{id:"dev_handoff.annotations.autolayout_vertical"});default:return null}}function KL({node:e}){if("NONE"===e.stackMode)return null;if("HORIZONTAL"===e.stackMode)switch(e.stackPrimaryAlignItems){case"MIN":switch(e.stackCounterAlignItems){case"MIN":return Q.createElement(eO.Tx,{id:"dev_handoff.annotations.alignment.top_left"});case"CENTER":return Q.createElement(eO.Tx,{id:"dev_handoff.annotations.alignment.left"});case"MAX":return Q.createElement(eO.Tx,{id:"dev_handoff.annotations.alignment.bottom_left"});case"BASELINE":return Q.createElement(eO.Tx,{id:"dev_handoff.annotations.alignment.baseline_left"})}case"CENTER":case"SPACE_BETWEEN":case"SPACE_EVENLY":switch(e.stackCounterAlignItems){case"MIN":return Q.createElement(eO.Tx,{id:"dev_handoff.annotations.alignment.top_center"});case"CENTER":return Q.createElement(eO.Tx,{id:"dev_handoff.annotations.alignment.center"});case"MAX":return Q.createElement(eO.Tx,{id:"dev_handoff.annotations.alignment.bottom_center"});case"BASELINE":return Q.createElement(eO.Tx,{id:"dev_handoff.annotations.alignment.baseline_center"})}case"MAX":switch(e.stackCounterAlignItems){case"MIN":return Q.createElement(eO.Tx,{id:"dev_handoff.annotations.alignment.top_right"});case"CENTER":return Q.createElement(eO.Tx,{id:"dev_handoff.annotations.alignment.right"});case"MAX":return Q.createElement(eO.Tx,{id:"dev_handoff.annotations.alignment.bottom_right"});case"BASELINE":return Q.createElement(eO.Tx,{id:"dev_handoff.annotations.alignment.baseline_right"})}}switch(e.stackPrimaryAlignItems){case"MIN":switch(e.stackCounterAlignItems){case"MIN":return Q.createElement(eO.Tx,{id:"dev_handoff.annotations.alignment.top_left"});case"CENTER":return Q.createElement(eO.Tx,{id:"dev_handoff.annotations.alignment.top_center"});case"MAX":return Q.createElement(eO.Tx,{id:"dev_handoff.annotations.alignment.top_right"});case"BASELINE":return null}case"CENTER":case"SPACE_BETWEEN":case"SPACE_EVENLY":switch(e.stackCounterAlignItems){case"MIN":return Q.createElement(eO.Tx,{id:"dev_handoff.annotations.alignment.left"});case"CENTER":return Q.createElement(eO.Tx,{id:"dev_handoff.annotations.alignment.center"});case"MAX":return Q.createElement(eO.Tx,{id:"dev_handoff.annotations.alignment.right"});case"BASELINE":return null}case"MAX":switch(e.stackCounterAlignItems){case"MIN":return Q.createElement(eO.Tx,{id:"dev_handoff.annotations.alignment.bottom_left"});case"CENTER":return Q.createElement(eO.Tx,{id:"dev_handoff.annotations.alignment.bottom_center"});case"MAX":return Q.createElement(eO.Tx,{id:"dev_handoff.annotations.alignment.bottom_right"});case"BASELINE":return null}}}function KM(e,t){let n=(0,$.d4)(e=>e.library),a=(0,ba.f$)(e),r=(0,eF.mJ)(a);if(!e||!a||!r)return null;let l=(0,lS.Gp)(e.key,[a],n);if(!l)return null;let i=l.value;return"DANGLING"===l.kind&&(i.style_type=t),i.description=r.description,i.name=r.name,i.isLocal="LOCAL"===l.kind,i}function KD(e,t){if(1===t)return e;let n=(100*t).toLocaleString("en",{maximumFractionDigits:2})+"%";return`${e} \xb7 ${n}`}function KR(e,t,n){let{opacity:a=1}=e;switch(e.type){case"SOLID":{if(!e.color)return null;let{color:r}=e,{a:l=1}=r,i=n({...r,a:l*a},{alphaInPercent:!0});return t?t.name:i}case"GRADIENT_LINEAR":return KD((0,eO.t)("dev_handoff.selection_colors.gradient_linear"),a);case"GRADIENT_ANGULAR":return KD((0,eO.t)("dev_handoff.selection_colors.gradient_angular"),a);case"GRADIENT_DIAMOND":return KD((0,eO.t)("dev_handoff.selection_colors.gradient_diamond"),a);case"GRADIENT_RADIAL":return KD((0,eO.t)("dev_handoff.selection_colors.gradient_radial"),a);case"IMAGE":return KD((0,eO.t)("dev_handoff.annotations.image"),a);case"VIDEO":return KD((0,eO.t)("dev_handoff.annotations.video"),a);default:return null}}function KF({paints:e,styleRef:t,variables:n}){let a=null==n?void 0:n[0],r=(0,sX.Ig)(),l=(0,ia.u)(null==a?void 0:a.id),i=KM(t,"FILL");return 0===e.length?null:i?Q.createElement(Q.Fragment,null,i.name):e.length>1?Q.createElement(eO.Tx,{id:"dev_handoff.annotations.multiple"}):Q.createElement(Q.Fragment,null,KR(e[0],l,r))}function KB({paints:e}){let t=e[0];return Q.createElement(sQ.J,{className:Kg,tabIndex:-1,paint:t,allowMouseDownPropagation:!0})}function KU({paint:e,variableAlias:t}){let n=(0,sX.Ig)(),a=(0,ia.u)(null==t?void 0:t.id),r=KR(e,a,n);return r?Q.createElement("div",{className:KE},Q.createElement(sQ.J,{className:Kg,paint:e,tabIndex:-1,allowMouseDownPropagation:!0}),Q.createElement("span",{className:Kv,title:r},a?Q.createElement(ax.w,{containerClassName:Ky,text:r,disableHover:!0}):r)):null}function KH({styleRef:e,styleType:t,hideIcon:n=!1}){let a=KM(e,t);return(!function(e){let t=(0,$.d4)(e=>e.library),n=(0,ba.f$)(e),a=n?(0,lS.Gp)(e.key,[n],t):void 0;(0,lS.w$)(a)}(e),a)?Q.createElement("div",{className:KE},!n&&Q.createElement("div",{className:ea()("annotation--styleChit--yCQ3O annotation--chit--3je6E",Kh)},Q.createElement(s1.zi,{dsStyle:a})),Q.createElement("span",{className:Kv,title:a.name},a.name)):null}function KV({paints:e,styleRef:t,variables:n}){let{data:a}=e;return t?Q.createElement(KH,{styleRef:t,styleType:"FILL"}):0===a.length?null:Q.createElement("div",{className:"annotation--mixedValues--Z0qIk"},a.map((e,t)=>Q.createElement(KU,{key:t,paint:e,variableAlias:null==n?void 0:n[t]})))}var KG=n(666139);function KK({effects:e}){if(0===e.length)return null;if(e.length>1)return Q.createElement(eO.Tx,{id:"fullscreen.mixed"});switch(e[0].type){case"DROP_SHADOW":return Q.createElement(eO.Tx,{id:"dev_handoff.annotations.shadow"});case"BACKGROUND_BLUR":return Q.createElement(eO.Tx,{id:"fullscreen.properties_panel.effects.background_blur"});case"FOREGROUND_BLUR":return Q.createElement(eO.Tx,{id:"fullscreen.properties_panel.effects.layer_blur"});case"INNER_SHADOW":return Q.createElement(eO.Tx,{id:"fullscreen.properties_panel.effects.inner_shadow"});case void 0:return null}}function KW({effects:e,styleRef:t}){return Q.createElement(Q.Fragment,null,e.map((e,n)=>Q.createElement(Kj,{effect:e,styleRef:t,key:n})))}let Kz=new a5.SU;function Kj({effect:e,styleRef:t}){var n,a;let r=(0,sX.Ig)(),l=t&&Q.createElement(KY,{styleRef:t});switch(e.type){case"DROP_SHADOW":case"INNER_SHADOW":{let{color:t}=e,i=t?r(t,{alphaInPercent:!0}):null,o=[null==(n=e.offset)?void 0:n.x,null==(a=e.offset)?void 0:a.y,e.radius,e.spread].filter(e=>void 0!==e).join(", ");return Q.createElement("div",null,l,Q.createElement("span",null,Q.createElement(KK,{effects:[e]})),t&&Q.createElement(Q.Fragment,null,Q.createElement("span",null),Q.createElement("div",{className:KE},Q.createElement(sQ.J,{className:ea()(Kg,"annotation--chitInline--vG6cM"),color:t,allowMouseDownPropagation:!0}),Q.createElement("span",{className:Kv,title:i||void 0},i))),Q.createElement("span",null),Q.createElement("span",null,o),e.blendMode&&"NORMAL"!==e.blendMode&&Q.createElement(Q.Fragment,null,Q.createElement("span",null),Q.createElement("span",null,Kz.format(e.blendMode))))}case"BACKGROUND_BLUR":case"FOREGROUND_BLUR":return Q.createElement("div",null,l,Q.createElement("span",null,Q.createElement(KK,{effects:[e]})),void 0!==e.radius&&Q.createElement("span",null,` ${(0,nL.nd)(e.radius,"px")}`));case void 0:return null}}function KY({styleRef:e}){let t=(0,ba.f$)(e),n=(0,eF.mJ)(t);return t&&n?Q.createElement("div",null,n.name):null}let KZ=e=>{switch(e){case"RIGHT":return(0,eO.t)("inspect_panel.typography.align_right");case"CENTER":return(0,eO.t)("inspect_panel.typography.align_center");case"JUSTIFIED":return(0,eO.t)("inspect_panel.typography.align_justified");case"LEFT":return(0,eO.t)("dev_handoff.annotations.align_left")}};function KX(){return Q.createElement(eM.B,{svg:e1.A,className:ea()(Kh,Kf)})}function Kq({textAlignHorizontal:e}){return Q.createElement(Q.Fragment,null,KZ(e))}function KJ({lineHeightOrMixed:e,variableAlias:t,isPreview:n}){let a=(0,ia.u)(null==t?void 0:t.id);if("mixed"===e)return Q.createElement(eO.Tx,{id:"fullscreen.mixed"});if(a&&n)return Q.createElement(Q.Fragment,null,a.name);if("PERCENT"===e.units&&100===e.value)return Q.createElement(eO.Tx,{id:"dev_handoff.annotations.auto"});let r="RAW"===e.units?{value:100*e.value,units:"PERCENT"}:e;return Q.createElement(nL.lN,{variableContainerClassName:Ky,valueProps:{format:"fig_number",value:r,variable:null==a?void 0:a.name}})}function KQ({fontNameOrMixed:e,variableAlias:t,isPreview:n}){let a=(0,ia.u)(null==t?void 0:t.id);return"mixed"===e?Q.createElement(eO.Tx,{id:"fullscreen.mixed"}):a&&n?Q.createElement(Q.Fragment,null,a.name):Q.createElement(nL.lN,{variableContainerClassName:Ky,valueProps:{value:e.family,variable:null==a?void 0:a.name}})}function K$({fontWeightOrMixed:e,variableAlias:t,isPreview:n}){let a=(0,ia.u)(null==t?void 0:t.id);return"mixed"===e?Q.createElement(eO.Tx,{id:"fullscreen.mixed"}):(a&&a.resolvedType!==eU.rXF.FLOAT&&(a=null),a&&n)?Q.createElement(Q.Fragment,null,a.name):Q.createElement(nL.lN,{variableContainerClassName:Ky,valueProps:{value:e,variable:null==a?void 0:a.name}})}var K0=n(595869),K1=n(560185),K2=n(30562),K5=n(438806),K4=n(904595),K3=n(235107),K6=n(58502),K7=n(144919);function K8({node:e}){var t;let{symbolId:n}=e;if(!n)return Q.createElement(Q.Fragment,null);let a=tN.qo.instance.get(n);if(!a)return Q.createElement(Q.Fragment,null);if(a.isState){let e=null==(t=a.parentNode)?void 0:t.name;return Q.createElement(Q.Fragment,null,`${e} (${a.name})`)}return Q.createElement(Q.Fragment,null,a.name)}let K9=new Map([[eU.L5V.HEIGHT,{label:Q.createElement(eO.Tx,{id:"fullscreen.properties_panel.transform_panel.height"}),category:"dimension",Icon:()=>Q.createElement(Kw,{svg:K5.A}),PreviewValue:({node:e})=>Q.createElement(Wr,{value:e.size.y,variableAlias:e.boundVariables.height,isPreview:!0}),DisplayValue:({node:e})=>Q.createElement(Wr,{value:e.size.y,variableAlias:e.boundVariables.height}),index:0}],[eU.L5V.MIN_HEIGHT,{label:Q.createElement(eO.Tx,{id:"fullscreen.properties_panel.stack_panel.minmax.min_height_tt"}),category:"dimension",Icon:()=>Q.createElement(Kw,{svg:K5.A}),PreviewValue:({node:e})=>Q.createElement(Wr,{value:e.minHeight,variableAlias:e.boundVariables.minHeight,isPreview:!0}),DisplayValue:({node:e})=>Q.createElement(Wr,{value:e.minHeight,variableAlias:e.boundVariables.minHeight}),index:0}],[eU.L5V.MAX_HEIGHT,{label:Q.createElement(eO.Tx,{id:"fullscreen.properties_panel.stack_panel.minmax.max_height_tt"}),category:"dimension",Icon:()=>Q.createElement(Kw,{svg:K5.A}),PreviewValue:({node:e})=>Q.createElement(Wr,{value:e.maxHeight,variableAlias:e.boundVariables.maxHeight,isPreview:!0}),DisplayValue:({node:e})=>Q.createElement(Wr,{value:e.maxHeight,variableAlias:e.boundVariables.maxHeight}),index:0}],[eU.L5V.WIDTH,{label:Q.createElement(eO.Tx,{id:"fullscreen.properties_panel.transform_panel.width"}),category:"dimension",Icon:()=>Q.createElement(Kw,{svg:K3.A}),PreviewValue:({node:e})=>Q.createElement(Wr,{value:e.size.x,variableAlias:e.boundVariables.width,isPreview:!0}),DisplayValue:({node:e})=>Q.createElement(Wr,{value:e.size.x,variableAlias:e.boundVariables.width}),index:0}],[eU.L5V.MIN_WIDTH,{label:Q.createElement(eO.Tx,{id:"fullscreen.properties_panel.stack_panel.minmax.min_width_tt"}),category:"dimension",Icon:()=>Q.createElement(Kw,{svg:K3.A}),PreviewValue:({node:e})=>Q.createElement(Wr,{value:e.minWidth,variableAlias:e.boundVariables.minWidth,isPreview:!0}),DisplayValue:({node:e})=>Q.createElement(Wr,{value:e.minWidth,variableAlias:e.boundVariables.minWidth}),index:0}],[eU.L5V.MAX_WIDTH,{label:Q.createElement(eO.Tx,{id:"fullscreen.properties_panel.stack_panel.minmax.max_width_tt"}),category:"dimension",Icon:()=>Q.createElement(Kw,{svg:K3.A}),PreviewValue:({node:e})=>Q.createElement(Wr,{value:e.maxWidth,variableAlias:e.boundVariables.maxWidth,isPreview:!0}),DisplayValue:({node:e})=>Q.createElement(Wr,{value:e.maxWidth,variableAlias:e.boundVariables.maxWidth}),index:0}],[eU.L5V.CORNER_RADIUS,{label:Q.createElement(eO.Tx,{id:"fullscreen.properties_panel.transform_panel.corner_radius"}),category:"dimension",Icon:()=>Q.createElement(Kw,{svg:K0.A}),PreviewValue:({node:e})=>Q.createElement(Wn,{node:e,isPreview:!0}),DisplayValue:({node:e})=>Q.createElement(Wn,{node:e}),index:0}],[eU.L5V.STACK_MODE,{label:Q.createElement(eO.Tx,{id:"dev_handoff.annotations.autolayout_mode"}),category:"stack",Icon:({node:e})=>Q.createElement(KP,{node:e}),PreviewValue:({node:e})=>Q.createElement(KO,{node:e}),DisplayValue:({node:e})=>Q.createElement(KO,{node:e}),index:0}],[eU.L5V.STACK_ALIGNMENT,{label:Q.createElement(eO.Tx,{id:"dev_handoff.annotations.alignment"}),category:"stack",Icon:({node:e})=>Q.createElement(Kw,{svg:(0,ej.GN)(e)}),PreviewValue:({node:e})=>Q.createElement(KL,{node:e}),DisplayValue:({node:e})=>Q.createElement(KL,{node:e}),index:0}],[eU.L5V.STACK_SPACING,{label:Q.createElement(eO.Tx,{id:"inspect_panel.properties.gap"}),category:"stack",Icon:({node:e})=>Q.createElement(Kw,{svg:"HORIZONTAL"===e.stackMode?K1.A:K2.A}),PreviewValue:({node:e})=>Q.createElement(KS,{node:e,isPreview:!0}),DisplayValue:({node:e})=>Q.createElement(KS,{node:e}),index:0}],[eU.L5V.STACK_PADDING,{label:Q.createElement(eO.Tx,{id:"inspect_panel.properties.padding"}),category:"stack",Icon:()=>Q.createElement(Kw,{svg:K4.A}),PreviewValue:({node:e})=>Q.createElement(KA,{node:e,isPreview:!0}),DisplayValue:({node:e})=>Q.createElement(KA,{node:e}),index:0}],[eU.L5V.TEXT_STYLE,{label:Q.createElement(eO.Tx,{id:"dev_handoff.annotations.text_style"}),category:"text",Icon:KX,PreviewValue:({node:e})=>Q.createElement(Wi,{styleRef:e.inheritedTextStyle}),DisplayValue:({node:e})=>Q.createElement(KH,{styleRef:e.inheritedTextStyle,styleType:"TEXT",hideIcon:!0}),index:0}],[eU.L5V.FONT_FAMILY,{label:Q.createElement(eO.Tx,{id:"inspect_panel.typography.font"}),category:"text",Icon:KX,PreviewValue:({node:e})=>{var t;return Q.createElement(KQ,{fontNameOrMixed:e.fontNameOrMixed,variableAlias:(0,eo.kc)().variables_typography_dev_mode?null==(t=e.boundVariables.fontFamily)?void 0:t[0]:void 0,isPreview:!0})},DisplayValue:({node:e})=>{var t;return Q.createElement(KQ,{fontNameOrMixed:e.fontNameOrMixed,variableAlias:(0,eo.kc)().variables_typography_dev_mode?null==(t=e.boundVariables.fontFamily)?void 0:t[0]:void 0})},index:0}],[eU.L5V.FONT_STYLE,{label:Q.createElement(eO.Tx,{id:"inspect_panel.code.font_style"}),category:"text",Icon:KX,PreviewValue:({node:e})=>Q.createElement(Q.Fragment,null,e.fontName.style),DisplayValue:({node:e})=>Q.createElement(Q.Fragment,null,e.fontName.style),index:0}],[eU.L5V.FONT_SIZE,{label:Q.createElement(eO.Tx,{id:"dev_handoff.annotations.font_size"}),category:"text",Icon:KX,PreviewValue:({node:e})=>{var t;return Q.createElement(Wr,{value:e.fontSizeOrMixed,variableAlias:(0,eo.kc)().variables_typography_dev_mode?null==(t=e.boundVariables.fontSize)?void 0:t[0]:void 0,isPreview:!0})},DisplayValue:({node:e})=>{var t;return Q.createElement(Wr,{value:e.fontSizeOrMixed,variableAlias:(0,eo.kc)().variables_typography_dev_mode?null==(t=e.boundVariables.fontSize)?void 0:t[0]:void 0})},index:0}],[eU.L5V.LINE_HEIGHT,{label:Q.createElement(eO.Tx,{id:"fullscreen.type_panel.line_height"}),category:"text",Icon:KX,PreviewValue:({node:e})=>{var t;return Q.createElement(KJ,{lineHeightOrMixed:e.lineHeightOrMixed,variableAlias:(0,eo.kc)().variables_typography_dev_mode?null==(t=e.boundVariables.lineHeight)?void 0:t[0]:void 0,isPreview:!0})},DisplayValue:({node:e})=>{var t;return Q.createElement(KJ,{lineHeightOrMixed:e.lineHeightOrMixed,variableAlias:(0,eo.kc)().variables_typography_dev_mode?null==(t=e.boundVariables.lineHeight)?void 0:t[0]:void 0})},index:0}],[eU.L5V.LETTER_SPACING,{label:Q.createElement(eO.Tx,{id:"fullscreen.type_panel.letter_spacing"}),category:"text",Icon:KX,PreviewValue:({node:e})=>{var t;return Q.createElement(Wl,{value:e.letterSpacingOrMixed,variableAlias:(0,eo.kc)().variables_typography_dev_mode?null==(t=e.boundVariables.letterSpacing)?void 0:t[0]:void 0,isPreview:!0})},DisplayValue:({node:e})=>{var t;return Q.createElement(Wl,{value:e.letterSpacingOrMixed,variableAlias:(0,eo.kc)().variables_typography_dev_mode?null==(t=e.boundVariables.letterSpacing)?void 0:t[0]:void 0})},index:0}],[eU.L5V.TEXT_ALIGN_HORIZONTAL,{label:Q.createElement(eO.Tx,{id:"dev_handoff.annotations.text_align"}),category:"text",Icon:KX,PreviewValue:({node:e})=>Q.createElement(Kq,{textAlignHorizontal:e.textAlignHorizontal}),DisplayValue:({node:e})=>Q.createElement(Kq,{textAlignHorizontal:e.textAlignHorizontal}),index:0}],[eU.L5V.FONT_WEIGHT,{label:Q.createElement(eO.Tx,{id:"inspect_panel.typography.weight"}),category:"text",Icon:KX,PreviewValue:({node:e})=>{var t;return Q.createElement(K$,{fontWeightOrMixed:e.fontWeightOrMixed,variableAlias:(0,eo.kc)().variables_typography_dev_mode?null==(t=e.boundVariables.fontStyle)?void 0:t[0]:void 0,isPreview:!0})},DisplayValue:({node:e})=>{var t;return Q.createElement(K$,{fontWeightOrMixed:e.fontWeightOrMixed,variableAlias:(0,eo.kc)().variables_typography_dev_mode?null==(t=e.boundVariables.fontStyle)?void 0:t[0]:void 0})},index:0}],[eU.L5V.FILL,{label:Q.createElement(eO.Tx,{id:"fullscreen.properties_panel.fill.fill"}),category:"paint",Icon:({node:e})=>Q.createElement(KB,{paints:e.fillPaints.data}),PreviewValue:({node:e})=>Q.createElement(KF,{paints:e.fillPaints.data,variables:e.boundVariables.fills,styleRef:e.inheritedFillStyle}),DisplayValue:({node:e})=>Q.createElement(KV,{paints:e.fillPaints,styleRef:e.inheritedFillStyle,variables:e.boundVariables.fills}),index:0}],[eU.L5V.STROKE,{label:Q.createElement(eO.Tx,{id:"fullscreen.properties_panel.fill.stroke"}),category:"paint",Icon:({node:e})=>Q.createElement(KB,{paints:e.strokePaints.data}),PreviewValue:({node:e})=>Q.createElement(KF,{paints:e.strokePaints.data,variables:e.boundVariables.strokes,styleRef:e.inheritedFillStyle}),DisplayValue:({node:e})=>Q.createElement(KV,{paints:e.strokePaints,styleRef:e.inheritedFillStyleForStroke,variables:e.boundVariables.strokes}),index:0}],[eU.L5V.STROKE_WIDTH,{label:Q.createElement(eO.Tx,{id:"fullscreen.properties_panel.borders.stroke_width"}),category:"paint",Icon:()=>Q.createElement(Kw,{svg:K6.A}),PreviewValue:({node:e})=>Q.createElement(Wa,{node:e,isPreview:!0}),DisplayValue:({node:e})=>Q.createElement(Wa,{node:e}),index:0}],[eU.L5V.EFFECT,{label:Q.createElement(eO.Tx,{id:"inspect_panel.code.effect"}),category:"paint",Icon:function(){return Q.createElement(Kw,{svg:KG.A})},PreviewValue:({node:e})=>Q.createElement(KK,{effects:e.effects.filter(e=>e.visible)}),DisplayValue:({node:e})=>Q.createElement(KW,{effects:e.effects.filter(e=>e.visible),styleRef:e.inheritedEffectStyle}),index:0}],[eU.L5V.OPACITY,{label:Q.createElement(eO.Tx,{id:"fullscreen.scrubbable.opacity"}),category:"paint",Icon:()=>Q.createElement(Kw,{svg:K7.A}),PreviewValue:({node:e})=>Q.createElement(Wt,{node:e,isPreview:!0}),DisplayValue:({node:e})=>Q.createElement(Wt,{node:e}),index:0}],[eU.L5V.COMPONENT,{label:Q.createElement(eO.Tx,{id:"dev_handoff.annotations.component"}),category:"component",Icon:()=>Q.createElement(Kw,{svg:e$.A}),PreviewValue:K8,DisplayValue:K8,index:0}]]),We=0;function Wt({node:e,isPreview:t=!1}){var n;let a=null==(n=e.boundVariables)?void 0:n.opacity,r=(0,ia.u)((null==a?void 0:a.id)??void 0);return r&&t?Q.createElement(Q.Fragment,null,r.name):Q.createElement(Kb,{variableContainerClassName:Ky,valueProps:{format:"percent",value:e.opacity,variable:null==r?void 0:r.name}})}function Wn({node:e,isPreview:t=!1}){var n,a,r,l,i,o,s,c;let{rectangleTopLeftCornerRadius:d,rectangleTopRightCornerRadius:u,rectangleBottomRightCornerRadius:m,rectangleBottomLeftCornerRadius:p}=e,_=(0,ia.u)(null==(a=null==(n=e.boundVariables)?void 0:n.topLeftRadius)?void 0:a.id),f=(0,ia.u)(null==(l=null==(r=e.boundVariables)?void 0:r.topRightRadius)?void 0:l.id),h=(0,ia.u)(null==(o=null==(i=e.boundVariables)?void 0:i.bottomRightRadius)?void 0:o.id),g=(0,ia.u)(null==(c=null==(s=e.boundVariables)?void 0:s.bottomLeftRadius)?void 0:c.id);return Q.createElement(KI,{rawValues:[d,u,m,p],variables:[_,f,h,g],isPreview:t})}function Wa({node:e,isPreview:t=!1}){var n,a,r,l,i,o,s,c;let{borderTopWeight:d,borderRightWeight:u,borderBottomWeight:m,borderLeftWeight:p}=e,_=(0,ia.u)(null==(a=null==(n=e.boundVariables)?void 0:n.strokeTopWeight)?void 0:a.id),f=(0,ia.u)(null==(l=null==(r=e.boundVariables)?void 0:r.strokeRightWeight)?void 0:l.id),h=(0,ia.u)(null==(o=null==(i=e.boundVariables)?void 0:i.strokeBottomWeight)?void 0:o.id),g=(0,ia.u)(null==(c=null==(s=e.boundVariables)?void 0:s.strokeLeftWeight)?void 0:c.id);return Q.createElement(KI,{rawValues:[d,u,m,p],variables:[_,f,h,g],isPreview:t})}function Wr({value:e,variableAlias:t,isPreview:n}){let a=(0,ia.u)(null==t?void 0:t.id);return null===e?null:"mixed"===e?Q.createElement(eO.Tx,{id:"fullscreen.mixed"}):a&&n?Q.createElement(Q.Fragment,null,a.name):Q.createElement(Kb,{variableContainerClassName:Ky,valueProps:{value:(0,nL.nd)(e,"px"),variable:null==a?void 0:a.name}})}function Wl({value:e,variableAlias:t,isPreview:n}){let a=(0,ia.u)(null==t?void 0:t.id);return"mixed"===e?Q.createElement(eO.Tx,{id:"fullscreen.mixed"}):a&&n?Q.createElement(Q.Fragment,null,a.name):Q.createElement(Kb,{variableContainerClassName:Ky,valueProps:{format:"fig_number",value:e,variable:null==a?void 0:a.name}})}function Wi({styleRef:e}){let t=(0,ba.f$)(e),n=(0,eF.mJ)(t);return n?Q.createElement(Q.Fragment,null,n.name):null}function Wo(){let e=(0,t5.IL)(),t=(0,e_.Xr)(Ko.J);return Q.useCallback(n=>{cU.l7.user("clear-annotations",()=>{n.setAnnotation(null);let a=(0,eW.kh)(tN.qo.instance,n.guid);e("delete_annotation",{nodeId:n.guid,nodeType:n.type,tlfId:null==a?void 0:a.guid}),t(!1),(0,Cs.d)().lockMouseMoves.set(!1),lT.Y5.triggerAction("commit")})},[t,e])}K9.forEach(e=>{e.index=We++});var Ws=n(287686),Wc=n(819165);let Wd=(0,rT.jz)("220px");var Wu=((O=Wu||{})[O.ALIGNED=0]="ALIGNED",O[O.ABOVE=1]="ABOVE",O[O.BELOW=2]="BELOW",O);function Wm(e,t,n){let{x:a,y:r,w:l,h:i}=e.absoluteBoundingBox,{x:o,w:s}=t.absoluteBoundingBox,{offsetX:c,offsetY:d,zoomScale:u}=n,m=a-o,p=o+s-(a+l),_=m<p,f=Math.min(Math.max(20*u,5),20);return _?{lineWidth:m*u+f,offsetX:(o-c)*u-f,offsetY:(r+i/2-d)*u,isLeftAligned:_}:{lineWidth:p*u+f,offsetX:(o+s-c)*u+f,offsetY:(r+i/2-d)*u,isLeftAligned:_}}function Wp(e,t,n){let a=[];for(let t of e){let e=(n||t.height)+8;for(a.push({basis:t.offsetY-e/2,length:1,height:e});a.length>1&&function(e,t){let n=e.basis+e.height-t.basis;return!(n<=0)&&(e.height+=t.height,e.length+=t.length,e.basis-=n*t.height/e.height,!0)}(a[a.length-2],a[a.length-1]);)a.pop()}let r=0;for(let l of a){let{basis:a}=l;for(let i=0;i<l.length;i++){let l=e[r],i=(n||l.height)+8;t[l.node.guid]=a+i/2,a+=i,r++}}}function W_(e,t,n){let a=[],r=[],l={};for(let e of t)e.isLeftAligned?a.push(e):r.push(e);return Wp(a,l,n?6:void 0),Wp(r,l,n?6:void 0),t.map(t=>{let{y:n,h:a,w:r}=t.node.absoluteBoundingBox,i=l[t.node.guid],o=(n-e.offsetY)*e.zoomScale,s=t.lineWidth,c=0,d=0,u=t.lineWidth;return i<o?(c=1,d=o-i,u+=r/2*e.zoomScale):i>(n+a-e.offsetY)*e.zoomScale&&(c=2,d=i-(n+a-e.offsetY)*e.zoomScale,u+=r/2*e.zoomScale),{...t,offsetY:i,lineAlignment:c,lineHeight:d,lineWidth:u,originalLineWidth:s}})}function Wf({node:e,setDimensions:t,offsetX:n,offsetY:a,lineWidth:r,originalLineWidth:l,lineHeight:i,lineAlignment:o,isLeftAligned:s,viewportInfo:c,shouldMinimize:d,canOverlapNode:u=!1,children:m}){let p=(0,t5.IL)(),_=(0,Q.useRef)(null),f=(0,ng.w)(d?void 0:_),h=(0,$.d4)(e=>e.mirror.appModel.hoveredNode),[g,E]=(0,Q.useState)(!1),v=(0,ti._I)(),y=(0,gx.T)("quick_handoff"),b=(0,ae.dH)(),C="ui3"===(0,et.DP)().version,w=e.guid===h||g,T=(0,eF.uQ)(),x=(0,ef.md)(Ko.J),N=x&&T===e.guid,k=d&&!N,S=b===cl.NLJ.ANNOTATE&&!w&&null!==T&&T!==e.guid,I=N||c.zoomScale>=.05&&(e.guid===T||e.annotations.length>0),A=(0,Wc.LO)(),P=Q.useCallback(e=>{(0,Cs.d)().lockMouseMoves.set(e)},[]);(0,Q.useLayoutEffect)(()=>{f&&t(e.guid,f)},[e.guid,f,t]);let O={top:`${c.y+c.height/2}px`,left:`${c.x+c.width/2}px`,transform:`translate(${n}px, calc(${a}px - 50%))`};return Q.createElement("div",{ref:_,className:ea()("annotation--annotationWrapper--pKMw2",{"annotation--wrapperMinimized--UOExu":k&&!w,[Kd]:N}),style:O,"data-testid":"annotationWrapper"},I&&Q.createElement(Q.Fragment,null,Q.createElement("div",{className:ea()("annotation--annotationLine--jr4Mc",{"annotation--annotationLineLeftAligned--W-1DZ":s,"annotation--annotationLineAboveNode--WwqWD":o===Wu.ABOVE,"annotation--annotationLineBelowNode--JeafT":o===Wu.BELOW}),style:{width:r,height:i}},Q.createElement("div",{className:ea()("annotation--annotationLineStartDot--x6RNc",{"annotation--annotationLineStartDotHovered--Chqa7":!v&&w})}),Q.createElement("div",{className:"annotation--annotationLineEndDot--Lsq0a"})),Q.createElement("div",{onClick:v?void 0:y,onMouseOut:()=>{P(!1),E(!1)},onMouseOver:()=>{x||(P(!0),eV.Uc(e.guid),k&&!g&&p("hover_minimized_annotation",{nodeId:e.guid,nodeType:e.type}),E(!0))},className:ea()({"annotation--annotationLeftAligned--FHQRp":s,"annotation--annotationRightAligned--VrH8e":!s,"annotation--annotationHovered--QUHJv":!N&&w}),style:{transform:function(e,t,n,a,r,l,i,o){let s=eU.Ez5.isFullscreenYScrollbarNeeded()&&!o;if(n){let n=`calc(${-a}px - ${e.width/2}px + ${i.left}px + 4px)`,o=l?`calc(${r+t*e.zoomScale}px - 100% - 8px)`:`calc(${r}px - 100% - 8px)`;return`translate(min(${o}, max(-100%, ${n})), 0)`}{let n=l?`calc(-${r+t*e.zoomScale}px + 8px)`:`calc(-${r}px + 8px)`,o=`calc(${e.width/2}px - ${a}px - 100% - ${i.right}px - ${s?16:4}px)`;return`translate(max(${n}, min(0px, ${o})), 0)`}}(c,e.absoluteBoundingBox.w,s,n,l,u,A,C)}},Q.createElement("div",{className:ea()("annotation--annotationHoverTarget--4y3Xc",{"annotation--annotationHoverTargetLeftAligned--G1twU":s})}),v&&(!k||w)&&m(S))))}var Wh=n(378789),Wg=n(159696);function WE({viewportInfo:e,nodeInfo:t,setDimensions:n}){let a=function(){let e=(0,t5.IL)(),{Sprig:t}=(0,al.A)();return Q.useCallback((n,a,r)=>{cU.l7.user(r?"edit-annotation":"create-annotation",()=>{n.setAnnotation(a);let l=(0,eW.kh)(tN.qo.instance,n.guid),i={nodeType:n.type,nodeId:n.guid,tlfId:(null==l?void 0:l.guid)??n.guid,hasText:!!a.label,numProperties:a.properties.length};r?e("edit_annotation",i):(e("create_annotation",i),t("track","create_annotation")),lT.Y5.triggerAction("commit")})},[t,e])}(),r=Wo(),l=(0,e_.Xr)(Ko.J),{node:i}=t,o=i.annotations[0],[s,c]=Q.useState((null==o?void 0:o.label)??""),[d,u]=Q.useState((null==o?void 0:o.properties)??[]),m=Q.useCallback(()=>{let e=o&&(""!==o.label||o.properties.length>0),t=0===(0,Ks.A)(s).length;t&&0===d.length?o&&r(i):a(i,{label:t?"":s,properties:d},e),l(!1),(0,Cs.d)().lockMouseMoves.set(!1)},[o,s,d,r,i,a,l]);return Q.createElement(Q.Fragment,null,Q.createElement(Ww,{viewportInfo:e,onPointerDown:m}),Q.createElement(Wf,{key:t.node.guid,node:t.node,viewportInfo:e,shouldMinimize:!1,offsetX:t.offsetX,offsetY:t.offsetY,lineWidth:t.lineWidth,originalLineWidth:t.originalLineWidth,lineHeight:t.lineHeight,lineAlignment:t.lineAlignment,isLeftAligned:t.isLeftAligned,setDimensions:n,canOverlapNode:!0},()=>Q.createElement(Wv,{node:t.node,saveAnnotation:m,inputText:s,setInputText:c,inputProperties:d,setInputProperties:u})))}function Wv({node:e,saveAnnotation:t,inputText:n,setInputText:a,inputProperties:r,setInputProperties:l}){let i=(0,t5.IL)(),o=Wo(),[s,c]=Q.useState(-1),[d,u]=Q.useState(!1),[m,p]=Q.useState(!1),_=Q.useRef(null),f=Q.useRef(null),h=Q.useRef(null),{availableProperties:g,selectedProperties:E}=Q.useMemo(()=>{let t=[],n=[];for(let a of Wy)r.some(e=>e.type===a.type)?n.push(a):(0,Ws.J)(e,a.type,!0)&&t.push(a);return{availableProperties:t,selectedProperties:n}},[e,r]);Q.useEffect(()=>{i("show_annotation_dialog",{nodeId:e.guid,nodeType:e.type})},[i,e.guid,e.type]);let v=Q.useCallback(()=>{var e;null==(e=_.current)||e.focus()},[]),y=Q.useCallback(e=>{c(-1),u(!1),l([...r,{type:e}])},[l,r]);function b(e){l(r.filter(t=>t.type!==e)),v()}let C=Q.useCallback(()=>{(0,Cs.d)().lockMouseMoves.set(!1)},[]),w=Q.useCallback((e,t)=>{if(c(e),p(t),t&&f.current){for(let t of f.current.children)if(t.getAttribute("data-property-type")===`property-${g[e]}`){t.focus();break}}},[c,p,g]),T=Q.useCallback(()=>{var e;d?(u(!1),c(-1),null==(e=h.current)||e.focus()):t()},[d,t]),x=Q.useCallback(()=>{d&&(-1===s?w(g.length-1,!0):s>0&&w(s-1,!0))},[g.length,s,w,d]),N=Q.useCallback((e,t)=>{if(d){-1===s?w(0,!0):s<g.length-1&&w(s+1,!0);return}e&&!t&&(u(!0),w(0,!0))},[g.length,d,s,w]),k=(0,nh.v_)("createAnnotation","keydown",(0,Q.useCallback)(e=>{var t;"Escape"===e.key?T():"ArrowUp"===e.key?(x(),e.stopPropagation()):"ArrowDown"===e.key?(N(e.ctrlKey||e.metaKey,e.shiftKey),e.stopPropagation()):("Enter"===e.key||" "===e.key)&&s>=0&&s<g.length&&(y(g[s].type),e.preventDefault(),null==(t=h.current)||t.focus())},[g,N,x,T,s,y]));Q.useEffect(()=>(document.addEventListener("keydown",k),()=>{document.removeEventListener("keydown",k)}),[k]);let S=nh.qP("annotationLabelInput","submit",a),I=nh.qP("annotationLabelInput","enter",t),A=e=>{u(!d),e?w(0,!0):c(-1)},P=0===n.length&&0===E.length;return Q.createElement(gU.vL,{name:"create-annotation",focusOnMount:!0,handleKeyDown:e=>{let{event:n}=e;"Escape"===n.key&&(e.accept(),t())}},Q.createElement("div",{onPointerDown:hk.dG},Q.createElement("div",{className:ea()(Ku,eK.Dm)},Q.createElement("div",{className:ea()(Km,{"annotation--contentContainerNoProperties--pc2WE":0===E.length})},Q.createElement("div",{dir:"auto"},Q.createElement(id.X,{fallback:null,errorFallback:null,mountBehavior:"focus",placeholder:(0,eO.t)("dev_handoff.annotations.add_annotation"),defaultValue:n,onInputChange:S,onBlur:ey.lQ,hideToolbar:!0,onEnterKeyPressed:I})),E.length>0&&Q.createElement("div",{className:Kp},E.map(t=>Q.createElement(WC,{key:`selected-${t.type}`,onRemoveProp:b,node:e,property:t})))),Q.createElement("div",{className:"annotation--authoringRow--cIo3-"},Q.createElement(ns.GG,{className:ea()("annotation--addPropertyButton--67vPO",{"annotation--active--Q00x6":d}),forwardedRef:h,onMouseDown:e=>A(hC(e)),onKeyDown:e=>{d||"Enter"!==e.code&&"Space"!==e.code||(A(!0),e.preventDefault(),e.stopPropagation())},tabIndex:0,"data-tooltip-type":nO.Ib.TEXT,"data-tooltip":(0,eO.t)("dev_handoff.annotations.pin_properties_tooltip"),recordingKey:"createAnnotationPinPropertyButton"},Q.createElement(eM.B,{className:"annotation--plusIcon--Ove-l",svg:s9.A,width:"16",height:"16"}),Q.createElement(eO.Tx,{id:"dev_handoff.annotations.pin_properties_label"})),Q.createElement(aJ.K0,{key:"trash",svg:Wh.A,className:ea()("annotation--iconButton--w7kfn",Kh),onMouseDown:()=>{o(e),C()},tabIndex:0,disabled:P,"data-tooltip-type":nO.Ib.TEXT,"data-tooltip":(0,eO.t)("dev_handoff.annotations.delete"),recordingKey:"createAnnotationTrashIcon"}))),d&&Q.createElement("div",{onMouseLeave:()=>w(-1,!1),ref:f,onBlur:e=>{var t;(null==(t=e.relatedTarget)?void 0:t.getAttribute("data-property-type"))||u(!1)},className:ea()(Ku,"annotation--dropdown--WLrjl")},0===g.length&&Q.createElement("div",{className:"annotation--allPropertiesAdded--KzT8m"},Q.createElement(eO.Tx,{id:"dev_handoff.annotations.all_properties_added"})),g.map((t,n)=>Q.createElement(Q.Fragment,{key:`option-${t.type}`},n>0&&t.config.category!==g[n-1].config.category&&Q.createElement("div",{className:"annotation--propertyDivider--Q3tgS"}),Q.createElement(Wb,{node:e,property:t,isHovered:s===n,autoFocus:s===n&&m,onMouseOver:()=>w(n,!1),onMouseDown:e=>{y(t.type),e.preventDefault()}}))))))}let Wy=Array.from(K9.entries()).map(([e,t])=>({type:e,config:t}));function Wb({node:e,property:t,isHovered:n,autoFocus:a,onMouseDown:r,onMouseOver:l}){let i=t.config.PreviewValue,o=t.config.Icon;return Q.createElement(ns.GG,{className:ea()("annotation--propertyOption--GJWeu text--fontPos12--YsUAh text--_fontBase--QdLsd",{"annotation--hoveredProperty--ZOJgv":n}),onMouseDown:r,onMouseOver:l,role:"menuitem",autoFocus:a,"data-property-type":`property-${t.type}`,tabIndex:-1,recordingKey:`createAnnotationOptionButton-${t.type}`},Q.createElement("div",{className:"annotation--propertyOptionIconLabel--vFND-"},Q.createElement("div",{className:"annotation--propertyOptionIcon---NJse"},Q.createElement(o,{node:e})),t.config.label),Q.createElement("div",{className:ea()("annotation--preview--SrnLk","annotation--propertyValue--yhAB- annotation--_ellipsis--8F1VE")},Q.createElement(i,{node:e})))}function WC({node:e,onRemoveProp:t,property:n}){let a=n.config.DisplayValue,r=(0,Ws.J)(e,n.type,!1);return Q.createElement(Q.Fragment,null,Q.createElement("span",{className:"annotation--selectedPropertyDisplayLabel--AtFEJ"},n.config.label),Q.createElement("div",{className:"annotation--selectedPropertyValueWrapper--OyM0X"},Q.createElement("span",{className:ea()("annotation--selectedPropertyValue--wwu2U",{[K_]:!r})},r?Q.createElement(a,{node:e}):Q.createElement(eO.Tx,{id:"dev_handoff.annotations.no_value"})),Q.createElement("span",{className:"annotation--selectedPropertyDelete--DMdrA"},Q.createElement(aJ.K0,{svg:Wg.A,className:"annotation--selectedPropertyDeleteButton--rko2T",recordingKey:`removeAnnotation${n.type}`,"data-tooltip-type":nO.Ib.TEXT,"data-tooltip":(0,eO.t)("dev_handoff.annotations.remove_property"),onClick:cU.nc.user("remove-annotation",()=>{t(n.type)}),onKeyDown:cU.nc.user("remove-annotation",e=>{t(n.type),e.preventDefault()})}))))}function Ww({viewportInfo:e,onPointerDown:t}){return Q.createElement(ns.D8,{className:`${Kd} ${eK.Dm} ${eK.Uu}`,recordingKey:"annotationDialogBackground",style:{position:"absolute",left:e.x,top:e.y,width:e.width,height:e.height},onPointerDown:t})}var WT=n(970501),Wx=n(869912);function WN({viewportInfo:e,nodeInfo:t,setDimensions:n}){return Q.createElement(Wf,{key:t.node.guid,node:t.node,viewportInfo:e,shouldMinimize:t.shouldMinimize,offsetX:t.offsetX,offsetY:t.offsetY,lineWidth:t.lineWidth,originalLineWidth:t.originalLineWidth,lineHeight:t.lineHeight,lineAlignment:t.lineAlignment,isLeftAligned:t.isLeftAligned,setDimensions:n},e=>Q.createElement(Wk,{node:t.node,isFadedOut:e}))}function Wk({node:e,isFadedOut:t}){let n=(0,t5.IL)(),a=(0,eF.uQ)(),r=(0,ae.dH)(),l=a===e.guid,i=(0,e_.Xr)(Ko.J),o=Wo(),s=(0,Q.useMemo)(()=>eU.w3z.isReadOnly(eU.SES.ANNOTATIONS),[]),c=(0,eG.J2)(eU.Ez5.devHandoffState().selectedMeasurementId),d=e=>{e&&(eV.wr(),(0,En.S)("annotations"),eV.Dh([e]))},u=Q.useCallback(t=>{var n,a;!s&&l&&c===ad.AD&&((null==(n=document.activeElement)?void 0:n.classList.contains("focus-target"))||(0,Wx.t)(document.activeElement)||(null==(a=document.activeElement)?void 0:a.classList.contains(Kc)))&&("Backspace"===t.key||"Delete"===t.key)&&o(e)},[s,l,c,o,e]);Q.useEffect(()=>(document.addEventListener("keydown",u),()=>document.removeEventListener("keydown",u)),[u]);let m=Q.useCallback(()=>{var e;let t=(null==(e=window.getSelection())?void 0:e.toString())||"";t&&(0,WT.Dk)(t,{withLineBreaks:!0})},[]);if(0===e.annotations.length)return null;let p=e.annotations[0],{label:_,properties:f}=p,h=[...f].sort((e,t)=>K9.get(e.type).index-K9.get(t.type).index);return Q.createElement(ns.D8,{className:ea()("annotation--viewAnnotation--cA-c1 annotation--_annotationBase--MPByC",Km,{"annotation--viewAnnotationSelected--UApdn":l,"annotation--canSelect--zG4JI":!l,"annotation--viewAnnotationFadedOut--7LQPE":t}),role:"button",tabIndex:0,onMouseDown:()=>{l||(d(e.guid),n("click_annotation_content",{nodeId:e.guid,nodeType:e.type,hasText:!!p.label,numProperties:p.properties.length,currentTool:r}))},"data-testid":"annotationDisplay",recordingKey:`viewAnnotationContainer-${e.name}`,onDoubleClick:()=>{s||(l||d(e.guid),i(!0))},onCopy:m},_&&Q.createElement(id.R,{value:_,fallback:null,errorFallback:null,quillClassName:"annotation--label--Tf5gK"}),h&&h.length>0&&Q.createElement("div",{className:Kp},h.map((t,n)=>Q.createElement(WS,{key:n,node:e,property:t}))))}function WS({node:e,property:t}){let n=K9.get(t.type),a=n.DisplayValue,r=(0,Ws.J)(e,t.type,!1);return Q.createElement(Q.Fragment,null,Q.createElement("span",{className:"annotation--propertyDisplayLabel--PQ2vF"},n.label),Q.createElement("span",{className:ea()("annotation--propertyDisplayValue--bxdp7",{[K_]:!r}),"data-testid":`annotationPropertyValue-${t.type.toString()}`},r?Q.createElement(a,{node:e}):Q.createElement(eO.Tx,{id:"dev_handoff.annotations.no_value"})))}var WI=n(688553),WA=n(565727),WP=n(107047),WO=n(236238),WL=n(163771);function WM(e){let{children:t}=e,n=(0,Q.useRef)(null),[a,r]=(0,Q.useState)(null);return(0,Q.useEffect)(()=>{if(n.current){let e=n.current.attachShadow({mode:"open"}),t=document.createElement("style");t.innerHTML=[WI.Nz,WP.Nz,WA.Nz,WL.Nz,"/** @postcss-export-raw */\n\n/**\n * ellipsis.css\n *\n * Add an ellipsis if text is too long.\n *\n * The element that composes this mixin MUST have a defined width or max-width in pixels.\n * - Only works on a single line of text. See below for multi-line ellipses\n */\n\n.ellipsis--ellipsis--Tjyfa {\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n/**\n * Add an ellipsis after n lines of text.\n * https://developer.mozilla.org/en-US/docs/Web/CSS/-webkit-line-clamp\n *\n * The element that composes this mixin MUST:\n * - Have a defined width or max-width in pixels.\n * - Have a defined fallback height or max-height set to `line-height * n`,\n *     in case browsers do not support -webkit-line-clamp or box-orient\n *     at least the container size will be correct (with no ellipses)\n *\n * TODO(golf): start using `line-clamp` instead of -webkit-line-clamp once browsers start supporting it\n */\n\n.ellipsis--_ellipsisAfterNLines--LzI7k {\n  display: -webkit-inline-box;\n  overflow: hidden;\n\n  /* https://github.com/postcss/autoprefixer/issues/776#issuecomment-297734206 */\n  /* autoprefixer: off */\n  -webkit-box-orient: vertical;\n  /* autoprefixer: on */\n}\n\n.ellipsis--ellipsisAfter2Lines--Qo-Xh {\n  -webkit-line-clamp: 2;\n}\n\n.ellipsis--ellipsisAfter3Lines--h405C {\n  -webkit-line-clamp: 3;\n}\n\n.ellipsis--ellipsisAfter6Lines--2UA7M {\n  -webkit-line-clamp: 6;\n}\n\n.ellipsis--ellipsisAfter8Lines--WZFi8 {\n  -webkit-line-clamp: 8;\n}\n","/** @postcss-export-raw */\n.annotation--annotationContainer--k4xiM {\n  position: relative;\n  /* Make all z indexes in this file relative to the parent.\n     We want all annotations to render underneath comments */\n  z-index: 0;\n}\n.annotation--_ellipsis--8F1VE {\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n.annotation--annotationWrapper--pKMw2 {\n  position: absolute;\n  pointer-events: none;\n  width: max-content;\n}\n.annotation--annotationWrapper--pKMw2,\n.annotation--wrapperMinimized--UOExu:hover {\n  z-index: 1;\n}\n.annotation--wrapperEditing--C2Zlx {\n  z-index: 2;\n}\n.annotation--wrapperMinimized--UOExu {\n  z-index: 0;\n}\n.annotation--annotationLine--jr4Mc {\n  position: absolute;\n  top: 50%;\n  border-top: 1px dashed var(--color-icon-handoff);\n  /* Push to left of annotation box */\n  transform: translate(-100%, -50%);\n}\n.annotation--annotationLineStartDot--x6RNc {\n  position: absolute;\n  top: -6.5px;\n  left: 100%;\n\n  width: 12px;\n  height: 12px;\n\n  background: color-mix(in srgb, var(--color-icon-handoff) 45%, transparent);\n  border: 1px solid var(--color-icon-success);\n  border-radius: 100%;\n  box-sizing: border-box;\n}\n.annotation--annotationLineStartDot--x6RNc:before {\n  content: '';\n\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n\n  width: 2px;\n  height: 2px;\n\n  background: var(--color-text-onbrand);\n  border-radius: 100%;\n  box-sizing: border-box;\n}\n.annotation--annotationLineStartDotHovered--Chqa7 {\n  background: var(--color-icon-handoff);\n}\n.annotation--annotationLineEndDot--Lsq0a {\n  position: absolute;\n  top: -3.5px;\n  left: -3px;\n\n  width: 6px;\n  height: 6px;\n\n  background: var(--color-icon-handoff);\n  border-radius: 100%;\n  box-sizing: border-box;\n}\n.annotation--annotationLineLeftAligned--W-1DZ {\n  transform: translate(0, -50%);\n}\n.annotation--annotationLineLeftAligned--W-1DZ .annotation--annotationLineStartDot--x6RNc {\n  left: auto;\n  right: 100%;\n}\n.annotation--annotationLineLeftAligned--W-1DZ .annotation--annotationLineEndDot--Lsq0a {\n  left: auto;\n  right: -3px;\n}\n.annotation--annotationLineAboveNode--WwqWD:not(.annotation--annotationLineLeftAligned--W-1DZ) {\n  border-left: 1px dashed var(--color-icon-handoff);\n  transform: translate(-100%, -0.5px);\n}\n.annotation--annotationLineBelowNode--JeafT .annotation--annotationLineStartDot--x6RNc {\n  top: auto;\n  bottom: -6.5px;\n}\n.annotation--annotationLineAboveNode--WwqWD .annotation--annotationLineEndDot--Lsq0a {\n  top: auto;\n  bottom: -3.5px;\n}\n.annotation--annotationLineBelowNode--JeafT:not(.annotation--annotationLineLeftAligned--W-1DZ) {\n  border-left: 1px dashed var(--color-icon-handoff);\n  border-bottom: 1px dashed var(--color-icon-handoff);\n  border-top: 0 none;\n\n  transform: translate(-100%, calc(-100% + 0.5px));\n}\n.annotation--annotationLineLeftAligned--W-1DZ.annotation--annotationLineAboveNode--WwqWD {\n  border-right: 1px dashed var(--color-icon-handoff);\n  transform: translate(0, -0.5px);\n}\n.annotation--annotationLineBelowNode--JeafT.annotation--annotationLineLeftAligned--W-1DZ {\n  border-right: 1px dashed var(--color-icon-handoff);\n  border-bottom: 1px dashed var(--color-icon-handoff);\n  border-top: 0 none;\n\n  transform: translate(0, calc(-100% + 0.5px));\n}\n.annotation--_annotationBase--MPByC {\n  background: var(--color-bg);\n  color: var(--color-text);\n\n  pointer-events: auto;\n\n  border-radius: 6px;\n  box-shadow: var(--elevation-200-canvas);\n  position: relative;\n  display: inline-block;\n  box-sizing: border-box;\n\n  font-family: Inter;\n  font-size: 11px;\n  font-weight: 400;\n}\n.annotation--viewAnnotation--cA-c1 {\n\n  /* This avoids a size shift when adding a border */\n  border: 1px solid transparent;\n\n  -webkit-user-select: text;\n\n          user-select: text;\n}\n/* This is when the node is hovered (not annotation).\n   Clicking an already selected node does nothing so has no hover state. */\n.annotation--annotationHovered--QUHJv .annotation--viewAnnotation--cA-c1:not(.annotation--viewAnnotationSelected--UApdn),\n\n.annotation--viewAnnotation--cA-c1.annotation--canSelect--zG4JI:hover {\n  background: var(--color-bg-hover);\n}\n.annotation--viewAnnotationSelected--UApdn {\n  border: 1px solid var(--color-border-selected-strong);\n}\n.annotation--viewAnnotationFadedOut--7LQPE > * {\n  opacity: 0.5;\n}\n.annotation--createAnnotation--tWKSM .text-editor {\n    border: none;\n  }\n.annotation--createAnnotation--tWKSM .ql-editor.ql-blank::after {\n    margin-top: -1.85em;\n  }\n.annotation--createAnnotation--tWKSM .text-editor:focus-within {\n    margin: 0;\n  }\n.annotation--createAnnotation--tWKSM .ql-editor {\n    font-size: 13px;\n    line-height: 24px;\n    min-height: 38px;\n  }\n.annotation--createAnnotation--tWKSM .ql-editor ul,\n  .annotation--viewAnnotation--cA-c1 .ql-editor ul,\n  .annotation--createAnnotation--tWKSM .ql-editor ol,\n  .annotation--viewAnnotation--cA-c1 .ql-editor ol {\n    padding-left: 1.5em;\n  }\n.annotation--annotationHoverTarget--4y3Xc {\n  width: 24px;\n  height: 24px;\n  position: absolute;\n  pointer-events: auto;\n  top: calc(50% - 12px);\n  /* This is relative to the left edge of the line end dot,\n     but we want to center it around the dot */\n  left: -9px;\n}\n.annotation--annotationHoverTargetLeftAligned--G1twU {\n  /* This is relative to the right edge of the line end dot,\n     but we want to center it around the dot.\n     Shift by parent width (100%) to account for when the\n     annotation is not hidden. */\n  left: calc(100% - 15px);\n}\n.annotation--annotationLeftAligned--FHQRp {\n  transform: translate(-100%, 0);\n  left: 8px;\n}\n.annotation--annotationRightAligned--VrH8e {\n  left: -8px;\n}\n.annotation--label--Tf5gK.quill-readonly .ql-editor {\n    font-size: 11px;\n  }\n.annotation--label--Tf5gK.quill-readonly .ql-editor h1,\n    .annotation--label--Tf5gK.quill-readonly .ql-editor h2 {\n      font-size: 14px;\n    }\n.annotation--label--Tf5gK.quill-readonly .ql-editor pre.ql-syntax {\n      white-space: pre-wrap;\n    }\n.annotation--label--Tf5gK.quill-readonly .ql-editor > * {\n      cursor: default;\n    }\n.annotation--label--Tf5gK .ql-container {\n    background-color: transparent;\n  }\n.annotation--contentContainer--vSuqs {\n  display: flex;\n  flex-direction: column;\n  padding: 6px 10px 8px 10px;\n  max-width: 220px;\n  box-sizing: border-box;\n}\n.annotation--contentContainer--vSuqs.annotation--viewAnnotation--cA-c1 {\n  gap: 4px;\n}\n.annotation--contentContainerNoProperties--pc2WE {\n  padding: 6px 10px 0 10px;\n}\n.annotation--contentContainer--vSuqs.annotation--viewAnnotation--cA-c1 {\n  padding: 8px;\n}\n.annotation--createAnnotation--tWKSM .annotation--contentContainer--vSuqs {\n  /* Fixed width when authoring */\n  width: 220px;\n}\n.annotation--properties--1p6UF {\n  display: grid;\n  grid-template-columns: min-content auto;\n}\n.annotation--createAnnotation--tWKSM .annotation--properties--1p6UF {\n  padding: 0 6px;\n}\n.annotation--propertyDisplayLabel--PQ2vF,\n.annotation--selectedPropertyDisplayLabel--AtFEJ {\n  color: var(--color-text-secondary);\n  white-space: nowrap;\n\n  padding-right: 12px;\n}\n.annotation--selectedPropertyDisplayLabel--AtFEJ {\n  border-top-left-radius: 2px;\n  border-bottom-left-radius: 2px;\n\n  margin-left: -8px;\n  padding-left: 8px;\n}\n.annotation--selectedPropertyValueWrapper--OyM0X {\n  display: flex;\n\n  width: calc(100% + 4px);\n\n  overflow: hidden;\n}\n.annotation--selectedPropertyDisplayLabel--AtFEJ,\n.annotation--selectedPropertyValue--wwu2U {\n  padding-top: 2px;\n  padding-bottom: 2px;\n}\n.annotation--propertyDisplayLabel--PQ2vF,\n.annotation--propertyDisplayValue--bxdp7,\n.annotation--selectedPropertyDisplayLabel--AtFEJ,\n.annotation--selectedPropertyValueWrapper--OyM0X {\n  margin-top: 4px;\n}\n/* Don't add margin top to first \"row\" of grid */\n.annotation--propertyDisplayLabel--PQ2vF:first-child,\n.annotation--propertyDisplayLabel--PQ2vF:first-child + .annotation--propertyDisplayValue--bxdp7,\n.annotation--selectedPropertyDisplayLabel--AtFEJ:first-child,\n.annotation--selectedPropertyDisplayLabel--AtFEJ:first-child + .annotation--selectedPropertyValueWrapper--OyM0X {\n  margin-top: 0;\n}\n.annotation--propertyDisplayValue--bxdp7 {\n  overflow: hidden;\n}\n.annotation--noValue--HHQOU {\n  color: var(--color-text-secondary);\n}\n.annotation--selectedPropertyValue--wwu2U {\n  overflow: hidden;\n\n  flex: 1 1 100%;\n}\n.annotation--selectedPropertyDelete--DMdrA {\n  display: flex;\n  align-items: center;\n\n  padding: 0 4px 0 12px;\n\n  border-top-right-radius: 2px;\n  border-bottom-right-radius: 2px;\n}\n.annotation--selectedPropertyDeleteButton--rko2T {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex: 0 0 16px;\n\n  width: 16px;\n  height: 16px;\n\n  cursor: pointer;\n\n  font-size: 0;\n\n  background: transparent;\n  border: 0 none;\n  border-top-right-radius: 2px;\n  border-bottom-right-radius: 2px;\n  box-sizing: content-box;\n\n  padding: 0;\n}\n.annotation--selectedPropertyDeleteButton--rko2T:hover {\n    background: var(--color-bg-tertiary);\n  }\n.annotation--propertyOption--GJWeu {\n\n  background: transparent;\n  color: var(--color-text);\n  border: none;\n  align-self: stretch;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  height: 32px;\n  padding: 0px 16px;\n  gap: 8px;\n\n  font-family: Inter;\n  font-size: 13px;\n  font-weight: 400;\n}\n.annotation--propertyOption--GJWeu:focus {\n    outline: none;\n  }\n.annotation--propertyDivider--Q3tgS {\n  height: 1px;\n  background: var(--color-border);\n  margin: 8px 0;\n}\n.annotation--propertyOptionIcon---NJse {\n  width: 16px;\n}\n.annotation--propertyOptionIconSvg--LypST {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n.annotation--propertyOptionIconLabel--vFND- {\n  display: flex;\n  align-items: center;\n  white-space: nowrap;\n  gap: 8px;\n}\n.annotation--allPropertiesAdded--KzT8m {\n  padding: 0 12px;\n  height: 32px;\n  font-size: 11px;\n  display: flex;\n  align-items: center;\n}\n.annotation--hoveredProperty--ZOJgv {\n  background: var(--color-bg-hover);\n}\n.annotation--preview--SrnLk {\n  color: var(--color-text-secondary);\n}\n.annotation--propertyValue--yhAB- {\n}\n.annotation--icon--w1enR svg {\n  fill: var(--color-icon);\n}\n.annotation--icon--w1enR[aria-disabled='true'] svg {\n  fill: var(--color-icon-disabled);\n}\n.annotation--fillProperty--hEEJR {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  gap: 12px;\n}\n.annotation--chit--3je6E {\n  width: 12px;\n  height: 12px;\n  border-radius: 2px;\n  display: flex;\n  overflow: hidden;\n  margin: 1px 2px 1px 0;\n  flex-shrink: 0;\n  border: 1px solid var(--color-border);\n}\n.annotation--chit--3je6E svg {\n    width: 12px;\n    height: 12px;\n  }\n.annotation--styleChit--yCQ3O {\n  border: none;\n}\n.annotation--chitInline--vG6cM {\n  margin: 0;\n}\n.annotation--solidPaint--ClR6h {\n  display: flex;\n  align-items: center;\n  gap: 4px;\n}\n.annotation--solidPaintValue--9PQMf {\n}\n.annotation--authoringRow--cIo3- {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  height: 32px;\n  padding: 0 4px 4px 8px;\n}\n.annotation--addPropertyButton--67vPO {\n  display: flex;\n  flex-direction: row;\n  justify-content: flex-start;\n  align-items: center;\n  gap: 8px;\n  background-color: transparent;\n  color: var(--color-text);\n  border: 1px solid var(--color-border);\n  border-radius: 4px;\n  padding: 0 8px;\n  font-family: Inter;\n  font-size: 11px;\n  font-weight: 500;\n  height: 24px;\n}\n.annotation--addPropertyButton--67vPO.annotation--active--Q00x6 {\n    background-color: var(--color-bg-pressed);\n  }\n.annotation--addPropertyButton--67vPO:focus-visible {\n    border-color: var(--color-border-selected);\n  }\n.annotation--plusIcon--Ove-l {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  height: 16px;\n  width: 16px;\n  flex: 0 0 16px;\n  line-height: 16px;\n  fill: var(--color-icon);\n}\n.annotation--iconButton--w7kfn {\n  border-radius: 2px;\n  width: 32px;\n  height: 32px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background-color: transparent;\n  border: none;\n}\n.annotation--dropdown--WLrjl {\n  display: flex;\n  flex-direction: column;\n  position: absolute;\n  padding: 8px 0;\n  top: calc(100% + 8px);\n  left: 0;\n  width: 220px;\n}\n.annotation--coloredProperty--OTQ6l {\n  display: flex;\n  align-items: center;\n  justify-content: left;\n}\n.annotation--coloredProperty--OTQ6l > span {\n    padding-left: 2px;\n    padding-right: 2px;\n    border-radius: 2px;\n  }\n.annotation--paddingProperty--ckvG6 > span {\n    background: var(--color-bginspectpadding);\n    color: var(--color-textoninspectpadding);\n  }\n.annotation--spacingProperty--RCjSM > span {\n    background: var(--color-bginspectspacing);\n    color: var(--color-textoninspectspacing);\n  }\n.annotation--mixedValues--Z0qIk {\n  display: flex;\n  flex-direction: column;\n  gap: 4px;\n}\n.annotation--variablePill--VNxoI {\n  height: 16px;\n  padding: 0 4px;\n}\n.annotation--multipleVariableWrapper--OW3M1 {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 4px;\n  flex-direction: row;\n  align-items: center;\n}\n.annotation--multipleVariableWrapper--OW3M1.annotation--vertical--zmpVv {\n  flex-direction: column;\n  flex-wrap: nowrap;\n}\n.annotation--multipleVariableValue--5-5xk {\n  overflow: hidden;\n  align-self: stretch;\n}\n",WO.N].join("\n"),e.append(t),r(e)}},[]),Q.createElement("div",{ref:n,"data-testid":"annotation-renderer-shadow-dom-container",className:Kc},a&&(0,aP.createPortal)(t,a))}function WD(){let e=(0,$.wA)(),t=(0,eF.uQ)(),n=(0,$.d4)(e=>e.isFullscreenDocumentLoaded),a=(0,eG.J2)(eU.Ez5.uiState().showAnnotations),r=(0,ae.dH)(),l=(0,ez._X)({subscribeToUpdates_expensive:!0}),i=(0,eG.J2)((0,Cs.d)().lockMouseMoves);Q.useEffect(()=>{i&&l.zoomScale<.05&&(0,Cs.d)().lockMouseMoves.set(!1)},[i,l]);let[o,s]=(0,ef.fp)(Ko.J);(0,Q.useEffect)(()=>{a||s(!1)},[a,s]),(0,Q.useEffect)(()=>{o&&e((0,Ki.UU)())},[e,o]);let[c,d]=(0,Q.useState)({}),{nodesWithAnnotationInfo:u,annotationsBeingViewed:m,newAnnotationNodeInfo:p}=function(e,t){let n=(0,$.d4)(e=>e.mirror.appModel.currentPage),a=(0,eG.J2)(eU.Ez5.annotationObserver().annotationInfoByTlf),r=(0,ae.eY)(),l=(0,ae.dH)(),i=(0,eF.uQ)(),o=(0,ef.md)(Ko.J),s=(0,eG.J2)(eU.Ez5.devHandoffState().focusMode),c=(0,eG.J2)(eU.Ez5.devHandoffState().focusNodeId),d=(0,c_.hA)(),u=(0,c6.Fk)((e,t)=>e.get(t)?(0,eW.qT)(e,t):[],n),{tlfsWithNodes:m,newAnnotationNode:p}=(0,Q.useMemo)(()=>{let e=[];for(let t of a.keys()){let a=r.get(t);a&&a.containingCanvas===n&&((0,eo.kc)().dt_dev_mode_workflows&&d?(0,eW.hD)(r,t,n=>{n.guid===d&&e.push(t)}):e.push(t))}if(i&&l===eU.NLJ.ANNOTATE){let t=(0,eW.kh)(r,i)||r.get(i);(null==t?void 0:t.guid)&&!a.has(t.guid)&&e.push(t.guid)}let t=null;if(aZ.z4.getIsExtension()&&s&&c){let t=(0,eW.kh)(r,c)||r.get(c);(null==t?void 0:t.guid)&&(e=[null==t?void 0:t.guid])}let m=e.map(e=>{let n=r.get(e),{nodes:a,tlfContainsSelectedNode:l,newAnnotationNode:s}=function e(t,n,a=[],r){let l=!1,i=null;if(t){if(t.guid===n&&(l=!0),"SECTION"===t.type)return{nodes:[],tlfContainsSelectedNode:l,newAnnotationNode:i};t.childrenNodes.forEach(t=>{let{nodes:o,tlfContainsSelectedNode:s,newAnnotationNode:c}=e(t,n,a,r);return l=l||s,i=i||c,o}),t.annotations.length>0&&t.visible?a.push(t):r&&t.guid===n&&(i=t)}return{nodes:a,newAnnotationNode:i,tlfContainsSelectedNode:l}}(n,i,[],o);return s&&n&&(t={node:s,tlf:e}),{nodes:a,tlfContainsSelectedNode:l,topLevelFrameNode:n}});return u.forEach(e=>{a.has(e.guid)||m.push({nodes:[],tlfContainsSelectedNode:!1,topLevelFrameNode:e})}),{tlfsWithNodes:m,newAnnotationNode:t}},[n,l,o,s,c,a,r,i,u,d]),{annotationsBeingViewed:_,nodesWithAnnotationInfo:f}=(0,Q.useMemo)(()=>{let n={x:e.offsetX,y:e.offsetY},a=m.map(({nodes:a,tlfContainsSelectedNode:r,topLevelFrameNode:l})=>{if(!l||!l.isAlive())return null;let i={x:l.absoluteBoundingBox.x,y:l.absoluteBoundingBox.y,width:l.absoluteBoundingBox.w,height:l.absoluteBoundingBox.h};if(0===a.length)return WR(i,(0,ez.qc)(e))?{topLevelFrameNode:l,nodes:a,nodesWithFinalPositionData:[],shouldMinimize:!1,originalShouldMinimize:!1,tlfContainsSelectedNode:r,distanceFromCenter:WF({x:e.offsetX,y:e.offsetY},i),dimensionsWithAnnotations:i}:null;let o=.4>Math.max((i.width||0)*e.zoomScale/e.width,(i.height||0)*e.zoomScale/e.height)&&!r,s=0,c=0,d=a.map(n=>{var a;let r=t[n.guid]||{width:0,height:0},i=Wm(n,l,e);return i.isLeftAligned?s=Math.max(s,24+r.width/e.zoomScale):c=Math.max(c,24+r.width/e.zoomScale),{...i,height:(null==(a=t[n.guid])?void 0:a.height)||0,node:n,tlfGuid:l.guid,shouldMinimize:o}}).sort((e,t)=>e.offsetY-t.offsetY),u=W_(e,d,o),m=1/0,p=-1/0;u.forEach(t=>{let n=t.height/e.zoomScale,a=t.offsetY/e.zoomScale+e.offsetY-n/2;m=Math.min(m,a),p=Math.max(p,a+n)});let _=Math.min(i.y,m),f=Math.max(i.y+i.height,p),h={x:i.x-s,y:_,width:i.width+s+c,height:f-_};return WR(h,(0,ez.qc)(e))?(r&&(n={x:h.x+h.width/2,y:h.y+h.height/2}),{topLevelFrameNode:l,nodes:a,nodesWithFinalPositionData:u,shouldMinimize:o,originalShouldMinimize:o,tlfContainsSelectedNode:r,distanceFromCenter:WF({x:e.offsetX,y:e.offsetY},h),dimensionsWithAnnotations:h}):null}).filter(n4.Vq).sort((e,t)=>WF(n,e.dimensionsWithAnnotations)-WF(n,t.dimensionsWithAnnotations)),r=a.filter(e=>!e.shouldMinimize);for(let e=0;e<r.length-1;e++){let t=r[e];for(let n=e+1;n<r.length;n++){let e=r[n];WR(t.dimensionsWithAnnotations,e.dimensionsWithAnnotations)&&(t.tlfContainsSelectedNode?e.shouldMinimize=!0:e.tlfContainsSelectedNode?t.shouldMinimize=!0:t.distanceFromCenter<e.distanceFromCenter?e.shouldMinimize=!0:t.shouldMinimize=!0)}}let l=[],i=a.flatMap(({nodes:n,nodesWithFinalPositionData:a,shouldMinimize:r,originalShouldMinimize:i,topLevelFrameNode:o})=>{if(n.length>0&&!r&&l.push({tlf:o.guid,numNodes:n.length}),r===i)return a;let s=n.map(n=>{var a;return{...Wm(n,o,e),height:(null==(a=t[n.guid])?void 0:a.height)||0,node:n,tlfGuid:o.guid,shouldMinimize:r}}).sort((e,t)=>e.offsetY-t.offsetY);return W_(e,s,r)});return{annotationsBeingViewed:l,nodesWithAnnotationInfo:i}},[t,m,e]);return{nodesWithAnnotationInfo:f,annotationsBeingViewed:_,newAnnotationNodeInfo:(0,Q.useMemo)(()=>{var n;if(!p)return null;let a=function(e,t){let{x:n,y:a,w:r,h:l}=e.absoluteBoundingBox,{offsetX:i,offsetY:o,zoomScale:s,width:c}=t,d=eU.Ez5.isFullscreenYScrollbarNeeded(),u=Math.min(20*s,20),m=n+r,p=(n-i)*s+c/2>Wd+8&&!((i-m)*s+c/2>Wd+(d?16:4));return p?{lineWidth:u,offsetX:(n-i)*s-u,offsetY:(a+l/2-o)*s,isLeftAligned:p}:{lineWidth:u,offsetX:(m-i)*s+u,offsetY:(a+l/2-o)*s,isLeftAligned:p}}(p.node,e);return{...a,height:(null==(n=t[p.node.guid])?void 0:n.height)||0,newAnnotationNode:p,tlfGuid:p.tlf,shouldMinimize:!1,node:p.node,lineAlignment:Wu.ALIGNED,lineHeight:0,originalLineWidth:a.lineWidth}},[t,p,e])}}(l,c),_=(0,t5.IL)(),f=m.length,h=m.reduce((e,t)=>e+t.numNodes,0);(0,Q.useEffect)(()=>{f&&r===eU.NLJ.SELECT&&_("showing_annotations_for_tlfs",{topLevelFrameCount:f,nodesWithAnnotationsCount:h})},[f,h,r,_]);let g=(0,nh.v_)("annotationsKeyDown","keydown",(0,Q.useCallback)(e=>{r===eU.NLJ.ANNOTATE&&!o&&t&&"Enter"===e.key&&(e.ctrlKey||e.metaKey)&&(s(!0),e.stopPropagation())},[r,o,t,s]));if(Q.useEffect(()=>(document.addEventListener("keydown",g),()=>document.removeEventListener("keydown",g)),[g]),Q.useEffect(()=>{var e;null==(e=GX.NB)||e.setIsShowingAnnotations(0!==m.length)},[m]),!n||!a&&r!==eU.NLJ.ANNOTATE)return null;function E(e,t){var n,a;((null==(n=c[e])?void 0:n.height)!==t.height||(null==(a=c[e])?void 0:a.width)!==t.width)&&d(n=>({...n,[e]:t}))}let v=null,y=u.map(e=>o&&e.node.guid===t?(v=Q.createElement(WE,{nodeInfo:e,viewportInfo:l,setDimensions:E}),null):Q.createElement(WN,{key:e.node.guid,nodeInfo:e,viewportInfo:l,setDimensions:E})),b=o&&p&&Q.createElement(WE,{nodeInfo:p,viewportInfo:l,setDimensions:E});return Q.createElement(Q.Fragment,null,Q.createElement(WM,null,y),v,b)}function WR(e,t){let n=e.x,a=e.x+e.width,r=e.y,l=e.y+e.height,i=t.x,o=t.x+t.width,s=t.y,c=t.y+t.height;return n<o&&a>i&&r<c&&l>s}function WF(e,t){let n={x:t.x+t.width/2,y:t.y+t.height/2};return Math.hypot(n.x-e.x,n.y-e.y)}function WB(){return Q.createElement(Kl.p,null,Q.createElement(WD,null))}var WU=n(336982);function WH(){var e;let t=Array.from((0,eG.J2)(null==(e=eU.Ez5)?void 0:e.uiState().autoLayoutShortcutHints).values()),n=(0,ef.md)(WU.Bu),a=TU.y.isApple(),r=e=>{switch(e){case eU.oeV.IGNORE_AUTOLAYOUT:return{displayName:(0,eO.t)("fullscreen.auto_layout_hints.ignore_auto_layout"),shortcutText:a?"\u2303 Ctrl":"Ctrl"};case eU.oeV.PREVENT_NESTING:return{displayName:(0,eO.t)("fullscreen.auto_layout_hints.prevent_nesting"),shortcutText:(0,eO.t)("fullscreen.auto_layout_hints.space_key")};case eU.oeV.FORCE_INSERTION:return{displayName:(0,eO.t)("fullscreen.auto_layout_hints.force_insertion"),shortcutText:a?"\u2318":"Ctrl"}}},l=e=>e.isActive?"auto_layout_hints--activeShortcutWithTextContainer--dkT1S auto_layout_hints--shortcutWithTextContainer--uEquz":e.isValid?"auto_layout_hints--shortcutWithTextContainer--uEquz":"auto_layout_hints--invalidShortcutWithTextContainer--gvHLT auto_layout_hints--shortcutWithTextContainer--uEquz";return t?Q.createElement("div",{className:ea()("auto_layout_hints--root--MJKU2",{"auto_layout_hints--rootAdjustedForQA--YZlbt":n})},Q.createElement("div",{className:"auto_layout_hints--hintsBarContainer--3DyGD"},t.sort((e,t)=>e.shortcut-t.shortcut).map((e,t)=>{let n=r(e.shortcut);return Q.createElement("div",{className:l(e),key:t},Q.createElement("div",{className:e.isActive?"auto_layout_hints--activeShortcutContainer--bj0CD auto_layout_hints--shortcutContainer--mIecl":"auto_layout_hints--shortcutContainer--mIecl"},n.shortcutText.length>0?Q.createElement("div",{className:"auto_layout_hints--smallShortcutText--lHZ8Q utilities--bodySmall--JyKR1"},n.shortcutText):Q.createElement(Uw.S,{shortcut:n.shortcutText})),Q.createElement("p",null,n.displayName))}))):null}var WV=n(599567),WG=n(915914),WK=n(407909);let WW=(0,Q.memo)(function(){var e;let t=(0,$.wA)(),n=(0,ae.aV)(),a=(0,NM.kD)(),r=(0,ND.b4)(),l=(0,t_.q5)(),i=(0,NL.hC)(),o=(0,NM.ac)(),s=(0,lN.Td)(),c=(0,at.iZ)(),d=(null==c?void 0:c.id)&&a&&a.publishedByUserId===c.id,u=(0,NM.J3)();if(!i||n||!a||s||null===o)return null;let m=o&&u===NM.kN.CAN_PUBLISH,p={type:LX.MA.STRUCTURED,onClick:()=>{a&&l&&r({templateIdentifier:{type:dz.vt.TeamTemplate,file_key:a.fileKey},templateName:a.name})},trackingDescriptor:c5.c.USE_IN_NEW_FILE,buttonText:(0,eO.t)("whiteboard.delightful_toolbar.custom_template_banner.new_file_button")};if(m){if(!d)return Q.createElement(LM.C,{onDismiss:ey.lQ,editorType:dV._Y.WHITEBOARD,content:{id:LX.om.FileIsTeamTemplate,bannerType:LX.x1.INFO,icon:WK.A,mainText:(0,eO.t)("templates.banner.republish.primary_text"),description:(0,eO.t)("templates.banner.republish.secondary_text_not_owner"),button:p}});let e={type:LX.MA.STRUCTURED,onClick:()=>{t(n9.to({type:WV.LH,data:{fileKey:a.fileKey,source:"editor-republish-banner"}}))},trackingDescriptor:c5.c.PUBLISH_CHANGES,buttonText:(0,eO.t)("templates.banner.republish.republish_action")};return Q.createElement(LM.C,{onDismiss:ey.lQ,editorType:dV._Y.WHITEBOARD,content:{id:LX.om.FileIsTeamTemplate,bannerType:LX.x1.INFO,icon:WK.A,mainText:(0,eO.t)("templates.banner.republish.primary_text"),description:(0,eO.t)("templates.banner.republish.secondary_text"),button:e}})}let _=(null==(e=a.publishedByUser)?void 0:e.handle)?Q.createElement(eO.Tx,{id:"templates.banner.republish.you_re_viewing_a_template_made_by_publisher_name",madeByPublisherName:Q.createElement("span",{className:tw.cx.fontNormal.$},d?Q.createElement(eO.Tx,{id:"templates.banner.made_by_you"}):Q.createElement(eO.Tx,{id:"templates.banner.republish.made_by_publisher_name",publisherName:a.publishedByUser.handle}))}):(0,eO.t)("templates.banner.republish.you_re_viewing_a_template");return Q.createElement(LM.C,{onDismiss:ey.lQ,editorType:dV._Y.WHITEBOARD,content:{id:LX.om.FileIsTeamTemplate,bannerType:LX.x1.INFO,icon:WG.A,mainText:_,button:p}})}),Wz="figjam_search";function Wj(){return(0,eG.J2)(eU.Ez5.uiState().showCanvasSearch)?Q.createElement(WY,null):null}function WY(){let{query:e,next:t,exit:n,setNavigateNearestOnce:a,search:r,isLoading:l,showSearch:i,mode:o}=hy(),{focusedByButtons:s,hidden:c,setHidden:d,inputRef:u,navDisabled:m,showUi:p}=hv(),_=(0,Nj.BI)(),f=(0,$.d4)(e=>e.mirror.appModel.topLevelMode===eU.lyf.HISTORY);(0,ts.h)(()=>{d(!1)}),hE(u,t,s);let[h,g]=(0,Q.useState)(""),E=(0,Q.useCallback)(e=>{var t,n;e.keyCode===es.Uz.ESCAPE?(null==(n=null==(t=e.target)?void 0:t.blur)||n.call(t),d(!0)):"INPUT"!==e.target.tagName&&"TEXTAREA"!==e.target.tagName&&(0,pf.jr)(e,pf.W0.YES,pf.VA.NO)&&e.stopPropagation()},[d]),v=(0,Q.useCallback)(e=>{switch(e.keyCode){case es.Uz.P:case es.Uz.UP_ARROW:(e.keyCode!==es.Uz.P||ec.Ay.mac&&(0,es.vN)(e,es.xH.CONTROL))&&(t(hf.OP.PREV,"keyboard"),e.stopPropagation(),e.preventDefault());break;case es.Uz.N:case es.Uz.DOWN_ARROW:(e.keyCode!==es.Uz.N||ec.Ay.mac&&(0,es.vN)(e,es.xH.CONTROL))&&(t(hf.OP.NEXT,"keyboard"),e.stopPropagation(),e.preventDefault());break;case es.Uz.ENTER:if((0,es.Fo)(e)){eU.YEY.exitSearchMode(eU.dNx.SELECT_ACTIVE);break}t(e.shiftKey?hf.OP.PREV:hf.OP.NEXT,"keyboard"),e.stopPropagation(),e.preventDefault()}},[t]);if(!i)return null;let y=!(null==_?void 0:_.shouldOptimizeForIpadApp);return Q.createElement(hn.i,null,Q.createElement("div",{role:"none",className:ea()(eK.Dm,"canvas_search--searchContainer--LzfSY",{"canvas_search--uiHidden--hLgkP":!p,"canvas_search--whiteboardSidebarShown--uykZK":f,[mZ]:c}),onTransitionEnd:e=>{e.target.classList.contains(mZ)&&n()},onBlurCapture:e=>{e.relatedTarget&&!e.currentTarget.contains(e.relatedTarget)&&(eU.YEY.setOverlayVisible(!1),a())},onKeyDown:E},Q.createElement("div",{className:mQ},Q.createElement(hg,{className:"canvas_search--searchBar--xhROb canvas_search--input--aPqLZ",onChange:e=>r(e),query:e,focusedByButtons:s,innerRef:u,onKeyDown:v,editorType:hi._Y.FIGJAM}),l?Q.createElement("div",{className:m6},Q.createElement(t2.kt,{testId:"canvas-search-loading-spinner"})):Q.createElement(Q.Fragment,null,!!e&&Q.createElement(WZ,null),!m&&Q.createElement(Q.Fragment,null,Q.createElement(aJ.K0,{svg:pr.A,disabled:m,onClick:e=>{t(hf.OP.PREV,"button"),!hC(e)&&y&&(s.current=!0,u.current.focus())},"data-tooltip-type":nO.Ib.TEXT,"data-tooltip":(0,eO.t)("canvas_search.previous"),"data-tooltip-shortcut-key":"canvas-search-prev",recordingKey:"canvas_search.previous"}),Q.createElement(aJ.K0,{svg:pa.A,disabled:m,onClick:e=>{t(hf.OP.NEXT,"button"),!hC(e)&&y&&(s.current=!0,u.current.focus())},"data-tooltip-type":nO.Ib.TEXT,"data-tooltip":(0,eO.t)("canvas_search.next"),"data-tooltip-shortcut-key":"canvas-search-next",recordingKey:"canvas_search.next"}))),Q.createElement(hM,{lean:"left",minWidth:160,recordingKey:Wz}),Q.createElement(aJ.K0,{svg:hW.default,onClick:()=>{d(!0)},"data-tooltip-type":nO.Ib.TEXT,"data-tooltip":(0,eO.t)("canvas_search.close"),tooltipForScreenReadersOnly:!0,recordingKey:"canvas_search.close"})),o===eU.EW4.REPLACE&&Q.createElement(hN,{query:e,value:h,onChange:g,recordingKey:Wz,onFocus:(t,n)=>{var a;!e&&n&&(null==(a=u.current)||a.focus())},hasMultipleSelections:!1})))}function WZ(){let{total:e}=(0,ef.md)(sz.Fk),t=(0,ef.md)(sz.Ch),n=(null==t?void 0:t.index)==null?"?":`${t.index+1}`,a=0===e?(0,eO.t)("canvas_search.no_results"):(0,eO.t)("canvas_search.results_index_count",{index:n,total:e});return Q.createElement("span",{className:"canvas_search--resultsCount--X8A1s","data-testid":"canvas-search-info"},a)}var WX=n(723924),Wq=n(760640),WJ=n(453695),WQ=n(862709);function W$({children:e}){let t=(0,$.d4)(e=>{var t;return(null==(t=e.universalInsertModal)?void 0:t.pinned)===S$.t.PINNED_AND_DOCKED_LEFT}),n=(0,aD.GS)(),a=(0,$.d4)(e=>{var t;return null==(t=e.mirror)?void 0:t.appModel.showUi}),r=n&&a,l=(0,eH.qw)(),i=Q.useMemo(()=>[WQ.mW.RESOLVED,WQ.mW.YOURS,WQ.mW.CURRENT_PAGE],[]),o=Q.useMemo(()=>[WQ.qN.CREATION_DATE,WQ.qN.UNREAD],[]),{xDelta:s,yDelta:c}=(0,WJ.m)(),d=Q.useMemo(()=>{let e=(0,rT.hG)(uT.PXB),n=s;return t&&(n+=gD.AN+e),{xDelta:n,yDelta:c}},[t,c,s]),u=Q.useMemo(()=>{let e=(0,rT.jz)(uT.LdP),t=0,n=0;return r&&(t+=e,n+=l),{maxHeightDelta:0,minBottomMarginDelta:t,minRightMarginDelta:n}},[l,r]),m=Q.useMemo(()=>{if(r)return{paddingRight:l}},[l,r]),p=Q.useMemo(()=>({...WJ.y,sidebarFilters:i,sidebarSorts:o,dockPositionAdjustment:d,draggableModalBoundsAdjustment:u,commentPositionPaddingAdjustment:m}),[i,o,m,d,u]);return Q.createElement(Wq.a.Provider,{value:p},e)}let W0={isDevHandoff:!0};function W1({children:e}){let t="ui3"===(0,et.DP)().version,n=(0,$.d4)(e=>{var t;return null==(t=e.mirror)?void 0:t.appModel.showUi}),a=t&&n,r=(0,c_.hA)(),l=(0,eH.UX)(),i=(0,rT.jz)(uT.ZB$),o=Q.useMemo(()=>[WQ.mW.RESOLVED,WQ.mW.YOURS,WQ.mW.CURRENT_PAGE],[]),s=Q.useMemo(()=>[WQ.qN.CREATION_DATE,WQ.qN.UNREAD],[]),c=(0,WJ.m)(),d=Q.useMemo(()=>{let e=0,t=0;return a&&(e+=i,t+=l),{maxHeightDelta:0,minBottomMarginDelta:e,minRightMarginDelta:t}},[i,l,a]),u=Q.useMemo(()=>{if(a)return{paddingRight:l}},[l,a]),m=Q.useMemo(()=>{let e={...WJ.y,sidebarFilters:o,sidebarSorts:s,dockPositionAdjustment:c,draggableModalBoundsAdjustment:d,commentPositionPaddingAdjustment:u,linkGenerationParams:W0};return(0,eo.kc)().dt_dev_mode_workflows&&r&&(e.filterBy="non_dev_mode_focus"),e},[o,s,c,d,u,r]);return Q.createElement(Wq.a.Provider,{value:m},e)}var W2=n(205728),W5=n(825165),W4=n(644467);let W3={isFigJam:!0};function W6({children:e}){let t=(0,W2.Vi)(),n=(0,$.d4)(e=>{var t;return(null==(t=e.universalInsertModal)?void 0:t.pinned)===S$.t.PINNED_AND_DOCKED_LEFT}),a=Q.useMemo(()=>[WQ.mW.RESOLVED,WQ.mW.YOURS],[]),r=Q.useMemo(()=>[WQ.qN.CREATION_DATE,WQ.qN.UNREAD],[]),l=Q.useMemo(()=>{let e=(0,rT.hG)(uT.PXB),t=0;return n&&(t+=cX.gR+e),{xDelta:t,yDelta:0}},[n]),i=Q.useMemo(()=>208,[]),o=Q.useMemo(()=>{let e=new Map;return e.set(W4.b.DOCK_STYLE,Ar._V),e.set(W4.b.ATTACHMENT_MODAL_BACKGROUND_COLOR,(0,ty.Bx)("light")),e},[]),s=Q.useMemo(()=>{let e;let n=(0,rT.hG)(uT.IuL),a=(0,rT.hG)(uT.rY4),r=0,l=0;return e=0-n,r+=n,t&&(l+=a),{maxHeightDelta:e,minBottomMarginDelta:r,minRightMarginDelta:l}},[t]),c=Q.useCallback(()=>{(0,W5.W)("left",()=>{})},[]),d=Q.useMemo(()=>({showNotificationSettings:!0,disableCommentsWhenHandToolEnabled:!0,repositionViewportOnCommentSelection:!0,clusterBy:"page",orphanedBy:"deleted_pages",filterBy:"hidden_sections",sidebarFilters:a,sidebarSorts:r,dockPositionAdjustment:l,draggableModalBoundsAdjustment:s,onDockSideEffect:c,sidebarBottomPaddingAdjustment:i,styleOverrideMap:o,linkGenerationParams:W3}),[l,s,c,i,a,r,o]);return Q.createElement(Wq.a.Provider,{value:d},e)}let W7=(0,nf.eU)(new Map);function W8({children:e}){var t,n;let a=(0,eG.ut)(null==(t=eU.Ez5)?void 0:t.singleSlideView().isInSingleSlideView,!1),r=(0,eG.J2)(eU.Ez5.slideDeck().slideGrid),l=(0,mL.rY)(r),i=Q.useMemo(()=>l.reduce((e,t,n)=>(e.set(t,n),e),new Map),[l]),o=(0,gI.wq)(),s=(0,e_.Xr)(W7),[c,d]=Q.useState(new Map),[u,m]=Q.useState(new Map);Q.useEffect(()=>{let e=new Set,t=new Map;"loaded"===o.status&&o.data.forEach(n=>{let a=n.canvasPosition,r=u.get(n.id),l={commentCount:n.comments.filter(e=>!e.resolved_at).length,hasUnread:n.comments.some(e=>!e.resolved_at&&e.isUnread)};t.set(n.id,l),a&&(!r||a.x!==r.x&&a.y!==r.y)&&e.add(n)}),e.forEach(e=>{var t,n;let a=null==(n=null==(t=e.comments[0])?void 0:t.client_meta)?void 0:n.node_id;if(!a||!e.canvasPosition)return;let r=tN.qo.instance.get(a),l=r?r.findContainingSlideOrSelf():tN.K8;l!==tN.K8&&e.canvasPosition&&(m(t=>new Map(t.set(e.id,e.canvasPosition))),d(t=>new Map(t.set(e.id,l))))});let n=new Map;c.forEach((e,a)=>{let r=t.get(a);if(!r)return;let{commentCount:l,hasUnread:i}=r,o=n.get(e),s={commentCount:((null==o?void 0:o.commentCount)??0)+l,hasUnread:(null==o?void 0:o.hasUnread)||i};n.set(e,s)}),s(n)},[s,u,c,o.data,o.status]);let p=(0,$.d4)(e=>{var t;return null==(t=e.mirror)?void 0:t.appModel.showUi}),_=(0,eH.qw)(),f=Q.useCallback(e=>{var t,n;let a=c.get(e.id);if(a)return a;let r=null==(n=null==(t=e.comments[0])?void 0:t.client_meta)?void 0:n.node_id;if(!r)return tN.K8;let l=tN.qo.instance.get(r);return l?l.findContainingSlideOrSelf():tN.K8},[c]),{xDelta:h,yDelta:g}=(0,WJ.m)(),E=Q.useMemo(()=>({xDelta:h,yDelta:g}),[h,g]),v=Q.useMemo(()=>{let e=[WQ.mW.RESOLVED,WQ.mW.YOURS];return(0,Lx.i)()&&a&&e.push(WQ.mW.CURRENT_SLIDE),e},[a]),y=Q.useMemo(()=>[WQ.qN.CREATION_DATE,WQ.qN.UNREAD,WQ.qN.SLIDE],[]),b=(0,$.d4)(e=>e.mirror.appModel.currentPage),C=Q.useContext(US.kw),w=(0,eG.ut)(null==(n=eU.Ez5)?void 0:n.singleSlideView().focusedSlideId,""),T=(0,mL.po)(),x=Q.useCallback(e=>{var t;if(!(0,Lx.i)())return!1;let n=e&&b?null==(t=C.getCommentDestinationForCanvasPosition(e,b))?void 0:t.nodeId:void 0;if(!n)return!1;let a=tN.qo.instance.get(n),r=a?a.findContainingSlideOrSelf():tN.K8;return w&&(0,tN.fn)(w)?r!==w:!(0,tN.fn)(r)},[b,w,C]),N=Q.useCallback((e,t)=>{if(!(0,Lx.i)())return null;let n=t?tN.qo.instance.get(t):void 0,a=n?n.findContainingSlideOrSelf():tN.K8,r=a&&(0,tN.fn)(a)?a:eU.glU.getSlideAtPosition(e.x,e.y);return r?eU.Egt.getBoundsForNode(r):null},[]),k=Q.useCallback(e=>{let t=f(e),n=i.get(t);return void 0===n||t===tN.K8?(0,eO.t)("comments.slide"):(0,eO.t)("comments.slide_number",{orderNum:n+1})},[f,i]),S=Q.useMemo(()=>!!a,[a]),I=Q.useCallback(e=>{if(!a)return()=>{};let t=f(e);return t!==tN.K8?()=>{T(t)}:()=>{}},[f,T,a]),A=Q.useMemo(()=>({slide:(e,t)=>{let n=1/0,a=f(e),r=f(t),l=i.get(a)??n,o=i.get(r)??n;return l!==o?l-o:Date.parse(t.comments[0].created_at)-Date.parse(e.comments[0].created_at)}}),[f,i]),P=Q.useMemo(()=>{if(p)return{paddingRight:_}},[_,p]),O=Q.useMemo(()=>({showNotificationSettings:!0,disableCommentsWhenHandToolEnabled:!0,repositionViewportOnCommentSelection:!0,disableZoomViewportOnCommentSelection:S,clusterBy:(0,Lx.i)()&&(0,eo.kc)().comments_corner_cluster?"slide":"page",orphanedBy:(0,Lx.i)()?"non_slide_anchors":"deleted_pages",filterBy:(0,Lx.i)()?"non_slide_anchors":void 0,sidebarFilters:v,sidebarSorts:y,dockPositionAdjustment:E,isCommentingDisabledAtPosition:x,commentDisabledPositionBellMessage:(0,eO.t)("comments.comments_can_only_be_placed_on_slides"),calculateSelectionCommentContainerBounds:N,getParentName:k,getOnCommentSelect:I,sortComparatorOverrides:A,commentPositionPaddingAdjustment:P}),[S,v,y,E,x,N,k,I,A,P]);return Q.createElement(Wq.a.Provider,{value:O},e)}function W9({children:e}){let t=(0,$.d4)(e=>e.selectedView.editorType),n=Q.useMemo(()=>{if(window.FigmaMobile)return"whiteboard"===t?function({children:e}){return Q.createElement(Wq.a.Provider,{value:WX.Wo},e)}:function({children:e}){return Q.createElement(Wq.a.Provider,{value:WX.In},e)};switch(t){case"design":return W$;case"whiteboard":return W6;case"slides":return W8;case"dev_handoff":return W1;default:return function({children:e}){return Q.createElement(Wq.a.Provider,{value:WJ.y},e)}}},[t]);return Q.createElement(n,null,e)}var ze=n(122747);function zt(e){return Q.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},Q.createElement("mask",{id:"fpl-icon-24-move-a",width:"17",height:"17",x:"4",y:"4",fill:"#000",maskUnits:"userSpaceOnUse"},Q.createElement("path",{fill:"#fff",d:"M4 4h17v17H4z"}),Q.createElement("path",{fillRule:"evenodd",d:"M19.294 12.063a1 1 0 0 0 .072-1.887l-13-5.107a1 1 0 0 0-1.297 1.297l5.107 13a1 1 0 0 0 1.887-.072l1.701-5.53 5.53-1.701Z",clipRule:"evenodd"})),Q.createElement("path",{fill:"var(--color-icon)",d:"M19.294 12.063 19 11.107l.294.956Zm.072-1.887.365-.93-.365.93Zm-13-5.107.365-.93-.365.93ZM5.069 6.366l-.93.365.93-.365Zm5.107 13-.93.365.93-.365Zm1.887-.072L11.107 19l.956.294Zm1.701-5.53-.294-.955a1 1 0 0 0-.661.661l.955.294ZM19 11.107l.588 1.912a2 2 0 0 0 1.41-1.836L19 11.107Zm0 0 1.999.076a2 2 0 0 0-1.268-1.937L19 11.107ZM6 6l13 5.107.731-1.861-13-5.107L6 6Zm0 0 .731-1.861a2 2 0 0 0-2.145.447L6 6Zm0 0L4.586 4.586a2 2 0 0 0-.448 2.145L6 6Zm5.107 13L6 6l-1.862.731 5.108 13L11.107 19Zm0 0-1.861.731A2 2 0 0 0 11.183 21l-.076-2Zm0 0 .076 1.999a2 2 0 0 0 1.836-1.41L11.107 19Zm1.702-5.53L11.107 19l1.912.588 1.701-5.53-1.911-.588ZM19 11.107l-5.53 1.702.588 1.911 5.53-1.701L19 11.107Z",mask:"url(#fpl-icon-24-move-a)"}))}function zn(e){return Q.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},Q.createElement("mask",{id:"fpl-icon-24-move-small-a",width:"13",height:"13",x:"6",y:"6",fill:"#000",maskUnits:"userSpaceOnUse"},Q.createElement("path",{fill:"#fff",d:"M6 6h13v13H6z"}),Q.createElement("path",{fillRule:"evenodd",d:"M17.294 12.492a1 1 0 0 0 .072-1.887l-9-3.536a1 1 0 0 0-1.297 1.297l3.536 9a1 1 0 0 0 1.886-.072l1.13-3.673 3.673-1.13Z",clipRule:"evenodd"})),Q.createElement("path",{fill:"var(--color-icon)",d:"M17.294 12.492 17 11.536l.294.956Zm.072-1.887-.366.93.366-.93Zm-9-3.536.365-.93-.365.93ZM7.069 8.366l-.93.365.93-.365Zm3.536 9 .93-.366-.93.366Zm1.886-.072L11.537 17l.956.294Zm1.13-3.673-.294-.955a1 1 0 0 0-.661.662l.955.293ZM17 11.537l.588 1.911a2 2 0 0 0 1.41-1.835L17 11.536Zm0 0 1.999.076a2 2 0 0 0-1.268-1.938L17 11.536ZM8 8l9 3.536.731-1.862-9-3.535L8 8Zm0 0 .731-1.861a2 2 0 0 0-2.145.447L8 8Zm0 0L6.586 6.586a2 2 0 0 0-.448 2.145L8 8Zm3.536 9L8 8l-1.862.731 3.536 9L11.536 17Zm0 0-1.862.731A2 2 0 0 0 11.612 19l-.077-2Zm0 0 .075 1.999a2 2 0 0 0 1.836-1.41L11.536 17Zm1.13-3.672L11.536 17l1.911.588 1.13-3.672-1.911-.588ZM17 11.536l-3.673 1.13.589 1.911 3.672-1.13L17 11.536Z",mask:"url(#fpl-icon-24-move-small-a)"}))}function za(e){return Q.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},Q.createElement("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M12.997 8.62H13V10a.5.5 0 0 0 1 0V5.923A1 1 0 0 1 15.997 6v2.62H16V10a.5.5 0 0 0 1 0V8a1 1 0 1 1 2 0v.62h.01v4.743a.954.954 0 0 1-.01.143.97.97 0 0 0-.007.07 6.773 6.773 0 0 1-6.756 6.287c-.162 0-.319-.004-.47-.01-1.535-.07-2.885-.786-4.107-1.92-1.23-1.141-2.28-2.66-3.188-4.219-.289-.495-.486-.88-.555-1.193a.614.614 0 0 1-.016-.263c.007-.029.022-.071.087-.135a.574.574 0 0 1 .517-.173c.224.03.518.165.807.434l.001.002 1 .945A1 1 0 0 0 8 12.604V6a1 1 0 0 1 2 0v4a.5.5 0 0 0 1 0V5a1 1 0 1 1 2 0v.89a2.08 2.08 0 0 0-.003.11v2.62ZM7 8.5V6a2 2 0 0 1 3.112-1.662 2 2 0 0 1 3.775-.002A2 2 0 0 1 16.997 6v.27A2 2 0 0 1 20 8v.5h.01v4.863c0 .096-.007.191-.02.284a7.773 7.773 0 0 1-7.753 7.216c-.177 0-.349-.004-.516-.012-3.682-.167-6.256-3.449-8.113-6.633-.565-.969-1.11-2.043-.316-2.813.793-.769 1.898-.504 2.705.25L6 11.66l1 .945V8.5Z",clipRule:"evenodd"}))}function zr(e){return Q.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},Q.createElement("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M12 6.5v4a.5.5 0 0 0 1 0v-3a.5.5 0 0 1 1 0v3a.5.5 0 0 0 1 0v-2a.5.5 0 0 1 1 0v4.272l.002.097.002.03-.002.016c-.095 1.35-.514 2.358-1.147 3.021-.619.648-1.536 1.064-2.847 1.064a9.69 9.69 0 0 1-.493-.012c-2-.097-3.577-1.723-4.963-3.836a5.93 5.93 0 0 1-.153-.242c-.217-.374-.345-.632-.388-.823a.478.478 0 0 1-.01-.07.21.21 0 0 1 .08-.053.213.213 0 0 1 .094-.004c.106.014.28.085.469.262.026.024.053.046.08.068l.673.508A1 1 0 0 0 9 12V7.5a.5.5 0 0 1 1 0v3a.5.5 0 0 0 1 0v-4a.5.5 0 0 1 1 0Zm5 2v4.272l.002.072c.002.048.005.095-.002.141C16.786 16.01 15.087 18 12.008 18c-.188 0-.368-.005-.541-.013-2.536-.123-4.36-2.164-5.752-4.287a6.812 6.812 0 0 1-.18-.286c-.423-.727-.831-1.533-.236-2.11.493-.478 1.147-.424 1.701-.068.114.073.224.16.327.256L8 12V7.5a1.5 1.5 0 0 1 2.053-1.395 1.5 1.5 0 0 1 2.894 0 1.5 1.5 0 0 1 2 1A1.5 1.5 0 0 1 17 8.5Z",clipRule:"evenodd"}))}function zl(e){return Q.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},Q.createElement("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M5 6.5A1.5 1.5 0 0 1 6.5 5h11A1.5 1.5 0 0 1 19 6.5v11a1.5 1.5 0 0 1-1.5 1.5h-2a.5.5 0 0 0 0 1h2a2.5 2.5 0 0 0 2.5-2.5v-11A2.5 2.5 0 0 0 17.5 4h-11A2.5 2.5 0 0 0 4 6.5v2a.5.5 0 0 0 1 0v-2ZM11.5 8a.5.5 0 0 1 .5-.5h4a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-1 0V9.207l-6.146 6.147a.5.5 0 0 1-.708-.708L14.793 8.5H12a.5.5 0 0 1-.5-.5ZM4 11.5A1.5 1.5 0 0 1 5.5 10h5a.5.5 0 0 1 0 1h-5a.5.5 0 0 0-.5.5v7a.5.5 0 0 0 .5.5h7a.5.5 0 0 0 .5-.5v-5a.5.5 0 0 1 1 0v5a1.5 1.5 0 0 1-1.5 1.5h-7A1.5 1.5 0 0 1 4 18.5v-7Z",clipRule:"evenodd"}))}var zi=n(336417);function zo(e){return Q.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},Q.createElement("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M17 18a1 1 0 0 1-1 1H8a1 1 0 0 1-1-1V6a1 1 0 0 1 1-1h4v3.5a1.5 1.5 0 0 0 1.5 1.5H17v8Zm-.414-9L13 5.414V8.5a.5.5 0 0 0 .5.5h3.086ZM8 20h8a2 2 0 0 0 2-2V9.414a1 1 0 0 0-.293-.707l-4.414-4.414A1 1 0 0 0 12.586 4H8a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2Z",clipRule:"evenodd"}))}var zs=n(774844);function zc(e){return Q.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},Q.createElement("rect",{width:"1",height:"12",x:"8",y:"6",fill:"var(--color-icon)",rx:".5"}),Q.createElement("rect",{width:"12",height:"1",x:"6",y:"8",fill:"var(--color-icon)",rx:".5"}),Q.createElement("rect",{width:"12",height:"1",x:"6",y:"15",fill:"var(--color-icon)",rx:".5"}),Q.createElement("rect",{width:"1",height:"12",x:"15",y:"6",fill:"var(--color-icon)",rx:".5"}))}function zd(e){return Q.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},Q.createElement("path",{stroke:"var(--color-icon)",strokeLinecap:"round",strokeLinejoin:"round",d:"M11.5 11.25 3 19.5h5.5a3 3 0 0 0 3-3v0m0-5.25 5.742-5.742a1.78 1.78 0 0 1 2.516 0v0a1.78 1.78 0 0 1 .016 2.5L11.5 16.5m0-5.25v5.25"}))}function zu(e){return Q.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},Q.createElement("path",{stroke:"var(--color-icon)",strokeLinecap:"round",strokeLinejoin:"round",d:"M11.5 11.344 5.344 17.5h4.125c1.122 0 2.031-.91 2.031-2.031v0m0-4.125 3.937-3.937a1.458 1.458 0 0 1 2.093.031v0c.54.574.527 1.474-.03 2.03l-6 6m0-4.124v4.125"}))}function zm(e){return Q.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},Q.createElement("rect",{width:"15",height:"15",x:"4.5",y:"4.5",stroke:"var(--color-icon)",rx:"1.5"}))}function zp(e){return Q.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},Q.createElement("rect",{width:"11",height:"11",x:"6.5",y:"6.5",stroke:"var(--color-icon)",rx:"1"}))}function z_(e){return Q.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},Q.createElement("path",{stroke:"var(--color-icon)",strokeLinecap:"round",d:"m4.5 19.5 15-15"}))}function zf(e){return Q.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},Q.createElement("path",{stroke:"var(--color-icon)",strokeLinecap:"round",d:"m6.375 17.625 11.25-11.25"}))}function zh(e){return Q.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},Q.createElement("path",{stroke:"var(--color-icon)",strokeLinecap:"round",strokeLinejoin:"round",d:"m4.5 19.5 15-15m0 0H13m6.5 0V11"}))}function zg(e){return Q.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},Q.createElement("path",{stroke:"var(--color-icon)",strokeLinecap:"round",strokeLinejoin:"round",d:"m6.5 17.5 11-11m0 0h-5m5 0v5"}))}function zE(e){return Q.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},Q.createElement("circle",{cx:"12",cy:"12",r:"8.5",stroke:"var(--color-icon)"}))}function zv(e){return Q.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},Q.createElement("circle",{cx:"12",cy:"12",r:"6.5",stroke:"var(--color-icon)"}))}function zy(e){return Q.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},Q.createElement("path",{stroke:"var(--color-icon)",d:"M11.784 3.875a.25.25 0 0 1 .432 0l8.228 14.25a.25.25 0 0 1-.217.375H3.773a.25.25 0 0 1-.217-.375l8.227-14.25Z"}))}function zb(e){return Q.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},Q.createElement("path",{stroke:"var(--color-icon)",d:"M11.946 6.093a.062.062 0 0 1 .108 0l6.525 11.294a.057.057 0 0 1 0 .062.066.066 0 0 1-.022.024.058.058 0 0 1-.032.007H5.475a.058.058 0 0 1-.032-.007.065.065 0 0 1-.022-.024.066.066 0 0 1-.01-.031c0-.008.002-.018.01-.031l6.525-11.294Z"}))}function zC(e){return Q.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},Q.createElement("path",{stroke:"var(--color-icon)",d:"m14.106 9.1.113.346h5.64a.5.5 0 0 1 .294.905l-4.27 3.102-.293.213.112.346 1.631 5.02a.5.5 0 0 1-.77.558l-4.27-3.102-.293-.213-.294.213-4.27 3.102a.5.5 0 0 1-.769-.559l1.63-5.02.113-.345-.294-.213-4.27-3.102a.5.5 0 0 1 .295-.905H9.78l.113-.345 1.63-5.02a.5.5 0 0 1 .952 0l1.63 5.02Z"}))}function zw(e){return Q.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},Q.createElement("path",{stroke:"var(--color-icon)",d:"m13.635 9.575.113.343h4.393a.4.4 0 0 1 .233.725l-3.252 2.336-.298.214.115.348 1.248 3.797a.4.4 0 0 1-.614.45l-3.281-2.357-.292-.21-.292.21-3.281 2.357a.4.4 0 0 1-.614-.45l1.248-3.797.115-.348-.298-.214-3.252-2.336a.4.4 0 0 1 .233-.725h4.393l.113-.343 1.255-3.818a.4.4 0 0 1 .76 0l1.255 3.818Z"}))}var zT=n(38148),zx=n(803038);function zN(e){return Q.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},Q.createElement("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"m18.174 14.902.182-.579c.496-1.58.17-3.383-1.563-5.116-.43-.431-1.11-.87-1.999-1.294-.877-.42-1.904-.8-2.982-1.14-2.027-.636-4.174-1.104-5.734-1.402l4.906 4.905a2 2 0 1 1-.707.708L5.372 6.078c.297 1.56.766 3.707 1.402 5.733.695 2.213 1.532 4.08 2.433 4.982 1.734 1.733 3.537 2.059 5.117 1.562l.579-.181.428.428L16.728 20 20 16.727l-1.397-1.397-.429-.428Zm1.136-.28 1.397 1.398a1 1 0 0 1 0 1.415l-3.272 3.271a1 1 0 0 1-1.414 0l-1.397-1.397c-1.974.62-4.157.158-6.124-1.81-2.184-2.183-3.573-8.342-4.167-11.531a1.39 1.39 0 0 1 1.635-1.636c3.19.595 9.348 1.984 11.532 4.167 1.967 1.967 2.43 4.15 1.81 6.124Zm-6.603-1.915a1 1 0 1 0-1.414-1.415 1 1 0 0 0 1.414 1.415Z",clipRule:"evenodd"}))}function zk(e){return Q.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},Q.createElement("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M3.008 4.124a1 1 0 0 1 1.116-1.116l4 .5a1 1 0 0 1 .583.285L20.5 15.586a2 2 0 0 1 0 2.828L18.414 20.5a2 2 0 0 1-2.828 0L3.793 8.707a1 1 0 0 1-.285-.583l-.5-4ZM4 4l.128 1.024L4.5 8l9.146 9.146 3.5-3.5L8 4.5l-2.976-.372L4 4Zm13.854 10.354-3.5 3.5 1.939 1.939a1 1 0 0 0 1.414 0l2.086-2.086a1 1 0 0 0 0-1.414l-1.94-1.94Z",clipRule:"evenodd"}))}var zS=n(42086);function zI(e){return Q.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},Q.createElement("path",{stroke:"var(--color-icon)",strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 7.5v-3H12m7.5 3v-3H12m0 0v15m0 0H9m3 0h3"}))}var zA=n(915377),zP=n(272777);function zO(e){return Q.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},Q.createElement("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M13.359 4.736c.122-.287-.03-.632-.34-.672A8 8 0 0 0 4 12v4.8c.001 1.12.001 1.68.219 2.108a2 2 0 0 0 .874.874C5.52 20 6.08 20 7.2 20H12a8 8 0 0 0 7.936-9.02c-.04-.309-.385-.461-.672-.339a.514.514 0 0 0-.313.528A7 7 0 0 1 12 19H7.2c-.577 0-.949 0-1.232-.024-.272-.022-.373-.06-.422-.085a1 1 0 0 1-.437-.437c-.025-.05-.063-.15-.085-.422C5 17.75 5 17.377 5 16.8V12a7 7 0 0 1 7.831-6.951.515.515 0 0 0 .528-.313Z",clipRule:"evenodd"}),Q.createElement("circle",{cx:"17.5",cy:"6.5",r:"2.5",fill:"var(--color-icon-danger)"}))}function zL(e){return Q.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},Q.createElement("path",{stroke:"var(--color-icon)",d:"M4.5 12a7.5 7.5 0 1 1 7.5 7.5H7.2c-.568 0-.964 0-1.273-.026-.302-.024-.476-.07-.608-.137a1.5 1.5 0 0 1-.656-.656c-.067-.132-.113-.306-.137-.608-.026-.308-.026-.705-.026-1.273V12Z"}))}function zM(e){return Q.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},Q.createElement("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"m20.854 6.854-3 3a.5.5 0 0 1-.708-.708L19.293 7H16a2.5 2.5 0 0 0-2.5 2.5v5A3.5 3.5 0 0 1 10 18H8.95a2.5 2.5 0 1 1 0-1H10a2.5 2.5 0 0 0 2.5-2.5v-5A3.5 3.5 0 0 1 16 6h3.293l-2.147-2.146a.5.5 0 0 1 .708-.708l3 3a.5.5 0 0 1 0 .708ZM8 17.5a1.5 1.5 0 1 0-3 0 1.5 1.5 0 0 0 3 0Z",clipRule:"evenodd"}))}function zD(e){return Q.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},Q.createElement("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M20 5.5a2.5 2.5 0 1 1-5 0 2.5 2.5 0 0 1 5 0ZM17.5 7a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3Zm0 9a.5.5 0 0 1 .5.5V18h1.5a.5.5 0 1 1 0 1H18v1.5a.5.5 0 1 1-1 0V19h-1.5a.5.5 0 0 1 0-1H17v-1.5a.5.5 0 0 1 .5-.5ZM8.808 5.783l-1.006 3.52-3.52 1.005c-1.701.486-1.701 2.898 0 3.384l3.52 1.006 1.006 3.52c.486 1.701 2.898 1.701 3.384 0l1.006-3.52 3.519-1.006c1.702-.486 1.702-2.898 0-3.384l-3.52-1.006-1.005-3.52c-.486-1.701-2.898-1.701-3.384 0Zm.961.275L8.611 10.11l-4.053 1.16c-.735.21-.735 1.252 0 1.462l4.053 1.158 1.158 4.053c.21.735 1.252.735 1.462 0l1.158-4.053 4.053-1.158c.735-.21.735-1.252 0-1.462l-4.053-1.158-1.158-4.053c-.21-.735-1.252-.735-1.462 0Z",clipRule:"evenodd"}))}var zR=n(927457),zF=n(871170);let zB="toolbelt_button--selectedButton--AAVAi",zU="toolbelt_button--iconButtonInner--1q8L7",zH=(0,Q.forwardRef)(function({tooltipText:e,tooltipShortcut:t,onMouseDown:n,isActive:a=!1,disabled:r=!1,simulateHover:l=!1,isToolGroup:i=!1,isToolbeltAction:o=!1,children:s,onboardingKey:c,recordingKey:d="toolbelt-button",elementId:u},m){let p=(0,Q.useRef)(null);(0,Q.useImperativeHandle)(m,()=>({getBoundingClientRect:()=>p.current.getBoundingClientRect()}));let _=ea()("toolbelt_button--topLevelButton--IxD8f",r?"toolbelt_button--disabledButton--0ohMF":{[zU]:!i,"toolbelt_button--toolbeltActionIconButton--ATFbb":o,[zB]:!i&&a,"toolbelt_button--hovered--ugy3A":l}),f=(0,nh.rf)(d,"mousedown",n);return Q.createElement("div",{ref:p,className:_,id:u,onMouseDown:f,"data-tooltip-type":nO.Ib.TEXT,"data-tooltip":e,"data-tooltip-shortcut":t,"data-tooltip-show-above":!0,role:"presentation","aria-label":e,"data-fullscreen-intercept":!0,"data-onboarding-key":c},s)}),zV=Q.memo(function({toolId:e,tooltipText:t,tooltipShortcut:n,disabled:a=!1,icon:r,activeToolId:l,onActivateTool:i,onboardingKey:o,recordingKey:s=`tool-${e}`}){let c=(0,Q.useCallback)(()=>i(e),[i,e]),d=e===l;return Q.createElement(zH,{onMouseDown:c,tooltipText:t,tooltipShortcut:n,onboardingKey:o,disabled:a,isActive:d,recordingKey:s},r)});var zG=n(902008),zK=n(338998),zW=((L=zW||{}).Button="Button",L.Tool="Tool",L.Divider="Divider",L);function zz(e){switch(e.type){case"Divider":return!0;case"Tool":return!e.hidden;default:(0,re.xb)(e)}}function zj(e){switch(e.type){case"Divider":return!1;case"Tool":return!0;default:(0,re.xb)(e)}}function zY(e){let{items:t}=e,n=t.filter(zz);return n.some(e=>zj(e)&&!e.disabled)?Q.createElement(zX,{...e,items:n}):null}function zZ(e,t){return e.find(e=>zj(e)&&t===e.toolId)}function zX(e){let{activeToolId:t,items:n,tooltipText:a,overlayId:r,onActivateTool:l,onboardingKey:i,recordingKey:o=`tool-group-${r}`,dropdownShown:s,onOpen:c,onClose:d}=e,u=null!=t&&zZ(n,t)?t:void 0,m=()=>{if(null!=u)return u;let e=n.find(e=>zj(e)&&!e.disabled);if(!e)throw Error("Expected to have an enabled tool");return e.toolId},[p,_]=(0,Q.useState)(m()),f=zZ(n,p),h=()=>_(m()),g=(0,zK.Rt)();(0,ts.h)(()=>(nh.y6(h),()=>nh.nS(h))),(0,Q.useEffect)(()=>{null!=u&&_(u)},[u]);let E=!!s&&s.type===r,v=(0,Q.useRef)(null),y=(0,nh.rf)(o+".chevron","mousedown",e=>{var t;if(e.stopPropagation(),E)d();else{let e=null==(t=v.current)?void 0:t.getBoundingClientRect();e&&c({overlayId:r,anchorClientRect:e})}}),b=p===t,C=g?nh.Pt(o,`default.${f.recordingKey}`):o;return Q.createElement(zH,{tooltipText:f.text,tooltipShortcut:f.shortcutText,onboardingKey:i,onMouseDown:()=>l(p),isActive:b,simulateHover:E,ref:v,recordingKey:C,isToolGroup:!0},Q.createElement("div",{className:ea()(zU,{[zB]:b})},f.icon||f.text),Q.createElement("div",{className:ea()("tool_group--chevronContainer--yrORi",E?"tool_group--flyoutChevronSelected--3Ruzg":""),"data-tooltip-type":nO.Ib.TEXT,"data-tooltip":a,"data-tooltip-show-above":!0,onMouseDown:y,onClick:e=>e.stopPropagation(),"data-testid":`${r}-chevron`,"data-onboarding-key":i},Q.createElement("div",{className:ea()("tool_group--flyoutSvgChevron--U6s3C","tool_group--flyoutChevron--0uKcR")},Q.createElement(C1.r,null))),E&&Q.createElement(zq,{...e,selectedToolId:p}))}function zq(e){let{onActivateTool:t,recordingKey:n,selectedToolId:a,showItemIcons:r,simulatedHoverToolIdAtom:l,dropdownShown:i,items:o}=e;if(!i)return(0,ar.x1)("FlyoutDropdown","Expected flyout info"),null;let s={...i.data.targetRect,top:i.data.targetRect.top-8,height:i.data.targetRect.height+16};return Q.createElement(ho.Cf,{targetRect:s,className:"tool_group--pointingDropdown--K3J5U",showPoint:!1,displayAboveTarget:!0,propagateCloseClick:!0},Q.createElement("div",{className:"tool_group--flyoutDropdownContainer--v5PVq"},o.map((e,i)=>Q.createElement(zQ,{key:function(e,t){switch(e.type){case"Divider":return`divider-${t}`;case"Tool":return`tool-${e.toolId}`;default:(0,re.xb)(e)}}(e,i),item:e,showItemIcon:r,hideCheck:!1,onActivateTool:t,recordingKey:n,isSelected:zj(e)&&a===e.toolId,simulatedHoverToolIdAtom:l}))))}let zJ=(0,nf.eU)(void 0);function zQ({item:e,showItemIcon:t=!0,hideCheck:n,isSelected:a,onActivateTool:r,recordingKey:l,simulatedHoverToolIdAtom:i=zJ}){let o=(0,ef.md)(i);return"Divider"===e.type?Q.createElement(_O.W.Separator,null):Q.createElement(z$,{text:e.text,shortcut:e.shortcutText,disabled:e.disabled,isChecked:a,onPointerUp:()=>r(e.toolId),icon:t?e.smallIcon||e.icon:void 0,hideCheck:n,recordingKey:nh.Pt(l,"flyout",e.recordingKey),onboardingKey:e.onboardingKey,simulateHover:e.toolId===o})}function z$({text:e,shortcut:t,icon:n,disabled:a,onClick:r,onPointerUp:l,recordingKey:i,onboardingKey:o,simulateHover:s,hideCheck:c,isChecked:d}){return Q.createElement(_O.W.Option,{disabled:a,onClick:r,onPointerUp:l,recordingKey:i,simulateHover:s,onboardingKey:o},!c&&Q.createElement("div",{className:"tool_group--flyoutOptionCheckMarkContainer--xW1vs tool_group--flyoutOptionIconContainerBase--5xPWU"},d&&Q.createElement(zG.l,null)),n&&Q.createElement("div",{className:"tool_group--flyoutOptionIconContainer--zxGU0 tool_group--flyoutOptionIconContainerBase--5xPWU"},n),Q.createElement("div",{className:"tool_group--flyoutOptionText--Xyo1C"},e),null!=t&&Q.createElement(Uw.S,{shortcut:t,className:"tool_group--flyoutOptionShortcut--yOMoL"}))}function z0({children:e}){return Q.createElement("div",{role:"toolbar",className:ea()("toolbelt--root--cwDZk",eK.Dm)},e)}function z1({onAction:e,isActive:t=!1,tooltipText:n,tooltipShortcut:a,disabled:r=!1,icon:l,onboardingKey:i,recordingKey:o="toolbelt-action",elementId:s}){return Q.createElement(zH,{onMouseDown:e,tooltipText:n,tooltipShortcut:a,onboardingKey:i,recordingKey:o,disabled:r,elementId:s,isToolbeltAction:!0},Q.createElement("div",{className:ea()("toolbelt_button--iconCircle--MtXrF",{"toolbelt_button--active--GOgiG":t})},l))}function z2(){return Q.createElement("div",{className:"toolbelt_divider--divider--9OB-d"})}var z5=n(584530);function z4(){return(0,ti.R_)()?Q.createElement(z3,null):null}function z3(){let e=(0,t8.U)("upsell"),t=(0,$.wA)(),{show:n,isShowing:a,complete:r}=(0,tp.e)({overlay:tv.gHN,priority:th.N.DEFAULT_MODAL}),l=(0,tm.Yr)()!==tm.QH.CONTROL,i=(0,tm.bZ)(),o=(0,Q.useCallback)(()=>{r(),e("handoff"),t(tB.b({dev_mode_notified_of_approved_org_request:!0,...l?{dev_mode_seen_paywall_reminder:!0}:{}}))},[r,t,l,e]),s=(0,Q.useCallback)(()=>{r(),t(tB.b({dev_mode_notified_of_approved_org_request:!0,...l?{dev_mode_seen_paywall_reminder:!0}:{}}))},[r,t,l]);return(0,ts.h)(()=>{n()}),Q.createElement(c9.rq,{isShowing:a,targetKey:l?z5.e:mM.ON,shouldCenterArrow:dn.EL.BEST_EFFORT,trackingContextName:"Dev Mode Approved Access Hint",title:Q.createElement(eO.Tx,{id:"dev_handoff.paywall.approved.title"}),description:Q.createElement(eO.Tx,{id:"dev_handoff.paywall.approved.description"}),primaryCta:l?void 0:{label:Q.createElement(eO.Tx,{id:"fullscreen_actions.enter-inspect-mode"}),type:"button",onClick:o,ctaTrackingDescriptor:c5.c.DEV_MODE_APPROVED_ACCESS_HINT_SWITCH_MODE},onClose:s,emphasized:!0,disableHighlight:!l,trackingProperties:i,trackingEnabled:!l||(null==i?void 0:i.gracePeriod)!==void 0,forceEditorTheme:l?"dev-handoff":void 0})}let z6="dev_mode_has_seen_direct_link_hint",z7=(0,tc.Fu)(z6);function z8(){let e=(0,ef.md)(t7.R);return(0,tm.HV)()||!e?null:Q.createElement(z9,null)}function z9(){let e=(0,ti._I)(),t=(0,ef.md)(z7),n=(0,$.wA)(),{show:a,isShowing:r,complete:l}=(0,tp.e)({overlay:tv.gZN,priority:th.N.DEFAULT_MODAL},[t]),i=(0,Q.useCallback)(()=>{l(),n(tB.b({[z6]:!0}))},[l,n]),o=(0,Q.useCallback)(()=>{e||a({canShow:e=>!e})},[a,e]);return((0,ts.h)(()=>{o()}),Q.useEffect(()=>{e&&r&&i()},[e,r,i]),r)?Q.createElement(c9.rq,{isShowing:r,targetKey:mM.ON,shouldCenterArrow:dn.EL.BEST_EFFORT,trackingContextName:"Dev Mode Direct Link Hint",title:Q.createElement(eO.Tx,{id:"dev_handoff.paywall.direct_link_hint.title"}),description:Q.createElement(eO.Tx,{id:"dev_handoff.paywall.direct_link_hint.description"}),primaryCta:{label:Q.createElement(eO.Tx,{id:"general.got_it"}),type:"button",onClick:i,variantOverride:"secondary",ctaTrackingDescriptor:c5.c.DEV_MODE_DIRECT_LINK_HINT},onClose:i,emphasized:!1,disableHighlight:!0}):null}function je(e){return Q.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},Q.createElement("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M10.354 5.646a.5.5 0 0 1 0 .708L7.707 9H11.5c3.576 0 6.5 2.924 6.5 6.5v2a.5.5 0 0 1-1 0v-2c0-3.024-2.476-5.5-5.5-5.5H7.707l2.647 2.646a.5.5 0 0 1-.708.708l-3.5-3.5a.5.5 0 0 1 0-.708l3.5-3.5a.5.5 0 0 1 .708 0Z",clipRule:"evenodd"}))}function jt({children:e}){return Q.createElement("div",{className:"toolbelt_label--toolbeltLabel--OWyZ2"},e)}function jn({children:e}){return Q.createElement("div",{role:"toolbar",className:"secondary_toolbelt--root--YkdV7","data-secondary-toolbelt":!0},Q.createElement("div",{className:"secondary_toolbelt--secondaryToolbeltContainer--BkpOx"},e))}function ja({handleAction:e}){var t,n;let a=(0,eG.J2)(null==(n=null==(t=eU.Ez5)?void 0:t.devHandoffState())?void 0:n.nodeIds),r=(0,lm.uQ)(),l=r?a.indexOf(r):-1,i=yy(),o=(0,$.d4)(e=>e.mirror.appModel.keyboardShortcuts),s=!!(0,c_.hA)();return!i&&(-1===l||s)?null:Q.createElement(jn,null,i&&Q.createElement(Q.Fragment,null,Q.createElement(zH,{onMouseDown:()=>{e("zoom-to-selection")},tooltipText:(0,eO.t)("dev_handoff.recenter")},Q.createElement(je,null)),Q.createElement(z2,null),Q.createElement(jt,null,Q.createElement("span",{className:"secondary_toolbelt--secondaryToolbeltLabel--seOut"},Q.createElement(eO.Tx,{id:"dev_handoff.recenter"})),Q.createElement("span",{style:{marginLeft:"var(--spacer-1)",color:"var(--color-text-secondary)"}},(0,yu.c1)(o,"zoom-to-selection")))),!i&&-1!==l&&Q.createElement(Q.Fragment,null,Q.createElement(zH,{onMouseDown:()=>{e("dev-handoff-focus-previous")},tooltipText:(0,eO.t)("viewer.footer.previous_frame")},Q.createElement(fA.C,null)),Q.createElement(z2,null),Q.createElement(jt,null,Q.createElement(eO.Tx,{id:"viewer.footer.frame_progress",currentFrameIndex:l+1,frameCount:a.length})),Q.createElement(z2,null),Q.createElement(zH,{onMouseDown:()=>{e("dev-handoff-focus-next")},tooltipText:(0,eO.t)("viewer.footer.next_frame")},Q.createElement(pc.e,null))))}function jr(e){return Q.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},Q.createElement("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M17.5 8a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3Zm0 1a2.5 2.5 0 1 0-2.45-3H14a8 8 0 0 0-8 8v1.05a2.5 2.5 0 1 0 1 0V14a7 7 0 0 1 7-7h1.05a2.5 2.5 0 0 0 2.45 2Zm-11 10a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3Z",clipRule:"evenodd"}))}function jl(e){return Q.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},Q.createElement("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M13.207 3.293a1 1 0 0 0-1.414 0L9.396 5.689 7.354 3.646a.5.5 0 1 0-.708.708L8.69 6.396 4.207 10.88a3 3 0 0 0 0 4.242l4.672 4.672a3 3 0 0 0 4.242 0l7.586-7.586a1 1 0 0 0 0-1.414l-7.5-7.5Zm-3.81 3.81-4.483 4.483a2 2 0 0 0 0 2.828l4.672 4.672a2 2 0 0 0 2.828 0l6.879-6.879L20 11.5l-.707-.707-6.086-6.086L12.5 4l-.707.707-1.69 1.69 2.75 2.75a1.5 1.5 0 1 1-.707.707l-2.75-2.75ZM19 20a1 1 0 0 0 1-1c0-.27-.15-.694-.47-1.22a8.14 8.14 0 0 0-.53-.758 8.14 8.14 0 0 0-.53.758c-.32.526-.47.95-.47 1.22a1 1 0 0 0 1 1Zm0 1a2 2 0 0 0 2-2c0-1.108-1.09-2.488-1.661-3.134a.448.448 0 0 0-.678 0C18.09 16.512 17 17.892 17 19a2 2 0 0 0 2 2Zm-5-10.5a.5.5 0 1 1-1 0 .5.5 0 0 1 1 0Z",clipRule:"evenodd"}))}function ji({activeToolId:e,activateTool:t,getShortcutTextForTool:n,closeSecondaryToolbelt:a}){let r=(0,zK.Rt)();return Q.createElement(jn,null,Q.createElement(zV,{toolId:eU.NLJ.VECTOR_BEND,icon:Q.createElement(jr,null),onActivateTool:t,activeToolId:e,tooltipText:(0,eO.t)("fullscreen_actions.set-tool-bend"),tooltipShortcut:n(eU.NLJ.VECTOR_BEND)}),Q.createElement(zV,{recordingKey:r?"toolbarView.toolPaintBucket":void 0,toolId:eU.NLJ.VECTOR_PAINT_BUCKET,icon:Q.createElement(jl,null),onActivateTool:t,activeToolId:e,tooltipText:(0,eO.t)("fullscreen_actions.set-tool-paint-bucket"),tooltipShortcut:n(eU.NLJ.VECTOR_PAINT_BUCKET)}),Q.createElement(z2,null),Q.createElement(zH,{onMouseDown:a,tooltipText:(0,eO.t)("fullscreen.toolbar.secondary_toolbar.close")},Q.createElement(fU.A,null)))}var jo=((M=jo||{}).SelectTools="SelectTools",M.FrameTools="FrameTools",M.PenTools="PenTools",M.ShapeTools="ShapeTools",M.ToolkitMode="ToolkitMode",M.SitesLayoutMode="SitesLayoutMode",M),js=((D=js||{}).None="None",D.PenTool="PenTool",D.ImageOrVideoTool="ImageOrVideoTool",D.DevModeInspectTool="DevModeInspectTool",D);let jc=[eU.m1T.PREVIEW,eU.m1T.BRANCHING,eU.m1T.COMPARE_CHANGES,eU.m1T.HISTORY],jd="PROTOTYPE",ju="QUICK_ACTIONS";function jm(e,t){switch(e){case eU.NLJ.SCALE:return"set-tool-scale";case eU.NLJ.HAND:return"set-tool-hand";case eU.NLJ.SELECT:return t?"set-tool-default-dev-handoff":"set-tool-default";case eU.NLJ.SLICE:return"set-tool-slice";case eU.NLJ.SECTION:return"set-tool-section";case eU.NLJ.FRAME:return"set-tool-frame";case eU.NLJ.IMAGE_OR_VIDEO:return"place";case eU.NLJ.SHAPE_STAR:return"set-tool-star";case eU.NLJ.SHAPE_REGULAR_POLYGON:return"set-tool-regular-polygon";case eU.NLJ.SHAPE_ELLIPSE:return"set-tool-ellipse";case eU.NLJ.SHAPE_ARROW:return"set-tool-arrow";case eU.NLJ.SHAPE_LINE:return"set-tool-line";case eU.NLJ.SHAPE_RECTANGLE:return"set-tool-rectangle";case eU.NLJ.SITES_LAYOUT_SET:return"set-tool-sites-layout-set";case eU.NLJ.VECTOR_PENCIL:return"set-tool-pencil";case eU.NLJ.VECTOR_PEN:return"set-tool-pen";case eU.NLJ.TYPE:return"set-tool-type";case eU.NLJ.COMMENTS:return"set-tool-comments";case eU.NLJ.ANNOTATE:return"set-tool-annotate";case eU.NLJ.MEASURE:return"set-tool-measure";case eU.NLJ.VECTOR_BEND:return"set-tool-bend";case eU.NLJ.VECTOR_PAINT_BUCKET:return"set-tool-paint-bucket";case eU.NLJ.MULTISELECT:return"set-tool-multiselect";case eU.NLJ.WAND:return"set-tool-wand";case eU.NLJ.NONE:case eU.NLJ.DROPPER_COLOR:case eU.NLJ.STACK:case eU.NLJ.STICKY:case eU.NLJ.STAMP:case eU.NLJ.SHAPE_WHITEBOARD_SQUARE:case eU.NLJ.SHAPE_WHITEBOARD_ELLIPSE:case eU.NLJ.SHAPE_WHITEBOARD_DIAMOND:case eU.NLJ.SHAPE_WHITEBOARD_TRIANGLE_UP:case eU.NLJ.SHAPE_WHITEBOARD_TRIANGLE_DOWN:case eU.NLJ.SHAPE_WHITEBOARD_ROUNDED_RECTANGLE:case eU.NLJ.SHAPE_WHITEBOARD_PARALLELOGRAM_RIGHT:case eU.NLJ.SHAPE_WHITEBOARD_PARALLELOGRAM_LEFT:case eU.NLJ.CONNECTOR_ELBOWED:case eU.NLJ.CONNECTOR_STRAIGHT:case eU.NLJ.CODE_BLOCK:case eU.NLJ.SHAPE_WHITEBOARD_ENG_DATABASE:case eU.NLJ.SHAPE_WHITEBOARD_ENG_QUEUE:case eU.NLJ.SHAPE_WHITEBOARD_ENG_FILE:case eU.NLJ.SHAPE_WHITEBOARD_ENG_FOLDER:case eU.NLJ.ERASER:case eU.NLJ.HIGHLIGHTER:case eU.NLJ.WASHI_TAPE:case eU.NLJ.TABLE:case eU.NLJ.SHAPE_WHITEBOARD_TRAPEZOID:case eU.NLJ.SHAPE_WHITEBOARD_STAR:case eU.NLJ.SHAPE_WHITEBOARD_SHIELD:case eU.NLJ.SHAPE_WHITEBOARD_HEXAGON:case eU.NLJ.SHAPE_WHITEBOARD_PENTAGON:case eU.NLJ.SHAPE_WHITEBOARD_OCTAGON:case eU.NLJ.SHAPE_WHITEBOARD_PLUS:case eU.NLJ.SHAPE_WHITEBOARD_PREDEFINED_PROCESS:case eU.NLJ.SHAPE_WHITEBOARD_MANUAL_INPUT:case eU.NLJ.SHAPE_WHITEBOARD_CHEVRON:case eU.NLJ.SHAPE_WHITEBOARD_DOCUMENT_SINGLE:case eU.NLJ.SHAPE_WHITEBOARD_DOCUMENT_MULTIPLE:case eU.NLJ.SHAPE_WHITEBOARD_ARROW_LEFT:case eU.NLJ.SHAPE_WHITEBOARD_ARROW_RIGHT:case eU.NLJ.SHAPE_WHITEBOARD_SUMMING_JUNCTION:case eU.NLJ.SHAPE_WHITEBOARD_OR:case eU.NLJ.SHAPE_WHITEBOARD_SPEECH_BUBBLE:case eU.NLJ.SHAPE_WHITEBOARD_INTERNAL_STORAGE:case eU.NLJ.SHAPE_WHITEBOARD_MINDMAP_TREE_NUCLEUS:case eU.NLJ.SLIDES_POLL:case eU.NLJ.SLIDES_EMBED:case eU.NLJ.HAND_SELECT:case eU.NLJ.LASSO:throw Error("Tool not supported yet");default:(0,re.xb)(e)}}let jp=(0,gp.bt)(e=>e.dropdownShown),j_=(0,gp.bt)(e=>e.mirror.appModel.currentTool),jf=(0,gp.bt)(e=>e.mirror.appModel.topLevelMode),jh=(0,gp.bt)(e=>e.mirror.appModel.activeCanvasEditModeType),jg=(0,gp.bt)(cX.kg),jE={readOnlyOverlayInfoAtom:jp,activeToolIdAtom:(0,nf.eU)(e=>e(j_),(e,t,n)=>{let a=jm(n,e(jf)===eU.lyf.DEV_HANDOFF);oy.VU.get(a,"toolbar")()}),readOnlyTopLevelModeAtom:jf,readOnlyEditModeTypeAtom:jh},jv="toolbarView";function jy(){var e;let t=(0,gI.n6)(),n=(0,Tw.SD)(eU.NLJ.ANNOTATE);(0,re.KF)(null!==n,"No icon for tool or action");let a=(0,$.wA)(),r=Q.useCallback(e=>{if(!(null==e?void 0:e.overlayId)){a(nP.oB());return}let t=e.anchorClientRect;a(nP.j7({type:String(e.overlayId),data:{targetRect:{top:t.top,left:t.left+74,width:t.width}}}))},[a]),l=(0,$.d4)(e=>e.mirror.appModel.keyboardShortcuts),{activeToolId:i,activateTool:o,dropdownShown:s,openOverlay:c,closeOpenOverlay:d,topLevelMode:u,editModeType:m}=function({activeToolIdAtom:e,readOnlyOverlayInfoAtom:t,readOnlyTopLevelModeAtom:n,readOnlyEditModeTypeAtom:a},r){let l=(0,ef.md)(t),[i,o]=(0,ef.fp)(e),s=(0,ef.md)(n),c=(0,ef.md)(a),d=(null==l?void 0:l.type)!==null,u=(0,Q.useCallback)(()=>{r(null)},[r]);return(0,Q.useEffect)(()=>{d||u()},[d,u]),{activeToolId:i,dropdownShown:l,openOverlay:e=>{r(e)},closeOpenOverlay:u,activateTool:e=>{o(e),u()},topLevelMode:s,editModeType:c}}(jE,r),p=(0,ae.aV)(),_=(0,t8.U)("ui3_toolbelt"),f=u===eU.lyf.LAYOUT,h=u===eU.lyf.DEV_HANDOFF,g=(0,mP.cJ)(),E=(0,ED.s)(),v=(0,eG.J2)(null==(e=eU.Ez5)?void 0:e.slidesToolMode()),y=f&&!g,b=u===eU.lyf.HISTORY,C=jc.includes(m),w=(0,ti._I)(),T=(0,ef.md)(Es.wg),[x,N]=(0,Q.useState)("None"),k=(0,ef.md)(jg),S=(0,c_.l7)(),I=(0,ef.md)(WU.Bu),A=(0,eG.ut)((0,eV.aY)(),null),P="ui3"===(0,et.DP)().version,O=(0,ex.o3)(ex.nt.ui3PrototypeAsATool),L=P&&O&&f,M=(0,ae.p8)("prototypeCanvasUiVisible"),D=!!L&&((0,TT.Zd)()?M:A===eU.FAf.PROTOTYPE),R=Q.useRef(null);!function(e){let t=(0,e_.Xr)(WU.Sf);Q.useEffect(()=>((0,eo.kc)().qa_v2&&t(e),()=>{(0,eo.kc)().qa_v2&&t(null)}),[e,t])}(R);let F=e=>{L?((0,TT.Zd)()?e===jd!==D&&oy.VU.get("toggle-prototyping-info","panel")():e===jd?(0,eV.NT)(eU.FAf.PROTOTYPE):(0,eV.NT)(eU.FAf.DESIGN),o(e===jd?eU.NLJ.SELECT:e)):((0,re.KF)(e!==jd,"activateTool() should not be called with DUMMY_PROTOTYPE_TOOL_ID"),o(e))},B=nh.rf(nh.Pt("designToolbelt","toggleDevMode"),"click",()=>{i!==eU.NLJ.COMMENTS&&F(eU.NLJ.SELECT),_(h?"design":"handoff")}),U=e=>nh.Pt(jv,e),H=e=>(0,yu.c1)(l,e),V=e=>H(jm(e,h)),G=e=>{oy.VU.get(e,"toolbar")()};return((0,Q.useEffect)(()=>{i!==eU.NLJ.VECTOR_BEND&&i!==eU.NLJ.VECTOR_PAINT_BUCKET&&(f&&m===eU.m1T.VECTOR?N("PenTool"):i===eU.NLJ.IMAGE_OR_VIDEO?N("ImageOrVideoTool"):h&&i===eU.NLJ.SELECT?N("DevModeInspectTool"):N("None"))},[i,f,h,m]),p||S)?Q.createElement(Q.Fragment,null):Q.createElement(t6.fu,{name:Ex.e0.EDITOR_TOOLBELT},Q.createElement("div",{className:"design_toolbelt--toolbeltWrapper--tM2Eq",ref:R},Q.createElement(z0,null,f&&Q.createElement(zY,{overlayId:"SelectTools",recordingKey:U("moveFlyout"),tooltipText:(0,eO.t)("fullscreen.flyout.move_tools"),items:[{type:zW.Tool,toolId:eU.NLJ.SELECT,text:(0,eO.t)("fullscreen_actions.set-tool-default"),shortcutText:V(eU.NLJ.SELECT),icon:Q.createElement(zt,null),smallIcon:Q.createElement(zn,null),recordingKey:"toolDefault"},{type:zW.Tool,toolId:eU.NLJ.HAND,text:(0,eO.t)("fullscreen_actions.set-tool-hand"),shortcutText:V(eU.NLJ.HAND),icon:Q.createElement(za,null),smallIcon:Q.createElement(zr,null),recordingKey:"toolHand"},{type:zW.Tool,toolId:eU.NLJ.SCALE,text:(0,eO.t)("fullscreen_actions.set-tool-scale"),shortcutText:V(eU.NLJ.SCALE),icon:Q.createElement(zl,null),smallIcon:Q.createElement(zi.l,null),recordingKey:"toolScale"}],dropdownShown:s,onOpen:c,onClose:d,activeToolId:D?void 0:i,onActivateTool:F}),g&&Q.createElement(zY,{overlayId:"SitesLayoutMode",tooltipText:(0,eO.t)("fullscreen.flyout.sites_layout_tools"),items:[{type:zW.Tool,toolId:eU.NLJ.SITES_LAYOUT_SET,text:(0,eO.t)("fullscreen_actions.set-tool-sites-layout-set"),shortcutText:"TBD",icon:Q.createElement(zo,null),recordingKey:"sites-layout-set-tool"},{type:zW.Tool,toolId:eU.NLJ.SECTION,text:(0,eO.t)("fullscreen_actions.set-tool-section"),shortcutText:V(eU.NLJ.SECTION),icon:Q.createElement(C$,null),smallIcon:Q.createElement(zs.c,null),recordingKey:"section-tool"}],dropdownShown:s,onOpen:c,onClose:d,activeToolId:i,onActivateTool:F}),h&&Q.createElement(zV,{toolId:eU.NLJ.SELECT,icon:Q.createElement(zt,null),onActivateTool:F,activeToolId:i,tooltipText:(0,eO.t)("fullscreen_actions.set-tool-default-dev-handoff"),tooltipShortcut:V(eU.NLJ.SELECT)}),C&&Q.createElement(Q.Fragment,null,Q.createElement(zV,{toolId:eU.NLJ.SELECT,icon:Q.createElement(zt,null),onActivateTool:F,activeToolId:i,tooltipText:(0,eO.t)("fullscreen_actions.set-tool-default"),tooltipShortcut:V(eU.NLJ.SELECT)}),Q.createElement(zV,{toolId:eU.NLJ.HAND,icon:Q.createElement(za,null),onActivateTool:F,activeToolId:i,tooltipText:(0,eO.t)("fullscreen_actions.set-tool-hand"),tooltipShortcut:V(eU.NLJ.HAND)})),f&&Q.createElement(zY,{overlayId:"FrameTools",recordingKey:U("regionFlyout"),tooltipText:(0,eO.t)("fullscreen.flyout.region_tools"),items:g?[{type:zW.Tool,toolId:eU.NLJ.FRAME,text:(0,eO.t)("fullscreen_actions.set-tool-frame"),shortcutText:V(eU.NLJ.FRAME),icon:Q.createElement(C0,null),smallIcon:Q.createElement(zc,null),recordingKey:"toolFrame"}]:[{type:zW.Tool,toolId:eU.NLJ.FRAME,text:(0,eO.t)("fullscreen_actions.set-tool-frame"),shortcutText:V(eU.NLJ.FRAME),icon:Q.createElement(C0,null),smallIcon:Q.createElement(zc,null),recordingKey:"toolFrame"},{type:zW.Tool,toolId:eU.NLJ.SECTION,text:(0,eO.t)("fullscreen_actions.set-tool-section"),shortcutText:V(eU.NLJ.SECTION),icon:Q.createElement(C$,null),smallIcon:Q.createElement(zs.c,null),recordingKey:"toolSection"},{type:zW.Tool,toolId:eU.NLJ.SLICE,text:(0,eO.t)("fullscreen_actions.set-tool-slice"),shortcutText:V(eU.NLJ.SLICE),icon:Q.createElement(zd,null),smallIcon:Q.createElement(zu,null),recordingKey:"toolSlice"}],dropdownShown:s,onOpen:c,onClose:d,activeToolId:i,onActivateTool:F}),y&&Q.createElement(zY,{overlayId:"ShapeTools",recordingKey:U("shapeFlyout"),tooltipText:(0,eO.t)("fullscreen.flyout.shape_tools"),items:[{type:zW.Tool,toolId:eU.NLJ.SHAPE_RECTANGLE,text:(0,eO.t)("fullscreen_actions.set-tool-rectangle"),shortcutText:V(eU.NLJ.SHAPE_RECTANGLE),icon:Q.createElement(zm,null),smallIcon:Q.createElement(zp,null),recordingKey:"toolShapeRectangle"},{type:zW.Tool,toolId:eU.NLJ.SHAPE_LINE,text:(0,eO.t)("fullscreen_actions.set-tool-line"),shortcutText:V(eU.NLJ.SHAPE_LINE),icon:Q.createElement(z_,null),smallIcon:Q.createElement(zf,null),recordingKey:"toolShapeLine"},{type:zW.Tool,toolId:eU.NLJ.SHAPE_ARROW,text:(0,eO.t)("fullscreen_actions.set-tool-arrow"),shortcutText:V(eU.NLJ.SHAPE_ARROW),icon:Q.createElement(zh,null),smallIcon:Q.createElement(zg,null),recordingKey:"toolShapeArrow"},{type:zW.Tool,toolId:eU.NLJ.SHAPE_ELLIPSE,text:(0,eO.t)("fullscreen_actions.set-tool-ellipse"),shortcutText:V(eU.NLJ.SHAPE_ELLIPSE),icon:Q.createElement(zE,null),smallIcon:Q.createElement(zv,null),recordingKey:"toolShapeElipse"},{type:zW.Tool,toolId:eU.NLJ.SHAPE_REGULAR_POLYGON,text:(0,eO.t)("fullscreen_actions.set-tool-regular-polygon"),icon:Q.createElement(zy,null),smallIcon:Q.createElement(zb,null),recordingKey:"toolShapePolygon"},{type:zW.Tool,toolId:eU.NLJ.SHAPE_STAR,text:(0,eO.t)("fullscreen_actions.set-tool-star"),icon:Q.createElement(zC,null),smallIcon:Q.createElement(zw,null),recordingKey:"toolShapeStar"},{type:zW.Tool,toolId:eU.NLJ.IMAGE_OR_VIDEO,text:(0,eO.t)("fullscreen_actions.place_image_or_video"),icon:Q.createElement(zT.T,null),smallIcon:Q.createElement(zx.s,null),shortcutText:V(eU.NLJ.IMAGE_OR_VIDEO),recordingKey:"image-tool"}],dropdownShown:s,onOpen:c,onClose:d,activeToolId:i,onActivateTool:F}),y&&Q.createElement(zY,{overlayId:"PenTools",recordingKey:U("penFlyout"),tooltipText:(0,eO.t)("fullscreen.flyout.drawing_tools"),items:[{type:zW.Tool,toolId:eU.NLJ.VECTOR_PEN,text:(0,eO.t)("fullscreen_actions.set-tool-pen"),shortcutText:V(eU.NLJ.VECTOR_PEN),icon:Q.createElement(zN,null),smallIcon:Q.createElement(h8.k,null),recordingKey:"toolPen"},{type:zW.Tool,toolId:eU.NLJ.VECTOR_PENCIL,text:(0,eO.t)("fullscreen_actions.set-tool-pencil"),shortcutText:V(eU.NLJ.VECTOR_PENCIL),icon:Q.createElement(zk,null),smallIcon:Q.createElement(zS.A,null),recordingKey:"toolPencil"}],dropdownShown:s,onOpen:c,onClose:d,activeToolId:i,onActivateTool:F}),f&&Q.createElement(zV,{toolId:eU.NLJ.TYPE,icon:Q.createElement(zI,null),onActivateTool:F,activeToolId:i,recordingKey:"toolbarView.toolType",tooltipText:(0,eO.t)("fullscreen_actions.set-tool-type"),tooltipShortcut:V(eU.NLJ.TYPE)}),h&&w&&Q.createElement(zV,{toolId:eU.NLJ.MEASURE,icon:Q.createElement(zA._,null),onActivateTool:F,activeToolId:i,tooltipText:(0,eO.t)("fullscreen_actions.set-tool-measure"),tooltipShortcut:V(eU.NLJ.MEASURE),recordingKey:"toolbarView.toolMeasure",onboardingKey:"tool-measurements-onboarding"}),h&&w&&Q.createElement(zV,{toolId:eU.NLJ.ANNOTATE,icon:Q.createElement(zP.K,null),onActivateTool:F,activeToolId:i,recordingKey:"toolbarView.toolAnnotate",tooltipText:(0,eO.t)("fullscreen_actions.set-tool-annotate"),tooltipShortcut:V(eU.NLJ.ANNOTATE),onboardingKey:"tool-annotations-onboarding"}),!b&&Q.createElement(zV,{toolId:eU.NLJ.COMMENTS,icon:t>0?Q.createElement(zO,null):Q.createElement(zL,null),onActivateTool:F,activeToolId:i,recordingKey:nh.Pt(jv,"toolComment"),tooltipText:(0,eO.t)("fullscreen_actions.comment"),tooltipShortcut:V(eU.NLJ.COMMENTS)}),L&&Q.createElement(zV,{toolId:jd,icon:Q.createElement(zM,null),onActivateTool:F,activeToolId:i===eU.NLJ.SELECT&&D?jd:void 0,tooltipText:(0,eO.t)("fullscreen_actions.prototype")}),(0,eo.kc)().qa_v2&&f&&Q.createElement(zV,{toolId:ju,icon:Q.createElement(zD,null),onActivateTool:()=>G("toggle-menu"),activeToolId:I?ju:i,tooltipText:(0,eO.t)("qa.extensions.tooltip_actions"),tooltipShortcut:H("toggle-menu")}),!(0,eo.kc)().qa_remove_inserts_modal&&f&&Q.createElement(z1,{icon:Q.createElement(zR.e,null),onAction:()=>{f&&oy.VU.get("component-insert","toolbar")()},tooltipText:"Insert",elementId:"toolbelt-action-component-insert",isActive:k,onboardingKey:tz.sY}),E&&v===eU.EMA.DESIGN&&Q.createElement(EM.zD,{recordingKey:"slides-tool-mode-toggle"}),C&&!T&&Q.createElement(z1,{icon:Q.createElement(Un.RJ,{viewOnly:!T,variant:"primary"}),tooltipText:"",onAction:ey.lQ}),!E&&!g&&Q.createElement(Q.Fragment,null,Q.createElement(z2,null),Q.createElement(z1,{icon:Q.createElement(zF.l,null),onAction:B,tooltipText:(0,eO.t)("general.dev_mode"),tooltipShortcut:H(h?"enter-design-mode":"enter-inspect-mode"),isActive:h,recordingKey:"toolbarView.switchToDevModeButton",onboardingKey:mM.ON}),Q.createElement(Ei.p,null,!p&&Q.createElement(z4,null),!p&&Q.createElement(z8,null)))),"PenTool"===x&&m===eU.m1T.VECTOR&&Q.createElement(ji,{activeToolId:i,activateTool:F,getShortcutTextForTool:V,closeSecondaryToolbelt:()=>{N("None"),G("leave-edit-mode")}}),"DevModeInspectTool"===x&&Q.createElement(ja,{handleAction:G})))}function jb(){let e=!!(0,c_.hA)(),t=(0,eH.UX)(),n=(0,Nd.xn)();return Q.createElement("div",{className:"positioned_design_toolbelt--root--INYO4",style:{marginBottom:n,marginRight:e?t:0}},Q.createElement(jy,null))}var jC=n(441200),jw=n(52325),jT=n(472944),jx=n(977070),jN=n(146651),jk=n(194792);let jS=jk.zS;function jI(){let[e,t]=(0,ef.fp)(jN.ph),n=(0,ef.md)(jN.KG),a=(0,ef.md)(jN.kh),r=(0,ez._X)({subscribeToUpdates_expensive:!0}),[l,i]=(0,Q.useState)(null),o="whiteboard"===(0,mD.lg)(),s=Q.useCallback(()=>{if(e){let{emojis:t,index:n}=e;if(t&&n>=0&&n<t.length){let e=(0,jw._Q)(t[n]);e&&cU.l7.user("insert-emoji",()=>{(0,er.sx)("inserted_editor_emoji",{emoji:e}),eU.SmY.replaceCurrentShortcodeWithEmoji(e)})}}},[e]),c=Q.useCallback(()=>{t(null)},[t]);if(!a||!e||null===n)return null;let d=(0,ez.Yb)(r,a);if(!(0,ez.ZT)(d,r))return null;let u={top:d.y+r.y-8,bottom:d.y+r.y+d.height+8,left:d.x+r.x,right:d.x+r.x+d.width,height:d.height,width:d.width},m=l&&u.height>0&&u.bottom>r.height-l&&u.top>r.height-u.bottom?{positionFromBottom:{left:u.left,bottom:r.height+r.y-u.top},direction:jx.ri.UPWARDS}:{targetRect:u,direction:jx.ri.DOWNWARDS};return Q.createElement("div",null,Q.createElement(jT.j,{dispatchTypeahead:t,typeahead:e,onInsert:s,onClear:c,width:168,...m,setMaxTypeaheadHeight:i,zIndex:jS,isFigJam:o,recordingKey:"emojiTypeaheadView",emojiImageSet:n}))}var jA=n(575814),jP=n(651600);let jO=jk.R1;function jL(e){let{dispatch:t,targetRect:n,user:a,typeahead:r,onInsert:l,onClear:i,setTypeahead:o}=e,[s,c]=Q.useState(null),d=(0,ez._X)({subscribeToUpdates_expensive:!0}),u=(0,ez.Yb)(d,n);if(!(0,ez.ZT)(u,d))return null;let m={top:u.y+d.y+u.height+8,right:u.x+d.x,bottom:u.y+d.y+u.height+8,left:u.x+d.x,height:0,width:0},p=s&&m.top+s>d.height?jx.ri.UPWARDS:jx.ri.DOWNWARDS,_={left:m.left,bottom:d.height-u.y+8},f=(0,jx.f6)({...e,targetRect:m,direction:p,positionFromBottom:_});return Q.createElement(jP.E,{dispatch:t,setTypeahead:o,typeahead:r,onInsert:l,onClear:i,entity:a,width:300,recordingKey:"canvasMentionsTypeahead",setMaxTypeaheadHeight:c,...f,zIndex:jO,getAdditionalMetadata:e=>"has_permission"in e&&!e.has_permission?(0,eO.t)("whiteboard.editor_mentions_typeahead.not_in_file"):null})}var jM=n(477827),jD=n(505424),jR=n(98542),jF=n(604505),jB=n(738820);async function jU(e,t,n,a,r,l){let{trackEventForFile:i,searchSessionId:o,mentionedByUserId:s,nodeId:c,store:d}=l;try{let l=(await jF.L.getCanvasMentionsFileNeedsInvite({fileKey:e,mentionedUserId:a.id})).data.meta.needs_invite;r(tB.b({has_used_canvas_mentions:!0}));let u=(0,jB.x)(c,d);i("canvas_mention_created",{...u,search_session_id:o,mention_id:t,mentioned_user_id:a.id,mentioned_by_user_id:s,mentioned_user_can_view_file:!l},{forwardToDatadog:!0}),l&&r(eL.F.enqueue({message:(0,eO.t)("whiteboard.visual_bell.canvas_at_mentions_mentioned_user_will_be_invited_to_file",{handle:a.handle}),button:{text:(0,eO.t)("whiteboard.visual_bell.canvas_at_mentions_mentioned_undo_invite"),action:()=>{i("canvas_mention_undo_invite",{...u,search_session_id:o,mention_id:t,mentioned_user_id:a.id,mentioned_by_user_id:s,mentioned_user_can_view_file:!l},{forwardToDatadog:!0}),cU.l7.user("undo-at-mention",()=>eU.fp8.removeMention(n,t))}}}))}catch(e){(0,ar.$D)(ao.e.FIGJAM_MEEX,e)}}function jH(){let e=(0,$.wA)(),t=(0,at.iZ)(),[n,a]=(0,ef.fp)(jA.LQ),r=(0,ef.md)(jA.MX),{onInsert:l,onClear:i}=function(e){let t=(0,$.wA)(),[n,a]=(0,ef.fp)(jA.LQ),[r,l]=(0,ef.fp)(jA.h1),[i,o]=(0,ef.fp)(jA.wm),s=(0,jD.zW)({checkPermissions:jR.m.VIEW_OR_PENDING}),c=(0,t_.tS)(),d=(0,t5.U)(),u=!!(null==n?void 0:n.mentions),m=""===i,p=(0,$.Pj)(),_=(0,$.d4)(e=>(function(e){let t=Object.keys(e);return 0===t.length?null:t[0]})(e.mirror.sceneGraphSelection));return Q.useEffect(()=>{let e=!1;if(null===r){a(null);return}let t=setTimeout(async()=>{let t=await (0,jM.fG)(r,s,!1),n=!!(null==t?void 0:t.mentions);e||(u&&!n&&(d("canvas_mention_search_no_results",{...(0,jB.x)(_,p)}),t={mentions:[],index:0,maxMentions:0,type:"mentions",search:r}),n&&m&&o((0,I8.M)()),a(t))},100);return function(){clearTimeout(t),e=!0}},[t,s,r,m,o,a,u,d,_,p]),{onInsert:Q.useCallback(()=>{if(n&&n.mentions&&n.mentions[n.index]&&(null==e?void 0:e.id)){let a=n.mentions[n.index],r=cU.l7.user("insert-at-mention",()=>eU.fp8.replaceCurrentMentionsQueryWithMention({mentionedUserId:a.id,mentionedByUserId:e.id,handle:a.handle}));c&&r.mentionId&&jU(c,r.mentionId,r.stablePath,a,t,{trackEventForFile:d,searchSessionId:i,mentionedByUserId:e.id,nodeId:_??"",store:p})}},[n,null==e?void 0:e.id,i,c,p,t,d,_]),onClear:Q.useCallback(()=>{d("canvas_mention_search_cancelled",{...(0,jB.x)(_,p)}),l(null)},[l,d,_,p])}}(t);return!r||!n||!t||0===n.mentions.length&&!n.search||(0,No.Fl)(t.id)||t.sharing_restricted?null:Q.createElement(jL,{dispatch:e,targetRect:r,user:t,typeahead:n,onInsert:l,onClear:i,setTypeahead:a})}var jV=n(122310);function jG(e){return Q.createElement("svg",{width:"16",height:"16",fill:"none",viewBox:"0 0 16 16",...e},Q.createElement("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M9 4h2.5a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-.5.5h-7a.5.5 0 0 1-.5-.5V7h4.5a.5.5 0 0 0 .5-.5V4ZM8 4H4.5a.5.5 0 0 0-.5.5V6h4V4Zm-5 .5A1.5 1.5 0 0 1 4.5 3h7A1.5 1.5 0 0 1 13 4.5v7a1.5 1.5 0 0 1-1.5 1.5h-7A1.5 1.5 0 0 1 3 11.5v-7Z",clipRule:"evenodd"}))}var jK=n(935829),jW=n(859717),jz=n(410289),jj=n(391198),jY=n(223519);let jZ="overview--background--LdDDC",jX="overview--overviewBase--8lImP",jq="overview--editInfo--PHbLh",jJ="overview--editInfoText--R-mMh text--fontPos11--2LvXf text--_fontBase--QdLsd";function jQ({nodeId:e}){let t=(0,no.ei)(e),n=(0,No.wW)((null==t?void 0:t.userId)||null),a=Q.useMemo(()=>(0,n5.A)(null==t?void 0:t.lastEditedAt).fromNow(),[null==t?void 0:t.lastEditedAt]);return t&&(null==n?void 0:n.user)?Q.createElement("div",{className:jq},Q.createElement(ul.H8,{user:n.user,size:16}),Q.createElement("span",{className:jJ},n.user.handle," edited \xb7 ",a)):null}function j$({nodeId:e}){let t=(0,c6.Fk)(t=>{var n;return null==(n=t.get(e))?void 0:n.getStatusInfo()},e),n=(0,No.wW)((null==t?void 0:t.userId)||null),a=Q.useMemo(()=>(null==t?void 0:t.lastUpdateUnixTimestamp)?(0,n5.A)(1e3*t.lastUpdateUnixTimestamp).fromNow():null,[null==t?void 0:t.lastUpdateUnixTimestamp]);if(!a)return Q.createElement(jQ,{nodeId:e});if(!t||!(null==n?void 0:n.user))return null;let r=function(e){switch(e){case eU.zIx.BUILD:return(0,eO.t)("dev_handoff.status.ready_for_dev");case eU.zIx.COMPLETED:return(0,eO.t)("dev_handoff.status.completed");case eU.zIx.NONE:return null}}(null==t?void 0:t.status);return r?Q.createElement("div",{className:jq},Q.createElement(ul.H8,{user:n.user,size:16}),Q.createElement("span",{className:jJ},n.user.handle," marked ",r," \xb7 ",a)):null}var j0=n(24973),j1=n(408938);let j2=(0,rT.jz)(uT.Evg),j5=(0,rT.jz)(uT.bo0),j4=e=>1===e?"":"s";var j3=((R=j3||{})[R.ALL=0]="ALL",R[R.BUILD=1]="BUILD",R[R.COMPLETED=2]="COMPLETED",R);function j6(e){return Q.createElement("div",{className:j0.vR},e.tabs.map(t=>Q.createElement("button",{className:t.key===e.selected?j0.xR:j0.Mf,key:t.key,onClick:()=>e.onTabSelected(t.key)},t.label,void 0!==t.count&&Q.createElement(cO,{count:t.count,marginForTab:!0}))))}function j7(){let e=(0,t_.q5)(),t=(0,$.wA)(),n=(0,at.iZ)(),a=(0,aX.U)(),r=(0,$.d4)(e=>e.multiplayer),l=Q.useMemo(()=>r.allUsers.find(e=>e.sessionID===r.sessionID)||null,[r.allUsers,r.sessionID]),i=(0,jz.dR)(),o=(0,jW.B4)(),s=Q.useCallback(e=>{(0,jj.Lx)(e,null==l?void 0:l.sessionID,t,!1,r,i,o)},[null==l?void 0:l.sessionID,t,r,i,o]);return Q.createElement("div",{className:"overview--toolbarRightItems--tjF72"},r&&e&&l&&Q.createElement(jj.v7,{dropdownShown:a,multiplayer:r,currentUser:l,onUserClick:s}),e&&Q.createElement(jY.w,{user:n,editingFile:e,isFileInWorkshop:!1}))}function j8(){let e=(0,eH.dP)(),t=(0,aD.GS)(),n=(0,eG.J2)(eU.Ez5.editorState().nodesWithStatusForFile),[a,r]=Q.useState("recent"),[l,i]=Q.useState(0),o=Q.useMemo(()=>{switch(l){case 0:return n;case 1:return n.filter(e=>e.status===eU.zIx.BUILD);case 2:return n.filter(e=>e.status===eU.zIx.COMPLETED)}},[n,l]),{progressPercent:s,tabs:c}=Q.useMemo(()=>{let e=n.filter(e=>e.status===eU.zIx.BUILD).length,t=n.filter(e=>e.status===eU.zIx.COMPLETED).length,a=e+t;return{progressPercent:`${0===a?0:Math.round(t/a*100)}%`,tabs:[{key:0,label:"All"},{key:1,count:e,label:"Ready for dev"},{key:2,count:t,label:"Dev complete"}]}},[n]),d=Q.useMemo(()=>{switch(a){case"visual":return o.slice().sort((e,t)=>e.visualOrder-t.visualOrder);case"recent":return o.slice().sort((e,t)=>t.updatedAt-e.updatedAt)}},[o,a]),{numSections:u,numFrames:m,numPages:p}=Q.useMemo(()=>({numSections:n.filter(e=>e.isSection).length,numFrames:n.filter(e=>!e.isSection).length,numPages:new Set(n.map(e=>e.pageId)).size}),[n]),_=(0,c_.US)(),[f,h]=Q.useState(!1),g=Q.useCallback(()=>{h(!0)},[]);if((0,ts.h)(()=>{eV.wr()}),!_||f)return Q.createElement("div",{className:jZ},Q.createElement("div",{className:ea()(jX,"overview--overviewSpinner--zv-dq"),style:{left:e}},Q.createElement(t2.kt,{size:"large"})));let E="";return u>0&&(E+=`${u} section${j4(u)}`),m>0&&(u>0&&(E+=", "),E+=`${m} frame${j4(m)}`),u+m>0&&(E+=` across ${p} page${j4(p)}`),Q.createElement("div",{className:jZ},Q.createElement("div",{className:jX,style:{left:e}},t&&Q.createElement(j7,null),Q.createElement("div",{className:"overview--overviewHeaderContainer--BAOL5"},Q.createElement("div",{className:"overview--overviewHeader--BBr9p"},Q.createElement("div",{className:"overview--overviewTitle--gEd5D text--fontPos13--xW8hS text--_fontBase--QdLsd"},Q.createElement(zF.l,null),Q.createElement("h1",null,"Dev spec")),E&&Q.createElement("div",{className:"overview--overviewTitleInfo--3e2oX text--fontPos11--2LvXf text--_fontBase--QdLsd"},Q.createElement("span",null,E),Q.createElement("div",{className:"overview--progressBarContainer--R2QlZ"},Q.createElement("span",null,s),Q.createElement("div",{className:"overview--progressBarBg--hz8ie"},Q.createElement("div",{className:"overview--progressBar--T9UdJ",style:{width:s}})))),Q.createElement("div",{className:"overview--overviewTabsContainer--sjuS-"},Q.createElement(j6,{tabs:c,selected:l,onTabSelected:i}),Q.createElement(Yt,{sortedBy:a,setSortedBy:r})))),Q.createElement("div",{className:"overview--overviewNodesContainer--P3anz"},0===d.length&&Q.createElement("span",null,"No Ready for Dev or Completed items"),Q.createElement("div",{className:"overview--overviewNodesList--ipsOp"},d.map(e=>Q.createElement(j9,{key:e.nodeId,overviewNode:e,onPreviewClick:g}))))))}function j9({overviewNode:{nodeId:e,pageId:t,isSection:n,hasBeenEditedSinceLastStatusChange:a,updatedAt:r},onPreviewClick:l}){let i=(0,$.wA)(),o=(0,ep.R)(t=>"fullscreen"===t.selectedView.view?{...t.selectedView,editorType:"dev_handoff",showOverview:!1,devModeFocusId:e}:t.selectedView),s=(0,$.d4)(e=>(0,cp.Np)(e,o)),c=(0,c6.Fk)((e,t)=>{var n;return null==(n=e.get(t))?void 0:n.name},t),d=(0,c6.Fk)(t=>{var n;return null==(n=t.get(e))?void 0:n.name},e)||"";function u(e){e.preventDefault(),l(),i(nP.$T(o))}return Q.createElement("div",{className:"overview--overviewNodeCard--NsmYU"},Q.createElement("div",{className:"overview--overviewNodeCardHeader--C-KTf"},Q.createElement("div",{className:"overview--overviewNodeCardHeaderLeft--jYCXL"},Q.createElement("div",{className:"overview--overviewNodeCardHeaderTitles--558Bs"},c&&Q.createElement(Q.Fragment,null,Q.createElement("span",{className:"overview--pageName--TURV8 text--fontPos13--xW8hS text--_fontBase--QdLsd"},c),Q.createElement("span",{className:"overview--pageDivider--HBiVB text--fontPos13--xW8hS text--_fontBase--QdLsd"}," /")),Q.createElement("div",null,n?Q.createElement(jG,null):Q.createElement(jK.q,null)),Q.createElement("span",{className:"overview--nodeName--20NeF text--fontPos13--xW8hS text--_fontBase--QdLsd"},d),a&&Q.createElement("span",{className:"overview--edited--4vtQm"},Q.createElement(eO.Tx,{id:"dev_handoff.status.edited"}))),r>1&&(a?Q.createElement(jQ,{nodeId:e}):Q.createElement(j$,{nodeId:e}))),Q.createElement("div",{className:"overview--overviewNodeCardHeaderRight--wRNMN"},Q.createElement(C5,{nodeId:e,sourceForLogging:"overview"}),Q.createElement(dN.K,{"aria-label":"Open",onClick:u},Q.createElement(eM.B,{className:"overview--chevronRight--pIB03",svg:j1.A})))),Q.createElement(Ye,{nodeId:e,pageId:t,updatedAt:r,previewUrl:s,onClick:u}))}function Ye({nodeId:e,pageId:t,updatedAt:n,previewUrl:a,onClick:r}){let l=function(e){let t=(0,c6.Fk)(t=>{var n;return null==(n=t.get(e))?void 0:n.backgroundColor});return t?u_.F.format(t):"var(--color-bg)"}(t),i=vQ({nodeId:e,width:2*j2,height:2*j5,shouldSkip:!1,version:n});return Q.createElement("a",{onClick:r,href:a,style:{background:l}},Q.createElement("div",{className:"overview--previewThumbnail--zofC5"},i&&Q.createElement("img",{src:i.src,alt:(0,eO.t)("dev_handoff.nodes_panel.thumbnail_alt_text")})))}function Yt({sortedBy:e,setSortedBy:t}){let n=Q.useRef(null),a=(0,aX.B)("DEV_MODE_OVERVIEW_SORT_DROPDOWN");return Q.createElement(Q.Fragment,null,Q.createElement("button",{className:"overview--sortDropdownButton--Doetn text--fontPos11--2LvXf text--_fontBase--QdLsd",onClick:()=>a.toggle(),ref:n},Yn(e),Q.createElement(eM.B,{svg:hK.A})),a.showing&&n.current&&Q.createElement(ho.Cf,{targetRect:n.current.getBoundingClientRect(),minWidth:180,lean:"left"},["recent","visual"].map(n=>Q.createElement(_O.W.CheckableOption,{key:n,checked:e===n,onClick:()=>{t(n)}},Yn(n)))))}function Yn(e){switch(e){case"visual":return"Page order";case"recent":return"Recently edited"}}var Ya=n(275673),Yr=n(271401),Yl=n(471204),Yi=n(479408),Yo=n(221466),Ys=n(445271),Yc=n(62385),Yd=n(462443),Yu=n(751058),Ym=n(339652),Yp=n(460486),Y_=n(15110),Yf=n(870482),Yh=n(315072);function Yg({initialPosition:e,initialVariableValue:t,initialView:n,inheritStyleKeyField:a,initialStyleCreationPaint:r,resolvedType:l,recordingKey:i,onCreateStyleSubmit:o,onCreateVariableSubmit:s,onClose:c}){let{currentViewState:d,setCurrentViewState:u}=function({initialView:e}){let[t,n]=(0,Q.useState)(function({initialView:e}){let t=["create_variable","create_style"];return e&&t.includes(e)?e:t[0]}({initialView:e}));return{currentViewState:t,setCurrentViewState:n}}({initialView:n});return Q.createElement(dn.vx,{title:Q.createElement(YE,{currentViewState:d,onChange:u,recordingKey:nh.Pt(i,"viewTabs")}),initialPosition:e,initialWidth:Ym.iG,onClose:c},function(){switch(d){case"create_variable":return Q.createElement(Ym.Ty,{resolvedType:l,initialValue:t,recordingKey:nh.Pt(i,"createVariableForm"),onSubmit:s});case"create_style":return Q.createElement(Yv,{inheritStyleKeyField:a,initialStyleCreationPaint:r,recordingKey:"createStyleModal",onSubmit:o})}}())}function YE({currentViewState:e,recordingKey:t,onChange:n}){return Q.createElement(ns.D8,{className:Yh.pL,recordingKey:t},Q.createElement(Yu.oz,{isOnlyTab:!1,label:(0,eO.t)("design_systems.create_style.style"),isActive:"create_style"===e,onClick:()=>n("create_style"),recordingKey:nh.Pt(t,"createStyle")}),Q.createElement(Yu.oz,{isOnlyTab:!1,label:(0,eO.t)("variables.create_modal.title"),isActive:"create_variable"===e,onClick:()=>n("create_variable"),recordingKey:nh.Pt(t,"createVariable")}))}function Yv({inheritStyleKeyField:e,initialStyleCreationPaint:t,recordingKey:n,onSubmit:a}){let r=(0,$.d4)(e=>e.mirror.selectedStyleProperties),l=(0,$.d4)(e=>e.mirror.sceneGraphSelection),i=Q.useRef(Object.keys(l).length>0),o=(0,y3.sg)(e),{styleRef:s,createStyle:c}=(0,Y_.u)({inheritStyleKeyField:e,initialStyleCreationPaint:t,isCreatingFromSelection:i.current,trackingOptions:{styleType:o}}),d=nh.of(n,"submit",()=>{c(),a(s)});return r.styleType?Q.createElement(Q.Fragment,null,Q.createElement(Yd.zK.Provider,{value:Yd.zM.CREATE_VARIABLE_STYLE},Q.createElement(Yf.O,{type:r.styleType,recordingKey:n,isInspectPanel:!1,selectedStyleProperties:r,showProperties:!0,onEnterPressed:d}),Q.createElement(nk.Y,{horizontalAlignItems:"end",verticalAlignItems:"center",padding:16},Q.createElement(tC.$$,{style:{justifySelf:"right"},onClick:d,disabled:!s},Q.createElement(eO.Tx,{id:"design_systems.create_style.create_style"}))))):null}var Yy=n(285784);function Yb(){let e=(0,Nj.m0)();return Q.useEffect(()=>{e&&(e._keyboard_will_show_with_height=e=>{eU.glU.keyboardWillShowWithHeight(e)},window.FigmaAppObj?(window.FigmaAppObj.keyboardWillShow=()=>{eU.glU.keyboardWillShow()},window.FigmaAppObj.keyboardWillShowWithHeight=e=>{eU.glU.keyboardWillShowWithHeight(e)}):window.FigmaAppObj={keyboardWillShow:()=>{eU.glU.keyboardWillShow()},keyboardWillShowWithHeight:e=>{eU.glU.keyboardWillShowWithHeight(e)}})},[e]),null}var YC=n(782809),Yw=n(62498),YT=n(874665);function Yx(e){return Q.createElement("div",{style:e.style,className:ea()("whiteboard_sidebar_modal--WhiteboardSidebarModal--PALf6",e.className)},e.children)}let YN=(0,rT.jz)(uT.Y_2),Yk=(0,rT.jz)(uT.Hsg),YS=(0,rT.jz)(uT.fWT);function YI(){let e=(0,$.d4)(e=>e.universalInsertModal.pinned===S$.t.PINNED_AND_DOCKED_LEFT),t=Q.useCallback(()=>{let t=e?Yk:YN;return window.innerWidth<t?14+YS+24:14},[e]),[n,a]=Q.useState(t);return Q.useEffect(()=>{a(t())},[t]),Q.useLayoutEffect(()=>{let e=(0,cd.s)(()=>{a(t())});return window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e),e.cancel()}},[t]),n}let YA=500,YP="audioplayinvoked",YO="audioplaysuccess";class YL{constructor(e){this.play=({onSuccess:e,onNoInteractionFailure:t})=>{let n=()=>{window.removeEventListener(YP,this.audioPlayInvokedHandler),window.removeEventListener(YO,this.audioPlaySuccessHandler)};window.dispatchEvent(this.audioPlayInvokedEvent),this.audio.play().then(()=>{if(this.shouldBlockPlay){this.audio.pause(),this.isAttemptingToPlay=!1;return}this.lastPlayedTimestamp=Date.now(),window.dispatchEvent(this.audioPlaySuccessEvent),this.isFadingOut?this.fadeOut({}):(this.internalVolumeMultiplier=0,this.fadeIn({fadeInLength:1e3})),e&&e(),this.isAttemptingToPlay=!1,n()}).catch(e=>{if(this.isAttemptingToPlay=!1,"NotAllowedError"===e.name&&t){t();return}if(e.message.toLowerCase().includes("interrupted by a new load request")){(0,ar.$D)(ao.e.FIGJAM_CORE,Error("Benign race condition in FigJam music: new track was requested while the promise to play the previous track was resolving (no user impact)"));return}throw Error(`Failed to play music in the FigJam timer: ${e}`)})},this.playLoadingAudio=()=>{this.loadingAudio.currentSrc&&this.loadingAudio.play().catch(e=>{if("NotAllowedError"!==e.name)throw Error(`Failed to play loading music in the FigJam timer: ${e}`)})},this.stopLoadingAudio=()=>{this.loadingAudio.currentSrc&&(this.loadingAudio.pause(),this.setTimestamp(0,this.loadingAudio))},this.isPaused=()=>this.audio.paused||this.shouldBlockPlay,this.isPlaying=()=>!this.isPaused(),this.setTimestamp=(e,t)=>{if(t){if(t.seeking||t.readyState<=0){console.warn("Already seeking or audio isn't ready, can't set timestamp.");return}t.fastSeek?t.fastSeek(e):t.currentTime=e}},this.playAtTimestamp=({src:e,timestamp:t,onSuccess:n,onFailure:a})=>{this.isAttemptingToPlay=!1;let r=()=>{this.setTimestamp(t/1e3%this.audio.duration,this.audio),this.play({onSuccess:n,onNoInteractionFailure:a})};window.addEventListener(YP,this.audioPlayInvokedHandler),window.addEventListener(YO,this.audioPlaySuccessHandler),this.playLoadingAudio(),this.setSource(""),this.shouldBlockPlay=!1,this.audio.oncanplaythrough=()=>{this.audio.oncanplaythrough=null,this.handleVolumeUpdate(),r()},this.setSource(e)},this.playPreview=({src:e,timestampMs:t=0,playLengthMs:n,fadeLengthMs:a=YA})=>{let r=this.hasSource();this.playAtTimestamp({src:e,timestamp:t,onSuccess:()=>{this.isPaused()||!r?this.internalVolumeMultiplier=0:this.clearFadeTimeouts(),this.fadeIn({}),this.internalFadeOutTimeoutId=window.setTimeout(()=>{this.internalFadeOutTimeoutId=0,this.fadeOut({fadeOutLength:a,shouldStopWhenFadedOut:!0,targetVolumeMultiplier:0})},n+2*a)}})},this.stopPreview=()=>{this.internalFadeOutTimeoutId&&clearTimeout(this.internalFadeOutTimeoutId),this.internalFadeOutTimeoutId=0,this.stop()},this.clearFadeTimeouts=()=>{this.internalFadeOutTimeoutId&&clearTimeout(this.internalFadeOutTimeoutId),this.internalFadeInTimeoutId&&clearTimeout(this.internalFadeInTimeoutId)},this.resetFades=()=>{this.clearFadeTimeouts(),this.internalVolumeMultiplier=1,this.isFadingOut=!1,this.isFadingIn=!1},this.pause=()=>{this.stopLoadingAudio(),this.audio.paused||this.shouldBlockPlay||this.isAttemptingToPlay||(this.audio.pause(),this.clearFadeTimeouts()),this.shouldBlockPlay=!0},this.stop=()=>{this.stopLoadingAudio(),this.resetFades(),this.shouldBlockPlay=!0,this.audio.pause(),this.audio.removeAttribute("src")},this.hasSource=()=>""!==this.audio.currentSrc,this.setSource=e=>{this.audio.src=e},this.setIsMuted=e=>{this.audio.muted=e,this.loadingAudio.muted=e,this.isMuted=e,this.handleVolumeUpdate()},this.getCurrentVolume=()=>this.isMuted?0:(0,xL.qE)(this.externalVolume*this.internalVolumeMultiplier,0,1),this.handleVolumeUpdate=()=>{this.audio.volume=this.getCurrentVolume()},this.setVolume=e=>{this.externalVolume=e,this.handleVolumeUpdate()},this.fadeOut=({fadeOutLength:e=5e3,shouldStopWhenFadedOut:t=!1,targetVolumeMultiplier:n=0,callbackWhenDoneFading:a,resumeFadingIfInterrupted:r=!0})=>{this.clearFadeTimeouts();let l=1/(e/50),i=()=>{!this.audio.paused&&(this.internalVolumeMultiplier>n?(this.internalVolumeMultiplier-=l,this.handleVolumeUpdate(),this.internalFadeOutTimeoutId=window.setTimeout(i,50)):(this.internalFadeOutTimeoutId=0,t&&this.stop(),this.handleVolumeUpdate(),this.isFadingOut=!1,a&&a()))};r&&(this.isFadingOut=!0),i()},this.fadeIn=({fadeInLength:e=1e3,callbackWhenDoneFading:t})=>{this.clearFadeTimeouts();let n=1/(e/50),a=()=>{!this.audio.paused&&(this.internalVolumeMultiplier<1?(this.internalVolumeMultiplier+=n,this.handleVolumeUpdate(),this.internalFadeInTimeoutId=window.setTimeout(a,50)):(this.internalFadeInTimeoutId=0,this.handleVolumeUpdate(),this.isFadingIn=!1,t&&t()))};this.isFadingIn=!0,a()},this.isAttemptingToPlay=!1,this.audio=new Audio,this.audio.src="",this.audio.loop=!0,this.loadingAudio=new Audio,e&&e.loadingPlaybackUrl&&(this.loadingAudio.src=e.loadingPlaybackUrl),this.loadingAudio.loop=!0,this.audioPlayInvokedEvent=new Event(YP),this.audioPlayInvokedHandler=()=>{this.isAttemptingToPlay=!0},this.audioPlaySuccessEvent=new Event(YO),this.audioPlaySuccessHandler=()=>{this.loadingAudio.currentSrc&&this.loadingAudio.pause(),this.isAttemptingToPlay=!1},this.externalVolume=.7,this.isMuted=!1,this.isFadingOut=!1,this.isFadingIn=!1,this.shouldBlockPlay=!1,this.internalVolumeMultiplier=1,this.internalFadeOutTimeoutId=0,this.internalFadeInTimeoutId=0,this.lastPlayedTimestamp=null;let t=null==e?void 0:e.timeUpdateListener;t&&this.audio.addEventListener("timeupdate",()=>t(this.audio))}}var YM=n(403717);let YD=e=>(0,$.d4)(t=>{let n=((0,eo.kc)().figjam_more_tracks_listen?t.music.allSongs:t.music.activeSongs).filter(t=>e===t.song_id);return n.length?n[0]:void 0},YM.eB);function YR(){let e=(0,$.d4)(e=>e.music.music);return!(null==e?void 0:e.isPaused)&&!(null==e?void 0:e.isStopped)}let YF=()=>{let[e,t]=Q.useState({}),n=(0,$.d4)(e=>e.music.music);return Q.useEffect(()=>{if(!n||(null==n?void 0:n.isPaused)||(null==n?void 0:n.isStopped))return;let e=setTimeout(()=>t({}),500);return()=>{clearTimeout(e)}},[e,n,null==n?void 0:n.isPaused]),e};var YB=n(821531),YU=n(688477);let YH={song_id:"fake track for no selection",title:"",album_art:"",playback_url:"",start_at_ms:0,cuesheet:{tracks:[]}};function YV({selectedSong:e,activeSongs:t,isLoading:n,withRightMargin:a,withBorder:r,withHeavyFont:l}){let i=(0,$.d4)(e=>{var t;return(null==(t=e.dropdownShown)?void 0:t.type)==="song-dropdown"?e.dropdownShown:null}),o=(0,eT.F)((0,$.d4)(e=>e)),s=(0,$.wA)(),c=(0,$.d4)(e=>e.music.playerInstance),d=e||YH,u=(0,Ba.$3)(),m=[Q.createElement(aT.c$,{fullWidth:!0,ignoreCheck:!0,key:"loading-music-options"},Q.createElement("div",{className:"music_dropdown--loadingSpinner--0IUIG"},Q.createElement(t2.kt,null)))];Q.useEffect(()=>{let a=t.length&&!n,r=!e;a&&r&&s(F9.Dx({selectedSongID:t[0].song_id}))},[n,e,s,t]),n||(m=t.map(e=>Q.createElement(aT.c$,{key:e.song_id,value:e,icon:Q.createElement("img",{src:e.album_art,alt:`album art for ${e.title}`,className:"music_dropdown--inDropdownAlbumArt---OmqE"}),formattedValue:YG.format(e),height:48})));let p=async t=>{t.song_id===YH.song_id?e&&((0,YB.$B)(o.current,e.song_id),s(F9.L({selectedSongID:"",musicStartTimeMs:0}))):await (0,YM._s)({songID:t.song_id,onSuccess:()=>{let e=null==c?void 0:c.isPlaying();(0,YB.tU)(o.current,t.song_id,e||!1);let n=t.song_id;s(F9.Dx({selectedSongID:n,dontTransmitWhenPaused:!0}))},onNotFound:()=>{s(F9.qV()),s(eL.F.enqueue({message:(0,eO.t)("whiteboard.timer.song_not_available_error"),error:!0,type:F9.lm}))}})},_=d===YH?(0,eO.t)("whiteboard.music.loading"):void 0;return Q.createElement(aT.l6,{id:"song-dropdown",ariaLabel:(0,eO.t)("whiteboard.music_player_select.aria_label"),"data-testid":"music-dropdown-button",className:"music_dropdown--songDropdownClosed--PEWeP",property:d,willShowDropdown:()=>new Promise(e=>{(0,YB.eT)(o.current),e()}),onChange:p,dropdownWidth:224,formatter:YG,dispatch:s,dropdownShown:i,dropdownOverride:_,inputClassName:ea()("music_dropdown--songDropdownInput--VQjWF",{"music_dropdown--songInputTextSongSelected--4mWzH":!!e,"music_dropdown--songInputTextNoSongSelected--AW4Zi":!e,"music_dropdown--songDropdownRightMargin--SiuxZ":a,"music_dropdown--songDropdownHeavyFont--fIlJd":l,"music_dropdown--border--8RslA":r,"music_dropdown--withHover--5STIo":r&&!u}),chevronClassName:"music_dropdown--songDropdownChevronStandalone--0F6eP music_dropdown--songDropdownChevronStandalone--0F6eP",icon:d===YH?Q.createElement(nu.t,{className:"music_dropdown--musicIcon--rYDUF",svg:YU.A}):void 0,neverConstrain:!0,hideDropdownWhenContainerMoves:!0,targetDomNode:document.body},m)}let YG={format:e=>(null==e?void 0:e.title)||(0,eO.t)("whiteboard.timer.none")};function YK(){return Q.createElement("svg",{width:"96",height:"96",viewBox:"0 0 96 96",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{height:"100%",width:"100%",filter:"drop-shadow(0px 1.625px 4.062500476837158px rgba(0, 0, 0, 0.15)) drop-shadow(0px 8.125000953674316px 13px rgba(0, 0, 0, 0.12)) drop-shadow(0px 0px 0.40625px rgba(0, 0, 0, 0.12))"}},Q.createElement("mask",{id:"mask0_134_226",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:"0",y:"0",width:"96",height:"96"},Q.createElement("circle",{cx:"48",cy:"48",r:"48",fill:"black"}),Q.createElement("circle",{cx:"48",cy:"48",r:"48",fill:"url(#paint0_radial_134_226)"}),Q.createElement("circle",{cx:"48",cy:"48",r:"47.1875",stroke:"black",strokeOpacity:"0.8",strokeWidth:"1.625"})),Q.createElement("g",{mask:"url(#mask0_134_226)"},Q.createElement("circle",{cx:"48",cy:"48",r:"48",fill:"black"}),Q.createElement("circle",{cx:"48",cy:"48",r:"48",fill:"url(#paint1_radial_134_226)"}),Q.createElement("circle",{cx:"48",cy:"48",r:"47.1875",stroke:"black",strokeOpacity:"0.3",strokeWidth:"1.625"}),Q.createElement("circle",{cx:"47.9999",cy:"48",r:"48.3438",stroke:"url(#paint2_linear_134_226)",strokeWidth:"0.8125"}),Q.createElement("circle",{cx:"47.9999",cy:"48",r:"45.0938",stroke:"url(#paint3_linear_134_226)",strokeWidth:"0.8125"}),Q.createElement("circle",{cx:"47.9999",cy:"48",r:"41.8438",stroke:"url(#paint4_linear_134_226)",strokeWidth:"0.8125"}),Q.createElement("circle",{cx:"47.9999",cy:"48",r:"38.5938",stroke:"url(#paint5_linear_134_226)",strokeWidth:"0.8125"}),Q.createElement("circle",{cx:"47.9999",cy:"48",r:"35.3438",stroke:"url(#paint6_linear_134_226)",strokeWidth:"0.8125"}),Q.createElement("circle",{cx:"47.9999",cy:"48",r:"32.0938",stroke:"url(#paint7_linear_134_226)",strokeWidth:"0.8125"}),Q.createElement("g",{filter:"url(#filter0_f_134_226)"},Q.createElement("path",{d:"M47.6379 42.7921L50.2388 118.707L-34.6776 45.6123L47.6379 42.7921Z",fill:"url(#paint8_linear_134_226)"})),Q.createElement("g",{filter:"url(#filter1_f_134_226)"},Q.createElement("path",{d:"M56.3805 43.3806L56.3805 -32.5788L138.744 43.3806L56.3805 43.3806Z",fill:"url(#paint9_linear_134_226)"}))),Q.createElement("defs",null,Q.createElement("filter",{id:"filter0_f_134_226",x:"-42.8026",y:"34.6671",width:"101.166",height:"92.1648",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},Q.createElement("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),Q.createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}),Q.createElement("feGaussianBlur",{stdDeviation:"4.0625",result:"effect1_foregroundBlur_134_226"})),Q.createElement("filter",{id:"filter1_f_134_226",x:"48.2555",y:"-40.7038",width:"98.6138",height:"92.2094",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},Q.createElement("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),Q.createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}),Q.createElement("feGaussianBlur",{stdDeviation:"4.0625",result:"effect1_foregroundBlur_134_226"})),Q.createElement("radialGradient",{id:"paint0_radial_134_226",cx:"0",cy:"0",r:"1",gradientUnits:"userSpaceOnUse",gradientTransform:"translate(48 48) rotate(135) scale(65.7609 27.1741)"},Q.createElement("stop",{stopColor:"white",stopOpacity:"0.63"}),Q.createElement("stop",{offset:"0.66129",stopColor:"white",stopOpacity:"0.17"}),Q.createElement("stop",{offset:"1",stopColor:"white",stopOpacity:"0"})),Q.createElement("radialGradient",{id:"paint1_radial_134_226",cx:"0",cy:"0",r:"1",gradientUnits:"userSpaceOnUse",gradientTransform:"translate(48 48) rotate(135) scale(65.7609 27.1741)"},Q.createElement("stop",{stopColor:"white",stopOpacity:"0.63"}),Q.createElement("stop",{offset:"0.66129",stopColor:"white",stopOpacity:"0.17"}),Q.createElement("stop",{offset:"1",stopColor:"white",stopOpacity:"0"})),Q.createElement("linearGradient",{id:"paint2_linear_134_226",x1:"96.7498",y1:"96.75",x2:"-0.750201",y2:"-0.75003",gradientUnits:"userSpaceOnUse"},Q.createElement("stop",{stopColor:"white",stopOpacity:"0.05"}),Q.createElement("stop",{offset:"0.394591",stopColor:"white",stopOpacity:"0.12"}),Q.createElement("stop",{offset:"0.498177",stopColor:"white",stopOpacity:"0.2"}),Q.createElement("stop",{offset:"0.60488",stopColor:"white",stopOpacity:"0.12"}),Q.createElement("stop",{offset:"1",stopColor:"white",stopOpacity:"0.05"})),Q.createElement("linearGradient",{id:"paint3_linear_134_226",x1:"93.4998",y1:"93.5",x2:"2.49981",y2:"2.49997",gradientUnits:"userSpaceOnUse"},Q.createElement("stop",{stopColor:"white",stopOpacity:"0.05"}),Q.createElement("stop",{offset:"0.394591",stopColor:"white",stopOpacity:"0.12"}),Q.createElement("stop",{offset:"0.498177",stopColor:"white",stopOpacity:"0.2"}),Q.createElement("stop",{offset:"0.60488",stopColor:"white",stopOpacity:"0.12"}),Q.createElement("stop",{offset:"1",stopColor:"white",stopOpacity:"0.05"})),Q.createElement("linearGradient",{id:"paint4_linear_134_226",x1:"90.2498",y1:"90.25",x2:"5.74982",y2:"5.74997",gradientUnits:"userSpaceOnUse"},Q.createElement("stop",{stopColor:"white",stopOpacity:"0.05"}),Q.createElement("stop",{offset:"0.394591",stopColor:"white",stopOpacity:"0.12"}),Q.createElement("stop",{offset:"0.498177",stopColor:"white",stopOpacity:"0.2"}),Q.createElement("stop",{offset:"0.60488",stopColor:"white",stopOpacity:"0.12"}),Q.createElement("stop",{offset:"1",stopColor:"white",stopOpacity:"0.05"})),Q.createElement("linearGradient",{id:"paint5_linear_134_226",x1:"86.9998",y1:"87",x2:"8.99983",y2:"8.99997",gradientUnits:"userSpaceOnUse"},Q.createElement("stop",{stopColor:"white",stopOpacity:"0.05"}),Q.createElement("stop",{offset:"0.394591",stopColor:"white",stopOpacity:"0.12"}),Q.createElement("stop",{offset:"0.498177",stopColor:"white",stopOpacity:"0.2"}),Q.createElement("stop",{offset:"0.60488",stopColor:"white",stopOpacity:"0.12"}),Q.createElement("stop",{offset:"1",stopColor:"white",stopOpacity:"0.05"})),Q.createElement("linearGradient",{id:"paint6_linear_134_226",x1:"83.7498",y1:"83.75",x2:"12.2498",y2:"12.25",gradientUnits:"userSpaceOnUse"},Q.createElement("stop",{stopColor:"white",stopOpacity:"0.05"}),Q.createElement("stop",{offset:"0.394591",stopColor:"white",stopOpacity:"0.12"}),Q.createElement("stop",{offset:"0.498177",stopColor:"white",stopOpacity:"0.2"}),Q.createElement("stop",{offset:"0.60488",stopColor:"white",stopOpacity:"0.12"}),Q.createElement("stop",{offset:"1",stopColor:"white",stopOpacity:"0.05"})),Q.createElement("linearGradient",{id:"paint7_linear_134_226",x1:"80.4998",y1:"80.5",x2:"15.4998",y2:"15.5",gradientUnits:"userSpaceOnUse"},Q.createElement("stop",{stopColor:"white",stopOpacity:"0.05"}),Q.createElement("stop",{offset:"0.394591",stopColor:"white",stopOpacity:"0.12"}),Q.createElement("stop",{offset:"0.498177",stopColor:"white",stopOpacity:"0.2"}),Q.createElement("stop",{offset:"0.60488",stopColor:"white",stopOpacity:"0.12"}),Q.createElement("stop",{offset:"1",stopColor:"white",stopOpacity:"0.05"})),Q.createElement("linearGradient",{id:"paint8_linear_134_226",x1:"11.6492",y1:"45.2351",x2:"48.238",y2:"80.972",gradientUnits:"userSpaceOnUse"},Q.createElement("stop",{stopColor:"white",stopOpacity:"0"}),Q.createElement("stop",{offset:"0.452124",stopColor:"white",stopOpacity:"0.1"}),Q.createElement("stop",{offset:"0.539969",stopColor:"white",stopOpacity:"0.48"}),Q.createElement("stop",{offset:"0.635517",stopColor:"white",stopOpacity:"0.1"}),Q.createElement("stop",{offset:"1",stopColor:"white",stopOpacity:"0"})),Q.createElement("linearGradient",{id:"paint9_linear_134_226",x1:"92.4318",y1:"42.1712",x2:"57.088",y2:"5.20249",gradientUnits:"userSpaceOnUse"},Q.createElement("stop",{stopColor:"white",stopOpacity:"0"}),Q.createElement("stop",{offset:"0.452124",stopColor:"white",stopOpacity:"0.1"}),Q.createElement("stop",{offset:"0.539969",stopColor:"white",stopOpacity:"0.48"}),Q.createElement("stop",{offset:"0.635517",stopColor:"white",stopOpacity:"0.1"}),Q.createElement("stop",{offset:"1",stopColor:"white",stopOpacity:"0"}))))}function YW(){return Q.createElement("svg",{width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Q.createElement("circle",{cx:"9.59963",cy:"5.33317",r:"1.06667",fill:"url(#paint0_linear_1808_68900)"}),Q.createElement("circle",{cx:"13.8667",cy:"5.33336",r:"1.06667",fill:"url(#paint1_linear_1808_68900)"}),Q.createElement("circle",{cx:"18.1333",cy:"5.33356",r:"1.06667",fill:"url(#paint2_linear_1808_68900)"}),Q.createElement("circle",{cx:"22.3997",cy:"5.33317",r:"1.06667",fill:"url(#paint3_linear_1808_68900)"}),Q.createElement("circle",{cx:"5.334",cy:"9.6002",r:"1.06667",fill:"url(#paint4_linear_1808_68900)"}),Q.createElement("circle",{cx:"5.334",cy:"5.33336",r:"1.06667",fill:"url(#paint5_linear_1808_68900)"}),Q.createElement("circle",{cx:"1.06667",cy:"9.6",r:"1.06667",fill:"url(#paint6_linear_1808_68900)"}),Q.createElement("circle",{cx:"30.9334",cy:"9.6002",r:"1.06667",fill:"url(#paint7_linear_1808_68900)"}),Q.createElement("circle",{cx:"9.59963",cy:"9.6002",r:"1.06667",fill:"url(#paint8_linear_1808_68900)"}),Q.createElement("circle",{cx:"13.8667",cy:"9.6",r:"1.06667",fill:"url(#paint9_linear_1808_68900)"}),Q.createElement("circle",{cx:"18.1333",cy:"9.6002",r:"1.06667",fill:"url(#paint10_linear_1808_68900)"}),Q.createElement("circle",{cx:"22.3997",cy:"9.6002",r:"1.06667",fill:"url(#paint11_linear_1808_68900)"}),Q.createElement("circle",{cx:"26.6668",cy:"9.6002",r:"1.06667",fill:"url(#paint12_linear_1808_68900)"}),Q.createElement("circle",{cx:"26.6668",cy:"5.33317",r:"1.06667",fill:"url(#paint13_linear_1808_68900)"}),Q.createElement("circle",{cx:"5.334",cy:"13.8666",r:"1.06667",fill:"url(#paint14_linear_1808_68900)"}),Q.createElement("circle",{cx:"1.06667",cy:"13.8666",r:"1.06667",fill:"url(#paint15_linear_1808_68900)"}),Q.createElement("circle",{cx:"30.9334",cy:"13.8666",r:"1.06667",fill:"url(#paint16_linear_1808_68900)"}),Q.createElement("circle",{cx:"9.59963",cy:"13.8666",r:"1.06667",fill:"url(#paint17_linear_1808_68900)"}),Q.createElement("circle",{cx:"13.8667",cy:"13.8666",r:"1.06667",fill:"url(#paint18_linear_1808_68900)"}),Q.createElement("circle",{cx:"18.1333",cy:"13.8666",r:"1.06667",fill:"url(#paint19_linear_1808_68900)"}),Q.createElement("circle",{cx:"22.3997",cy:"13.8666",r:"1.06667",fill:"url(#paint20_linear_1808_68900)"}),Q.createElement("circle",{cx:"26.6668",cy:"13.8666",r:"1.06667",fill:"url(#paint21_linear_1808_68900)"}),Q.createElement("circle",{cx:"5.334",cy:"18.1333",r:"1.06667",fill:"url(#paint22_linear_1808_68900)"}),Q.createElement("circle",{cx:"1.06667",cy:"18.1333",r:"1.06667",fill:"url(#paint23_linear_1808_68900)"}),Q.createElement("circle",{cx:"30.9334",cy:"18.1333",r:"1.06667",fill:"url(#paint24_linear_1808_68900)"}),Q.createElement("circle",{cx:"9.59963",cy:"18.1333",r:"1.06667",fill:"url(#paint25_linear_1808_68900)"}),Q.createElement("circle",{cx:"13.8667",cy:"18.1333",r:"1.06667",fill:"url(#paint26_linear_1808_68900)"}),Q.createElement("circle",{cx:"18.1333",cy:"18.1333",r:"1.06667",fill:"url(#paint27_linear_1808_68900)"}),Q.createElement("circle",{cx:"22.3997",cy:"18.1333",r:"1.06667",fill:"url(#paint28_linear_1808_68900)"}),Q.createElement("circle",{cx:"26.6668",cy:"18.1333",r:"1.06667",fill:"url(#paint29_linear_1808_68900)"}),Q.createElement("circle",{cx:"5.334",cy:"22.3999",r:"1.06667",fill:"url(#paint30_linear_1808_68900)"}),Q.createElement("circle",{cx:"5.334",cy:"26.6668",r:"1.06667",fill:"url(#paint31_linear_1808_68900)"}),Q.createElement("circle",{cx:"1.06667",cy:"22.3999",r:"1.06667",fill:"url(#paint32_linear_1808_68900)"}),Q.createElement("circle",{cx:"30.9334",cy:"22.4001",r:"1.06667",fill:"url(#paint33_linear_1808_68900)"}),Q.createElement("circle",{cx:"9.59963",cy:"22.4001",r:"1.06667",fill:"url(#paint34_linear_1808_68900)"}),Q.createElement("circle",{cx:"13.8667",cy:"22.3999",r:"1.06667",fill:"url(#paint35_linear_1808_68900)"}),Q.createElement("circle",{cx:"18.1333",cy:"22.3999",r:"1.06667",fill:"url(#paint36_linear_1808_68900)"}),Q.createElement("circle",{cx:"22.3997",cy:"22.4001",r:"1.06667",fill:"url(#paint37_linear_1808_68900)"}),Q.createElement("circle",{cx:"26.6668",cy:"22.4001",r:"1.06667",fill:"url(#paint38_linear_1808_68900)"}),Q.createElement("circle",{cx:"26.6668",cy:"26.6668",r:"1.06667",fill:"url(#paint39_linear_1808_68900)"}),Q.createElement("circle",{cx:"9.59963",cy:"26.6668",r:"1.06667",fill:"url(#paint40_linear_1808_68900)"}),Q.createElement("circle",{cx:"13.8667",cy:"26.6668",r:"1.06667",fill:"url(#paint41_linear_1808_68900)"}),Q.createElement("circle",{cx:"18.1333",cy:"26.6668",r:"1.06667",fill:"url(#paint42_linear_1808_68900)"}),Q.createElement("circle",{cx:"22.3997",cy:"26.6668",r:"1.06667",fill:"url(#paint43_linear_1808_68900)"}),Q.createElement("circle",{cx:"9.59963",cy:"30.9332",r:"1.06667",fill:"url(#paint44_linear_1808_68900)"}),Q.createElement("circle",{cx:"13.8667",cy:"30.9334",r:"1.06667",fill:"url(#paint45_linear_1808_68900)"}),Q.createElement("circle",{cx:"18.1333",cy:"30.9336",r:"1.06667",fill:"url(#paint46_linear_1808_68900)"}),Q.createElement("circle",{cx:"22.3997",cy:"30.9332",r:"1.06667",fill:"url(#paint47_linear_1808_68900)"}),Q.createElement("circle",{cx:"9.59963",cy:"1.06672",r:"1.06667",fill:"url(#paint48_linear_1808_68900)"}),Q.createElement("circle",{cx:"13.8667",cy:"1.06672",r:"1.06667",fill:"url(#paint49_linear_1808_68900)"}),Q.createElement("circle",{cx:"18.1333",cy:"1.06672",r:"1.06667",fill:"url(#paint50_linear_1808_68900)"}),Q.createElement("circle",{cx:"22.3997",cy:"1.06672",r:"1.06667",fill:"url(#paint51_linear_1808_68900)"}),Q.createElement("defs",null,Q.createElement("linearGradient",{id:"paint0_linear_1808_68900",x1:"9.59963",y1:"4.2665",x2:"9.59963",y2:"6.39984",gradientUnits:"userSpaceOnUse"},Q.createElement("stop",{stopColor:"#252525"}),Q.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),Q.createElement("linearGradient",{id:"paint1_linear_1808_68900",x1:"13.8667",y1:"4.26669",x2:"13.8667",y2:"6.40003",gradientUnits:"userSpaceOnUse"},Q.createElement("stop",{stopColor:"#252525"}),Q.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),Q.createElement("linearGradient",{id:"paint2_linear_1808_68900",x1:"18.1333",y1:"4.26689",x2:"18.1333",y2:"6.40023",gradientUnits:"userSpaceOnUse"},Q.createElement("stop",{stopColor:"#252525"}),Q.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),Q.createElement("linearGradient",{id:"paint3_linear_1808_68900",x1:"22.3997",y1:"4.2665",x2:"22.3997",y2:"6.39984",gradientUnits:"userSpaceOnUse"},Q.createElement("stop",{stopColor:"#252525"}),Q.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),Q.createElement("linearGradient",{id:"paint4_linear_1808_68900",x1:"5.334",y1:"8.53353",x2:"5.334",y2:"10.6669",gradientUnits:"userSpaceOnUse"},Q.createElement("stop",{stopColor:"#252525"}),Q.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),Q.createElement("linearGradient",{id:"paint5_linear_1808_68900",x1:"5.334",y1:"4.26669",x2:"5.334",y2:"6.40003",gradientUnits:"userSpaceOnUse"},Q.createElement("stop",{stopColor:"#252525"}),Q.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),Q.createElement("linearGradient",{id:"paint6_linear_1808_68900",x1:"1.06667",y1:"8.53333",x2:"1.06667",y2:"10.6667",gradientUnits:"userSpaceOnUse"},Q.createElement("stop",{stopColor:"#252525"}),Q.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),Q.createElement("linearGradient",{id:"paint7_linear_1808_68900",x1:"30.9334",y1:"8.53353",x2:"30.9334",y2:"10.6669",gradientUnits:"userSpaceOnUse"},Q.createElement("stop",{stopColor:"#252525"}),Q.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),Q.createElement("linearGradient",{id:"paint8_linear_1808_68900",x1:"9.59963",y1:"8.53353",x2:"9.59963",y2:"10.6669",gradientUnits:"userSpaceOnUse"},Q.createElement("stop",{stopColor:"#252525"}),Q.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),Q.createElement("linearGradient",{id:"paint9_linear_1808_68900",x1:"13.8667",y1:"8.53333",x2:"13.8667",y2:"10.6667",gradientUnits:"userSpaceOnUse"},Q.createElement("stop",{stopColor:"#252525"}),Q.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),Q.createElement("linearGradient",{id:"paint10_linear_1808_68900",x1:"18.1333",y1:"8.53353",x2:"18.1333",y2:"10.6669",gradientUnits:"userSpaceOnUse"},Q.createElement("stop",{stopColor:"#252525"}),Q.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),Q.createElement("linearGradient",{id:"paint11_linear_1808_68900",x1:"22.3997",y1:"8.53353",x2:"22.3997",y2:"10.6669",gradientUnits:"userSpaceOnUse"},Q.createElement("stop",{stopColor:"#252525"}),Q.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),Q.createElement("linearGradient",{id:"paint12_linear_1808_68900",x1:"26.6668",y1:"8.53353",x2:"26.6668",y2:"10.6669",gradientUnits:"userSpaceOnUse"},Q.createElement("stop",{stopColor:"#252525"}),Q.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),Q.createElement("linearGradient",{id:"paint13_linear_1808_68900",x1:"26.6668",y1:"4.2665",x2:"26.6668",y2:"6.39984",gradientUnits:"userSpaceOnUse"},Q.createElement("stop",{stopColor:"#252525"}),Q.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),Q.createElement("linearGradient",{id:"paint14_linear_1808_68900",x1:"5.334",y1:"12.8",x2:"5.334",y2:"14.9333",gradientUnits:"userSpaceOnUse"},Q.createElement("stop",{stopColor:"#252525"}),Q.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),Q.createElement("linearGradient",{id:"paint15_linear_1808_68900",x1:"1.06667",y1:"12.8",x2:"1.06667",y2:"14.9333",gradientUnits:"userSpaceOnUse"},Q.createElement("stop",{stopColor:"#252525"}),Q.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),Q.createElement("linearGradient",{id:"paint16_linear_1808_68900",x1:"30.9334",y1:"12.8",x2:"30.9334",y2:"14.9333",gradientUnits:"userSpaceOnUse"},Q.createElement("stop",{stopColor:"#252525"}),Q.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),Q.createElement("linearGradient",{id:"paint17_linear_1808_68900",x1:"9.59963",y1:"12.8",x2:"9.59963",y2:"14.9333",gradientUnits:"userSpaceOnUse"},Q.createElement("stop",{stopColor:"#252525"}),Q.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),Q.createElement("linearGradient",{id:"paint18_linear_1808_68900",x1:"13.8667",y1:"12.8",x2:"13.8667",y2:"14.9333",gradientUnits:"userSpaceOnUse"},Q.createElement("stop",{stopColor:"#252525"}),Q.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),Q.createElement("linearGradient",{id:"paint19_linear_1808_68900",x1:"18.1333",y1:"12.8",x2:"18.1333",y2:"14.9333",gradientUnits:"userSpaceOnUse"},Q.createElement("stop",{stopColor:"#252525"}),Q.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),Q.createElement("linearGradient",{id:"paint20_linear_1808_68900",x1:"22.3997",y1:"12.8",x2:"22.3997",y2:"14.9333",gradientUnits:"userSpaceOnUse"},Q.createElement("stop",{stopColor:"#252525"}),Q.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),Q.createElement("linearGradient",{id:"paint21_linear_1808_68900",x1:"26.6668",y1:"12.8",x2:"26.6668",y2:"14.9333",gradientUnits:"userSpaceOnUse"},Q.createElement("stop",{stopColor:"#252525"}),Q.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),Q.createElement("linearGradient",{id:"paint22_linear_1808_68900",x1:"5.334",y1:"17.0666",x2:"5.334",y2:"19.1999",gradientUnits:"userSpaceOnUse"},Q.createElement("stop",{stopColor:"#252525"}),Q.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),Q.createElement("linearGradient",{id:"paint23_linear_1808_68900",x1:"1.06667",y1:"17.0666",x2:"1.06667",y2:"19.1999",gradientUnits:"userSpaceOnUse"},Q.createElement("stop",{stopColor:"#252525"}),Q.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),Q.createElement("linearGradient",{id:"paint24_linear_1808_68900",x1:"30.9334",y1:"17.0666",x2:"30.9334",y2:"19.1999",gradientUnits:"userSpaceOnUse"},Q.createElement("stop",{stopColor:"#252525"}),Q.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),Q.createElement("linearGradient",{id:"paint25_linear_1808_68900",x1:"9.59963",y1:"17.0666",x2:"9.59963",y2:"19.1999",gradientUnits:"userSpaceOnUse"},Q.createElement("stop",{stopColor:"#252525"}),Q.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),Q.createElement("linearGradient",{id:"paint26_linear_1808_68900",x1:"13.8667",y1:"17.0666",x2:"13.8667",y2:"19.1999",gradientUnits:"userSpaceOnUse"},Q.createElement("stop",{stopColor:"#252525"}),Q.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),Q.createElement("linearGradient",{id:"paint27_linear_1808_68900",x1:"18.1333",y1:"17.0666",x2:"18.1333",y2:"19.1999",gradientUnits:"userSpaceOnUse"},Q.createElement("stop",{stopColor:"#252525"}),Q.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),Q.createElement("linearGradient",{id:"paint28_linear_1808_68900",x1:"22.3997",y1:"17.0666",x2:"22.3997",y2:"19.1999",gradientUnits:"userSpaceOnUse"},Q.createElement("stop",{stopColor:"#252525"}),Q.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),Q.createElement("linearGradient",{id:"paint29_linear_1808_68900",x1:"26.6668",y1:"17.0666",x2:"26.6668",y2:"19.1999",gradientUnits:"userSpaceOnUse"},Q.createElement("stop",{stopColor:"#252525"}),Q.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),Q.createElement("linearGradient",{id:"paint30_linear_1808_68900",x1:"5.334",y1:"21.3333",x2:"5.334",y2:"23.4666",gradientUnits:"userSpaceOnUse"},Q.createElement("stop",{stopColor:"#252525"}),Q.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),Q.createElement("linearGradient",{id:"paint31_linear_1808_68900",x1:"5.334",y1:"25.6001",x2:"5.334",y2:"27.7334",gradientUnits:"userSpaceOnUse"},Q.createElement("stop",{stopColor:"#252525"}),Q.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),Q.createElement("linearGradient",{id:"paint32_linear_1808_68900",x1:"1.06667",y1:"21.3333",x2:"1.06667",y2:"23.4666",gradientUnits:"userSpaceOnUse"},Q.createElement("stop",{stopColor:"#252525"}),Q.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),Q.createElement("linearGradient",{id:"paint33_linear_1808_68900",x1:"30.9334",y1:"21.3334",x2:"30.9334",y2:"23.4668",gradientUnits:"userSpaceOnUse"},Q.createElement("stop",{stopColor:"#252525"}),Q.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),Q.createElement("linearGradient",{id:"paint34_linear_1808_68900",x1:"9.59963",y1:"21.3334",x2:"9.59963",y2:"23.4668",gradientUnits:"userSpaceOnUse"},Q.createElement("stop",{stopColor:"#252525"}),Q.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),Q.createElement("linearGradient",{id:"paint35_linear_1808_68900",x1:"13.8667",y1:"21.3333",x2:"13.8667",y2:"23.4666",gradientUnits:"userSpaceOnUse"},Q.createElement("stop",{stopColor:"#252525"}),Q.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),Q.createElement("linearGradient",{id:"paint36_linear_1808_68900",x1:"18.1333",y1:"21.3333",x2:"18.1333",y2:"23.4666",gradientUnits:"userSpaceOnUse"},Q.createElement("stop",{stopColor:"#252525"}),Q.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),Q.createElement("linearGradient",{id:"paint37_linear_1808_68900",x1:"22.3997",y1:"21.3334",x2:"22.3997",y2:"23.4668",gradientUnits:"userSpaceOnUse"},Q.createElement("stop",{stopColor:"#252525"}),Q.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),Q.createElement("linearGradient",{id:"paint38_linear_1808_68900",x1:"26.6668",y1:"21.3334",x2:"26.6668",y2:"23.4668",gradientUnits:"userSpaceOnUse"},Q.createElement("stop",{stopColor:"#252525"}),Q.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),Q.createElement("linearGradient",{id:"paint39_linear_1808_68900",x1:"26.6668",y1:"25.6001",x2:"26.6668",y2:"27.7334",gradientUnits:"userSpaceOnUse"},Q.createElement("stop",{stopColor:"#252525"}),Q.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),Q.createElement("linearGradient",{id:"paint40_linear_1808_68900",x1:"9.59963",y1:"25.6001",x2:"9.59963",y2:"27.7334",gradientUnits:"userSpaceOnUse"},Q.createElement("stop",{stopColor:"#252525"}),Q.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),Q.createElement("linearGradient",{id:"paint41_linear_1808_68900",x1:"13.8667",y1:"25.6001",x2:"13.8667",y2:"27.7334",gradientUnits:"userSpaceOnUse"},Q.createElement("stop",{stopColor:"#252525"}),Q.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),Q.createElement("linearGradient",{id:"paint42_linear_1808_68900",x1:"18.1333",y1:"25.6001",x2:"18.1333",y2:"27.7334",gradientUnits:"userSpaceOnUse"},Q.createElement("stop",{stopColor:"#252525"}),Q.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),Q.createElement("linearGradient",{id:"paint43_linear_1808_68900",x1:"22.3997",y1:"25.6001",x2:"22.3997",y2:"27.7334",gradientUnits:"userSpaceOnUse"},Q.createElement("stop",{stopColor:"#252525"}),Q.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),Q.createElement("linearGradient",{id:"paint44_linear_1808_68900",x1:"9.59963",y1:"29.8665",x2:"9.59963",y2:"31.9999",gradientUnits:"userSpaceOnUse"},Q.createElement("stop",{stopColor:"#252525"}),Q.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),Q.createElement("linearGradient",{id:"paint45_linear_1808_68900",x1:"13.8667",y1:"29.8667",x2:"13.8667",y2:"32.0001",gradientUnits:"userSpaceOnUse"},Q.createElement("stop",{stopColor:"#252525"}),Q.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),Q.createElement("linearGradient",{id:"paint46_linear_1808_68900",x1:"18.1333",y1:"29.8669",x2:"18.1333",y2:"32.0003",gradientUnits:"userSpaceOnUse"},Q.createElement("stop",{stopColor:"#252525"}),Q.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),Q.createElement("linearGradient",{id:"paint47_linear_1808_68900",x1:"22.3997",y1:"29.8665",x2:"22.3997",y2:"31.9999",gradientUnits:"userSpaceOnUse"},Q.createElement("stop",{stopColor:"#252525"}),Q.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),Q.createElement("linearGradient",{id:"paint48_linear_1808_68900",x1:"9.59963",y1:"5.34058e-05",x2:"9.59963",y2:"2.13339",gradientUnits:"userSpaceOnUse"},Q.createElement("stop",{stopColor:"#252525"}),Q.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),Q.createElement("linearGradient",{id:"paint49_linear_1808_68900",x1:"13.8667",y1:"5.34058e-05",x2:"13.8667",y2:"2.13339",gradientUnits:"userSpaceOnUse"},Q.createElement("stop",{stopColor:"#252525"}),Q.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),Q.createElement("linearGradient",{id:"paint50_linear_1808_68900",x1:"18.1333",y1:"5.34058e-05",x2:"18.1333",y2:"2.13339",gradientUnits:"userSpaceOnUse"},Q.createElement("stop",{stopColor:"#252525"}),Q.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),Q.createElement("linearGradient",{id:"paint51_linear_1808_68900",x1:"22.3997",y1:"5.34058e-05",x2:"22.3997",y2:"2.13339",gradientUnits:"userSpaceOnUse"},Q.createElement("stop",{stopColor:"#252525"}),Q.createElement("stop",{offset:"1",stopColor:"#A4A4A4"}))))}function Yz(){return Q.createElement("svg",{width:"45",height:"46",viewBox:"0 0 45 46",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Q.createElement("circle",{cx:"13.5002",cy:"8",r:"1.5",fill:"url(#paint0_linear_1414_55682)"}),Q.createElement("circle",{cx:"19.5001",cy:"8",r:"1.5",fill:"url(#paint1_linear_1414_55682)"}),Q.createElement("circle",{cx:"25.4994",cy:"8",r:"1.5",fill:"url(#paint2_linear_1414_55682)"}),Q.createElement("circle",{cx:"31.5001",cy:"8",r:"1.5",fill:"url(#paint3_linear_1414_55682)"}),Q.createElement("circle",{cx:"7.50049",cy:"14",r:"1.5",fill:"url(#paint4_linear_1414_55682)"}),Q.createElement("circle",{cx:"7.50049",cy:"8",r:"1.5",fill:"url(#paint5_linear_1414_55682)"}),Q.createElement("circle",{cx:"1.5",cy:"14",r:"1.5",fill:"url(#paint6_linear_1414_55682)"}),Q.createElement("circle",{cx:"43.4999",cy:"14",r:"1.5",fill:"url(#paint7_linear_1414_55682)"}),Q.createElement("circle",{cx:"13.5002",cy:"14",r:"1.5",fill:"url(#paint8_linear_1414_55682)"}),Q.createElement("circle",{cx:"19.5001",cy:"14",r:"1.5",fill:"url(#paint9_linear_1414_55682)"}),Q.createElement("circle",{cx:"25.4994",cy:"14.0002",r:"1.5",fill:"url(#paint10_linear_1414_55682)"}),Q.createElement("circle",{cx:"31.5001",cy:"14",r:"1.5",fill:"url(#paint11_linear_1414_55682)"}),Q.createElement("circle",{cx:"37.5002",cy:"14",r:"1.5",fill:"url(#paint12_linear_1414_55682)"}),Q.createElement("circle",{cx:"37.5002",cy:"8",r:"1.5",fill:"url(#paint13_linear_1414_55682)"}),Q.createElement("circle",{cx:"7.50049",cy:"20",r:"1.5",fill:"url(#paint14_linear_1414_55682)"}),Q.createElement("circle",{cx:"1.5",cy:"20",r:"1.5",fill:"url(#paint15_linear_1414_55682)"}),Q.createElement("circle",{cx:"43.4999",cy:"20",r:"1.5",fill:"url(#paint16_linear_1414_55682)"}),Q.createElement("circle",{cx:"13.5002",cy:"20",r:"1.5",fill:"url(#paint17_linear_1414_55682)"}),Q.createElement("circle",{cx:"19.5001",cy:"20",r:"1.5",fill:"url(#paint18_linear_1414_55682)"}),Q.createElement("circle",{cx:"25.4994",cy:"20",r:"1.5",fill:"url(#paint19_linear_1414_55682)"}),Q.createElement("circle",{cx:"31.5001",cy:"20",r:"1.5",fill:"url(#paint20_linear_1414_55682)"}),Q.createElement("circle",{cx:"37.5002",cy:"20",r:"1.5",fill:"url(#paint21_linear_1414_55682)"}),Q.createElement("circle",{cx:"7.50049",cy:"26",r:"1.5",fill:"url(#paint22_linear_1414_55682)"}),Q.createElement("circle",{cx:"1.5",cy:"26",r:"1.5",fill:"url(#paint23_linear_1414_55682)"}),Q.createElement("circle",{cx:"43.4999",cy:"26",r:"1.5",fill:"url(#paint24_linear_1414_55682)"}),Q.createElement("circle",{cx:"13.5002",cy:"26",r:"1.5",fill:"url(#paint25_linear_1414_55682)"}),Q.createElement("circle",{cx:"19.5001",cy:"26",r:"1.5",fill:"url(#paint26_linear_1414_55682)"}),Q.createElement("circle",{cx:"25.4994",cy:"25.9998",r:"1.5",fill:"url(#paint27_linear_1414_55682)"}),Q.createElement("circle",{cx:"31.5001",cy:"26",r:"1.5",fill:"url(#paint28_linear_1414_55682)"}),Q.createElement("circle",{cx:"37.5002",cy:"26",r:"1.5",fill:"url(#paint29_linear_1414_55682)"}),Q.createElement("circle",{cx:"7.50049",cy:"32",r:"1.5",fill:"url(#paint30_linear_1414_55682)"}),Q.createElement("circle",{cx:"7.50049",cy:"38",r:"1.5",fill:"url(#paint31_linear_1414_55682)"}),Q.createElement("circle",{cx:"1.5",cy:"32",r:"1.5",fill:"url(#paint32_linear_1414_55682)"}),Q.createElement("circle",{cx:"43.4999",cy:"32",r:"1.5",fill:"url(#paint33_linear_1414_55682)"}),Q.createElement("circle",{cx:"13.5002",cy:"32",r:"1.5",fill:"url(#paint34_linear_1414_55682)"}),Q.createElement("circle",{cx:"19.5001",cy:"32",r:"1.5",fill:"url(#paint35_linear_1414_55682)"}),Q.createElement("circle",{cx:"25.4994",cy:"32",r:"1.5",fill:"url(#paint36_linear_1414_55682)"}),Q.createElement("circle",{cx:"31.5001",cy:"32",r:"1.5",fill:"url(#paint37_linear_1414_55682)"}),Q.createElement("circle",{cx:"37.5002",cy:"32",r:"1.5",fill:"url(#paint38_linear_1414_55682)"}),Q.createElement("circle",{cx:"37.5002",cy:"38",r:"1.5",fill:"url(#paint39_linear_1414_55682)"}),Q.createElement("circle",{cx:"13.5002",cy:"38",r:"1.5",fill:"url(#paint40_linear_1414_55682)"}),Q.createElement("circle",{cx:"19.5001",cy:"38",r:"1.5",fill:"url(#paint41_linear_1414_55682)"}),Q.createElement("circle",{cx:"25.4994",cy:"38",r:"1.5",fill:"url(#paint42_linear_1414_55682)"}),Q.createElement("circle",{cx:"31.5001",cy:"38",r:"1.5",fill:"url(#paint43_linear_1414_55682)"}),Q.createElement("circle",{cx:"13.5002",cy:"44",r:"1.5",fill:"url(#paint44_linear_1414_55682)"}),Q.createElement("circle",{cx:"19.5001",cy:"44",r:"1.5",fill:"url(#paint45_linear_1414_55682)"}),Q.createElement("circle",{cx:"25.4994",cy:"44",r:"1.5",fill:"url(#paint46_linear_1414_55682)"}),Q.createElement("circle",{cx:"31.5001",cy:"44",r:"1.5",fill:"url(#paint47_linear_1414_55682)"}),Q.createElement("circle",{cx:"13.5002",cy:"2",r:"1.5",fill:"url(#paint48_linear_1414_55682)"}),Q.createElement("circle",{cx:"19.5001",cy:"2",r:"1.5",fill:"url(#paint49_linear_1414_55682)"}),Q.createElement("circle",{cx:"25.4994",cy:"2",r:"1.5",fill:"url(#paint50_linear_1414_55682)"}),Q.createElement("circle",{cx:"31.5001",cy:"2",r:"1.5",fill:"url(#paint51_linear_1414_55682)"}),Q.createElement("defs",null,Q.createElement("linearGradient",{id:"paint0_linear_1414_55682",x1:"13.5002",y1:"6.5",x2:"13.5002",y2:"9.5",gradientUnits:"userSpaceOnUse"},Q.createElement("stop",{stopColor:"#252525"}),Q.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),Q.createElement("linearGradient",{id:"paint1_linear_1414_55682",x1:"19.5001",y1:"6.5",x2:"19.5001",y2:"9.5",gradientUnits:"userSpaceOnUse"},Q.createElement("stop",{stopColor:"#252525"}),Q.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),Q.createElement("linearGradient",{id:"paint2_linear_1414_55682",x1:"25.4994",y1:"6.5",x2:"25.4994",y2:"9.5",gradientUnits:"userSpaceOnUse"},Q.createElement("stop",{stopColor:"#252525"}),Q.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),Q.createElement("linearGradient",{id:"paint3_linear_1414_55682",x1:"31.5001",y1:"6.5",x2:"31.5001",y2:"9.5",gradientUnits:"userSpaceOnUse"},Q.createElement("stop",{stopColor:"#252525"}),Q.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),Q.createElement("linearGradient",{id:"paint4_linear_1414_55682",x1:"7.50049",y1:"12.5",x2:"7.50049",y2:"15.5",gradientUnits:"userSpaceOnUse"},Q.createElement("stop",{stopColor:"#252525"}),Q.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),Q.createElement("linearGradient",{id:"paint5_linear_1414_55682",x1:"7.50049",y1:"6.5",x2:"7.50049",y2:"9.5",gradientUnits:"userSpaceOnUse"},Q.createElement("stop",{stopColor:"#252525"}),Q.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),Q.createElement("linearGradient",{id:"paint6_linear_1414_55682",x1:"1.5",y1:"12.5",x2:"1.5",y2:"15.5",gradientUnits:"userSpaceOnUse"},Q.createElement("stop",{stopColor:"#252525"}),Q.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),Q.createElement("linearGradient",{id:"paint7_linear_1414_55682",x1:"43.4999",y1:"12.5",x2:"43.4999",y2:"15.5",gradientUnits:"userSpaceOnUse"},Q.createElement("stop",{stopColor:"#252525"}),Q.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),Q.createElement("linearGradient",{id:"paint8_linear_1414_55682",x1:"13.5002",y1:"12.5",x2:"13.5002",y2:"15.5",gradientUnits:"userSpaceOnUse"},Q.createElement("stop",{stopColor:"#252525"}),Q.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),Q.createElement("linearGradient",{id:"paint9_linear_1414_55682",x1:"19.5001",y1:"12.5",x2:"19.5001",y2:"15.5",gradientUnits:"userSpaceOnUse"},Q.createElement("stop",{stopColor:"#252525"}),Q.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),Q.createElement("linearGradient",{id:"paint10_linear_1414_55682",x1:"25.4994",y1:"12.5002",x2:"25.4994",y2:"15.5002",gradientUnits:"userSpaceOnUse"},Q.createElement("stop",{stopColor:"#252525"}),Q.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),Q.createElement("linearGradient",{id:"paint11_linear_1414_55682",x1:"31.5001",y1:"12.5",x2:"31.5001",y2:"15.5",gradientUnits:"userSpaceOnUse"},Q.createElement("stop",{stopColor:"#252525"}),Q.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),Q.createElement("linearGradient",{id:"paint12_linear_1414_55682",x1:"37.5002",y1:"12.5",x2:"37.5002",y2:"15.5",gradientUnits:"userSpaceOnUse"},Q.createElement("stop",{stopColor:"#252525"}),Q.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),Q.createElement("linearGradient",{id:"paint13_linear_1414_55682",x1:"37.5002",y1:"6.5",x2:"37.5002",y2:"9.5",gradientUnits:"userSpaceOnUse"},Q.createElement("stop",{stopColor:"#252525"}),Q.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),Q.createElement("linearGradient",{id:"paint14_linear_1414_55682",x1:"7.50049",y1:"18.5",x2:"7.50049",y2:"21.5",gradientUnits:"userSpaceOnUse"},Q.createElement("stop",{stopColor:"#252525"}),Q.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),Q.createElement("linearGradient",{id:"paint15_linear_1414_55682",x1:"1.5",y1:"18.5",x2:"1.5",y2:"21.5",gradientUnits:"userSpaceOnUse"},Q.createElement("stop",{stopColor:"#252525"}),Q.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),Q.createElement("linearGradient",{id:"paint16_linear_1414_55682",x1:"43.4999",y1:"18.5",x2:"43.4999",y2:"21.5",gradientUnits:"userSpaceOnUse"},Q.createElement("stop",{stopColor:"#252525"}),Q.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),Q.createElement("linearGradient",{id:"paint17_linear_1414_55682",x1:"13.5002",y1:"18.5",x2:"13.5002",y2:"21.5",gradientUnits:"userSpaceOnUse"},Q.createElement("stop",{stopColor:"#252525"}),Q.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),Q.createElement("linearGradient",{id:"paint18_linear_1414_55682",x1:"19.5001",y1:"18.5",x2:"19.5001",y2:"21.5",gradientUnits:"userSpaceOnUse"},Q.createElement("stop",{stopColor:"#252525"}),Q.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),Q.createElement("linearGradient",{id:"paint19_linear_1414_55682",x1:"25.4994",y1:"18.5",x2:"25.4994",y2:"21.5",gradientUnits:"userSpaceOnUse"},Q.createElement("stop",{stopColor:"#252525"}),Q.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),Q.createElement("linearGradient",{id:"paint20_linear_1414_55682",x1:"31.5001",y1:"18.5",x2:"31.5001",y2:"21.5",gradientUnits:"userSpaceOnUse"},Q.createElement("stop",{stopColor:"#252525"}),Q.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),Q.createElement("linearGradient",{id:"paint21_linear_1414_55682",x1:"37.5002",y1:"18.5",x2:"37.5002",y2:"21.5",gradientUnits:"userSpaceOnUse"},Q.createElement("stop",{stopColor:"#252525"}),Q.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),Q.createElement("linearGradient",{id:"paint22_linear_1414_55682",x1:"7.50049",y1:"24.5",x2:"7.50049",y2:"27.5",gradientUnits:"userSpaceOnUse"},Q.createElement("stop",{stopColor:"#252525"}),Q.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),Q.createElement("linearGradient",{id:"paint23_linear_1414_55682",x1:"1.5",y1:"24.5",x2:"1.5",y2:"27.5",gradientUnits:"userSpaceOnUse"},Q.createElement("stop",{stopColor:"#252525"}),Q.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),Q.createElement("linearGradient",{id:"paint24_linear_1414_55682",x1:"43.4999",y1:"24.5",x2:"43.4999",y2:"27.5",gradientUnits:"userSpaceOnUse"},Q.createElement("stop",{stopColor:"#252525"}),Q.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),Q.createElement("linearGradient",{id:"paint25_linear_1414_55682",x1:"13.5002",y1:"24.5",x2:"13.5002",y2:"27.5",gradientUnits:"userSpaceOnUse"},Q.createElement("stop",{stopColor:"#252525"}),Q.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),Q.createElement("linearGradient",{id:"paint26_linear_1414_55682",x1:"19.5001",y1:"24.5",x2:"19.5001",y2:"27.5",gradientUnits:"userSpaceOnUse"},Q.createElement("stop",{stopColor:"#252525"}),Q.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),Q.createElement("linearGradient",{id:"paint27_linear_1414_55682",x1:"25.4994",y1:"24.4998",x2:"25.4994",y2:"27.4998",gradientUnits:"userSpaceOnUse"},Q.createElement("stop",{stopColor:"#252525"}),Q.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),Q.createElement("linearGradient",{id:"paint28_linear_1414_55682",x1:"31.5001",y1:"24.5",x2:"31.5001",y2:"27.5",gradientUnits:"userSpaceOnUse"},Q.createElement("stop",{stopColor:"#252525"}),Q.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),Q.createElement("linearGradient",{id:"paint29_linear_1414_55682",x1:"37.5002",y1:"24.5",x2:"37.5002",y2:"27.5",gradientUnits:"userSpaceOnUse"},Q.createElement("stop",{stopColor:"#252525"}),Q.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),Q.createElement("linearGradient",{id:"paint30_linear_1414_55682",x1:"7.50049",y1:"30.5",x2:"7.50049",y2:"33.5",gradientUnits:"userSpaceOnUse"},Q.createElement("stop",{stopColor:"#252525"}),Q.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),Q.createElement("linearGradient",{id:"paint31_linear_1414_55682",x1:"7.50049",y1:"36.5",x2:"7.50049",y2:"39.5",gradientUnits:"userSpaceOnUse"},Q.createElement("stop",{stopColor:"#252525"}),Q.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),Q.createElement("linearGradient",{id:"paint32_linear_1414_55682",x1:"1.5",y1:"30.5",x2:"1.5",y2:"33.5",gradientUnits:"userSpaceOnUse"},Q.createElement("stop",{stopColor:"#252525"}),Q.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),Q.createElement("linearGradient",{id:"paint33_linear_1414_55682",x1:"43.4999",y1:"30.5",x2:"43.4999",y2:"33.5",gradientUnits:"userSpaceOnUse"},Q.createElement("stop",{stopColor:"#252525"}),Q.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),Q.createElement("linearGradient",{id:"paint34_linear_1414_55682",x1:"13.5002",y1:"30.5",x2:"13.5002",y2:"33.5",gradientUnits:"userSpaceOnUse"},Q.createElement("stop",{stopColor:"#252525"}),Q.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),Q.createElement("linearGradient",{id:"paint35_linear_1414_55682",x1:"19.5001",y1:"30.5",x2:"19.5001",y2:"33.5",gradientUnits:"userSpaceOnUse"},Q.createElement("stop",{stopColor:"#252525"}),Q.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),Q.createElement("linearGradient",{id:"paint36_linear_1414_55682",x1:"25.4994",y1:"30.5",x2:"25.4994",y2:"33.5",gradientUnits:"userSpaceOnUse"},Q.createElement("stop",{stopColor:"#252525"}),Q.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),Q.createElement("linearGradient",{id:"paint37_linear_1414_55682",x1:"31.5001",y1:"30.5",x2:"31.5001",y2:"33.5",gradientUnits:"userSpaceOnUse"},Q.createElement("stop",{stopColor:"#252525"}),Q.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),Q.createElement("linearGradient",{id:"paint38_linear_1414_55682",x1:"37.5002",y1:"30.5",x2:"37.5002",y2:"33.5",gradientUnits:"userSpaceOnUse"},Q.createElement("stop",{stopColor:"#252525"}),Q.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),Q.createElement("linearGradient",{id:"paint39_linear_1414_55682",x1:"37.5002",y1:"36.5",x2:"37.5002",y2:"39.5",gradientUnits:"userSpaceOnUse"},Q.createElement("stop",{stopColor:"#252525"}),Q.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),Q.createElement("linearGradient",{id:"paint40_linear_1414_55682",x1:"13.5002",y1:"36.5",x2:"13.5002",y2:"39.5",gradientUnits:"userSpaceOnUse"},Q.createElement("stop",{stopColor:"#252525"}),Q.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),Q.createElement("linearGradient",{id:"paint41_linear_1414_55682",x1:"19.5001",y1:"36.5",x2:"19.5001",y2:"39.5",gradientUnits:"userSpaceOnUse"},Q.createElement("stop",{stopColor:"#252525"}),Q.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),Q.createElement("linearGradient",{id:"paint42_linear_1414_55682",x1:"25.4994",y1:"36.5",x2:"25.4994",y2:"39.5",gradientUnits:"userSpaceOnUse"},Q.createElement("stop",{stopColor:"#252525"}),Q.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),Q.createElement("linearGradient",{id:"paint43_linear_1414_55682",x1:"31.5001",y1:"36.5",x2:"31.5001",y2:"39.5",gradientUnits:"userSpaceOnUse"},Q.createElement("stop",{stopColor:"#252525"}),Q.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),Q.createElement("linearGradient",{id:"paint44_linear_1414_55682",x1:"13.5002",y1:"42.5",x2:"13.5002",y2:"45.5",gradientUnits:"userSpaceOnUse"},Q.createElement("stop",{stopColor:"#252525"}),Q.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),Q.createElement("linearGradient",{id:"paint45_linear_1414_55682",x1:"19.5001",y1:"42.5",x2:"19.5001",y2:"45.5",gradientUnits:"userSpaceOnUse"},Q.createElement("stop",{stopColor:"#252525"}),Q.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),Q.createElement("linearGradient",{id:"paint46_linear_1414_55682",x1:"25.4994",y1:"42.5",x2:"25.4994",y2:"45.5",gradientUnits:"userSpaceOnUse"},Q.createElement("stop",{stopColor:"#252525"}),Q.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),Q.createElement("linearGradient",{id:"paint47_linear_1414_55682",x1:"31.5001",y1:"42.5",x2:"31.5001",y2:"45.5",gradientUnits:"userSpaceOnUse"},Q.createElement("stop",{stopColor:"#252525"}),Q.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),Q.createElement("linearGradient",{id:"paint48_linear_1414_55682",x1:"13.5002",y1:"0.5",x2:"13.5002",y2:"3.5",gradientUnits:"userSpaceOnUse"},Q.createElement("stop",{stopColor:"#252525"}),Q.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),Q.createElement("linearGradient",{id:"paint49_linear_1414_55682",x1:"19.5001",y1:"0.5",x2:"19.5001",y2:"3.5",gradientUnits:"userSpaceOnUse"},Q.createElement("stop",{stopColor:"#252525"}),Q.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),Q.createElement("linearGradient",{id:"paint50_linear_1414_55682",x1:"25.4994",y1:"0.5",x2:"25.4994",y2:"3.5",gradientUnits:"userSpaceOnUse"},Q.createElement("stop",{stopColor:"#252525"}),Q.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),Q.createElement("linearGradient",{id:"paint51_linear_1414_55682",x1:"31.5001",y1:"0.5",x2:"31.5001",y2:"3.5",gradientUnits:"userSpaceOnUse"},Q.createElement("stop",{stopColor:"#252525"}),Q.createElement("stop",{offset:"1",stopColor:"#A4A4A4"}))))}let Yj="tonearm-svg--tonearmBottom--3JC--";function YY(e){let{onTonearmHeadMouseDown:t}=e;return Q.createElement("svg",{width:"27",height:"80",viewBox:"0 0 27 80",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Q.createElement("path",{d:"M18.7042 8.19556C18.7042 8.19556 18.7042 34.7407 18.7042 47.6641C18.7042 60.5876 13.9589 64.9213 13.9589 64.9213",stroke:"black",strokeOpacity:"0.2",strokeWidth:"5.33844",strokeLinecap:"round"}),Q.createElement("g",{filter:"url(#filter0_dii_242_919)"},Q.createElement("path",{d:"M18.7042 8.19556C18.7042 8.19556 18.7042 34.7407 18.7042 47.6641C18.7042 60.5876 13.9589 64.9213 13.9589 64.9213",stroke:"white",strokeWidth:"4.15212",strokeLinecap:"round"})),Q.createElement("g",{filter:"url(#filter1_d_242_919)"},Q.createElement("rect",{x:"14",y:"2",width:"9.49057",height:"11.8632",fill:"url(#paint0_linear_242_919)"}),Q.createElement("rect",{x:"14.2966",y:"2.29658",width:"8.89741",height:"11.27",stroke:"black",strokeOpacity:"0.2",strokeWidth:"0.59316"})),Q.createElement("g",{filter:"url(#filter2_d_242_919)",onMouseDown:t,className:Yj},Q.createElement("g",{filter:"url(#filter3_iii_242_919)"},Q.createElement("path",{d:"M9.30333 62.425C9.93167 61.6761 11.0481 61.5785 11.7969 62.2068L16.3554 66.0318C17.1042 66.6601 17.2019 67.7766 16.5735 68.5254L10.4596 75.8116C9.8313 76.5604 8.71489 76.6581 7.96606 76.0298L7.14087 75.3374L4.23279 72.8972L3.40761 72.2048C2.65878 71.5764 2.56111 70.46 3.18945 69.7112L9.30333 62.425Z",fill:"#E9E9E9"})),Q.createElement("path",{d:"M16.546 65.8046L11.9876 61.9796C11.1132 61.246 9.80976 61.36 9.07614 62.2343L2.96225 69.5206C2.22863 70.3949 2.34267 71.6984 3.21697 72.432L4.04216 73.1244L6.95024 75.5646L7.77542 76.257C8.64972 76.9906 9.95321 76.8766 10.6868 76.0023L16.8007 68.716C17.5343 67.8417 17.4203 66.5382 16.546 65.8046Z",stroke:"black",strokeOpacity:"0.25",strokeWidth:"0.59316"})),Q.createElement("defs",null,Q.createElement("filter",{id:"filter0_dii_242_919",x:"9.51017",y:"3.74674",width:"13.6427",height:"65.6232",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},Q.createElement("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),Q.createElement("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),Q.createElement("feOffset",null),Q.createElement("feGaussianBlur",{stdDeviation:"1.18632"}),Q.createElement("feComposite",{in2:"hardAlpha",operator:"out"}),Q.createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.2 0"}),Q.createElement("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_242_919"}),Q.createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_242_919",result:"shape"}),Q.createElement("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),Q.createElement("feOffset",{dx:"1.18632"}),Q.createElement("feGaussianBlur",{stdDeviation:"0.415212"}),Q.createElement("feComposite",{in2:"hardAlpha",operator:"arithmetic",k2:"-1",k3:"1"}),Q.createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 0.709804 0 0 0 0 0.709804 0 0 0 0 0.709804 0 0 0 0.5 0"}),Q.createElement("feBlend",{mode:"normal",in2:"shape",result:"effect2_innerShadow_242_919"}),Q.createElement("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),Q.createElement("feOffset",{dx:"-1.18632"}),Q.createElement("feGaussianBlur",{stdDeviation:"0.415212"}),Q.createElement("feComposite",{in2:"hardAlpha",operator:"arithmetic",k2:"-1",k3:"1"}),Q.createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 0.708333 0 0 0 0 0.708333 0 0 0 0 0.708333 0 0 0 0.5 0"}),Q.createElement("feBlend",{mode:"normal",in2:"effect2_innerShadow_242_919",result:"effect3_innerShadow_242_919"})),Q.createElement("filter",{id:"filter1_d_242_919",x:"11.3451",y:"0.672526",width:"14.8005",height:"17.1732",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},Q.createElement("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),Q.createElement("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),Q.createElement("feOffset",{dy:"1.32747"}),Q.createElement("feGaussianBlur",{stdDeviation:"1.32747"}),Q.createElement("feComposite",{in2:"hardAlpha",operator:"out"}),Q.createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.2 0"}),Q.createElement("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_242_919"}),Q.createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_242_919",result:"shape"})),Q.createElement("filter",{id:"filter2_d_242_919",x:"0.412163",y:"60.3145",width:"18.9386",height:"19.3776",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},Q.createElement("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),Q.createElement("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),Q.createElement("feOffset",{dy:"0.884983"}),Q.createElement("feGaussianBlur",{stdDeviation:"0.884983"}),Q.createElement("feComposite",{in2:"hardAlpha",operator:"out"}),Q.createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.2 0"}),Q.createElement("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_242_919"}),Q.createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_242_919",result:"shape"})),Q.createElement("filter",{id:"filter3_iii_242_919",x:"1.29715",y:"60.3145",width:"16.8768",height:"17.3158",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},Q.createElement("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),Q.createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}),Q.createElement("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),Q.createElement("feOffset",{dy:"2.37264"}),Q.createElement("feGaussianBlur",{stdDeviation:"0.29658"}),Q.createElement("feComposite",{in2:"hardAlpha",operator:"arithmetic",k2:"-1",k3:"1"}),Q.createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 1 0 0 0 0 1 0 0 0 0 1 0 0 0 0.86 0"}),Q.createElement("feBlend",{mode:"normal",in2:"shape",result:"effect1_innerShadow_242_919"}),Q.createElement("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),Q.createElement("feOffset",{dx:"1.77948",dy:"1.77948"}),Q.createElement("feGaussianBlur",{stdDeviation:"0.29658"}),Q.createElement("feComposite",{in2:"hardAlpha",operator:"arithmetic",k2:"-1",k3:"1"}),Q.createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 1 0 0 0 0 1 0 0 0 0 1 0 0 0 0.8 0"}),Q.createElement("feBlend",{mode:"normal",in2:"effect1_innerShadow_242_919",result:"effect2_innerShadow_242_919"}),Q.createElement("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),Q.createElement("feOffset",{dx:"-0.884983",dy:"-0.884983"}),Q.createElement("feGaussianBlur",{stdDeviation:"0.884983"}),Q.createElement("feComposite",{in2:"hardAlpha",operator:"arithmetic",k2:"-1",k3:"1"}),Q.createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.17 0"}),Q.createElement("feBlend",{mode:"normal",in2:"effect2_innerShadow_242_919",result:"effect3_innerShadow_242_919"})),Q.createElement("linearGradient",{id:"paint0_linear_242_919",x1:"14",y1:"7.9316",x2:"23.4906",y2:"7.9316",gradientUnits:"userSpaceOnUse"},Q.createElement("stop",{stopColor:"#CACACA"}),Q.createElement("stop",{offset:"0.253125",stopColor:"#E2E2E2"}),Q.createElement("stop",{offset:"0.384375",stopColor:"#F3F3F3"}),Q.createElement("stop",{offset:"0.500704",stopColor:"white"}),Q.createElement("stop",{offset:"0.625",stopColor:"#F3F3F3"}),Q.createElement("stop",{offset:"0.753125",stopColor:"#E2E2E2"}),Q.createElement("stop",{offset:"1",stopColor:"#CACACA"}))))}function YZ(e){let{onTonearmHeadMouseDown:t}=e;return Q.createElement("svg",{width:"24",height:"72",viewBox:"0 0 24 72",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Q.createElement("path",{d:"M16.8776 7.53516C16.8776 7.53516 16.8776 31.2514 16.8776 42.7976C16.8776 54.3438 12.6379 58.2157 12.6379 58.2157",stroke:"black",strokeOpacity:"0.2",strokeWidth:"4.76953",strokeLinecap:"round"}),Q.createElement("g",{filter:"url(#filter0_dii_254_922)"},Q.createElement("path",{d:"M16.8776 7.53516C16.8776 7.53516 16.8776 31.2514 16.8776 42.7976C16.8776 54.3438 12.6379 58.2157 12.6379 58.2157",stroke:"white",strokeWidth:"3.70964",strokeLinecap:"round"})),Q.createElement("g",{filter:"url(#filter1_d_254_922)"},Q.createElement("rect",{x:"12.675",y:"2",width:"8.47917",height:"10.599",fill:"url(#paint0_linear_254_922)"}),Q.createElement("rect",{x:"12.94",y:"2.26497",width:"7.94922",height:"10.069",stroke:"black",strokeOpacity:"0.2",strokeWidth:"0.529948"})),Q.createElement("g",{filter:"url(#filter2_d_254_922)",onMouseDown:t,className:Yj},Q.createElement("g",{filter:"url(#filter3_iii_254_922)"},Q.createElement("path",{d:"M8.4789 55.9858C9.04027 55.3168 10.0377 55.2295 10.7067 55.7909L14.7794 59.2082C15.4484 59.7696 15.5357 60.7671 14.9743 61.4361L9.51198 67.9459C8.9506 68.6149 7.95316 68.7021 7.28414 68.1408L6.54689 67.5221L3.94872 65.342L3.21147 64.7234C2.54245 64.162 2.45518 63.1646 3.01656 62.4955L8.4789 55.9858Z",fill:"#E9E9E9"})),Q.createElement("path",{d:"M14.9497 59.0053L10.8771 55.5879C10.0959 54.9325 8.93136 55.0343 8.27591 55.8155L2.81358 62.3252C2.15814 63.1064 2.26002 64.2709 3.04115 64.9264L3.7784 65.545L6.37657 67.7251L7.11382 68.3437C7.89494 68.9992 9.05952 68.8973 9.71496 68.1162L15.1773 61.6064C15.8327 60.8253 15.7309 59.6607 14.9497 59.0053Z",stroke:"black",strokeOpacity:"0.25",strokeWidth:"0.529948"})),Q.createElement("defs",null,Q.createElement("filter",{id:"filter0_dii_254_922",x:"8.66341",y:"3.56051",width:"12.1888",height:"58.6298",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},Q.createElement("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),Q.createElement("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),Q.createElement("feOffset",null),Q.createElement("feGaussianBlur",{stdDeviation:"1.0599"}),Q.createElement("feComposite",{in2:"hardAlpha",operator:"out"}),Q.createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.2 0"}),Q.createElement("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_254_922"}),Q.createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_254_922",result:"shape"}),Q.createElement("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),Q.createElement("feOffset",{dx:"1.0599"}),Q.createElement("feGaussianBlur",{stdDeviation:"0.370964"}),Q.createElement("feComposite",{in2:"hardAlpha",operator:"arithmetic",k2:"-1",k3:"1"}),Q.createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 0.709804 0 0 0 0 0.709804 0 0 0 0 0.709804 0 0 0 0.5 0"}),Q.createElement("feBlend",{mode:"normal",in2:"shape",result:"effect2_innerShadow_254_922"}),Q.createElement("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),Q.createElement("feOffset",{dx:"-1.0599"}),Q.createElement("feGaussianBlur",{stdDeviation:"0.370964"}),Q.createElement("feComposite",{in2:"hardAlpha",operator:"arithmetic",k2:"-1",k3:"1"}),Q.createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 0.708333 0 0 0 0 0.708333 0 0 0 0 0.708333 0 0 0 0.5 0"}),Q.createElement("feBlend",{mode:"normal",in2:"effect2_innerShadow_254_922",result:"effect3_innerShadow_254_922"})),Q.createElement("filter",{id:"filter1_d_254_922",x:"10.303",y:"0.813993",width:"13.2233",height:"15.343",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},Q.createElement("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),Q.createElement("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),Q.createElement("feOffset",{dy:"1.18601"}),Q.createElement("feGaussianBlur",{stdDeviation:"1.18601"}),Q.createElement("feComposite",{in2:"hardAlpha",operator:"out"}),Q.createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.2 0"}),Q.createElement("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_254_922"}),Q.createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_254_922",result:"shape"})),Q.createElement("filter",{id:"filter2_d_254_922",x:"0.535357",y:"54.1002",width:"16.9203",height:"17.3126",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},Q.createElement("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),Q.createElement("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),Q.createElement("feOffset",{dy:"0.790671"}),Q.createElement("feGaussianBlur",{stdDeviation:"0.790671"}),Q.createElement("feComposite",{in2:"hardAlpha",operator:"out"}),Q.createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.2 0"}),Q.createElement("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_254_922"}),Q.createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_254_922",result:"shape"})),Q.createElement("filter",{id:"filter3_iii_254_922",x:"1.32603",y:"54.1002",width:"15.0782",height:"15.4705",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},Q.createElement("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),Q.createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}),Q.createElement("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),Q.createElement("feOffset",{dy:"2.11979"}),Q.createElement("feGaussianBlur",{stdDeviation:"0.264974"}),Q.createElement("feComposite",{in2:"hardAlpha",operator:"arithmetic",k2:"-1",k3:"1"}),Q.createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 1 0 0 0 0 1 0 0 0 0 1 0 0 0 0.86 0"}),Q.createElement("feBlend",{mode:"normal",in2:"shape",result:"effect1_innerShadow_254_922"}),Q.createElement("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),Q.createElement("feOffset",{dx:"1.58984",dy:"1.58984"}),Q.createElement("feGaussianBlur",{stdDeviation:"0.264974"}),Q.createElement("feComposite",{in2:"hardAlpha",operator:"arithmetic",k2:"-1",k3:"1"}),Q.createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 1 0 0 0 0 1 0 0 0 0 1 0 0 0 0.8 0"}),Q.createElement("feBlend",{mode:"normal",in2:"effect1_innerShadow_254_922",result:"effect2_innerShadow_254_922"}),Q.createElement("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),Q.createElement("feOffset",{dx:"-0.790671",dy:"-0.790671"}),Q.createElement("feGaussianBlur",{stdDeviation:"0.790671"}),Q.createElement("feComposite",{in2:"hardAlpha",operator:"arithmetic",k2:"-1",k3:"1"}),Q.createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.17 0"}),Q.createElement("feBlend",{mode:"normal",in2:"effect2_innerShadow_254_922",result:"effect3_innerShadow_254_922"})),Q.createElement("linearGradient",{id:"paint0_linear_254_922",x1:"12.675",y1:"7.29948",x2:"21.1542",y2:"7.29948",gradientUnits:"userSpaceOnUse"},Q.createElement("stop",{stopColor:"#CACACA"}),Q.createElement("stop",{offset:"0.253125",stopColor:"#E2E2E2"}),Q.createElement("stop",{offset:"0.384375",stopColor:"#F3F3F3"}),Q.createElement("stop",{offset:"0.500704",stopColor:"white"}),Q.createElement("stop",{offset:"0.625",stopColor:"#F3F3F3"}),Q.createElement("stop",{offset:"0.753125",stopColor:"#E2E2E2"}),Q.createElement("stop",{offset:"1",stopColor:"#CACACA"}))))}function YX(e){let{onPause:t,onResume:n}=e,[a,r]=Q.useState(null),l=Q.useRef(0),i=Q.useRef(0),o=(0,$.d4)(e=>{var t,n;return null==(n=null==(t=e.music)?void 0:t.music)?void 0:n.isPaused}),s=(0,Nj.F4)(),c=(null==s?void 0:s.shouldOptimizeForIpadApp)||ec.Ay.isIpad,d=Q.useCallback(e=>{if(!1===o){let t=e.clientX;r(22-(0,xL.qE)(t-l.current,0,21)/21*22)}else{let t=e.clientX;r((0,xL.qE)(l.current-t,0,21)/21*22)}},[o,22,21]),u=Q.useCallback(e=>{document.removeEventListener("mousemove",d),document.removeEventListener("mouseup",u);let a=!1===o;if(Date.now()-i.current<100)a?t():n();else if(a){let n=e.clientX;(0,xL.qE)(n-l.current,0,21)>10.5&&t()}else{let t=e.clientX;(0,xL.qE)(l.current-t,0,21)>10.5&&n()}l.current=0,r(null)},[d,o,t,n]),m=e=>{l.current=e.clientX,i.current=Date.now(),document.addEventListener("mousemove",d),document.addEventListener("mouseup",u)},p=null!=a?a:!1===o?22:0;return Q.createElement("div",{className:ea()({"tonearm--tonearmStandalone--UOmob":"timedjam"===e.tonearmType,"tonearm--tonearmPanel--KyeLs tonearm--tonearmStandalone--UOmob":"panel"===e.tonearmType}),style:{transform:`rotate(${p}deg)`,transition:null!=a?"transform 0.1s linear":"transform 0.3s ease-in-out"}},"panel"===e.tonearmType?Q.createElement(YZ,{onTonearmHeadMouseDown:c?void 0:m}):Q.createElement(YY,{onTonearmHeadMouseDown:c?void 0:m}))}let Yq="turntable--gray--OY0Du";var YJ=n(258873);function YQ(e){let{handlePause:t,handleTonearmResume:n,size:a="large",grayCoverArtWhenPaused:r,withoutBorder:l}=e;return Q.createElement("div",{className:ea()("turntable--recordPlayerBase--WG5CH",{"turntable--recordBaseSmall--ZpHXz":"small"===a,"turntable--withoutBorder--28x4E":l})},Q.createElement(Y$,{handlePause:t,handleTonearmResume:n,size:e.size,grayCoverArtWhenPaused:r}),Q.createElement("div",{className:"turntable--speakerGrill--DXQjl"},"small"===e.size?Q.createElement(YW,null):Q.createElement(Yz,null)))}function Y$(e){let{handlePause:t,handleTonearmResume:n,size:a,grayCoverArtWhenPaused:r}=e;return Q.createElement("div",{className:ea()("turntable--recordPlayer--0aMTu",{"turntable--recordPlayerSmall--tE3FI":"small"===a})},Q.createElement(Y0,{size:a,grayCoverArtWhenPaused:r}),Q.createElement(YX,{onPause:t,onResume:n,tonearmType:"small"===a?"panel":"timedjam"}))}function Y0(e){let{size:t,maskAlbumArtWhenPaused:n,maskRef:a,useGrayMask:r,grayCoverArtWhenPaused:l}=e,i=function(){let e=(0,$.d4)(e=>e.music.music),t=YD((null==e?void 0:e.selectedSongID)||""),n=YR(),a=t&&t.album_art;return!n||!a}()&&!!n;return Q.createElement("div",{className:ea()("turntable--record--96NxV",{"turntable--xsmall--eqtGp":"xsmall"===t,"turntable--small--b8Qni":"small"===t,"turntable--large--oXtu6":"large"===t})},Q.createElement(YK,null),Q.createElement(Y1,{size:t,showMask:i,maskRef:a,useGrayMask:r,grayCoverArtWhenPaused:l}))}function Y1(e){let t=(0,$.d4)(e=>e.music.music),n=YD((null==t?void 0:t.selectedSongID)||""),a=YR(),r=n&&n.album_art;return(0,ae.p8)("showUi")?Q.createElement("div",{className:ea()("turntable--spinningAlbum--N7jwa",{"turntable--spinningAlbumXSmall--vzhVj":"xsmall"===e.size,"turntable--spinningAlbumSmall--d-AJf":"small"===e.size,"turntable--spinningAlbumLarge--SWUZ2":"large"===e.size})},r&&Q.createElement("img",{className:ea()("turntable--spinningAlbumImage--H-qwO",{"turntable--spinningAlbumPlaying--UDk-I":(null==t?void 0:t.isPaused)===!1,[Yq]:e.grayCoverArtWhenPaused&&!a}),src:n.album_art,alt:"spinning album art"}),Q.createElement("div",{ref:e.maskRef,className:ea()("turntable--spinningAlbumImageMask--PZ7Cr turntable--spinningAlbumImage--H-qwO",{"turntable--noOpacity--ZKZnl":!e.showMask,[Yq]:e.useGrayMask})},Q.createElement(eM.B,{className:"turntable--maskIcon--mZo9b",svg:YJ.A}))):null}var Y2=n(353166);function Y5(){let e=(0,wu.nF)(!0),t=!(0,Y2.N)()&&e.enabled,n=(0,$.d4)(e=>e.userFlags.dismissed_figjam_music_volume_hint),a=(0,$.d4)(e=>{var t,n;return(null==(t=e.music.music)?void 0:t.selectedSongID)&&(null==(n=e.music.music)?void 0:n.selectedSongID)!==""}),r=(0,$.d4)(e=>{var t,n;return(null==(t=e.music.music)?void 0:t.isPaused)===!1&&(null==(n=e.music.music)?void 0:n.isStopped)===!1}),l=(0,$.wA)();return t||n||!r||!a?null:Q.createElement("div",{className:ea()("volume_hint--hintContainer--A9gj2",eK.Dm),"data-testid":"volume-hint"},Q.createElement("div",null,Q.createElement(eO.Tx,{id:"whiteboard.timer.music_volume_hint_prompt_cta_v2",promptQuestion:Q.createElement("span",{className:"volume_hint--bold--vS77N"},(0,eO.t)("whiteboard.timer.music_volume_hint_prompt_question"))})),Q.createElement(aO.Jn,{className:"volume_hint--hintCloseButton--Rubtd",onClick:()=>{l(tB.b({dismissed_figjam_music_volume_hint:!0}))}}))}var Y4=n(421757);let Y3="buttons--secondaryButton--Y7X0E",Y6="buttons--withHover--csWRq",Y7="buttons--primaryButton--cOfBR",Y8="buttons--flexGrow--Qu8-s";function Y9(e){let{flexGrow:t,...n}=e,a=(0,Ba.$3)();return(0,zK.Rt)()?Q.createElement("div",{className:ea()(Y3,{[Y8]:e.flexGrow}),...n},Q.createElement(Y4.IK,{...n,variant:"secondary"},e.children)):Q.createElement(nc.nR,{className:ea()(Y3,{[Y8]:e.flexGrow,[Y6]:!a}),...n},e.children)}function Ze(e){let{flexGrow:t,...n}=e,a=(0,Ba.$3)();return(0,zK.Rt)()?Q.createElement("div",{className:ea()(Y7,{[Y8]:e.flexGrow}),...n},Q.createElement(Y4.IK,{...n,variant:"primary"},e.children)):Q.createElement(nc.$$,{className:ea()(Y7,{[Y8]:e.flexGrow,[Y6]:!a}),...n},e.children)}function Zt(e){let{titleText:t,bodyText:n,cancelButtonText:a,confirmButtonText:r,onCancel:l,onConfirm:i,onCancelDisabled:o,onConfirmDisabled:s,recordingKey:c}=e;return Q.createElement("div",{className:"meeting_tool_cancel_view--cancelViewContainer--W8dpk"},Q.createElement("div",{className:"meeting_tool_cancel_view--headerTitleV2--KRaEU text--fontPos14--OL9Hp text--_fontBase--QdLsd"},t),Q.createElement("div",{className:"meeting_tool_cancel_view--descriptionSectionV2--fAYp- text--fontPos11--2LvXf text--_fontBase--QdLsd"},n),Q.createElement("div",{className:tw.cx.flex.gap10.$},Q.createElement(Y9,{flexGrow:!0,onClick:l,disabled:o,recordingKey:nh.Pt(c,"cancel")},a),Q.createElement(Ze,{flexGrow:!0,onClick:i,disabled:s,recordingKey:nh.Pt(c,"confirm")},r)))}var Zn=n(921211);function Za(e){return Q.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},Q.createElement("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M7.5 7h2a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1-.5-.5v-9a.5.5 0 0 1 .5-.5ZM6 7.5A1.5 1.5 0 0 1 7.5 6h2A1.5 1.5 0 0 1 11 7.5v9A1.5 1.5 0 0 1 9.5 18h-2A1.5 1.5 0 0 1 6 16.5v-9Zm8.5-.5h2a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1-.5-.5v-9a.5.5 0 0 1 .5-.5Zm-1.5.5A1.5 1.5 0 0 1 14.5 6h2A1.5 1.5 0 0 1 18 7.5v9a1.5 1.5 0 0 1-1.5 1.5h-2a1.5 1.5 0 0 1-1.5-1.5v-9Z",clipRule:"evenodd"}))}function Zr(e){return Q.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},Q.createElement("rect",{width:"11",height:"11",x:"6.5",y:"6.5",stroke:"var(--color-icon)",rx:"1"}))}let Zl="playback_control_button--mediaControlButton--Wp3H1",Zi="playback_control_button--withHover--9DG-T";var Zo=n(814239),Zs=n(351731),Zc=n(674321),Zd=((F=Zd||{}).PLAY="play",F.PAUSE="pause",F.STOP="stop",F);function Zu(e){let t=(0,Ba.$3)(),{buttonState:n,onClick:a,disabled:r,dataTooltip:l,dataOnboardingKey:i}=e;switch(n){case"play":return Q.createElement("button",{className:ea()("playback_control_button--playButton--a1I8c playback_control_button--mediaControlButton--Wp3H1",{[Zi]:!t}),"data-tooltip-type":nO.Ib.TEXT,"data-tooltip":l,"data-onboarding-key":i,disabled:r,onClick:a},Q.createElement(nd.U,{svg:Zs.A},Q.createElement(Zn.K,null)));case"pause":return Q.createElement("button",{className:ea()(Zl,{[Zi]:!t}),"data-tooltip-type":nO.Ib.TEXT,"data-tooltip":l,"data-onboarding-key":i,disabled:r,onClick:a},Q.createElement(nd.U,{svg:Zo.A},Q.createElement(Za,null)));case"stop":return Q.createElement("button",{className:ea()(Zl,{[Zi]:!t}),"data-tooltip-type":nO.Ib.TEXT,"data-tooltip":l,disabled:r,onClick:a,"data-onboarding-key":i},Q.createElement(nd.U,{svg:Zc.A},Q.createElement(Zr,null)))}}function Zm(){let[e,t]=Q.useState(!1),n=(0,$.d4)(e=>e.music.music),a=(0,$.d4)(e=>e.music.playerInstance),r=(null==n?void 0:n.selectedSongID)||"",l=YD(r),i=null==l?void 0:l.start_at_ms,o=(0,$.d4)(e=>e.multiplayer.allUsers.length),[s,c]=Q.useState(!1),d=(0,$.d4)(e=>e.music.activeSongs,YM.b2),u=YR(),m=(0,$.wA)();Q.useEffect(()=>{d.length&&c(!1)},[d.length]);let p=(0,eT.F)((0,$.d4)(e=>e)),_=Q.useCallback(()=>{r&&(0,YB.xf)(p.current,r),m(F9.mF({musicStartTimeMs:i}))},[m,i,r,p]),f=Q.useCallback(()=>{r&&(0,YB.fx)(p.current,r),m(F9.g_())},[m,r,p]),h=Q.useCallback(()=>{_()},[_]),g=Q.useCallback(()=>{let e=(null==a?void 0:a.lastPlayedTimestamp)?a.lastPlayedTimestamp:0;(0,YM.nz)(e,o)?t(!0):f()},[f,a,o]),E=Q.useCallback(()=>_(),[_]);return e?Q.createElement(Zt,{titleText:(0,eO.t)("whiteboard.music.stop_music_confirmation_prompt"),bodyText:(0,eO.t)("whiteboard.music.stop_music_confirmation_subtext"),cancelButtonText:(0,eO.t)("whiteboard.music.stop_music_cancel_button"),confirmButtonText:(0,eO.t)("whiteboard.timer.stop_timer_confirmation_button"),onCancel:()=>t(!1),onConfirm:()=>{t(!1),f()}}):Q.createElement(Q.Fragment,null,Q.createElement("div",{id:"musicModal",className:"music_view--musicView--XegVa","data-testid":"music-modal"},Q.createElement(YQ,{handlePause:f,handleTonearmResume:h,size:"large",grayCoverArtWhenPaused:!0,withoutBorder:!0}),Q.createElement("div",{className:"music_view--controlContainer--GYIKD"},Q.createElement("div",{className:"music_view--selectSongContainer--qoUiA"},Q.createElement(YV,{selectedSong:l,activeSongs:d,isLoading:s,withBorder:!0,withHeavyFont:!0})),Q.createElement(Zu,{buttonState:u?Zd.STOP:Zd.PLAY,onClick:u?g:E,dataTooltip:u?(0,eO.t)("whiteboard.music.end_music_tooltip"):(0,eO.t)("whiteboard.music.play_music_tooltip")}))),Q.createElement(Y5,null))}var Zp=n(951861),Z_=n(268278),Zf=n(345840);let Zh=null,Zg=null,ZE=null,Zv=()=>(0,$.d4)(e=>e.music.playerInstance),Zy=()=>1e3;function Zb(){var e;let[t,n]=Q.useState({}),a=(0,$.d4)(e=>e.timer);Q.useEffect(()=>{var e;if(!a||!a.time||(null==(e=null==a?void 0:a.time)?void 0:e.isPaused))return;let t=setTimeout(()=>n({}),Zy());return()=>{clearTimeout(t)}},[t,a,null==(e=a.time)?void 0:e.isPaused])}function ZC(){let e=(0,$.d4)(e=>e.timer),t=(0,$.d4)(e=>(0,wY.d1)(e)),n=(0,$.d4)(e=>t?(0,uP.L8)(t,e.repos):null),a=Math.ceil((0,Bn.P$)(e.time)/1e3);a>0?(0,F9.rF)(t,n,a):(0,F9.rF)(t,n)}let Zw=()=>{ZE&&ZE.pause(),Zh&&Zh.pause(),Zg&&Zg.pause(),Zh=new Audio(Zk),Zg=new Audio(ZN),ZE=new Audio(Zx)},ZT=(e,t,n,a,r,l)=>{var i,o;if(!n.current||!e)return;let s=(0,Bn.P$)(n.current.time);if("add-minutes"===e.lastAction.type){if(Zh&&Zh.pause(),null==(i=l.current)||i.resetFades(),null==(o=l.current)||o.fadeIn({}),!n.current.time||0===n.current.time.totalTimeMs)return;let a=6e4*e.lastAction.minutes;n.current.time&&s+a<Bn.y0&&t(F9.VV({timer:n.current.time,deltaMs:a}))}"start-timer"===e.lastAction.type&&((0,ew.DN)().set("last-timer-set-time",e.lastUsedTime),t(F9.Qv({totalTimeMs:1e3*e.lastUsedTime,musicStartTimeMs:n.current.musicStartTimeMs})),ZE&&a.current&&!r.current&&e.lastUsedTime>5&&(0,Bn.PF)(ZE,a.current)),"pause-timer"===e.lastAction.type&&t(F9._1(n.current.time)),"resume-timer"===e.lastAction.type&&t(F9.ne(n.current.time)),"stop-timer"===e.lastAction.type&&(Zw(),t(F9.Vk()))},Zx="https://static.figma.com/uploads/304a1a341a619feb4af7d377c75dd325534e1734",ZN="https://static.figma.com/uploads/f45e11344ee4f618173695e2405a9a988affc910",Zk="https://static.figma.com/uploads/54a944bea3fce3ca45c91429993683685bec5782",ZS=()=>{Q.useEffect(()=>{null===ZE&&(ZE=new Audio(Zx)),null===Zg&&(Zg=new Audio(ZN)),null===Zh&&(Zh=new Audio(Zk))},[])},ZI=e=>{let t=(0,eT.F)(e),n=(0,$.wA)(),a=(0,$.d4)(e=>e.timer),r=(0,eT.F)(a),l=(0,eT.F)((0,$.d4)(e=>e.timer.volume)),i=(0,eT.F)((0,$.d4)(e=>e.timer.isMuted)),o=(0,eT.F)(Zv());Q.useEffect(()=>{ZT(e,n,r,l,i,o)},[t,n,i,o,r,e,l])},ZA=()=>{let e=(0,$.wA)(),t=(0,eT.F)((0,$.d4)(e=>e.timer.volume)),n=(0,eT.F)((0,$.d4)(e=>e.timer.setBy)),a=(0,eT.F)((0,at.iZ)()),r=(0,eT.F)((0,$.d4)(e=>e.timer.isMuted)),l=(0,eT.F)(Zv()),i=(0,$.d4)(e=>e.music.music);return{callbackToRunAtFiveSecondsLeft:Q.useCallback((n,a)=>{n.current&&(null==Zh?void 0:Zh.paused)&&!r.current&&(l.current&&l.current.fadeOut({fadeOutLength:5e3,shouldStopWhenFadedOut:!0,targetVolumeMultiplier:0}),(0,Bn.PF)(Zh,t.current)),a.current||e(F9.lu({state:"open",userInitiated:!1}))},[e,r,l,t]),callbackToRunWhenTimerFinishes:Q.useCallback((n,a)=>{Zh&&Zh.pause(),n.current&&Zg&&!r.current&&(0,Bn.PF)(Zg,t.current),rn.d1.timerChange("timerdone"),a.current||e(F9.lu({state:"open",userInitiated:!1}))},[e,r,t]),callbackToRunAfterAnimationFinishes:Q.useCallback(t=>{var r,o;if(i&&e(F9.c$(i)),"visible"===document.visibilityState)e(F9.Vk()),t({type:"reset-state"}),n.current!==(null==(r=a.current)?void 0:r.name)&&e(F9.lu({state:"closed",userInitiated:!1}));else{let t=()=>{e(F9.lu({state:"open",userInitiated:!1})),window.removeEventListener("focus",t)};window.addEventListener("focus",t)}Zw(),null==(o=l.current)||o.resetFades()},[a,e,i,n,l])}},ZP=e=>{let t=(0,$.wA)(),n=(0,$.d4)(e=>e.timer.time),a=(0,eT.F)((0,$.d4)(e=>e.timer.audioEnabled)),r=(0,eT.F)((0,$.d4)(e=>e.timer&&"open"===e.timer.modalState)),l=(0,eT.F)((0,$.d4)(e=>e.timer.volume)),i=(0,eT.F)(Zv()),o=(0,$.d4)(e=>e.timer.isMuted),s=!n||n.isPaused,c=(0,$.d4)(e=>{var t;return null==(t=e.music.music)?void 0:t.isPaused}),{callbackToRunAtFiveSecondsLeft:d,callbackToRunWhenTimerFinishes:u,callbackToRunAfterAnimationFinishes:m}=ZA();Q.useEffect(()=>{var t,p,_;if(s){Zh&&Zh.pause(),!1===c&&(null==(t=i.current)||t.fadeIn({fadeInLength:1e3}));return}let f=(0,Bn.P$)(n);f<5e3&&a.current&&(null==Zh?void 0:Zh.paused)&&!o&&(0,Bn.PF)(Zh,l.current),Zh&&(Zh.muted=o),f>5e3&&Zh&&(Zh.pause(),null==(p=i.current)||p.resetFades(),null==(_=i.current)||_.fadeIn({}));let h=[];return f>5e3&&h.push(window.setTimeout(()=>d(a,r),f-5e3)),h.push(window.setTimeout(()=>u(a,r),f)),h.push(window.setTimeout(()=>m(e),f+Bn.cu)),()=>{h.forEach(clearTimeout)}},[n,s,t,e,u,m,d,r,l,a,i,o,c])},ZO=(e,t)=>{Q.useEffect(()=>{e.length>0&&e.forEach(e=>{e&&(e.volume=t/100)})},[e,t])},ZL=e=>{let t=(0,t_.q5)(),n=(0,$.d4)(e=>e.multiplayer.allUsers.length),a=Q.useRef(n);return a.current=n,Q.useCallback(()=>{(0,eo.kc)().workspace_activity_write&&t&&t.team&&t.team.workspaceId&&Zf.i.recordActivity({activityUnitType:Z_.qj.FILE_COLLABORATION,fileKey:t.key,collaborationType:Z_.Uz.TIMER_STARTED,numPeopleInFile:a.current}),e({type:"start-timer"})},[e,t,a])};function ZM(){let[e,t]=(0,ef.fp)(Zp.$),n=(0,$.d4)(e=>e.timer.volume),a=(0,eT.F)((0,$.d4)(e=>e.timer.volume)),r=(0,eT.F)((0,$.d4)(e=>e.timer.isMuted)),l=Q.useRef(e.lastUsedTime),i=ZL(t);return[e,Q.useMemo(()=>({setMinutes:e=>t({type:"set-minutes",minutes:e}),setSeconds:e=>t({type:"set-seconds",seconds:e}),setTime:(e,n)=>t({type:"set-time",minutes:e,seconds:n}),addMinutes:e=>t({type:"add-minutes",minutes:e}),startTimer:i,stopTimer:()=>t({type:"stop-timer"}),pauseTimer:()=>t({type:"pause-timer"}),resumeTimer:()=>t({type:"resume-timer"}),playStartChime:()=>{ZE&&a.current&&!r.current&&l.current>5&&(0,Bn.PF)(ZE,n)}}),[a,r,n,t,i])]}let ZD="time_display--xsmall--RksCd",ZR="time_display--medium--bxQbL",ZF="time_display--large--nQrfq",ZB="time_display--xlarge--HRGrX",ZU="time_display--clockStyleWrapper--TN05b",ZH="time_display--timeDiv--Y0hTB";var ZV=((B=ZV||{}).XSMALL="xsmall",B.MEDIUM="medium",B.LARGE="large",B.XLARGE="xlarge",B),ZG=((U=ZG||{}).DEFAULT="DEFAULT",U.SECONDARY="SECONDARY",U.TERTIARY="TERTIARY",U);let ZK=({minutesRef:e,disabled:t})=>{Q.useLayoutEffect(()=>{var n,a;t||(null==(n=e.current)||n.focus(),null==(a=e.current)||a.select())},[t,e])};function ZW({timerActions:e,timerState:t,isStopped:n,withoutUnderline:a,withoutClockDisplay:r,isInUI3Toolbar:l,size:i="medium"}){let o=function(e,t){let{setMinutes:n,setSeconds:a,startTimer:r,setTime:l,addMinutes:i}=e,o=Q.useRef(null),s=Q.useRef(null),c=(0,$.wA)(),d=Q.useCallback(e=>{var t;if(!e.currentTarget.value.match(/^[0-9]?[0-9]?$/)){e.preventDefault();return}n(e.currentTarget.value),e.currentTarget.value.length>1&&(null==(t=s.current)||t.select())},[s,n]),u=Q.useCallback(e=>{var t;if("ArrowUp"===e.key||"ArrowDown"===e.key){if(isNaN(parseInt(e.currentTarget.value)))return;i(("ArrowUp"===e.key?1:-1)*(e.shiftKey?5:1)),setTimeout(()=>{var e;return null==(e=o.current)?void 0:e.select()},0),e.preventDefault()}else if("ArrowRight"===e.key&&o.current){if(o.current.selectionStart===o.current.value.length&&s.current){s.current.select(),e.preventDefault();return}}else if("Enter"===e.key)r();else if("Escape"===e.key){c(F9.lu({state:"closed",userInitiated:!0,source:"keyboard"}));return}else if(":"===e.key){null==(t=s.current)||t.select(),e.preventDefault();return}else(0,pf.jr)(e)},[i,c,r]),m=Q.useCallback(()=>{if(!o.current)return;let e=o.current.value;0===e.length?n("00"):e.length<2?n(`0${e}`):n(e)},[o,n]),p=Q.useCallback(()=>{var e;null==(e=o.current)||e.select()},[o]),_=Q.useCallback(e=>{if(!e.currentTarget.value.match(/^[0-9]?[0-9]?$/)){e.preventDefault();return}let n=parseInt(e.currentTarget.value);n>59&&"99"!==t.minutes?(n-=60,l((0,Bn.YI)(parseInt(t.minutes)+1),(0,Bn.YI)(n))):n>59?a((0,Bn.YI)(59)):(n<60||isNaN(n))&&a(e.currentTarget.value)},[a,l,t.minutes]);return{handleMinutesChange:d,handleMinutesKeyDown:u,handleMinutesBlur:m,handleMinutesFocus:p,handleSecondsChange:_,handleSecondsKeyDown:Q.useCallback(e=>{var i,d;let u;if("ArrowLeft"===e.key&&s.current){if(0===s.current.selectionEnd&&o.current){o.current.select(),e.preventDefault();return}}else if("Enter"===e.key){""!==t.minutes&&""!==t.seconds&&parseInt(t.minutes)+parseInt(t.seconds)!==0&&r();return}else if("Escape"===e.key){c(F9.lu({state:"closed",userInitiated:!0,source:"keyboard"}));return}else if((null==(i=s.current)?void 0:i.value)===""&&"Backspace"===e.key&&(null==(d=o.current)?void 0:d.value)){n(o.current.value.substring(0,o.current.value.length-1)||"0"),o.current.focus(),e.preventDefault();return}if((0,pf.jr)(e)||"ArrowUp"!==e.key&&"ArrowDown"!==e.key)return;let m=parseInt(t.seconds);if(!isNaN(m)){if("ArrowUp"===e.key){if((m+=e.shiftKey?5:1)>59&&"99"===t.minutes)return;m>=60&&(m-=60,u=1)}else if("ArrowDown"===e.key&&(m-=e.shiftKey?5:1)<0){if(0===parseInt(t.minutes))return;u=-1,m+=60}setTimeout(()=>{var e;return null==(e=s.current)?void 0:e.select()},0),e.preventDefault(),u?l((0,Bn.YI)(parseInt(t.minutes)+u),(0,Bn.YI)(m)):a((0,Bn.YI)(m))}},[c,o,s,n,a,l,r,t.minutes,t.seconds]),handleSecondsBlur:Q.useCallback(()=>{a((0,Bn.YI)(parseInt(t.seconds||"00")))},[a,t.seconds]),handleSecondsFocus:Q.useCallback(()=>{var e;null==(e=s.current)||e.select()},[s]),secondsRef:s,minutesRef:o}}(e,t);return ZK({minutesRef:o.minutesRef,disabled:ec.Ay.isMeetDevice}),Q.createElement(Q.Fragment,null,n?Q.createElement(ZY,{timerState:t,timerEventHandlers:o,withoutUnderline:a,withoutClockDisplay:r,size:i}):Q.createElement(Zz,{withoutUnderline:a,withoutClockDisplay:r,size:i,isInUI3Toolbar:l}))}function Zz(e){let{withoutUnderline:t,withoutClockDisplay:n,withoutTimeShadow:a,withoutFlashOnPause:r,size:l,isSelected:i,prominence:o,timeDivRef:s,isInUI3Toolbar:c}=e,d=(0,ef.md)(Zp.jo),u=(0,ef.md)(Zp.Ld);return Q.createElement(Zj,{timeInSeconds:u,withoutUnderline:t,withoutClockDisplay:n,withoutTimeShadow:a,flashing:(0,Bn.CM)(d.time)&&!r,size:l,isSelected:i,prominence:o,timeDivRef:s,isInUI3Toolbar:c})}function Zj(e){let{timeInSeconds:t,withoutUnderline:n,withoutClockDisplay:a,withoutTimeShadow:r,flashing:l,size:i,isSelected:o,prominence:s,timeDivRef:c,isInUI3Toolbar:d}=e,{seconds:u,minutes:m}=(0,xM._d)(t);return Q.createElement("div",{className:ea()({[ZU]:!a})},Q.createElement("div",{ref:c,className:ea()(ZH,{[ZD]:"xsmall"===i,[ZR]:"medium"===i,[ZF]:"large"===i,[ZB]:"xlarge"===i,"time_display--selected--Idl4y":o,"time_display--secondary--r44Yf":"SECONDARY"===s,"time_display--tertiary--oyx7n":"TERTIARY"===s,"time_display--inUI3Toolbar--SFjvm":d})},!a&&!r&&Q.createElement(ZZ,{size:i,withoutUnderline:n}),Q.createElement("div",{className:ea()("time_display--timeDisplay--MuaRS",{"time_display--flashing--1Hw1m":l,[ZD]:"xsmall"===i,[ZR]:"medium"===i,[ZF]:"large"===i,[ZB]:"xlarge"===i})},Q.createElement(ZX,{isMinute:!0,size:i,value:(0,Bn.YI)(m),displayOnly:!0}),":",Q.createElement(ZX,{size:i,value:(0,Bn.YI)(u),displayOnly:!0}))))}function ZY({timerState:e,timerEventHandlers:t,withoutUnderline:n,withoutClockDisplay:a,size:r}){let{handleMinutesChange:l,handleMinutesKeyDown:i,handleMinutesBlur:o,handleMinutesFocus:s,handleSecondsChange:c,handleSecondsKeyDown:d,handleSecondsBlur:u,handleSecondsFocus:m,secondsRef:p,minutesRef:_}=t;return Q.createElement(Q.Fragment,null,Q.createElement("div",{className:ea()({[ZU]:!a})},Q.createElement("div",{className:ea()(ZH,{[ZR]:"medium"===r,[ZF]:"large"===r,[ZB]:"xlarge"===r})},Q.createElement(ZZ,{size:r,withoutUnderline:n}),Q.createElement("div",null,Q.createElement(ZX,{ref:_,onFocus:s,onChange:l,onKeyDown:i,onBlur:o,value:e.minutes,size:r,isMinute:!0}),":",Q.createElement(ZX,{ref:p,onChange:c,onFocus:m,onKeyDown:d,onBlur:u,value:e.seconds,size:r})))))}function ZZ(e){return Q.createElement("div",{className:ea()("time_display--timeShadow--dyosl",{[ZD]:"xsmall"===e.size,[ZR]:"medium"===e.size,[ZF]:"large"===e.size,[ZB]:"xlarge"===e.size})},Q.createElement(ZX,{isMinute:!0,size:e.size,value:88,displayOnly:!0}),":",Q.createElement(ZX,{size:e.size,value:88,displayOnly:!0}),!e.withoutUnderline&&Q.createElement("div",{className:"time_display--timeInputUnderline--4Gxkr"}))}let ZX=Q.forwardRef((e,t)=>{let{size:n,isMinute:a,onFocus:r,onChange:l,onKeyDown:i,onBlur:o,value:s,displayOnly:c}=e,d=ea()("time_display--timeInput--4Evh3",{"time_display--minute--Q8e3H":a,[ZD]:"xsmall"===n,[ZR]:"medium"===n,[ZF]:"large"===n,[ZB]:"xlarge"===n});return c?Q.createElement("span",{className:d,"data-testid":"stopped-time"},s):Q.createElement("input",{maxLength:2,type:"text",inputMode:"numeric",ref:t,onFocus:r,onChange:l,onKeyDown:i,onBlur:o,className:d,value:s,"aria-label":a?(0,eO.t)("whiteboard.timer.minutes.aria_label"):(0,eO.t)("whiteboard.timer.seconds.aria_label")})});ZX.displayName="TwoDigitTimeInput";var Zq=n(890297);function ZJ(){Zb(),ZC();let[e,t]=ZM(),{startTimer:n,stopTimer:a,addMinutes:r,pauseTimer:l,resumeTimer:i}=t,o=(0,ef.md)(Zp.jo),s=(0,$.d4)(e=>e.multiplayer.allUsers.length),[c,d]=Q.useState(!1),u=o.time,m=(0,Bn.RE)(e),p=(0,Bn.G8)(u),_=(0,Bn.CM)(u),f=(0,Bn.IQ)(u),h=(0,Bn.$V)(u,e)&&!f;Q.useEffect(()=>{f&&d(!1)},[f]);let g=Q.useCallback(()=>{l()},[l]),E=Q.useCallback(()=>{n()},[n]),v=Q.useCallback(()=>{i()},[i]),y=Q.useCallback(()=>{a()},[a]);if(c&&!f)return Q.createElement(Zt,{titleText:(0,eO.t)("whiteboard.timer.end_timer_confirmation_new"),bodyText:(0,eO.t)("whiteboard.timer.end_timer_confirmation_subtext_new"),cancelButtonText:(0,eO.t)("whiteboard.timer.end_timer_go_back_new"),confirmButtonText:(0,eO.t)("whiteboard.timer.end_timer_button_new"),onCancel:()=>d(!1),onConfirm:()=>{d(!1),y()}});let b=p?(0,eO.t)("whiteboard.timer.start_timer_tooltip"):(null==u?void 0:u.isPaused)?(0,eO.t)("whiteboard.timer.resume_timer_tooltip"):(0,eO.t)("whiteboard.timer.pause_timer_tooltip"),C=p&&m<=0,w=(null==u?void 0:u.isPaused)||p;return Q.createElement("div",{className:"timer_view--timerContainer--kRcU1","data-testid":"timer-modal"},Q.createElement("div",{className:tw.cx.flex.flexColumn.p16.gap12.$},Q.createElement("div",{className:"timer_view--timerBackground--NUQ4g"},Q.createElement(ZW,{timerActions:t,timerState:e,isStopped:p,size:ZV.XLARGE,withoutUnderline:!0,isInUI3Toolbar:!1})),Q.createElement("div",{className:tw.cx.flex.justifyBetween.itemsCenter.$},Q.createElement(Y9,{onClick:e=>{r(Bn.AC),e.preventDefault()},disabled:!h},Q.createElement("div",{className:"timer_view--addTimeButton--tKy9r"},Q.createElement(nd.U,{className:ea()("timer_view--plusIcon--NOOSc",{"timer_view--disabled--iHZ7I":!h}),svg:Zq.A},Q.createElement(gi.x,null)),Q.createElement(eO.Tx,{id:"whiteboard.timer.min",timeIncrement:Bn.AC}))),Q.createElement("div",{className:tw.cx.flex.gap12.$},!p&&Q.createElement(Zu,{buttonState:Zd.STOP,onClick:()=>{u&&((0,Bn.fQ)(u,s)?d(!0):y())},dataTooltip:(0,eO.t)("whiteboard.timer.end_timer_tooltip"),disabled:p||f}),Q.createElement(Zu,{buttonState:w?Zd.PLAY:Zd.PAUSE,onClick:w?()=>{_?v():E()}:g,dataTooltip:b,disabled:w?C:f,dataOnboardingKey:Bn.Hm})))))}function ZQ({onCancel:e}){let t=(0,LA.C3)(),n=(0,$.wA)(),a=(0,t_.tS)(),r=(0,m_.oh)(wc.wQ(a||"")),l=Q.useCallback(()=>{n(wc.PK({uiSurface:"MeetingsPanel"})),(0,er.sx)("confirm_end_voting_session",{source:"voting_modal",votingSessionId:null==t?void 0:t.id,fileKey:a})},[n,t,a]),i=Q.useCallback(()=>{e(),(0,er.sx)("cancel_end_voting_session",{source:"voting_modal",votingSessionId:null==t?void 0:t.id,fileKey:a})},[e,t,a]);return Q.createElement(Zt,{titleText:(0,eO.t)("voting.modal.end_voting_session_modal_header"),bodyText:(0,eO.t)("voting.modal.end_voting_session_modal_description"),cancelButtonText:(0,eO.t)("meetings_panel.voting.go_back"),confirmButtonText:(0,eO.t)("voting.modal.end_voting_session_modal_confirm_button"),onCancel:i,onConfirm:l,onCancelDisabled:r||!t,onConfirmDisabled:r||!t,recordingKey:"endVotingModal"})}var Z$=n(204343);let Z0="face_pile--facePileAvatarPositioner--pWI9a",Z1="face_pile--active--5AAUF";var Z2=n(95779);function Z5({userId:e,isActive:t}){let{user:n,loading:a}=(0,No.wW)(e),r=(0,zK.Rt)();return Q.createElement(Z$.v,{userId:e,size:r?16:24,user:n,loading:a,defaultClassName:ea()("face_pile--facePileAvatar--pZDZe",t&&Z1),loadingClassName:ea()("face_pile--facePileAvatarLoading--uhhTa face_pile--facePileAvatar--pZDZe",t&&Z1)})}function Z4({overflowUserIds:e,isActive:t}){return Q.createElement(Q.Fragment,null,Q.createElement("div",{className:Z0},Q.createElement("div",{className:ea()({"face_pile--facePileOverflowIcon--qL11N":!0,[Z1]:t})},Q.createElement(eM.B,{className:"face_pile--overflowIcon--q-7wp",svg:Z2.A}))))}function Z3({userIds:e,maxHeadsBeforeOverflow:t,isActive:n}){let a=e.length>t,r=a?e.slice(0,t-1):e,l=a?e.slice(t-1):[];return Q.createElement("div",{className:"face_pile--facePileContainer--DzqrO"},l.length?Q.createElement(Z4,{overflowUserIds:l,isActive:n}):null,[...r].reverse().map(e=>Q.createElement("div",{className:Z0,key:e},Q.createElement(Z5,{userId:e,isActive:n}))))}function Z6({userId:e}){let{user:t,loading:n}=(0,No.wW)(e);return Q.createElement(Q.Fragment,null,Q.createElement(Z$.v,{userId:e,user:t,loading:n,size:24,loadingClassName:"voting_user_overflow_dropdown--loadingAvatar---1jYn"}),Q.createElement(Z$.m,{userId:e,user:t,loading:n,defaultClassName:"voting_user_overflow_dropdown--userName--huz8P text--fontNeg13--7Ebf5 text--_fontBase--QdLsd text--_negText--j9g-L ellipsis--ellipsis--Tjyfa",loadingClassName:"voting_user_overflow_dropdown--loadingUserName--pC-X-"}))}let Z7=e=>{let{windowInnerHeight:t}=(0,bF.l)(),n=(0,Nd.Yk)();return t-(e.y+e.height)-n-22};function Z8({userIds:e,targetRect:t}){let n=Z7(t),a=(0,zK.Rt)(),r=0===e.length;return Q.createElement(ho.Cf,{className:"voting_user_overflow_dropdown--pointingDropdown--equm6",targetRect:t,lean:"center",disableDropdownScrollContainer:!0,propagateCloseClick:!0},Q.createElement(ab.P,{maxHeight:n,width:a?192:240},Q.createElement("ol",{className:"voting_user_overflow_dropdown--dropdownPadding---VKEq"},r?Q.createElement("div",{className:"voting_user_overflow_dropdown--noVotesText--T2dVF text--fontNeg13--7Ebf5 text--_fontBase--QdLsd text--_negText--j9g-L"},Q.createElement(eO.Tx,{id:"voting.modal.during_voting_no_votes_dropdown"})):e.map(e=>Q.createElement("li",{key:e,className:"voting_user_overflow_dropdown--listItem--d7eTA"},Q.createElement(Z6,{userId:e}))))))}let Z9="users_voted--rootSelected--y6VPJ";function Xe({votingSessionInfo:e}){return(0,Q.useMemo)(()=>e.votedNodes.reduce((e,t)=>(Object.entries(t.userIdToNodeVotes).forEach(([t,n])=>{e[t]=(e[t]||0)+n.length}),e),{}),[e.votedNodes])}let Xt=e=>{let t=(0,$.wA)();return{isDropdownOpen:(0,$.d4)(e=>{var t;return(null==(t=e.dropdownShown)?void 0:t.type)===Xa}),handleTargetClick:()=>{t(lZ.gR({type:Xa}))}}};function Xn({votingSessionInfo:e,userVoteLimit:t}){let[n,a]=(0,Q.useState)(null),[r,l]=(0,Q.useState)(!1),i=(0,at.TA)(),o=Xe({votingSessionInfo:e}),s=(0,zK.Rt)(),c=(0,Q.useMemo)(()=>Object.entries(o).filter(([e,n])=>n&&n>=t).map(([e])=>e).sort((0,LP.zi)(i)),[o,t,i]),{isDropdownOpen:d,handleTargetClick:u}=Xt(c);return Q.createElement(Q.Fragment,null,Q.createElement("button",{className:ea()({"users_voted--duringSessionRoot--XC-59 users_voted--rootBase--KRjQs text--fontPos12--YsUAh text--_fontBase--QdLsd":!0,[Z9]:d}),onMouseDown:e=>e.stopPropagation(),onMouseEnter:()=>l(!0),onMouseLeave:()=>l(!1),onClick:u,ref:e=>a(e)},s&&Q.createElement(Z3,{userIds:c,maxHeadsBeforeOverflow:4,isActive:r||d}),Q.createElement("p",{className:"users_voted--duringSessionText--glncG"},c.length>0?Q.createElement(eO.Tx,{id:"voting.modal.voted",numVotes:c.length}):Q.createElement(eO.Tx,{id:"voting.modal.during_voting_no_ones_voted"})),!s&&Q.createElement(Z3,{userIds:c,maxHeadsBeforeOverflow:4,isActive:r||d}),Q.createElement(eM.B,{className:ea()({"users_voted--chevronDown--LWnXw":!0,"users_voted--chevronDownActive---IB9j":d}),svg:oQ.A})),d&&n&&Q.createElement(Z8,{targetRect:n.getBoundingClientRect(),userIds:c}))}let Xa="USERS_VOTED_DROPDOWN";function Xr({votingSessionInfo:e}){let[t,n]=(0,Q.useState)(null),a=(0,at.TA)(),r=Xe({votingSessionInfo:e}),l=(0,Q.useMemo)(()=>Object.keys(r).sort((0,LP.zi)(a)),[r,a]),{isDropdownOpen:i,handleTargetClick:o}=Xt(l);return Q.createElement(Q.Fragment,null,Q.createElement("button",{className:ea()({"users_voted--resultsDetailRoot--K2wEg users_voted--rootBase--KRjQs text--fontPos12--YsUAh text--_fontBase--QdLsd":!0,[Z9]:i}),onMouseDown:e=>e.stopPropagation(),onClick:o,ref:e=>n(e)},Q.createElement("p",null,l.length>0?Q.createElement(eO.Tx,{id:"voting.modal.voted",numVotes:l.length}):Q.createElement(eO.Tx,{id:"voting.modal.after_voting_no_one_voted"}))),i&&t&&Q.createElement(Z8,{targetRect:t.getBoundingClientRect(),userIds:l}))}function Xl({title:e,useSmallerText:t}){let[n,a]=(0,Q.useState)(!1),r=(0,Q.useRef)(null);return(0,Q.useEffect)(()=>{let e=r.current;e?a(e.scrollHeight>e.clientHeight):a(!1)},[e,r]),Q.createElement("div",{ref:r,className:ea()("voting_components--votingSessionTitle--KDhQJ text--fontPos14--OL9Hp text--_fontBase--QdLsd ellipsis--ellipsisAfter3Lines--h405C ellipsis--_ellipsisAfterNLines--LzI7k",{"voting_components--smallerText--rtDFU text--fontPos11--2LvXf text--_fontBase--QdLsd":t}),"data-tooltip-type":nO.Ib.TEXT,"data-tooltip":n?e:void 0},e)}function Xi({votingSessionInfo:e,onEndClick:t,recordingKey:n}){let a=(0,LA.C3)(),r=(0,$.d4)(e=>!e.user),l=(0,t_.tS)(),i=(0,zK.Rt)();return a?Q.createElement("div",{className:"joined_vote_view--joinedVoteViewContainer--2w8-v"},Q.createElement("div",{className:"joined_vote_view--votingSessionTitleContainer--Yj49f"},Q.createElement(Xl,{title:(0,LP.DG)(a),useSmallerText:i})),Q.createElement("div",{className:"joined_vote_view--usersVotedContainer--nEFTt"},Q.createElement(Xn,{votingSessionInfo:e,userVoteLimit:a.userVoteLimit})),!ec.Ay.isMeetDevice&&Q.createElement("div",{className:tw.cx.flex.$},Q.createElement(Y9,{flexGrow:!0,onClick:()=>{t(),(0,er.sx)("click_end_voting_session",{source:"voting_modal",votingSessionId:a.id,fileKey:l})},disabled:r,"data-tooltip-type":r?nO.Ib.TEXT:void 0,"data-tooltip":r?(0,eO.t)("voting.modal.end_disabled_logged_out_tooltip"):void 0,recordingKey:nh.Pt(n,"endVotingSession")},Q.createElement("span",null,Q.createElement(eO.Tx,{id:"voting.modal.end_for_all"}))))):null}function Xo({votingSessionInfo:e,recordingKey:t}){let[n,a]=Q.useState(!1),r=Q.useCallback(()=>{a(!1)},[a]),l=Q.useCallback(()=>{a(!0)},[a]);return Q.createElement(Q.Fragment,null,n?Q.createElement(ZQ,{onCancel:r}):Q.createElement(Xi,{votingSessionInfo:e,onEndClick:l,recordingKey:t}))}function Xs(){return Q.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"142",height:"115",viewBox:"0 0 142 115",fill:"none"},Q.createElement("g",{filter:"url(#filter0_d_536_1194)"},Q.createElement("mask",{id:"mask0_536_1194",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:"9",y:"7",width:"112",height:"121"},Q.createElement("path",{d:"M30.3749 27.8343C32.0497 25.2359 34.6296 23.3518 37.6144 22.5472L95.2853 7.00006L120.973 102.285L25.6874 127.973L9.4772 67.8424C8.5589 64.4361 9.1256 60.8001 11.037 57.8348L30.3749 27.8343Z",fill:"white"})),Q.createElement("g",{mask:"url(#mask0_536_1194)"},Q.createElement("path",{d:"M95.2854 7.00012L120.973 102.285L25.6875 127.973L0 32.6875L95.2854 7.00012Z",fill:"#FFD966"}),Q.createElement("g",{filter:"url(#filter1_f_536_1194)"},Q.createElement("rect",{x:"-9.06198",y:"72.871",width:"80.2756",height:"13.9108",transform:"rotate(-57 -9.06198 72.871)",fill:"black",fillOpacity:"0.3"})),Q.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M29.7476 28.8039L10.2326 59.1223C15.1411 51.4964 30.0572 48.6566 30.0572 48.6566C30.0572 48.6566 25.2827 35.7405 29.7476 28.8039Z",fill:"#FFD966"}),Q.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M29.7476 28.8039L10.2326 59.1223C15.1411 51.4964 30.0572 48.6566 30.0572 48.6566C30.0572 48.6566 25.2827 35.7405 29.7476 28.8039Z",fill:"url(#paint0_linear_536_1194)"}))),Q.createElement("defs",null,Q.createElement("filter",{id:"filter0_d_536_1194",x:"-20.5598",y:"-13.5598",width:"162.092",height:"162.092",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},Q.createElement("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),Q.createElement("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),Q.createElement("feOffset",null),Q.createElement("feGaussianBlur",{stdDeviation:"10.2799"}),Q.createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.08 0"}),Q.createElement("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_536_1194"}),Q.createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_536_1194",result:"shape"})),Q.createElement("filter",{id:"filter1_f_536_1194",x:"-35.6799",y:"-21.0717",width:"108.624",height:"128.137",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},Q.createElement("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),Q.createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}),Q.createElement("feGaussianBlur",{stdDeviation:"13.3089",result:"effect1_foregroundBlur_536_1194"})),Q.createElement("linearGradient",{id:"paint0_linear_536_1194",x1:"20.32",y1:"42.4426",x2:"29.6252",y2:"49.517",gradientUnits:"userSpaceOnUse"},Q.createElement("stop",{stopColor:"white",stopOpacity:"0.5"}),Q.createElement("stop",{offset:"0.319642",stopColor:"white",stopOpacity:"0.2"}),Q.createElement("stop",{offset:"1",stopColor:"white",stopOpacity:"0.2"}))))}function Xc(){return Q.createElement("svg",{width:"52",height:"52",viewBox:"0 0 52 52",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Q.createElement("g",{filter:"url(#filter0_d_1904_66844)"},Q.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M18.6975 43.3947V28.2216C17.2146 28.9246 15.5806 29.3745 13.8194 29.4818L9.75977 29.729L9.75977 13.542L13.3208 13.2938C16.2911 13.0869 18.6537 11.8389 19.8608 8.79489L20.819 6.37863H34.6307V43.3947H18.6975ZM18.6975 23.7911C20.2723 22.6622 21.5839 21.1021 22.5245 19.3196V39.5677H30.8037V10.2056H23.4183C21.5367 14.9506 17.6323 16.8297 13.5868 17.1116V25.6618C14.9507 25.5788 16.2382 25.1962 17.4138 24.5825C17.8583 24.3505 18.2869 24.0855 18.6975 23.7911Z",fill:"white"}),Q.createElement("path",{d:"M22.5245 39.5677H30.8037V10.2057H23.4183C21.5367 14.9506 17.6323 16.8297 13.5868 17.1116V25.6618C17.4441 25.427 20.6899 22.7961 22.5245 19.3196V39.5677Z",fill:"#9747FF"}),Q.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.64916 24.2332H9.86288L17 28L20.5 28.0597V39.5527H19.1422V43.3803H7.64916V39.5527L3.82166 39.5527L3.82166 28.0597L7.64916 28.0597V24.2332ZM11.4822 35.7197H7.65466V31.8927L11.4822 31.8927V28.0662H15.3092L15.3092 31.8867M15.3092 31.8927H19.1357ZM15.3092 35.7197H15.3152ZM19.1357 35.7197V31.8927ZM15.3092 35.7257V39.5473ZM11.4822 39.5473H15.3092ZM11.4822 35.7197V39.5473ZM15.3152 35.7197L19.1357 35.7197Z",fill:"white"}),Q.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M15.3092 28.0662H11.4822V31.8927L7.65466 31.8927V35.7197L11.4822 35.7197V39.5473H15.3092V35.7197L19.1357 35.7197V31.8927L15.3092 31.8927V28.0662Z",fill:"#9747FF"}),Q.createElement("path",{d:"M38.9984 23.4121C39.1678 22.8781 39.9234 22.8781 40.0928 23.4121L41.5337 27.9551C41.584 28.1137 41.7006 28.2427 41.8533 28.3086L45.9788 30.0896C46.4408 30.289 46.4408 30.9442 45.9788 31.1437L41.8533 32.9246C41.7006 32.9906 41.584 33.1195 41.5337 33.2781L40.0928 37.8211C39.9234 38.3551 39.1678 38.3551 38.9984 37.8211L37.5575 33.2781C37.5072 33.1195 37.3906 32.9906 37.2378 32.9246L33.1124 31.1437C32.6503 30.9442 32.6503 30.289 33.1124 30.0896L37.2378 28.3086C37.3906 28.2427 37.5072 28.1137 37.5575 27.9551L38.9984 23.4121Z",fill:"#EFBA00"}),Q.createElement("path",{d:"M38.9984 23.4121C39.1678 22.8781 39.9234 22.8781 40.0928 23.4121L41.5337 27.9551C41.584 28.1137 41.7006 28.2427 41.8533 28.3086L45.9788 30.0896C46.4408 30.289 46.4408 30.9442 45.9788 31.1437L41.8533 32.9246C41.7006 32.9906 41.584 33.1195 41.5337 33.2781L40.0928 37.8211C39.9234 38.3551 39.1678 38.3551 38.9984 37.8211L37.5575 33.2781C37.5072 33.1195 37.3906 32.9906 37.2378 32.9246L33.1124 31.1437C32.6503 30.9442 32.6503 30.289 33.1124 30.0896L37.2378 28.3086C37.3906 28.2427 37.5072 28.1137 37.5575 27.9551L38.9984 23.4121Z",fill:"url(#paint0_linear_1904_66844)"}),Q.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M37.3739 28.313C37.4969 28.2595 37.5912 28.1537 37.6324 28.023L39.0624 23.4807C39.1998 23.0443 39.8002 23.0443 39.9376 23.4807L41.3676 28.023C41.4088 28.1537 41.5031 28.2595 41.6261 28.313L45.6529 30.0643C46.0273 30.2272 46.0273 30.7728 45.6529 30.9357L41.6261 32.687C41.5031 32.7405 41.4088 32.8463 41.3676 32.977L39.9376 37.5193C39.8002 37.9557 39.1998 37.9557 39.0624 37.5193L37.6324 32.977C37.5912 32.8463 37.4969 32.7405 37.3739 32.687L33.3471 30.9357C32.9727 30.7728 32.9727 30.2272 33.3471 30.0643L37.3739 28.313ZM42.8548 22.5094L43.9178 25.8859L46.8472 27.1599C49.7176 28.4083 49.7176 32.5917 46.8472 33.8401L43.9178 35.1141L42.8548 38.4906C41.8014 41.8365 37.1986 41.8364 36.1452 38.4906L35.0822 35.1141L32.1528 33.8401C32.1009 33.8175 32.05 33.794 32 33.7696L32 27.2304C32.05 27.206 32.1009 27.1825 32.1528 27.1599L35.0822 25.8859L36.1452 22.5094C37.1986 19.1635 41.8014 19.1636 42.8548 22.5094Z",fill:"white"}),Q.createElement("path",{d:"M38.9985 23.4116C39.1678 22.8776 39.9235 22.8776 40.0929 23.4116L41.5338 27.9546C41.5841 28.1132 41.7007 28.2422 41.8534 28.3081L45.9789 30.0891C46.4409 30.2886 46.4409 30.9437 45.9789 31.1432L41.8534 32.9241C41.7007 32.9901 41.5841 33.1191 41.5338 33.2776L40.0929 37.8206C39.9235 38.3546 39.1678 38.3546 38.9985 37.8206L37.5576 33.2776C37.5073 33.1191 37.3906 32.9901 37.2379 32.9241L33.1125 31.1432C32.6504 30.9437 32.6504 30.2886 33.1125 30.0891L37.2379 28.3081C37.3906 28.2422 37.5073 28.1132 37.5576 27.9546L38.9985 23.4116Z",fill:"url(#paint1_linear_1904_66844)"}),Q.createElement("path",{d:"M38.9985 23.4116C39.1678 22.8776 39.9235 22.8776 40.0929 23.4116L41.5338 27.9546C41.5841 28.1132 41.7007 28.2422 41.8534 28.3081L45.9789 30.0891C46.4409 30.2886 46.4409 30.9437 45.9789 31.1432L41.8534 32.9241C41.7007 32.9901 41.5841 33.1191 41.5338 33.2776L40.0929 37.8206C39.9235 38.3546 39.1678 38.3546 38.9985 37.8206L37.5576 33.2776C37.5073 33.1191 37.3906 32.9901 37.2379 32.9241L33.1125 31.1432C32.6504 30.9437 32.6504 30.2886 33.1125 30.0891L37.2379 28.3081C37.3906 28.2422 37.5073 28.1132 37.5576 27.9546L38.9985 23.4116Z",fill:"url(#paint2_linear_1904_66844)"})),Q.createElement("defs",null,Q.createElement("filter",{id:"filter0_d_1904_66844",x:"-1.91351",y:"-1.27567",width:"54.8539",height:"54.8539",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},Q.createElement("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),Q.createElement("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),Q.createElement("feOffset",{dy:"0.637836"}),Q.createElement("feGaussianBlur",{stdDeviation:"0.956754"}),Q.createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.35 0"}),Q.createElement("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_1904_66844"}),Q.createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_1904_66844",result:"shape"})),Q.createElement("linearGradient",{id:"paint0_linear_1904_66844",x1:"46.6528",y1:"37.3139",x2:"29.2026",y2:"24.1295",gradientUnits:"userSpaceOnUse"},Q.createElement("stop",{stopColor:"white",stopOpacity:"0"}),Q.createElement("stop",{offset:"0.33271",stopColor:"white",stopOpacity:"0.11"}),Q.createElement("stop",{offset:"0.449925",stopColor:"white",stopOpacity:"0.5"}),Q.createElement("stop",{offset:"0.562473",stopColor:"white",stopOpacity:"0.11"}),Q.createElement("stop",{offset:"1",stopColor:"white",stopOpacity:"0"})),Q.createElement("linearGradient",{id:"paint1_linear_1904_66844",x1:"31.8916",y1:"21.6864",x2:"47.5581",y2:"39.2257",gradientUnits:"userSpaceOnUse"},Q.createElement("stop",{stopColor:"#F7C000"}),Q.createElement("stop",{offset:"1",stopColor:"#E8B604"})),Q.createElement("linearGradient",{id:"paint2_linear_1904_66844",x1:"47.1997",y1:"39.5458",x2:"31.5331",y2:"22.0066",gradientUnits:"userSpaceOnUse"},Q.createElement("stop",{stopColor:"white",stopOpacity:"0"}),Q.createElement("stop",{offset:"0.418743",stopColor:"white",stopOpacity:"0.15"}),Q.createElement("stop",{offset:"0.504534",stopColor:"white",stopOpacity:"0.63"}),Q.createElement("stop",{offset:"0.588015",stopColor:"white",stopOpacity:"0.15"}),Q.createElement("stop",{offset:"1",stopColor:"white",stopOpacity:"0"}))))}function Xd(){return Q.createElement("svg",{width:"46",height:"45",viewBox:"0 0 46 45",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Q.createElement("g",{filter:"url(#filter0_d_1904_66832)"},Q.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.6036 25.0556C1.12383 20.6128 1.12383 13.3775 5.6036 8.93478C7.76292 6.7933 10.6465 5.61081 13.6925 5.61081C16.5194 5.61081 19.209 6.62902 21.3102 8.49271C23.4103 6.62969 26.0996 5.60886 28.9298 5.60886C31.9764 5.60886 34.8598 6.79177 37.0207 8.93478C39.1809 11.0772 40.3839 13.9501 40.3839 16.9962C40.3839 20.038 39.1847 22.91 37.0234 25.0548C37.0232 25.055 37.0236 25.0547 37.0234 25.0548C37.0226 25.0556 37.0214 25.0568 37.0207 25.0575L35.3114 26.7566L21.3162 40.6361L5.6036 25.0556ZM21.3102 13.2071L19.4117 11.3243C17.8838 9.80902 15.8532 8.97612 13.6925 8.97612C11.5298 8.97612 9.49924 9.81097 7.97334 11.3243C4.821 14.4506 4.821 19.5398 7.97334 22.6661L21.3161 35.8966L32.9417 24.3671L34.6509 22.6681C36.1788 21.1528 37.0186 19.139 37.0186 16.9962C37.0186 14.8514 36.1768 12.8376 34.6509 11.3243C33.1231 9.80902 31.0925 8.97416 28.9298 8.97416C26.7671 8.97416 24.7365 9.80902 23.2087 11.3243L21.3102 13.2071Z",fill:"white"}),Q.createElement("path",{d:"M7.97332 22.6661C4.82098 19.5398 4.82098 14.4506 7.97332 11.3243C9.49922 9.81098 11.5298 8.97612 13.6925 8.97612C15.8532 8.97612 17.8838 9.80902 19.4116 11.3243L21.3101 13.2071L23.2087 11.3243C24.7365 9.80902 26.7671 8.97417 28.9298 8.97417C31.0924 8.97417 33.123 9.80902 34.6509 11.3243C36.1768 12.8376 37.0186 14.8514 37.0186 16.9962C37.0186 19.139 36.1788 21.1528 34.6509 22.6681L32.9417 24.3671L21.3161 35.8966L7.97332 22.6661Z",fill:"#FF8577"}),Q.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M31.0424 27.6444C30.9973 27.7838 30.8938 27.8968 30.7588 27.9538L26.3392 29.8229C25.9283 29.9966 25.9283 30.579 26.3392 30.7527L30.7588 32.6217C30.8938 32.6788 30.9973 32.7918 31.0424 32.9312L32.6119 37.7787C32.7627 38.2444 33.4216 38.2444 33.5724 37.7787L35.142 32.9312C35.1871 32.7918 35.2906 32.6788 35.4256 32.6217L39.8452 30.7527C40.2561 30.579 40.2561 29.9966 39.8452 29.8229L35.4256 27.9538C35.2906 27.8968 35.1871 27.7838 35.142 27.6444L33.5724 22.7969C33.4216 22.3312 32.7627 22.3312 32.6119 22.7969L31.0424 27.6444ZM37.9408 25.3637L36.7741 21.7603C35.618 18.1897 30.5664 18.1896 29.4103 21.7603L28.2436 25.3637L25.0284 26.7233C21.8781 28.0556 21.8781 32.52 25.0284 33.8523L28.2436 35.2119L29.4103 38.8153C30.5664 42.3859 35.618 42.386 36.7741 38.8153L37.9408 35.2119L41.156 33.8523C44.3062 32.52 44.3062 28.0556 41.156 26.7233L37.9408 25.3637Z",fill:"white"}),Q.createElement("path",{d:"M32.6119 22.7969C32.7627 22.3312 33.4216 22.3312 33.5724 22.7969L35.142 27.6444C35.1871 27.7838 35.2906 27.8968 35.4256 27.9538L39.8452 29.8229C40.2561 29.9966 40.2561 30.5789 39.8452 30.7527L35.4256 32.6217C35.2906 32.6788 35.1871 32.7917 35.142 32.9312L33.5724 37.7787C33.4216 38.2444 32.7627 38.2444 32.6119 37.7787L31.0424 32.9312C30.9973 32.7917 30.8938 32.6788 30.7588 32.6217L26.3392 30.7527C25.9283 30.5789 25.9283 29.9966 26.3392 29.8229L30.7588 27.9538C30.8938 27.8968 30.9973 27.7838 31.0424 27.6444L32.6119 22.7969Z",fill:"url(#paint0_linear_1904_66832)"}),Q.createElement("path",{d:"M32.6119 22.7969C32.7627 22.3312 33.4216 22.3312 33.5724 22.7969L35.142 27.6444C35.1871 27.7838 35.2906 27.8968 35.4256 27.9538L39.8452 29.8229C40.2561 29.9966 40.2561 30.5789 39.8452 30.7527L35.4256 32.6217C35.2906 32.6788 35.1871 32.7917 35.142 32.9312L33.5724 37.7787C33.4216 38.2444 32.7627 38.2444 32.6119 37.7787L31.0424 32.9312C30.9973 32.7917 30.8938 32.6788 30.7588 32.6217L26.3392 30.7527C25.9283 30.5789 25.9283 29.9966 26.3392 29.8229L30.7588 27.9538C30.8938 27.8968 30.9973 27.7838 31.0424 27.6444L32.6119 22.7969Z",fill:"url(#paint1_linear_1904_66832)"})),Q.createElement("defs",null,Q.createElement("filter",{id:"filter0_d_1904_66832",x:"-1.68265",y:"-1.12177",width:"48.2361",height:"48.2361",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},Q.createElement("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),Q.createElement("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),Q.createElement("feOffset",{dy:"0.560885"}),Q.createElement("feGaussianBlur",{stdDeviation:"0.841327"}),Q.createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.35 0"}),Q.createElement("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_1904_66832"}),Q.createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_1904_66832",result:"shape"})),Q.createElement("linearGradient",{id:"paint0_linear_1904_66832",x1:"25.2398",y1:"21.3136",x2:"40.9446",y2:"39.2619",gradientUnits:"userSpaceOnUse"},Q.createElement("stop",{stopColor:"#F7C000"}),Q.createElement("stop",{offset:"1",stopColor:"#E8B604"})),Q.createElement("linearGradient",{id:"paint1_linear_1904_66832",x1:"40.9446",y1:"39.2619",x2:"25.2398",y2:"21.3136",gradientUnits:"userSpaceOnUse"},Q.createElement("stop",{stopColor:"white",stopOpacity:"0"}),Q.createElement("stop",{offset:"0.418743",stopColor:"white",stopOpacity:"0.15"}),Q.createElement("stop",{offset:"0.504534",stopColor:"white",stopOpacity:"0.63"}),Q.createElement("stop",{offset:"0.588015",stopColor:"white",stopOpacity:"0.15"}),Q.createElement("stop",{offset:"1",stopColor:"white",stopOpacity:"0"}))))}function Xu(){return Q.createElement("svg",{width:"41",height:"40",viewBox:"0 0 41 40",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Q.createElement("g",{filter:"url(#filter0_d_1972_66634)"},Q.createElement("path",{d:"M25.0742 24.5505V24.5597H25.7273C26.0169 24.5611 26.3027 24.6243 26.565 24.7451C26.8274 24.8659 27.0598 25.0414 27.2464 25.2593L27.2793 25.3009C27.5241 25.587 27.6808 25.9359 27.7307 26.3067C27.7807 26.6774 27.7219 27.0545 27.5612 27.3935C27.4006 27.7324 27.1448 28.0191 26.824 28.2198C26.5033 28.4204 26.1309 28.5267 25.7508 28.526H25.0068V28.5368C25.2967 28.5379 25.5827 28.6012 25.8451 28.7223C26.1075 28.8434 26.3398 29.0194 26.526 29.2379L26.5589 29.2764C26.8032 29.5625 26.9595 29.9114 27.0091 30.2818C27.0588 30.6523 26.9999 31.0291 26.8393 31.3678C26.6787 31.7064 26.4232 31.9929 26.1027 32.1935C25.7822 32.3941 25.4102 32.5004 25.0303 32.5H8.91728C8.46859 32.5002 8.02426 32.4134 7.60966 32.2446C7.19507 32.0758 6.81834 31.8283 6.50099 31.5162C6.18365 31.2041 5.93191 30.8336 5.76016 30.4257C5.5884 30.0179 5.5 29.5808 5.5 29.1393V19.8199H6.85C7.91966 19.8199 8.49287 19.6181 9.14907 18.1249C11.16 13.1555 14.6305 11.3018 14.6305 8.66534V7.82863C14.633 7.54171 14.7506 7.26738 14.9577 7.06536C15.1647 6.86334 15.4446 6.74999 15.7362 6.75H16.0682C16.5994 6.74951 17.1152 6.9252 17.5323 7.24869C17.9495 7.57218 18.2437 8.02458 18.3673 8.53282C18.5022 9.0959 18.5705 9.67242 18.5709 10.2509C18.5703 11.2371 18.3745 12.2137 17.9945 13.1262L17.058 15.379C17.0007 15.5145 16.9783 15.6619 16.9929 15.8079C17.0074 15.954 17.0584 16.0942 17.1413 16.2162C17.2242 16.3382 17.3365 16.4382 17.4682 16.5072C17.5998 16.5762 17.7467 16.6121 17.8959 16.6118H25.7508C26.0404 16.6131 26.3262 16.6764 26.5885 16.7971C26.8508 16.9179 27.0833 17.0934 27.2699 17.3113L27.3028 17.3545C27.5467 17.6406 27.7025 17.9893 27.7519 18.3595C27.8013 18.7298 27.7423 19.1062 27.5818 19.4446C27.4212 19.783 27.1659 20.0692 26.8457 20.2698C26.5255 20.4703 26.1538 20.5767 25.7742 20.5765H25.1478H26.479C26.7688 20.5775 27.0549 20.6408 27.3173 20.7619C27.5797 20.883 27.8121 21.059 27.9981 21.2776L28.0326 21.3177C28.2769 21.6037 28.4331 21.9524 28.4828 22.3227C28.5326 22.6931 28.4738 23.0697 28.3134 23.4083C28.153 23.7469 27.8976 24.0334 27.5774 24.2341C27.2572 24.4348 26.8853 24.5414 26.5056 24.5412L25.0742 24.5505Z",fill:"#0FA958"}),Q.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M25.0742 24.5505V24.5597H25.7273C25.9951 24.561 26.2598 24.6152 26.5056 24.7189C26.506 24.719 26.5064 24.7192 26.5068 24.7194C26.5263 24.7276 26.5457 24.7362 26.565 24.7451C26.8274 24.8659 27.0598 25.0414 27.2464 25.2593L27.2793 25.3009C27.5241 25.587 27.6808 25.9359 27.7307 26.3067C27.7326 26.3206 27.7343 26.3346 27.7359 26.3485C27.7761 26.7057 27.7158 27.0672 27.5612 27.3935C27.5549 27.4069 27.5484 27.4202 27.5417 27.4334C27.3802 27.7549 27.1321 28.027 26.824 28.2198C26.5566 28.387 26.2533 28.4887 25.9396 28.5175C25.8794 28.5231 25.8187 28.5259 25.7579 28.526C25.7555 28.526 25.7531 28.526 25.7508 28.526H25.0069L25.0068 28.5368C25.2622 28.5378 25.5146 28.587 25.7505 28.6815C25.7504 28.6815 25.7506 28.6816 25.7505 28.6815C25.7822 28.6943 25.814 28.7079 25.8451 28.7223C26.1075 28.8434 26.3398 29.0194 26.526 29.2379L26.5589 29.2764C26.8032 29.5625 26.9595 29.9113 27.0091 30.2818C27.0588 30.6523 26.9999 31.0291 26.8393 31.3678C26.8322 31.3827 26.825 31.3975 26.8175 31.4123C26.6561 31.7315 26.409 32.0018 26.1027 32.1935C25.7822 32.3941 25.4102 32.5004 25.0303 32.5H8.91728C8.46859 32.5002 8.02426 32.4134 7.60966 32.2446C7.19507 32.0758 6.81834 31.8283 6.50099 31.5162C6.18365 31.2041 5.93191 30.8336 5.76016 30.4257C5.5884 30.0179 5.5 29.5808 5.5 29.1393V19.8199H6.85C7.91966 19.8199 8.49287 19.6181 9.14907 18.1249C10.1339 15.6911 11.4689 14.0047 12.5748 12.6076C13.727 11.152 14.6305 10.0106 14.6305 8.66534V7.82863C14.633 7.54171 14.7506 7.26738 14.9577 7.06536C15.1647 6.86333 15.4446 6.74999 15.7362 6.75H16.0682C16.5994 6.74951 17.1152 6.9252 17.5323 7.24869C17.9495 7.57218 18.2437 8.02458 18.3673 8.53282C18.5022 9.0959 18.5705 9.67242 18.5709 10.2509C18.5703 11.2371 18.3745 12.2137 17.9945 13.1262L17.058 15.379C17.0007 15.5145 16.9783 15.6619 16.9929 15.8079C17.0074 15.954 17.0584 16.0942 17.1413 16.2162C17.2242 16.3382 17.3365 16.4382 17.4682 16.5072C17.5998 16.5762 17.7467 16.6121 17.8959 16.6118H25.7508C26.0404 16.6131 26.3262 16.6764 26.5885 16.7971C26.8508 16.9179 27.0833 17.0934 27.2699 17.3113L27.3028 17.3545C27.3916 17.4587 27.4687 17.5711 27.5333 17.6899C27.646 17.8974 27.7205 18.1241 27.7519 18.3595C27.8013 18.7298 27.7423 19.1062 27.5818 19.4446C27.4212 19.783 27.1659 20.0692 26.8457 20.2698C26.7297 20.3424 26.6069 20.4027 26.4794 20.45C26.4793 20.4501 26.4796 20.45 26.4794 20.45C26.2558 20.5331 26.0174 20.5764 25.7761 20.5765H26.479C26.6908 20.5772 26.9005 20.6112 27.1005 20.6767C27.1742 20.7008 27.2466 20.7292 27.3173 20.7619C27.5797 20.883 27.8121 21.059 27.9981 21.2776L28.0326 21.3177C28.2769 21.6037 28.4331 21.9524 28.4828 22.3227C28.486 22.3465 28.4888 22.3703 28.4911 22.3941C28.5035 22.5228 28.5029 22.6519 28.4896 22.7795C28.4671 22.9963 28.4078 23.2089 28.3134 23.4083C28.153 23.7469 27.8976 24.0334 27.5774 24.2341C27.3012 24.4072 26.9866 24.5103 26.6617 24.5353C26.6099 24.5393 26.5578 24.5413 26.5056 24.5412L25.7273 24.5463L25.0742 24.5505ZM30.6292 19.7802C31.0668 20.4164 31.3522 21.1496 31.4561 21.9234C31.5833 22.8701 31.4325 23.8314 31.0246 24.6926C30.9059 24.9431 30.7671 25.1818 30.6102 25.4067C30.6498 25.5708 30.6811 25.7375 30.7039 25.9061C30.8315 26.8538 30.6807 27.8162 30.2721 28.6783C30.1597 28.9155 30.0293 29.142 29.8825 29.3563C29.9252 29.5293 29.9587 29.7051 29.9825 29.8831C30.1095 30.8302 29.9584 31.7918 29.55 32.6531C29.1418 33.514 28.4957 34.2349 27.6943 34.7365C26.8943 35.2372 25.9703 35.5004 25.0303 35.5C25.0299 35.5 25.0295 35.5 25.0291 35.5C25.0284 35.5 25.0277 35.5 25.027 35.5L8.91864 35.5C8.91819 35.5 8.91774 35.5 8.91728 35.5C8.08167 35.5002 7.25308 35.3386 6.4784 35.0231C5.70321 34.7075 4.99568 34.2435 4.39746 33.6552C3.79913 33.0667 3.32186 32.3655 2.99533 31.5901C2.66875 30.8146 2.5 29.9817 2.5 29.1393V16.8199H6.44186C7.5825 14.0786 9.10204 12.1602 10.1873 10.7901C10.2224 10.7458 10.2571 10.702 10.2913 10.6587C10.8805 9.91414 11.2289 9.45761 11.4543 9.0645C11.5547 8.8895 11.5982 8.78019 11.6169 8.72094C11.6258 8.69274 11.6288 8.67673 11.6298 8.67077L11.6305 8.66562L11.6305 7.81567L11.6306 7.80272C11.6401 6.70885 12.0887 5.67306 12.8628 4.91793C13.6352 4.1644 14.6688 3.74999 15.7362 3.75M30.6292 19.7802C30.773 19.1888 30.807 18.5728 30.7255 17.9626C30.6037 17.0498 30.2293 16.1933 29.6503 15.4855L29.6042 15.425L29.5489 15.3604C29.0789 14.8114 28.4963 14.3728 27.8434 14.0722C27.1906 13.7716 26.4815 13.6151 25.7646 13.6118L21.0159 13.6118C21.382 12.5311 21.5702 11.3969 21.5709 10.2528L21.5709 10.2489C21.5703 9.43548 21.4743 8.62505 21.2847 7.8339L21.2823 7.82375C20.9966 6.64915 20.3191 5.61336 19.3707 4.87796C18.424 4.14383 17.2605 3.74951 16.0682 3.75C16.0679 3.75 16.0685 3.75 16.0682 3.75H15.7362",fill:"white"}),Q.createElement("path",{d:"M29.0719 19.3222C29.2063 18.9071 29.7937 18.9071 29.9281 19.3222L31.3273 23.6435C31.3675 23.7678 31.4598 23.8685 31.5801 23.9194L35.5199 25.5855C35.8862 25.7404 35.8862 26.2595 35.5199 26.4145L31.5801 28.0806C31.4598 28.1315 31.3675 28.2321 31.3273 28.3564L29.9281 32.6777C29.7937 33.0929 29.2063 33.0929 29.0719 32.6777L27.6727 28.3564C27.6325 28.2321 27.5402 28.1315 27.4199 28.0806L23.48 26.4145C23.1137 26.2595 23.1137 25.7404 23.48 25.5855L27.4199 23.9194C27.5402 23.8685 27.6325 23.7678 27.6727 23.6435L29.0719 19.3222Z",fill:"url(#paint0_linear_1972_66634)"}),Q.createElement("path",{d:"M29.0719 19.3222C29.2063 18.9071 29.7937 18.9071 29.9281 19.3222L31.3273 23.6435C31.3675 23.7678 31.4598 23.8685 31.5801 23.9194L35.5199 25.5855C35.8862 25.7404 35.8862 26.2595 35.5199 26.4145L31.5801 28.0806C31.4598 28.1315 31.3675 28.2321 31.3273 28.3564L29.9281 32.6777C29.7937 33.0929 29.2063 33.0929 29.0719 32.6777L27.6727 28.3564C27.6325 28.2321 27.5402 28.1315 27.4199 28.0806L23.48 26.4145C23.1137 26.2595 23.1137 25.7404 23.48 25.5855L27.4199 23.9194C27.5402 23.8685 27.6325 23.7678 27.6727 23.6435L29.0719 19.3222Z",fill:"url(#paint1_linear_1972_66634)"}),Q.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M27.6727 23.6435C27.6325 23.7678 27.5402 23.8685 27.4199 23.9194L23.48 25.5855C23.1137 25.7404 23.1137 26.2595 23.48 26.4145L27.4199 28.0806C27.5402 28.1315 27.6325 28.2321 27.6727 28.3564L29.0719 32.6777C29.2063 33.0929 29.7937 33.0929 29.9281 32.6777L31.3273 28.3564C31.3675 28.2321 31.4598 28.1315 31.5801 28.0806L35.5199 26.4145C35.8862 26.2595 35.8862 25.7404 35.5199 25.5855L31.5801 23.9194C31.4598 23.8685 31.3675 23.7678 31.3273 23.6435L29.9281 19.3222C29.7937 18.9071 29.2063 18.9071 29.0719 19.3222L27.6727 23.6435ZM33.8223 21.6104L32.7822 18.3981C31.7516 15.2151 27.2484 15.2151 26.2177 18.3981L25.1777 21.6104L22.3116 22.8224C19.5033 24.0101 19.5032 27.9899 22.3116 29.1775L25.1777 30.3896L26.2177 33.6018C27.2483 36.7849 31.7516 36.7849 32.7822 33.6018L33.8223 30.3896L36.6884 29.1775C39.4967 27.9899 39.4968 24.0101 36.6884 22.8225L33.8223 21.6104Z",fill:"white"})),Q.createElement("defs",null,Q.createElement("filter",{id:"filter0_d_1972_66634",x:"-1.5",y:"-1",width:"43",height:"43",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},Q.createElement("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),Q.createElement("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),Q.createElement("feOffset",{dy:"0.5"}),Q.createElement("feGaussianBlur",{stdDeviation:"0.75"}),Q.createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.35 0"}),Q.createElement("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_1972_66634"}),Q.createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_1972_66634",result:"shape"})),Q.createElement("linearGradient",{id:"paint0_linear_1972_66634",x1:"23.2053",y1:"19.0109",x2:"35.3845",y2:"33.3378",gradientUnits:"userSpaceOnUse"},Q.createElement("stop",{stopColor:"#F7C000"}),Q.createElement("stop",{offset:"1",stopColor:"#E8B604"})),Q.createElement("linearGradient",{id:"paint1_linear_1972_66634",x1:"35.7947",y1:"32.9891",x2:"23.6155",y2:"18.6622",gradientUnits:"userSpaceOnUse"},Q.createElement("stop",{stopColor:"white",stopOpacity:"0"}),Q.createElement("stop",{offset:"0.418743",stopColor:"white",stopOpacity:"0.15"}),Q.createElement("stop",{offset:"0.504534",stopColor:"white",stopOpacity:"0.63"}),Q.createElement("stop",{offset:"0.588015",stopColor:"white",stopOpacity:"0.15"}),Q.createElement("stop",{offset:"1",stopColor:"white",stopOpacity:"0"}))))}function Xm(){return Q.createElement("div",{className:"vote_graphic--stampContainer--Gg9nN"},Q.createElement("div",{className:"vote_graphic--sticky--5vnwr"},Q.createElement(Xs,null)),Q.createElement("div",{className:"vote_graphic--plusOneStamp--lqNsf vote_graphic--stamp---bJ3m"},Q.createElement(Xc,null)),Q.createElement("div",{className:"vote_graphic--heartStamp--EhTYO vote_graphic--stamp---bJ3m"},Q.createElement(Xd,null)),Q.createElement("div",{className:"vote_graphic--thumbsUpStamp--d1jHf vote_graphic--stamp---bJ3m"},Q.createElement(Xu,null)))}function Xp({recordingKey:e}){let t=(0,$.wA)(),n=(0,LP.Pd)(Q.useCallback(()=>{t(wc.H1({votingStage:cl.W8Y.JOINED}))},[t]));return Q.createElement("div",{className:tw.cx.flex.flexColumn.p16.$},Q.createElement("div",{className:tw.cx.flex.gap8.itemsCenter.mb8.$},Q.createElement(Xm,null)),Q.createElement("div",{className:tw.cx.flex.justifyCenter.$},Q.createElement(Ze,{onClick:n,recordingKey:nh.Pt(e,"joinVotingSession")},Q.createElement(eO.Tx,{id:"meetings_panel.voting.join_vote"}))))}var X_=n(404095);let Xf="create_new_vote_view--stepperButtonWrapper--MA6-g";var Xh=n(349307),Xg=n(98285);let XE=e=>{let t=null;try{t=parseInt(e,10)}catch(e){}return t};function Xv(){let e=(0,$.wA)(),t=(0,t_.tS)(),{title:n,userVoteLimit:a}=(0,$.d4)(e=>e.voting.votingParams),r=(0,$.d4)(e=>!e.user),l=(0,m_.oh)(wc.$c(t||"")),[i,o]=Q.useState(a.toString());(0,Q.useEffect)(()=>{let t=XE(i);t&&e(wc.hL(t))},[i,e]);let s=r||l;return Q.createElement("div",{className:tw.cx.flex.flexColumn.p16.gap12.$},Q.createElement(Xm,null),Q.createElement(Xy,{userVoteLimitInput:i,setUserVoteLimitInput:o,title:n,isTitleDisabled:s,isLimitDisabled:s,userVoteLimit:a,setTitle:Q.useCallback(t=>e(wc.D6(t)),[e])}))}function Xy(e){var t;let n=Q.useRef(null),a=(0,$.wA)(),r=(0,t_.tS)(),l=(0,$.d4)(e=>!e.user),i=(0,m_.oh)(wc.$c(r||"")),o=(0,$.d4)(e=>e.multiplayer.allUsers.length),s=(0,c6.Fk)(e=>{var t;return null==(t=e.getCurrentPage())?void 0:t.guid}),c=null==(t=(0,LA.NE)())?void 0:t.id,d=l||i||!s,{userVoteLimitInput:u,userVoteLimit:m,title:p,setTitle:_,isLimitDisabled:f,isTitleDisabled:h,setUserVoteLimitInput:g}=e,E=Q.useCallback(e=>{let t=parseInt(u);(t+=e)<1||t>99||g(t.toString())},[g,u]),v=Q.useCallback(e=>{var t;"ArrowUp"===e.key||"ArrowDown"===e.key?(E("ArrowUp"===e.key?1:-1),e.preventDefault()):("Enter"===e.key||"Escape"===e.key)&&(null==(t=n.current)||t.blur())},[E]),y=Q.useCallback(()=>{var e;null==(e=n.current)||e.select()},[n]),b=Q.useCallback(e=>{if(!e.currentTarget.value.match(/^(\s*|\d+)$/)){e.preventDefault();return}g(e.currentTarget.value)},[g]),C=Q.useCallback(e=>{let t=n.current.value,a=XE(u);(""===t||!a||isNaN(a)||a<1)&&g("1")},[u,g]),w=(0,eO.t)("voting.modal.voting_setup_responsive_placeholder_prompt",{numVotes:m}),T=(0,LP.Pd)(Q.useCallback(()=>{if(!s)throw Error("Cannot start a voting session since currentPageNodeId is null");a(wc.vt({source:"voting_modal",usedCustomTitle:""!==p,requestBody:{title:p,in_progress:!0,user_vote_limit:m,num_people_in_file:o,page_node_id:s,voting_session_id_to_end:c},uiSurface:"MeetingsPanel"}))},[a,p,m,o,s,c])),x=(0,zK.Rt)();return Q.createElement("div",{className:"create_new_vote_view--container--mzVZ7"},Q.createElement(ht.L,{autoComplete:"off",autoCorrect:"off",autoFocus:!0,className:"create_new_vote_view--promptInput--Fd2W3 text--fontPos11--2LvXf text--_fontBase--QdLsd",spellCheck:!1,placeholder:w,value:p,onChange:e=>_(e.target.value),disabled:h,"aria-label":(0,eO.t)("voting.modal.voting_setup_prompt_input_field_aria_label")}),Q.createElement("div",{className:"create_new_vote_view--voteLimitContainer--ga1AC"},Q.createElement("div",{className:"create_new_vote_view--voteLimitControls--7D-Fi"},x?Q.createElement("div",{className:Xf},Q.createElement(dN.K,{onClick:()=>{f||E(-1)},"aria-label":(0,eO.t)("voting.modal.reduce_limit_tooltip_aria_label"),"aria-disabled":f},Q.createElement(nd.U,{svg:Xh.A},Q.createElement(X_.f,null)))):Q.createElement(eM.B,{svg:Xh.A,className:Xf,onClick:()=>{f||E(-1)},role:"button","aria-label":(0,eO.t)("voting.modal.reduce_limit_tooltip_aria_label"),"aria-disabled":f}),Q.createElement("input",{className:"create_new_vote_view--limitInput--1dzSR create_new_vote_view--promptInput--Fd2W3 text--fontPos11--2LvXf text--_fontBase--QdLsd",maxLength:2,type:"text",inputMode:"numeric",ref:n,value:u,onKeyDown:v,onFocus:y,onChange:b,onBlur:C,disabled:f,"aria-label":(0,eO.t)("voting.modal.voting_limit_input_field_aria_label")}),x?Q.createElement("div",{className:Xf},Q.createElement(dN.K,{onClick:()=>{f||E(1)},"aria-label":(0,eO.t)("voting.modal.increase_limit_tooltip_aria_label"),"aria-disabled":f},Q.createElement(nd.U,{svg:Xg.A},Q.createElement(gi.x,null)))):Q.createElement(eM.B,{svg:Xg.A,className:Xf,onClick:()=>{f||E(1)},role:"button","aria-label":(0,eO.t)("voting.modal.increase_limit_tooltip_aria_label"),"aria-disabled":f})),Q.createElement(Ze,{flexGrow:!0,onClick:T,disabled:d,"data-tooltip-type":l?nO.Ib.TEXT:void 0,"data-tooltip":l?(0,eO.t)("voting.modal.start_disabled_logged_out_tooltip"):void 0,recordingKey:"votingModalStartVotingSession"},Q.createElement("span",null,Q.createElement(eO.Tx,{id:"voting.modal.start_voting_session"})))))}function Xb(e){let{setOnPastVotesClick:t,setOnNewSessionClick:n,recordingKey:a}=e,r=(0,t_.tS)(),l=void 0!==t;return Q.createElement("div",{className:tw.cx.flex.flexColumn.p16.$},Q.createElement("div",{className:tw.cx.flex.gap8.itemsCenter.mb12.$},Q.createElement(Xm,null)),Q.createElement("div",{className:tw.cx.flex.gap6.justifyCenter.$},l&&Q.createElement(Y9,{flexGrow:l,onClick:()=>{(0,er.sx)("view_past_voting_sessions",{source:"meetings_panel",fileKey:r}),t()},recordingKey:nh.Pt(a,"viewPastVotingSessions")},Q.createElement(eO.Tx,{id:"meetings_panel.voting.view_past_results_prompt"})),!ec.Ay.isMeetDevice&&Q.createElement(Ze,{flexGrow:l,onClick:()=>{(0,er.sx)("creating_new_vote_start",{source:"meetings_panel",fileKey:r}),n()},recordingKey:nh.Pt(a,"newVote")},Q.createElement("div",{className:tw.cx.px4.$},Q.createElement(eO.Tx,{id:"meetings_panel.voting.new_vote"})))))}function XC({recordingKey:e}){let[t,n]=Q.useState(!1),a=(0,LP.Ld)(),r=(0,e_.Xr)(RF.Qs),l=(0,LP.Pd)(Q.useCallback(()=>{n(!0)},[])),i=(0,LP.Pd)(Q.useCallback(()=>{r({type:"SET_VIEW",payload:RF.iN.PAST_VOTES})},[r]));return t?Q.createElement(Xv,null):Q.createElement(Xb,{setOnPastVotesClick:a?i:void 0,setOnNewSessionClick:l,recordingKey:e})}function Xw(){let e=(0,$.d4)(e=>e.mirror.appModel.votingSessionInfo),t=(0,$.d4)(e=>e.mirror.appModel.votingSessionInfo),n="meetingsPanel";switch(t.votingStage){case eU.W8Y.JOINED:return Q.createElement(Xo,{votingSessionInfo:e,recordingKey:n});case eU.W8Y.NOT_JOINED:return Q.createElement(Xp,{recordingKey:n});case eU.W8Y.NO_SESSION:case eU.W8Y.ENDED:return Q.createElement(XC,{recordingKey:n})}}let XT="meetings_panel",Xx=(0,aE.Ju)(function({votingSessionId:e}){let t=(0,$.wA)(),n=(0,t_.tS)(),a=()=>{(0,er.sx)("cancel_delete_voting_session",{source:XT,votingSessionId:e,fileKey:n})};return Q.createElement(tS.Rw,{confirmationTitle:(0,eO.t)("voting.modal.delete_voting_session_modal_header"),content:(0,eO.t)("voting.modal.delete_voting_session_modal_description"),onConfirm:()=>{t(wc.$l({votingSessionId:e})),t(wc.H1({votingStage:eU.W8Y.NO_SESSION})),(0,er.sx)("confirm_delete_voting_session",{source:XT,votingSessionId:e,fileKey:n})},confirmText:(0,eO.t)("voting.modal.delete_voting_session_modal_confirm_button"),size:"small",destructive:!0,disableClickOutsideToHide:!0,hideOnConfirm:!0,cancelText:(0,eO.t)("voting.modal.delete_voting_session_modal_cancel_button"),onCancel:a,onCloseButtonClick:a,hideCancel:!1,popStack:!0,recordingKey:"deleteVotingSessionModal"})},"DeleteVotingSessionModal",aE.ZU.YES);function XN({recordingKey:e}){let t=(0,LA.jz)(),[n,a]=(0,Q.useState)(null);return Q.createElement(Q.Fragment,null,t&&t.length>0?Q.createElement(ab.P,{className:"previous_votes_view--scrollContainer--Jb0sL"},Q.createElement("ol",{className:"previous_votes_view--resultsList--IWpfo"},t.map((t,r,l)=>{var i;let o=null==(i=l[r+1])?void 0:i.id,s=t.id!==n&&(!o||o!==n)&&!!o;return Q.createElement(Xk,{key:t.id,title:(0,LP.DG)(t),id:t.id,userId:t.userId,createdAt:t.createdAt,shouldShowSeparator:s,setAsHovered:()=>a(t.id),setAsNotHovered:()=>a(e=>e===t.id?null:e),recordingKey:e})}))):Q.createElement("div",{className:"previous_votes_view--nullResultsList--xAcum"},Q.createElement("p",{className:"previous_votes_view--nullResultsListTextHeader--vWsPe previous_votes_view--nullResultsListText--qaiMF text--fontPos11--2LvXf text--_fontBase--QdLsd"},Q.createElement(eO.Tx,{id:"voting.modal.previous_votes_null_text_title"})),Q.createElement("p",{className:"previous_votes_view--nullResultsListTextDescription--CNedi previous_votes_view--nullResultsListText--qaiMF text--fontPos11--2LvXf text--_fontBase--QdLsd"},Q.createElement(eO.Tx,{id:"voting.modal.after_you_vote_results_will_show_up_right_here"}))))}function Xk({title:e,id:t,userId:n,createdAt:a,shouldShowSeparator:r,setAsHovered:l,setAsNotHovered:i,recordingKey:o}){let s=(0,$.wA)(),c=(0,t_.tS)();return Q.createElement("li",null,Q.createElement(ns.GG,{recordingKey:nh.Pt(o,"viewPastVotingSession"),className:ea()("previous_votes_view--previousVotesListItem--77yUn",r&&"previous_votes_view--showSeparator--nHjDd"),onClick:()=>{(0,er.sx)("view_past_voting_session",{votingSessionId:t,source:"meetings_panel",fileKey:c}),s(wc.H1({sessionId:t,votingStage:cl.W8Y.ENDED}))},onMouseEnter:()=>l(),onMouseLeave:()=>i()},Q.createElement("div",{className:"previous_votes_view--title--ndUJI text--fontPos13--xW8hS text--_fontBase--QdLsd ellipsis--ellipsisAfter2Lines--Qo-Xh ellipsis--_ellipsisAfterNLines--LzI7k"},e),Q.createElement("div",{className:"previous_votes_view--previousVotesListItemMetadata--BDnIc"},Q.createElement(XS,{userId:n}),Q.createElement("div",{className:"previous_votes_view--timestamp--A1VKx"},Q.createElement(ur.h1,{date:a})))))}function XS({userId:e}){let{user:t,loading:n}=(0,No.wW)(e);return Q.createElement(Q.Fragment,null,Q.createElement(Z$.v,{userId:e,user:t,loading:n,size:24,loadingClassName:"previous_votes_view--loadingAvatar--JzmIH",defaultClassName:"previous_votes_view--userAvatarPadding---Zhpj"}),Q.createElement(Z$.m,{userId:e,user:t,loading:n,defaultClassName:"previous_votes_view--username--l6MHn text--fontPos11--2LvXf text--_fontBase--QdLsd ellipsis--ellipsis--Tjyfa",loadingClassName:"previous_votes_view--loadingUsername--VL2uA"}))}var XI=n(369616),XA=n(458510),XP=n(230538),XO=n(58029),XL=n(781779);let XM=new Map([["STICKY",XA.BV],["TEXT",XA.N$],["FRAME",XA.H0],["SYMBOL",XA.yc],["ROUNDED_RECTANGLE",XA.xf],["CODE_BLOCK",XA.I5]]),XD=["ROUNDED_RECTANGLE","SYMBOL","FRAME"],XR=Q.memo(({votingSessionInfo:e})=>{let t=(0,LA.jz)(),n=null==t?void 0:t.find(t=>t.id===e.sessionId),a=(0,Q.useMemo)(()=>[...e.votedNodes].sort((e,t)=>{let n=(0,LP.oC)(e),a=(0,LP.oC)(t);return n!==a?a-n:e.guid.localeCompare(t.guid)}),[e]),r=(0,Q.useMemo)(()=>(0,LP.yn)(e.votedNodes),[e.votedNodes]);if(!n)return null;let l=!!a.length;return Q.createElement("div",{className:tw.cx.flex.flexColumn.minH0.flexGrow1.$},Q.createElement("div",{className:"voting_results_detail_view--titleContainer--gt1pA"},Q.createElement(Xl,{title:(0,LP.DG)(n)})),Q.createElement("div",{className:"voting_results_detail_view--byline--Fye6w"},Q.createElement(Xr,{votingSessionInfo:e}),Q.createElement("p",{className:"voting_results_detail_view--bylineTimestamp--3Ugv4 text--fontPos12--YsUAh text--_fontBase--QdLsd"},Q.createElement(ur.h1,{date:n.createdAt}))),l&&Q.createElement(XP.w,null),l&&Q.createElement(ab.P,null,Q.createElement("ol",{className:"voting_results_detail_view--resultsList---owZd"},a.map((e,t)=>{var n;let l=1===r.size&&r.has(e.guid);return Q.createElement(XF,{isMostVoted:l,nodeVoteInfo:e,nextNodeId:(null==(n=a[t+1])?void 0:n.guid)??null,key:e.guid})}))))});function XF({nodeVoteInfo:e,nextNodeId:t,isMostVoted:n}){let a=e.guid,r=(0,c6.Jk)(a),l=(0,pn.Z)("figjam_voting"),i=(0,$.wA)(),o=(0,$.d4)(e=>e.voting.selectedVotePinId===a),s=(0,$.d4)(e=>!!t&&e.voting.selectedVotePinId===t),c=(0,$.d4)(e=>e.voting.hoveredInModalVotePinId===a),d=(0,$.d4)(e=>!!t&&e.voting.hoveredInModalVotePinId===t),u=Q.useContext(US.kw);(0,Q.useEffect)(()=>{if(c)return()=>{i(wc.gA({votePinId:a}))}},[c,i,a]);let m=function(e){if(!e)return XL.xri;let t=e.whiteboardColor,n=(0,XO.BV)(t,"STICKY"===e.type?"sticky":"base");return n?u_.F.format(n):XL.xri}(r),p=r?"SHAPE_WITH_TEXT"===r.type?function(e){switch(e){case"SQUARE":return XA.dH;case"ELLIPSE":return XA.Yl;case"ROUNDED_RECTANGLE":return XA.EW;case"TRIANGLE_UP":return XA.D5;case"TRIANGLE_DOWN":return XA.kj;case"PARALLELOGRAM_RIGHT":return XA.h9;case"PARALLELOGRAM_LEFT":return XA._K;case"ENG_DATABASE":return XA.rQ;case"ENG_QUEUE":return XA.pt;case"ENG_FILE":return XA.ak;case"ENG_FOLDER":return XA.Mi;case"TRAPEZOID":return XA.qn;case"PREDEFINED_PROCESS":return XA.dA;case"SHIELD":return XA.lm;case"PENTAGON":return XA.Un;case"OCTAGON":return XA.JK;case"HEXAGON":return XA.CB;case"PLUS":return XA.c1;case"STAR":return XA.Gg;case"MANUAL_INPUT":return XA.Cu;case"DOCUMENT_SINGLE":return XA.R8;case"DOCUMENT_MULTIPLE":return XA.H$;case"CHEVRON":return XA.zp;case"ARROW_LEFT":case"ARROW_RIGHT":return XA.HK;case"SUMMING_JUNCTION":return XA.QZ;case"OR":return XA.Vq;case"SPEECH_BUBBLE":return XA.QD;case"INTERNAL_STORAGE":return XA.sJ;default:return(0,ar.x1)("voting","error unhandled shape type for shapeTypeToSvg",{shapeType:e}),XA._K}}(r.shapeWithTextType):XM.get(r.type)||XA.BV:XA.BV,_=!!r&&XD.includes(r.type),f=(()=>{if(!r)return{width:0,height:0};let e=r.absoluteBoundingBox,t=e.w,n=e.h,a=Math.min(t/72,n/72);return{width:t/a,height:n/a}})(),h=function({nodeId:e,width:t,height:n,shouldSkip:a,updateOnSceneGraphChange:r=!1}){let[l,i]=(0,Q.useState)(null);return(0,Q.useEffect)(()=>{if(a){i(null);return}let l=null,o=()=>{l&&(l.abort(),l=null)},s=()=>{let a=(0,lW._G)(new lB.Mi(t,n),e,!0);a&&a.pixels&&a.pixelSize&&a.displaySize&&i({src:(0,lW.Pv)(a.pixels,a.pixelSize),displaySize:a.displaySize})};i(null);let c=()=>{o(),l=new TaskController({priority:"user-visible"}),scheduler.postTask(s,{signal:l.signal})},d=vq()(c,200,{trailing:!0,leading:!1});return c(),r&&lT.Y5.fromFullscreen.on("sceneGraphMirrorUpdate",d),()=>{o(),d.cancel(),r&&lT.Y5.fromFullscreen.removeListener("sceneGraphMirrorUpdate",d)}},[e,t,n,a,r]),l}({nodeId:a,width:f.width,height:f.height,shouldSkip:!_}),g=(0,Q.useMemo)(()=>{if(r){if(r.textSublayer)return r.textSublayer.textContent;if(r.textContent)return r.textContent;if(r.name)return r.name}return""},[r]),E=(0,LP.oC)(e);return Q.createElement("li",null,Q.createElement("button",{className:ea()("voting_results_detail_view--resultsListItemButton--4llQi",{"voting_results_detail_view--resultsListItemButtonWinner--6bIhk":n,"voting_results_detail_view--resultsListItemButtonSelected--Z3vdm":o,"voting_results_detail_view--showSeparator--6aQOA":!o&&!s&&!c&&!d&&!!t}),onClick:function(){i(wc.w9({votePinId:e.guid})),r&&l((0,XI.e)(r,u,"vote"))},onMouseEnter:function(){(0,ec.aJ)()&&i(wc.Vw({votePinId:a}))},onMouseLeave:function(){(0,ec.aJ)()&&i(wc.gA({votePinId:a}))}},Q.createElement("div",{className:"voting_results_detail_view--resultsListItemCountContainer--1fD-h"},Q.createElement("div",{className:"voting_results_detail_view--resultsListItemCountText--m6rWN text--fontPos11--2LvXf text--_fontBase--QdLsd"},Q.createElement(eO.Tx,{id:"voting.modal.votes",numVotes:E,numVotesElem:Q.createElement("p",{className:"voting_results_detail_view--resultsListItemCount--DLrXt text--fontPos13--xW8hS text--_fontBase--QdLsd"},E)}))),Q.createElement("p",{className:"voting_results_detail_view--resultsListItemDetails--hz7gX text--fontPos11--2LvXf text--_fontBase--QdLsd ellipsis--ellipsisAfter3Lines--h405C ellipsis--_ellipsisAfterNLines--LzI7k"},g),Q.createElement("div",{className:"voting_results_detail_view--resultsListItemThumbnail--Qjux6"},h&&_?Q.createElement("img",{className:"voting_results_detail_view--nodePreviewImage--fugfT",src:h.src,width:h.displaySize.x,height:h.displaySize.y,alt:(0,eO.t)("voting.modal.voting_results_image_preview_alt")}):Q.createElement(p,{color:m}),n&&Q.createElement("img",{src:XA.G7,className:"voting_results_detail_view--medal--JzOBO",alt:(0,eO.t)("voting.modal.medal_img_alt")}))))}function XB(e){let{headerText:t,goBack:n,options:a,onMinimize:r,onOptionsMenuClick:l,recordingKey:i}=e;return Q.createElement("div",{className:"meetings_panel_header--meetingsPanelPageContainer--TK5qd"},Q.createElement(XU,{headerText:t,goBack:n,options:a,onMinimize:r,onOptionsMenuClick:l,recordingKey:i}),Q.createElement(XP.w,null),e.children)}let XU=Q.memo(e=>{let{headerText:t,goBack:n,options:a,onMinimize:r,onOptionsMenuClick:l,recordingKey:i}=e,{Dropdown:o,toggleDropdown:s,dropdownTargetRef:c,isDropdownShown:d}=(0,aw.B)("MEETINGS_PANEL_HEADER_OVERFLOW_MENU"),u=Q.useCallback(e=>{null==l||l(),s()},[s,l]),m=Q.useMemo(()=>a&&a.length>0?a.map(e=>({displayText:e.text,isChecked:!1,callback:e.callback,recordingKey:e.recordingKey})):null,[a]);return Q.createElement(Q.Fragment,null,Q.createElement("div",{className:"meetings_panel_header--meetingsPanelHeader--6cBGV"},Q.createElement(eM.B,{svg:S6.A,className:"meetings_panel_header--panelHeaderBackButton--03dhC",onClick:ec.Ay.isIpad?void 0:n,onPointerDown:ec.Ay.isIpad?n:void 0,recordingKey:nh.Pt(i,"backButton")}),t&&Q.createElement("span",{className:"meetings_panel_header--meetingsPanelHeaderText--KW2Jw text--fontPos11--2LvXf text--_fontBase--QdLsd"},t),Q.createElement("div",{className:tw.cx.mlAuto.$,ref:c},m&&Q.createElement(aJ.YW,{svg:Z2.A,label:"dots",className:"meetings_panel_header--panelHeaderOverflowMenuIcon--zCGI4",onClick:u,"aria-label":(0,eO.t)("meetings_panel.header.overflow_menu_aria_label"),"data-tooltip-type":nO.Ib.TEXT,"data-tooltip":(0,eO.t)("meetings_panel.header.overflow_menu_aria_label"),selected:d,recordingKey:nh.Pt(i,"expandMenuItems")})),Q.createElement("div",null,m&&Q.createElement(o,{items:m,showPoint:!0,minWidth:135,recordingKey:nh.Pt(i,"expandMenuItems")}),r&&Q.createElement(aO.Jn,{onClick:r}))))}),XH="meetings_panel";function XV(){let e=(0,$.d4)(e=>e.mirror.appModel.votingSessionInfo),t=Q.useMemo(()=>e&&e.sessionId.length>0,[e]),n=(0,$.wA)(),a=(0,e_.Xr)(RF.Qs),r=(0,Ba.qU)(),l=(0,$.Pj)(),i=(0,t5.am)(),o="pastVotingSessions",s=Q.useCallback(()=>{t?n(wc.H1({votingStage:eU.W8Y.NO_SESSION})):a({type:"SET_VIEW",payload:RF.iN.DEFAULT})},[t,n,a]),c=Q.useCallback(()=>{r({source:Ba.OO.MEETINGS_PANEL})},[r]),d=Q.useCallback(()=>{i("click_voting_results_more_options",{votingSessionId:e.sessionId,source:XH})},[i,e]),u=Q.useCallback(()=>{n(n9.$O({type:Xx.type,showModalsBeneath:!0,data:{votingSessionId:e.sessionId}})),i("click_delete_voting_session",{votingSessionId:e.sessionId,source:XH})},[n,e,i]),m=Q.useCallback(()=>{i("click_export_voting_session_as_csv",{votingSessionId:e.sessionId,source:XH}),wc.Ev(l.getState(),e.sessionId)},[l,e,i]),p=Q.useMemo(()=>{if(t){let e=[{text:(0,eO.t)("voting.modal.actions.delete_voting_session"),callback:u,recordingKey:"votingModalDeleteVotingSession"}];return ec.Ay.isIpadNative||e.unshift({text:(0,eO.t)("voting.modal.actions.export_as_csv"),callback:m,recordingKey:"votingModalExportAsCsv"}),e}},[t,m,u]);return Q.createElement(XB,{headerText:(0,eO.t)("meetings_panel.voting.results"),goBack:s,onMinimize:c,onOptionsMenuClick:d,options:p,recordingKey:o},t?Q.createElement(XR,{votingSessionInfo:e}):Q.createElement(XN,{recordingKey:o}))}var XG=n(449351),XK=n(574078);let XW="volume_slider--incognito--1BzqQ",Xz="volume_slider--thick--OwB1Y";var Xj=((H=Xj||{}).LEFT="LEFT",H.RIGHT="RIGHT",H.CENTER="CENTER",H.INLINE="INLINE",H);function XY({muteButtonRef:e,volumeJustification:t,fullWidth:n,isMinimized:a}){var r;let l=(0,$.d4)(e=>e.music.isMuted),i=(0,$.d4)(e=>l?0:e.music.volume),o=(0,zK.Rt)(),s=(0,$.wA)(),c=e=>{e.preventDefault(),e.stopPropagation();let t=Number(e.target.value);s(F9.pX(t))},d=0,u=0;if("INLINE"!==t){let n=null==(r=e.current)?void 0:r.getClientRects()[0];if(!n)return Q.createElement(Q.Fragment,null," ");d=n.x,"CENTER"===t?d+=(n.width-144)/2:"RIGHT"===t&&(d=d+n.width-144),u=(n.y||0)+32+5}let m=i-(i-50)/50*3.8;return Q.createElement("div",{className:ea()("volume_slider--volumeContainer--jqCRj",{"volume_slider--volumeContainerRelative--2bSYx":"INLINE"===t,[XW]:!a,[Xz]:!a&&o,"volume_slider--fullWidth--jnzDi":n}),style:{left:`${d||0}px`,top:`${u}px`}},Q.createElement("input",{className:ea()("volume_slider--volumeSliderInput--RHbwq",{"volume_slider--isMuted--cDjt7":l,[XW]:!a&&!o,[Xz]:!a&&o}),style:{background:`linear-gradient(to right,
            var(--active-slider-color) 0%,
            var(--active-slider-color) ${m}%,
            var(--inactive-slider-color) ${m}%,
            var(--inactive-slider-color) 100%
          )`},type:"range",min:0,max:100,step:1,value:i,onChange:c,onMouseUp:e=>{let t=Number(e.target.value);s(F9.tk({isMuted:0===t,userInitiated:!0}))},onInput:c,onTouchEnd:e=>{e.preventDefault(),e.stopPropagation()}}),"INLINE"!==t&&Q.createElement("div",{className:ea()({"volume_slider--additionalHoverDetection--IDArn":!a,"volume_slider--shallowAdditionalHoverDetection---8pNd":a})}))}var XZ=n(99351),XX=n(466811),Xq=n(311986),XJ=((V=XJ||{}).DEFAULT="default",V.ON_FIGJAM="onFigjam",V.FIGJAM="figjam",V);let XQ=(e,t)=>t||0===e?xZ.A:e<40?XX.A:e<80?Xq.A:XZ.A;function X$(e){let{isMinimized:t,withDarkHoverBg:n,muteButtonRef:a,muteOnTouch:r,iconColor:l,blockTooltip:i}=e,o=(0,$.d4)(e=>e.music.volume),s=(0,$.d4)(e=>e.music.isMuted),c=(0,$.wA)(),d=Q.useCallback(()=>{c(F9.tk({isMuted:!s,userInitiated:!0}))},[c,s]),u=Q.useCallback(e=>{e.preventDefault(),e.stopPropagation(),d()},[d]);return Q.createElement("div",{onTouchEnd:r?u:ey.lQ},Q.createElement(aJ.K0,{onClick:d,className:ea()("volume_control_button--button--6JyR-",{"volume_control_button--minimized--esj8w":t,"volume_control_button--withDarkHoverBg--p-OS1":n,"volume_control_button--defaultSpeakerColor--ZF9o2":"default"===l,"volume_control_button--figjamSpeakerColor--0W5TO":"figjam"===l,"volume_control_button--onFigjamSpeakerColor--KEcX8":"onFigjam"===l}),svg:XQ(o,s),"data-tooltip-type":nO.Ib.TEXT,tooltipForScreenReadersOnly:i,"data-tooltip":s?(0,eO.t)("whiteboard.timer.timer_unmute_tooltip"):(0,eO.t)("whiteboard.timer.timer_mute_tooltip"),"data-tooltip-show-above":!0,ref:a}))}var X0=((G=X0||{})[G.DEFAULT=0]="DEFAULT",G[G.ALWAYS=1]="ALWAYS",G[G.NEVER=2]="NEVER",G);function X1({volumeJustification:e,sliderVisibilitySetting:t,sliderFullWidth:n,buttonGap:a,isMinimized:r,withDarkHoverBg:l,iconColor:i,blockButtonTooltip:o,muteOnTouch:s}){let c=Q.useRef(-1),[d,u]=Q.useState(!1),m=Q.useCallback(()=>{c.current&&clearTimeout(c.current),c.current=window.setTimeout(()=>{u(!0)},100)},[u]),p=Q.useCallback(()=>{c.current&&clearTimeout(c.current),u(!1)},[u]),_=Q.useRef(null),f=Q.useCallback(()=>{p()},[p]);(0,XK.X)(_,"touchend",f);let h=Q.useRef(null),g=(0,$.d4)(e=>e.timer),E=(0,Bn.IQ)(g.time);Q.useEffect(()=>{E&&u(!1)},[E]),Q.useEffect(()=>{u(!1)},[t]);let v=d;switch(t){case 1:v=!0;break;case 2:v=!1}return Q.createElement("div",{ref:_,onTouchEnd:e=>{e.preventDefault(),e.stopPropagation(),d?p():m()},onMouseEnter:m,onMouseLeave:p,className:"volume_control_button--volumeButtonAndSliderContainer--HyG-F",style:{gap:a}},Q.createElement(X$,{muteButtonRef:h,isMinimized:r,withDarkHoverBg:l,iconColor:i,blockTooltip:o,muteOnTouch:s}),v&&Q.createElement(XY,{muteButtonRef:h,volumeJustification:e,fullWidth:n,isMinimized:r}))}function X2(){let e=(0,Ba.$3)();return Q.createElement("div",{className:"volume_view--volumeView--XbP1r"},Q.createElement(X1,{volumeJustification:Xj.INLINE,sliderVisibilitySetting:e?X0.NEVER:X0.ALWAYS,sliderFullWidth:!0,buttonGap:5,iconColor:XJ.DEFAULT,withDarkHoverBg:!0,muteOnTouch:e}))}function X5(){let[e,t]=ZM(),n=(0,$.d4)(e=>e.mirror.appModel.showUi);return(!function(e){let t=(0,$.wA)(),n=(0,$.d4)(e=>e.timer);Q.useEffect(()=>{!1!==n.startChimePlayed||(0,Bn.IQ)(n.time)||(0,Bn.CM)(n.time)||(0,Bn.G8)(n.time)||(e(),t(F9.k1(!0)))},[t,e,n.startChimePlayed,n.time])}(t.playStartChime),!function(){ZS();let[e,t]=(0,ef.fp)(Zp.$),n=(0,$.d4)(e=>e.timer.volume);ZP(t),ZI(e),ZO([Zh,ZE,Zg],n)}(),!function(){var e;YF();let t=function(e){let[t]=Q.useState(()=>(null==e?void 0:e.previousPlayerInstance)||new YL(e)),n=(0,$.d4)(t=>"StandaloneMusic"===e.musicSource?t.music.volume:t.timer.volume),a=(0,$.d4)(t=>"StandaloneMusic"===e.musicSource?t.music.isMuted:t.timer.isMuted);return Q.useEffect(()=>{t.setVolume(n/100)},[n,t]),Q.useEffect(()=>{t.setIsMuted(a)},[a,t]),t}({musicSource:"StandaloneMusic",loadingPlaybackUrl:"https://static.figma.com/uploads/f4e48159672101a168b296a94e39ef02f032e171",previousPlayerInstance:(0,$.d4)(e=>e.music.playerInstance)||void 0,timeUpdateListener:(0,eo.kc)().figjam_more_tracks_listen?e=>{e.currentTime>e.duration-.3&&(e.currentTime=0,e.play())}:void 0}),n=(0,$.d4)(e=>e.music.music),a=null==(e=YD((null==n?void 0:n.selectedSongID)||""))?void 0:e.playback_url,r=(0,$.d4)(e=>e.music.volume),l=(0,$.d4)(e=>e.music.isMuted),i=(0,$.wA)();Q.useEffect(()=>{i(F9.qV())},[i]),Q.useEffect(()=>{(0,eo.kc)().figjam_more_tracks_listen&&i(F9.jt())},[i]),Q.useEffect(()=>{i(F9.wk(t))},[i,t]),Q.useEffect(()=>()=>{t.stop()},[t]),Q.useEffect(()=>{i(F9.tk({isMuted:0===r,userInitiated:!1}))},[i,r]);let o=Q.useCallback(()=>{i(F9.tk({isMuted:!0,userInitiated:!1})),i(eL.F.enqueue({message:(0,eO.t)("whiteboard.timer.unmute_music_message"),button:{text:(0,eO.t)("whiteboard.timer.unmute_music_button"),action:()=>{i(F9.tk({isMuted:!1,userInitiated:!0}))}},type:"unmute-timer-music",onDismiss:()=>{}}))},[i]);Q.useEffect(()=>{if(a!==t.audio.currentSrc&&t.setSource(a||""),!a){t.stop();return}if(null==n?void 0:n.isPaused){t.pause();return}if(!(null==n?void 0:n.isPaused)){if(!t.isPaused()||!a)return;t.playAtTimestamp({src:a,timestamp:(0,F9.UQ)(n),onFailure:o})}},[a,n,t,o,l])}(),(0,LP.YR)(),(0,LP.FJ)(),ZC(),Zb(),(0,ef.md)(RF.Qs).isOpen&&n)?Q.createElement(X4,null):null}function X4(){let e=(0,ef.md)(RF.Qs),t=(0,Ba.$3)(),n=(0,Ba.qU)(),a=(0,LP.Av)(),r=(0,zK.Rt)();return Q.createElement("div",{className:"meetings_panel--meetingsPanelModal--2NL5Z"},e.view!==RF.iN.PAST_VOTES||t?Q.createElement("div",{className:"meetings_panel--meetingsPanelContents--nnSLj"},Q.createElement(XG.l,{title:a?(0,eO.t)("meetings_panel.toolbar_tooltip"):(0,eO.t)("meetings_panel.toolbar_tooltip.no_voting"),onClose:()=>n({source:Ba.OO.MEETINGS_PANEL}),isUI3:r}),Q.createElement(ab.P,{className:"meetings_panel--meetingToolsScrollWrapper--D5CUY"},Q.createElement(X3,null))):Q.createElement(XV,null))}function X3(){let e=(0,LP.Av)(),t=(0,LP.Ld)(),n=(0,zK.Rt)(),a=e&&ec.Ay.isMeetDevice&&t,r=ec.Ay.isMeetDevice?a:e;return Q.createElement("div",{className:tw.cx.colorBg.$},n&&Q.createElement(XP.w,null),Q.createElement(X2,null),Q.createElement(XP.w,null),Q.createElement(ZJ,null),Q.createElement(XP.w,null),Q.createElement(Zm,null),r&&Q.createElement(Q.Fragment,null,Q.createElement(XP.w,null),Q.createElement(Xw,null)))}let X6=(0,nf.eU)(!1),X7=(0,nf.eU)(e=>e(X6)),X8=(0,nf.eU)(null,(e,t)=>{(0,W5.W)("left",()=>{t(X9)}),t(X6,!0)}),X9=(0,nf.eU)(null,(e,t)=>{t(X6,!1)});function qe(){let e=(0,ci.cT)(),t=(0,ci.n0)(),n=(0,e_.Xr)(g_);(0,Q.useEffect)(()=>{n(!0)},[n]);let a=(0,t_.q5)();if(!a)return null;let r=xg((0,xh.Qy)(a));return Q.createElement(gC,{recordingKey:"figjamPagesSidebar",width:240,isReadOnly:e,pagesList:t,activeTab:eU.xae.LAYERS,showTabs:!1,hasTeamLibraryUpdates:!1,isDevHandoff:!1,isDevHandoffOverview:!1,isComparingChanges:!1,isPageCreationEnabled:r})}function qt(){let e=(0,$.d4)(e=>e.mirror.appModel.showUi),t=(0,ef.md)(X7),n=(0,e_.Xr)(X9);return(0,Q.useEffect)(()=>n,[n]),t&&e?Q.createElement("div",{key:"figjam-pages-sidebar",className:ea()("pages_sidebar_ui2--positioner--MStQb",eK.Dm)},Q.createElement("div",{className:"pages_sidebar_ui2--panel--ZLyMB"},Q.createElement(qe,null))):null}function qn({children:e,hasHoverableBackground:t}){return Q.createElement("div",{className:ea()("floating_panel--container--3qp3k",{"floating_panel--hoverableBackground--h8B5i":t})},e)}function qa(){let e=(0,aD.GS)(),t=nh.Pt("toolbarView",tz.ec.recordingKey);return e?Q.createElement(qr,{recordingKey:t}):Q.createElement(ER.jX,{recordingKey:t})}function qr({recordingKey:e}){let t=(0,Q.useRef)(null),n=(0,$.d4)(e=>(0,yu.Yh)(e.mirror.appModel,tz.ec.action)&&!!e.openFile),a=(0,$.d4)(e=>e.mirror.appModel.currentTool===tz.ec.tool),r=(0,gI.n6)(),l=aZ.z4.getIsExtension();(0,Q.useEffect)(()=>{!a&&t.current&&t.current===document.activeElement&&(0,w_.FT)()},[a,t]),(0,Q.useEffect)(()=>{if(n&&a){let e=!0;return(0,W5.W)("right",()=>{e&&lT.Y5.triggerAction("set-tool-default")}),()=>{e=!1}}},[n,a]);let i=!l&&r>0;return Q.createElement(Rz,{tooltip:{type:nO.Ib.LOOKUP,key:tz.ec.action,ariaLabel:(0,eO.t)(i?"fullscreen.accessibility.view_comments_with_unreads":"fullscreen.accessibility.view_comments")},isActive:a,onClick:function(e){var r;if(!n)return;let l=e.nativeEvent instanceof KeyboardEvent;a?(lT.Y5.triggerAction("set-tool-default"),l&&(null==(r=t.current)||r.focus())):oy.VU.get(tz.ec.action,"toolbar")(e)},recordingKey:e,onboardingKey:tz.ec.onboardingKey,disabled:!n,dataTestId:tz.ec.action,ref:t},Q.createElement("div",{className:ea()("figjam_comments_toolbar_item--iconContainer--4S5T1",{"figjam_comments_toolbar_item--withUnreadIndicator--JLSN4":i})},Q.createElement("div",{className:"figjam_comments_toolbar_item--iconMask--a0fae"},Q.createElement(zL,null))))}var ql=n(277644),qi=n(293775),qo=n(125233);function qs(){let e=(0,aD.GS)(),t=(0,ef.md)(FS.zS),n=(0,e_.Xr)(FS.bJ),a=(0,e_.Xr)(FS.tz),r=e?"right":"left",l=(0,eo.kc)().figjam_generate_handbrake,i=l?(0,eO.t)("whiteboard.ai_modal.generate_handbrake"):(0,eO.t)("whiteboard.ai_modal.generate"),o=(0,$.d4)(e=>e.mirror.appModel.topLevelMode===eU.lyf.LAYOUT);(0,Q.useEffect)(()=>{o||a()},[o,a]);let s={isActive:t===FS.Wl.TOP_BAR,onClick:()=>{t===FS.Wl.TOP_BAR?a():((0,W5.W)(r,a),n())},trackingProperties:{trackingDescriptor:c5.c.FIGJAM_AI_TOOLBAR_ITEM},onboardingKey:Di.bX,innerText:"AI Toolbar Entrypoint",disabled:l,dataTestId:"figjam-ai-toolbar-item"};return e?Q.createElement(Rz,{tooltip:{type:nO.Ib.TEXT,text:i},...s},Q.createElement(qi.C,null)):Q.createElement(RK,{icon:qo.A,addLeftMargin:!0,tooltipText:i,...s})}let qc=e=>e.multiplayer.allUsers.filter((e,t,n)=>t===n.findIndex(t=>t.userID===e.userID)).length,qd="seen_figjam_meetings_panel_gleam",qu={duration:1500,fill:"none"};function qm(){return Q.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{width:"100%",height:"100%"}},Q.createElement("g",{filter:"url(#filter0_d_3305_12330)"},Q.createElement("path",{d:"M20.2469 10.6915L20.2471 10.6913C21.1037 9.81654 20.693 8.21534 19.3809 8.01578C19.3809 8.01577 19.3808 8.01576 19.3807 8.01575L14.8346 7.32381L12.7941 2.99403C12.2333 1.80375 10.5666 1.79999 10.0055 2.99476C10.0054 2.99498 10.0053 2.99521 10.0052 2.99543L7.96535 7.32381L3.41928 8.01575C3.41921 8.01576 3.41914 8.01577 3.41908 8.01578C2.107 8.21534 1.69633 9.81654 2.55291 10.6913L2.55308 10.6915L5.86693 14.0741L5.08327 18.8605C5.08326 18.8606 5.08325 18.8606 5.08324 18.8607C4.88746 20.0559 6.12574 21.1809 7.34457 20.5087L11.4 18.2756L15.4554 20.5087C15.4556 20.5088 15.4558 20.5088 15.456 20.5089C16.6746 21.1805 17.9125 20.0557 17.7168 18.8607C17.7167 18.8606 17.7167 18.8606 17.7167 18.8605L16.9331 14.0741L20.2469 10.6915Z",fill:"#FFC700",stroke:"white",strokeWidth:"1.8"}),Q.createElement("path",{d:"M18.8131 12.5161C18.4636 11.4367 16.9364 11.4367 16.5869 12.5161L15.8361 14.8349L13.7375 15.7224C12.7851 16.1252 12.7851 17.4748 13.7375 17.8776L15.8361 18.7651L16.5869 21.0839C16.9364 22.1634 18.4636 22.1633 18.8131 21.0839L19.5639 18.7651L21.6625 17.8776C22.6149 17.4748 22.6149 16.1252 21.6625 15.7224L19.5639 14.8349L18.8131 12.5161Z",fill:"url(#paint0_linear_3305_12330)"}),Q.createElement("path",{d:"M18.8131 12.5161C18.4636 11.4367 16.9364 11.4367 16.5869 12.5161L15.8361 14.8349L13.7375 15.7224C12.7851 16.1252 12.7851 17.4748 13.7375 17.8776L15.8361 18.7651L16.5869 21.0839C16.9364 22.1634 18.4636 22.1633 18.8131 21.0839L19.5639 18.7651L21.6625 17.8776C22.6149 17.4748 22.6149 16.1252 21.6625 15.7224L19.5639 14.8349L18.8131 12.5161Z",fill:"url(#paint1_linear_3305_12330)"}),Q.createElement("path",{d:"M18.8131 12.5161C18.4636 11.4367 16.9364 11.4367 16.5869 12.5161L15.8361 14.8349L13.7375 15.7224C12.7851 16.1252 12.7851 17.4748 13.7375 17.8776L15.8361 18.7651L16.5869 21.0839C16.9364 22.1634 18.4636 22.1633 18.8131 21.0839L19.5639 18.7651L21.6625 17.8776C22.6149 17.4748 22.6149 16.1252 21.6625 15.7224L19.5639 14.8349L18.8131 12.5161Z",stroke:"white",strokeWidth:"1.8"})),Q.createElement("defs",null,Q.createElement("filter",{id:"filter0_d_3305_12330",x:"-1.5",y:"-1",width:"27",height:"27",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},Q.createElement("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),Q.createElement("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),Q.createElement("feOffset",{dy:"0.5"}),Q.createElement("feGaussianBlur",{stdDeviation:"0.75"}),Q.createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.35 0"}),Q.createElement("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_3305_12330"}),Q.createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_3305_12330",result:"shape"})),Q.createElement("linearGradient",{id:"paint0_linear_3305_12330",x1:"13.5",y1:"12",x2:"21.9",y2:"21.6",gradientUnits:"userSpaceOnUse"},Q.createElement("stop",{stopColor:"#F7C000"}),Q.createElement("stop",{offset:"1",stopColor:"#E8B604"})),Q.createElement("linearGradient",{id:"paint1_linear_3305_12330",x1:"21.9",y1:"21.6",x2:"13.5",y2:"12",gradientUnits:"userSpaceOnUse"},Q.createElement("stop",{stopColor:"white",stopOpacity:"0"}),Q.createElement("stop",{offset:"0.418743",stopColor:"white",stopOpacity:"0.15"}),Q.createElement("stop",{offset:"0.504534",stopColor:"white",stopOpacity:"0.63"}),Q.createElement("stop",{offset:"0.588015",stopColor:"white",stopOpacity:"0.15"}),Q.createElement("stop",{offset:"1",stopColor:"white",stopOpacity:"0"}))))}let qp="meeting_tools_toolbar--withHover--r7Sks",q_="meeting_tools_toolbar--selected--Lt0iR",qf="meeting_tools_toolbar--hide--t1ZI-";function qh(){let e=(0,aD.GS)(),t=(0,ef.md)(RF.Qs),n=(0,Ba.qU)(),a=(0,Ba.MR)(),r=(0,Ba.II)(),[l]=ZM(),{renderGleam:i}=function(e){let[t,n]=Q.useState(!1),a=(0,$.d4)(qc),r=(0,fQ.f)(qd),l=(0,$.wA)(),i=a>1&&!r;return Q.useEffect(()=>{if(!i)return;let t=window.setTimeout(()=>{n(!0),l(tB.b({[qd]:!0}))},(null==e?void 0:e.delay_ms)||1e4);return()=>clearTimeout(t)},[i,null==e?void 0:e.delay_ms,l]),{renderGleam:t}}({delay_ms:2e3}),o=Q.useCallback(()=>{t.isOpen?n({source:Ba.OO.MEETINGS_TOOLBAR}):a({source:Ba.OO.MEETINGS_TOOLBAR})},[t,n,a]),s=function(){let e=(0,Ba.II)();return e.length>0?1===e.length&&e.includes(RF.sx.VOTING)||2===e.length&&e.includes(RF.sx.VOTING)&&e.includes(RF.sx.TIMER)?"VOTE":"MUSIC":"ALL"}(),c=function(){let e=(0,Ba.II)();return 0===e.length?ZG.TERTIARY:e.includes(RF.sx.TIMER)&&e.includes(RF.sx.VOTING)?ZG.SECONDARY:ZG.DEFAULT}(),d=r.includes(RF.sx.TIMER)||0===r.length,u=function(){let e=(0,Ba.II)(),t=(0,LA.C3)(),n=(0,$.d4)(e=>e.music.music),a=YD((null==n?void 0:n.selectedSongID)||"");return e.includes(RF.sx.VOTING)&&t?(0,LP.DG)(t):e.includes(RF.sx.MUSIC)&&1===e.length?null==a?void 0:a.title:void 0}(),m=Q.useRef(null),p=Q.useRef(null),_=Q.useRef(null),f=Q.useRef(null),h=Q.useRef(null);!function(e,t,n,a,r,l){let[i,o]=Q.useState([]);Q.useLayoutEffect(()=>{let l={transform:"scale(1)",boxShadow:"0px 0px 0px 0px var(--color-border)"},i={backgroundColor:"var(--color-bg-figjam)"},s=new KeyframeEffect(e.current,[{offset:0,...l},{offset:.2,...l},{offset:.4,transform:"scale(1.05)",boxShadow:"0px 2.5px 5px 0px var(--color-border)"},{offset:.5,...l},{offset:.6,transform:"scale(1.025)",boxShadow:"0px 1.25px 2.5px 0px var(--color-border)"},{offset:.8,...l},{offset:1,...l}],qu),c=new KeyframeEffect(r.current,[{offset:.4,...i},{offset:.62,...i},{offset:.77,backgroundColor:"var(--color-bg-secondary)"}],qu),d=new KeyframeEffect(t.current,[{offset:0,backgroundColor:"#959595"},{offset:.5,backgroundColor:"#959595"},{offset:1,backgroundColor:"var(--color-bg-figjam)"}],qu),u=new KeyframeEffect(a.current,[{offset:0,filter:"grayscale(80%)"},{offset:.5,filter:"grayscale(80%)"},{offset:1,filter:"grayscale(0%)"}],qu);o([s,d,new KeyframeEffect(n.current,[{offset:.4,color:"var(--color-text-onfigjam-tertiary)"},{offset:.62,color:"var(--color-text-onfigjam-tertiary)"},{offset:.77,color:"var(--color-text-tertiary)"}],qu),u,c].map(e=>new Animation(e,document.timeline)))},[e,t,n,a,r]),function(e,t,n){let a=(0,ue.Z)(e),r=(0,ef.md)(RF.Qs),l=(0,Ba.II)(),i=r.isOpen||l.length>0;Q.useEffect(()=>{i||(e&&!a&&t(),!e&&a&&n())},[e,t,n,a,l,i])}(l,Q.useCallback(()=>{i.forEach(e=>{e.playbackRate=1,e.play()})},[i]),Q.useCallback(()=>{i.forEach(e=>{e.playbackRate=-1,e.play()})},[i]))}(m,_,f,h,p,i);let g=function(e){let t=(0,ef.md)(RF.Qs),n=(0,Ba.II)();return!e&&!t.isOpen&&0===n.length}(i),E=(0,Ba.$3)(),v=(0,LP.Av)();return Q.createElement("div",{ref:m,className:ea()("meeting_tools_toolbar--toolbarItemContainer--3HgdD",{"meeting_tools_toolbar--meetDeviceToolbarItemContainer--8R79s":(0,Eg.eM)()})},Q.createElement("button",{ref:p,className:ea()("meeting_tools_toolbar--toolbarItemButton--VBNmh",{[q_]:t.isOpen,[qp]:!E}),onClick:nh.rf("meetingsPanelToolbar","click",o),"data-tooltip-type":nO.Ib.TEXT,"data-tooltip":v?(0,eO.t)("meetings_panel.toolbar_tooltip"):(0,eO.t)("meetings_panel.toolbar_tooltip.no_voting"),"aria-label":v?(0,eO.t)("meetings_panel.toolbar.aria_label"):(0,eO.t)("meetings_panel.toolbar.aria_label.no_voting"),"aria-pressed":t.isOpen,"data-onboarding-key":"meeting-panel-button"},Q.createElement("div",{className:ea()("meeting_tools_toolbar--iconContainer--n2hs5",{"meeting_tools_toolbar--single--h9cHX":"ALL"!==s})},Q.createElement("div",{className:ea()("meeting_tools_toolbar--recordIcon--D6vfx meeting_tools_toolbar--icon--EVBBt",{[qf]:"MUSIC"!==s&&"ALL"!==s})},Q.createElement(Y0,{size:"xsmall",maskAlbumArtWhenPaused:!0,maskRef:_,useGrayMask:g})),Q.createElement("div",{className:ea()("meeting_tools_toolbar--starIcon--37MdY meeting_tools_toolbar--icon--EVBBt",{"meeting_tools_toolbar--leftAlign--G1Vob":"VOTE"===s,[qf]:"VOTE"!==s&&"ALL"!==s})},Q.createElement("div",{ref:h,className:ea()("meeting_tools_toolbar--starContainer--4lbzy",{"meeting_tools_toolbar--grayedOut--deQf-":g})},Q.createElement(qm,null)))),Q.createElement("div",{className:ea()("meeting_tools_toolbar--textWrapper--eikYA text--fontPos11--2LvXf text--_fontBase--QdLsd ellipsis--ellipsis--Tjyfa",{[q_]:t.isOpen})},u),Q.createElement(qg,{width:u&&d?8:0}),Q.createElement("div",{className:ea()("meeting_tools_toolbar--minimizedTimerWrapper--adc47",{[qf]:!d})},r.includes(RF.sx.TIMER)?Q.createElement(Q.Fragment,null,Q.createElement(Zz,{isSelected:t.isOpen,prominence:c,size:ZV.XSMALL,withoutTimeShadow:!0,withoutFlashOnPause:!0,withoutUnderline:!0,timeDivRef:f,isInUI3Toolbar:e})):Q.createElement(Q.Fragment,null,Q.createElement(Zj,{isSelected:t.isOpen,prominence:c,size:ZV.XSMALL,withoutTimeShadow:!0,withoutUnderline:!0,timeDivRef:f,timeInSeconds:(0,Bn.RE)(l),isInUI3Toolbar:e})))),r.includes(RF.sx.MUSIC)&&Q.createElement("div",{className:ea()("meeting_tools_toolbar--volumeControlContainer--gXf-m",{[q_]:t.isOpen,[qf]:!r.includes(RF.sx.MUSIC),[qp]:!E})},Q.createElement(X1,{volumeJustification:Xj.CENTER,isMinimized:!0,iconColor:t.isOpen?e?XJ.FIGJAM:XJ.ON_FIGJAM:XJ.DEFAULT,blockButtonTooltip:!0,sliderVisibilitySetting:t.isOpen||E?X0.NEVER:X0.DEFAULT,muteOnTouch:E})))}function qg(e){return Q.createElement("div",{style:{width:e.width||0}})}var qE=((K=qE||{}).ALL="ALL",K.MUSIC="MUSIC",K.VOTE="VOTE",K);function qv({hasOpenPanel:e}){let t=(0,$.wA)(),n=(0,t_.q5)(),a=(0,aX.U)(),r=(0,$.d4)(e=>e.multiplayer),l=(0,jz.dR)(),i=(0,at.iZ)(),o=Q.useMemo(()=>r.allUsers.find(e=>e.sessionID===r.sessionID)||null,[r.allUsers,r.sessionID]),s=(0,jW.B4)(),c=(0,ae.aV)(),d=(0,$.d4)(e=>e.mirror.appModel.topLevelMode===eU.lyf.HISTORY),u=!(0,SF.yT)()&&(0,LI.Uy)(),m=ec.Ay.isMeetDevice,p=(0,wu.DG)((null==n?void 0:n.key)||"").enabled,_=EL(),f=Q.useCallback(e=>{(0,jj.Lx)(e,null==o?void 0:o.sessionID,t,!1,r,l,s)},[null==o?void 0:o.sessionID,t,r,l,s]);return Q.createElement(cu.V,{className:ea()("whiteboard_right_toolbar_ui3--container--0oqgx",eK.Dm),"data-cancel-insertable-resource-drag-and-drop":!0},Q.createElement(qn,{hasHoverableBackground:!_||e},Q.createElement("div",{className:"whiteboard_right_toolbar_ui3--controls--QjgMx"},Q.createElement("div",{className:"whiteboard_right_toolbar_ui3--leftSection--Z-X9Z"},Q.createElement(ON.sK,{isUI3:!0}),n&&!d&&Q.createElement(ql.k,{fileKey:n.key}),r&&n&&o&&Q.createElement(jj.v7,{dropdownShown:a,multiplayer:r,currentUser:o,onUserClick:f})),!d&&Q.createElement("div",{className:"whiteboard_right_toolbar_ui3--middleSection--g5Yso"},Q.createElement(qh,null),u&&Q.createElement(qs,null),Q.createElement(RZ,null),!c&&!m&&Q.createElement(qa,null)),n&&Q.createElement(jY.w,{user:i,editingFile:n,isFileInWorkshop:p}),!i&&!m&&Q.createElement(ER.tO,null))))}let qy="whiteboard_ui--uiHidden--Hsyad",qb="whiteboard_ui--stackedContainer--2mtV9",qC=(0,rT.jz)(uT.uj0),qw=Q.memo(function(){let e=(0,W2.Vi)(),t=(0,$.d4)(e=>e.mirror.appModel.topLevelMode===cl.lyf.HISTORY),n=(0,ae.p8)("showUi"),a=(0,aD.GS)();(function(){let e=(0,Nj.Kx)(),t=(0,$.d4)(e=>e.timer.modalState),n=(0,ef.md)(RF.Qs);Q.useEffect(()=>{(null==e?void 0:e.updateTimerModalState)&&e.updateTimerModalState(n.isOpen?"open":"closed")},[e,t,n.isOpen]);let a=(0,$.d4)(e=>e.timer.time);Q.useEffect(()=>{(null==e?void 0:e.updateTimerTime)&&a&&e.updateTimerTime(a)},[e,a])})(),(0,Yw.M)(),function(){let e=(0,e_.Xr)(RF.Qs);Q.useEffect(()=>()=>{e({type:"CLOSE"})},[e])}();let r=(0,Nj.Kx)(),l=n&&!(null==r?void 0:r.shouldOptimizeForIpadApp)&&e;return Q.createElement(a?qx:qT,{showUi:n,inVersionHistory:t,isCommentsPanelOpen:l})});function qT({showUi:e,inVersionHistory:t,isCommentsPanelOpen:n}){let a=YI(),r=(0,wQ.Lk)(),l=(0,eo.kc)().figjam_pages_in_figjam,i=(0,Bn.FR)(),o=(0,W2.Vi)();return t?t&&e?Q.createElement(Yx,{className:"whiteboard_ui--versionHistoryRightSidebar--7wtYE whiteboard_ui--rightSidebar--CJHYf whiteboard_ui--figjamModalSidebar--TXgbQ whiteboard_ui--sidebarBase--2SwnS",style:{bottom:a}},Q.createElement(rw.yU,null)):null:Q.createElement(Q.Fragment,null,Q.createElement("div",{className:ea()("whiteboard_ui--leftSidebar--WE2SD whiteboard_ui--figjamModalSidebar--TXgbQ whiteboard_ui--sidebarBase--2SwnS",eK.Dm,{[qy]:!e}),style:{bottom:a}},l&&Q.createElement(qt,null),i&&Q.createElement(X5,null)),Q.createElement("div",{className:ea()("whiteboard_ui--rightSidebar--CJHYf whiteboard_ui--figjamModalSidebar--TXgbQ whiteboard_ui--sidebarBase--2SwnS",{[qy]:!e}),style:{bottom:a,right:n?qC+16:16}},Q.createElement("div",{className:ea()(qb,eK.Dm)},r&&Q.createElement(Lu,null),!i&&Q.createElement(X5,null))),n&&Q.createElement("div",{className:"whiteboard_ui--commentsContainer--HLR1i"},Q.createElement(YT.L,{showSidebar:o,scrollable:!1},Q.createElement(gA.B,{hidePageName:!0,hideResolve:!1,onCloseButton:()=>eU.glU.triggerActionInUserEditScope("set-tool-default",null)}))))}function qx({showUi:e,inVersionHistory:t,isCommentsPanelOpen:n}){let a=(0,ef.md)(RF.Qs).isOpen,r=(0,ef.md)(FS.zS)===FS.Wl.TOP_BAR,l=(0,ef.md)(P0),i=YI(),o=n||a||r||l||t;return t&&!e?null:Q.createElement("div",{className:"whiteboard_ui--rightSidebarUI3--9Xzv3",style:{bottom:i}},Q.createElement("div",{className:ea()(qb,eK.Dm)},e&&Q.createElement(qv,{hasOpenPanel:o}),t?Q.createElement(qk,null):Q.createElement(qN,{isCommentsPanelOpen:n})))}function qN({isCommentsPanelOpen:e}){let t=(0,wQ.Lk)();return Q.createElement(Q.Fragment,null,t&&Q.createElement(Lu,null),Q.createElement(X5,null),e&&Q.createElement("div",{className:"whiteboard_ui--commentsContainerUI3--0VMH4"},Q.createElement(Yx,null,Q.createElement(gA.B,{hidePageName:!0,hideResolve:!1,onCloseButton:()=>eU.glU.triggerActionInUserEditScope("set-tool-default",null)}))))}function qk(){return Q.createElement(Yx,null,Q.createElement(rw.yU,null))}var qS=n(776984);function qI(){let e=!!(0,fQ.f)("not_gen_0"),t=(0,ef.md)(Mv.NT),n=(0,ef.md)(Mv.g5),{isShowing:a,complete:r,show:l}=(0,tp.e)({overlay:tv.Lg0,priority:th.N.HIGH_PRIORITY_MODAL},[t,n]);return((0,ts.h)(()=>{l({canShow:(t,n)=>!(e||(0,FA.d2)({emailValidatedAt:n,jobTitle:t}))})}),a)?Q.createElement(FA.vm,{onClose:ey.lQ,onClickPrimaryCta:()=>{r()},isShowing:a,onManualDismiss:()=>{r()}}):null}var qA=n(385101),qP=n(893308),qO=n(426911),qL=n(461364),qM=n(436420),qD=n(339965);let qR="inline_preview_device_frames--previewDeviceImage--pSzed",qF="inline_preview_device_frames--deviceFrameHitTargetSvg--w7930",qB="inline_preview_device_frames--rotatedHorizontal--5yjwl",qU="hit-target-resize";function qH(e){var t;let n=null==(t=qO.hY[e.devicePresetIdentifier].inlinePreviewInfo)?void 0:t.hitTargetSvgUrl,[a,r]=Q.useState(null);(0,Q.useEffect)(()=>{fetch(n).then(e=>e.text()).then(e=>r(e)).catch(()=>console.warn("Failed to fetch hit target SVG. Falling back to rectangular resize boundary."))},[n]);let l=Q.useMemo(()=>a?(0,eM.V)(a):null,[a]);return null!==l?Q.createElement(qV,{...e,hitTargetSvg:l}):Q.createElement(qD.K,{...e})}function qV({resizeTo:e,getCurrentContainerBounds:t,lockAspectRatio:n,isResizing:a,setIsResizing:r,onResizeEnd:l,setResizeDirections:i,devicePresetIdentifier:o,isDeviceRotatedCCW:s,hitTargetSvg:c,hidden:d,recordingKey:u}){let m=Q.useCallback(()=>{let e=t(),n=(16/((s?e.bottom-e.top:e.right-e.left)/qO.hY[o].imageSize.x)).toFixed(2);document.querySelectorAll(`[id^=${qU}]`).forEach(e=>e.setAttribute("stroke-width",`${n}`))},[o,s,t]);(0,Q.useEffect)(()=>{m()},[m]);let p=Q.useCallback(()=>{m(),null==l||l()},[l,m]),{startResizing:_}=(0,qD.Q)({resizeTo:e,getCurrentContainerBounds:t,isResizing:a,setIsResizing:r,setResizeDirections:i,onResizeEnd:p,lockAspectRatio:n,hidden:d,recordingKey:u}),f=Q.useRef(null),h=Q.useRef(null),g=Q.useMemo(()=>(0,qO.qt)(o)===qO.bq.WATCH,[o]),E=Q.useCallback(e=>{let t=e.currentTarget.getBoundingClientRect(),n=e.clientX-t.left,a=e.clientY-t.top;return g?qK({x:n,y:a},t):qG({x:n,y:a},t)},[g]),v=nh.rf(u,"mousedown",Q.useCallback(e=>{e.stopPropagation(),e.preventDefault(),_(E(e),{x:e.clientX,y:e.clientY})},[E,_]),{recordMetadata:e=>{let t=e.currentTarget;return{clientX:e.clientX,clientY:e.clientY,svgElementId:t.id}},playbackMetadata:e=>({currentTarget:document.querySelector(`#${e.svgElementId}`),clientX:e.clientX,clientY:e.clientY})}),y=nh.rf(nh.Pt(u,"deviceFrameResizeTarget"),"mousemove",Q.useCallback(e=>{if(a)return nh.aH;e.stopPropagation(),e.preventDefault();let t=E(e),n=e.currentTarget;h.current&&n.classList.remove(h.current);let r=(0,qM.as)(t);r&&n.classList.add(r),h.current=r},[E,a]),{recordMetadata:e=>{let t=e.currentTarget;return{clientX:e.clientX,clientY:e.clientY,svgElementId:t.id}},playbackMetadata:e=>({currentTarget:document.querySelector(`#${e.svgElementId}`),clientX:e.clientX,clientY:e.clientY})}),b=Q.useCallback(e=>{e.onmousemove=y,e.onmousedown=v},[v,y]);return((0,Q.useEffect)(()=>{document.querySelectorAll(`[id^=${qU}]`).forEach(e=>b(e))},[o,b]),d)?null:s?(()=>{let e=qO.hY[o].imageSize,t=e.x/e.y;return Q.createElement("div",null,Q.createElement(eM.B,{svg:c,svgClassName:ea()(qB,"inline_preview_device_frames--positionRotatedHorizontalDeviceFrameHitTarget--zmylC",qF),svgWidth:`${100*t}%`,ref:f,useOriginalSrcFills_DEPRECATED:!0}))})():Q.createElement("div",null,Q.createElement(eM.B,{svg:c,svgClassName:qF,ref:f,useOriginalSrcFills_DEPRECATED:!0}))}let qG=(e,t)=>{let{x:n,y:a}=e,r=.1*Math.min(t.width,t.height),l=[];return a<r?l.push(qM.OP.TOP):a>t.height-r&&l.push(qM.OP.BOTTOM),n<r?l.push(qM.OP.LEFT):n>t.width-r&&l.push(qM.OP.RIGHT),l},qK=(e,t)=>{let{x:n,y:a}=e,r=.1*t.width;if(a<r)return[qM.OP.TOP];if(a>t.height-r)return[qM.OP.BOTTOM];if(n<r)return[qM.OP.LEFT];if(n>t.width-r)return[qM.OP.RIGHT];let l=[];return a<t.height/2?l.push(qM.OP.TOP):l.push(qM.OP.BOTTOM),n<t.width/2?l.push(qM.OP.LEFT):l.push(qM.OP.RIGHT),l};var qW=n(587572);let qz=["APPLE_IPHONE_14_PRO","APPLE_IPHONE_14_PLUS","APPLE_IPHONE_15","APPLE_WATCH_45MM"],qj=e=>qz.some(t=>e.startsWith(t)),qY="inline_preview_modal--iframeContainer--ylTh5";function qZ({children:e,initialViewerSize:t,isDeviceFrameShown:n}){var a;let r="data:,",l="",i={},o=!1,s=1,c=!1;if(n){let e=null==(a=tN.qo.instance.getCurrentPage())?void 0:a.prototypeDevice;(0,re.B1)(e,"prototypeDevice should be set when device frame is shown");let{presetIdentifier:n,rotation:d}=e,u=qO.hY[n],m=null==u?void 0:u.inlinePreviewInfo;(0,re.B1)(m,"inlinePreviewDeviceData should exist since device is supported for inline preview"),r=u.url,o=qj(n),c=d===eU.xOL.CCW_90;let p=u.getI18nDeviceName(),_=u.getI18nStyleName();l=`${p} (${_})`;let{idealDeviceSize:f,framePresetSize:h,offset:g}=(0,qW.is)(n,d),E=(0,qW.Ho)(t,h,f);s=E.x/E.y;let v=(0,qW.Ho)(t,h,g),y={x:t.x/E.x*100,y:t.y/E.y*100},b={x:v.x/E.x*100,y:v.y/E.y*100};i={position:"absolute",width:`${y.x}%`,height:`${y.y}%`,left:`${b.x}%`,top:`${b.y}%`}}let d=n?"inline_preview_device_frames--previewDeviceContainer--fNvYG":qY,u=ea()({[qY]:!0,"inline_preview_device_frames--fillGapsBetweenDeviceAndIframe--DuNNK":n,"inline_preview_device_frames--hideCornersForOverlyRoundedDevice--Rn1BM":o});return Q.createElement("div",{className:d},n&&(c?(()=>{let e=1/s;return Q.createElement("div",{style:{aspectRatio:s}},Q.createElement("img",{src:r,className:ea()(qB,"inline_preview_device_frames--positionRotatedHorizontalDeviceFrame--mPJzu",qR),style:{width:`${100*e}%`},alt:l,"data-testid":"inline-preview-device-image"}))})():Q.createElement("img",{src:r,className:qR,alt:l,"data-testid":"inline-preview-device-image"})),Q.createElement("div",{style:i,className:u},e))}var qX=n(287419),qq=n(39004),qJ=n(717682),qQ=n(885722),q$=n(323322),q0=n(122975);let q1={x:600,y:600},q2="inlinePreviewModal",q5=e=>{let t=(0,ez.MG)({subscribeToUpdates_expensive:!0}),n=(0,ez.TZ)({subscribeToUpdates_expensive:!0}),a=(0,ci.GQ)(),{isLeftPanelCollapsed:r}=(0,ci.Ye)(),l=r?0:a;return(0,Q.useMemo)(()=>e?new lB.Mi(t+l+qA.wR,n+(0,rT.jz)(tI.designToolbarHeight)):new lB.Mi(t+qA.wR,n+qA.wR),[e,t,n,l])},q4=Q.memo(function({pageId:e,viewerControl:t}){let[{previewKeyForErrorBoundary:n},a]=(0,ef.fp)(t.stateAtom);return Q.createElement(eP.tH,{key:n,boundaryKey:"InlinePreviewModal",fallback:eP.H4.NONE_I_KNOW_WHAT_IM_DOING,onError:()=>{if((0,er.sx)("inline_preview_crashed",{},{forwardToDatadog:!0}),a({type:"HANDLE_PREVIEW_CRASHED"}),(0,pF.Lg)()||(0,pF.nl)()||(0,eo.b5)())throw Error("Inline preview crashed")}},Q.createElement(q3,{pageId:e,viewerControl:t}))}),q3=Q.memo(function({pageId:e,viewerControl:t}){var n,a;let r=Q.useRef(null),l=(0,aD.GS)(),i=(0,$.d4)(e=>{var t;return null==(t=e.openFile)?void 0:t.key}),o=(0,Q.useRef)(!1),[{currentPresentedNode:s,navigateBackwardEnabled:c,navigateForwardEnabled:d,modalStatus:u,sizeInfo:m,showDeviceFrameEnabled:p,scalingMode:_},f]=(0,ef.fp)(t.stateAtom),h=(0,$.wA)(),g=(0,ae.eY)(),E=(0,Q.useMemo)(()=>u===qX.b.OPEN,[u]),v=(null==m?void 0:m.initialViewerSize)??q1,y=(0,ue.Z)(v),b=q5(l),[C,w]=Q.useState(b),[T,x]=Q.useState(v.x),[N,k]=Q.useState(v.y+qM.uF),S=(null==(n=tN.qo.instance.getCurrentPage())?void 0:n.prototypeDevice)||null,I=null==S?void 0:S.presetIdentifier,A=!!I&&(0,qO.L_)(I),P=E&&A&&p,{showing:O}=(0,aX.B)(t.overflowDropdownType),L=(0,pn.Z)(),M=(0,eG.J2)(eU.Ez5.singleSlideView().isInSingleSlideView),[D,R]=Q.useState(!1),F=Q.useCallback(()=>{R(!0),lT.Y5.triggerAction("inline-preview-iframe-focus-state-changed",{isFocused:!0})},[R]),B=(0,ED.s)(),U=D||O?"inline_preview_modal--previewFocused--DQTOg":"inline_preview_modal--previewNotFocused--cr3Ii",H=Q.useCallback(e=>{h((0,TT.Zh)({name:"prototype.close_inline_viewer",params:{source:e}})),f({type:"CLOSE_INLINE_PREVIEW"})},[h,f]),V=Q.useCallback(()=>((0,re.vA)(!!N),(0,re.vA)(!!T),{x:T,y:N-qM.uF}),[N,T]),G=Q.useCallback(e=>{x(e.x),k(e.y+qM.uF)},[x,k]),K=Q.useCallback(()=>{let e=V();if(!P)return e;(0,re.B1)(I,"devicePresetIdentifier must be set");let t=S.rotation,{framePresetSize:n,idealDeviceSize:a}=(0,qW.is)(I,t);return(0,qW.BX)(e,n,a)},[I,V,P,null==S?void 0:S.rotation]);Q.useEffect(()=>{o.current||w(b)},[b]),Q.useEffect(()=>{f({type:"SET_CURRENT_VIEWER_SIZE_CALLBACK",payload:K})},[f,K]);let W=Q.useMemo(()=>{var e;return(null==(e=null==m?void 0:m.breakpoint)?void 0:e.type)!==qA.l5.DEVICE},[m]),z=Q.useCallback(e=>{if(!W)return;let t=K();(0,re.vA)(!!s,"currentPresentedNode must be set");let n=g.get(s);(0,re.vA)(!!n,"expected selectedNode to exist");let a=(0,qA.HS)(g,n),r=(0,qA.hX)(t,n,a,g);(0,re.vA)(r.breakpoint.type!==qA.l5.DEVICE,"fit to aspect ratio not allowed for device"),G(r.initialViewerSize),h((0,TT.Zh)({name:"prototype.resize_to_fit_aspect_ratio",params:{source:e}}))},[W,K,s,g,G,h]),j=()=>{if(!s)return!1;let e=!1;if(P){let{idealDeviceSize:t}=(0,qW.is)(I,S.rotation);e=t.x>=qA.Fe&&t.y>=qA.Sq}else{let t=g.get(s);if(!t)return!1;let n=(0,qA.HS)(g,t),a=(0,qA.nw)(n,t);e=a.x>=qA.Fe&&a.y>=qA.Sq}return e},Y=Q.useCallback(e=>{f({type:"SET_PREVIEW_IS_RESPONSIVE",payload:e})},[f]),Z=Q.useCallback(()=>{f({type:"RESIZE_MODAL",payload:{sceneGraph:g}})},[f,g]),X=Q.useCallback(e=>{if(e){let t=(0,ez.QZ)({nodeId:e,alwaysPan:!0,maxScale:.6});B?u===qX.b.OPEN&&(L(t),M&&eU.Ez5.singleSlideView().enterSingleSlideView(e,!0)):L(t)}},[L,B,M,u]);Q.useEffect(()=>{f({type:"SET_SCROLL_CALLBACK",payload:X})},[f,X]);let q=Q.useCallback(e=>{G({x:e.x,y:e.y+(0,rT.jz)(uT.m8f)})},[G]),J=Q.useMemo(()=>{var e;if(P&&(null==(e=qO.hY[I].inlinePreviewInfo)?void 0:e.hitTargetSvgUrl))return function(e){let t=S.rotation===eU.xOL.CCW_90;return Q.createElement(qH,{...e,devicePresetIdentifier:I,isDeviceRotatedCCW:t})}},[P,I,null==S?void 0:S.rotation]),ee=Q.useCallback(e=>{(0,re.vA)((null==m?void 0:m.breakpoint.type)===qA.l5.DEVICE,"device must be set to toggle device frame"),(0,re.vA)(!!S,"prototypeDevice must be set to toggle device frame");let t=K();if(e){let e=S.presetIdentifier,{idealDeviceSize:n,framePresetSize:a}=(0,qW.is)(e,S.rotation);q((0,qW.Ho)(t,a,n))}else G(t)},[null==m?void 0:m.breakpoint.type,S,K,G,q]);(0,re.vA)(!E||null!==m,"sizeInfo should always be set when open"),Q.useLayoutEffect(()=>{if(y!==v){if(P){let{idealDeviceSize:e,framePresetSize:t}=(0,qW.is)(I,S.rotation);q((0,qW.Ho)(v,t,e))}else G(v)}},[v,y,I,P,S,q,G]),Q.useEffect(()=>{I&&(0,qO.L_)(I)&&(0,qO.Gn)(I)},[I]);let et=Q.useCallback(()=>{let e=V(),{width:t,height:n}=lT.Y5.getViewportInfo(),a=e.x/t,r=e.y/n;h((0,TT.Zh)({name:"prototype.inline_preview_manually_resized",params:{isDeviceFrameShown:P,horizontalCoverage:a,verticalCoverage:r}}))},[h,V,P]),en=(0,Q.useMemo)(()=>{let e={height:"100%"};return l&&!P?{...e,borderBottomLeftRadius:"var(--radius-small)",borderBottomRightRadius:"var(--radius-small)"}:e},[P,l]);if(u===qX.b.NOT_LOADED)return null;let er=ea()(B?"inline_preview_modal--previewModalSlides--0PFWB":"inline_preview_modal--previewModal--FO-5S",P?null:U),el=ea()(P?[U,"inline_preview_device_frames--previewDeviceHeader--KHpCv"]:null,{"inline_preview_modal--previewModalHeader--parjV":B}),{x:ei,y:eo}=(0,qA.ut)(tN.qo.instance,!0),es=!E||!(null==m?void 0:m.initialViewerSize);return Q.createElement(dn.BL,{position:C,setPosition:w,width:T,setWidth:x,height:N,setHeight:k,recordingKey:q2,ignoreCloseShortcut:!E,title:Q.createElement(q7,{navigateBackwardEnabled:c,navigateForwardEnabled:d,width:T,onBack:t.onBack,onForward:t.onForward,onRestart:t.onRestart}),tabIndex:0,onFocus:()=>{t.onFocus()||F()},onEdgeDoubleClick:()=>z("double_click"),onResize:Z,onResizeEnd:et,onClose:()=>{H("modal")},onDragStart:()=>o.current=!0,hidden:es,frameStyle:en,transparentContentBackground:P,containerClassName:er,containerFillsPage:B,headerClassName:el,minHeight:eo,minWidth:ei,preventKeyboardFocus:!0,allowResizeHeight:D&&!B,allowResizeWidth:D&&!B,disableDragging:B,alwaysEnsureHeaderModalOnScreen:!0,allowPartialHeaderOnScreen:!0,makeContentPixelPerfect:!0,dragHeaderOnly:!0,lockAspectRatio:(null==(a=null==m?void 0:m.breakpoint)?void 0:a.type)===qA.l5.DEVICE,customButton:Q.createElement(q6,{viewerControl:t,allowSizeReset:W,allowActualSizeReset:j(),isPrototypeDeviceSet:!!S&&S.type!==eU.XQq.NONE,isPreviewFittedToAspectRatio:()=>{if(!s||!W)return!1;let e=g.get(s);if(!e)return!1;let t=K(),n=(0,qA.HS)(g,e),a=(0,qA.hX)(t,e,n,g),r=t.x/t.y,l=a.initialViewerSize.x/a.initialViewerSize.y;return(0,qL.o)(r,l)},isDeviceSupportedForPreview:A,openFileKey:i,showOverflow:!B,showFullscreenButton:B,iframeRef:r,resizeToFitAspectRatio:()=>z("overflow_menu"),scrollToNode:X,resizeToActualSize:()=>{if(!j())return;(0,re.vA)(!!s),(0,re.vA)(!!m);let e=g.get(s);(0,re.vA)(!!e),h((0,TT.Zh)({name:"prototype.resize_to_actual_size"}));let t=P?(0,qW.is)(I,S.rotation).idealDeviceSize:(0,qA.nw)(m.breakpoint,e),n=(e,t)=>{G(e),w(new lB.Mi(t.x,t.y))},a=V();(0,qA.UB)(t,h,()=>n(a,C)),G(t)},isPreviewShownAtActualSize:()=>{if(!s||!r.current)return!1;let e=g.get(s);if(!e||!(null==m?void 0:m.breakpoint))return!1;let t=P?(0,qW.is)(I,S.rotation).framePresetSize:(0,qA.nw)(m.breakpoint,e),n=K();return(0,qL.o)(t.x,n.x,1e-4)&&(0,qL.o)(t.y,n.y,1e-4)},setPreviewIsResponsive:Y,isPreviewResponsive:"responsive"===_,closeInlinePreview:H,onToggleShowDeviceFrame:ee,width:T}),ResizeTargetComponent:J},(()=>{let n=t.ViewerComponent;return Q.createElement(qZ,{initialViewerSize:v,isDeviceFrameShown:P},Q.createElement(n,{ref:r,key:e,pageId:e,openFileKey:i,closeInlinePreview:H,isOpen:E,iframeFocused:D,setIframeFocused:R,onIframeFocus:F}))})())});function q6({allowSizeReset:e,allowActualSizeReset:t,isPrototypeDeviceSet:n,isDeviceSupportedForPreview:a,openFileKey:r,resizeToFitAspectRatio:l,scrollToNode:i,showOverflow:o,showFullscreenButton:s,iframeRef:c,resizeToActualSize:d,isPreviewShownAtActualSize:u,setPreviewIsResponsive:m,isPreviewResponsive:p,closeInlinePreview:_,onToggleShowDeviceFrame:f,width:h,isPreviewFittedToAspectRatio:g,viewerControl:E}){let v=(0,$.wA)(),y=Q.useRef(null),[{currentPresentedNode:b,targetFrameFollowingEnabled:C,showDeviceFrameEnabled:w},T]=(0,ef.fp)(E.stateAtom),{showing:x,toggle:N}=(0,aX.B)(E.overflowDropdownType),k=Q.useCallback(()=>{if(!r)throw Error("Expected openFileKey to exist");if(!b)throw Error("openPrototypeInNewTab called without currentPresentedNode");v(qP.F({fileKey:r,nodeId:b,startingPointNodeId:eU.X3B.getActivePrototypeStartingPointNodeIdOnCurrentPage(),source:"inline_viewer",scalingMode:p?"responsive":void 0})),_("open_in_new_tab")},[r,b,v,p,_]),S=Q.useCallback(()=>{let e=!C;v((0,TT.Zh)({name:"prototype.toggle_follow_previewed_frame",params:{enabled:e}})),T({type:"TOGGLE_TARGET_FRAME_FOLLOWING"}),i(b)},[v,T,C,i,b]),I=Q.useCallback(()=>{let e=!w;v((0,TT.Zh)({name:"prototype.toggle_show_device_frame",params:{enabled:e,location:"preview"}})),T({type:"TOGGLE_SHOW_DEVICE_FRAME"}),f(e)},[v,w,f,T]),A=Q.useCallback(()=>[{displayText:(0,eO.t)("inline_preview.overflow_menu.actual_size_100_percent"),name:"actual-size",recordingKey:"actualSizeButton",callback:d,disabled:!t,isChecked:u(),"data-onboarding-key":"resize-to-actual-size"},{displayText:(0,eO.t)("inline_preview.overflow_menu.resize_to_aspect_ratio"),name:"reset-size",recordingKey:"resetSizeButton",callback:l,isChecked:g(),disabled:!e,hidden:n},{separator:!0,displayText:"",hidden:(0,eo.kc)().prototype_responsive_viewer},{displayText:(0,eO.t)("inline_preview.overflow_menu.show_device_frame"),name:"show-device-frame",recordingKey:"showDeviceFrame",callback:I,isChecked:w&&a,disabled:!a,hidden:!n},{displayText:(0,eO.t)("inline_preview.overflow_menu.follow_active_frame"),name:"follow-active-frame",recordingKey:"followActiveFrame",callback:S,isChecked:C,hidden:(0,eo.kc)().prototype_responsive_viewer},{displayText:(0,eO.t)("inline_preview.new_tab"),recordingKey:"openInNewTabButton",name:"open-in-new-tab",callback:k,hidden:h>qA.kl||(0,eo.kc)().prototype_responsive_viewer},{separator:!0,displayText:""},{displayText:a?"Fixed size":"Fit width",name:a?"fixed-size":"fit-width",isChecked:!p,recordingKey:a?"fixedSizeButton":"fitWidthButton",callback:()=>{m(!1)},hidden:!(0,eo.kc)().prototype_responsive_viewer},{displayText:(0,eO.t)("inline_preview.overflow_menu.responsive"),name:"responsive",recordingKey:"responsiveButton",callback:()=>{m(!0)},isChecked:p,hidden:!(0,eo.kc)().prototype_responsive_viewer},{separator:!0,displayText:""},{displayText:(0,eO.t)("inline_preview.overflow_menu.follow_active_frame"),name:"follow-active-frame",recordingKey:"followActiveFrame",callback:S,isChecked:C,hidden:!(0,eo.kc)().prototype_responsive_viewer},{displayText:(0,eO.t)("inline_preview.new_tab"),recordingKey:"openInNewTabButton",name:"open-in-new-tab",callback:k,hidden:h>qA.kl||!(0,eo.kc)().prototype_responsive_viewer}],[d,t,u,l,g,e,n,I,w,a,S,C,k,h,m,p]),P=Q.useCallback(()=>{c.current&&c.current.requestFullscreen()},[c]);return Q.createElement(Q.Fragment,null,o&&Q.createElement("div",{ref:y},Q.createElement(nM.K0,{svg:iI.A,"data-tooltip-type":nO.Ib.TEXT,"data-tooltip":(0,eO.t)("inline_preview.overflow_menu"),onMouseDown:e=>{e.stopPropagation(),N(e)},recordingKey:(0,nh.Pt)(q2,"overflowMenuButton")})),h>qA.kl&&Q.createElement(nM.K0,{svg:qq.A,"data-tooltip-type":nO.Ib.TEXT,"data-tooltip":(0,eO.t)("inline_preview.new_tab"),onClick:k,recordingKey:(0,nh.Pt)(q2,"openInNewTabButton"),dataTestId:"preview-open-in-presentation-view"}),s&&Q.createElement(nM.K0,{svg:q0.A,onClick:P,"data-tooltip-type":nO.Ib.TEXT,"data-tooltip":(0,eO.t)("inline_preview.open_fullscreen")}),x&&y.current&&Q.createElement(aq.j,{dispatch:v,parentRect:y.current.getBoundingClientRect(),onFocus:e=>{e.stopPropagation()},onDismissMenu:E.onDismissOverflow,onDropdownHidden:E.onDismissOverflow,showPoint:!0,lean:"center",onSelectItem:e=>{e.callback&&e.callback()},recordingKey:(0,nh.Pt)(q2,"overflowMenu"),items:A()}))}function q7({navigateForwardEnabled:e,navigateBackwardEnabled:t,onRestart:n,width:a,onBack:r,onForward:l}){let i=(0,$.wA)();return Q.createElement("div",{className:"inline_preview_modal--prototypeModalTitle--Y5Zqk"},a<=qA.Ah?null:Q.createElement(Q.Fragment,null,Q.createElement(nM.K0,{svg:q$.A,tooltipForScreenReadersOnly:!0,"data-tooltip-type":nO.Ib.TEXT,"data-tooltip":(0,eO.t)("viewer.footer.previous_frame"),onClick:r,disabled:!t,recordingKey:(0,nh.Pt)(q2,"navigateBackwardButton"),dataTestId:"preview-navigate-backward"}),Q.createElement(nM.K0,{svg:qQ.A,tooltipForScreenReadersOnly:!0,"data-tooltip-type":nO.Ib.TEXT,"data-tooltip":(0,eO.t)("viewer.footer.next_frame"),onClick:l,disabled:!e,recordingKey:(0,nh.Pt)(q2,"navigateForwardButton"),dataTestId:"preview-navigate-forward"})),a<=qA.kl?null:Q.createElement(nM.K0,{svg:qJ.A,"data-tooltip-type":nO.Ib.TEXT,"data-tooltip":(0,eO.t)("inline_preview.restart"),onClick:()=>{i((0,TT.Zh)({name:"prototype.replay_clicked",params:{source:"inline viewer"}})),n()},recordingKey:(0,nh.Pt)(q2,"restartButton"),dataTestId:"preview-restart-prototype"}))}var q8=n(490822),q9=n(883634);let Je=Q.forwardRef(function({pageId:e,openFileKey:t,closeInlinePreview:n,isOpen:a,iframeFocused:r,setIframeFocused:l,onIframeFocus:i},o){let s=(0,e_.Xr)(qX.h),[c,d]=Q.useState(!1),{isResizing:u,isDragging:m}=Q.useContext(q9.O),p=Q.useMemo(()=>u||m||!r,[u,m,r]),_=Q.useMemo(()=>u||m,[u,m]);return(Q.useEffect(()=>{q8.A.setDisableCloseWithShortcut(_)},[_]),Q.useEffect(()=>{o.current&&(a?o.current.focus():(0,pV.$z)())},[o,a]),Q.useEffect(()=>{var e;let t=o.current;if(!t||c)return;let a=e=>{let t=e.shiftKey&&"Space"===e.code,a="Escape"===e.code;(t||a)&&!_&&n("keyboard")};return null==(e=t.contentWindow)||e.addEventListener("keydown",a),()=>{var e;t&&(null==(e=t.contentWindow)||e.removeEventListener("keydown",a))}},[o,c,_,n]),Q.useEffect(()=>{if(!o.current)return;let e=q8.A.initialize(o.current,{closeInlinePreview:n,dispatch:s,onLoad:()=>{d(!0)}});return()=>{s({type:"RESET_INLINE_PREVIEW"}),e(),d(!1)}},[n,s,e,o]),Q.useEffect(()=>{var e,t;let n=o.current;if(!n)return;let a=()=>{l(!1),lT.Y5.triggerAction("inline-preview-iframe-focus-state-changed",{isFocused:!1})};return null==(e=n.contentWindow)||e.addEventListener("focus",i),null==(t=n.contentWindow)||t.addEventListener("blur",a),()=>{var e,t;n&&(null==(e=n.contentWindow)||e.removeEventListener("focus",i),null==(t=n.contentWindow)||t.removeEventListener("blur",a))}},[o,l,i]),t)?Q.createElement("div",{className:qY},Q.createElement("iframe",{ref:o,title:"Inline Preview",src:function(e,t){let n=(0,d1.Kw)({base:"proto",file:{key:e},nodeId:t});if((0,pF.PN)())return"/test/interactions?inlinePreview=1";let a=encodeURIComponent(n);return`${location.origin}/embed?embed_host=share&url=${a}&hide-ui=1&inline-viewer=1`}(t,e),className:ea()("inline_preview_modal--previewIframe--RpUIN",p?"inline_preview_modal--disablePointerEvents--sc1Yf":null)}),!c&&Q.createElement(Pz.z2,{shouldNotOverflow:!0,isViewer:!0,editorType:dV._Y.DESIGN,progressBarMode:eU.Oin.HIDE_UI})):null}),Jt={overflowDropdownType:"INLINE_PREVIEW_OVERFLOW_DROPDOWN",stateAtom:qX.h,ViewerComponent:Je,onBack:()=>{q8.A.navigateBackward()},onForward:()=>{q8.A.navigateForward()},onRestart:()=>{q8.A.restartPrototype()},onFocus:()=>!!q8.A.isIframeInitialized()&&(q8.A.focus(),!0),onDismissOverflow:()=>{q8.A.focus()}},Jn=(0,tc.r1)(Ec),Ja=(0,tc.r1)(Eu),Jr=!1;function Jl(){let e=(0,$.wA)(),t=(0,ef.md)(Es.wg),n=(0,ae.aV)(),a=(0,ef.md)(Mv.mp),r=(0,ti._I)(),l=(0,ef.md)(Ja),i=(0,ef.md)(Jn),{uniqueId:o,show:s,complete:c,isShowing:d}=(0,tp.e)({overlay:tv.kc4,priority:th.N.SECONDARY_MODAL},[i,l,a]),u=(0,t8.U)("modal");function m(){e(tB.b({[Ec]:!0})),c()}Q.useEffect(()=>{var e;!n&&!Jr&&t&&r&&(0!==((null==(e=tN.qo.instance.getCurrentPage())?void 0:e.childrenGuids.length)||0)&&s({canShow:(e,t,n)=>!e&&!t&&function(e){let t=Date.now();return e.getTime()<=t-12096e5}(n)}),Jr=!0)},[n,s,t,r]),Q.useEffect(()=>{"loaded"===i.status&&i.data&&c()},[i,c]),(0,Eo.E)(o,"Enter Inspect Mode",()=>{d&&m()});let p=(0,aD.GS)()?mM.ON:z5.e;return Q.createElement(c9.rq,{isShowing:d,trackingContextName:Ec,onClose:m,targetKey:p,title:Q.createElement(eO.Tx,{id:"dev_handoff.annotations_introduction_overlay.title"}),media:Q.createElement(MC.y,{src:"https://static.figma.com/uploads/5b9addc96424c11577a1ec91e1bbadcd786fe343",alt:(0,eO.t)("dev_handoff.annotations_introduction_overlay.image_alt"),aspectRatio:1280/720}),description:Q.createElement(eO.Tx,{id:"dev_handoff.annotations_introduction_overlay.description"}),primaryCta:{label:Q.createElement(eO.Tx,{id:"dev_handoff.annotations_introduction_overlay.primary_cta"}),type:"button",onClick:function(){u("handoff")},ctaTrackingDescriptor:c5.c.SHOW_ME}})}let Ji=(0,tc.r1)(Eu),Jo=(0,tc.r1)(Ec),Js=!1,Jc=!1;function Jd(){var e;let t=(0,$.wA)(),n=(0,ae.aV)(),a=(0,ef.md)(Mv.mp),r=(0,ef.md)(DI.N),l=(0,eG.J2)(eU.Ez5.annotationObserver().annotationInfoByTlf),i=null==(e=(0,ef.md)(t_.yV))?void 0:e.creatorId,o=(0,ef.md)(Ji),s=(0,ef.md)(Jo),{uniqueId:c,show:d,complete:u,isShowing:m}=(0,tp.e)({overlay:tv.kc4,priority:th.N.SECONDARY_MODAL},[o,s,a,r]),p=(0,t8.U)("modal"),_=l.size>0;function f(){t(tB.b({[Eu]:!0})),u()}Q.useEffect(()=>{n&&(Jc=!0),!n&&!Js&&Jc&&_&&(d({canShow:(e,t,n,a)=>!e&&!t&&i!==a&&function(e){let t=Date.now();return e.getTime()<=t-12096e5}(n)}),Js=!0)},[_,n,i,d]),Q.useEffect(()=>{"loaded"===o.status&&o.data&&u()},[o,u]),(0,Eo.E)(c,"Enter Inspect Mode",()=>{m&&f()});let h=(0,aD.GS)()?mM.ON:z5.e;return Q.createElement(c9.rq,{isShowing:m,trackingContextName:Eu,onClose:f,targetKey:h,title:Q.createElement(eO.Tx,{id:"dev_handoff.annotations_upsell_overlay.title"}),media:Q.createElement(MC.y,{src:"https://static.figma.com/uploads/e84a2faeb510847abd7bfb9c15a74ef974bb4c13",alt:(0,eO.t)("dev_handoff.annotations_introduction_overlay.image_alt"),aspectRatio:1280/720}),description:Q.createElement(eO.Tx,{id:"dev_handoff.annotations_upsell_overlay.description"}),primaryCta:{label:Q.createElement(eO.Tx,{id:"dev_handoff.annotations_upsell_overlay.primary_cta"}),type:"button",onClick:function(){p("handoff")},ctaTrackingDescriptor:c5.c.OPEN_DEV_MODE},secondaryCta:{label:Q.createElement(eO.Tx,{id:"dev_handoff.annotations_upsell_overlay.secondary_cta"}),type:"button",onClick:u,ctaTrackingDescriptor:c5.c.NOT_NOW}})}var Ju=n(363670);function Jm(){let e=(0,tp.e)({overlay:tv.Dqt,priority:th.N.DEFAULT_MODAL});(0,Eo.E)(e.uniqueId,"commentThreadMobileAnnouncementClicked",()=>{(0,er.sx)("sidebar_announcement_mobile_app_download_prompt_modal_shown"),e.show({})});let t=(0,Q.useCallback)(async()=>{(0,er.sx)("sidebar_announcement_mobile_app_download_prompt_email_me_cta_clicked"),await i1.Ay.post("/api/send_mobile_download_email"),e.complete()},[e]);return Q.createElement(tg.h,{isShowing:e.isShowing,modalType:tE.q3.FEATURE_UPDATE,closeButtonStyle:tE.M_.ON_DARK,element:()=>Q.createElement(Jp,{onEmailClick:t}),trackingContextName:"mobile_comment_announcement",onClickPrimaryCta:e.complete,onClose:e.complete,onManualDismiss:e.complete})}function Jp(e){return Q.createElement("div",{className:"modal_comment_sidebar_announcement--container--5oh-p"},Q.createElement("div",{className:"modal_comment_sidebar_announcement--imageContainer--Vuo-V"},Q.createElement("img",{alt:"Background",src:"https://static.figma.com/uploads/e19f2f58bc09414847ad59ff9228e07032e8842c",className:"modal_comment_sidebar_announcement--image--lyA61"}),Q.createElement("div",{className:"modal_comment_sidebar_announcement--spacer--m02YT"}),Q.createElement(Ju.T,null)),Q.createElement("div",{className:"modal_comment_sidebar_announcement--textContainer--btaTy"},Q.createElement("div",{className:"modal_comment_sidebar_announcement--title--eiyLq"},Q.createElement(aL.E,{fontSize:24,fontWeight:"semi-bold"},(0,eO.t)("rcs.mobile_comment_announcement.title"))),Q.createElement("div",{className:"modal_comment_sidebar_announcement--description--Y8AJE"},Q.createElement(aL.E,{fontSize:14},(0,eO.t)("rcs.mobile_comment_announcement.description")))),Q.createElement("div",{className:"modal_comment_sidebar_announcement--buttonsContainer--UTcgc"},Q.createElement(lP.$,{variant:"secondary",icon:"envelope-32",onClick:e.onEmailClick},(0,eO.t)("rcs.mobile_comment_announcement.email_download_link")),Q.createElement(lP.$,{variant:"primary",onClick:()=>{(0,er.sx)("sidebar_announcement_mobile_app_download_prompt_learn_more_cta_clicked"),ei.Ay.unsafeRedirect("https://help.figma.com/hc/articles/1500007537281-Guide-to-the-Figma-mobile-app#download","_blank")},icon:"info-32"},(0,eO.t)("rcs.rcs_shared.learn_more"))))}var J_=n(293445),Jf=n(479782),Jh=n(51431),Jg=n(119104);let JE={VariableCreateModalRoot:Ym.IU,VariableAndStyleCreateModalRoot:function({initialPosition:e,initialVariableValue:t,inheritStyleKeyField:n,initialStyleCreationPaint:a,initialView:r,resolvedType:l,onCreateVariable:i,onCreateStyle:o,onClose:s}){(0,Yp.NF)({resolvedType:l});let{onCreateVariableSubmit:c,onCreateStyleSubmit:d}=function({onCreateVariable:e,onCreateStyle:t,onClose:n}){let{onCreateVariableSubmit:a}=(0,Ym.C_)({onCreateVariable:e,onClose:n}),r=(0,$.d4)(e=>{var t;return null==(t=e.openFile)?void 0:t.key}),l=(0,$.d4)(e=>e.mirror.sceneGraph);return{onCreateVariableSubmit:a,onCreateStyleSubmit:function(e){let a=function(e){let t=eU.glU.getStyleNodeId(e.key,e.version),n=l.get(t);return n?{type:lz.PW.STYLE,name:n.name,file_key:r??"",library_key:lz.Co,key:n.styleKey,thumbnail_url:"",canvas_url:"",content_hash:n.styleVersionHash??void 0,userFacingVersion:(0,Yc.IA)(n.userFacingVersion),node_id:n.guid,isLocal:!0,style_type:n.styleType}:null}(e);a&&(t(a),n())}}}({onCreateVariable:i,onCreateStyle:o,onClose:s});return Q.createElement(Yg,{initialPosition:e,initialVariableValue:t,inheritStyleKeyField:n,initialStyleCreationPaint:a,initialView:r,resolvedType:l,onCreateStyleSubmit:d,onCreateVariableSubmit:c,onClose:s,recordingKey:"createVariableAndStyleModal"})},VARIABLE_CREATE_MODAL_WIDTH_PX:Ym.iG};function Jv(){var e;let t=(0,$.d4)(e=>e.selectedView),n=(0,$.d4)(e=>{var t;return null==(t=e.openFile)?void 0:t.key}),a=(0,$.d4)(e=>e.progressBarState.mode),r=(0,$.d4)(e=>{var t;return(0,cB.pi)({editorType:null==(t=(0,wY.d1)(e))?void 0:t.editor_type})}),l=(0,$.d4)(e=>(0,cp.zg)(e.selectedView)),i=(0,$.d4)(e=>(0,cp.Y6)(e.selectedView)),o=a!==cl.Oin.HIDE_UI&&a!==cl.Oin.ON_AND_LOCKED,s=(0,t_.q5)(),c=(0,Nj.BI)(),d=(0,eG.J2)(null==(e=eU.Ez5)?void 0:e.slidesToolMode());(0,Q.useEffect)(()=>(document.body.dataset.editorTheme=(0,Ys.ju)(t,null==s?void 0:s.editorType,d),()=>{delete document.body.dataset.editorTheme}),[t,null==s?void 0:s.editorType,d]),(0,aD.Ou)(),(0,Ya.c)();let{sprigTrackWithSampling:u}=(0,al.A)(),[m,p]=(0,Q.useState)(!1),_=(0,ue.Z)(m);(0,Q.useEffect)(()=>{o&&n&&i&&(lT.Y5.onReady().then(()=>{eU.h3O.sendSignal("client-rendered","")}),window.requestAnimationFrame(()=>{var e;null==(e=wk.eD)||e.addTabAnalyticsMetadata({reactFullscreenViewRenderTime:window.performance.now()}),Yi.xK.reactFullscreenViewIsRendered(),Yi.xK.report(n,r,l),function(){var e;let t=(0,wE.dX)("fullscreen");if(!t)return;let n=(0,Yl.ap)()?t.getContext("webgl2"):t.getContext("webgl");if(!n||!window.expectedWebGLContextAttributes)return;let a=n.getContextAttributes();if(!a)return;let r=(null==(e=eU.CeL)?void 0:e.getDeviceInfo())??{vendor:"",renderer:"",version:""},l={};for(let e of Object.keys(a))l[`actual_${e}`]=a[e];let i={},o=!0;for(let e of Object.keys(window.expectedWebGLContextAttributes))a[e]!==window.expectedWebGLContextAttributes[e]&&(o=!1),i[`expected_${e}`]=window.expectedWebGLContextAttributes[e];let s={...l,...i,...r,are_context_attributes_correct:o};(0,er.sx)("fullscreen_load_gpu_parameters",s)}(),p(!0)}))},[o,n,r,!0,l,i]);let f=(0,$.d4)(e=>e.isFullscreenDocumentLoaded);(0,Q.useEffect)(()=>{(null==c?void 0:c.handleCompleteInitialLoad)&&f&&c.handleCompleteInitialLoad()},[c,f]);let[h,g]=(0,Q.useState)(!1),E=(0,$.d4)(e=>e.mirror.appModel.isReadOnly);(0,Q.useEffect)(()=>{(null==c?void 0:c.updateReadOnly)&&f&&!h&&(g(!0),c.updateReadOnly(E))},[c,f,h,g,E]),(0,Q.useEffect)(()=>{var e;if((0,eo.kc)().dpl_survey&&m&&!_){if(E||"fullscreen"!==t.view||t.isRecoveryMode||"design"!==t.editorType||t.mergeParams||!s||s.fileRepoId||(null==(e=eU.CeL)?void 0:e.getUserPageCount())<2)return;let n=new Date(Date.now()-2592e6);if(s.createdAt>n)return;u("file_loaded",{method:jV.Vl.EVENT,samplingRateDenominator:3})}},[m,_,r,E,t,s,u]);let v=(0,ue.Z)(s),y=(0,$.d4)(e=>e.mirror.appModel.pagesList),b=(0,Q.useMemo)(()=>y.map(e=>({id:e.nodeId,name:e.name})),[y]),C=(0,ue.Z)(b),w=(0,$.d4)(e=>e.mirror.appModel.currentPage),T=(0,ue.Z)(w);(0,Q.useEffect)(()=>{(null==c?void 0:c.updatePages)&&s&&(!v||s.key!==v.key||s.name!==v.name||s.editorType!==v.editorType||s.isTryFile!==v.isTryFile||!(0,an.c2)(b,C)||w!==T)&&c.updatePages({fileKey:s.key,fileName:s.name,editorType:s.editorType,isTryFile:s.isTryFile,pages:b.length>0?b:[{id:w,name:"Page 1"}],currentPageId:w})},[c,s,v,b,C,w,T]);let x=(0,wD.WC)();(0,Q.useEffect)(()=>{(null==c?void 0:c.updateWebOverlaysShown)&&c.updateWebOverlaysShown(x)},[c,x]);let N=(0,ex.o3)(ex.nt.customKeyboardShortcuts);(0,Q.useEffect)(()=>{(0,eo.kc)().ce_custom_keyboard_shortcuts&&eU.glU.reloadKeyboardShortcuts()},[N]);let k=(0,$.d4)(e=>e.multiplayer.allUsers),S=(0,$.d4)(e=>e.multiplayer.observingSessionID),I=(0,$.d4)(e=>e.multiplayer.presenterSessionID),A=(0,$.d4)(e=>e.multiplayer.deviceNameFilter),P=(0,$.d4)(e=>e.multiplayer.sessionID),O=(0,Q.useMemo)(()=>{let{users:e}=(0,Yo.Yp)(k,null,!1,1048576,{sessionID:P,observingSessionID:S,presenterSessionID:I,deviceNameFilter:A});return{sessionID:P,observingSessionID:-1!==S?S:null,presenterSessionID:-1!==I&&I||null,users:e}},[k,A,S,I,P]),L=(0,ue.Z)(O);return(0,Q.useEffect)(()=>{(null==c?void 0:c.updateMultiplayerUserInfo)&&!(0,an.c2)(L,O)&&c.updateMultiplayerUserInfo(O)},[c,O,L]),(0,EG.iA)(),!function(){let e=(0,ti.U4)(),t=(0,ti._I)(),n=(0,sZ.ks)(),a=(0,mD.ow)(),r=(0,t8.U)("permission",!0),l=n&&!t&&!e&&!(0,wM.T)();(0,Q.useEffect)(()=>{a||(eU.w3z.setCanAccessDevMode(t),eU.w3z.setCanEnterDevMode(e))},[t,e,a]),(0,Q.useEffect)(()=>{l&&r("design")},[r,l])}(),null}function Jy(){let e=(0,mD.ow)(),t=(0,ED.s)(),n=(0,mP.cJ)(),a=(0,Nj.BI)(),r=(0,$.d4)(e=>e.selectedView);return e?Q.createElement(Q.Fragment,null,Q.createElement(qw,null),!!(null==a?void 0:a.shouldOptimizeForIpadApp)&&Q.createElement(Yy.K,null),!!(null==a?void 0:a.shouldOptimizeForIpadApp)&&Q.createElement(Yb,null)):t?Q.createElement(Q.Fragment,null,Q.createElement(EM.$h,null),Q.createElement(Jw,null)):n?Q.createElement(mA.H5,null):(0,sZ.$A)(r)?Q.createElement(C7,null):(0,c_.Wl)(r)?null:Q.createElement(Q.Fragment,null,Q.createElement(JC,null),!!(null==a?void 0:a.shouldOptimizeForIpadApp)&&Q.createElement(Yy.K,null),!!(null==a?void 0:a.shouldOptimizeForIpadApp)&&Q.createElement(Yb,null))}function Jb(){let e=(0,$.d4)(qA.xY),t=(0,YC.HL)(),n=(0,$.d4)(e=>e.mirror.appModel.currentPage),a=(0,c_.l7)();return Q.createElement(Q.Fragment,null,Q.createElement(Jy,null),Q.createElement(Jv,null),e&&Q.createElement(q4,{viewerControl:Jt,pageId:n}),t&&Q.createElement(q4,{viewerControl:YC.RB,pageId:""}),a&&Q.createElement(j8,null))}let JC=Q.memo(function(){let e=(0,$.d4)(e=>e.mirror.appModel),t=(0,ae.ax)(),{topLevelMode:n}=e,a=(0,ae.dH)();return(0,En.z)({topLevelMode:cl.lyf.PREVIEW,eventName:"Preview Mode Selection Changed",teamFilesOnly:!0}),Q.useEffect(()=>{t&&n===cl.lyf.PREVIEW&&a!==eU.NLJ.COMMENTS&&(0,eV.NT)(eU.FAf.INSPECT)},[t,n,a]),Q.createElement(Q.Fragment,null,Q.createElement(Jw,null),Q.createElement(JT,null))}),Jw=Q.memo(function(){var e;let t=(0,$.wA)(),n=(0,$.d4)(e=>(0,cQ.getPermissionsState)(e)),a=(0,ae.aV)(),r=(0,y4.q)(),l=(0,$.d4)(e=>e.loadingState),i=(0,$.d4)(e=>e.mirror.appModel),o=(0,ef.md)(a7.wm),s=(0,$.d4)(e=>e.mirror.sceneGraphSelection),c=(0,$.d4)(e=>e.mirror.selectionPaints),d=(0,$.d4)(e=>e.mirror.selectionProperties),u=(0,$.d4)(e=>e.mirror.selectedStyleProperties),m=(0,$.d4)(e=>e.currentUserOrgId),p=(0,$.d4)(e=>e.dropdownShown),_=(0,$.d4)(e=>e.fonts),f=(0,$.d4)(e=>e.fileVersion),h=(0,$.d4)(e=>e.installedPluginVersions),g=(0,$.d4)(e=>e.library),E=(0,$.d4)(e=>e.localPlugins),v=(0,$.d4)(e=>e.modalShown),y=(0,$.d4)(e=>e.multiplayer),b=(0,$.d4)(e=>e.openFile),C=(0,$.d4)(e=>e.pickerShown),w=(0,$.d4)(e=>e.pickerInStyleCreationShown),T=(0,$.d4)(e=>e.publishedPlugins),x=(0,$.d4)(e=>e.saveAsState),N=(0,$.d4)(e=>e.selectedView),k=(0,$.d4)(e=>e.voice.showWidget),S=(0,$.d4)(e=>e.stylePickerListLayout),I=(0,$.d4)(e=>e.stylePickerShown),A=(0,$.d4)(e=>e.stylePreviewShown),P=(0,$.d4)(e=>e.styleSets),O=(0,$.d4)(e=>e.usedKeyboardShortcuts),L=(0,$.d4)(e=>e.user),M=(0,$.d4)(e=>e.userFlags),D=(0,$.d4)(e=>e.userStateLoaded),R=(0,$.d4)(e=>e.repos),F=(0,$.d4)(e=>e.folders),B=(0,$.d4)(e=>e.teams),U=(0,$.d4)(e=>e.orgById),H=(0,$.d4)(e=>e.orgDraftsOwners),V=(0,$.d4)(e=>e.orgUsersByOrgId),G=(0,$.d4)(e=>e.userEduGracePeriods),K=(0,$.d4)(e=>e.licenseGroups),{topLevelMode:W}=i,z=a?Yr.R.topLevelMode:W,j=null==(e=eU.Ez5.uiState().isRecovery)?void 0:e.getCopy(),Y=(0,zK.Rt)(),Z=z===cl.lyf.LAYOUT||z===cl.lyf.BRANCHING||j||!!L&&z===cl.lyf.PREVIEW||Y&&z===cl.lyf.HISTORY,X=(0,m_.VP)(l,"edit_button_upgrading_to_edit"),q=a||X,J=(0,eG.J2)((0,eV.aY)()),ee=(0,eG.J2)(eU.Ez5.propertiesPanelState().shownPropertiesPanels),et=(0,eG.J2)(eU.Ez5.propertiesPanelState().shownTransformControls),en=(0,eG.J2)(eU.Ez5.propertiesPanelState().strokePanelMode),ea=(0,eG.J2)(eU.Ez5.propertiesPanelState().strokePanelTerminalPointCount),er=(0,eG.J2)((0,eH.UK)().expandedFramePresetType),el=(0,eH.Ku)(),ei=(0,eH.qw)(),eo=(0,eG.J2)(eU.Ez5.uiState().showPropertiesPanel);(0,yI.t)();let es=!(0,Wc.Oo)()&&Y&&eo,ec=(0,eG.J2)((0,eH.UK)().renderRulers),{isPropertiesPanelCollapsed:ed}=(0,yI.i)(),eu=EL();return Q.createElement(eP.tH,{boundaryKey:"PropertiesPanel",fallback:eP.H4.NONE_I_KNOW_WHAT_IM_DOING},Z&&r&&Q.createElement(Jg.l.Provider,{value:JE},Q.createElement(J_.Q,{recordingKey:"propertiesPanel",isCollapsed:ed,propertiesPanelTab:J,shownTransformControls:et,strokePanelMode:en,strokePanelTerminalPointCount:ea,commentsPanel:Jx,dispatch:t,isLoading:q,shouldAnimateLoadingState:a,shouldShowBackgroundGradient:es,shownPanels:ee,rulersVisible:ec,expandedFramePresetType:er,colorFormat:el,propertiesPanelSplitPosition:ei,permissionsState:n,key:(0,pF.tw)()??void 0,appModel:i,sceneGraph:o,sceneGraphSelection:s,selectionPaints:c,selectionProperties:d,selectedStyleProperties:u,currentUserOrgId:m,dropdownShown:p,fonts:_,fileVersion:f,allSavedPlugins:h,library:g,localPlugins:E,modalShown:v,multiplayer:y,openFile:b,pickerShown:C,pickerInStyleCreationShown:w,publishedPlugins:T,saveAsState:x,selectedView:N,stylePickerListLayout:S,stylePickerShown:I,stylePreviewShown:A,styleSets:P,usedKeyboardShortcuts:O,user:L,userFlags:M,userStateLoaded:D,repos:R,folders:F,teams:B,orgById:U,orgDraftsOwners:H,orgUsersByOrgId:V,userEduGracePeriods:G,licenseGroups:K,isUI3:Y,showVoiceWidget:k,hasMergedDimensionsAndAutolayout:Y,inUI3CollapsedSidebarPillBackgroundLab:eu}),Q.createElement(Jh.tZ,null)))}),JT=Q.memo(function(){var e,t;let n=null==(e=eU.Ez5.uiState().isRecovery)?void 0:e.getCopy(),a=null==(t=(0,t_.q5)())?void 0:t.canEdit,r=!(0,Eg.ck)()&&a&&(0,eo.kc)().dt_dev_mode_discovery_rcs&&!n;return Q.createElement(Q.Fragment,null,Q.createElement(Ei.p,{featureFlag:"nux_gen0_overlay_design_editor"},Q.createElement(qI,null)),Q.createElement(Ei.p,null,Q.createElement(Jf.e,null)),Q.createElement(Ei.p,{featureFlag:"is_html_to_design_exp_enabled"},Q.createElement(qS.s,null)),Q.createElement(Ei.p,null,r&&Q.createElement(z5.Q,null)),Q.createElement(Ei.p,null,Q.createElement(Jl,null)),Q.createElement(Ei.p,null,Q.createElement(Jd,null)),Q.createElement(Ei.p,{featureFlag:"mobile_prompt_sidebar_modal"},Q.createElement(Jm,null)),Q.createElement(Ei.p,null,Q.createElement(da.Mb,null)))}),Jx=Q.memo(function(){let e=(0,eG.J2)((0,eV.aY)()),t=(0,$.d4)(e=>e.mirror.appModel.topLevelMode),n=!(0,aD.GS)()&&(t!==cl.lyf.PREVIEW&&e!==eU.FAf.COMMENT||t===cl.lyf.PREVIEW);return Q.createElement(gA.B,{stackHeader:n,hideResolve:!1})});var JN=n(906018),Jk=n(809311),JS=n(184995),JI=n(654872),JA=n(775731),JP=n(774658);function JO(){let e=(0,e_.Xr)(JS.n),t=Q.useCallback(()=>{e({type:"MINIMIZE"})},[e]);return Q.createElement(JA.K0,{svg:JP.A,active:"NONE",tooltip:(0,eO.t)("whiteboard.embeds.inline_menu.minimize"),onClick:t,recordingKey:"embedMinimizeControl"})}var JL=n(354125);function JM(e){let t=e.mirror.sceneGraph,n=e.mirror.sceneGraphSelection;if(1!==Object.keys(n).length)return null;let a=t.get(Object.keys(n)[0]);return a&&"WIDGET"===a.type?a:null}function JD(e){return e.mirror.sceneGraph.get(e.mirror.appModel.hoveredNode)}let JR=Q.memo(function(){let e=(0,$.d4)(JD),t=null==e?void 0:e.guid,[n,a]=Q.useState(null),r=Q.useMemo(()=>t&&"-1:-1"!==t?eU.glU.getEmbedTypeOfTooltipIcon(t):null,[t]);Q.useEffect(()=>{var e;if(!r||!t){a(null);return}let n=(0,xT.EE)("embed-tooltip",[t],e=>{a((null==e?void 0:e.position)||null)});return a(n.currentNodePosition&&(null==(e=n.currentNodePosition[t])?void 0:e.position)||null),()=>{(0,xT.lB)("embed-tooltip")}},[t,r]);let l=!!r&&!!n,i=(0,ez._X)({subscribeToUpdates_expensive:l}),o=Q.useMemo(()=>{if(!n)return{};let e=(0,ez.Yb)(i,n),t=e.x+i.x,a=e.y+i.y;return{height:n.height,width:n.width,transformOrigin:"top left",position:"fixed",transform:`translate(${t}px, ${a}px) rotate(${n.angle}deg) scale(${i.zoomScale})`}},[i,n]);return l?Q.createElement("div",{"data-tooltip-type":nO.Ib.TEXT,"data-tooltip":"video"===r||"autoplayable_video"===r?(0,eO.t)("whiteboard.embeds.tooltip_help_text.video"):"audio"===r||"autoplayable_audio"===r?(0,eO.t)("whiteboard.embeds.tooltip_help_text.audio"):"file"===r||"figma"===r?(0,eO.t)("whiteboard.embeds.tooltip_help_text.file"):(0,eO.t)("whiteboard.embeds.tooltip_help_text.generic"),"data-tooltip-show-above":!0,"data-tooltip-max-width":160,"data-tooltip-timeout-delay":50,"data-tooltip-show-immediately":!0,style:o}):null}),JF=Q.memo(function(){let e=(0,eG.J2)(eU.Ez5.embedUiState().activeEmbedData),t=(0,$.d4)(e=>e.mirror.appModel.currentPage?e.mirror.appModel.currentPage:void 0),n=(0,$.d4)(JM),a=(0,ef.md)(JS.n),r=!!e&&(null==n?void 0:n.guid)===e.embedNodeId;return e&&e.embedNodeId&&e.embedThumbnailNodeId&&e.srcUrl&&e.containingCanvasId&&e.containingCanvasId===t?(0,eo.kc)().figjam_embeds_allowlist&&!(0,JN.Cy)(e.srcUrl)?(console.error("Could not play embed; domain not on allow-list:",e.srcUrl),null):Q.createElement(JB,{isEmbedMaximized:a,nodeSelected:r,embedThumbnailNodeId:e.embedThumbnailNodeId,srcUrl:e.srcUrl}):null}),JB=Q.memo(function(e){let{embedThumbnailNodeId:t,nodeSelected:n,srcUrl:a,isEmbedMaximized:r}=e,l=Q.useRef(null),i=Q.useRef(null),o=Q.useRef(null),s=Q.useRef(null),c=(0,ez._X)({subscribeToUpdates_expensive:!0}),d=function(e,t){let[n,a]=Q.useState(!1),[r,l]=Q.useState(!1);return Q.useEffect(()=>{!e&&r&&l(!1)},[e,r]),Q.useEffect(()=>{function e(e){if(t.current){let n=t.current.getBoundingClientRect();e.clientX>n.left&&e.clientX<n.right&&e.clientY>n.top&&e.clientY<n.bottom&&a(!0)}}function r(e){if(t.current&&n){a(!1);let n=t.current.getBoundingClientRect();e.clientX>n.left&&e.clientX<n.right&&e.clientY>n.top&&e.clientY<n.bottom&&l(!0)}}return document.addEventListener("pointerdown",e),document.addEventListener("pointerup",r),()=>{document.removeEventListener("pointerdown",e),document.removeEventListener("pointerup",r)}},[n,t]),r||!n&&e}(n,i);return Q.useEffect(()=>{var e;let n=null==(e=(0,xT.EE)("active-embed",[t],e=>{if(!e.position){eU.glU.setActiveEmbed("");return}s.current=e.position,JV(i,c,s,o,r,d)}).currentNodePosition[t])?void 0:e.position;return n?(s.current=n,JV(i,c,s,o,r,d)):eU.glU.setActiveEmbed(""),()=>{(0,xT.lB)("active-embed")}},[t,r,d,c]),Q.createElement(Q.Fragment,null,Q.createElement("div",{className:r?"embed_overlay--maximizedIframePositioner--BvF7x":void 0,ref:i},Q.createElement(JH,{ref:l,key:t+a,srcUrl:a,autofocus:d})),r&&Q.createElement(JU,{modalTargetRef:o}))});function JU(e){let t=(0,e_.Xr)(JS.n),{modalTargetRef:n}=e,a=()=>{t({type:"MINIMIZE"})};return Q.createElement(tS.Nb,{className:"embed_overlay--embedModal--NmRO5",hide:a,disableClickOutsideToHide:!1,disableKeyboardEventPropagation:!0},Q.createElement("div",{className:"embed_overlay--embedModalMenuBackground--xwJaH",onMouseDown:a},Q.createElement("div",{className:"embed_overlay--embedModalMenuContainer--03E8r",onMouseDown:e=>e.stopPropagation()},Q.createElement(JA.W1,{testID:"embedMenu"},Q.createElement(JL.e,{inModal:!0}),Q.createElement(JO,null),Q.createElement(JA.wv,null),Q.createElement(JI.S,{inModal:!0})))),Q.createElement("div",{className:"embed_overlay--embedModalContentContainer--jP-31"},Q.createElement("div",{ref:n,className:"embed_overlay--embedModalTarget--hxGi-"})))}let JH=Q.forwardRef(function(e,t){let n=(0,$.wA)(),[a,r]=Q.useState(!1),l=Q.useRef(null),{srcUrl:i,autofocus:o}=e;return Q.createElement("div",{className:"embed_overlay--loadingIFrameContainer--FIfGE"},!a&&Q.createElement("div",{className:"embed_overlay--iframeLoadingPlaceholder--uAVFk"}),Q.createElement("iframe",{key:i,ref:t||l,"data-embed-iframe":!0,className:`embed_overlay--iframe--FcmB0${a?"":" embed_overlay--iframeHidden--xwbj9"}`,src:i,onLoad:()=>{let e=t&&t.current||l.current;e&&o&&e.focus(),r(!0)},onMouseOver:()=>{var e;null==(e=eU.h3O)||e.sendChatMessage("",""),n(Jk.Ho())},frameBorder:"0",allowFullScreen:!1,title:(0,eO.t)("whiteboard.embeds.embed_overlay_iframe_title")}))});function JV(e,t,n,a,r,l){if(!e.current||!t||!n.current)return;let i=e.current,o=n.current;if(r){if(!a.current)return;let e=a.current.getBoundingClientRect();i.style.position="fixed",i.style.height=`${e.height}px`,i.style.width=`${e.width}px`,i.style.transform=`translate(${e.x}px, ${e.y}px)`,i.style.pointerEvents="all"}else{let e=(0,ez.Yb)(t,o);i.style.position="fixed",i.style.height=`${o.height}px`,i.style.width=`${o.width}px`,i.style.transform=`translate(${e.x+t.x}px, ${e.y+t.y}px) rotate(${o.angle}deg) scale(${t.zoomScale})`,i.style.transformOrigin="top left",l?i.style.pointerEvents="all":i.style.pointerEvents="none"}}(0,rT.hG)(uT.tui);var JG=n(120191),JK=n(60815);let JW=Q.memo(function(e){let{nodeId:t}=e,n=Q.useRef(null),a=Q.useRef(null),r=(0,ez._X)({subscribeToUpdates_expensive:!0});return Q.useEffect(()=>{var e;let l=null==(e=(0,xT.EE)(`loading-embed-${t}`,[t],e=>{if(!e.position){eU.glU.removeLoadingEmbed(t);return}a.current=e.position,Jj(n,r,a)}).currentNodePosition[t])?void 0:e.position;return l?(a.current=l,Jj(n,r,a)):eU.glU.removeLoadingEmbed(t),()=>{(0,xT.lB)(`loading-embed-${t}`)}},[t,r]),Q.createElement("div",{ref:n},Q.createElement(Jz,null))});function Jz(){return Q.createElement("span",{className:"loading_embed_overlay--root--UKqJ8"},Q.createElement(eM.B,{svg:JK.A,className:"loading_embed_overlay--spinner--bw3Cv",autosize:!0}))}function Jj(e,t,n){if(!e.current||!t||!n.current)return;let a=e.current,r=n.current,l=(0,ez.Yb)(t,r),i=28*t.zoomScale;a.style.transform=`translate(${l.x+(l.width-i)/2+t.x}px, ${l.y+(l.height*JG.Ao/JG.RN-i)/2+t.y}px) rotate(${r.angle}deg) scale(${t.zoomScale})`,a.style.transformOrigin="top left",a.style.position="absolute"}var JY=n(884472);let JZ="eyedropper_view--label--PsjGr";function JX(){let e=(0,$.d4)(e=>e.eyedropper),t=(0,$.d4)(e=>e.library.local.styles),n=(0,$.d4)(e=>e.library.used__LIVEGRAPH.styles),a=(0,ae.eY)(),r=(0,ae.p8)("showUi"),l=(0,iG.lz)(),i=(0,sZ.ks)(),o=(0,mD.ow)(),s=document.createElement("canvas"),c=s.getContext("2d"),d=Q.useRef(null),u={};if(Q.useLayoutEffect(()=>{d.current&&m(d.current)}),!e)return null;let m=t=>{let n=t.getContext("2d");if(!n)return;let a=devicePixelRatio;if(t.width=170*a,t.height=170*a,n.scale(a,a),n.save(),""===e.styleID){{n.arc(85,85,83,0,2*Math.PI,!1),n.clip();let{width:t,height:a,rgba:r,grid:l}=e;if(c){let e=c.createImageData(t,a);e.data.set(r),s.width=t,s.height=a,c.putImageData(e,0,0),n.imageSmoothingEnabled=!1,n.drawImage(s,0,0,170,170)}if(l){n.beginPath();for(let e=1;e<17;e++){let t=10*e+.5;n.moveTo(t,0),n.lineTo(t,170),n.moveTo(0,t),n.lineTo(170,t)}n.strokeStyle="rgba(51, 51, 51, 0.2)",n.stroke()}}n.restore(),n.strokeStyle="white",n.strokeRect(79.5,79.5,12,12),n.strokeStyle="black",n.strokeRect(80.5,80.5,10,10)}else n.arc(85,85,83,0,2*Math.PI,!1),n.fillStyle="white",n.fill();n.beginPath(),n.arc(85,85,84,0,2*Math.PI,!1),n.strokeStyle="white",n.stroke(),n.beginPath(),n.arc(85,85,83,0,2*Math.PI,!1),n.strokeStyle="black",n.stroke()},p=(0,eo.kc)().ds_style_eye_dropper&&(()=>{let r=e.styleID;if(""===r)return null;if(r in u)return u[r];let l=uv.PK.toGuidStrIfLocal(r);if(l&&l in t){let e=t[l];return u[r]=e,e}let i=a.get(r);if(i&&i.styleKey){let e=(0,lS.yh)(i.styleKey,n,{});return e&&(u[r]=e),e}return null})(),_=r&&!o?i?l:(0,rT.jz)(uT.uj0):0;return Q.createElement("div",{className:ea()({"eyedropper_view--container--Qpjgx":!0,"eyedropper_view--topToolbarShown--Aoby4":r,"eyedropper_view--topToolbarHidden--Auk7e":!r}),style:{width:170,height:170,right:(0,rT.jz)(uT.ms_)+_}},p&&Q.createElement(s1.zi,{dsStyle:p,size:s1.iL.Eyedropper,disableTooltip:!0,disableOutline:!1}),Q.createElement("canvas",{ref:d}),(0,eo.kc)().ds_style_eye_dropper?Q.createElement("div",{className:JZ,style:{left:30,right:30,top:180,lineHeight:"15px",borderRadius:5,padding:"5px"}},p?p.name:e.color):Q.createElement("div",{className:JZ,style:{left:30,right:30,top:125,lineHeight:"20px",borderRadius:10}},e.color))}var Jq=n(685418),JJ=n(359280),JQ=n(951366);let J$="figjam_export_pickers--selectRow--aTA0S figjam_export_pickers--row--iT7Hm",J0="figjam_export_pickers--label--a71ES",J1="figjam_export_pickers--dropdownPlaceholderText--JNOu2 ellipsis--ellipsis--Tjyfa",J2="figjam_export_pickers--backgroundTypeIcon--s-7IZ",J5="figjam_export_pickers--option--WG1Jy";class J4 extends aT.l6{}class J3 extends aT.c${}class J6 extends aT.l6{}class J7 extends aT.c${}class J8 extends aT.l6{}class J9 extends aT.c${}let Qe={PNG:eU.v8u.PNG,JPG:eU.v8u.JPEG,CSV:eU.v8u.CSV,PDF:eU.v8u.PDF},Qt=e=>{switch(e){case eU.v8u.PNG:return"PNG";case eU.v8u.JPEG:return"JPG";case eU.v8u.CSV:return"CSV";case eU.v8u.PDF:return"PDF"}},Qn=e=>{switch(e){case eU.ZRE.SOLID:return(0,eO.t)("whiteboard.figjam_export.solid");case eU.ZRE.TRANSPARENT:return(0,eO.t)("whiteboard.figjam_export.transparent");case eU.ZRE.GRID:return(0,eO.t)("whiteboard.figjam_export.grid")}},Qa=e=>{switch(e){case eU.EUU.TABLE:return(0,eO.t)("whiteboard.figjam_export.table");case eU.EUU.STICKY:return(0,eO.t)("whiteboard.figjam_export.sticky")}},Qr={format:e=>Qn(e)},Ql={format:e=>Qa(e)},Qi=e=>{switch(e){case"selection":return(0,eO.t)("whiteboard.figjam_export.selection_only");case"file":return(0,eO.t)("whiteboard.figjam_export.entire_file")}},Qo={format:e=>Qi(e)},Qs=e=>{switch(e){case eU.v8u.CSV:return[];case eU.v8u.JPEG:return[eU.ZRE.SOLID,eU.ZRE.GRID];case eU.v8u.PNG:return[eU.ZRE.TRANSPARENT,eU.ZRE.SOLID,eU.ZRE.GRID];case eU.v8u.PDF:return[eU.ZRE.SOLID]}};function Qc(e,t){return Qs(t).includes(e)}function Qd(e){switch(e.background){case eU.ZRE.TRANSPARENT:return Q.createElement("div",{className:J2,style:{background:`url(${(0,JJ.A)()})`,backgroundSize:"5px 5px"}});case eU.ZRE.GRID:return Q.createElement("div",{className:`figjam_export_pickers--gridIcon--mPS09 thumbnail--lightModeDotGrid--hj-r5 thumbnail--thumbnailContainer--HDTxZ ${J2}`});case eU.ZRE.SOLID:return Q.createElement("div",{className:`${J2} figjam_export_pickers--solidIcon--Gt-95`})}}let Qu=Q.memo(function(){let e=(0,$.wA)(),t=()=>{e(cM._O())};return Q.createElement(JQ.XV,{title:(0,eO.t)("whiteboard.figjam_export.export"),headerClassName:"figjam_export_pickers--modalHeader--E6NRM",headerSize:"small",closeOnEsc:!0,onClose:t,minWidth:364,maxWidth:364},Q.createElement(Qm,{onCancel:t,recordingKey:"exportSettingsPicker",dispatch:e}))});function Qm(e){let t=(0,aX.U)(),n=(0,eG.J2)(eU.Ez5.editorPreferences().exportSelectionSettings),a=(0,$.d4)(e=>e.exportSettingsPickerShown.pickerInfo??{selectionArea:0,canvasArea:0,nodeCounts:{selectionNodeCount:0,canvasNodeCount:0,selectionStickyCount:0,canvasStickyCount:0,selectionTableCount:0,canvasTableCount:0}}),[r,l]=Q.useState(n.fileType),[i,o]=Q.useState(n.contentType),[s,c]=Q.useState(n.backgroundType),d=(0,$.d4)(e=>!!e.mirror.selectionProperties.numSelected),[u,m]=Q.useState(d?"selection":"file"),[p,_]=Q.useState(!1),f=e=>{l(e),Qc(s,e)||c(eU.ZRE.SOLID)},h=Qs(r).length>1,g=Qn(Qs(r)[0])||(0,eO.t)("whiteboard.figjam_export.no_background"),E=Qt(r),v=a.nodeCounts.selectionStickyCount>0||a.nodeCounts.canvasStickyCount>0,y=a.nodeCounts.selectionTableCount>0||a.nodeCounts.canvasTableCount>0,b=v||y;return Q.createElement("div",{className:"figjam_export_pickers--modalContainer--ecxGT"},Q.createElement("div",{className:"figjam_export_pickers--row--iT7Hm"},Q.createElement(nM.JU,{className:J0},Q.createElement(eO.Tx,{id:"whiteboard.figjam_export.file_type"})),Q.createElement(EV.z,{className:"figjam_export_pickers--radioGroup--UXiC-",value:E,onChange:e=>f(Qe[e]),recordingKey:nh.Pt(e,"exportFileTypeRadioGroup")},(ec.Ay.isIpadNative?[eU.v8u.PNG,eU.v8u.JPEG,eU.v8u.PDF]:[eU.v8u.PNG,eU.v8u.JPEG,eU.v8u.PDF,eU.v8u.CSV]).map(t=>{let n=t===eU.v8u.CSV&&!b;return Q.createElement(EV.Z,{value:Qt(t),key:t,labelClassName:"figjam_export_pickers--radioLabel--zw-U-",recordingKey:nh.Pt(e,`exportFileTypeRadioGroup.${Qt(t)}`),disabled:n,"data-tooltip-type":n&&nO.Ib.TEXT,"data-tooltip":n&&(0,eO.t)("whiteboard.figjam_export.csv_disabled")},Qt(t))}))),r===eU.v8u.CSV&&Q.createElement("div",{className:J$},Q.createElement(nM.JU,{className:J0},Q.createElement(eO.Tx,{id:"whiteboard.figjam_export.content_type"})),Q.createElement(J6,{id:"exportSettingsPickerContentTypeControl",className:"figjam_export_pickers--contentTypeSelect--Ioh5g",inputClassName:"figjam_export_pickers--contentTypeInput--3duA- figjam_export_pickers--input--YZm9H",dispatch:e.dispatch,property:i,onChange:o,formatter:Ql,recordingKey:nh.Pt(e,"contentTypeSelect"),dropdownShown:t,blurOnChange:!0},[eU.EUU.TABLE,eU.EUU.STICKY].map(t=>{let n=t===eU.EUU.STICKY&&!v||t===eU.EUU.TABLE&&!y;return Q.createElement(J7,{value:t,key:t,disabled:n,additionalStylesClassName:J5,recordingKey:nh.Pt(e,`contentTypeSelect.${Qa(t)}`)},Qa(t))}))),Q.createElement("div",{className:J$},Q.createElement(nM.JU,{className:J0},Q.createElement(eO.Tx,{id:"whiteboard.figjam_export.background"})),!h&&Q.createElement(nM.JU,{className:J1},g),h&&Q.createElement(J4,{id:"exportSettingsPickerBackgroundTypeControl",className:"figjam_export_pickers--backgroundTypeSelect--eexDx",inputClassName:"figjam_export_pickers--input--YZm9H",dispatch:e.dispatch,property:s,onChange:c,formatter:Qr,recordingKey:nh.Pt(e,"backgroundTypeSelect"),dropdownShown:t,dropdownAlignment:"right",blurOnChange:!0,icon:Q.createElement(Qd,{background:s,disabled:!1}),svgClassName:"figjam_export_pickers--svgStyles--G9Vof"},[eU.ZRE.GRID,eU.ZRE.TRANSPARENT,eU.ZRE.SOLID].map(t=>{let n=!Qc(t,r);return Q.createElement(J3,{value:t,key:t,disabled:n,additionalStylesClassName:J5,recordingKey:nh.Pt(e,`backgroundTypeSelect.${Qn(t)}`),height:32},Q.createElement("div",{className:"figjam_export_pickers--backgroundOptionWrapper--DkFx1"},Q.createElement(Qd,{background:t,disabled:n}),Q.createElement("span",{className:"figjam_export_pickers--backgroundTypeLabel--b--Px ellipsis--ellipsis--Tjyfa"},Qn(t))))}))),Q.createElement("div",{className:d?J$:"figjam_export_pickers--exportAreaPlaceholderRow--G7H-m figjam_export_pickers--selectRow--aTA0S figjam_export_pickers--row--iT7Hm"},Q.createElement(nM.JU,{className:J0},Q.createElement(eO.Tx,{id:"whiteboard.figjam_export.export_area"})),!d&&Q.createElement(nM.JU,{className:J1},Qi("file")),d&&Q.createElement(J8,{id:"exportSettingsPickerExportAreaTypeControl",className:"figjam_export_pickers--exportAreaSelect--GP6S-",inputClassName:"figjam_export_pickers--exportAreaInput--AbQMJ figjam_export_pickers--input--YZm9H",dispatch:e.dispatch,property:u,onChange:m,formatter:Qo,recordingKey:nh.Pt(e,"exportAreaTypeSelect"),dropdownShown:t,blurOnChange:!0},["selection","file"].map(t=>Q.createElement(J9,{key:t,value:t,additionalStylesClassName:J5,recordingKey:nh.Pt(e,`exportAreaTypeOption.${Qi(t)}`)},Qi(t))))),Q.createElement("div",{className:"figjam_export_pickers--buttonContainer---c6mP"},(()=>{if(!a)return!1;switch(r){case eU.v8u.PNG:case eU.v8u.JPEG:return("selection"===u?a.selectionArea:a.canvasArea)>=15e7;case eU.v8u.PDF:return("selection"===u?a.nodeCounts.selectionNodeCount:a.nodeCounts.canvasNodeCount)>=300;case eU.v8u.CSV:return!1}})()&&Q.createElement("div",{className:"figjam_export_pickers--exportWarning--KzT0q text--fontPos11--2LvXf text--_fontBase--QdLsd"},Q.createElement(eM.B,{className:"figjam_export_pickers--infoIcon--H0pOt",svg:mU.A}),Q.createElement(eO.Tx,{id:"whiteboard.figjam_export.exporting_may_take_a_minute_or_two"})),Q.createElement(nc.$$,{onClick:()=>{_(!0),e.dispatch(Jq.n.set({message:(0,eO.t)("whiteboard.figjam_export.exporting"),showLoadingSpinner:!0,callback:()=>{eU.Ez5.editorPreferences().exportSelectionSettings.set({contentType:i,fileType:r,backgroundType:s}),"selection"===u?eU.glU.exportSelectionOrCurrentPage(!0,a.selectionArea,a.nodeCounts.selectionNodeCount):eU.glU.exportSelectionOrCurrentPage(!1,a.canvasArea,a.nodeCounts.canvasNodeCount),e.dispatch(Ta.rg()),e.dispatch(cM._O())}}))},recordingKey:nh.Pt(e,"exportButton"),disabled:p,className:"figjam_export_pickers--exportButtonStyles--KYDuq"},Q.createElement(eO.Tx,{id:"whiteboard.figjam_export.export"}))))}var Qp=n(581332),Q_=n(868183),Qf=n(416393);function Qh({children:e,entryPoint:t,initialFeatureTab:n}){let a=(0,t_.tS)(),r=(0,at.iZ)(),l=(0,d4.ol)(),i=(0,tZ.O)(),o=(0,t5.U)(),s=(0,t8.U)("upsell"),c=(0,$.wA)(),d=(0,Q.useCallback)(()=>{o("Dev Mode Paywall clicked",{type:"Design Mode Upsell",entryPoint:t},{forwardToDatadog:!0}),s("handoff"),c(n9.to({type:Q_.C,data:{initialFeatureTab:n}}))},[c,t,n,s,o]);return Q.createElement(t6.fu,{name:"Dev Mode Upsell In Design Mode",properties:{currentPlan:i,teamId:null==l?void 0:l.id,userId:null==r?void 0:r.id,fileKey:a,upsell:t}},Q.createElement("div",{className:"context_menus_upsells--upsellItem--DuX5N",onClick:d,tabIndex:0,role:"button"},Q.createElement(eM.B,{svg:Qf.A}),Q.createElement("span",null,e)))}function Qg(){return Q.createElement(Qh,{entryPoint:"design_section_status",initialFeatureTab:"quick_handoff"},Q.createElement(eO.Tx,{id:"dev_handoff.paywall.ready_for_dev.upsell"}))}function QE(){return Q.createElement(Qh,{entryPoint:"design_copy_as_code",initialFeatureTab:"advanced_inspection"},Q.createElement(eO.Tx,{id:"dev_handoff.paywall.codegen.upsell"}))}function Qv(){return Q.createElement(Qh,{entryPoint:"design_annotations",initialFeatureTab:"quick_handoff"},Q.createElement(eO.Tx,{id:"dev_handoff.paywall.annotations.upsell"}))}var Qy=n(834477);async function Qb({paint:e,fileKey:t,dispatch:n}){var a;if(!t||"VIDEO"!==e.type||!e.video||!(null==(a=e.video)?void 0:a.hash))return Qw("Incorrect asset type"),null;n(Jq.n.set({message:(0,eO.t)("whiteboard.figjam_export.exporting"),showLoadingSpinner:!0,callback:()=>{}}));let r=await (0,su.tW)({paint:e,fileKey:t});if(null===r)return Qw("Error getting download url for asset"),null;QC(r)}let QC=e=>{let t=document.createElement("a");t.setAttribute("href",e),t.setAttribute("target","_blank"),document.body.appendChild(t),t.click(),document.body.removeChild(t)},Qw=e=>{(0,ar.$D)(ao.e.FIGJAM_ENGAGEMENT,Error(`Error exporting video: ${e}`))};var QT=n(92566),Qx=n(733138),QN=n(897540),Qk=n(795553),QS=n(269427);function QI(e){return new URL(e).hostname.split(".").slice(-2).join(".")}var QA=n(770767),QP=n(155514),QO=n(844616),QL=n(300305),QM=n(791022),QD=n(727121),QR=n(969456),QF=n(996582),QB=n(597722),QU=n(676083),QH=n(998750);function QV({onResult:e}){let[t,n]=Q.useState(),a=(0,Q.useCallback)(e=>{n(e.target.value)},[]),r=(0,Q.useCallback)(()=>{e(t)},[t,e]);return Q.createElement("div",{className:"ready_status_menu_item--menuItemContainer--Uy01z","data-preferred-theme":"dark"},Q.createElement("div",{className:"ready_status_menu_item--title--M9kbm"},Q.createElement(eO.Tx,{id:"dev_handoff.status.menu_note_title"})),Q.createElement(nc.ks,{placeholder:(0,eO.t)("dev_handoff.status.menu_note_placeholder"),type:"textarea",value:t,onChange:a,maxLength:1e3,className:"ready_status_menu_item--textInput--iqTJf",onKeyDown:e=>{e.stopPropagation()}}),Q.createElement(nc.vd,{autoFocus:!0,onClick:r,className:"ready_status_menu_item--comfirmButton--BsFi9"},Q.createElement(eO.Tx,{id:"dev_handoff.status.menu_note_button"})))}var QG=n(941343),QK=n(711225),QW=n(63291),Qz=n(230130),Qj=n(324720);let QY=(0,rT.hG)(uT.tui);class QZ extends Q.PureComponent{items(){var e;let t=this.props.isPrototypeCanvasEditUiVisible&&!this.props.hasSelection?[{separator:!0},{action:"remove-interactions-on-page",flags:["edit"]}]:[],n=window.FigmaMobile,a=Q7(this.props.appModel.showComments,this.props.selectedView,this.props.viewportInfo,this.props.clientX,this.props.clientY,this.props.dispatch,null==n?void 0:n.requestToAddDraftCommentPin),r="whiteboard"===this.props.selectedView.editorType,l="slides"===this.props.selectedView.editorType,i=(0,sZ.$A)(this.props.selectedView),o=ec.Ay.windows?"Ctrl+":"\u2318",s={action:"paste-here",flags:["edit"],displayText:r?(0,eO.t)("fullscreen_actions.paste"):void 0,shortcutText:r?`${o}V`:void 0},c={action:"paste-as-live-object",flags:["edit"],featureFlags:["live_paste"],displayText:(0,eO.t)("fullscreen_actions.paste-as-live-object")},d=!ec.Ay.safari||(null==n?void 0:n.readClipboardData)?[s,c,r?{separator:!0}:null]:[],u={name:"start-chat",disabled:this.props.isJoinedToActiveVotingSession||this.props.isCursorChatDisabled,callback:(e,t,n,a)=>{eU.glU.triggerAction("set-tool-default",null),this.props.dispatch(Jk.F6({position:{x:a.clientX||this.props.clientX,y:(a.clientY||this.props.clientY)-QY},source:"canvas_context_menu"}))}},m=r&&this.props.canPublishOrgTemplate&&this.props.openFile?(0,Qj.w)({dispatch:this.props.dispatch,fileKey:this.props.openFile.key,isPublished:(0,NM.ZV)(null==(e=this.props.openFile)?void 0:e.template,this.props.org),source:"fullscreen-context-menu"}):null,p=[{action:"toggle-ui"},{action:"toggle-show-comments",displayText:(0,eO.t)("fullscreen.context_menu.show_hide_comments"),flags:["!slides"]},...r?[]:[{separator:!0},u],r?null:{action:"toggle-menu"},!this.props.userCanRunPlugins||l?null:(0,wS.qz)({...this.props,isReadOnly:this.props.appModel.isReadOnly},"contextmenu"),this.props.appModel.isReadOnly||i||l?null:(0,wI.Vd)(this.props,"contextmenu"),m,...t];return[...a,...d,{action:"unlock-all",flags:["edit","whiteboard"]},{separator:!0},...r?[u,{separator:!0}]:[],...p]}render(){let e=this.props.clientX,t=this.props.clientY;return Q.createElement("div",{className:`${eK.Dm}`},Q.createElement(Tb.Q,{appModel:this.props.appModel,menuItems:(0,n_.WI)(this.items()),selectedView:this.props.selectedView,dispatch:this.props.dispatch,showPoint:!1,targetRect:{width:10,height:10,left:e+100,top:t,right:e+110,bottom:t-10},removeDisabledItems:!0,recordingKey:"canvasMenu",allowCodegenOptions:"design"===this.props.selectedView.editorType,isLimitedDevMode:this.props.isLimitedDevMode,"aria-labelledby":this.props.ariaLabelledBy}))}}QZ.displayName="CanvasContextMenu";let QX=(0,$.Ng)((e,t)=>({...t,appModel:e.mirror.appModel,openFile:e.openFile,editorType:e.selectedView.editorType,orgEntity:(0,wP.Jl)(e),org:e.currentUserOrgId?e.orgById[e.currentUserOrgId]:null,isJoinedToActiveVotingSession:(0,QL.gR)(e),hasSelection:Object.keys(e.mirror.sceneGraphSelection).length>0,isDevHandoff:(0,sZ.$A)(e.selectedView)}))(QZ);function Qq(e){let t=(0,ig.op)(),n=(0,ig.$1)(),a=(0,ig.cW)(),r=(0,ig.Be)(),l=r.orgPlugins,i=r.orgWidgets,o=(0,wA.BF)(),s=(0,wA.km)(),c=(0,ig.NU)(),d=(0,ig.qr)(),u=(0,ig.ZT)(),m=(0,Qz.S)(),p=(0,t5.am)();Q.useEffect(()=>{p("Canvas Right Click")},[p]);let _=(0,ez._X)({subscribeToUpdates_expensive:!0}),f=(0,NM.J3)()===NM.kN.CAN_PUBLISH,h=(0,$.d4)(e=>e.mirror.appModel.activeTextReviewPlugin),g=Q9(),E=(0,ig.ll)();return Q.createElement(QX,{...e,isPrototypeCanvasEditUiVisible:g,allSavedPlugins:r.plugins,recentlyUsedPlugins:t,localExtensions:n,publishedPlugins:a,viewportInfo:_,activeTextReviewPlugin:h,canPublishOrgTemplate:f,savedWidgetVersions:c,recentlyUsedWidgets:d,publishedWidgets:u,orgSavedPlugins:l,orgSavedWidgets:i,orgPrivatePlugins:o,orgPrivateWidgets:s,isCursorChatDisabled:m,pluginAllowlist:E})}class QJ extends Q.PureComponent{constructor(){super(...arguments),this.getPageDuplicateMenuItem=(e,t)=>{let n=this.props.openFile,a=this.props.team,r=this.props.appModel.pagesList.length;return n&&(0,cK.J9)({openFile:n,pageCount:r})?{name:"page-duplicate",callback:()=>{if(!n)return null;this.props.dispatch((0,n9.to)({type:QW.DV,data:{team:a,resource:QB.vL.PAGE,action:QU.ZN.DUPLICATE_PAGE,editorType:n.editorType,currentPlan:Qx.F.Plan.STARTER,upsellPlan:Qx.F.Plan.PRO}}))},displayText:t}:{action:"page-duplicate",args:{nodeId:e},loadingIndicatorString:"Duplicating",displayText:t}},this.getPageMoveMenuItem=e=>{if(!(0,eo.kc)().move_page_to_new_file)return null;let t=this.props.sceneGraph.get(e),n=this.props.openFile;return t&&n?((0,ar.ED)("getPageMoveMenuItem","Parameters",{pageId:e,folderId:"1",fileKey:this.props.currentFileKey}),{name:"page-move-to-new-file",callback:()=>{!function(e,t,n,a,r={},l=!0){if(!e)return;let i={...r,type:QG.A.FILE,fileKey:e.key,file:e,afterFileMove:void 0,isMovePageToNewFile:l,page_id:n};t(n9.to({type:QK.J,data:i}))}({key:n.key,name:n.name,folder_id:n.folderId,team_id:n.teamId,editor_type:n.editorType},this.props.dispatch,e)}}):null}}contextMenu(e){if(1!==e.length)return this.batchContextMenu(e);let t=e[0],n=this.props.sceneGraph.get(t),a=null==n?void 0:n.isPageDivider,r=this.props.appModel.pagesList.filter(e=>{var t;return!(null==(t=this.props.sceneGraph.get(e.nodeId))?void 0:t.isPageDivider)}).length,l=this.props.shouldShowDuplicateOption?this.getPageDuplicateMenuItem(t,a?(0,eO.t)("fullscreen_actions.divider-duplicate"):(0,eO.t)("fullscreen_actions.page-duplicate",{pageCount:1})):null;return[{action:"page-copy-link",args:{nodeId:t},disabled:a},{separator:!0},{action:"page-rename",args:{nodeId:t},displayText:a?(0,eO.t)("fullscreen_actions.divider-rename"):(0,eO.t)("fullscreen_actions.pages-rename",{pageCount:1})},l,this.getPageMoveMenuItem(t),{separator:!0},{action:"page-delete",args:{nodeIds:[t]},loadingIndicatorString:"Deleting",disabled:!a&&1===r,displayText:a?(0,eO.t)("fullscreen_actions.divider-delete"):(0,eO.t)("fullscreen_actions.pages-delete",{pageCount:1})}]}batchContextMenu(e){let t=e.filter(e=>{var t;return!(null==(t=this.props.sceneGraph.get(e))?void 0:t.isPageDivider)}),n=this.props.appModel.pagesList.filter(e=>{var t;return!(null==(t=this.props.sceneGraph.get(e.nodeId))?void 0:t.isPageDivider)}).length,a=t.length;return 0===a?[]:[{action:"batch-page-rename",args:{nodeIds:t},displayText:(0,eO.t)("fullscreen_actions.pages-rename",{pageCount:a})},{separator:!0},{action:"page-delete",args:{nodeIds:t},loadingIndicatorString:"Deleting",displayText:(0,eO.t)("fullscreen_actions.pages-delete",{pageCount:a}),disabled:n<=t.length}]}contextMenuHandoff(e){return[{action:"page-copy-link",args:{nodeId:e}}]}render(){let e=this.props.clientX,t=this.props.clientY,n=this.props.isDevHandoff?this.contextMenuHandoff(this.props.nodeIds[0]):this.contextMenu(this.props.nodeIds);return Q.createElement("div",{className:`${eK.Dm}`},Q.createElement(Tb.Q,{appModel:this.props.appModel,menuItems:(0,n_.WI)(n),dispatch:this.props.dispatch,selectedView:this.props.selectedView,showPoint:!1,targetRect:{width:10,height:10,left:e+100,top:t,right:e+110,bottom:t-10},removeDisabledItems:!1,isLimitedDevMode:this.props.isLimitedDevMode,recordingKey:"pageMenu"}))}}function QQ(e){let t=(0,$.wA)(),n=(0,$.d4)(e=>e.mirror.appModel),a=(0,$.d4)(e=>e.mirror.sceneGraph),r=(0,$.d4)(e=>{var t;return null==(t=e.openFile)?void 0:t.key}),l=(0,$.d4)(e=>(0,sZ.$A)(e.selectedView));return Q.createElement(QJ,{appModel:n,sceneGraph:a,currentFileKey:r,isDevHandoff:l,dispatch:t,...e})}QJ.displayName="PageContextMenu";class Q$ extends Q.PureComponent{constructor(){super(...arguments),this.savepointMenuItems=(e,t)=>{let n=this.props.version,a=(0,QH.p)(n),r={name:this.props.editName||"savepoint-edit",args:{version:n,checkpointKey:e},callback:t},l={name:"savepoint-restore",args:{version:n,checkpointKey:e},callback:t},i={name:"savepoint-duplicate",args:{version:n,checkpointKey:e},callback:t},o={name:"savepoint-clear",args:{version:n,checkpointKey:e},callback:t,disabled:!this.props.enableClear},s={name:"savepoint-link",args:{version:n,checkpointKey:e},callback:t},c=[];if(this.props.userCanEditFile?a?"branch_child_merge"===n.view?c.push(r,l,i,s):c.push(l,i,s):c.push(r,l,i,o,s):c.push(i,s),(0,eo.kc)().version_diffing&&"whiteboard"!==this.props.selectedView.editorType&&!(0,sZ.$A)(this.props.selectedView)&&c.push({name:"savepoint-compare",args:{version:n,checkpointKey:e},callback:t}),(0,sZ.$A)(this.props.selectedView)){let e=["savepoint-restore","savepoint-clear"];return c.filter(t=>!e.includes(t.name))}return c}}render(){let e=this.props.clientX,t=this.props.clientY,n=this.savepointMenuItems(this.props.checkpointKey,this.props.callback);return Q.createElement("div",{className:`${eK.Dm}`},Q.createElement(Tb.Q,{appModel:this.props.appModel,menuItems:n,dispatch:this.props.dispatch,selectedView:this.props.selectedView,showPoint:!0,targetRect:{width:10,height:10,left:e-5,top:t+7,right:e+5,bottom:t+17},removeDisabledItems:!1,recordingKey:"savepointMenu"}))}}Q$.displayName="SavepointContextMenu";let Q0=(0,$.Ng)((e,t)=>({...t,appModel:e.mirror.appModel}))(Q$),Q1=(e,t)=>eU.glU.getObjectsListUnderCursor(e,t),Q2=class extends Q.PureComponent{constructor(e){super(e),this.objectsListMouseEnter=e=>{eV.Uc(e)},this.objectsListMouseExit=()=>{eV.Uc("")},this.getSelectionGuid=()=>Object.keys(this.props.sceneGraphSelection)[0],this.getObjectsListMenu=(e,t)=>{let n=Q1(e,t);if(null==n)return[];let a=[];for(let e of n){let t=e.nodeId;a.push({nodeId:t,args:{nodeId:t,name:e.name},action:"select-node",displayText:(0,eO.t)("fullscreen_actions.select-node",{name:e.name??""}),onMouseEnter:()=>this.objectsListMouseEnter(t),onMouseExit:this.objectsListMouseExit})}return a},this.getNodeType=()=>{let e=this.getSelectionGuid();return eU.glU.getNodeType(e)},this.getPageListForMoveToMenu=()=>{var e;let t=this.props.appModel.pagesList;if(!this.props.userCanEditFile||null==t||t.length<2)return[];let n=[];for(let a of t)a.nodeId!==this.props.appModel.currentPage&&((null==(e=this.props.sceneGraph.get(a.nodeId))?void 0:e.isPageDivider)?n.push({separator:!0}):n.push({name:a.name,args:{nodeId:a.nodeId,name:a.name},action:"page-move-to",displayText:(0,eO.t)("fullscreen_actions.page-move-to",{name:a.name??""})}));return n},this.state={pageItems:this.getPageListForMoveToMenu(),relatedComponentMenu:this.getRelatedComponentMenu(eU.iCO.NONE),relatedStateMenu:this.getRelatedComponentMenu(eU.iCO.STATE_INSTANCE),objectItems:this.getObjectsListMenu(this.props.clientX,this.props.clientY),nodeType:this.isFigjam()?this.getNodeType():null,hyperlink:this.isFigjam()?this.getHyperlinkUnderCursor():null}}getRelatedComponentMenu(e){var t;let n;if(e!==eU.iCO.NONE&&e!==eU.iCO.STATE_INSTANCE)return null;let a=(0,QF.SY)(this.props.masterSymbolGUID,this.props.dispatch,(null==(t=this.props.openFile)?void 0:t.key)||"",lz.Co,this.props.fileByKey,this.props.library,this.props.sceneGraph,this.props.sceneGraphSelection,this.props.fileVersion,e,this.props.stateGroupSelectionInfo);if(0===a.length)return null;n=e===eU.iCO.STATE_INSTANCE?"relatedComponentMenuSwapVariants":"relatedComponentMenu";let r=this.props.clientX,l=this.props.clientY;return{items:a,showPoint:!1,parentRect:{width:10,height:10,left:r+100,top:l,right:r+110,bottom:l-10},recordingKey:n,dispatch:this.props.dispatch,depth:0,onSelectItem:()=>{}}}getHyperlinkUnderCursor(){return eU.glU.getHyperlinkUnderCursor(this.props.clientX,this.props.clientY)}selectLayerMenu(){return!this.props.isObjectsPanelMenu&&this.state.objectItems.length>1?this.state.objectItems:[]}textEditModeMenu(){let e=this.getCopyPasteMenu(),t=this.getCopyExportMenu(),n=this.props.spellCheckPreference,a=this.props.appModel.spellCheckSuggestions,r=a||!n?[{name:"spell-check-menu",flags:["design","whiteboard","slides"],children:[(0,QO.x)(),{separator:!0},...(0,QO.A)()]},...this.props.userCanRunPlugins?(0,wS.dL)(this.props,"contextmenu"):[]]:[];return[...n||this.props.appModel.activeTextReviewPlugin?Q8(a,this.props.editorType):[],...r,{separator:!0},...this.getTableCellMenu(),{separator:!0},...e,{separator:!0},...this.isFigjam()?t:[]]}getThumbnailMenu(e){return{name:lT.Y5.getFileThumbnailMenuItemName(),args:{label:e?(0,eO.t)("fullscreen_actions.restore_default_thumbnail"):(0,eO.t)("fullscreen_actions.set_as_thumbnail")},flags:["edit","!slides"],callback:()=>{this.props.openFile&&this.props.dispatch(HG.$m({file_key:this.props.openFile.key,thumbnail_guid:e?null:this.getSelectionGuid()}))}}}selectedEmbedOrLinkPreviewHasValidUrl(){var e,t;return(null==(e=this.props.widgetSelectionInfo)?void 0:e.pluginID)===QA.k.EMBED_WIDGET&&this.props.embedData&&(this.props.embedData.url||this.props.embedData.srcUrl)||(null==(t=this.props.widgetSelectionInfo)?void 0:t.pluginID)===QA.k.LINK_PREVIEW_WIDGET&&this.props.linkPreviewData&&this.props.linkPreviewData.url}isFigjam(){return"fullscreen"===this.props.selectedView.view&&"whiteboard"===this.props.selectedView.editorType}getCopyLinkMenu(){let e=this.selectedEmbedOrLinkPreviewHasValidUrl()?"FigJam":"";return{name:"copy-link",args:{label:(0,eO.t)("fullscreen.context_menu.copy_link",{editorSpecifierString:e})},displayText:this.isFigjam()&&this.state.nodeType?function(e){switch(e){case eU.Z6A.STICKY:return(0,eO.t)("fullscreen_actions.copy-link-to-sticky");case eU.Z6A.CONNECTOR:return(0,eO.t)("fullscreen_actions.copy-link-to-connector");case eU.Z6A.WIDGET:return(0,eO.t)("fullscreen_actions.copy-link-to-widget");case eU.Z6A.STAMP:return(0,eO.t)("fullscreen_actions.copy-link-to-stamp");case eU.Z6A.SECTION:return(0,eO.t)("fullscreen_actions.copy-link-to-section");case eU.Z6A.TEXT:return(0,eO.t)("fullscreen_actions.copy-link-to-text");case eU.Z6A.TABLE:return(0,eO.t)("fullscreen_actions.copy-link-to-table");case eU.Z6A.WASHI_TAPE:return(0,eO.t)("fullscreen_actions.copy-link-to-washi-tape");case eU.Z6A.SHAPE_WITH_TEXT:return(0,eO.t)("fullscreen_actions.copy-link-to-shape");case eU.Z6A.INSTANCE:return(0,eO.t)("fullscreen_actions.copy-link-to-instance");default:return(0,eO.t)("fullscreen_actions.copy-link-to-this")}}(this.state.nodeType):void 0,callback:()=>{let e;if(!this.props.openFile)return;let t=!(0,sZ.$A)(this.props.selectedView)&&this.props.attributionContextKey,n=(0,d1.jN)({file:this.props.openFile,nodeId:this.getSelectionGuid(),isDevHandoff:(0,sZ.$A)(this.props.selectedView),isReadOnly:this.props.appModel.isReadOnly,isFigJam:this.isFigjam(),attributionContext:t?(0,QM.b)(this.props.attributionContextKey,QM.d.FULLSCREEN_CONTEXT_MENU):null});if((0,eo.kc)().ce_copy_labelled_links){let t=tN.qo.instance.get(this.getSelectionGuid());e=t?t.name:this.props.openFile.name}this.props.dispatch(HG.S({fileKey:this.props.openFile.key,url:n,label:e,source:QM.d.FULLSCREEN_CONTEXT_MENU,visualBellMessageOverride:this.isFigjam()&&this.state.nodeType?function(e){switch(e){case eU.Z6A.STICKY:return(0,eO.t)("visual_bell.copy_link_to_sticky");case eU.Z6A.CONNECTOR:return(0,eO.t)("visual_bell.copy_link_to_connector");case eU.Z6A.WIDGET:return(0,eO.t)("visual_bell.copy_link_to_widget");case eU.Z6A.STAMP:return(0,eO.t)("visual_bell.copy_link_to_stamp");case eU.Z6A.SECTION:return(0,eO.t)("visual_bell.copy_link_to_section");case eU.Z6A.TEXT:return(0,eO.t)("visual_bell.copy_link_to_text");case eU.Z6A.TABLE:return(0,eO.t)("visual_bell.copy_link_to_table");case eU.Z6A.WASHI_TAPE:return(0,eO.t)("visual_bell.copy_link_to_washi_tape");case eU.Z6A.SHAPE_WITH_TEXT:return(0,eO.t)("visual_bell.copy_link_to_shape");case eU.Z6A.INSTANCE:return(0,eO.t)("visual_bell.copy_link_to_instance");default:return(0,eO.t)("visual_bell.copy_link")}}(this.state.nodeType):void 0}))}}}getCopyHyperlinkMenu(){let e=(()=>{let e=this.state.hyperlink;if(!e||""===e)return null;if(e.startsWith("mailto:")){let t=e.substring(7);if(t)return{displayText:(0,eO.t)("fullscreen_actions.copy-email",{email:t}),linkToCopy:t,visualBellText:(0,eO.t)("visual_bell.copy_email",{email:t})}}else if(e.startsWith("tel:")){let t=e.substring(4);if(t)return{displayText:(0,eO.t)("fullscreen_actions.copy-phone",{number:t}),linkToCopy:t,visualBellText:(0,eO.t)("visual_bell.copy_phone",{number:t})}}else{let t=QI(e);if(t)return{displayText:(0,eO.t)("fullscreen_actions.copy-hyperlink",{hyperlink:t}),linkToCopy:e,visualBellText:(0,eO.t)("visual_bell.copy_hyperlink",{hyperlink:t})}}})();return e?{name:"copy-hyperlink",displayText:e.displayText,callback:()=>(0,QD.UA)(this.props.dispatch,e.linkToCopy,"ContextMenu",e.visualBellText)}:null}getImageToProfilePicture(){if(!this.props.user||!this.props.fillPaints||(0,lh.gl)(this.props.fillPaints))return null;let e=this.props.fillPaints.findIndex(e=>"IMAGE"===e.type);if(e<0)return null;let t=this.props.fillPaints[e];return{name:"set-image-as-profile-picture",args:{label:"Set image as profile picture"},flags:["view_restricted","whiteboard"],featureFlags:["figjam_canvas_image_to_avatar"],callback:()=>{(0,Qy.V8)(t,this.props.user,this.props.dispatch)}}}getMaybeEmbedOrLinkPreviewWidgetMenu(){var e,t,n;if(!this.selectedEmbedOrLinkPreviewHasValidUrl())return null;let a=(null==(e=this.props.embedData)?void 0:e.url)||(null==(t=this.props.embedData)?void 0:t.srcUrl)||(null==(n=this.props.linkPreviewData)?void 0:n.url),r=QI(decodeURIComponent(a));return{name:"labeled-menu-item",args:{label:(0,eO.t)("fullscreen_actions.copy-hyperlink",{hyperlink:r})},callback:()=>{!function(e,t){let n=decodeURIComponent(t);(0,WT.Dk)(n),(0,QS.Rm)(Qk.yc.COPY_LINK,n),e(eL.F.enqueue({type:"copy-preview",message:(0,eO.t)("visual_bell.copy_hyperlink",{hyperlink:QI(n)}),error:!1}))}(this.props.dispatch,a)}}}getMaybeEmbedDeactivateMenu(){var e;return(null==(e=this.props.widgetSelectionInfo)?void 0:e.pluginID)!==QA.k.EMBED_WIDGET||this.props.widgetSelectionInfo.widgetID!==eU.Ez5.embedUiState().activeEmbedData.getCopy().embedNodeId?null:{name:"labeled-menu-item",args:{label:"Deactivate preview"},callback:()=>{eU.glU.deactivateEmbed()}}}getExportVideo(){var e;if(!this.props.fillPaints||(0,lh.gl)(this.props.fillPaints))return null;let t=this.props.fillPaints.find(e=>"VIDEO"===e.type);if(!t)return null;let n=null==(e=this.props.openFile)?void 0:e.key;return{action:"export-selected-video",flags:["view_restricted","whiteboard"],platforms:["!ipad"],displayText:(0,eO.t)("fullscreen.context_menu.export_selected_video"),callback:(e,a,r)=>{Qb({paint:t,fileKey:n,dispatch:r})}}}selectedDefaultLibraryComponents(){var e;let t=Object.keys(this.props.sceneGraphSelection);if(0===t.length)return!1;let n=null==(e=this.props.sceneGraph.get(t[0]))?void 0:e.symbolId;if(!n)return!1;let a=(0,lS.yW)(this.props.sceneGraph.get(n));return!!a&&(0,lS.td)(this.props.library,a)}getMoveToMenu(){return this.state.pageItems.length>=1?{action:"page-move-to-menu",flags:["edit"],children:this.state.pageItems,name:"page-move-to-menu"}:null}getFigJamRemovePluginActionsMenu(){if("design"===this.props.selectedView.editorType)return null;let e=e=>this.props.dispatch(NP.af({id:e,resourceType:NK.bD.PLUGIN})),t=(0,iE.vA)(this.props.pluginRelaunchData,this.props.publishedPlugins,this.props.localExtensions,this.props.orgEntity,this.props.numSelected||0,(t,n)=>Q2.refreshCache.debounceRefresh(t,()=>e(t),n),rr.FW.FIGJAM),n=[],a=new Set;for(let e of t)a.has(e.pluginTypeAndID)||(n.push({name:e.plugin.name,plugin_id:e.plugin.plugin_id}),a.add(e.pluginTypeAndID));return 0===n.length?null:{name:"remove-plugin-actions",children:[...n.map(({name:e,plugin_id:t})=>({name:"plugins-menu-item",callback:()=>eU.NfO.removeRelaunchDataFromSelection(t),args:{plugin_name:e}})),{separator:!0},{name:"remove-all-plugin-actions",callback:()=>n.map(({plugin_id:e})=>eU.NfO.removeRelaunchDataFromSelection(e))}]}}getMainComponentActionsMenu(){if(this.props.isLimitedDevMode)return null;let e=(0,yu.Yh)(this.props.appModel,"find-symbol")&&!this.selectedDefaultLibraryComponents(),t=(0,yu.Yh)(this.props.appModel,"push-changes-to-main"),n=(0,yu.Yh)(this.props.appModel,"restore-symbol-or-state-group"),a=(0,yu.Yh)(this.props.appModel,"add-variant"),r=(0,yu.Yh)(this.props.appModel,"publish-selection"),l=[e,t,n,a,r].filter(Boolean).length;if(0===l)return null;if(1===l){if(e)return{action:"find-symbol"};if(a)return{action:"add-variant",flags:["edit"]};if(r)return{action:"publish-selection",flags:["edit"]}}return{action:"main-component",children:[{action:"find-symbol"},{action:"push-changes-to-main",flags:["edit"]},{action:"restore-symbol-or-state-group",flags:["edit"]},{action:"publish-selection",flags:["edit"]},{action:"add-variant",flags:["edit"]}]}}getTableCellMenu(){let e=(0,yu.Yh)(this.props.appModel,"delete-table-contents"),t=(0,yu.Yh)(this.props.appModel,"delete-current-table-row")||(0,yu.Yh)(this.props.appModel,"delete-current-table-column");return[{action:"move-table-row-up",flags:["edit"]},{action:"move-table-row-down",flags:["edit"]},{action:"move-table-column-left",flags:["edit"]},{action:"move-table-column-right",flags:["edit"]},{separator:!0},{action:"add-table-column-before",flags:["edit"]},{action:"add-table-column-after",flags:["edit"]},{separator:!0},{action:"add-table-row-above",flags:["edit"]},{action:"add-table-row-below",flags:["edit"]},{separator:!0},{action:"delete-table-contents",flags:["edit"],shortcutText:e&&!t?"\u232B":void 0},{action:"delete-current-table-column",flags:["edit"],shortcutText:!e&&t?"\u232B":void 0},{action:"delete-current-table-row",flags:["edit"],shortcutText:!e&&t?"\u232B":void 0}]}getCopyPasteMenu(){let e;let t=window.FigmaMobile,n=!ec.Ay.safari||!!(null==t?void 0:t.readClipboardData),a=!this.props.isObjectsPanelMenu&&!this.props.isSingleSlideViewCarousel&&n,r=this.props.isTextEditModeMenu,l=[{action:"copy-text"},{action:"copy-as-code",children:[{action:"copy-as-css"},{action:"copy-as-css-recursive"},{action:"copy-as-ios"},{action:"copy-as-android"},...!this.props.canAccessDevMode&&this.props.canAccessDevModeEntryPoint?[{separator:!0},{render:()=>Q.createElement(QE,null),optionHeight:40}]:[]]},{action:"copy-as-svg"},{action:"copy-as-png"},...this.props.canCopyLink?[this.getCopyLinkMenu()]:[],{separator:!0},{action:"copy-properties",flags:["view_restricted"]},{action:"paste-properties",flags:["edit"]}],i=ec.Ay.windows?"Ctrl+":"\u2318";switch(this.props.selectedView.editorType){case"design":case"sites":case"slides":e=[navigator.clipboard&&navigator.clipboard.write?{action:"copy",shortcutText:`${i}C`}:null,a?{action:"paste-here",flags:["edit"],displayText:(0,eO.t)("fullscreen_actions.paste-here"),shortcutText:r?`${i}V`:void 0}:this.props.isSingleSlideViewCarousel?{action:"paste",flags:["edit"],displayText:(0,eO.t)("fullscreen_actions.paste"),shortcutText:`${i}V`}:null,n?{action:"paste-as-live-object",flags:["edit"],featureFlags:["live_paste"],displayText:r?(0,eO.t)("fullscreen_actions.paste-as-live-object"):void 0}:null,n?{action:"paste-to-replace",flags:["edit"],displayText:r?(0,eO.t)("fullscreen_actions.paste-and-match-style"):void 0,shortcutText:r?`${i}\u21E7V`:void 0}:null,{action:"copy-paste-menu",flags:["edit"],children:l},{action:"copy-as-menu",flags:["!edit"],children:l},{action:"duplicate-in-place",flags:["edit","slides"],displayText:(0,eO.t)("fullscreen_actions.duplicate-in-place"),shortcutText:`${i}D`}];break;case"dev_handoff":e=[navigator.clipboard&&navigator.clipboard.write?{action:"copy",shortcutText:`${i}C`}:null,this.props.isLimitedDevMode?null:{action:"copy-text"},this.props.isLimitedDevMode?null:{action:"copy-as-svg"},this.props.isLimitedDevMode?null:{action:"copy-as-png"},this.props.isLimitedDevMode?null:{action:"copy-layer-name"},this.props.canCopyLink?this.getCopyLinkMenu():null];break;default:e=[navigator.clipboard&&navigator.clipboard.write?{action:"copy",shortcutText:`${i}C`}:null,a?{action:"paste",flags:["edit"],displayText:(0,eO.t)("fullscreen_actions.paste"),shortcutText:`${i}V`}:null,a?{action:"paste-as-live-object",flags:["edit"],featureFlags:["live_paste"],displayText:r?(0,eO.t)("fullscreen_actions.paste-as-live-object"):void 0}:null,n?{action:"paste-to-replace",flags:["edit"],displayText:(0,eO.t)("fullscreen_actions.paste-to-replace")}:null]}return e}getCopyExportMenu(){return[...this.props.canCopyLink?[this.getCopyLinkMenu(),this.getCopyHyperlinkMenu()]:[],this.getMaybeEmbedOrLinkPreviewWidgetMenu(),this.getMaybeEmbedDeactivateMenu(),{action:"copy-as-png"},{action:"export-selection-or-current-page",flags:["view_restricted","whiteboard"],displayText:(0,eO.t)("fullscreen.context_menu.export_selection")},this.getExportVideo()]}rulerGuideMenu(e,t){let n="toggle-rulers",a=[e===eU._0v.Y?{action:"remove-vertical-guides"}:{action:"remove-horizontal-guides"},{separator:!0},{action:n,displayText:(0,eO.t)("fullscreen.ruler_guide_context_menu.hide_rulers"),shortcutText:(0,yu.c1)(this.props.appModel.keyboardShortcuts,n)}],r=[{action:"remove-guide"}];switch(t){case eU.bQY.RULER:return a;case eU.bQY.GUIDE:return r;case eU.bQY.BOTH:return r.concat(...a);default:return[]}}singleSlideViewCarouselMenu(){return[...this.getCopyPasteMenu(),{separator:!0},{action:"delete-selection",flags:["slides"]},{separator:!0},{action:"create-slide",flags:["slides"]},{action:"select-all-slides",flags:["slides"]}]}contextMenu(){var e;let{objectItems:t,relatedComponentMenu:n,relatedStateMenu:a}=this.state,r=this.props.appModel,l="design"===this.props.selectedView.editorType,i="slides"===this.props.selectedView.editorType,o=(0,mP.Vj)(this.props.selectedView),s=(l||o)&&(0,yu.Yh)(this.props.appModel,"select-node-menu")&&!this.props.isObjectsPanelMenu&&t.length>1,c=this.props.isObjectsPanelMenu,d=c&&this.props.canAutoRenameLayers&&!1,u=window.FigmaMobile,m=Q7(r.showComments,this.props.selectedView,this.props.viewportInfo,this.props.clientX,this.props.clientY,this.props.dispatch,null==u?void 0:u.requestToAddDraftCommentPin),p=(0,yu.Yh)(this.props.appModel,"swap-to-related-symbol"),_=(0,yu.Yh)(this.props.appModel,"swap-to-related-state"),f=this.props.isPrototypeCanvasEditUiVisible?[{separator:!0},{action:"remove-interactions-on-selection",flags:["edit"]},{action:"add-prototype-starting-point",flags:["edit"]},{action:"delete-prototype-starting-point",flags:["edit"]}]:[],h=this.getCopyPasteMenu(),g=this.getCopyExportMenu(),E=[s?{action:"select-node-menu",children:t,name:"select-node-menu"}:null,this.getMoveToMenu(),{action:"move-to-file",flags:["edit"]}],v=!l,y=i?[]:[v?{separator:!0}:null,this.props.userCanRunPlugins?(0,wS.qz)(this.props,"contextmenu"):null,this.props.appModel.isReadOnly?null:(0,wI.Vd)(this.props,"contextmenu")],b=(0,eo.kc)().internal_only_debug_tools,C=b&&1===this.props.numSelected,w=(0,eo.kc)().convert_to_thumbnail_frame,T=this.props.spellCheckPreference,x=this.props.appModel.spellCheckSuggestions;return[...T||this.props.appModel.activeTextReviewPlugin?Q8(x,this.props.editorType):[],{separator:!0},...this.getTableCellMenu(),{separator:!0},...m,...h,{separator:!0},...(0,QT.x)({isOrgMember:this.props.isOrgMember}),{separator:!0},{action:"delete-selection",flags:["whiteboard","slides"]},{separator:!0},...this.isFigjam()?g:[],{separator:!0},...E,{action:"bring-to-front",flags:["edit"]},{action:"send-to-back",flags:["edit"]},{separator:!0},{action:"replace-selected-frame-with-section",flags:["edit","!slides"]},{action:"replace-selected-section-with-frame",flags:["edit","!slides"]},{action:"group-selection",flags:["edit"]},{action:"frame-selection",flags:["edit"]},{action:"create-section-from-selection",flags:["edit","!slides"]},{action:"ungroup-selection",flags:["edit"],displayText:(0,eO.t)("fullscreen.context_menu.ungroup")},c?{action:"rename-selection",flags:["edit"],displayText:(0,eO.t)("fullscreen.context_menu.rename")}:null,d?{action:"auto-rename-layers",flags:["edit"],displayText:(0,eO.t)("fullscreen.context_menu.auto_rename_layers"),shortcutText:"AI",featureFlags:["eai_auto_rename_layers"]}:null,{action:"flatten-selection",flags:["edit","!slides"],displayText:(0,eO.t)("fullscreen.context_menu.flatten")},{action:"outline-stroke",flags:["edit","!slides"],shortcutText:(0,yu.c1)(this.props.appModel.keyboardShortcuts,"outline-stroke-with-migration-notice")||(0,yu.c1)(this.props.appModel.keyboardShortcuts,"outline-stroke")},{action:"mask-selection",flags:["edit","!slides"],get displayText(){switch(eU.Ez5.editorState().selectionIsMask.getCopy()){case eU.F84.OFF:case eU.F84.MIXED:return(0,eO.t)("fullscreen_actions.mask-selection");case eU.F84.ON:return(0,eO.t)("fullscreen.menu.remove_mask")}}},this.props.canSetAsFileThumbnail&&!this.props.appModel.isReadOnly?this.getThumbnailMenu(this.getSelectionGuid()===(null==(e=this.props.openFile)?void 0:e.thumbnailGuid)):null,{separator:!0},{action:this.props.propertiesPanelShouldShowRemoveAutoLayout?"unstack-selection":"stack-selection",flags:["edit","!slides"]},{action:"create-symbol",flags:["edit"]},{action:"create-template",flags:["edit"],featureFlags:["dse_templates_proto"]},{action:"create-module",flags:["edit"],featureFlags:["dse_editor_templates_v1"]},p&&n?{name:"swap-to-related-symbol",flags:["edit"],childDropdown:n}:null,_&&a?{name:"swap-to-related-state",flags:["edit"],childDropdown:a}:null,{action:"reset-symbol",flags:["edit"]},{action:"detach-instance",flags:["edit"]},this.getMainComponentActionsMenu(),(0,eo.kc)().asset_suggestions?{action:"find-inspiration",flags:["edit","!slides"]}:null,(0,eo.kc)().asset_suggestions_api_overrides?{action:"inspect-fragment",flags:["!slides"]}:null,...v?[]:y,this.getFigJamRemovePluginActionsMenu(),{separator:!0},{action:"toggle-shown-for-selected-nodes",flags:["edit"],displayText:(0,eO.t)("fullscreen.context_menu.show_hide")},{action:"toggle-locked-for-selected-nodes",flags:["edit"],displayText:(0,eO.t)("fullscreen.context_menu.lock_unlock")},{action:"unlock-all",flags:["edit","whiteboard"]},{separator:!0},{action:"flip-horizontal",flags:["edit"]},{action:"flip-vertical",flags:["edit"]},{separator:!0},{action:"remove-annotations",flags:["dev_handoff"]},{separator:!0},...v?y:[],{separator:!0},this.getImageToProfilePicture(),...f,C?{separator:!0}:null,C?{action:"debug-inspect-layer-figma-scope"}:null,w?{action:"convert-to-thumbnail-frame"}:null,b?{action:"debug-print-as-test-code"}:null]}render(){let e=this.props.clientX,t=this.props.clientY,n=(0,n_.WI)(this.props.isTextEditModeMenu?this.textEditModeMenu():this.props.isSelectLayerMenu?this.selectLayerMenu():this.props.isRulerGuideMenu?this.rulerGuideMenu(this.props.axis,this.props.rulerGuideContextMenuType):this.props.isSingleSlideViewCarousel?this.singleSlideViewCarouselMenu():this.contextMenu());return Q.createElement("div",{className:`${eK.Dm}`},Q.createElement(Tb.Q,{appModel:this.props.appModel,sceneGraph:this.props.sceneGraph,selectedView:this.props.selectedView,sceneGraphSelection:this.props.sceneGraphSelection,menuItems:n,dispatch:this.props.dispatch,showPoint:!1,targetRect:{width:10,height:10,left:e+100,top:t,right:e+110,bottom:t-10},removeDisabledItems:!0,isLimitedDevMode:this.props.isLimitedDevMode,recordingKey:"layerMenu"}))}};function Q5(e){let t=(0,$.d4)(t_.tB),n=(0,ig.Tg)(),a=(0,ez._X)({subscribeToUpdates_expensive:!0}),r=(0,fp.ud)(),l=(0,ti._I)(),i=(0,ti.U4)(),o=(0,$.d4)(e=>e.mirror.appModel.activeTextReviewPlugin),s=Q9(),c=(0,$.wA)(),d=(0,ig.ll)(),u=(0,ig.Be)(),m=u.orgPlugins,p=(0,wA.BF)(),_=(0,eG.J2)((0,eH.UK)().spellCheckPreference),f=(0,ep.R)(e=>{let t=Object.keys(e.mirror.sceneGraphSelection),n=1===t.length?tN.qo.instance.get(t[0]):null,a=null!=n&&("FRAME"===n.type&&!n.resizeToFit||"SYMBOL"===n.type||"SECTION"===n.type),r=e.selectedView.editorType,l=0;return(0,c1.y2)(e.mirror.sceneGraph,e.mirror.sceneGraphSelection,e=>{if((0,QN.jX)(e)&&++l>1)return"stop"}),{appModel:e.mirror.appModel,publishedPlugins:e.publishedPlugins,publishedWidgets:e.publishedWidgets,localExtensions:e.localPlugins,userCanRunPlugins:(0,rt.GP)(e),sceneGraph:e.mirror.sceneGraph,sceneGraphSelection:e.mirror.sceneGraphSelection,library:e.library,masterSymbolGUID:e.mirror.selectionProperties.masterSymbolGUID,propertiesPanelShouldShowRemoveAutoLayout:e.mirror.selectionProperties.propertiesPanelShouldShowRemoveAutoLayout,orgEntity:(0,wP.Jl)(e),org:e.currentUserOrgId?e.orgById[e.currentUserOrgId]:null,user:e.user,fillPaints:e.mirror.selectionProperties.fillPaints,canSetAsFileThumbnail:a&&!(null==n?void 0:n.isInstanceSublayer),canCopyLink:e.mirror.selectionProperties.canCopyLinkToSelection,fileVersion:e.fileVersion,stateGroupSelectionInfo:e.mirror.selectionProperties.stateGroupSelectionInfo,widgetSelectionInfo:e.mirror.selectionProperties.selectedWidgetInfo,publishedCanvasWidgetVersions:e.publishedCanvasWidgetVersions,embedData:e.mirror.selectionProperties.embedData,linkPreviewData:e.mirror.selectionProperties.linkPreviewData,pluginRelaunchData:e.mirror.selectionProperties.pluginRelaunchData,numSelected:e.mirror.selectionProperties.numSelected,canAutoRenameLayers:l>1,attributionContextKey:e.sharingAttributionContextKey,editorType:r,isOrgMember:(0,cQ.canMemberOrg)(e.currentUserOrgId,e),isDevHandoff:"dev_handoff"===r,isLimitedDevMode:(0,sZ.$A)(e.selectedView)&&!(0,ti.tn)(e)}});return Q.createElement(Q2,{...e,...f,dispatch:c,spellCheckPreference:_,isPrototypeCanvasEditUiVisible:s,openFile:t,fileByKey:r,allSavedPlugins:u.plugins,recentlyUsedPlugins:n,viewportInfo:a,activeTextReviewPlugin:o,editorType:f.editorType,pluginAllowlist:d,orgSavedPlugins:m,orgPrivatePlugins:p,canAccessDevMode:l,canAccessDevModeEntryPoint:i})}function Q4(e){let t=(0,$.d4)(t_.tB),n=(0,ig.Tg)(),a=(0,ez._X)({subscribeToUpdates_expensive:!0}),r=(0,fp.ud)(),l=(0,ti._I)(),i=(0,ti.U4)(),o=(0,$.d4)(e=>e.mirror.appModel.activeTextReviewPlugin),s=Q9(),c=(0,$.wA)(),d=(0,ig.ll)(),u=(0,ig.Be)(),m=u.orgPlugins,p=(0,wA.BF)(),_=(0,eG.J2)((0,eH.UK)().spellCheckPreference),f=(0,ep.R)(e=>{let t=Object.keys(e.mirror.sceneGraphSelection),n=1===t.length?tN.qo.instance.get(t[0]):null,a=null!=n&&("FRAME"===n.type&&!n.resizeToFit||"SYMBOL"===n.type||"SECTION"===n.type),r=e.selectedView.editorType,l=0;return(0,c1.y2)(e.mirror.sceneGraph,e.mirror.sceneGraphSelection,e=>{if((0,QN.jX)(e)&&++l>1)return"stop"}),{appModel:e.mirror.appModel,publishedPlugins:e.publishedPlugins,publishedWidgets:e.publishedWidgets,localExtensions:e.localPlugins,userCanRunPlugins:(0,rt.GP)(e),sceneGraph:e.mirror.sceneGraph,sceneGraphSelection:e.mirror.sceneGraphSelection,library:e.library,masterSymbolGUID:e.mirror.selectionProperties.masterSymbolGUID,propertiesPanelShouldShowRemoveAutoLayout:e.mirror.selectionProperties.propertiesPanelShouldShowRemoveAutoLayout,orgEntity:(0,wP.Jl)(e),org:e.currentUserOrgId?e.orgById[e.currentUserOrgId]:null,user:e.user,fillPaints:e.mirror.selectionProperties.fillPaints,canSetAsFileThumbnail:a&&!(null==n?void 0:n.isInstanceSublayer),canCopyLink:e.mirror.selectionProperties.canCopyLinkToSelection,fileVersion:e.fileVersion,stateGroupSelectionInfo:e.mirror.selectionProperties.stateGroupSelectionInfo,widgetSelectionInfo:e.mirror.selectionProperties.selectedWidgetInfo,publishedCanvasWidgetVersions:e.publishedCanvasWidgetVersions,embedData:e.mirror.selectionProperties.embedData,linkPreviewData:e.mirror.selectionProperties.linkPreviewData,pluginRelaunchData:e.mirror.selectionProperties.pluginRelaunchData,numSelected:e.mirror.selectionProperties.numSelected,canAutoRenameLayers:l>1,attributionContextKey:e.sharingAttributionContextKey,editorType:r,isOrgMember:(0,cQ.canMemberOrg)(e.currentUserOrgId,e),isDevHandoff:"dev_handoff"===r,isLimitedDevMode:(0,sZ.$A)(e.selectedView)&&!(0,ti.tn)(e)}});return Q.createElement(Q2,{...e,...f,dispatch:c,spellCheckPreference:_,isPrototypeCanvasEditUiVisible:s,openFile:t,fileByKey:r,allSavedPlugins:u.plugins,recentlyUsedPlugins:n,viewportInfo:a,activeTextReviewPlugin:o,editorType:f.editorType,pluginAllowlist:d,orgSavedPlugins:m,orgPrivatePlugins:p,canAccessDevMode:l,canAccessDevModeEntryPoint:i,isSingleSlideViewCarousel:!0})}function Q3({expandElement:e,guid:t,...n}){let a=(0,$.d4)(e=>e.mirror.sceneGraphSelection),r=(0,$.d4)(e=>e.mirror.appModel),l=(0,$.d4)(e=>e.mirror.sceneGraph),i=(0,$.d4)(e=>e.openFile),o=(0,$.d4)(e=>e.mirror.selectionProperties.canCopyLinkToSelection),s=(0,c6.Fk)((e,t)=>{let n=e.get(t);return n?n.canHaveAnnotation:null},t),c=(0,c6.Fk)((e,t)=>{let n=e.get(t);return!!n&&n.annotations.length>0},t),d=(0,$.wA)(),u=ec.Ay.windows?"Ctrl+":"\u2318",m=[e?{name:"expand-element",callback:e}:null,{separator:!0},s?{name:c?"edit-annotation":"add-annotation",callback:()=>{ef.zl.set(Ko.J,!0)}}:null,{separator:!0},navigator.clipboard&&navigator.clipboard.write?{action:"copy",shortcutText:`${u}C`}:null,{action:"copy-text"},{action:"copy-as-svg"},{action:"copy-as-png"},{action:"copy-layer-name"},o?{name:"copy-link",args:{label:(0,eO.t)("fullscreen.context_menu.copy_link",{editorSpecifierString:""})},callback:()=>{if(!i)return;let e=(0,d1.jN)({file:i,nodeId:t,isDevHandoff:!0,isReadOnly:!0,isFigJam:!1,attributionContext:null});d(HG.S({fileKey:i.key,url:e,source:QM.d.FULLSCREEN_CONTEXT_MENU,visualBellMessageOverride:void 0}))}}:null],p=n.clientX,_=n.clientY;return Q.createElement("div",{className:`${eK.Dm}`},Q.createElement(Tb.Q,{appModel:r,sceneGraph:l,selectedView:n.selectedView,sceneGraphSelection:a,menuItems:m.filter(sj.t),dispatch:d,showPoint:!1,targetRect:{width:10,height:10,left:p+100,top:_,right:p+110,bottom:_-10},removeDisabledItems:!0,recordingKey:"codeMenu"}))}function Q6({...e}){let t=(0,$.d4)(e=>e.mirror.sceneGraphSelection),n=(0,$.d4)(e=>e.mirror.appModel),a=(0,$.d4)(e=>e.mirror.sceneGraph),r=(0,$.wA)(),l=ec.Ay.windows?"Ctrl+":"\u2318",i=[];navigator.clipboard&&navigator.clipboard.write&&i.push({name:"copy",shortcutText:`${l}C`,callback:()=>{e.onCopyText()}});let o=e.clientX,s=e.clientY;return Q.createElement("div",{className:`${eK.Dm}`},Q.createElement(Tb.Q,{appModel:n,sceneGraph:a,selectedView:e.selectedView,sceneGraphSelection:t,menuItems:i,dispatch:r,showPoint:!1,targetRect:{width:10,height:10,left:o+100,top:s,right:o+110,bottom:s-10},removeDisabledItems:!0,recordingKey:"codeMenu"}))}function Q7(e,t,n,a,r,l,i){return e&&n&&t.commentsEnabled&&ec.Ay.isIpadNative?[{name:"add-comment",callback:()=>{!function(e,t,n,a,r){if(!e)return;let l={x:t,y:n-QY};if(r)r({x:l.x,y:l.y,width:36.8,height:36.8});else{let t=(0,ez.$$)(e,l);a(Ki.vV({anchorPosition:t})),a(Ki.CX())}}(n,a,r,l,i)}},{separator:!0}]:[]}function Q8(e,t){var n,a,r;if(!e)return[];let l=!!(null==e?void 0:e.figma);return[...function(e,t){var n,a;let{figma:r,textReviewPlugin:l}=e,i=e=>{if(!e)return[];let n=[],a=(null==e?void 0:e.suggestions)||[],r=(null==e?void 0:e.rangeStart)||0,l=(null==e?void 0:e.rangeEnd)||0;for(let e of a.slice(0,3))n.push({action:"replace-selected-text",flags:["design","whiteboard","slides"],displayText:e,recordingKey:`replace-selected-text-${n.length}`,args:{replacementText:e,rangeStart:r,rangeEnd:l},callback(){let e=(0,cB.pi)({editorType:(0,w$.oD)(t)});(0,er.sx)("Spell Check Suggestion Clicked",{productType:e})}});return n},o=i(r),s=i(l);return o.length||s.length?!o.length&&s.length?[{header:!0,name:(null==(n=(0,wO.SH)())?void 0:n.plugin.name)||"Plugin"},...s]:o.length&&!s.length?o:[...o,{name:"replace-selected-text",displayText:(null==(a=(0,wO.SH)())?void 0:a.plugin.name)||"Plugin",children:s}]:[{header:!0,flags:["design","whiteboard"],name:(0,eO.t)("spell_check.no_suggestions_found")}]}(e,t),{separator:!0},...l&&(null==(n=null==e?void 0:e.figma)?void 0:n.rangeText)?[(r=null==(a=null==e?void 0:e.figma)?void 0:a.rangeText,{name:"spell-check-menu-add-word",flags:["design","whiteboard","slides"],callback:async(e,t,n)=>{try{let e=await i1.Ay.post("/api/spell-check-words",{word:r});if(200===e.status){let e=await (0,QP.Xw)();await e.addWords([r]),lT.Y5.triggerAction("redo-spell-checking")}else(0,ar.x1)("spell_check_add_word_error","spell check add word failed http request",{responseStatus:e.status,responseData:e.data},{reportAsSentryError:!0})}catch(e){e.message.includes("The word provided already exists in your dictionary")||(TB.k.error(e),(0,ar.x1)("spell_check_add_word_error","spell check add word error",{err:e},{reportAsSentryError:!0}))}}})]:[]]}function Q9(){let e=(0,eG.J2)((0,eV.aY)()),t=(0,$.d4)(e=>e.mirror.appModel.prototypeCanvasUiVisible&&!e.mirror.appModel.isReadOnly);return(0,TT.Zd)()?t:e===eU.FAf.PROTOTYPE}function $e({targetInViewport:e,nodeId:t,selectedView:n}){let a=(0,$.wA)(),r=(0,$.d4)(e=>e.mirror.appModel),l=(0,$.d4)(e=>e.mirror.sceneGraph),i=(0,eF.mJ)(t),o=null==i?void 0:i.hasCompletedStatus,s=(null==i?void 0:i.hasReadyStatus)||o,c=null==i?void 0:i.hasBeenEditedSinceLastStatusChange,d=(0,t_.q5)(),u=(0,t8.U)("status_label_menu"),m=(0,ez.ni)(),p=(0,ti._I)(),_=(0,ti.U4)(),f=(0,yu.Yh)(r,"remove-selection-ready-status"),h=(0,eo.kc)().dt_dev_mode_workflows&&(0,yu.Yh)(r,"set-selection-completed-status"),g=(0,eo.kc)().dt_dev_mode_workflows&&o&&(0,yu.Yh)(r,"add-selection-ready-status"),E=(0,Q.useMemo)(()=>eU.w3z.isReadOnly(eU.SES.NODE_STATUS),[]),v=(0,eo.kc)().dt_dev_mode_workflows,y=(0,eo.kc)().dt_dev_mode_workflows&&c,b=_&&E&&!p,C=(0,ep.R)(e=>"fullscreen"===e.selectedView.view?{...e.selectedView,editorType:"dev_handoff",showOverview:!1,devModeFocusId:t}:e.selectedView),w=(0,Q.useMemo)(()=>s&&d?[!E&&y?{render:()=>Q.createElement(QV,{onResult:e=>{aZ.z4.setNodesReady(!0,[t],"canvas",e??null),a(nP.oB())}}),preventDismissOnSelected:!0,flags:["design","dev_handoff"]}:null,!E&&y?{separator:!0,flags:["design","dev_handoff"]}:null,{name:"ready-status-open-in-dev-mode",callback:()=>{u("handoff")},flags:["design"]},{name:"ready-status-copy-dev-link",callback:()=>{let e=(0,d1.jN)({file:d,nodeId:t,isDevHandoff:!0});a(HG.S({fileKey:d.key,url:e,source:QM.d.STATUS_DROPDOWN_MENU}))},flags:["dev_handoff","design"]},v?{name:"enter-dev-mode-focus-view",callback:()=>{a(nP.$T(C))}}:null,b?{separator:!0,flags:["design"]}:null,b?{render:()=>Q.createElement(Qg,null),optionHeight:32,flags:["design"]}:null,!E&&f?{name:"ready-status-mark-as-not-ready",callback:()=>{aZ.z4.setNodesReady(!1,[t],"canvas",null)},flags:["dev_handoff","design"]}:null,!E&&h?{name:"completed-status-mark-as-completed",callback:()=>{aZ.z4.setNodesCompleted([t],"canvas")},flags:["dev_handoff","design"]}:null,!E&&g?{name:"completed-status-remark-as-ready",callback:()=>{aZ.z4.setNodesReady(!0,[t],"canvas",null)},flags:["dev_handoff","design"]}:null].filter(e=>null!==e):[],[s,d,E,y,b,f,h,g,t,a,u,v,C]),T=e.origin.x+m.x,x=e.origin.y+m.y,N={left:T,top:x,right:T+e.size.x,bottom:x+e.size.y,width:e.size.x,height:e.size.y};return Q.createElement("div",{className:`${eK.Dm}`},Q.createElement(Tb.Q,{appModel:r,sceneGraph:l,selectedView:n,menuItems:w,dispatch:a,showPoint:!0,targetRect:N,removeDisabledItems:!0,recordingKey:"readyStatusMenu",minWidth:50}))}function $t(){let e=(0,aX.U)(),t=(0,$.wA)(),n=(0,kH.Gt)(null==e?void 0:e.data.pluginId,null==e?void 0:e.data.triggeredFrom),a=(0,kH.dR)(null==e?void 0:e.data.pluginId,null==e?void 0:e.data.triggeredFrom),r=(0,kH.t0)(null==e?void 0:e.data.pluginId,n,a);if(!e)return null;let l=e.data.target.height+e.data.target.width>0;return Q.createElement(aq.j,{showPoint:l,items:r,onSelectItem:e=>{e.callback&&e.callback("",null,t)},parentRect:e.data.target,dispatch:t,lean:l?"left":"right"})}Q2.displayName="SelectionContextMenu",Q2.refreshCache=new QR.O(n5.A.duration(1,"day"));var $n=n(746696);let $a=(0,aE.Ju)(function({sectionId:e,initialTemplateId:t,initialShelfId:n,onConfirm:a,onCancel:r}){let l=(0,t_.tS)();return Q.createElement(t6.fu,{name:"section_preset_picker_confirmation_modal_shown",properties:{fileKey:l,sectionId:e,initialTemplateCategory:n,initialTemplateId:t,templateType:NV.n.HubFile}},Q.createElement(tS.Rw,{confirmationTitle:Q.createElement("div",null,Q.createElement("p",{className:ea()(tw.cx.fontSemiBold.font15.$,"section_preset_picker--alertHeader--oa08R")},Q.createElement(eO.Tx,{id:"whiteboard.section_preset_picker.confirmation_modal.header"})),Q.createElement(eO.Tx,{id:"whiteboard.section_preset_picker.confirmation_modal.description"})),confirmText:(0,eO.t)("whiteboard.section_preset_picker.confirmation_modal.confirm_text"),cancelText:(0,eO.t)("whiteboard.section_preset_picker.confirmation_modal.cancel_text"),onConfirm:a,onCancel:r}))},"SectionPresetPickerConfirmationModal");function $r({name:e,leadingIcon:t,onIconClick:n}){return Q.createElement("div",{className:"section_preset_picker--headerItemContainer--0R5QO dropdown--_optionBase--z-REc text--fontNeg12--2PWcg text--_fontBase--QdLsd text--_negText--j9g-L"},Q.createElement("button",{className:ea()("section_preset_picker--headerIconButton--tDLql section_preset_picker--iconBase--HKG97",{"section_preset_picker--hover--GYcQi":n}),onClick:n},Q.createElement(eM.B,{svg:t})),Q.createElement("div",{className:"section_preset_picker--headerText--XZRQV section_preset_picker--textContainer--dyEMF text--fontNeg11--StdFq text--_fontBase--QdLsd text--_negText--j9g-L text--fontNeg12--2PWcg text--_fontBase--QdLsd text--_negText--j9g-L"},e))}var $l=n(865141),$i=n(851202);function $o(){return Q.createElement("div",{className:"section_preset_picker--loadingSpinnerContainer--OM30n"},Q.createElement(t2.kt,null))}function $s({name:e,description:t,iconUrl:n}){return Q.createElement($d,{name:e,description:t,iconUrl:n,trailingIcon:Q.createElement(eM.B,{className:"section_preset_picker--chevronRight--hORsb",svg:$i.A}),itemType:"shelf"})}function $c({name:e,description:t,iconUrl:n,isSelected:a,iconBackgroundColor:r}){return Q.createElement($d,{name:e,description:t,iconUrl:n,trailingIcon:a?Q.createElement(eM.B,{svg:$l.A}):void 0,iconBackgroundColor:r,itemType:"template"})}function $d({name:e,description:t,itemType:n,iconUrl:a,trailingIcon:r,iconBackgroundColor:l}){return Q.createElement("div",{className:ea()({"section_preset_picker--shelfItemContainer--KochN section_preset_picker--bodyItemContainer--Ani9M dropdown--option--JMVCh dropdown--_optionBase--z-REc text--fontNeg12--2PWcg text--_fontBase--QdLsd text--_negText--j9g-L":"shelf"===n,"section_preset_picker--templateItemContainer--tCRxk section_preset_picker--bodyItemContainer--Ani9M dropdown--option--JMVCh dropdown--_optionBase--z-REc text--fontNeg12--2PWcg text--_fontBase--QdLsd text--_negText--j9g-L":"template"===n})},Q.createElement("div",{className:ea()({"section_preset_picker--shelfItemIcon--MASDu section_preset_picker--iconBase--HKG97":"shelf"===n,"section_preset_picker--templateItemIcon--eWzYK section_preset_picker--iconBase--HKG97":"template"===n}),style:{backgroundColor:l}},a&&Q.createElement("img",{src:a,alt:(0,eO.t)("whiteboard.section_preset_picker.shelf.thumbnail")})),Q.createElement("div",{className:"section_preset_picker--textContainer--dyEMF text--fontNeg11--StdFq text--_fontBase--QdLsd text--_negText--j9g-L"},Q.createElement("div",{className:"section_preset_picker--nameText--LS4BG"},e),Q.createElement("div",{className:"section_preset_picker--descriptionText--OCJkN"},t)),r&&Q.createElement("div",{className:"section_preset_picker--trailingIcon--X-run section_preset_picker--iconBase--HKG97"},r))}var $u=n(449984),$m=n(527335),$p=n(192283);let $_="section_preset_item",$f=/^Section(\s\d+)?$/,$h=(0,rT.jz)(uT.IuL);function $g({sectionId:e,sectionName:t,initialShelfId:n,initialTemplateId:a,showAlertOnSelect:r}){let l,i;let o=(0,$.wA)(),s=(0,t_.tS)(),c=(0,ef.md)(HE.g),d="hasData"===c.state?c.data:[],u=0!==d.length,[m,p]=(0,Q.useState)(n),[_,f]=(0,Q.useState)(!1),[h,g]=(0,Q.useState)(!1),E=(0,Sc.fG)(),v=function(){let e=(0,t_.tS)(),t=(0,$.d4)(e=>e.fileVersion),n=(0,e_.Xr)($n.ME);return(0,Q.useCallback)((a,r)=>n({fileKey:e,fileVersion:t,template:a},r),[e,t,n])}(),y=(0,e_.Xr)($n.Yq),b=(0,e_.Xr)($n.pn),C=(0,e_.Xr)($n.bj),w=(0,ef.md)($n.oh),T=(0,ef.md)($n.pF),x=(0,y4.q)(),N=(0,ef.md)($n.pg),k=function(e,t){let n=(0,ez._X)({subscribeToUpdates_expensive:!0}),a=n.zoomScale,r=(0,Q.useMemo)(()=>{let t=tN.qo.instance.get(e);if(!t)return null;let n=t.absoluteBoundingBox;return{canvasSpaceSectionTopLeft:t.canvasSpaceSectionTopLeft,canvasSpaceSectionOrigin:{x:n.x,y:n.y}}},[a,e]);if(!r)return null;let{canvasSpaceSectionTopLeft:l,canvasSpaceSectionOrigin:i}=r,o=(0,ez.Z0)(n,{x:l.x,y:l.y},!0),s={x:o.x-8,y:o.y},c=(0,ez.Z0)(n,i,!0),d=Math.max(s.y+n.y,n.y+8),u={top:d,bottom:d+200,height:200,left:0,right:s.x,width:285},m={x:(0,ez.Qt)(t.x,0,a,0),y:(0,ez.Qt)(t.y,0,a,0)};return{contextMenuRect:u,mouseBoundaryRect:{x:s.x,y:c.y+n.y,width:m.x+8,height:m.y}}}(e,T),S=Q.useRef(!1),I=Q.useCallback(()=>{y(),b(),f(!1)},[y,b]);(0,Q.useEffect)(()=>{let e=setTimeout(()=>{g(!0)},500);return()=>clearTimeout(e)},[]),(0,Q.useEffect)(()=>()=>{S.current||(y(),b())},[y,b]);let A=null==k?void 0:k.mouseBoundaryRect;if((0,Q.useEffect)(()=>{if(!_||!A)return;let e=(0,cd.s)(function(e){var t;let n=(null==(t=document.activeElement)?void 0:t.id)??"";(!A||e.clientX>A.x+A.width||e.clientX<A.x||e.clientY>A.y+A.height||e.clientY<A.y)&&!n.includes($_)&&I()},16);return window.addEventListener("mousemove",e),()=>{window.removeEventListener("mousemove",e)}},[I,_,A]),!k)return null;let{contextMenuRect:P}=k,O=(n,r,l)=>{if(x&&s&&!N&&(f(!1),(null==w?void 0:w.template.id)!==n.template.id)){if(y(),n.template.id===a){b();return}n.type===NV.n.HubFile&&(0,ND.Zg)({insert:()=>v(n,{moveViewportAfterPreview:!1,priority:"user-visible",previewManager:{nodeType:eU.Z6A.SECTION,options:{nodeId:e,newName:$f.test(t)||r&&t===r?l:null,shelfId:n.category??"",templateId:n.template.id,templateName:(0,Sc.gY)(n)}}}),template:n,fileKey:s,dispatch:o,triggeredFrom:"section-preset",userTriggered:!1,isPreview:!0})}},L=e=>{(0,ND.Zg)({insert:()=>C({selectTemplateAfterCommit:!1,moveViewportAfterCommit:!1,priority:"user-visible",editScopeType:cU.zk.USER}),template:e,fileKey:s,dispatch:o,triggeredFrom:"section-preset",userTriggered:!0})},M=t=>{x&&s&&!N&&t.template.id!==a&&(S.current=!0,r?o((0,n9.to)({type:$a,data:{sectionId:e,initialTemplateId:a,initialShelfId:n,onConfirm:()=>L(t),onCancel:()=>I()}})):L(t))},D=m?d.find(e=>e.id===m):void 0;if(D){l={displayText:D.title,render:()=>Q.createElement($r,{name:D.title,leadingIcon:$m.A,onIconClick:()=>{p(null),y()}}),preventDismissOnSelected:!0};let e=n&&a?(0,$u.bO)(d,n,a):null;i=D.shelf_content.map((t,n)=>{var r;let l={type:NV.n.HubFile,template:t,category:m},{name:i,description:o}=E(l),s=(0,kI.$J)(o).trim(),c=(null==(r=(l.template.client_meta?JSON.parse(l.template.client_meta):{}).preset_picker)?void 0:r.thumbnail_url_dark_bg)??"";return{displayText:i,render:()=>Q.createElement($c,{name:i,description:s,iconUrl:c,isSelected:a===l.template.id,iconBackgroundColor:(0,$u.j3)(n)}),onMouseEnter:()=>{O(l,e,i)},callback:()=>M(l)}})}else l={displayText:"Edit section name",render:()=>Q.createElement($r,{name:(0,eO.t)("whiteboard.section_preset_picker.shelf.title"),leadingIcon:$p.A}),preventDismissOnSelected:!0},i=d.map(t=>({displayText:t.title,render:()=>{var e;return Q.createElement($s,{name:t.title,description:t.description,iconUrl:null==(e=t.shelf_meta.preset_picker)?void 0:e.thumbnail_url})},preventDismissOnSelected:!0,callback:()=>{(0,er.sx)("section_preset_picker_category_clicked",{fileKey:s,sectionId:e,selectedCategory:t.id,initialTemplateCategory:n,initialTemplateId:a}),p(t.id),y()}}));if(!u){if(!h)return null;i.push({displayText:"Loading",render:()=>Q.createElement($o,null),disabled:!0})}return Q.createElement(t6.fu,{name:"section_preset_picker_shown",enabled:u,properties:{fileKey:s,sectionId:e,initialTemplateCategory:n,initialTemplateId:a,templateType:NV.n.HubFile}},Q.createElement(aq.j,{items:[l,...i],recordingKey:$_,showPoint:!1,parentRect:P,depth:0,onSelectItem:e=>{e.callback&&e.callback("",null,o)},onMouseLeaveMenu:e=>{if(e.clientX>=P.right){f(!0);return}I()},dispatch:o,minBottomMargin:$h,lean:"left",leanPadding:0,type:ho.it.PRESET_PICKER,minWidth:285,disableDropdownScrollContainer:!0,displayOverTarget:!0,preventZoom:!0}))}function $E(e){return{attachmentId:e.id,attachmentUploadedAt:e.uploadedAt.toString(),imageUrlPrefix:function(e){if(-1!==e.search("blob"))return"blob";let t=e.search("/images/");if(-1!==t)return e.substring(0,t)}(e.imageUrl)}}function $v(e){let t=(0,$.wA)(),n=(0,$.d4)(e=>e.mirror.appModel),a=e.clientX,r=e.clientY,l=async t=>{let n=await fetch(e.attachment.imageUrl,{mode:"cors"}),a=await n.blob();if(!t)return a;if("image/jpeg"===a.type||"image/gif"===a.type){let e=await createImageBitmap(a),t=document.createElement("canvas");t.width=e.width,t.height=e.height;let n=t.getContext("2d");return null==n||n.drawImage(e,0,0),new Promise(e=>{t.toBlob(t=>{e(t)},"image/png")})}return a},i=[{name:"download-attachment",callback:async()=>{try{await l(!1).then(n=>{let a=URL.createObjectURL(n),r=document.createElement("a");r.href=a,r.download=(0,eO.t)("comments.attachment_default_name",{fileExtension:n.type.split("/")[1]}),r.click(),URL.revokeObjectURL(a),(0,er.sx)("Comment Attachment Download Success",$E(e.attachment)),t(eL.F.enqueue({message:(0,eO.t)("comments.download_attachment_success"),type:"attachment-download"}))})}catch(n){(0,er.sx)("Comment Attachment Download Failure",$E(e.attachment)),(0,ar.$D)(ao.e.FEEDBACK,n),t(eL.F.enqueue({message:(0,eO.t)("comments.download_attachment_error"),type:"attachment-download",error:!0}))}}},{name:"copy-attachment",callback:async()=>{t(eL.F.enqueue({message:(0,eO.t)("comments.copying_attachment"),type:"copy-attachment",icon:RO.zX.SPINNER}));try{await l(!0).then(async n=>{let a=new ClipboardItem({[n.type]:n});await navigator.clipboard.write([a]).then(()=>{(0,er.sx)("Comment Attachment Copy Success",$E(e.attachment)),t(eL.F.enqueue({message:(0,eO.t)("comments.copy_attachment_success"),type:"copy-attachment"}))})})}catch(n){(0,er.sx)("Comment Attachment Copy Failure",$E(e.attachment)),(0,ar.$D)(ao.e.FEEDBACK,n),t(eL.F.enqueue({message:(0,eO.t)("comments.copy_attachment_error"),type:"copy-attachment",error:!0}))}}}];return Q.createElement(Tb.Q,{appModel:n,menuItems:i,targetRect:{width:10,height:10,left:a+100,top:r,right:a+110,bottom:r-10},showPoint:!1,selectedView:e.selectedView,recordingKey:"comment-context-menu",dispatch:t})}var $y=n(898065);function $b({targetInViewport:e,annotationsCount:t,selectedView:n}){var a;let r=(0,$.wA)(),l=(0,$.d4)(e=>e.mirror.appModel),i=(0,$.d4)(e=>e.mirror.sceneGraph),o=(0,t8.U)("annotations_button"),s=(0,ez.ni)(),c=(0,ti._I)(),d=(0,ti.U4)(),u=(a=()=>o("handoff"),c?[{name:"view-annotations",callback:a,flags:["design"]}]:d?[{header:!0,name:(0,eO.t)("dev_handoff.annotation.number_annotations",{count:t})},{separator:!0},{render:()=>Q.createElement(Qv,null),optionHeight:32,flags:["design"]}]:[{header:!0,name:(0,eO.t)("dev_handoff.annotation.number_annotations",{count:t})}]),m=e.origin.x+s.x,p=e.origin.y+s.y,_={left:m,top:p,right:m+e.size.x,bottom:p+e.size.y,width:e.size.x,height:e.size.y};return Q.createElement("div",{className:eK.Dm},Q.createElement(Tb.Q,{appModel:l,sceneGraph:i,selectedView:n,menuItems:u,dispatch:r,showPoint:!0,targetRect:_,removeDisabledItems:d,recordingKey:"annotationsButtonMenu",minWidth:50,allowDisabledOnly:!d}))}function $C(e){let t=(0,$.wA)(),n=(0,gI.I_)(),a=(0,$.d4)(e=>e.mirror.appModel);if(!(0,$.d4)(e=>(0,cp.U2)(e.selectedView)))return null;let{thread:r}=e,l=!!r.comments.find(e=>e.isUnread),i=!!r.isPendingFromSinatra,o=null,s=n.commentReceipts;s&&(o=l?{name:"mark-as-read",callback:()=>{t(Ki.AY({receiptsAPI:s,thread:r}))}}:{name:"mark-as-unread",callback:()=>{t(Ki.QY({receiptsAPI:s,comment:r.comments[0]}))}});let c=[];i||"feed-post"===r.sidebarItemType?i||"feed-post"!==r.sidebarItemType||c.push(...[{name:"copy-link",callback:()=>{e.copyLink(r.comments[0])}},{separator:!0}]):c.push(...[{name:"resolve",callback:()=>{t(Ki.hx({thread:r,resolved:!0}))},disabled:null!=r.commentPin},o,{name:"copy-link",callback:()=>{e.copyLink(r.comments[0])}},{separator:!0}]),c.push({action:"toggle-show-comments",displayText:(0,eO.t)("fullscreen.context_menu.hide_comments")});let d=c.filter(e=>e).map(e=>e),u={width:224,height:129,left:e.pinClientRect.x,top:e.pinClientRect.y,right:e.pinClientRect.x+e.pinClientRect.width,bottom:e.pinClientRect.y+e.pinClientRect.height};return Q.createElement(Tb.Q,{appModel:a,menuItems:d,targetRect:u,showPoint:!1,selectedView:e.selectedView,recordingKey:"comment-context-menu",dispatch:t})}function $w(e){let t=(0,$.d4)(e=>!e.mirror.appModel.isReadOnly),n=(0,$.d4)(e=>e.openFile),a=(0,at.iZ)(),r=(0,$.d4)(e=>(null==n?void 0:n.team)||null),l=(0,ig.JI)(),i=(0,$.d4)(e=>{var t;return!!(null==(t=e.openFile)?void 0:t.canEdit)}),o=(0,$.wA)(),s=e.dropdownShown.type,c=(0,$y.v)();if(s===eK.K9){let{clientX:n,clientY:a}=e.dropdownShown.data;return Q.createElement(Q5,{clientX:n,clientY:a,selectedView:e.selectedView,userCanEditFile:t,userCanRunPlugins:l,isObjectsPanelMenu:!1})}if(s===eK.wi){let{clientX:n,clientY:a}=e.dropdownShown.data;return Q.createElement(Q5,{clientX:n,clientY:a,selectedView:e.selectedView,userCanEditFile:t,userCanRunPlugins:l,isSelectLayerMenu:!0,isObjectsPanelMenu:!1})}if(s===eK.ku){let{clientX:n,clientY:a}=e.dropdownShown.data;return Q.createElement(Q5,{clientX:n,clientY:a,selectedView:e.selectedView,userCanEditFile:t,userCanRunPlugins:l,isObjectsPanelMenu:!1,isTextEditModeMenu:!0})}if(s===eK.t4){let{clientX:n,clientY:a,axis:r,rulerGuideContextMenuType:i}=e.dropdownShown.data;return Q.createElement(Q5,{clientX:n,clientY:a,selectedView:e.selectedView,userCanEditFile:t,userCanRunPlugins:l,isObjectsPanelMenu:!1,isTextEditModeMenu:!1,isRulerGuideMenu:!0,axis:r,rulerGuideContextMenuType:i})}if(s===eK.Rb){let{clientX:n,clientY:a}=e.dropdownShown.data;return Q.createElement(Q5,{clientX:n,clientY:a,selectedView:e.selectedView,userCanEditFile:t,userCanRunPlugins:l,isObjectsPanelMenu:!0})}if(s===eK.W_){let{clientX:n,clientY:a}=e.dropdownShown.data;return Q.createElement(Qq,{clientX:n,clientY:a,selectedView:e.selectedView,userCanEditFile:t,userCanRunPlugins:l,isObjectsPanelMenu:!0,ariaLabelledBy:e.ariaLabelledBy})}if(s===eK.LO)return Q.createElement($t,null);else if(s===eK.d2){let{clientX:a,clientY:i,nodeIds:o,shouldShowDuplicateOption:s}=e.dropdownShown.data;return Q.createElement(QQ,{nodeIds:o,clientX:a,clientY:i,selectedView:e.selectedView,userCanEditFile:t,userCanRunPlugins:l,isObjectsPanelMenu:!0,team:r,openFile:n,shouldShowDuplicateOption:s})}else if(s===eK.$O){let{clientX:t,clientY:n,version:a,checkpointKey:r,callback:o,editName:s,enableClear:c}=e.dropdownShown.data;return Q.createElement(Q0,{version:a,checkpointKey:r,clientX:t,clientY:n,selectedView:e.selectedView,userCanEditFile:i,userCanRunPlugins:l,isObjectsPanelMenu:!1,editName:s,enableClear:c,callback:o})}else if(s===eK.VJ){let{comment:t,parentRect:n,thread:r,isUnread:l}=e.dropdownShown.data;return Q.createElement(Qp.V,{dispatch:o,comment:t,parentRect:n,currentUser:a,isUnread:l,thread:r,copyLink:c})}else if(s===eK.Z7){let{thread:t,pinClientRect:n}=e.dropdownShown.data;return Q.createElement($C,{selectedView:e.selectedView,thread:t,pinClientRect:n,copyLink:c})}else if(s===eK.DT){let{attachment:t,clientX:n,clientY:a}=e.dropdownShown.data;return Q.createElement($v,{attachment:t,selectedView:e.selectedView,clientX:n,clientY:a})}else if(s===eK.i){let{clientX:n,clientY:a,stringToCopy:r,expandElement:i,guid:o}=e.dropdownShown.data;return Q.createElement(Q3,{clientX:n,clientY:a,selectedView:e.selectedView,userCanEditFile:t,userCanRunPlugins:l,isObjectsPanelMenu:!0,stringToCopy:r,expandElement:i,guid:o})}else if(s===eK.Sl){let{clientX:n,clientY:a,onCopyText:r}=e.dropdownShown.data;return Q.createElement(Q6,{clientX:n,clientY:a,selectedView:e.selectedView,userCanEditFile:t,userCanRunPlugins:l,isObjectsPanelMenu:!0,onCopyText:r})}else if(s===eK.WJ){let{targetInViewport:n,nodeId:a}=e.dropdownShown.data;return Q.createElement($e,{targetInViewport:n,selectedView:e.selectedView,userCanEditFile:t,userCanRunPlugins:l,isObjectsPanelMenu:!0,nodeId:a})}else if(s===eK.XX){let{targetInViewport:n,annotationsCount:a}=e.dropdownShown.data;return Q.createElement($b,{targetInViewport:n,annotationsCount:a,selectedView:e.selectedView,userCanEditFile:t,userCanRunPlugins:l,isObjectsPanelMenu:!0})}else if(s===eK.si){let{sectionId:n,initialShelfId:a,initialTemplateId:r,sectionName:i,showAlertOnSelect:o}=e.dropdownShown.data;return Q.createElement($g,{sectionId:n,sectionName:i,initialShelfId:a,initialTemplateId:r,showAlertOnSelect:o,selectedView:e.selectedView,userCanEditFile:t,userCanRunPlugins:l,isObjectsPanelMenu:!0})}else if(s===eK.U3){let{clientX:n,clientY:a}=e.dropdownShown.data;return Q.createElement(Q4,{clientX:n,clientY:a,selectedView:e.selectedView,userCanEditFile:t,userCanRunPlugins:l,isObjectsPanelMenu:!1})}else if(s===eK.J7){let{clientX:n,clientY:a}=e.dropdownShown.data;return Q.createElement(mA.mh,{clientX:n,clientY:a,selectedView:e.selectedView,userCanEditFile:t,userCanRunPlugins:l,isObjectsPanelMenu:!1,isTextEditModeMenu:!0})}return null}var $T=n(696075),$x=n(918272),$N=n(444573),$k=n(199825),$S=n(202613),$I=n(716928),$A=n(187570),$P=n(488315),$O=n(310515);let $L="stack_controls--input--gK1jo text--fontNeg12--2PWcg text--_fontBase--QdLsd text--_negText--j9g-L",$M="stack_controls--scrubbableControl--b1ChI",$D="stack_controls--inputSvg--wFizL",$R="stack_controls--stackSpacingRow--Uus3H";function $F(){let e=(0,eG.J2)(eU.Ez5.canvasViewState().focusedStackRegion);if(!e)return null;let{region:t,focus:n}=e;return t===eU.RN9.SPACING?Q.createElement($U,{focusOnMount:n}):t===eU.RN9.COUNTER_SPACING?Q.createElement($H,{focusOnMount:n}):Q.createElement($V,{stackRegion:t,focusOnMount:n})}let $B=e=>{if(e.keyCode===es.Uz.TAB){e.preventDefault(),e.currentTarget.blur();let t=e.shiftKey;eU.Qa7.tabActiveStackRegion(t)}};function $U({focusOnMount:e}){return Q.createElement(nM.fI,{className:$R},Q.createElement($O.KI,{focusOnMount:e,outerClassName:$M,inputClassName:$L,svgClassName:$D,onBlur:eU.Qa7.clearActiveStackRegion,onKeyDown:$B,onPaste:$G,noBorderOnFocus:!0,recordingKey:"stackSpacingControl",inputTestId:"stackSpacingControl",source:"canvas",onCanvasUI:!0}))}function $H({focusOnMount:e}){return Q.createElement(nM.fI,{className:$R},Q.createElement($A.q,{focusOnMount:e,outerClassName:$M,inputClassName:$L,svgClassName:$D,onBlur:eU.Qa7.clearActiveStackRegion,onKeyDown:$B,onPaste:$G,noBorderOnFocus:!0,recordingKey:"stackCounterSpacingControl",inputTestId:"stackCounterSpacingControl",source:"canvas",onCanvasUI:!0}))}function $V({stackRegion:e,focusOnMount:t}){let[n]=(0,KC.HF)(e),a=Array.isArray(n)?n.length:0;return e===eU.RN9.SPACING?null:Q.createElement(nM.fI,{className:ea()("stack_controls--stackPaddingRow--40WUa",{"stack_controls--large--bJFUN":a>3})},Q.createElement($P.s,{paddingSelection:e,focusOnMount:t,outerClassName:$M,inputClassName:$L,onBlur:eU.Qa7.clearActiveStackRegion,onKeyDown:$B,onPaste:$G,noBorderOnFocus:!0,svgClassName:$D,recordingKey:"stackPaddingControl",inputTestId:"stackPaddingControl",source:"canvas",disableVariablesEntryPoint:!0}))}function $G(e){(0,hl.gk)(e)&&(e.preventDefault(),e.currentTarget.blur(),cU.l7.user("paste-in-stack",()=>{eU.glU.triggerAction("paste",{})}))}let $K=Q.memo(function(){return(0,$.d4)(e=>e.mirror.appModel.isReadOnly)?null:Q.createElement($W,null)});function $W(){return Q.createElement($N.k4,{isShown:!0},Q.createElement($I.IA,null,Q.createElement($z,{testID:"DesignInlineMenu"})))}function $z({testID:e}){let t=(0,$.d4)(e=>{let t=e.mirror.selectionProperties.stackMode;return 1===e.mirror.selectionProperties.numSelected&&("HORIZONTAL"===t||"VERTICAL"===t)});return(0,$.d4)(e=>{let t=e.mirror.selectionProperties.selectedWidgetInfo;return!!(1===e.mirror.selectionProperties.numSelected&&(null==t?void 0:t.propertyMenu.length))})?Q.createElement(JA.W1,{size:"small",testID:e},Q.createElement($k.jk,null),Q.createElement($S.x,null)):t?Q.createElement(JA.W1,{testID:e,darkModePreferred:!0},Q.createElement($F,{key:"stackControls"})):null}let $j="multi_edit_offscreen_indicators--indicatorGraphicBlue--rtnWM",$Y="multi_edit_offscreen_indicators--indicatorGraphicPurple--1O1nb",$Z=(0,rT.jz)(uT.J4v),$X=(0,rT.jz)(uT.v5y),$q=(0,rT.jz)(uT.M$q),$J=(0,rT.jz)(uT.jHA);function $Q(){let e=(0,lg.kl)("selectionRegions"),t=(0,lh.E7)(e),n=(0,$.d4)(e=>"fullscreen"===e.selectedView.view&&"design"===e.selectedView.editorType),a=n&&!!t&&t.length>=1,r=(0,ez._X)({subscribeToUpdates_expensive:a});return n&&r&&t?Q.createElement($$,{viewportInfo:r,selectionRegions:t}):null}function $$({viewportInfo:e,selectionRegions:t}){let n=(0,Q.useContext)(US.kw),a=(0,Q.useMemo)(()=>n.getCommentsWrapperOffset(e),[n,e]),r=a.x,l=a.y,i={transform:`translate(${r}px, ${l}px)`},o=(0,aD.GS)(),s=(0,$.d4)(e=>{var t;return null==(t=e.mirror)?void 0:t.appModel.showUi}),c=(0,eH.dP)()+(o?$q:$Z),d=(0,eH.qw)()+c+(o?$q:$X),{isLeftPanelCollapsed:u}=(0,ci.Ye)(),m=(o&&s&&!u?c:0)-3.5,p=(o&&s?d:0)-7,_=(0,eG.J2)((0,eH.UK)().renderRulers)&&s?$J:0,f={x:m+_,y:-3.5+_,width:e.width-p-_,height:e.height- -7-_},h={x:m+_,y:-3.5+_,width:e.width-p-_,height:e.height- -7-_};return Q.createElement(Q.Fragment,null,Q.createElement(Kl.p,null,Q.createElement("div",{"aria-hidden":!0,"data-forward-events-to-fullscreen":!0,className:"multi_edit_offscreen_indicators--overlay--NcZeV",style:i},!!(null==t?void 0:t.length)&&Q.createElement("div",null,t.map((t,n)=>{let a=(0,ez.Z0)(e,{x:t.bounds.x,y:t.bounds.y}),r=(0,ez.Z0)(e,{x:t.bounds.x+t.bounds.width,y:t.bounds.y+t.bounds.height}),l={x:a.x,y:a.y,width:r.x-a.x,height:r.y-a.y};return l.x<f.x+f.width&&l.x+l.width>f.x&&l.y+l.height>f.y&&l.y<f.y+f.height?null:Q.createElement($0,{key:n,viewportBounds:h,viewportInfo:e,indicatorViewportBounds:l,selectionBoundsScaledWidth:function(e,t){let n=Math.max(e.x,t.x);return Math.max(Math.min(e.x+e.width,t.x+t.width)-n,10)}(l,h),selectionBoundsScaledHeight:function(e,t){let n=Math.max(e.y,t.y);return Math.max(Math.min(e.y+e.height,t.y+t.height)-n,10)}(l,h),selectionRegionType:t.regionType})})))))}function $0({viewportBounds:e,viewportInfo:t,indicatorViewportBounds:n,selectionBoundsScaledWidth:a,selectionBoundsScaledHeight:r,selectionRegionType:l}){let i=function(e,t){let n=0-t.x,a=0+e.width-t.x,r=0-t.y,l=0+e.height-t.y,i=Math.abs(n)<a?n:a,o=Math.abs(r)<l?r:l,s=n<0!=a<0,c=r<0!=l<0;return s&&c?Math.abs(i)<Math.abs(o)?{x:t.x+i,y:t.y}:{x:t.x,y:t.y+o}:!s&&c?{x:t.x+i,y:t.y}:s&&!c?{x:t.x,y:t.y+o}:{x:t.x+i,y:t.y+o}}(t,{x:n.x+n.width/2,y:n.y+n.height/2});i.x-=a/2,i.y-=r/2;let o=(0,$.d4)(e=>{var t;return null==(t=e.mirror)?void 0:t.appModel.showUi}),s=(0,eG.J2)((0,eH.UK)().renderRulers)&&o?$J:0,c=(0,aD.GS)(),d=c?$q:$Z,u=c?$q:$X,m=(0,eH.dP)()+d,p=(0,eH.qw)()+u,{isLeftPanelCollapsed:_}=(0,ci.Ye)(),f=1+(o&&c&&!_?m+1:0)+s,h=Math.max(f,t.width-1-a-(o&&c?p+1:0)),g=1+s,E=Math.max(g,t.height-1-r-1),v=lB.Mi.bound(i,{min:{x:f,y:g},max:{x:h,y:E}}),y=n.y+n.height<e.y,b=n.y>e.y+e.height,C=n.x+n.width<e.x,w=n.x>e.x+e.width;v.x+=t.x,v.y+=t.y;let T=Math.min(t.width-2-(o&&c?p+m:0),a),x=Math.min(t.height-2,r);return Q.createElement("div",{className:"multi_edit_offscreen_indicators--indicator--taq8e",style:{transform:`translate3D(${v.x}px, ${v.y}px, 0)`}},(y||b)&&Q.createElement("div",{style:{position:"absolute",height:1.5,width:T,marginTop:b?x-1.5:0},className:ea()({[$j]:l===Vy.fV.MIXED_OR_NO_SYMBOLS,[$Y]:l===Vy.fV.SYMBOLS_ONLY})}),(C||w)&&Q.createElement("div",{style:{position:"absolute",left:0,height:x,width:1.5,marginLeft:w?T-1.5:0},className:ea()({[$j]:l===Vy.fV.MIXED_OR_NO_SYMBOLS,[$Y]:l===Vy.fV.SYMBOLS_ONLY})}))}function $1(){let e=(0,e_.Xr)(H0.mH),t=(0,H1.XC)((0,ef.md)(H0.a8));return(0,eo.kc)().cursor_bot&&t?Q.createElement("div",{className:Gt.CR,"data-testid":"cursor-bot-fullscreen-event-blocker",onClick:()=>{e(!0)}}):null}var $2=n(43422);function $5(e){let t;let n=(0,iG.lz)(),a=(0,eH.qw)(),r=(0,mD.E3)(),{isPropertiesPanelCollapsed:l}=(0,yI.i)(),i=(0,ef.md)(yA.D),o=(0,eG.J2)((0,eH.UK)().renderRulers);return(0,aD.GS)()&&(t={right:`calc(${"dev_handoff"===r?n:a}px + ${(0,rT.jz)(uT.M$q)}px)`,top:`${(0,rT.jz)(uT.M$q)}px`},l&&(t={...t,right:`calc(${i}px + ${(0,rT.jz)(uT.M$q)}px)`}),o&&(t={...t,top:`calc(${(0,rT.jz)(uT.M$q)}px + ${(0,rT.jz)(uT.jHA)}px)`})),Q.createElement("div",{style:t,className:ea()("nav_container--flexContainer--3Us-2 nav_container--baseContainer--QideS overflow--overflowYAuto--nfK38 overflow--momentumScroll--qtsu7",eK.Dm,e.className)},e.children)}function $4(e,t,n,a){let r;let{padding:l,margin:i,...o}=(0,$.d4)(e=>e.mirror.appModel.onCanvasNameEditorInfo),s=(0,ez._X)({subscribeToUpdates_expensive:!0}),c=(null==s?void 0:s.zoomScale)||1,[d,u]=Q.useState(e),[m,p]=Q.useState(!0),_=Q.useRef(null),f=Q.useRef(null),[h,g]=Q.useState(0),[E,v]=Q.useState(!1),y=Q.useCallback(e=>{switch(o.mode){case eU.nzw.FRAME_NAME:g(Math.min(e,a*c)+7);break;case eU.nzw.SECTION_NAME:let t=a*c;e<t?g(e):g(t-2*i.x);break;case eU.nzw.FLOW_STARTING_POINT_NAME:g(Math.min(e,a)+4)}},[o.mode,a,c,i.x]);Q.useLayoutEffect(()=>{f.current&&y(f.current.scrollWidth)},[d,y]),Q.useEffect(()=>{e&&(p(!0),u(e))},[e]),Q.useEffect(()=>{let e=e=>{let t=!(_.current&&_.current.contains(e.target)),n=document.querySelector('[data-resource-id="rename-selection"]'),a=e.target&&n&&n.contains(e.target);t&&!a&&eU.glU.hideOnCanvasNameEditor()};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[]);let b=nh.AF("onCanvasRename","change",e=>{u(e.target.value)}),C=nh.v_("onCanvasRename","keydown",e=>{if(!E)switch(e.key){case"Escape":case"Enter":case"Tab":e.preventDefault(),p(!1),n(t,d),lT.Y5.commit(),eU.glU.hideOnCanvasNameEditor();break;case"=":case"-":(0,es.Fo)(e)&&(0,pf.f7)(e,!0)}});if(!t||!s)return null;let w={},T=(0,ez.Z0)(s,{x:o.x,y:o.y},!1),x={x:T.x+s.x,y:T.y+s.y};switch(o.mode===eU.nzw.FLOW_STARTING_POINT_NAME&&(x.x-=32+h,x.y=Math.round(x.y)),w.transform=`translate(${x.x}px, ${x.y}px) rotate(${o.angle}deg)`,o.mode){case eU.nzw.FRAME_NAME:r="on_canvas_name_editor--frameNameInput--VpLPf sf_pro--uiFontWithSFProFallback--m-p9V";break;case eU.nzw.FLOW_STARTING_POINT_NAME:r="on_canvas_name_editor--flowStartingPointNameInput--lLEZF"}return{containerRef:_,measurerRef:f,containerStyle:w,inputClassname:r,editingName:d,onFocus:e=>{e.target.select(),f.current&&y(f.current.scrollWidth)},onChange:b,onKeyDown:C,onBlur:e=>{m&&(n(t,e.target.value),lT.Y5.commit(),e.relatedTarget&&"focus-target"===e.relatedTarget.className&&eU.glU.hideOnCanvasNameEditor())},width:h,setIsComposing:v}}function $3(e){let t=(0,lm.uQ)(),n=$4(e.name,t,e.setName,e.maxWidth);if(!n)return null;let{containerRef:a,measurerRef:r,containerStyle:l,editingName:i,onFocus:o,onChange:s,onKeyDown:c,onBlur:d,width:u,setIsComposing:m,inputClassname:p}=n;return Q.createElement("div",{ref:a,className:ea()(e.containerClassname,eK.Dm,"on_canvas_name_editor--containerOnLight--6zUKs"),style:l},Q.createElement("span",{ref:r,className:"on_canvas_name_editor--measurer--KTnSp"},i),Q.createElement("input",{autoFocus:!0,dir:"auto",className:p,style:{width:`${u}px`},value:i,onFocus:o,onChange:s,onKeyDown:c,onBlur:d,autoComplete:"off",autoCorrect:"off",autoCapitalize:"off",spellCheck:!1,onCompositionEnd:()=>m(!1),onCompositionStart:()=>m(!0)}))}function $6(){let e=(0,$.d4)(e=>e.mirror.selectionProperties.name),t=(0,$.d4)(e=>e.mirror.selectionProperties.width);return e&&t?Q.createElement($3,{name:e,setName:(t,n)=>{e&&(cR.wt.reportEditActionIf(e!==n,"rename-frame"),cU.l7.user("rename-frame",()=>eV.i(t,n)))},maxWidth:t}):null}function $7(){var e;let[t,n]=(0,lg.lJ)("prototypeStartingPoint"),a=(null==(e=(0,lh.E7)(t))?void 0:e.name)||"";return a?Q.createElement($3,{name:a,setName:(e,a)=>{var r,l;a&&n({name:a,description:(null==(r=(0,lh.E7)(t))?void 0:r.description)||"",position:(null==(l=(0,lh.E7)(t))?void 0:l.position)||""})},maxWidth:93,containerClassname:"on_canvas_name_editor--flowStartingPointNameContainer--JdVwd"}):null}function $8(){let e=(0,$.d4)(e=>e.mirror.selectionProperties.name),t=(0,$.d4)(e=>e.mirror.selectionProperties.width);return null!=e&&t?Q.createElement($9,{name:e,setName:(t,n)=>{cR.wt.reportEditActionIf(e!==n,"rename-section"),cU.l7.user("rename-section",()=>eV.i(t,n?n.trim():""))},maxWidth:t}):null}function $9(e){let{name:t,setName:n,maxWidth:a}=e,r=(0,lm.uQ)(),l=$4(t,r,n,a),i=(0,$.d4)(e=>e.mirror.appModel.activeCanvasEditModeType===eU.m1T.DESIGN_LAYOUT),{fontSize:o,top:s,left:c,height:d,horizontalPadding:u,verticalPadding:m,borderRadius:p}=function(e,t,n){let{fontSize:a,padding:r,margin:l,cornerRadius:i}=(0,$.d4)(e=>e.mirror.appModel.onCanvasNameEditorInfo),o=eU.qmM.editorTypeConfig().showBigSectionNamePills(),s=r.x,c=r.y,d=o?24:2*r.y+a,u=0,m=-l.y-d,p=eU.qmM.editorTypeConfig().sectionNestedZoomLevel();return(!e||t<=p)&&(u=l.x,m=l.y),{fontSize:a,height:d,top:m,left:u,horizontalPadding:s,verticalPadding:c,borderRadius:i}}((0,$.d4)(e=>{if(null===r)return!1;let t=e.mirror.sceneGraph.get(r),n=e.mirror.appModel.currentPage,a=!!(null==t?void 0:t.isResponsiveSet);return t&&("SECTION"===t.type||a)&&t.parentGuid===n}),Math.round(100*(0,ez._X)({subscribeToUpdates_expensive:!0}).zoomScale),0);if(!l)return null;let{containerRef:_,measurerRef:f,containerStyle:h,editingName:g,onFocus:E,onChange:v,onKeyDown:y,onBlur:b,width:C,setIsComposing:w}=l,T=i?"normal":500;return Q.createElement("div",{ref:_,className:`on_canvas_name_editor--sectionNameContainer--D8aez ${eK.Dm}`,style:h},Q.createElement("span",{ref:f,className:"on_canvas_name_editor--sectionMeasurer--kfBij",style:{fontSize:o,fontWeight:T,paddingLeft:u,paddingRight:u,paddingTop:m,paddingBottom:m}},g),Q.createElement("input",{autoFocus:!0,dir:"auto",className:"on_canvas_name_editor--sectionNameInput--MgIUi",style:{width:`${C}px`,fontSize:o,fontWeight:T,left:c,top:s,height:d,borderRadius:p,paddingLeft:u,paddingRight:u,paddingTop:m,paddingBottom:m},value:g,onFocus:E,onChange:v,onKeyDown:y,onBlur:b,autoComplete:"off",autoCorrect:"off",autoCapitalize:"off",spellCheck:!1,onCompositionEnd:()=>w(!1),onCompositionStart:()=>w(!0)}))}function eee(){var e;let t=null==(e=function(){let e=(0,$.d4)(e=>e.mirror.appModel.onCanvasPillInfo);return(0,c6.Fk)((e,t)=>t&&0!==t.length?t.map(t=>{let n=e.get(t.guid);if(!n||"-1:-1"===n.guid)return null;let a={guid:n.guid,name:n.name,type:n.type,boundingBox:n.absoluteBoundingBox,isFigmaPurple:t.isFigmaPurple,hasEnabledStaticImagePaint:n.hasEnabledStaticImagePaint,isState:n.isState,isStateGroup:n.isStateGroup,stackCounterAlignItems:n.stackCounterAlignItems,stackMode:n.stackMode,isGroup:n.isGroup,objectsPanelThumbnailId:n.objectsPanelThumbnailId};if(a.isState&&t.symbolId){let n=e.get(t.symbolId);a.symbolName=null==n?void 0:n.name}return a}):null,e)}())?void 0:e[0];return t?Q.createElement(e5,{node:t,offset:-3},Q.createElement("div",{className:"on_canvas_pill--row--I6QoB"},Q.createElement(e4,{node:t}),Q.createElement("span",{className:"on_canvas_pill--pillText--ts0Xi ellipsis--ellipsis--Tjyfa"},t.symbolName?t.symbolName:t.name))):null}var eet=n(774392);function een({background:e,showSpinner:t}){let n=Q.useContext(US.kw),a={background:e};return n&&(a={...a,width:`${n.getViewportInfo().width}px`,height:`${n.getViewportInfo().height}px`,top:`${n.getViewportInfo().y}px`,left:`${n.getViewportInfo().x}px`}),Q.createElement("div",{className:"loading_overlay--pageSyncing--9AqbU"},Q.createElement("div",{className:ea()("loading_overlay--blurredOverlay--79bya",eK.Dm),style:a}),t&&Q.createElement(t2.dW,{className:"loading_overlay--pageSyncingSpinner--rjAvP"}))}function eea(){var e;let t=(0,t5.U)(),n=(0,$.d4)(e=>e.selectedView),a=null==(e=(0,$.d4)(e=>e.versionHistory))?void 0:e.isLoadingPage,r=(0,tx.DP)(),{isLoading:l}=(0,cG.v9)({selectedView:n,isLoadingVersionHistory:a,theme:r}),i=(0,$.d4)(e=>e.mirror.appModel.multiplayerSessionState),o=(0,f9.yZ)(),s=(0,$.wA)(),[c,d]=Q.useState(null),u=(0,ue.Z)(l);return Q.useEffect(()=>{if((0,eo.kc)().long_page_change_notif){if(eU.h3O.isIncrementalSession()&&l)l!==u&&o&&i!==eU.kul.JOINED&&(d(Date.now()),s(eL.F.enqueue({message:"Page change may take longer during staging deploy",error:!1,delay:3e3,type:"long-page-change",timeoutOverride:1/0})));else{let e=c?Date.now()-c:0;e<3e3||e>9e3?(s(eL.F.dequeue({matchType:"long-page-change"})),d(null)):setTimeout(()=>{s(eL.F.dequeue({matchType:"long-page-change"})),d(null)},Math.max(0,9e3-e))}}},[l,i,o,s,c,u]),Q.createElement(eer,{onPageLoadingFinish:e=>{t("page_loading_overlay",{timeElapsedMs:e})},selectedView:n,isLoadingVersionHistory:a,theme:r})}function eer({onPageLoadingFinish:e,selectedView:t,isLoadingVersionHistory:n,theme:a}){let{isLoading:r,isLoadingMissingFonts:l,background:i}=(0,cG.v9)({selectedView:t,isLoadingVersionHistory:n,theme:a});return((0,Q.useEffect)(()=>{if(!r){let t=tW.sn.tryStop("page_loading_overlay");t&&e&&e(t)}},[r,e]),r)?(tW.sn.get("page_loading_overlay")||tW.sn.start("page_loading_overlay"),Q.createElement(een,{background:i,showSpinner:!l})):null}var eel=n(815932),eei=n(824972),eeo=n(333202),ees=n(919214),eec=n(922677),eed=n(527380),eeu=n(121655),eem=n(241723);function eep(){let[e,t]=Q.useState(""),n=function(){let e=(0,c6.Fk)(e=>e),t=(0,$.d4)(e=>e.mirror.appModel.currentPage),{selectedInteractions:n}=(0,eed.Ay)(eei.J.NORMAL),a=(0,ia.Rb)(),r=Q.useCallback(e=>{let t=function(e,t){var n;let a=function e(t){var n,a;switch(t.type){case"Navigate to":return n=t.target,{connectionType:"INTERNAL_NODE",navigationType:"NAVIGATE",transitionNodeID:ad.sH(n)};case"Back":return{connectionType:"BACK"};case"Open Overlay":return a=t.target,{connectionType:"INTERNAL_NODE",navigationType:"OVERLAY",transitionNodeID:ad.sH(a)};case"Close Overlay":return{connectionType:"CLOSE"};case"Set Variable":let r=t.expression.join(" ");return function(e,t){let n;try{n=(0,ees.q)(t,new eec.o)}catch(e){return console.error("Failed to parse expression string in set variable action: ",t),null}return{connectionType:"SET_VARIABLE",targetVariable:{id:e},targetVariableData:n}}(t.target,r);case"Conditional":return function({guardExpression:t,thenAction:n,elseAction:a}){let r=t.join(" ");if(a)try{return{connectionType:"CONDITIONAL",conditionalActions:[{condition:(0,ees.q)(r,new eec.o),actions:[e(n)]},{actions:[e(a)]}]}}catch(e){return console.error("Failed to parse guard expression string in conditional action: ",r),null}try{return{connectionType:"CONDITIONAL",conditionalActions:[{condition:(0,ees.q)(r,new eec.o),actions:[e(n)]}]}}catch(e){return console.error("Failed to parse guard expression string in conditional action: ",r),null}}(t)}}(e);if(!a)return t;for(let e of t)e.actions=e.actions||[],(null==(n=e.actions)?void 0:n.length)===1&&"NONE"===e.actions[0].connectionType?e.actions=[a]:e.actions.push(a);return t}(e,n);lT.Y5.updateSelectionProperties({prototypeInteractions:t})},[n]);return Q.useCallback(async n=>{try{if(!(0,eo.kc)().prototype_ai_auto_adv_proto)return{generatedActions:[],errorMessage:"Feature flag not enabled"};let l=(0,eF.Zl)(e,t);if(!l||!l.childrenGuids)return{generatedActions:[],errorMessage:"No page node found"};let{filteredNodes:i}=(0,eeu.dT)(l.childrenGuids,e),o=(0,eeo.EN)(i).join(", "),s=new Map(a.map(e=>[e.node_id,{name:e.name,description:e.description,resolvedType:e.resolvedType}])),c=(0,eem.E)(e,s),d=(0,eeu.h6)({userDescription:n,variablesUsed:c,canvasDescriptions:o},r);if(await d)return d;return{generatedActions:[],errorMessage:"No magic link output"}}catch(e){return console.error(e),{generatedActions:[],errorMessage:e.toString()}}},[e,t,r,a])}();return Q.createElement(nM.ks,{placeholder:"Describe a new action",value:e,onChange:e=>t(e.currentTarget.value),onKeyDown:t=>{t.stopPropagation(),"Enter"===t.key&&n(e)}})}var ee_=n(112255),eef=n(920092),eeh=n(353090),eeg=n(731630),eeE=n(993249),eev=n(279918),eey=n(335343);let eeb=new a5.js,eeC=new a5.Z6;class eew extends aT.c${}class eeT extends aT.l6{}function eex({action:e}){return Q.createElement("div",{className:"prototype_action_dropdown--prototypeActionIcon--qChhY"},Q.createElement(nd.U,{svg:(0,eev.Yb)(e)},(0,eev.av)(e)))}function eeN(e){let t=`prototype-action-select-${e.recordingKey}`,n=e.dropdownShown&&e.dropdownShown.type===t,a=(0,lh.E7)(e.action),r=(0,eev.Yb)(a),l=(0,eev.av)(a),i=!(0,$.d4)(e=>e.mirror.selectionProperties.isValidPrototypingSourceSelected??!0),{hasValidVariableSets:o}=(0,eey.b)(),s=Q.useCallback(e=>e-24,[]),c=Q.useCallback(e=>e+24,[]);return Q.createElement(eeT,{disabled:i,id:t,dataTestId:"action-select",className:e.className+" prototype_action_dropdown--select--b3Ssx",chevronClassName:"prototype_action_dropdown--prototypeActionChevron--ZL1Q4",inputClassName:"prototype_action_dropdown--prototypeActionInputWithSvg--Atfua",property:e.action,formatter:n?eeb:eeC,onChange:e.onChange,dispatch:e.dispatch,dropdownShown:e.dropdownShown,svg:r,svgClassName:"prototype_action_dropdown--selectActionSvg--XfhUx",ui3Icon:l,recordingKey:nh.Pt(e,"select"),hideDropdownWhenContainerMoves:!(0,pF.nl)(),dropdownAlignment:s,dropdownWidth:c},Q.createElement(eew,{key:"NONE",value:"NONE",icon:Q.createElement(eex,{action:"NONE"}),recordingKey:nh.Pt(e,"clear-option"),disabled:!1}),Q.createElement(aT.sK,null),Q.createElement(eew,{key:"NAVIGATE_TO",value:"NAVIGATE_TO",icon:Q.createElement(eex,{action:"NAVIGATE_TO"}),recordingKey:nh.Pt(e,"navigate-to-option"),disabled:!1}),Q.createElement(eew,{key:"SWAP_STATE_TO",value:"SWAP_STATE_TO",icon:Q.createElement(eex,{action:"SWAP_STATE_TO"}),recordingKey:nh.Pt(e,"swap-state-to-option"),disabled:!eU.glU.isSelectionContainedInStateOrStateInstance()}),Q.createElement(eew,{key:"GO_BACK",value:"GO_BACK",icon:Q.createElement(eex,{action:"GO_BACK"}),recordingKey:nh.Pt(e,"back-option"),disabled:!1}),Q.createElement(aT.sK,null),Q.createElement(eew,{key:"SET_VARIABLE",value:"SET_VARIABLE",icon:Q.createElement(eex,{action:"SET_VARIABLE"}),recordingKey:nh.Pt(e,"set-variable"),disabled:!1}),o&&(0,eo.kc)().prototype_set_mode_action&&Q.createElement(eew,{key:"SET_VARIABLE_MODE",value:"SET_VARIABLE_MODE",icon:Q.createElement(eex,{action:"SET_VARIABLE_MODE"}),recordingKey:nh.Pt(e,"set-variable-mode"),disabled:!1}),!e.isNestedInConditional&&Q.createElement(eew,{key:"CONDITIONAL",value:"CONDITIONAL",icon:Q.createElement(eex,{action:"CONDITIONAL"}),recordingKey:nh.Pt(e,"conditional"),disabled:!1}),Q.createElement(eew,{key:"SCROLL_TO",value:"SCROLL_TO",icon:Q.createElement(eex,{action:"SCROLL_TO"}),recordingKey:nh.Pt(e,"scroll-to-option"),disabled:!1}),Q.createElement(eew,{key:"OPEN_URL",value:"OPEN_URL",icon:Q.createElement(eex,{action:"OPEN_URL"}),recordingKey:nh.Pt(e,"url-option"),disabled:!1}),Q.createElement(aT.sK,null),Q.createElement(eew,{key:"OPEN_OVERLAY",value:"OPEN_OVERLAY",icon:Q.createElement(eex,{action:"OPEN_OVERLAY"}),recordingKey:nh.Pt(e,"open-overlay-option"),disabled:!1}),Q.createElement(eew,{key:"SWAP_WITH",value:"SWAP_WITH",icon:Q.createElement(eex,{action:"SWAP_WITH"}),recordingKey:nh.Pt(e,"swap-with-option"),disabled:!1}),Q.createElement(eew,{key:"CLOSE_OVERLAY",value:"CLOSE_OVERLAY",icon:Q.createElement(eex,{action:"CLOSE_OVERLAY"}),recordingKey:nh.Pt(e,"close-option"),disabled:!1}),e.showVideoActions&&Q.createElement(aT.sK,null),e.showVideoActions&&Q.createElement(eew,{key:"UPDATE_MEDIA_PLAY_PAUSE_OPTIONS",value:"UPDATE_MEDIA_PLAY_PAUSE_OPTIONS",icon:Q.createElement(eex,{action:"UPDATE_MEDIA_PLAY_PAUSE_OPTIONS"}),recordingKey:nh.Pt(e,"update-media-play-pause-options"),disabled:!1}),e.showVideoActions&&Q.createElement(eew,{key:"UPDATE_MEDIA_MUTE_UNMUTE_OPTIONS",value:"UPDATE_MEDIA_MUTE_UNMUTE_OPTIONS",icon:Q.createElement(eex,{action:"UPDATE_MEDIA_MUTE_UNMUTE_OPTIONS"}),recordingKey:nh.Pt(e,"update-media-mute-unmute-options"),disabled:!1}),e.showVideoActions&&Q.createElement(eew,{key:"UPDATE_MEDIA_SKIP_TO",value:"UPDATE_MEDIA_SKIP_TO",icon:Q.createElement(eex,{action:"UPDATE_MEDIA_SKIP_TO"}),recordingKey:nh.Pt(e,"update-media-skip_to"),disabled:!1}),e.showVideoActions&&Q.createElement(eew,{key:"UPDATE_MEDIA_SKIP_BY_OPTIONS",value:"UPDATE_MEDIA_SKIP_BY_OPTIONS",icon:Q.createElement(eex,{action:"UPDATE_MEDIA_SKIP_BY_OPTIONS"}),recordingKey:nh.Pt(e,"update-media-skip-by-options"),disabled:!1}))}var eek=n(983405),eeS=n(533173),eeI=n(661913);let eeA="prototype_interaction_panel--inactiveLabel--6uytx transform_panel--inactiveLabel--fPCxr raw_components--iconInsideBorderFocusWithin--2g7fO",eeP="prototype_interaction_panel--input--73Bse raw_components--flushLeft--YH-5P",eeO="prototype_interaction_panel--scrollOptionsInput--NNU-R",eeL="prototype_interaction_panel--titleAndIconRow--FG93L",eeM="prototype_interaction_panel--conditionalActionRow--YQRe3",eeD="prototype_action_verbose_title--actionNameInsertion--aF4kI",eeR="prototype_action_verbose_title--actionName--qWJL3",eeF="prototype_action_verbose_title--actionDestination--JZ-gU",eeB=()=>{let e=(0,$.d4)(e=>e.mirror.sceneGraph);return Q.useMemo(()=>new a5.cP(e),[e])};function eeU({action:e,isNestedInConditional:t,isNarrowPanel:n}){var a;let r=(0,eeh.YT)(),l=(0,eeh.Y0)(),i=r&&!l,o=t||n,s=(0,ia.u)((0,lh.hS)(e.targetVariable)&&e.targetVariable&&"id"in e.targetVariable?null==(a=e.targetVariable)?void 0:a.id:void 0),c=(0,lh.hS)(e.targetVariable)&&e.targetVariable&&"nodeFieldAlias"in e.targetVariable?(0,eeI.aA)(e.targetVariable.nodeFieldAlias.stablePathToNode,e.targetVariable.nodeFieldAlias.indexOrKey):void 0,d=(null==s?void 0:s.name)??(null==c?void 0:c.name),u=eeB(),m=new a5.Z6,p=(0,a5._X)(e),_=(0,lh.E7)(p),f=Q.createElement(nd.U,{svg:(0,eev.Yb)(_)},(0,eev.av)(_)),h=e=>{if(!e.connectionType||(0,lh.gl)(e.connectionType))return null;switch(e.connectionType){case"NONE":case"SET_VARIABLE_MODE":return null;case"INTERNAL_NODE":case"BACK":case"CLOSE":case"UPDATE_MEDIA_RUNTIME":{let t=e.transitionNodeID;if((0,lh.gl)(t))return Q.createElement("div",{className:eeR},(0,eO.t)("proto.variant_actions.mixed"));if(void 0===t)return null;let n=ad.dI(t),a=u.format(n);return Q.createElement("div",{className:eeF},a)}case"URL":{let t=e.connectionURL;if(!t)return null;if((0,lh.gl)(t))return Q.createElement("div",{className:eeR},(0,eO.t)("proto.variant_actions.mixed"));return Q.createElement("div",{className:eeF},t)}case"SET_VARIABLE":if(!e.targetVariableData||(0,lh.gl)(e.targetVariableData))return null;return Q.createElement("div",{className:"prototype_action_verbose_title--setVariablePreviewContainer--6omxy"},Q.createElement(ee_.y3,{targetVariableData:e.targetVariableData,onClick:ey.lQ,showVariableThumbnails:!1,isNarrowPanel:o,isInConditional:!0}));case"CONDITIONAL":{if((0,lh.gl)(e)||(0,lh.gl)(e.conditionalActions)||!e.conditionalActions)return null;let t=e.conditionalActions.length>0?e.conditionalActions[0].condition:void 0;return Q.createElement(ee_.y3,{targetVariableData:t,onClick:ey.lQ,isInConditional:!0,showVariableThumbnails:!1})}default:(0,re.xb)(e.connectionType)}};return Q.createElement("div",{className:o?"prototype_interaction_panel--actionVerboseTitleNarrow--KFbW0 prototype_interaction_panel--actionVerboseTitle--HKv2H":"prototype_interaction_panel--actionVerboseTitle--HKv2H"},Q.createElement(eek.Y1,{horizontalAlignItems:"space-between",width:"fill-parent"},Q.createElement("div",{className:"prototype_action_verbose_title--iconContainer--jqarD"},f),(e=>{let t=_?m.format(_):"Undefined";if((0,lh.gl)(e.connectionType)&&(t=(0,eO.t)("fullscreen.mixed")),!e.connectionType||(0,lh.gl)(e.connectionType)||"NONE"===e.connectionType||"BACK"===e.connectionType||"CLOSE"===e.connectionType)return Q.createElement(Q.Fragment,null,Q.createElement("div",{className:eeR},t));var n=h(e);switch(e.connectionType){case"INTERNAL_NODE":if("SWAP_STATE"===e.navigationType&&(n=null),n){if("OVERLAY"===e.navigationType)return Q.createElement(Q.Fragment,null,Q.createElement("div",{className:eeD},Q.createElement(eO.Tx,{id:"proto.action_overlay_title",overlayFrameName:Q.createElement("span",null,n)})));if("SWAP"===e.navigationType)return Q.createElement(Q.Fragment,null,Q.createElement("div",{className:eeR},(0,eO.t)("proto.action_swap_overlay_title")),n)}return Q.createElement(Q.Fragment,null,Q.createElement("div",{className:eeR},t),n);case"UPDATE_MEDIA_RUNTIME":return Q.createElement(Q.Fragment,null,Q.createElement("div",{className:eeR},t),n);case"URL":return Q.createElement(Q.Fragment,null,Q.createElement("div",{className:eeR},n?(0,eO.t)("proto.action_url_title"):(0,eO.t)("proto.action_open_link")),n);case"SET_VARIABLE":{let a=e.targetVariableData&&(0,lh.hS)(e.targetVariableData)&&e.targetVariableData.resolvedType===eU.rXF.COLOR;if(d&&n)return Q.createElement(Q.Fragment,null,Q.createElement("div",{className:a?"prototype_action_verbose_title--actionNameInsertionColor--isir- prototype_action_verbose_title--actionNameInsertion--aF4kI":eeD},Q.createElement(eO.Tx,{id:"proto.action_set_variable_title",variableName:Q.createElement("span",{className:"prototype_action_verbose_title--variableNameContainer--XeJX2"},Q.createElement(ax.w,{text:d,isDeleted:!!s&&(0,eeS.eF)(s)})),variableValue:Q.createElement("span",{className:"prototype_action_verbose_title--variableDestinationContainer--RXbKo prototype_action_verbose_title--variableNameContainer--XeJX2"},n)})));return Q.createElement(Q.Fragment,null,Q.createElement("div",{className:eeR},t))}case"SET_VARIABLE_MODE":return Q.createElement(Q.Fragment,null,Q.createElement("div",{className:eeR},(0,eO.t)("proto.action_set_variable_mode")));case"CONDITIONAL":{let e=Q.createElement(Q.Fragment,null,Q.createElement("div",{className:eeR},(0,eO.t)("proto.action_conditional_title")),n),t=Q.createElement("div",{className:eeR},(0,eO.t)("proto.action_conditional"));return i?t:e}default:(0,re.xb)(e.connectionType)}})(e)))}var eeH=n(57567),eeV=n(266304),eeG=n(718314),eeK=n(851469),eeW=n(473823),eez=n(505838),eej=n(910392),eeY=n(909666),eeZ=n(442458);let eeX=eeV.TI;function eeq({children:e}){return(0,aD.GS)()?Q.createElement(eeE.TN,null,e):Q.createElement(nM.fI,{className:"overlay_panel--fplCheckboxRow--EYTAZ checkbox--_checkboxRow--oEhow"},e)}function eeJ({interactionType:e,recordingKey:t,actionIndexPath:n,nodeId:a}){let[r,l]=Q.useState(!1),[i,o]=Q.useState(new lB.Mi),s=(0,$.wA)(),c=(0,aD.GS)(),d=(0,eeh.YT)(),u="{ "+n.join(", ")+" }",{destinationOverlayBackgroundColor:m,destinationOverlayBackgroundType:p,destinationOverlayPositionType:_,destinationOverlayBackgroundInteraction:f}=(0,ep.R)(e=>{var t,n,a,r,l,i,o,s;return{destinationOverlayBackgroundColor:null==(n=null==(t=e.mirror.selectionProperties.actionIndexPathToOverlaySettings)?void 0:t[u])?void 0:n.destinationOverlayBackgroundColor,destinationOverlayBackgroundType:null==(r=null==(a=e.mirror.selectionProperties.actionIndexPathToOverlaySettings)?void 0:a[u])?void 0:r.destinationOverlayBackgroundType,destinationOverlayPositionType:null==(i=null==(l=e.mirror.selectionProperties.actionIndexPathToOverlaySettings)?void 0:l[u])?void 0:i.destinationOverlayPositionType,destinationOverlayBackgroundInteraction:null==(s=null==(o=e.mirror.selectionProperties.actionIndexPathToOverlaySettings)?void 0:o[u])?void 0:s.destinationOverlayBackgroundInteraction}}),h=Q.useRef(),g=Q.useRef(),E=Q.useCallback(()=>{l(!1)},[l]),v=Q.useCallback(()=>{if(r)E();else{l(!0);let e=c?aP.findDOMNode(g.current):aP.findDOMNode(h.current);o((0,eeG.cn)(e))}},[r,E,c]),y=Q.useCallback(e=>{let t=e?"SOLID_COLOR":"NONE";cU.l7.user("overlay-background-type-edit-scope",()=>{eU.X3B.setOverlayBackgroundType(ad.dI(a),t)}),s((0,TT._P)({name:"Overlay background visible changed",params:{backgroundType:t}}))},[s,a]),b=Q.useCallback(e=>{let t=e?"CLOSE_ON_CLICK_OUTSIDE":"NONE";cU.l7.user("overlay-background-interaction-edit-scope",()=>{eU.X3B.setOverlayBackgroundInteraction(ad.dI(a),t)}),s((0,TT._P)({name:"Overlay background interaction changed",params:{backgroundInteraction:t}}))},[s,a]),C=Q.useCallback(()=>(0,lh._W)(m,{r:0,g:0,b:0,a:.25}),[m]),w=Q.useCallback((e,t)=>{t!==Vy.zk.NO&&cU.l7.user("overlay-background-color-edit-scope",()=>{eU.X3B.setOverlayBackgroundColor(ad.dI(a),e)})},[a]),T=Q.useCallback((e,t)=>{w(e,Vy.zk.YES)},[w]),x=Q.useCallback((e,t)=>{let n=C();w({r:n.r,g:n.g,b:n.b,a:e},t)},[C,w]),N=Q.useCallback(e=>{cU.l7.user("overlay-position-type-edit-scope",()=>{eU.X3B.setOverlayPositionType(ad.dI(a),e)}),s((0,TT._P)({name:"Overlay position changed",params:{position:e}}))},[s,a]),k=C(),S=C().a,I=(0,lh.E7)(_),A="CLOSE_ON_CLICK_OUTSIDE"===(0,lh.E7)(f),P="SOLID_COLOR"===(0,lh.E7)(p),O=Q.createElement("div",{className:"overlay_panel--colorValueContainer--gJtb9 paint_panels--colorValueContainer--DGeSP raw_components--borderFocusWithin--BaipZ paint_panels--_baseColorValueContainer--t-UIV raw_components--base--T7G0z raw_components--singleRowHeight--dKM4t"},Q.createElement(sQ.J,{onClick:P?v:()=>{},color:k,opacity:S,recordingKey:nh.Pt(t,"chit"),className:"overlay_panel--chit--Zn66r paint_panels--chit--twQEy"}),Q.createElement(EX.AN,{className:d?"overlay_panel--colorInputUI3--ozOrK paint_panels--colorInput--nSz13":"overlay_panel--colorInput--6yyym paint_panels--colorInput--nSz13",noLeftBorder:!0,formatter:eeX,property:k,disabled:!P,onChange:T,recordingKey:nh.Pt(t,"colorInput"),noBorderOnFocus:!0}),Q.createElement(eeK.Pd,{className:"overlay_panel--opacity--vrrjV paint_panels--opacityInputContainer--oqlsk",value:S,onValueChange:x,dispatch:s,disabled:!P,noBorderOnFocus:!0,recordingKey:nh.Pt(t,"opacity")}));return Q.createElement(nM.Zk,{className:d?"overlay_panel--overlayPanelUI3--GLqgD":"overlay_panel--overlayPanel--l-Hts"},!d&&Q.createElement(nM.fI,null,Q.createElement(nM.xw,{faded:!0,className:"overlay_panel--overlayPanelTitle--e9pjs"},Q.createElement(eO.Tx,{id:"proto.overlay_settings"}))),Q.createElement(ee4,{overlayPositionType:I,onOverlayPositionTypeChange:N,recordingKey:t}),!("ON_HOVER"===e||"ON_PRESS"===e)&&Q.createElement(eeq,null,Q.createElement(Tt.S,{label:Q.createElement(Tn.J,null,Q.createElement(eO.Tx,{id:"proto.close_when_clicking_outside"})),recordingKey:nh.Pt(t,"closeOnClickOutside"),onChange:b,checked:A})),Q.createElement(eeq,null,Q.createElement(Tt.S,{label:Q.createElement(Tn.J,null,Q.createElement(eO.Tx,{id:"proto.add_background"})),recordingKey:nh.Pt(t,"addBackgroundBehindOverlay"),onChange:y,checked:P})),P&&(c?d?Q.createElement(eeE.cS,{ref:g,label:Q.createElement(eO.Tx,{id:"proto.overlay_panel.background"}),input:O}):Q.createElement(eeE.TN,{ref:g},O):Q.createElement(nM.fI,{ref:h}," ",O," ")),r&&Q.createElement(eeW.sk,{disabledVariableIds:new Set,title:(0,eO.t)("proto.background"),initialPosition:i,color:k,boundVariable:null,onChange:w,onClose:E,recordingKey:nh.Pt(t,"colorPicker")}))}class eeQ extends aT.l6{}class ee$ extends aT.c${}class ee0 extends Q.PureComponent{constructor(){super(...arguments),this.titleFormatter=new a5.Cr,this.renderOverlayPositionOption=(e,t)=>Q.createElement(ee$,{key:t,value:e,recordingKey:nh.Pt(this.props,e)})}render(){let e=["CENTER","TOP_LEFT","TOP_CENTER","TOP_RIGHT","BOTTOM_LEFT","BOTTOM_CENTER","BOTTOM_RIGHT"].map(this.renderOverlayPositionOption);return Q.createElement(eeQ,{id:this.props.recordingKey??"overlay-position_select",className:this.props.className,chevronClassName:"overlay_panel--chevron--7RTA-",inputClassName:"overlay_panel--input--tGHHB",dropdownWidth:uT.DxS,property:this.props.property,formatter:this.titleFormatter,onChange:this.props.onChange,dispatch:this.props.dispatch,dropdownShown:this.props.dropdownShown,recordingKey:nh.Pt(this.props,"select")},e,Q.createElement(aT.sK,null),this.renderOverlayPositionOption("MANUAL",10))}}ee0.displayName="OverlayPositionDropdown";class ee1 extends eez.I{}class ee2 extends eez.Y{}class ee5 extends Q.PureComponent{render(){return Q.createElement(ee1,{className:this.props.className,property:this.props.property,onChange:this.props.onChange,recordingKey:this.props.recordingKey},Q.createElement(ee2,{value:"CENTER",tooltip:(0,eO.t)("proto.tooltip_overlay_position_center"),svg:eeY.A,recordingKey:nh.Pt(this.props,"center")}),Q.createElement(ee2,{value:"TOP_LEFT",tooltip:(0,eO.t)("proto.tooltip_overlay_position_top_left"),svg:eeZ.A,recordingKey:nh.Pt(this.props,"top-left")}),Q.createElement(ee2,{value:"BOTTOM_CENTER",tooltip:(0,eO.t)("proto.tooltip_overlay_position_bottom_center"),svg:eej.A,recordingKey:nh.Pt(this.props,"bottom-center")}))}}function ee4({overlayPositionType:e,onOverlayPositionTypeChange:t,recordingKey:n}){let a=(0,aD.GS)(),r=(0,eeh.YT)(),l=(0,$.wA)(),i=(0,aX.U)(),o=Q.createElement(ee0,{className:"overlay_panel--overlayPositionDropdown--ZxxSI",property:e,dispatch:l,dropdownShown:i,onChange:t,recordingKey:nh.Pt(n,"overlayPositionDropdown")}),s=Q.createElement(ee5,{property:e,onChange:t,recordingKey:nh.Pt(n,"overlayPositionControl"),className:"overlay_panel--overlayPositionControl--SWngJ"});return a?r?Q.createElement(eeE.cS,{label:Q.createElement(eO.Tx,{id:"proto.overlay_panel.position"}),input:o}):Q.createElement(eeE.dx,{left:o,right:s}):Q.createElement(nM.fI,null,o,s)}var ee3=n(269751);function ee6(e){let t=`interaction-panel-create-action-${e.recordingKey}`;var{showing:n,toggle:a,hide:r}=(0,aX.B)(t);let l=(0,Q.useRef)(null),i=e.recordingKey,{shouldShowAdvancedPrototypingPaywall:o,showAdvancedPrototypinglMultipleActionsModal:s}=(0,eeh.zt)(),c=(0,Q.useCallback)(()=>{!e.skipPaywall&&o?s():a()},[e.skipPaywall,o,s,a]),d=nh.rf(nh.Pt(i,"createActionDropdown"),"click",c),u=(0,eeh.SJ)(),m=(0,eeh.qv)(u,e.isNestedInConditional);return Q.createElement(Q.Fragment,null,Q.createElement("button",{ref:l,className:e.renderButton?"prototype_interaction_panel--createActionButton--6BFXc raw_components--iconButtonEnabled--WmVk5 raw_components--_iconButton---ybo6":"prototype_interaction_panel--createActionRow--zskZs",onClick:d,"aria-label":(0,eO.t)("proto.prototype_panel.create_action_button"),"data-tooltip-type":nO.Ib.TEXT,"data-tooltip":e.isNestedInConditional?(0,eO.t)("proto.prototype_panel.add_nested_action"):(0,eO.t)("proto.prototype_panel.add")},e.renderButton?Q.createElement(nd.U,{svg:s9.A},Q.createElement(zR.e,null)):Q.createElement(eO.Tx,{id:"fullscreen.properties_panel.click_plus_to_add_new_action"})),n&&l.current&&Q.createElement(ho.Cf,{arrowOffsetFromRectLeft:17,leanPadding:0,minWidth:130,lean:"right",targetRect:l.current.getBoundingClientRect(),hidePointWhenContentOffScreen:!0},m.map((t,n)=>(0,eeh.Oz)(t)?Q.createElement(_O.W.Separator,{key:`type_${n}`}):Q.createElement(ee7,{onClose:r,addButtonPressed:e.addButtonPressed,key:t,recordingKey:i,actionType:t}))))}function ee7({actionType:e,onClose:t,addButtonPressed:n,recordingKey:a}){let r=Q.useCallback(()=>{n((0,eeh.Bs)(e)),t()},[t,e,n]),l=nh.rf(nh.Pt(a,"createActionOption",e),"click",r),i=(0,eev.Yb)(e),o=(0,eev.av)(e),s=new a5.Z6,c=e?s.format(e):"Undefined";return Q.createElement(_O.W.Option,{className:"prototype_interaction_panel--createActionDropdownOption--qX5xI",onClick:l},Q.createElement(nd.U,{className:"prototype_interaction_panel--createActionDropdownOptionIcon--Eivoa",svg:i},o),Q.createElement("div",{"aria-label":c},c))}let ee8="prototype_conditional_controls--conditionalRowUI3--rQlu6",ee9="prototype_conditional_controls--conditionIcon--Npk57";var ete=n(381809),ett=n(527967),etn=n(5068);function eta({onDeleteAction:e,updateMultipleDestinationNodes:t,updateSelectionProperties:n,updateCondition:a,updateActions:r,onAddAction:l,autoOpenVariablePicker:i,...o}){let s=o.conditionalActions,c=(null==s?void 0:s.actions)?null==s?void 0:s.actions:[],d=(null==s?void 0:s.condition)?null==s?void 0:s.condition:void 0,u=(0,eeh.YT)(),m=(0,eeh.Y0)(),p=u&&!m,_=p?ee8:"prototype_conditional_controls--conditionalRow--u0PaS",f=p?ee8:"prototype_conditional_controls--conditionalRowIf--25FqB prototype_conditional_controls--conditionalRow--u0PaS";return Q.createElement(Q.Fragment,null,o.ifStatement&&Q.createElement("div",{className:f},Q.createElement(nk.Y,{direction:"horizontal",spacing:4},Q.createElement("span",{className:p?"prototype_conditional_controls--conditionalRowConditionUI3--M2mOx":"prototype_conditional_controls--conditionalRowCondition--kn-f7"},Q.createElement(nk.Y,{direction:"horizontal",spacing:0},Q.createElement(eM.B,{className:ee9,svg:ett.A}),Q.createElement(nk.Y,{direction:"horizontal",spacing:0},(0,lh.hS)(d)&&Q.createElement(ee_.KN,{resolvedType:eU.rXF.BOOLEAN,targetVariableData:d,updateSelectionProperties:n,recordingKey:o.recordingKey,updateConditionInConditionalAction:a,showVariableThumbnails:!0,isNarrowPanel:!0})),Q.createElement(eM.B,{className:ea()("prototype_conditional_controls--icon--JV1i0"),svg:etn.default}))),c.length>0&&Q.createElement("div",{className:"prototype_conditional_controls--addButton--vlYLn"},Q.createElement(ee6,{addButtonPressed:l,recordingKey:nh.Pt(o.recordingKey,"addActionToIfButton"),renderButton:!0,isNestedInConditional:!0})))),!o.ifStatement&&Q.createElement(nM.fI,{className:_},Q.createElement(eM.B,{className:ee9,svg:ete.A}),c.length>0&&Q.createElement("div",{className:"prototype_conditional_controls--addButtonForElse--ogBWu prototype_conditional_controls--addButton--vlYLn"},Q.createElement(ee6,{addButtonPressed:l,recordingKey:nh.Pt(o.recordingKey,"addActionToElseButton"),renderButton:!0,isNestedInConditional:!0}))),c&&c.map((a,r)=>Q.createElement(etK,{key:r,updateMultipleDestinationNodes:t.appendActionIndex(r),action:a,recordingKey:nh.Pt(o.recordingKey,"conditional-action-row",r),updateSelectionProperties:n.appendActionIndex(r),onDeleteAction:()=>e(r),interactionType:o.interactionType,actionIndexPath:[o.actionIndexPath[0],o.actionIndexPath[1],r],numActions:c.length,isNestedInConditional:!0,stateManagementVersion:o.stateManagementVersion,selectedInteractions:o.selectedInteractions,onDrop:o.onDrop,onSelect:o.onSelect,onExpand:o.onExpand,onAddAction:l,selectedActionIndex:o.selectedActionIndex,expandedRows:o.expandedRows,autoOpenVariablePicker:i})),0===c.length&&Q.createElement(etK,{key:0,updateMultipleDestinationNodes:t.appendActionIndex(0),action:o.emptyAction,recordingKey:nh.Pt(o.recordingKey,"conditional-action-row",0),updateSelectionProperties:n.appendActionIndex(0),onDeleteAction:()=>e(0),interactionType:o.interactionType,actionIndexPath:[o.actionIndexPath[0],o.actionIndexPath[1],0],numActions:c.length,isNestedInConditional:!0,stateManagementVersion:o.stateManagementVersion,selectedInteractions:o.selectedInteractions,onDrop:o.onDrop,onSelect:o.onSelect,onExpand:o.onExpand,onAddAction:l,selectedActionIndex:o.selectedActionIndex,expandedRows:o.expandedRows,autoOpenVariablePicker:i}))}function etr({onDrop:e,onSelect:t,onExpand:n,action:a,updateMultipleDestinationNodes:r,updateSelectionProperties:l,interactionType:i,recordingKey:o,stateManagementVersion:s,selectedInteractions:c,actionIndexPath:d,selectedActionIndex:u,expandedRows:m,onNewActionAdded:p}){let _=(0,$.wA)(),f=(0,ae.p8)("currentPage"),{shouldShowAdvancedPrototypingPaywall:h,showAdvancedPrototypingConditionalActionsModal:g}=(0,eeh.zt)(),E=(0,lh.hS)(a.conditionalActions)&&a.conditionalActions?a.conditionalActions:[],v=e=>function(t){var n=[...E];n.length>e?n[e].condition=t:n.push({condition:0===e?t:void 0,actions:[]},{condition:1===e?t:void 0,actions:[]}),l({conditionalActions:n})},y=e=>function(t){var n=[...E];n.length>e?n[e].actions=[...t]:n.push({actions:t}),l({conditionalActions:n})},b=Q.useRef(!1),C=e=>function(t){var n=[...E],a=0;if(n.length>e){var r=n[e].actions;r?r.push(t):r=[t],a=r.length}else n.push({actions:0===e?[t]:[]},{actions:1===e?[t]:[]}),a=1;"SET_VARIABLE"===t.connectionType&&(b.current=!0),l({conditionalActions:n}),p&&p(new eef.Op([d[0],e,a-1])),_((0,TT._P)({name:"Prototype add action",params:{action:t.connectionType?t.connectionType:"NONE",source:"panel",page_id:f,actionInConditionalAction:!0}}))},w=e=>function(t){if(h)g();else{var n=[...E];let a=E[e],r=[];if(a&&a.actions)for(let e=0;e<a.actions.length;e++){let n=a.actions[e];e!==t?r.push(n):_((0,TT._P)({name:"Prototype delete action",params:{action:n.connectionType?n.connectionType:"NONE",source:"panel",page_id:f,actionInConditionalAction:!0}}))}n[e].actions=r,l({conditionalActions:n})}},T=E.length>0?E[0]:void 0,x=E.length>1?E[1]:void 0;return Q.createElement(Q.Fragment,null,(0,lh.gl)(a.conditionalActions)&&Q.createElement(eek.Y1,null,Q.createElement("div",{className:"prototype_conditional_controls--mixedConditionalText--6O32b",onClick:()=>{var e=[];e.push({},{}),l({conditionalActions:e})},role:"button",tabIndex:0},(0,eO.t)("fullscreen.properties_panel.click_to_replace_mixed_content"))),(0,lh.hS)(a.conditionalActions)&&Q.createElement(Q.Fragment,null,Q.createElement(eta,{key:0,conditionalActions:T,recordingKey:nh.Pt(o,"conditional-block",0),updateCondition:v(0),updateActions:y(0),onAddAction:C(0),updateMultipleDestinationNodes:r.appendActionIndex(0),onDeleteAction:w(0),interactionType:i,updateSelectionProperties:l.appendActionIndex(0),ifStatement:!0,stateManagementVersion:s,selectedInteractions:c,actionIndexPath:[d[0],0],onDrop:e,onSelect:t,onExpand:n,selectedActionIndex:u,autoOpenVariablePicker:b,expandedRows:m,emptyAction:{ifStatement:!0,action:a}}),Q.createElement(eta,{key:1,conditionalActions:x,recordingKey:nh.Pt(o,"conditional-block",1),updateCondition:v(1),updateActions:y(1),onAddAction:C(1),updateMultipleDestinationNodes:r.appendActionIndex(1),onDeleteAction:w(1),interactionType:i,updateSelectionProperties:l.appendActionIndex(1),ifStatement:!1,stateManagementVersion:s,selectedInteractions:c,actionIndexPath:[d[0],1],onDrop:e,onSelect:t,onExpand:n,selectedActionIndex:u,autoOpenVariablePicker:b,expandedRows:m,emptyAction:{ifStatement:!1,action:a}})))}var etl=n(636149),eti=n.n(etl),eto=n(947887),ets=n(192546);class etc extends aT.c${}class etd extends aT.l6{}class etu extends Q.PureComponent{constructor(e){super(e),this.loadDestinationsFromFullscreen=()=>{let e=eU.baT.ALL;"SCROLL_TO"===this.props.action?e=eU.baT.SCROLL_TO:"SWAP_STATE_TO"===this.props.action&&(e=eU.baT.STATES);let{viableIds:t,disabledIds:n}=eU.X3B.getTransitionDestinationsOnActiveCanvas(e);return new Promise((e,a)=>{this.setState({viableIds:t,disabledIds:n},e)})},this.onOptionFocus=e=>{eV.Uc(e??"")},this.renderGroupedScrollableNodes=(e,t)=>{let n=eti()(e.filter(e=>this.nodeNameFormatter.hasNameForNode(e)),e=>{var n,a;return e===t&&(0,lh.hS)(t)?null==(n=(0,eW.Ql)(this.props.scene,e))?void 0:n.guid:null==(a=this.props.scene.get(e))?void 0:a.parentGuid}),a=Object.keys(n);(0,eW.X4)(a,this.nodeNameFormatter.format.bind(this.nodeNameFormatter));let{tlfId:r,index:l}=(0,eW.H_)(this.props.scene,a);return r&&l&&(a.splice(l,1),a=[r,...a]),a.reduce((e,t,a)=>(0!==a&&e.push(Q.createElement(aT.sK,{key:a})),e.push(Q.createElement(etc,{key:`disabled-${t}`,value:t+" ",recordingKey:nh.Pt(this.props,`disabled-option-${t}`),disabled:!0})),n[t].forEach((t,n)=>{e.push(Q.createElement(etc,{key:`enabled-${t+n}`,value:t,recordingKey:nh.Pt(this.props,`viable-option-${n}`),disabled:!1}))}),e),[])},this.state={viableIds:[],disabledIds:[]},this.nodeNameFormatter=new a5.cP(e.scene)}render(){let e=this.props.nodeId===lh.oV?lh.oV:ad.dI(this.props.nodeId),t=this.state.viableIds;(0,lh.hS)(e)&&e!==ad.AD&&-1===t.indexOf(e)&&(t=t.concat([e]));let n=this.state.disabledIds,a=`prototype-destination-select-${this.props.recordingKey}`,r="SCROLL_TO"!==this.props.action?t.filter(e=>this.nodeNameFormatter.hasNameForNode(e)).map((e,t)=>Q.createElement(etc,{key:`enabled-${e}`,value:e,recordingKey:nh.Pt(this.props,`viable-option-${t}`),disabled:!1})):this.renderGroupedScrollableNodes(t,e),l=n.filter(e=>this.nodeNameFormatter.hasNameForNode(e)).map((e,t)=>Q.createElement(etc,{key:`disabled-${e}`,value:e,recordingKey:nh.Pt(this.props,`disabled-option-${t}`),disabled:!0})),i=this.props.isUI3InteractionsPanel?Q.Fragment:this.props.isUI3?eeE.TN:nM.fI;return Q.createElement(i,null,Q.createElement(etd,{id:a,dataTestId:"destination-select",className:this.props.className,chevronClassName:"prototype_destination_dropdown--chevron--pmWtI",inputClassName:"prototype_destination_dropdown--input--rzglN",dropdownWidth:uT.DxS,property:e,formatter:this.nodeNameFormatter,onChange:this.props.onChange,dispatch:this.props.dispatch,dropdownShown:this.props.dropdownShown,recordingKey:nh.Pt(this.props,"select"),willShowDropdown:this.loadDestinationsFromFullscreen,onOptionFocus:this.onOptionFocus,hideDropdownWhenContainerMoves:!(0,pF.nl)()},r,0!==n.length&&0!==t.length&&Q.createElement(aT.sK,null),l))}}let etm=Q.memo(function(e){let t=(0,$.d4)(t_.sS),n=(0,ef.md)(t_._S),a=(0,$.d4)(etp),r=(0,$.d4)(lD.qd),l=(0,$.d4)(lD.dK),i=(0,eto.D)(r,l),o=(0,$.d4)(et_),s=Q.useMemo(()=>(0,ic.cP)(o,t,n,e.actionIndexPath),[o,t,n,e.actionIndexPath]),c=Q.useMemo(()=>(0,ic.cP)(a,t,n),[a,t,n]),d=s||c;if(!d||d.mode!==cl.iCO.STATE_OR_STATE_INSTANCE_SUBLAYER)return null;let{allStates:u,stateGroupModel:m,selectedStates:p,selectedStatesPropertyValues:_}=d,f=m.propertySortOrder||[],h=m.propertyValues;return h?Q.createElement(ets.lS,{sortedProperties:f,stateGroupPropertyValues:h,selectedStatesPropertyValues:_,selectedStates:p,allStates:u,onSelectProperty:t=>{let n={};for(let e of Object.keys(t)){let a=t[e].symbol.node_id;for(let t of(n[e]=a,i[e]||[]))n[t]=a;for(let e of r)n[e]||(n[e]=a)}e.onChange(n)},recordingKey:e.recordingKey,hideErrorsPanel:!0,shouldIndent:!0,extended:!0}):null});function etp(e){return e.mirror.selectionProperties.stateGroupSelectionInfo}function et_(e){return e.mirror.selectionProperties.prototypeDestinationStateGroupSelectionInfo}var etf=n(586271),eth=n(453015),etg=n(627878),etE=n(50779);let etv="prototype_set_variable_controls--dropdownAndIconContainer--6m3Tw",ety="prototype_set_variable_controls--icon---HzDt";function etb({targetVariableData:e,targetVariable:t,updateSelectionProperties:n,autoOpenVariablePicker:a,...r}){let l=Q.useRef(null),i=(0,$.wA)(),o=(0,$.d4)(e=>e.variablePickerShown),s=(0,ia.tZ)((0,lh.hS)(t)&&"id"in t?t.id:void 0),c=(0,ia.u)((0,lh.hS)(t)&&"id"in t?t.id:void 0),[d,u]=Q.useState("");(0,ts.h)(()=>{a&&!0===a.current&&(p(),a.current=!1)});let m=(0,ia.BQ)((0,lh.hS)(t)&&"id"in t?t.id:void 0)??(0,eeI.m9)((0,lh.hS)(t)&&"nodeFieldAlias"in t?t.nodeFieldAlias:void 0);Q.useEffect(()=>{void 0!==e&&m&&"MIXED"!==m&&(0,lh.hS)(e)&&e.resolvedType!==m.resolvedType&&!((0,eeI.tz)(e.resolvedType)&&(0,eeI.tz)(m.resolvedType))&&n({targetVariableData:void 0})},[m,n,e]);let p=()=>{let e=l.current.getBoundingClientRect();i((0,etf.C)({type:"variable-picker-set-variable-action",isShown:!0,resolvedType:eU.rXF.STRING,initialPosition:new lB.Mi(e.left-20,e.top),key:r.recordingKey,onVariableSelected:g}))},_=Q.useCallback(()=>{i((0,etf.B)())},[i]),[f,h]=Q.useState(!1),g=Q.useCallback(t=>{if(void 0!==t&&t.node_id){let a={targetVariable:{id:t.node_id}},r=eU.CWU.getVariableResolvedValue(t.node_id,ad.AD);!e&&t.resolvedType===eU.rXF.COLOR&&r&&(a.targetVariableData=r??void 0),n(a),i((0,TT.Zh)({name:"prototype.variable_selected",params:{collectionId:t.variableSetId,variableId:t.node_id,variableType:t.resolvedType}})),h(!0)}},[i,e,n]),E=Q.useCallback(e=>{e.value.stablePath.map(e=>ad.sH(e))&&(n({targetVariable:{nodeFieldAlias:{stablePathToNode:e.value.stablePath,nodeField:"COMPONENT_PROP_ASSIGNMENTS",indexOrKey:e.value.explicitDefId}}}),h(!0))},[n]),v=Q.useMemo(()=>(0,eo.kc)().prototype_expression_props?{type:"COMPONENT_PROPS",layout:"list"}:{type:"LOCAL_VARIABLES",layout:"list"},[]);Q.useEffect(()=>{let e=eU.Ez5.prototypingEditorState().colorPickerEyedropperVarData;return(0,eG.lu)(e,{onChangeImmediate(){let t=e.getCopy();t&&n({targetVariableData:t})}})},[n]);let y="nodeFieldAlias"in t?(0,eeI.aA)(t.nodeFieldAlias.stablePathToNode,t.nodeFieldAlias.indexOrKey):void 0,b=y?(0,eeI.Xx)(y.varValue.resolvedType):null,C=null;if((0,lh.gl)(t))C=null;else if((null==m?void 0:m.resolvedType)===eU.rXF.COLOR)C=(0,lh.gl)(e)?Q.createElement("div",{className:"prototype_set_variable_controls--targetVariableDataMixedContainer--H6uGu"},(0,eO.t)("fullscreen.mixed")):Q.createElement(Q.Fragment,null,Q.createElement(etg.g,{variableValue:e??m,onChange:e=>{n({targetVariableData:e})},recordingKey:nh.Pt(r.recordingKey,"variableValueInput"),setVariableAction:!0,innerContainerClassName:"prototype_set_variable_controls--variableColorInputContainer--NaOmp"}));else{let t=r.isNestedInConditional?"prototype_set_variable_controls--absoluteIconInConditional--BbEmW":"prototype_set_variable_controls--absoluteIcon--1XpBF",a=(null==c?void 0:c.resolvedType)??((null==y?void 0:y.varValue.resolvedType)===eU.rXF.TEXT_DATA?eU.rXF.STRING:null==y?void 0:y.varValue.resolvedType)??eU.rXF.BOOLEAN;C=Q.createElement("div",{className:tw.cx.ml12.$},Q.createElement("div",{className:etv},Q.createElement(ee_.KN,{resolvedType:a,targetVariableData:e,autoOpenExpressionBuilder:f,setAutoOpenExpressionBuilder:h,updateSelectionProperties:n,recordingKey:r.recordingKey,isNarrowPanel:r.isNarrowPanel,showVariableThumbnails:!0}),Q.createElement(eM.B,{className:ea()(ety,t),svg:etn.default})))}return Q.createElement("div",{className:tw.cx.relative.$},Q.createElement(ns.D8,{recordingKey:nh.Pt(r.recordingKey,"selectTargetVariable"),onClick:p},Q.createElement("div",{className:(0,lh.hS)(t)?"prototype_set_variable_controls--targetVariableLabel--AFCqK":"prototype_set_variable_controls--targetVariableLabelInactive--zHWCC prototype_set_variable_controls--targetVariableLabel--AFCqK",ref:l},Q.createElement(nk.Y,null,Q.createElement("div",{className:r.isNarrowPanel?"prototype_set_variable_controls--targetVariableDropdownNarrow--WWi-t prototype_set_variable_controls--targetVariableDropdown--IZwoF":"prototype_set_variable_controls--targetVariableDropdown--IZwoF"},Q.createElement("div",{className:etv},(0,lh.gl)(t)?Q.createElement("div",{className:ea()(tw.cx.pt2.$,tw.cx.pb2.$)},(0,eO.t)("fullscreen.mixed")):s?Q.createElement(ax.w,{text:s,thumbnailValue:m,isDeleted:!!c&&(0,eeS.eF)(c)}):y?Q.createElement(ax.w,{text:y.name,thumbnailValue:b,isDeleted:!1,colorTheme:ax.J.COMPONENT}):Q.createElement("div",{className:ea()(tw.cx.pt2.$,tw.cx.pb2.$)},(0,eO.t)("proto.select_variable")),Q.createElement(eM.B,{className:ety,svg:etn.default})))))),o.isShown&&"variable-picker-set-variable-action"===o.type&&o.key===r.recordingKey?Q.createElement(Q.Fragment,null,Q.createElement(dn.vx,{title:"",headerSize:"hidden",initialPosition:o.initialPosition,onClose:_,dragHeaderOnly:!1,initialWidth:216,canRenderBelowViewport:!0},(0,eo.kc)().prototype_expression_props?Q.createElement(eth.jc,{selectedItem:c,disabledVariableIds:new Set,currentView:v,toggleLayout:ey.lQ,pickerType:"fields",setControlRightButtons:Q.createElement(etE.f,{resolvedTypes:[eU.rXF.BOOLEAN,eU.rXF.STRING,eU.rXF.FLOAT,eU.rXF.COLOR]}),onVariableSelected:g,onClose:_,recordingKey:nh.Pt(r.recordingKey,"variablePickerForSelection"),searchQuery:d,onSearchInputChange:u,onComponentPropSelected:E}):Q.createElement(eth.YK,{selectedItem:c,disabledVariableIds:new Set,currentView:v,toggleLayout:ey.lQ,pickerType:"fields",setControlRightButtons:Q.createElement(etE.f,{resolvedTypes:[eU.rXF.BOOLEAN,eU.rXF.STRING,eU.rXF.FLOAT,eU.rXF.COLOR]}),onVariableSelected:g,onClose:_,recordingKey:nh.Pt(r.recordingKey,"variablePickerForSelection"),searchQuery:d,onSearchInputChange:u})),Q.createElement(eth.$3,{onClose:_})):null,Q.createElement("div",{className:r.isNarrowPanel?"prototype_set_variable_controls--setVariableToContainerNarrow--HHbHQ prototype_set_variable_controls--setVariableToContainer--kxsCZ":"prototype_set_variable_controls--setVariableToContainer--kxsCZ","data-testid":"set-variable-container"},C))}var etC=n(948986),etw=n(947757);let etT="prototype_state_management_panel--checkboxRow--2u02e checkbox--_checkboxRow--oEhow";function etx({transition:e,navigationType:t,recordingKey:n,showPreserveScrollPosition:a,showResetVideoState:r,showResetInteractiveComponentState:l,updateSelectionProperties:i,stateManagementVersion:o,selectedInteractions:s}){let c=(0,$.wA)(),d=(0,aD.GS)(),u=(0,eeh.LH)(o),m=Q.createElement(Tt.S,{onChange:t=>{c((0,TT._P)({name:"Preserve Scroll Changed",params:{newValue:t}})),i({...function(e){if((0,lh.hS)(e.preserveScroll))return{transitionPreserveScroll:e.preserveScroll}}({...e,preserveScroll:t})})},checked:!0===e.preserveScroll,mixed:(0,lh.gl)(e.preserveScroll),recordingKey:nh.Pt(n,"preserve-scroll-check"),label:Q.createElement(Tn.J,null,Q.createElement(eO.Tx,{id:"proto.animation_panel.preserve_scroll_position"}))}),p=d?Q.createElement(eeE.TN,null,m):Q.createElement(nM.fI,{className:etT},m),_=Q.createElement(Tt.S,{onChange:t=>{c((0,TT._P)({name:"Reset Scroll Position Changed",params:{newValue:t,noodleUpgradedThisSession:etw.zZ.haveAnyInteractionsBeenUpgraded(s)}})),i({...function(e){if((0,lh.hS)(e.resetScrollPosition))return{transitionResetScrollPosition:e.resetScrollPosition}}({...e,resetScrollPosition:t})})},checked:!0===e.resetScrollPosition,mixed:(0,lh.gl)(e.resetScrollPosition),recordingKey:nh.Pt(n,"reset-scroll-position-check"),label:Q.createElement(Tn.J,null,Q.createElement(eO.Tx,{id:"proto.animation_panel.reset_scroll_position"}))}),f=d?Q.createElement(eeE.TN,null,_):Q.createElement(nM.fI,{className:etT},_),h=Q.createElement(Tt.S,{onChange:t=>{c((0,TT._P)({name:"Reset Component State Changed",params:{newValue:t,noodleUpgradedThisSession:etw.zZ.haveAnyInteractionsBeenUpgraded(s)}})),i({...function(e){if((0,lh.hS)(e.resetInteractiveComponents))return{transitionResetInteractiveComponents:e.resetInteractiveComponents}}({...e,resetInteractiveComponents:t})})},checked:!0===e.resetInteractiveComponents,mixed:(0,lh.gl)(e.resetInteractiveComponents),recordingKey:nh.Pt(n,"reset-component-state-check"),label:Q.createElement(Tn.J,null,Q.createElement(eO.Tx,{id:"proto.animation_panel.reset_component_state"}))}),g=d?Q.createElement(eeE.TN,null,h):Q.createElement(nM.fI,{className:etT},h),E=Q.createElement(Tt.S,{onChange:t=>{c((0,TT._P)({name:"Reset Video Position Changed",params:{newValue:t}})),i({...function(e){if((0,lh.hS)(e.resetVideoPosition))return{transitionResetVideoPosition:e.resetVideoPosition}}({...e,resetVideoPosition:t})})},checked:!0===e.resetVideoPosition,mixed:(0,lh.gl)(e.resetVideoPosition),recordingKey:nh.Pt(n,"reset-video-position-check"),label:Q.createElement(Tn.J,null,(0,eeh.LH)(o)?Q.createElement(eO.Tx,{id:"proto.state_management.reset_video_state"}):Q.createElement(eO.Tx,{id:"proto.animation_panel.reset_video_state"}))}),v=d?Q.createElement(eeE.TN,null,E):Q.createElement(nM.fI,{className:etT},E);return Q.createElement(etC.p,{name:"prototype_state_management_panel"},Q.createElement(nM.Zk,{className:`prototype_state_management_panel--stateManagementPanel--sYaaj ${(0,eeh.kM)(o)&&"prototype_state_management_panel--stateManagementPanelWithVersion--AovOP"}`},Q.createElement(nM.fI,null,Q.createElement(nM.xw,{className:"prototype_state_management_panel--panelTitle--Nr4Eh",faded:!0},Q.createElement(eO.Tx,{id:"proto.state_management"})),!(0,eeh.kM)(o)&&Q.createElement("div",{"data-tooltip-type":nO.Ib.SPECIAL,"data-tooltip":nO.MW.PROTOTYPE_STATE_MANAGEMENT_INFO,"data-tooltip-interactive":!0,"data-tooltip-show-immediately":!0,"data-tooltip-max-width":240},Q.createElement(EK.In,{icon:"info-16"}))),(0,eeh.uU)(o)&&a&&p,r&&(0,eeh.uU)(o)&&v,u&&f,u&&l&&g,u&&r&&v,(0,lh.gl)(o)&&Q.createElement(nk.Y,{direction:"horizontal",padding:{horizontal:12,vertical:12}},Q.createElement(nM.UZ,null,Q.createElement(eO.Tx,{id:"proto.state_management.mixed_state_update"})))))}class etN extends aT.c${}class etk extends aT.l6{}let etS=ad.AD;class etI extends a5.cP{format(e){return e===etS||null===e?(0,eO.t)("proto.target_video_node_name_formatter.this_video"):super.format(e)}}function etA(e){let{viableSameFrameVideoIds:t,disabledSameFrameVideoIds:n,scene:a,dropdownShown:r,targetVideoNodeID:l,isVideoSelected:i,onChange:o}=e,s=(0,$.wA)(),[c,d]=Q.useState(()=>i?new etI(a):new a5.cP(a));t.sort((e,t)=>{let n=c.format(e),a=c.format(t);return n.localeCompare(a)}),i&&t.unshift(etS);let u=t.length>0&&n.length>0,m=`prototype-target-video-select-${e.recordingKey}`,p=(0,aD.GS)(),_=Q.createElement(etk,{id:m,dataTestId:"target-video-select",className:"prototype_target_video_dropdown--targetVideoDropdown--6hKF-",chevronClassName:"prototype_target_video_dropdown--chevron--jgz53",inputClassName:"prototype_target_video_dropdown--input--infAK",property:(0,lh.gl)(l)?l:ad.dI(l),formatter:c,onChange:o,dispatch:s,dropdownShown:r,recordingKey:nh.Pt(e,"select"),onOptionFocus:e=>{eV.Uc(e??"")},dropdownAlignment:"left"},t.filter(e=>c.hasNameForNode(e)).map((t,n)=>Q.createElement(etN,{key:`enabled-${n}`,value:t,recordingKey:nh.Pt(e,`viable-option-${n}`),disabled:!1})),u&&Q.createElement(aT.sK,null),n.filter(e=>c.hasNameForNode(e)).map((t,n)=>Q.createElement(etN,{key:`disabled-${n}`,value:t,recordingKey:nh.Pt(e,`viable-option-${n}`),disabled:!0})));return p?Q.createElement(eeE.TN,null,_):_}function etP({action:e,recordingKey:t,onURLChange:n,onOpenInNewTabChange:a}){let r=(0,aD.GS)(),l=(0,eeh.YT)(),i=Q.createElement(nc.ks,{className:l?"prototype_open_url_action_options--textInput--n-jPP":"prototype_interaction_panel--urlInput--aRuXj",dataTestId:"url-input",placeholder:(0,eO.t)("proto.interaction.example_com"),value:(0,lh.gl)(e.connectionURL)?(0,eO.t)("fullscreen.mixed"):(0,lh._W)(e.connectionURL,""),onChange:n,recordingKey:nh.Pt(t,"urlTextInput"),autoFocus:!1}),o=Q.createElement(Tt.S,{label:Q.createElement(Tn.J,null,Q.createElement(eO.Tx,{id:"proto.action_open_url_in_new_tab"})),onChange:a,recordingKey:nh.Pt(t,"open-url-in-new-tab-check"),checked:void 0===e.openUrlInNewTab||!0===e.openUrlInNewTab});return Q.createElement(Q.Fragment,null,r?l?Q.createElement(eeE.cS,{label:Q.createElement(eO.Tx,{id:"proto.open_url.text_input_label"}),input:i}):Q.createElement(eeE.TN,null,i):i,r?Q.createElement(eeE.TN,null,o):Q.createElement(nM.fI,{className:"prototype_open_url_action_options--checkboxRow--mu17T checkbox--_checkboxRow--oEhow"},o))}var etO=n(588599);function etL({updateSelectionProperties:e,action:t,extraScrollOffset:n,showScrollToOptions:a,recordingKey:r}){let{smallNudgeAmount:l,bigNudgeAmount:i}=(0,eH.sT)(),o=(0,$.wA)(),s=(0,aD.GS)(),c=(0,eeh.YT)(),d=(t,n)=>(a,r)=>{t&&e({extraScrollOffset:{...t,[n]:a}},{shouldCommit:r})},u=(0,lh._W)(n,{x:0,y:0});if(!a||"SCROLL_TO"!==t)return null;let m=Q.createElement(eeK.gq,{className:c?void 0:"prototype_interaction_panel--scrubbableInputLeftCol--wC8-D raw_components--borderFocusWithin--BaipZ",inputClassName:c?eeO:eeP,value:u.y,wheelMultiplier:l,scrubMultiplier:l,smallNudgeAmount:l,bigNudgeAmount:i,onValueChange:d(u,"y"),dispatch:o,"data-tooltip-type":nO.Ib.TEXT,"data-tooltip":(0,eO.t)("proto.trigger.y_offset"),tooltipForScreenReadersOnly:!1,recordingKey:nh.Pt(r,"extraScrollOffsetY")},c?Q.createElement("span",{className:eeA},Q.createElement(eO.Tx,{id:"proto.scroll_options.scroll_offset.y"})):Q.createElement(eM.B,{className:eeA,svg:etO.A})),p=Q.createElement(eeK.gq,{className:c?void 0:"prototype_interaction_panel--scrubbableInput--VJ6m6 prototype_interaction_panel--scrubbableInputLeftCol--wC8-D raw_components--borderFocusWithin--BaipZ",inputClassName:c?eeO:eeP,value:u.x,wheelMultiplier:l,scrubMultiplier:l,smallNudgeAmount:l,bigNudgeAmount:i,onValueChange:d(u,"x"),dispatch:o,"data-tooltip-type":nO.Ib.TEXT,"data-tooltip":(0,eO.t)("proto.trigger.x_offset"),tooltipForScreenReadersOnly:!1,recordingKey:nh.Pt(r,"extraScrollOffsetX")},c?Q.createElement("span",{className:eeA},Q.createElement(eO.Tx,{id:"proto.scroll_options.scroll_offset.x"})):Q.createElement(eM.B,{className:"prototype_interaction_panel--inactiveLabelRotated90--ArAQX prototype_interaction_panel--inactiveLabel--6uytx transform_panel--inactiveLabel--fPCxr raw_components--iconInsideBorderFocusWithin--2g7fO",svg:etO.A}));return s?c?Q.createElement(eeE.Cm,{label:Q.createElement(eO.Tx,{id:"proto.scroll_options.offset"}),leftInput:p,rightInput:m}):Q.createElement(eeE.dx,{left:m,right:p}):Q.createElement(nM.fI,null,m,p)}let etM="prototype_video_action_options--chevron--mkNyv",etD="prototype_video_action_options--input--3-cEi",etR=new a5.js,etF=new a5.Z6;function etB({action:e,onChange:t,updateSelectionProperties:n,dropdownShown:a,recordingKey:r}){let l=(0,aD.GS)(),i=(0,a5.Od)(e),o=(0,lh.E7)(e.mediaAction),s="UPDATE_MEDIA_RUNTIME"===(0,lh.E7)(e.connectionType),c="SKIP_TO"===o,d="SKIP_FORWARD"===o||"SKIP_BACKWARD"===o,u="PLAY"===o||"PAUSE"===o||"TOGGLE_PLAY_PAUSE"===o,m="MUTE"===o||"UNMUTE"===o||"TOGGLE_MUTE_UNMUTE"===o,p=(0,$.wA)(),_=(0,eH.RU)(),f=Q.useCallback(e=>{n({mediaSkipToTime:e}),p((0,TT._P)({name:"Media skip to time changed",params:{value:e}}))},[p,n]),h=e=>{n({mediaSkipByAmount:e}),p((0,TT._P)({name:"Media skip by amount changed",params:{value:e}}))},g=`prototype-media-action-select-${r}`,E="prototype_video_action_options--shortDropdown--NOXXv",v=a&&a.type===g?etR:etF,y=()=>Q.createElement(eeT,{id:g,dataTestId:"media-play-pause-select",className:E,chevronClassName:etM,inputClassName:etD,property:i,formatter:v,onChange:t,dispatch:p,dropdownShown:a,recordingKey:nh.Pt(r,"select")},Q.createElement(eew,{key:"UPDATE_MEDIA_TOGGLE_PLAY_PAUSE",value:"UPDATE_MEDIA_TOGGLE_PLAY_PAUSE",recordingKey:nh.Pt(r,"toggle-play-pause-option"),disabled:!1}),Q.createElement(eew,{key:"UPDATE_MEDIA_PLAY",value:"UPDATE_MEDIA_PLAY",recordingKey:nh.Pt(r,"play-option"),disabled:!1}),Q.createElement(eew,{key:"UPDATE_MEDIA_PAUSE",value:"UPDATE_MEDIA_PAUSE",recordingKey:nh.Pt(r,"pause-option"),disabled:!1})),b=()=>Q.createElement(eeT,{id:g,dataTestId:"media-mute-unmute-select",className:E,chevronClassName:etM,inputClassName:etD,property:i,formatter:v,onChange:t,dispatch:p,dropdownShown:a,recordingKey:nh.Pt(r,"select")},Q.createElement(eew,{key:"UPDATE_MEDIA_TOGGLE_MUTE_UNMUTE",value:"UPDATE_MEDIA_TOGGLE_MUTE_UNMUTE",recordingKey:nh.Pt(r,"toggle-mute-unmute-option"),disabled:!1}),Q.createElement(eew,{key:"UPDATE_MEDIA_MUTE",value:"UPDATE_MEDIA_MUTE",recordingKey:nh.Pt(r,"mute-option"),disabled:!1}),Q.createElement(eew,{key:"UPDATE_MEDIA_UNMUTE",value:"UPDATE_MEDIA_UNMUTE",recordingKey:nh.Pt(r,"unmute-option"),disabled:!1})),C=()=>Q.createElement(eeT,{id:g,dataTestId:"media-skip-by-select",className:E,chevronClassName:etM,inputClassName:etD,property:i,formatter:v,onChange:t,dispatch:p,dropdownShown:a,recordingKey:nh.Pt(r,"select"),dropdownWidth:160},Q.createElement(eew,{key:"UPDATE_MEDIA_SKIP_FORWARD",value:"UPDATE_MEDIA_SKIP_FORWARD",recordingKey:nh.Pt(r,"skip-forward-option"),disabled:!1}),Q.createElement(eew,{key:"UPDATE_MEDIA_SKIP_BACKWARD",value:"UPDATE_MEDIA_SKIP_BACKWARD",recordingKey:nh.Pt(r,"skip-backward-option"),disabled:!1})),w=()=>Q.createElement(eeK.qd,{className:"prototype_video_action_options--timestampContainer---DdaI",dataTestId:"mediaSkipToTime-input",dispatch:p,value:e.mediaSkipToTime||0,onValueChange:f,wheelMultiplier:_/1e3,scrubMultiplier:_/1e3,max:3600,displayFractions:!0,"data-tooltip-type":nO.Ib.TEXT,"data-tooltip":(0,eO.t)("proto.trigger.timestamp_to_set_to"),tooltipForScreenReadersOnly:!0,recordingKey:nh.Pt(r,"mediaSkipToTimeInput")}),T="SKIP_BACKWARD"===o?(0,eO.t)("proto.trigger.duration_to_jump_backward"):(0,eO.t)("proto.trigger.duration_to_jump_forward"),x=()=>Q.createElement(eeK.dE,{className:"prototype_video_action_options--timeAmountContainer--5kpHn",dataTestId:"mediaSkipByAmount-input",dispatch:p,value:e.mediaSkipByAmount||5,onValueChange:h,wheelMultiplier:_/1e3,scrubMultiplier:_/1e3,max:3600,"data-tooltip-type":nO.Ib.TEXT,"data-tooltip":T,tooltipForScreenReadersOnly:!0,recordingKey:nh.Pt(r,"mediaSkipByAmountInput")});if(!s)return null;if(l){if(u)return Q.createElement(eeE.TN,null,y());if(m)return Q.createElement(eeE.TN,null,b());if(d)return Q.createElement(eeE.dx,{left:C(),right:x()});if(c)return Q.createElement(eeE.TN,null,w())}return Q.createElement(nM.fI,null,u&&y(),m&&b(),d&&C(),d&&x(),c&&w())}function etU({action:e,recordingKey:t,interactionType:n,onActionChange:a,updateMultipleDestinationNodes:r,updateSelectionProperties:l,stateManagementVersion:i,autoOpenVariablePicker:o,...s}){let c=(0,$.wA)(),d=(0,aX.U)(),{scene:u,selectionProperties:m}=(0,ep.R)(e=>({scene:e.mirror.sceneGraph,selectionProperties:e.mirror.selectionProperties})),p=(0,aD.GS)(),_=(0,eeh.YT)(),f=(0,eeh.Y0)(),h="SET_VARIABLE"===(0,lh.E7)(e.connectionType),g="SET_VARIABLE_MODE"===(0,lh.E7)(e.connectionType),E="CONDITIONAL"===(0,lh.E7)(e.connectionType),v="INTERNAL_NODE"===(0,lh.E7)(e.connectionType),y="INTERNAL_NODE"===(0,lh.E7)(e.connectionType)&&"SWAP_STATE"===(0,lh.E7)(e.navigationType),b="URL"===(0,lh.E7)(e.connectionType),C=v||"BACK"===(0,lh.E7)(e.connectionType)||"CLOSE"===(0,lh.E7)(e.connectionType),w="UPDATE_MEDIA_RUNTIME"===(0,lh.E7)(e.connectionType),T=(0,eev.dq)(m),x=(0,lm.uQ)(),N=[],k=[];if(x){let{viableIds:e,disabledIds:t}=eU.X3B.getVideoNodesOnSameTlfAsNode(x);N=e,k=t}let S=ad.dI((0,lh.E7)(e.transitionNodeID)),I=null!=S&&S!==ad.AD,A=v&&(!(0,lh.hS)(e.transitionNodeID)||I),P=(0,lh.E7)(e.navigationType),O=v&&"OVERLAY"===(0,lh.E7)(P),L=(0,eeh.hU)(e.transitionType,e.easingType,e.easingFunction,e.transitionDuration,e.transitionShouldSmartAnimate,e.transitionPreserveScroll,e.transitionResetVideoPosition,e.openUrlInNewTab,e.transitionResetScrollPosition,e.transitionResetInteractiveComponents),M=C&&!O&&("INSTANT"===L.behavior||"DISSOLVE"===L.behavior),D=v&&"OVERLAY"===(0,lh.E7)(e.navigationType)&&I,R=!w&&(0,eeh.oc)(e),F=(0,eeh.GB)(e),B=(0,eeh.uU)(i)?M||R:(0,eeh.Fp)(i,e.connectionType,e.navigationType),{selectedInteractions:U}=(0,eed.Ay)(eei.J.NORMAL),H=U.filter(e=>!!e.sourceNodeID&&!!e.id).map(e=>eel.d({nodeID:e.sourceNodeID,interactionID:e.id})),V=Q.useCallback(e=>{let t=ad.sH(e);t&&l({transitionNodeID:t}),c((0,TT._P)({name:"Prototype navigation destination changed",params:{source:"panel",connectorIds:JSON.stringify(H)}}))},[c,l,H]),G=Q.useCallback(e=>{r(e),c((0,TT._P)({name:"Variant based prototyping UI changed",params:{source:"panel"}})),c((0,TT._P)({name:"Prototype navigation destination changed",params:{source:"panel",connectorIds:JSON.stringify(H)}}))},[r,c,H]),K=Q.useCallback(e=>{l({connectionURL:e.target.value})},[l]),W=(0,a5.Od)(e),z=ea()({"prototype_interaction_panel--actionDetailsInner--7ywFI":!f,[eeM]:s.isNestedInConditional&&!f}),j=v&&!y,Y=Q.createElement(etu,{className:"prototype_interaction_panel--destinationDropdown--ZIcBV",dispatch:c,dropdownShown:d,onChange:V,nodeId:e.transitionNodeID||ad.Hr,scene:u,recordingKey:nh.Pt(t,"destinationDropdown"),action:W,isUI3:p,isUI3InteractionsPanel:_}),Z=Q.createElement(etL,{action:W,showScrollToOptions:"SCROLL_TO"===W,extraScrollOffset:e.extraScrollOffset,updateSelectionProperties:l,recordingKey:nh.Pt(t,"scrollOptionsPanel")}),X=Q.createElement(eeJ,{interactionType:n,updateSelectionProperties:l,recordingKey:nh.Pt(t,"overlaySettings"),actionIndexPath:s.actionIndexPath,nodeId:e.transitionNodeID||ad.Hr});return Q.createElement("div",{className:z},j&&(f?Q.createElement(Q.Fragment,null,Q.createElement(eeE.cS,{label:D?Q.createElement(eO.Tx,{id:"proto.overlay"}):Q.createElement(eO.Tx,{id:"proto.destination"}),input:Y}),Z,D&&X,Q.createElement("div",{className:"prototype_interaction_panel--dividerHorizontal--vxIYY"})):Y),b&&Q.createElement(etP,{action:e,recordingKey:t,onOpenInNewTabChange:e=>{l({openUrlInNewTab:e}),c((0,TT._P)({name:"Open Url In New Tab Changed",params:{value:e}}))},onURLChange:K}),w&&Q.createElement(etA,{dropdownShown:d,scene:u,targetVideoNodeID:e.transitionNodeID||ad.Hr,recordingKey:nh.Pt(t,"targetVideoDropdown"),viableSameFrameVideoIds:N,disabledSameFrameVideoIds:k,isVideoSelected:T,onChange:V}),Q.createElement(etB,{dropdownShown:d,action:e,onChange:a,updateSelectionProperties:l,recordingKey:t}),!_&&Z,h&&Q.createElement("div",{className:tw.cx.ml4.$},Q.createElement(etb,{className:"prototype_interaction_panel--variableSelectorDropdown--UOYMn",dispatch:c,onChange:V,nodeId:e.transitionNodeID||ad.Hr,targetVariable:e.targetVariable||{id:""},targetVariableData:e.targetVariableData,updateSelectionProperties:l,recordingKey:nh.Pt(t,"setVariableControls"),action:W,isNestedInConditional:s.isNestedInConditional,isNarrowPanel:s.isNestedInConditional||s.isNarrowPanel,autoOpenVariablePicker:o})),g&&Q.createElement("div",{className:tw.cx.ml4.$},Q.createElement(eey.I,{dispatch:c,targetVariableSetID:e.targetVariableSetID,targetVariableModeID:e.targetVariableModeID,deprecatedTargetVariableSetKey:e.targetVariableSetKey,updateSelectionProperties:l,recordingKey:nh.Pt(t,"setVariableControls"),actionIndexPath:s.actionIndexPath.join(",")})),E&&Q.createElement(etr,{updateSelectionProperties:l,recordingKey:nh.Pt(t,"conditionalActionSection"),action:e,updateMultipleDestinationNodes:r,interactionType:n,stateManagementVersion:i,selectedInteractions:s.selectedInteractions,actionIndexPath:s.actionIndexPath,onDrop:s.onDrop,onSelect:s.onSelect,onExpand:s.onExpand,onNewActionAdded:s.onNewActionAdded,selectedActionIndex:s.selectedActionIndex,expandedRows:s.expandedRows}),y&&Q.createElement("div",{className:tw.cx.ml0.$},Q.createElement(etm,{onChange:G,nodeId:e.transitionNodeID||ad.Hr,recordingKey:nh.Pt(t,"consumption"),actionIndexPath:s.actionIndexPath})),A&&Q.createElement(ee3.X7,{transition:L,interactionType:n,navigationType:e.navigationType,recordingKey:nh.Pt(t,"animationPanel"),updateSelectionProperties:l,isNarrowPanel:s.isNestedInConditional||s.isNarrowPanel,stateManagementVersion:i}),D&&!_&&X,B&&Q.createElement(etx,{connectionType:e.connectionType,transition:L,navigationType:e.navigationType,recordingKey:nh.Pt(t,"stateManagementPanel"),updateSelectionProperties:l,showPreserveScrollPosition:M,showResetVideoState:!!R,showResetInteractiveComponentState:!!F,stateManagementVersion:i,selectedInteractions:s.selectedInteractions}))}var etH=n(344525),etV=n(482725);let etG=Symbol("ACTION_ROW");function etK({updateMultipleDestinationNodes:e,updateSelectionProperties:t,onDeleteAction:n,stateManagementVersion:a,selectedInteractions:r,autoOpenVariablePicker:l,...i}){let o=(0,$.wA)(),{shouldShowAdvancedPrototypingPaywall:s,showAdvancedPrototypingVariablesModal:c,showAdvancedPrototypingConditionalActionsModal:d}=(0,eeh.zt)(),u=(0,aX.U)(),m=(0,eeh.SJ)(),{firstVariableSetMode:p,firstVariableSetID:_}=(0,eey.b)(),f=i.action,h=i.isNestedInConditional&&(0,eef.qQ)(i.action),g=!!f.connectionType&&"CONDITIONAL"===f.connectionType,E=(0,aD.GS)(),v=(0,eeh.YT)(),y=(0,eeh.Y0)(),b=v&&!y,C=!((0,lh.gl)(i.action)||["CLOSE","NONE"].includes(f.connectionType))&&!v;var w=i.selectedActionIndex.equals(i.actionIndexPath),T=void 0===i.expandedRows||void 0!==i.expandedRows.find(e=>e.equals(i.actionIndexPath));let x=Q.useCallback(()=>{C&&i.onExpand(i.actionIndexPath)},[C,i]),[N,k]=Q.useState(!1);Q.useEffect(()=>{if(g){let e=setTimeout(()=>{k(!0)},0);return()=>clearTimeout(e)}k(!0)},[g]);let S=g&&!T,I=g&&T,A=Q.useRef(null),{position:P,dragItem:O}=(0,eeg.h4)(()=>({type:etG,element:A,item:i.action,dropPositionThreshold:I?.2:S?1/3:.5,getDeepestTargetOnly:!0,canDrag:!T,onDrop(e){i.onDrop(e)}})),L=Q.useMemo(()=>{let e=A.current;if(!e||!P||O&&"CONDITIONAL"===O.connectionType&&i.isNestedInConditional)return;let t=h?eeg.Nz.BEFORE:P;var n=void 0;return t===eeg.Nz.BEFORE?n=e.offsetTop:t===eeg.Nz.AFTER&&(n=e.offsetTop+e.offsetHeight),n},[O,P,i.isNestedInConditional,h]),M=P&&g&&!T&&P===eeg.Nz.INSIDE&&"CONDITIONAL"!==O.connectionType,D=nh.rf(i.recordingKey,"mousedown",e=>{T||(w=!0,i.onSelect(i.actionIndexPath,!0))}),R=nh.rf(i.recordingKey,"mousedown",e=>{w=!1,i.onSelect(i.actionIndexPath,!1)}),F=nh.rf(i.recordingKey,"click",e=>{w=!w,i.onSelect(i.actionIndexPath,w)}),B=e=>{var n=!0;switch(e){case"NONE":t({connectionType:"NONE"});break;case"NAVIGATE_TO":t({connectionType:"INTERNAL_NODE",navigationType:"NAVIGATE"});break;case"OPEN_OVERLAY":t({connectionType:"INTERNAL_NODE",navigationType:"OVERLAY"});break;case"SCROLL_TO":t({connectionType:"INTERNAL_NODE",navigationType:"SCROLL_TO"});break;case"SWAP_WITH":t({connectionType:"INTERNAL_NODE",navigationType:"SWAP"});break;case"SWAP_STATE_TO":t({connectionType:"INTERNAL_NODE",navigationType:"SWAP_STATE"});break;case"GO_BACK":t({connectionType:"BACK"});break;case"CLOSE_OVERLAY":t({connectionType:"CLOSE"});break;case"OPEN_URL":t({connectionType:"URL"});break;case"SET_VARIABLE":s?(n=!1,c()):(t({connectionType:"SET_VARIABLE"}),l.current=!0);break;case"SET_VARIABLE_MODE":t({connectionType:"SET_VARIABLE_MODE",targetVariableSetID:_,targetVariableModeID:p});break;case"UPDATE_MEDIA_PLAY":t({connectionType:"UPDATE_MEDIA_RUNTIME",mediaAction:"PLAY"});break;case"UPDATE_MEDIA_PAUSE":t({connectionType:"UPDATE_MEDIA_RUNTIME",mediaAction:"PAUSE"});break;case"UPDATE_MEDIA_PLAY_PAUSE_OPTIONS":case"UPDATE_MEDIA_TOGGLE_PLAY_PAUSE":t({connectionType:"UPDATE_MEDIA_RUNTIME",mediaAction:"TOGGLE_PLAY_PAUSE"});break;case"UPDATE_MEDIA_MUTE":t({connectionType:"UPDATE_MEDIA_RUNTIME",mediaAction:"MUTE"});break;case"UPDATE_MEDIA_UNMUTE":t({connectionType:"UPDATE_MEDIA_RUNTIME",mediaAction:"UNMUTE"});break;case"UPDATE_MEDIA_MUTE_UNMUTE_OPTIONS":case"UPDATE_MEDIA_TOGGLE_MUTE_UNMUTE":t({connectionType:"UPDATE_MEDIA_RUNTIME",mediaAction:"TOGGLE_MUTE_UNMUTE"});break;case"UPDATE_MEDIA_SKIP_BY_OPTIONS":case"UPDATE_MEDIA_SKIP_FORWARD":t({connectionType:"UPDATE_MEDIA_RUNTIME",mediaAction:"SKIP_FORWARD"});break;case"UPDATE_MEDIA_SKIP_BACKWARD":t({connectionType:"UPDATE_MEDIA_RUNTIME",mediaAction:"SKIP_BACKWARD"});break;case"UPDATE_MEDIA_SKIP_TO":t({connectionType:"UPDATE_MEDIA_RUNTIME",mediaAction:"SKIP_TO"});break;case"CONDITIONAL":s?(n=!1,d()):t({connectionType:"CONDITIONAL"})}if(T||x(),n){let t=r.filter(e=>!!e.sourceNodeID&&!!e.id).map(e=>eel.d({nodeID:e.sourceNodeID,interactionID:e.id}));o((0,TT._P)({name:"Prototype action changed",params:{action:e,source:"panel",connectorIds:JSON.stringify(t)}}))}},U=i.isNestedInConditional?"prototype_interaction_panel--conditionalActionRowDivider--9pjgS prototype_interaction_panel--actionRowDivider--bqH58":"prototype_interaction_panel--topLevelActionRowDivider--TriUY prototype_interaction_panel--actionRowDivider--bqH58";if(h&&i.onAddAction)return Q.createElement(Q.Fragment,null,L&&Q.createElement("hr",{className:U,style:{transform:`translateY(${L}px)`}}),Q.createElement("div",{className:"prototype_interaction_panel--addActionRow--PByUm",ref:A},Q.createElement(ee6,{addButtonPressed:i.onAddAction,recordingKey:nh.Pt(i.recordingKey,"addAction"),isNestedInConditional:!0})));let H=(0,a5._X)(f),V="NONE"!==H,G=(T||!V)&&!b,K=i.numActions>1,W=(i.numActions>1||i.isNestedInConditional)&&!b,z=ea()({"prototype_interaction_panel--actionRow--WzbzF":!0,"prototype_interaction_panel--actionRowSelected--dcGvB":w&&!v,"prototype_interaction_panel--conditionalActionRowBorder--p80fK":M,"prototype_interaction_panel--removeLeftMargin--2WMkr":i.isNestedInConditional}),j=ea()({"prototype_interaction_panel--actionTitleRow--DxGK3":!0,[eeM]:i.isNestedInConditional}),Y=Q.createElement(eM.B,{key:"expand-caret",className:"prototype_interaction_panel--expandCaret--xX9Pv",svg:T?t$.A:u$.A,recordingKey:nh.Pt(i.recordingKey,"expandCaret"),onClick:x}),Z=Q.createElement(eeU,{action:f,isNestedInConditional:i.isNestedInConditional,isNarrowPanel:i.isNarrowPanel&&K}),X=Q.createElement(eeN,{className:"NONE"!==H?etH.fH:void 0,dispatch:o,dropdownShown:u,onChange:B,action:H,recordingKey:nh.Pt(i.recordingKey,"actionDropdown"),showVideoActions:m,isNestedInConditional:i.isNestedInConditional}),q=Q.createElement(nM.K0,{className:E?"prototype_interaction_panel--minusButtonUI3--kzsLc":"prototype_interaction_panel--minusButton--cZso-",onClick:n,"data-tooltip-type":nO.Ib.TEXT,"data-tooltip":(0,eO.t)("proto.prototype_panel.delete"),"aria-label":(0,eO.t)("proto.prototype_panel.delete"),recordingKey:nh.Pt(i.recordingKey,"actionDeleteButton")},Q.createElement(nd.U,{svg:etV.A},Q.createElement(Tx.O,null))),J=Q.createElement(nM.fI,{className:j,onDoubleClick:x},C&&Y,G?Q.createElement("span",{className:"prototype_interaction_panel--dropdownContainer--udrAG"},X):Z,W&&q),ee=G?X:Z,et=Q.createElement(ns.D8,{className:j,onDoubleClick:x},C&&Y,W?Q.createElement(eeH.DE,{appendedClassName:eeL,label:null,input:ee,icon:q}):Q.createElement(eeH.Ad,{appendedClassName:eeL,label:null,input:ee})),en=Q.createElement(eO.Tx,{id:"proto.action"}),er=Q.createElement(ns.D8,{className:j},Q.createElement(eeE.cS,{label:en,input:ee})),el=Q.createElement("div",{className:"prototype_interaction_panel--actionRowSelectedOverlayContainer--mLect"},Q.createElement("div",{className:"prototype_interaction_panel--actionRowSelectedOverlay--5cLiP"}));return Q.createElement("div",{className:z,ref:A,role:"button",tabIndex:0,onMouseDown:b?void 0:D,onMouseUp:b?void 0:R,onClick:b?F:void 0},w&&v&&el,L&&Q.createElement("hr",{className:U,style:{transform:`translateY(${L}px)`}}),E?y?er:et:J,T&&N&&Q.createElement(etU,{updateMultipleDestinationNodes:e,action:f,onActionChange:B,recordingKey:i.recordingKey,updateSelectionProperties:t,interactionType:i.interactionType,stateManagementVersion:a,selectedInteractions:r,isNestedInConditional:i.isNestedInConditional,isNarrowPanel:i.isNarrowPanel,actionIndexPath:i.actionIndexPath,onDrop:i.onDrop,onSelect:i.onSelect,onExpand:i.onExpand,onNewActionAdded:i.onNewActionAdded,selectedActionIndex:i.selectedActionIndex,expandedRows:i.expandedRows,autoOpenVariablePicker:l}))}var etW=n(765707),etz=n(497109);function etj({onChange:e,value:t,shouldFocusKeyCaptureField:n,setShouldFocusKeyCaptureField:a}){let r;let l=(0,etz._i)(null==t?void 0:t.keyCodes),i=t=>e({keyCodes:t,triggerDevice:"KEYBOARD"}),[o,s]=Q.useState(!1),c=Q.useRef(null);Q.useEffect(()=>{(!t||!t.keyCodes||0===t.keyCodes.length)&&n&&c.current&&(a(!1),c.current.focus(),s(!0))},[a,n,t]),Q.useEffect(()=>{if(!o)return()=>{};let t=new etW.L,n=t.onPress(t=>{e({keyCodes:[t.buttons[0]],triggerDevice:t.controllerType}),requestAnimationFrame(()=>{document.activeElement instanceof HTMLElement&&document.activeElement.blur()})});return t.start(),()=>{n.release(),t.end()}},[e,o]);let d=null,u=(0,etz.E8)(t);return o?r=Q.createElement(etY,null,Q.createElement(eO.Tx,{id:"proto.keyCapture.press_key"})):(null==t?void 0:t.triggerDevice)==="KEYBOARD"&&l?d=(0,etz.U8)(l):u?d=u:r=Q.createElement(etY,null,Q.createElement(eO.Tx,{id:"proto.keyCapture.click_to_select"})),Q.createElement(nM.rp,{ref:c,className:"prototype_key_capture_field--root--bD21s","data-tooltip-type":nO.Ib.TEXT,"data-tooltip":d&&d.length>10?d:null,onFocus:()=>s(!0),onBlur:()=>s(!1),onKeyDown:e=>{e.preventDefault(),e.stopPropagation();let t=e.which||e.keyCode;!etz.RI.has(t)&&etz.pu[t]&&(t===(null==l?void 0:l.keyCode)&&e.repeat?i((0,etz.wb)({keyCode:t,metaKey:e.metaKey||l.metaKey,shiftKey:e.shiftKey||l.shiftKey,ctrlKey:e.ctrlKey||l.ctrlKey,altKey:e.altKey||l.altKey})):i((0,etz.wb)({...e,keyCode:t})),document.activeElement instanceof HTMLElement&&document.activeElement.blur())},recordingKey:"keycapture"},d??r)}function etY({children:e}){return Q.createElement("span",{className:"prototype_key_capture_field--placeholder--gWUKF"},e)}var etZ=n(847406);class etX extends aT.l6{}class etq extends aT.c${}let etJ=new a5.VG,etQ=new a5.EX,et$=new a5.JV,et0=new a5.Eq;function et1(e){let t=(0,$.wA)(),n=(0,aX.U)(),{showVideoV2Triggers:a}=(0,ep.R)(e=>{var t;return{allStatesInSelection:(null==(t=e.mirror.selectionProperties.stateGroupSelectionInfo)?void 0:t.mode)===eU.iCO.STATE,allTopLevelFramesInSelection:!!e.mirror.selectionProperties.allTopLevelFramesInSelection,showVideoV2Triggers:(0,eev.dq)(e.mirror.selectionProperties)}}),r=(0,ef.md)(etZ.NE),l=(t,n)=>Q.createElement(etq,{key:n,value:t,recordingKey:nh.Pt(e,t),disabled:!function(t){var n;if("NONE"===t)return!0;let r=!!e.interactionsOnSelectedNodes&&e.interactionsOnSelectedNodes.every(t=>e.interactionsOnSelectedNodes&&ad.aI(t.sourceNodeID,e.interactionsOnSelectedNodes[0].sourceNodeID))&&!(0,lh.hS)(e.property),l=(null==(n=function(){if(e.interactionsOnSelectedNodes)return new Set(e.interactionsOnSelectedNodes.map(e=>{var t;return null==(t=null==e?void 0:e.event)?void 0:t.interactionType}).filter(e=>void 0!==e))}())?void 0:n.has(t))&&(0,lh.hS)(e.property)&&e.property!==t;return(!r&&!l||!!["ON_KEY_DOWN","DRAG","ON_VOICE","ON_MEDIA_HIT"].includes(t))&&("AFTER_TIMEOUT"===t?!e.interactionContainsOpenLinkAction:"ON_MEDIA_HIT"===t||"ON_MEDIA_END"===t?a:(!e.interactionContainsOpenLinkAction||"ON_CLICK"===t||"MOUSE_UP"===t)&&(!e.interactionContainsUpdateMediaRuntime||"ON_HOVER"!==t&&"ON_PRESS"!==t&&"DRAG"!==t)&&(!e.interactionOnlyContainsBack||"ON_HOVER"!==t&&"ON_PRESS"!==t))}(t)}),i=["NONE"].map(l),o=["ON_CLICK","DRAG","ON_HOVER","ON_PRESS","ON_KEY_DOWN"].map(l),s=["MOUSE_ENTER","MOUSE_LEAVE","MOUSE_DOWN","MOUSE_UP"].map(l),c=["ON_MEDIA_HIT","ON_MEDIA_END"].map(l),d=["AFTER_TIMEOUT"].map(l),u=r?"ON_MEDIA_HIT"!==e.property?etQ:et0:"ON_MEDIA_HIT"!==e.property?etJ:et$,m=Q.useCallback(e=>e-24,[]);return Q.createElement(etX,{id:"interaction-type-select",className:e.className,chevronClassName:"transition_interaction_dropdown--chevron--pyzhq",inputClassName:"transition_interaction_dropdown--input--y0pgd",dataTestId:"interaction-select",property:e.property,formatter:u,onChange:e.onChange,dispatch:t,dropdownShown:n,recordingKey:nh.Pt(e,"select"),hideDropdownWhenContainerMoves:!(0,pF.nl)(),dropdownAlignment:m,dropdownWidth:160},i,Q.createElement(aT.sK,null),o,Q.createElement(aT.sK,null),s,Q.createElement(aT.sK,null),d,a&&[Q.createElement(aT.sK,{key:""}),...c])}let et2={keyCodes:[],triggerDevice:"KEYBOARD"};function et5(e){let{detailPropsMultipleActions:t,interactionsOnSelectedNodesAndComponents:n,updateSelectionProperties:a}=(0,eed.Ay)(e.category),{interactionType:r="NONE",transitionTimeout:l=.8,mediaHitTime:i=0,interactionMaintained:o=!1,interactionDuration:s=.3,keyTrigger:c=et2}=t.interactionEvent,d=(e,t)=>{if(e.connectionType===t)return e;if("CONDITIONAL"===e.connectionType)for(let n of(0,lh.hS)(e.conditionalActions)&&e.conditionalActions?e.conditionalActions:[]){let e=n.actions?n.actions.find(e=>e.connectionType===t):void 0;if(void 0!==e)return e}return null},u=void 0!==t.interactionActions.find(e=>d(e,"URL")),m=void 0!==t.interactionActions.find(e=>d(e,"UPDATE_MEDIA_RUNTIME")),p=1===t.interactionActions.length&&"BACK"===t.interactionActions[0].connectionType,_=void 0!==t.interactionActions.find(e=>d(e,"CONDITIONAL"));return function(e){let t=(0,$.wA)(),n=e.updateSelectionProperties,a=(0,eH.RU)(),[r,l]=Q.useState(!1),i=(0,eeh.YT)(),o=!0===(0,lh.E7)(e.maintained),s=(0,lh.E7)(e.keyTrigger),c="ON_KEY_DOWN"===(0,lh.E7)(e.interactionType),d="AFTER_TIMEOUT"===(0,lh.E7)(e.interactionType),u="ON_MEDIA_HIT"===(0,lh.E7)(e.interactionType),m=["MOUSE_IN","MOUSE_OUT","MOUSE_ENTER","MOUSE_LEAVE","MOUSE_DOWN","MOUSE_UP"].indexOf((0,lh.E7)(e.interactionType)||"")>-1;var p=`prototype_interaction_panel--interactionSelectDropdown--HG9ew ${i?"prototype_interaction_panel--ui3InteractionSelectDropdown--3UPsI":null}`;let _=Q.createElement(et1,{className:p,property:e.interactionType,onChange:a=>{tW.sn.start("interaction_details_changed"),n({interactionType:a}),t((0,TT._P)({name:"Prototype Interaction Type Changed",params:{newType:a,oldType:(0,lh._W)(e.interactionType,"MIXED")}})),"ON_KEY_DOWN"===a&&l(!0)},interactionContainsOpenLinkAction:e.interactionContainsOpenLinkAction,interactionContainsUpdateMediaRuntime:e.interactionContainsUpdateMediaRuntime,interactionOnlyContainsBack:e.interactionOnlyContainsBack,recordingKey:nh.Pt(e,"interactionDropdown"),interactionsOnSelectedNodes:e.interactionsOnSelectedNodes});return e.onlyShowTriggerDropdown?_:Q.createElement("div",{className:"prototype_interaction_panel--interactionRowContainer--8IWen"},Q.createElement(nM.fI,{className:ea()("prototype_interaction_panel--interactionRowHeader--FRsvU","prototype_interaction_panel--selectionContainer--FAj3B")},_,Q.createElement("div",{className:"prototype_interaction_panel--headerButtonContainer--P2F08"},e.headerButtons)),Q.createElement(Q.Fragment,null,d&&Q.createElement(nM.fI,null,Q.createElement(eeK.W4,{className:"prototype_interaction_panel--timeoutContainer--Zn1xk",inputClassName:"prototype_interaction_panel--timeout--mSbqx",dataTestId:"timeout-input",dispatch:t,value:e.timeout,onValueChange:e=>{n({transitionTimeout:e})},wheelMultiplier:a/1e3,scrubMultiplier:a/1e3,max:20,"data-tooltip-type":nO.Ib.TEXT,"data-tooltip":(0,eO.t)("proto.trigger.after_delay_timeout"),tooltipForScreenReadersOnly:!0,recordingKey:nh.Pt(e,"timeoutInput")})),c&&Q.createElement(nM.fI,null,Q.createElement(etj,{onChange:e=>{n({keyTrigger:e})},value:s,shouldFocusKeyCaptureField:r,setShouldFocusKeyCaptureField:l})),u&&Q.createElement(nM.fI,null,Q.createElement(eeK.qd,{displayFractions:!0,className:"prototype_interaction_panel--timestampContainer--P9Uid",inputClassName:"prototype_interaction_panel--timestamp--Ay3G7",dataTestId:"mediaHitTime-input",dispatch:t,value:e.mediaHitTime,onValueChange:e=>{n({mediaHitTime:e})},wheelMultiplier:a/1e3,scrubMultiplier:a/1e3,max:3600,"data-tooltip-type":nO.Ib.TEXT,"data-tooltip":(0,eO.t)("proto.trigger.video_hit_time"),tooltipForScreenReadersOnly:!0,recordingKey:nh.Pt(e,"mediaHitTimeInput")}))),m&&Q.createElement(nM.fI,null,Q.createElement(eeK.W4,{className:"prototype_interaction_panel--durationContainer--GYp82",inputClassName:"prototype_interaction_panel--duration--JdsIp",dataTestId:"duration-input",dispatch:t,value:o?e.interactionDuration:void 0,onValueChange:e=>{n(e&&e>0?{interactionMaintained:!0,interactionDuration:e}:{interactionMaintained:!1})},min:0,allowEmpty:!0,placeholder:(0,eO.t)("proto.trigger.add_delay_placeholder"),wheelMultiplier:a/1e3,scrubMultiplier:a/1e3,"data-tooltip-type":nO.Ib.TEXT,"data-tooltip":(0,eO.t)("proto.trigger.after_delay_timeout"),tooltipForScreenReadersOnly:!0,recordingKey:nh.Pt(e,"delayInput")})))}({...e,updateSelectionProperties:a,interactionType:r,interactionContainsOpenLinkAction:u,interactionContainsUpdateMediaRuntime:m,interactionOnlyContainsBack:p,interactionContainsConditionalAction:_,timeout:l,maintained:o,interactionDuration:s,mediaHitTime:i,keyTrigger:c,interactionsOnSelectedNodes:n,recordingKey:nh.Pt(e.recordingKey,"interactionPanel")})}let et4="prototype_interaction_edit_modal--contentContainer--bo2b4",et3="prototype_interaction_edit_modal--ui3TwoColContentContainer--x9vrG",et6="prototype_interaction_edit_modal--ui3SingleColContentContainer--uF-ir",et7="prototype_interaction_edit_modal--dividerHorizontal--3wvnB";function et8(e){let{selectedInteractions:t,makeUpdateSelectionPropertiesForActionIndex:n,makeUpdateMultipleDestinationNodesForActionIndex:a,differentLengthActions:r,mergedActions:l}=(0,eed.Ay)(e.category),i=(0,$.wA)(),o=(0,ae.p8)("currentPage"),{shouldShowAdvancedPrototypingPaywall:s,showAdvancedPrototypinglMultipleActionsModal:c}=(0,eeh.zt)(),d="NONE"!==(0,lh.E7)(e.interactionType),u=void 0!==l.find(e=>"CONDITIONAL"===e.connectionType),[m,p]=Q.useState(new eef.Op([])),_=(0,eeh.Y0)();var f=[];l.length<4&&l.forEach((e,t)=>{f.push(new eef.Op([t]))});let[h,g]=Q.useState(f),{conditionalActionIndexPath:E}=e;Q.useEffect(()=>{E&&!h.includes(E)&&g([...h,E])},[h,E]),Q.useEffect(()=>{var t;!e.newActionIndexPath||(null==(t=e.newActionIndexPath)?void 0:t.equals([]))||(g([...h,e.newActionIndexPath]),p(new eef.Op([])),e.resetNewActionIndexPath())},[h,e]);let v=Q.useCallback(n=>{let a=e.interactionsOnSelectedNodes;if(a&&t){if(s)c();else{for(let e=0;e<(null==t?void 0:t.length);e++){let a=t[e],s=[];if(a&&a.actions){var r=0,l=[];for(let e=0;e<a.actions.length;e++){let t=a.actions[e];if(e!==n)void 0!==h.find(t=>t.equals([e]))&&l.push(new eef.Op([r])),s.push(t),r++;else{let e=a.id?a.id:ad.Hr;i((0,TT._P)({name:"Prototype delete action",params:{action:t.connectionType?t.connectionType:"NONE",source:"panel",connector_id:(0,ad.dI)(e),page_id:o}}))}g(l)}t[e].actions=s}}let e=a.map(e=>t.find(t=>t.id===e.id)??e);lT.Y5.updateSelectionProperties({prototypeInteractions:e})}}},[e.interactionsOnSelectedNodes,t,s,c,h,i,o]),y=Q.useCallback((e,t)=>{t?p(new eef.Op(e)):p(new eef.Op([]))},[]),b=Q.useCallback(e=>{h.find(t=>t.equals(e))?g(h.filter(t=>!t.equals(e))):g([...h,new eef.Op(e)])},[h]),C=Q.useCallback(n=>{var a=n.dropItem;if((0,lh.gl)(a))return;let r=e.interactionsOnSelectedNodes;if(!r||!t)return;for(var l=0;l<(null==t?void 0:t.length);l++){let e=t[l];if(e&&e.actions){let r=e.actions,i=(0,eef.Vp)(r,m,h,a,n.position);i.newActions&&(t[l].actions=i.newActions,p(new eef.Op([]))),i.newExpandedRows&&g(i.newExpandedRows)}}let i=r.map(e=>t.find(t=>t.id===e.id)??e);lT.Y5.updateSelectionProperties({prototypeInteractions:i})},[h,e.interactionsOnSelectedNodes,m,t]),w=Q.createElement(eeE.cS,{label:Q.createElement(eO.Tx,{id:"proto.trigger"}),input:Q.createElement(et5,{category:e.category,headerButtons:Q.createElement(Q.Fragment,null),onlyShowTriggerDropdown:!0})});return Q.createElement(eeg.hh,null,Q.createElement(nM.Zk,{style:(0,aD.GS)()?{borderBottom:"none"}:void 0},e.shouldHideTitle?null:Q.createElement(nM.fI,null,Q.createElement(nM.U8,{title:(0,eO.t)("proto.interaction.interaction"),dataTooltipContentKey:nO.MW.PROTOTYPE_ACTION_INFO,dataTooltipTimeoutDelay:50})),Q.createElement("div",null,d&&Q.createElement(Q.Fragment,null,r&&Q.createElement(nk.Y,{direction:"horizontal",padding:{horizontal:16,vertical:12}},Q.createElement(nM.UZ,null,Q.createElement(eO.Tx,{id:"fullscreen.properties_panel.click_plus_to_replace_mixed_content"}))),!r&&Q.createElement(Q.Fragment,null,_&&Q.createElement(Q.Fragment,null,w,Q.createElement("div",{className:et7})),null==l?void 0:l.map((r,i)=>Q.createElement(etK,{key:i,updateMultipleDestinationNodes:a(i),action:r,recordingKey:nh.Pt(e.recordingKey,"action-row",i),updateSelectionProperties:n(i),onDeleteAction:()=>v(i),interactionType:e.interactionType,actionIndexPath:[i],numActions:l.length,isNestedInConditional:!1,isNarrowPanel:!u,stateManagementVersion:e.stateManagementVersion,selectedInteractions:t,onDrop:C,onSelect:y,onExpand:b,selectedActionIndex:m,autoOpenVariablePicker:e.autoOpenVariablePicker,expandedRows:h,onNewActionAdded:e.onNewActionAdded})))))))}function et9({transition:e,recordingKey:t,updateSelectionProperties:n,stateManagementVersion:a,selectedInteractions:r}){let l=(0,$.wA)(),i=1===a?Q.createElement(nc.jG,{className:"prototype_state_management_version_panel--revertButton--Svmg9",recordingKey:nh.Pt(t,"revert-state-management-version"),onClick:()=>{er.az.trackDefinedEvent("prototype.state_management_noodle_reverted",{num_interactions:r.length}),n({stateManagementVersion:0})},"data-testid":"revert-state-management-button"},Q.createElement(eO.Tx,{id:"proto.state_management.revert_controls"})):Q.createElement(nc.nR,{recordingKey:nh.Pt(t,"update-state-management-version"),onClick:()=>{for(let t of(er.az.trackDefinedEvent("prototype.state_management_noodle_upgraded",{num_interactions:r.length,preserve_scroll_position_value:!!e.preserveScroll}),r))(0,eeh.uU)(t.stateManagementVersion)&&t.id&&t.sourceNodeID&&etw.zZ.recordInteractionUpgraded(t.id,t.sourceNodeID);n({...(0,lh.hS)(e.preserveScroll)&&(0,lh.hS)(a)?{transitionResetScrollPosition:!e.preserveScroll}:{},stateManagementVersion:1}),l(eL.F.enqueue({type:"state-management-updated",message:(0,eO.t)("proto.state_management.visual_bell_updated_message"),button:{text:(0,eO.t)("proto.state_management.visual_bell_update_all"),action:()=>{lT.Y5.triggerActionInUserEditScope("update-interactions-state-management-on-page"),l(eL.F.enqueue({type:"state-management-updated-all",message:(0,eO.t)("proto.state_management.visual_bell_update_all_message")}))}}}))}},Q.createElement(eO.Tx,{id:"proto.state_management.update_controls"}));return Q.createElement(etC.p,{name:"prototype_state_management_version_panel"},Q.createElement(nM.Zk,null,Q.createElement("div",{className:"prototype_state_management_version_panel--versionControls--siAOf"},Q.createElement(nM.JU,{className:"prototype_state_management_version_panel--label--vvYMX"},1===a?Q.createElement(eO.Tx,{id:"proto.state_management.new_controls"}):Q.createElement(eO.Tx,{id:"proto.state_management.old_controls"}),Q.createElement("a",{target:"_blank",rel:"noopener",href:"https://help.figma.com/hc/articles/14397859494295",className:"prototype_state_management_version_panel--link--i5iDD blue_link--blueLink--9rlnd"},Q.createElement(eO.Tx,{id:"proto.state_management.controls_help_link"}))),Q.createElement("div",{className:"prototype_state_management_version_panel--buttonContainer--rJZ-y"},i))))}let ene="created_noodle";function ent(e){let{shouldHideTitle:t=!1,category:n,newActionIndexPath:a}=e,r=(0,eeh.YT)(),l=(0,eeh.Y0)(),{detailProps:i,detailPropsMultipleActions:o,interactionsOnSelectedNodesAndComponents:s,updateSelectionProperties:c,selectedInteractions:d}=(0,eed.Ay)(e.category);(0,ts.h)(()=>{if(void 0!==tW.sn.get(ene)){let e=tW.sn.stop(ene);(0,er.sx)(ene,{elapsedMs:e,numConnectors:d.length},{forwardToDatadog:!0})}});let u=null;if(r&&!l){let e=d.flatMap(e=>{var t;return null==(t=e.actions)?void 0:t.flatMap((e,t)=>"CONDITIONAL"===e.connectionType?t:[])});e.length>0&&null!==a&&(u=new eef.Op(e))}let{navigationType:m="NAVIGATE",connectionType:p="NONE",transitionType:_,easingType:f,easingFunction:h,transitionDuration:g,transitionShouldSmartAnimate:E,transitionPreserveScroll:v,transitionResetVideoPosition:y,openUrlInNewTab:b,transitionResetScrollPosition:C,transitionResetInteractiveComponents:w}=i,{interactionType:T="NONE",interactionMaintained:x=!1,interactionDuration:N=.3,keyTrigger:k=et2,transitionTimeout:S=.8,mediaHitTime:I=0}=o.interactionEvent,A=(0,eeh.hU)(_,f,h,g,E,v,y,b,C,w),P=(0,eeh.iC)(d),O=(0,eeh.LH)(P)&&etw.zZ.haveInteractionsBeenUpgraded(d),L=Q.createElement(et8,{interactionType:T,timeout:S,mediaHitTime:I,maintained:x,interactionDuration:N,keyTrigger:k,recordingKey:nh.Pt(e,"interactionPanel"),shouldHideTitle:t,interactionsOnSelectedNodes:s,category:n,stateManagementVersion:P,autoOpenVariablePicker:e.autoOpenVariablePicker,conditionalActionIndexPath:u,newActionIndexPath:a,resetNewActionIndexPath:e.resetNewActionIndexPath,onNewActionAdded:e.onNewActionAdded});return Q.createElement("div",null,L,(o.interactionActions.length>1||(0,eeh.Fp)(P,p,m))&&((0,eeh.kM)(P)||O)&&Q.createElement(et9,{transition:A,recordingKey:nh.Pt(e,"stateManagementVersionPanel"),updateSelectionProperties:c,stateManagementVersion:P,selectedInteractions:d}))}var enn=n(846963),ena=n(935973),enr=n(277687);let enl=()=>{eU.glU.setSelectedInteractions([]),lT.Y5.deselectProperty()},eni="prototypeInteractionEditModal",eno=Q.memo(function(){let e=(0,$.d4)(end),t=(0,eed.HS)(),{selectedInteractions:n}=(0,eed.Ay)(t),a=n.length>0,[r,l]=Q.useState(!1),i=nh.v_(eni,"keydown",t=>"Shift"!==t.key?nh.aH:(l(!0),e&&a)?void 0:nh.aH),o=nh.v_(eni,"keyup",t=>"Shift"!==t.key?nh.aH:(l(!1),e&&a)?void 0:nh.aH);if(Q.useEffect(()=>(document.addEventListener("keydown",i),document.addEventListener("keyup",o),()=>{document.removeEventListener("keydown",i),document.removeEventListener("keyup",o)}),[i,o]),!e||!a)return null;let s=n.some(e=>{var t;return null==(t=e.actions)?void 0:t.some(e=>"CONDITIONAL"===e.connectionType)});return Q.createElement(ens,{category:t,containsConditional:s,pressingShiftKey:r,initialX:e.initialX,initialY:e.initialY,shouldPin:e.shouldPin,setPressingShiftKey:l})}),ens=Q.memo(function({category:e,containsConditional:t,pressingShiftKey:n,initialX:a,initialY:r,shouldPin:l,setPressingShiftKey:i}){let o=(0,$.wA)(),[s,c]=Q.useState(!1),[,d]=(0,ef.fp)(ena.x),u=(0,Q.useRef)(null),[m,p]=Q.useState(!1),_=l||s,f=(0,eeh.YT)(),h=(0,eeh.Y0)(),g=f&&!h,{selectedInteractions:E,differentLengthActions:v,interactionsOnSelectedNodesAndComponents:y}=(0,eed.Ay)(e),{shouldShowAdvancedPrototypingPaywall:b,showAdvancedPrototypinglMultipleActionsModal:C}=(0,eeh.zt)(),w=n&&!_&&!m,T=t?(0,rT.jz)(tI.prototypeInteractionModalExpandedWidth):(0,rT.jz)(tI.prototypeInteractionModalWidth),x=T/2,[N,k]=Q.useState(l),S=(0,ez._X)({subscribeToUpdates_expensive:!l}),I=Q.useCallback(()=>{s||(o((0,TT._P)({name:"prototype_interaction_details_modal_dragged"})),c(!0))},[o,s,c]),A=Q.useMemo(()=>{let e=new lB.Mi(a,r);if(l)return t?new lB.Mi(e.x-32,e.y):e;{let t=(0,ez.$g)(S,e);return new lB.Mi(t.x-T/2,t.y+T/8)}},[T,a,r,t,l,S]);Q.useEffect(()=>{if(!n)return;let e=e=>{!e.shiftKey&&n&&i(!1)};return document.addEventListener("mousemove",e),()=>{document.removeEventListener("mousemove",e)}},[n,i]),Q.useEffect(()=>{d(w)},[d,w]),Q.useEffect(()=>{k(l)},[l]),Q.useEffect(()=>()=>{o((0,TT._P)({name:"prototype_interaction_details_modal_closed"}))},[o]);let P=Q.useRef(null),[O,L]=Q.useState(!1);Q.useEffect(()=>{var e;O&&(L(!1),null==(e=P.current)||e.scrollToBottom())},[O,L,P]);let[M,D]=Q.useState(new eef.Op([])),R=(0,t_.q5)(),F=Q.useCallback((e,t)=>{let n=e.event.clipboardData||window.clipboardData;switch(t){case w0.zy.COPY:case w0.zy.CUT:{let a=JSON.parse(JSON.stringify(E)),r=(0,enn.l)(a),l=hl.fG((null==R?void 0:R.key)||null,{prototypeInteractions:r});if(hl.C4(n,l,""),t===w0.zy.CUT){let e=[];for(let t of E){let{sourceNodeID:n,id:a}=t;n&&a&&e.push(eel.d({nodeID:n,interactionID:a}))}cU.l7.user("delete-prototype-interactions",()=>eU.glU.deleteInteractions(e)),lT.Y5.deselectProperty()}e.accept()}}},[null==R?void 0:R.key,E]),B=Q.useRef(!1),U=Q.createElement(ab.P,{className:et4,useBottomPinning:!0,ref:P,allowScrollAndZoomOver:!0,"data-not-draggable":!0},(0,eo.kc)().prototype_ai_auto_adv_proto&&Q.createElement(eep,null),Q.createElement(ent,{shouldHideTitle:!0,recordingKey:eni,category:e,autoOpenVariablePicker:B,newActionIndexPath:M,resetNewActionIndexPath:()=>{D(new eef.Op([]))},onNewActionAdded:e=>{D(e)}})),H=1===E.length,V=E[0],G=V.actions&&V.actions.length<2,K=V.actions&&1===V.actions.length&&V.actions[0],W=!K||"NONE"===K.connectionType,z=H&&G&&W;var j=ad.Hr;let Y=(0,ae.p8)("currentPage"),Z=Q.createElement(ee6,{skipPaywall:z,addButtonPressed:e=>{if(!E)return;if(("CONDITIONAL"===e.connectionType||"SET_VARIABLE"===e.connectionType||"SET_VARIABLE_MODE"===e.connectionType)&&b){C();return}"SET_VARIABLE"===e.connectionType&&B&&(B.current=!0);var t,n,a=null;if(v||z)for(var r=0;r<E.length;r++){let t=E[r];t.actions=[e];let n=t.id,a=t.sourceNodeID;(0,eeh.uU)(t.stateManagementVersion)&&n&&a&&etw.zZ.recordInteractionUpgraded(n,a),t.stateManagementVersion=1}else for(var r=0;r<E.length;r++){let l=E[r];l.actions?((0,eeh.uU)(l.stateManagementVersion)&&(l.id&&l.sourceNodeID&&etw.zZ.recordInteractionUpgraded(l.id,l.sourceNodeID),null==(t=l.actions)||t.forEach(e=>{e.transitionResetScrollPosition=!e.transitionPreserveScroll})),null==(n=l.actions)||n.push(e)):l.actions=[e],j=l.id?l.id:ad.Hr,l.stateManagementVersion=1,a=new eef.Op([l.actions.length-1])}let l=y.map(e=>E.find(t=>t.id===e.id)??e);lT.Y5.updateSelectionProperties({prototypeInteractions:l}),L&&L(!0),D&&D(a),o((0,TT._P)({name:"Prototype add action",params:{action:e.connectionType?e.connectionType:"NONE",source:"panel",connector_id:(0,ad.dI)(j),page_id:Y}}))},renderButton:!0,recordingKey:eni}),X=Q.createElement(nM.fI,null,Z),q=Q.createElement("div",{className:"prototype_interaction_edit_modal--ui3InteractionsPanelContentLeft--UYWSG"},Q.createElement(et5,{category:eei.J.NORMAL,headerButtons:Q.createElement(Q.Fragment,null)}),Q.createElement("div",{className:et7}),U,Q.createElement("div",{className:et7}),Q.createElement(Q.Fragment,null,X)),J=Q.createElement(nM.fI,null),ee=g?Q.createElement(Q.Fragment,null,q,Q.createElement("div",{className:"prototype_interaction_edit_modal--dividerVertical--Noi1C"}),J):U;return Q.createElement(ee_.ht.Provider,{value:Q.useMemo(()=>({autoCloseOnScroll:!_}),[_])},Q.createElement(gU.vL,{name:"Prototype Draggable modal",style:{height:"100%",width:"100%"},handleClipboard:F},Q.createElement(dn.vx,{ref:u,dataTestId:"in-context-prototype-interaction-edit-modal",title:t=>Q.createElement("div",{className:`prototype_interaction_edit_modal--onboardingRow--UlvE0 ${f?"prototype_interaction_edit_modal--ui3OnboardingRow--eEU26":void 0}`},Q.createElement(enc,{category:e,recordingKey:eni,createActionTrigger:Z,closeButton:t})),containerClassName:ea()({[et4]:!0,[et3]:g,[et6]:h,"prototype_interaction_edit_modal--abovePropertiesPanel--hFejC":N,"prototype_interaction_edit_modal--belowPropertiesPanel--f1Jfl":!N,"prototype_interaction_edit_modal--modalExpandedWidth--IDl6k":t&&!f,"prototype_interaction_edit_modal--modalWidth--cCH7B":!t&&!f,"prototype_interaction_edit_modal--hideModal--RSp-R":w}),contentContainerClassName:`${et4} ${f?g?et3:et6:void 0}`,headerClassName:"prototype_interaction_edit_modal--multilineInteractionDetailsHeader--OE8Wr",allowWheelPassthrough:!0,initialPosition:A,headerSize:"small",onClose:enl,recordingKey:"interactionDetailsModal",arrowPosition:l?void 0:dn.F_.TOP,arrowRelativeX:l?void 0:x,onDragStart:()=>{k(!0),I()},canRenderBelowViewport:!0,allowAutoExpanding:!0,dragHeaderOnly:!0,onFocus:()=>p(!0)},f?ee:U)))});function enc({category:e,recordingKey:t,closeButton:n,createActionTrigger:a}){let r=(0,$.wA)(),{selectedInteractions:l}=(0,eed.Ay)(e),i=(0,eeh.YT)(),o=(0,eeh.Y0)(),s=(()=>{if(1!==l.length)return 0;let e=l[0],t={nodeID:e.sourceNodeID,interactionID:e.id};return eU.X3B.getMatchingInteractions(eel.d(t)).length})(),c=(0,eo.kc)().prototype_hide_matching_noodles&&1===l.length&&s>1&&Q.createElement(dN.K,{as:"button",actionOnPointerDown:!0,tabIndex:-1,onClick:()=>{if(1!==l.length)return;let e=l[0],t={nodeID:e.sourceNodeID,interactionID:e.id},n=eU.X3B.getMatchingInteractions(eel.d(t));eU.glU.selectInteractionsAndSourceNodes(n);let a=(0,eO.t)("proto.interaction_details.visual_bell.selected_n_matching_interactions",{total_num_interactions:n.length});lT.Y5.showVisualBellWithUndo("selected-matching-noodles",a,!1),r((0,TT._P)({name:"prototype_select_matching_interactions",params:{num_connectors:n.length}}))},onMouseEnter:()=>{if(1!==l.length)return;let e=l[0],t={nodeID:e.sourceNodeID,interactionID:e.id},n=eU.X3B.getMatchingInteractions(eel.d(t));eU.glU.hoverInteractions(n)},onMouseLeave:()=>eU.glU.hoverInteractions([]),"data-tooltip-type":nO.Ib.TEXT,"data-tooltip":(0,eO.t)("proto.interaction_details.select_n_matching_interactions",{total_num_interactions:s}),"aria-label":(0,eO.t)("proto.interaction_details.select_n_matching_interactions",{total_num_interactions:s})},Q.createElement(nd.U,{fix_me_removeThisPropAndProvideUI3Icon:!0,svg:enr.A})),d=Q.createElement(et5,{category:e,recordingKey:t,headerButtons:Q.createElement(Q.Fragment,null,c,a,n)}),u=Q.createElement(Q.Fragment,null,Q.createElement(eO.Tx,{id:"proto.interaction_details.header"}),c,n),m=Q.createElement(Q.Fragment,null,Q.createElement(eO.Tx,{id:"proto.interaction_details.header"}),Q.createElement("div",{style:{display:"flex"}},c,a,n));return i&&!o?u:i?m:d}let end=e=>{var t;return(null==(t=e.pickerShown)?void 0:t.id)===eK.o$?e.pickerShown:null};var enu=n(862965),enm=n(498186),enp=n(337986),en_=n(649802),enf=n(970801),enh=n(985749),eng=n(598284);function enE(e){var t;let n=Q.useRef(null),a=(0,e_.Xr)(WU.fq),r=(0,ng.w)(n);(0,Q.useEffect)(()=>((null==r?void 0:r.height)&&a(r.height),()=>{a(0)}),[r,a]);let[l]=(0,ef.fp)(WU.Sf),i=null==(t=null==l?void 0:l.current)?void 0:t.getBoundingClientRect(),o=!!(i&&i.height>0),s=(0,Q.useMemo)(()=>o?{bottom:document.body.getBoundingClientRect().bottom-((null==i?void 0:i.bottom)||0)+((null==i?void 0:i.height)||0)+8}:null,[o,null==i?void 0:i.bottom,null==i?void 0:i.height]);return Q.createElement("div",{ref:n,style:{position:"fixed",left:0,right:0,width:"fit-content",margin:"auto",...s,bottom:72},className:ea()([enh.tT,eK.Dm])},Q.createElement(eny,null,e.children))}function env(e){return Q.createElement(enE,null,e.children)}function eny(e){var t;let[n]=(0,ef.fp)(WU.Sf),a=null==(t=null==n?void 0:n.current)?void 0:t.getBoundingClientRect(),r=(0,aX.U)(),{isRoot:l,pop:i,close:o}=(0,enp.c)();(0,enf.kz)(es.Uz.ESCAPE,()=>{r||(l?o():i())},!0);let s=Math.max((null==a?void 0:a.width)??0,396);return Q.createElement("div",{style:{maxWidth:eng.X,minWidth:s},className:eK.Dm},e.children)}var enb=n(697378),enC=n(818150),enw=n(302586),enT=n(531747),enx=n(815314);function enN(e){return Q.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},Q.createElement("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M10.838 5.316a.5.5 0 0 1-.28.65A8.35 8.35 0 0 0 7.28 8.281c-2.168 2.49-1.328 5.785.638 7.651 1.079 1.024 2.51 1.256 3.942.93.27-.062.54-.144.803-.243l-1.6-4.269a1 1 0 0 1 1.287-1.287l4.315 1.618c.252-.661.369-1.37.325-2.184-.082-1.333-.478-2.181-.999-2.705-.521-.525-1.224-.781-2.03-.82-1.643-.08-3.579.753-4.724 1.779a.5.5 0 1 1-.667-.745c1.304-1.169 3.488-2.128 5.439-2.033.99.048 1.953.37 2.691 1.113.738.743 1.196 1.848 1.288 3.352v.004a6.21 6.21 0 0 1-.387 2.59l.75.28a1 1 0 0 1-.11 1.907l-2.417.605-.605 2.418a1 1 0 0 1-1.906.108l-.299-.795a7.2 7.2 0 0 1-.931.281c-1.673.383-3.475.13-4.853-1.178l.34-.36-.34.36C5 14.541 3.905 10.636 6.527 7.624a9.349 9.349 0 0 1 3.662-2.59.5.5 0 0 1 .65.281Zm3.09 11.827.322.857.427-1.709.323-1.29.2-.05 1.091-.274.503-.125L18 14.25l-.825-.31-.824-.308-.125-.047-2.983-1.119L12 12l.466 1.243 1.108 2.954.355.946Z",clipRule:"evenodd"}))}var enk=n(258316),enS=n(202512),enI=n(424279),enA=n(939214),enP=n(842436),enO=n(206846),enL=n(145376),enM=n(550857),enD=n(52892),enR=n(217629),enF=n(205940),enB=n(497788),enU=n(566576),enH=n(700520);function enV(e){return Q.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},Q.createElement("circle",{cx:"12",cy:"12",r:"6.5",stroke:"var(--color-icon)",strokeLinejoin:"round"}),Q.createElement("path",{stroke:"var(--color-icon)",strokeLinecap:"round",strokeLinejoin:"round",d:"M12 8.5V12l2 2"}))}var enG=n(924525),enK=n(644409),enW=((W=enW||{}).DEFAULT="default",W.BRAND="brand",W);function enz({children:e,variant:t="default"}){let n=tw.cx.b1.flex.h16.py0.px4.font11.itemsCenter.justifyCenter.gap4.bRadius5.match(t,{default:tw.cx.colorBorder.colorTextSecondary,brand:tw.cx.colorBorderBg.colorTextBrand}).$;return Q.createElement("div",{className:n,"data-testid":"qav2-item-badge"},e)}function enj(){return Q.createElement(nc.N_,{className:tw.cx.hAuto.$,trusted:!0,href:"https://help.figma.com/hc/en-us/articles/16822138920343-Use-AI-tools-in-Figma#h_01HEK6QD9S2BPH65Y9TFV78P46",target:"_blank",onClick:e=>e.stopPropagation(),"data-tooltip":(0,eO.t)("qa.learn_more"),"data-tooltip-type":nO.Ib.TEXT,"data-tooltip-show-above":!0},Q.createElement(enz,null,Q.createElement(eO.Tx,{id:"qa.ai_beta"})))}function enY(){return Q.createElement("div",{className:tw.cx.colorBgTertiary.bRadius5.font11.h16.fontMedium.flex.itemsCenter.px4.$},Q.createElement(eO.Tx,{id:"whiteboard.ai_modal.hint_tab"}))}let enZ=(0,Q.forwardRef)(({value:e,onChange:t},n)=>{let a=(0,Q.useRef)(null);return(0,ts.h)(()=>{let e=null==n?void 0:n.current;e&&(e.focus(),e.setSelectionRange(e.value.length,e.value.length));let t=a.current;t&&t.scrollToBottom()}),(0,enm.C)(n),Q.createElement(ab.P,{height:88,ref:a},Q.createElement("div",{className:tw.cx.grid.borderBox.overflowWrapAnywhere.$,style:{paddingRight:"58px"}},Q.createElement("textarea",{className:tw.cx.resizeNone.borderBox.bgTransparent.overflowHidden.zIndex1.$,style:{gridArea:"1 / 1 / 2 / 2"},rows:3,value:e,onChange:e=>{t(e.target.value)},ref:n}),Q.createElement("div",{className:tw.cx.preWrap.invisible.borderBox.$,style:{gridArea:"1 / 1 / 2 / 2"}},e)))});function enX({value:e,onChange:t,suggestion:n,suggestionPills:a=[],promptHistory:r=[]}){let l=(0,Q.useRef)(null),i=n&&e!==n&&n.startsWith(e),o=(null==n?void 0:n.slice(e.length))||"",{isRoot:s,pop:c}=(0,enp.c)(),d=0===e.length&&a.length>0,u=(0,eo.kc)().first_draft_prompt_history&&r.length>0&&!e,m=(0,Q.useMemo)(()=>{let e=[];return r.length>0&&(e.push({type:"header",text:(0,eO.t)("first_draft.prompt_history_header")}),e.push(...r.map(e=>({type:"option",value:e,text:e})))),e},[r]);return(0,enf.kz)(es.Uz.TAB,()=>{i&&t(n)}),(0,enG.y)(e),Q.createElement("div",{className:ea()(tw.cx.borderBox.p4.mb8.colorBgSecondary.wFull.flex.gap8.bRadius5.$,tw.cx.relative.overflowHidden.$,eK.Dm)},!s&&Q.createElement("div",{className:tw.cx.h24.$},Q.createElement(dN.K,{onClick:c,"aria-label":(0,eO.t)("qa.go_back")},Q.createElement(fA.C,null))),Q.createElement("div",{className:tw.cx.flex1.relative.font13.$,style:{lineHeight:"22px",height:88}},Q.createElement("div",{className:tw.cx.absolute.top0.left0.right0.$},Q.createElement(enZ,{value:e,onChange:t,ref:l})),i&&Q.createElement("div",{className:ea()(tw.cx.absolute.top0.wFull.selectNone.eventsNone.colorTextTertiary.overflowWrapAnywhere.$,"prompt--promptBoxTextShimmer--sllh9"),style:{paddingRight:"58px"}},Q.createElement("span",{className:tw.cx.invisible.$},e),Q.createElement("span",{className:tw.cx.$},o),Q.createElement("span",{className:tw.cx.inlineFlex.itemsCenter.ml4.$},Q.createElement(enY,null))),Q.createElement("div",{className:tw.cx.absolute.$,style:{top:4,right:4}},Q.createElement(enj,null))),(d||u)&&Q.createElement("div",{className:ea()(tw.cx.wFull.flex.flexWrap.pre.pr8.gap8.$,tw.cx.absolute.zIndex1.$,tw.cx.overflowHidden.$),style:{bottom:8,left:8,height:24}},u&&Q.createElement(enK.rX,{iconSvg:Q.createElement(enV,{style:{marginLeft:-8,marginRight:-8}}),iconAriaLabel:(0,eO.t)("first_draft.prompt_history_label"),onSelectedChange:e=>t(e),selected:null,displayAboveTarget:!0,lean:"right",items:m}),d&&a.map((e,n)=>Q.createElement(Y4.$n,{key:n,variant:"secondary",onClick:()=>{var n;t(e.prompt),null==(n=l.current)||n.focus()}},e.label))))}function enq({prompt:e,onChangePrompt:t,onRun:n,suggestion:a,submitLabel:r,extraFooter:l}){return Q.createElement("div",{className:tw.cx.p8.borderBox.$},Q.createElement(enX,{value:e,onChange:t,suggestion:a}),Q.createElement(enH.B,{fullWidth:!0,justify:"space-between"},Q.createElement("div",null,l),Q.createElement(enU.r,{shortcuts:[{key:es.Uz.ENTER,modifier:[es.xH.META]}],onAction:n,disabled:0===e.length},r)))}var enJ=n(86721),enQ=n(93699),en$=((z=en$||{}).RUNNING="RUNNING",z.PARAMETERS="PARAMETERS",z.ITERATE="ITERATE",z.ERROR="ERROR",z);function en0({initialStep:e={type:"PARAMETERS"},makeCortexRequest:t,featureType:n}){let a=(0,enQ._I)(),[r,l]=Q.useState(null),[i,o]=Q.useState(null),[,s]=(0,ef.fp)(WU.Q8),[c,d]=Q.useState(e??{type:"PARAMETERS"}),u=Q.useRef(null),m=(0,d0.sZ)(),p=(0,d4.ol)(),_=function(){let e=(0,ae.eY)(),t=(0,ae.KH)();return(0,Q.useMemo)(()=>{let n=Object.keys(t);if(1!==n.length)return null;let a=e.get(n[0]);return(null==a?void 0:a.type)==="TEXT"&&a.characters?a:null},[e,t])}(),[f]=(0,ef.fp)(t_.ze),h=(0,ef.md)(DV.kS);async function g(e){if(!_)return;let l=r&&"ITERATE"===c.type?r:_.characters;try{let r=await t(l,e,{orgId:(null==m?void 0:m.id)??"",teamId:(null==p?void 0:p.id)??"",fileKey:f??"",userId:h??""});u.current=r;let i=new enR.c6(r);for await(let e of(cU.l7.ai("adjust-text",()=>{_.spliceCharacters(0,_.characters.length,"","BEFORE")}),i))cU.l7.ai("adjust-text",()=>{let{delta:t}=e;t&&_.spliceCharacters(0,_.characters.length,_.characters+t,"BEFORE")});d({type:"ITERATE"}),a(n)}catch(e){d({type:"ERROR",error:e})}finally{E()}}function E(){var e;null==(e=u.current)||e.cancel(),u.current=null}return(0,Q.useEffect)(()=>()=>{E()},[]),{resetText:function(){cU.l7.ai("adjust-text",()=>{_&&r&&_.spliceCharacters(0,_.characters.length,r,"BEFORE")})},lastParameters:i,step:c,setStep:d,onRun:function(e){o(e),l((null==_?void 0:_.characters)??null),d({type:"RUNNING"}),s(""),g(e)},cleanUp:E}}function en1(e){return Q.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},Q.createElement("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"m6.4 6.4.29-1.159c.08-.323.54-.323.62 0L7.6 6.4l1.158.29c.323.08.323.54 0 .62L7.6 7.6l-.29 1.158c-.08.323-.54.323-.62 0L6.4 7.6l-1.158-.29c-.323-.08-.323-.54 0-.62L6.4 6.4Zm10 10 .29-1.158c.08-.323.54-.323.62 0l.29 1.158 1.158.29c.323.08.323.54 0 .62l-1.158.29-.29 1.158c-.08.323-.54.323-.62 0L16.4 17.6l-1.158-.29c-.323-.08-.323-.54 0-.62l1.158-.29Zm-6.04-9.187-.674 2.473-2.473.674c-1.67.455-1.67 2.825 0 3.28l2.473.674.674 2.473c.455 1.67 2.825 1.67 3.28 0l.674-2.473 2.473-.674c1.67-.455 1.67-2.825 0-3.28l-2.473-.674-.674-2.473c-.455-1.67-2.825-1.67-3.28 0Zm.965.263L10.5 10.5l-3.024.825c-.688.187-.688 1.163 0 1.35l3.024.825.825 3.024c.187.688 1.163.688 1.35 0L13.5 13.5l3.024-.825c.688-.187.688-1.163 0-1.35L13.5 10.5l-.825-3.024c-.187-.688-1.163-.688-1.35 0Z",clipRule:"evenodd"}))}var en2=n(733462);function en5({handleInputEvent:e,parseRunEvent:t,makeCortexRequest:n,parameters:a,runningText:r,actionIcon:l,featureType:i}){let o=Q.useRef(null),{step:s,cleanUp:c,onRun:d,resetText:u}=en0({makeCortexRequest:n,featureType:i}),{close:m}=(0,enp.c)(),p=(0,eO.t)("fullscreen_actions.quick_actions.translate-text");switch(s.type){case en$.RUNNING:return Q.createElement(enJ.F,null,r);case en$.PARAMETERS:return Q.createElement(en2.ch,{parameters:a,displayName:p,parameterOnly:!0,actionIcon:l??Q.createElement(en1,null),terminate:c,hideOnRun:!1,handler:{triggerParameterInputEvent:e,triggerRunEvent:e=>{let n=t(e);n&&(d(n),o.current=n)}},triggeredFrom:"quick-actions"});case en$.ERROR:return Q.createElement(enF.Eb,{buttons:[{type:enF.ft.TRY_AGAIN,callback:()=>{if(o.current)d(o.current);else throw Error("Last parameters is null")}}],error:s.error,messageOverrides:{[enF.BQ.CONTENT_LENGTH_LIMIT]:Q.createElement(eO.Tx,{id:"ai_text_tools.translate.content_length_exceeded"})}});case en$.ITERATE:return Q.createElement(enB.O,{iterateOptions:[{type:enB.i.UNDO,callback:()=>{u(),m()}}]});default:(0,re.xb)(s)}}var en4=n(23078),en3=n(476812),en6=n(210097);function en7(e){let t={label:(0,eO.t)("first_draft.light"),value:"light"},n={label:(0,eO.t)("first_draft.dark"),value:"dark"},[a,r]=Q.useState(t),l=[{type:"checkableOption",value:t,text:t.label},{type:"checkableOption",value:n,text:n.label}];return Q.createElement(dn.vx,{title:(0,eO.t)("first_draft.theme"),onClose:e.onClose,initialPosition:e.initialPosition},Q.createElement("div",{className:tw.cx.borderBox.p16.flex.flexColumn.gap16.$,style:{width:224}},Q.createElement(enK.ms,{selected:a,onSelectedChange:e=>r(e),placeholder:(0,eO.t)("first_draft.theme"),labelForSelectedItem:e=>e.label,displayAboveTarget:!0,items:l})))}var en8=((j=en8||{})[j.READY_FOR_PROMPT=0]="READY_FOR_PROMPT",j[j.RUNNING=1]="RUNNING",j[j.FINISHED=2]="FINISHED",j);function en9(){let e=(0,enQ.GE)(enL.JT.FIRST_DRAFT_MAKE_CHANGES),[t,n]=Q.useState(""),[a,r]=Q.useState(null),{close:l}=(0,enp.c)(),i=Q.useRef(null),o=(0,eF.VW)(),[s,c]=Q.useState(0),d=Q.useCallback(async()=>{c(1),await (0,lU.fm)(5e3),e(),c(2)},[e]);return 1===s?Q.createElement(en6.y,null,Q.createElement(enH.B,{justify:"space-between",align:"center",fullWidth:!0},Q.createElement(en3.R,null,Q.createElement(eO.Tx,{id:"first_draft.making_changes"})),Q.createElement(enU.r,{variant:"secondary",shortcuts:[{key:es.Uz.ESCAPE}]},Q.createElement(eO.Tx,{id:"first_draft.stop"})))):2===s?Q.createElement(en6.y,null,Q.createElement(enH.B,{justify:"space-between",align:"center",fullWidth:!0},Q.createElement(enH.B,{gap:4,align:"center"},Q.createElement(OE.g,null),Q.createElement("span",{className:tw.cx.textBodyMediumStrong.$},Q.createElement(eO.Tx,{id:"first_draft.done"}))),Q.createElement(enH.B,null,Q.createElement(enU.r,{onAction:()=>{c(0)},variant:"secondary"},Q.createElement(eO.Tx,{id:"first_draft.make_changes"})),Q.createElement(enU.r,{onAction:l,shortcuts:[{key:es.Uz.ENTER,modifier:[es.xH.META]}]},Q.createElement(eO.Tx,{id:"first_draft.keep_it"}))))):Q.createElement(Q.Fragment,null,Q.createElement("div",{className:tw.cx.p8.borderBox.$,ref:i},Q.createElement(enX,{value:t,onChange:n,suggestion:(null==o?void 0:o.isFirstDraftBuildingBlock)?"Use more modern examples":"Change the theme to dark red"}),Q.createElement(enH.B,{fullWidth:!0,justify:"space-between"},Q.createElement(en4.l,{variant:"secondary",onClick:()=>{let e=i.current;if(!e)return;let t=e.getBoundingClientRect(),n=t.left+t.width+10,a=t.top-100;r(new lB.Mi(n,a))},iconSuffix:Q.createElement(C1.r,null)},Q.createElement(eO.Tx,{id:"first_draft.theme"})),Q.createElement(enU.r,{shortcuts:[{key:es.Uz.ENTER,modifier:[es.xH.META]}],onAction:d,disabled:!((null==o?void 0:o.isFirstDraft)||(null==o?void 0:o.isFirstDraftBuildingBlock))||0===t.length},Q.createElement(eO.Tx,{id:"first_draft.make_changes"})))),a&&Q.createElement(en7,{initialPosition:a,onClose:()=>r(null)}))}function eae(e){return Q.createElement("svg",{width:"16",height:"16",fill:"none",viewBox:"0 0 16 16",...e},Q.createElement("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M7.3 5.164a3.5 3.5 0 0 0-3.6 0l-.2.12v5.85a4.5 4.5 0 0 1 4 0v-5.85l-.2-.12Zm1.2.12v5.85a4.5 4.5 0 0 1 4 0v-5.85l-.2-.12a3.5 3.5 0 0 0-3.6 0l-.2.12Zm-.286 7.168a.51.51 0 0 0 .043-.023l.442-.265a3.5 3.5 0 0 1 3.602 0l.442.265a.5.5 0 0 0 .757-.44V5.01a.497.497 0 0 0-.252-.443l-.433-.26a4.5 4.5 0 0 0-4.63 0L8 4.416l-.185-.11a4.5 4.5 0 0 0-4.63 0l-.434.26a.498.498 0 0 0-.251.446v6.98a.497.497 0 0 0 .377.493.498.498 0 0 0 .38-.056l.442-.265a3.5 3.5 0 0 1 3.602 0l.442.265a.509.509 0 0 0 .4.05.51.51 0 0 0 .07-.027Z",clipRule:"evenodd"}))}var eat=n(137035),ean=n(406879),eaa=n(643702),ear=n(429729),eal=n(415448),eai=n(82671),eao=n(506237),eas=n(14450);function eac(e,t){if("string"==typeof e&&1===t.parsedDefs.length){let n=t.parsedDefs[0].devFriendlyProp;if("key"in n)return{[n.key]:e}}return e}function ead(e,t){if(t in e)return e[t];for(let[n,a]of Object.entries(e))if(n.toLowerCase()===t.toLowerCase())return a}async function eau(e,t,n){var a;let r=tN.qo.instance,l={componentProps:{},componentPropsNested:{},sharedPluginData:{...null==e?void 0:e.sharedPluginData}};for(let i of t.parsedDefs){let o=function e(t,n){let a;if("object"==typeof t){switch(n.type){case"SIMPLE":case"IMAGE":case"GROUPED_INSTANCE_SWAP":t&&(a=ead(t,n.key));break;case"SIMPLE_CHOICE":if(t&&n.key in t){let e=ead(t,n.key);n.validOptions.includes(e)?a=e:(0,ar.xi)("first-draft",`Expected ${n.key} to be oneOf: ${JSON.stringify(n.validOptions)} but got: ${e}`,{componentProps:t,devFriendlyProp:n})}break;case"DERIVED_BOOLEAN":a=!!e(t,n.devFriendlyProp);break;case"ARRAY":if(t){let e=ead(t,n.key);Array.isArray(e)&&(a=e[n.index])}break;default:(0,re.xb)(n)}if(void 0===a)return a;switch(n.valueType){case"BOOLEAN":if("boolean"==typeof a)break;return;case"STRING":if("string"==typeof a)break;return}return a}}(e,i.devFriendlyProp);if(void 0===o){if("ARRAY"===i.devFriendlyProp.type||"GROUPED_INSTANCE_SWAP"===i.def.type)for(let e of(0,eai.wn)(t.componentId,i))l.sharedPluginData.nestedInstancesToHide=l.sharedPluginData.nestedInstancesToHide||[],l.sharedPluginData.nestedInstancesToHide.push(e);continue}switch(i.def.type){case"NESTED_INSTANCE":{let e=(0,eal.Ye)(i.def.componentId);if(e){o=eac(o,e);let a=await eau(o,e,n);for(let e of(0,eai.wn)(t.componentId,i))l.componentPropsNested[e]=a}break}case"BOOLEAN":case"VARIANT":case"TEXT":l.componentProps[i.rawProp]=o;break;case"INSTANCE_SWAP":{let e=(0,eas.cl)(i.def.defaultValue),r=(0,eal.Ye)(i.def.defaultValue);if(e&&r){let s=eac(o,r),c=[];if(null==(a=e.parentNode)?void 0:a.isStateGroup){for(let t of e.parentNode.reversedChildrenNodes)if("SYMBOL"===t.type){let e=t.variantProperties();if(e&&Object.entries(e).some(([e,t])=>s[e]===t)&&Object.entries(e).every(([e,t])=>!(e in s)||s[e]===t)){c=Object.keys(e),l.componentProps[i.rawProp]=t.guid;break}}}let d=Object.fromEntries(Object.entries(s).filter(([e,t])=>!c.includes(e)));if(0!==Object.keys(d).length){let e=await eau(d,r,n),a=(0,eai.wn)(t.componentId,i);for(let n of(0===a.length&&(0,ar.xi)("first-draft","Could not find any instances for this prop",{componentId:t.componentId,def:JSON.stringify(i.def)}),a))l.componentPropsNested[n]=e}}break}case"GROUPED_INSTANCE_SWAP":{let e=(0,eas.cl)(i.def.defaultValue);if(e&&"SYMBOL"===e.type){let t=!1,n="object"==typeof o?(null==o?void 0:o.type)??"":null;if(n){let a=(0,eao.Lq)(i.def.groupName,e,n);if(a){t=!0,l.componentProps[i.rawProp]=a;break}}if(!t){let e=(null==o?void 0:o.description)??(null==o?void 0:o.type)??"";e&&(l.sharedPluginData[i.rawProp]=e)}}break}case"IMAGE":{let e=(null==o?void 0:o.alt)??"";l.sharedPluginData[i.rawProp]=e;break}case"SLOT":{let e=Array.isArray(o)?o[0]:o;if(!e)break;let a=n.getCustomElementOrNull(e.type);if((null==a?void 0:a.type)==="SIMPLE"){let r=a.typeInfo;l.componentProps[i.rawProp]=r.defaultNodeId;let o=await eau(e.props,r,n);for(let e of(0,eai.wn)(t.componentId,i))l.componentPropsNested[e]=o}else{let t=await n.createNodeFromJSX(e),a=cU.l7.ai("first-draft-setup-slot-node",()=>{let e=r.get(eU.CUU.createSymbolFromNode(t.guid,eU.Sie.PLUGIN));return e&&(e.name=`Slot for ${i.rawProp}`),e});if(a){let e=await n.getOrCreateSlotParent(n);cU.l7.ai("first-draft-setup-slot-node",()=>{e.appendChild(a)}),l.componentProps[i.rawProp]=a.guid}}break}default:(0,re.xb)(i.def)}}return l}function eam(e,t){let n={},a={};for(let r of e){let e=(0,eao.vR)(r);if(e){a[e]=a[e]||[],a[e].push(r);continue}if(t&&Object.entries(t).length>0){let e=t[r.jsxName];if(!e||"error"===e.status||r.key!==e.key)continue}n[r.jsxName]={type:"SIMPLE",name:r.jsxName,typeInfo:r}}for(let[e,t]of Object.entries(a)){let a=(0,eao.PJ)(e);n[a]={type:"GROUP",name:a,typeInfoArr:t}}return n}async function eap(e,t,n){if(!e)return null;let{type:a,props:r,children:l}=t;try{switch(e.type){case"SIMPLE":{let t=e.typeInfo,a=t.defaultNodeId,i=await eau({...r,children:l},t,n);return{type:"Instance",props:{componentId:a,componentProps:i.componentProps,componentPropsNested:i.componentPropsNested,sharedPluginData:Object.fromEntries(Object.entries({...i.sharedPluginData,type:t.jsxName}).map(([e,t])=>"string"!=typeof t?[e,JSON.stringify(t)]:[e,t]))},children:[]}}case"GROUP":throw Error("Not Implemented.");default:(0,re.xb)(e)}}catch(e){(0,ar.$D)(ao.e.FEEDBACK,e,{extra:{type:a,props:r}})}return null}let ea_=["1152x896","1216x832","1344x768","1536x640","1024x1024","640x1536","768x1344","832x1216","896x1152"],eaf=["2048x2048","2304x1792","1792x2304","2688x1536"],eah=["1024x1024","768x1152","1152x768","768x1280","1280x768","896x1152","1152x896","768x1408","1408x768","640x1408","1408x640","1152x640","1173x640"];function eag(e){let[t,n]=e.split("x").map(e=>parseInt(e,10));return{width:t,height:n}}function eaE(e,t){let n=(0,eo.kc)().first_draft_use_firefly,a=(0,eo.kc)().first_draft_use_aws_titan,r=ea_;n&&(r=eaf),a&&(r=eah);let l=r[0],i=1/0;return r.forEach(n=>{let{width:a,height:r}=eag(n),o=Math.abs(e/t-a/r);o<i&&(i=o,l=n)}),{...eag(l),string:l}}let eav=e=>({prompt_data:e.altText,negative_prompt_data:"blurry, bad",cfg_scale:10,seed:Math.floor(1e4*Math.random()),steps:50,style_preset:e.stylePreset,height:e.size.height,width:e.size.width,additionalPrefix:""});async function eay(e){let t=eav(e);return(0,eo.kc)().first_draft_native_routes?(await enR.Ay.design.firstDraftGenerateImage({...t},(0,eas.Lp)())).image:(await enR.Ay.design.firstDraftExternalProxy({endpoint:"image-gen",data:t},(0,eas.Lp)())).image}async function eab(e){let t=await enR.Ay.design.generateImageFirefly({prompt:e.altText,height:e.size.height,width:e.size.width},(0,eas.Lp)()),n=await fetch(t).then(e=>e.arrayBuffer());return"data:image/png;base64,"+(0,lA.H9)(new Uint8Array(n))}async function eaC(e){try{let t=await enR.Ay.openai.completeChat({model:"gpt-3.5-turbo-0125",messages:[{role:"system",content:"you are a marketer trying to generate images using a Generative AI model. You get the alt text of images and you need to reply with a new alt text that will increase the chances the prompt will not be blocked by safety filters. For example remove proper names or copyright or brand references."},{role:"user",content:e}],stream:!1,max_tokens:4096,use_cache:!0});if(t.choices.length>0&&null!=t.choices[0].message.content)return t.choices[0].message.content;return e}catch(t){return console.error(`Error: ${t.message}`),(0,ar.$D)(ao.e.EDITOR_AI,t),e}}async function eaw(e,t=!0){let n=e.altText;t&&(n=await eaC(e.altText));let a=(await enR.Ay.design.generateImages({prompt:n,negativePrompt:"blurry, bad",cfgScale:8,seed:Math.floor(1e4*Math.random()),height:e.size.height,width:e.size.width,numImages:1},(0,eas.Lp)())).images[0];return`data:image/png;base64,${a}`}async function eaT(e,t="sdxl"){return"firefly"===t?await eab(e):"awsTitan"===t?await eaw(e):await eay(e)}async function eax(e){await new Promise(t=>setTimeout(t,e))}async function eaN({fromVal:e,toVal:t,duration:n,mutateFn:a}){let r=Math.floor(n/16),l=t-e;if(l<.2)return;let i=0;for(;i++<r;)a(e+l*(1-Math.pow(1-i/r,4))),await eax(16)}async function eak(e,t){var n;let a=tN.qo.instance,r=eU.XJn.getInsertionLocation();cU.l7.ai("first-draft-position-node",()=>{e.relativeTransform={...e.relativeTransform,m02:r.x,m12:r.y}});let l=eU.NfO.getViewportZoomScale();eU.NfO.scrollAndZoomIntoView([e.guid]);let i=a.getCurrentPage();cU.l7.ai("first-draft-position-node",()=>{i&&(i.directlySelectedNodes=[e])}),(null==(n=t.insertBehavior)?void 0:n.endsWith("-ease"))&&await eaN({fromVal:l,toVal:1,duration:300,mutateFn:e=>{eU.NfO.setViewportZoomScale(e)}})}function eaS(e){"FRAME"===e.type&&cU.l7.ai("first-draft-auto-fill-parent",()=>{var t;let n=null==(t=e.childrenNodes[0])?void 0:t.size.x;if(n&&"VERTICAL"===e.stackMode)for(let t of(e.resizeWithConstraints(n,e.size.y),e.stackCounterSizing="FIXED",e.childrenNodes))try{t.minWidth=n,t.stackChildAlignSelf="STRETCH"}catch(e){(0,ar.$D)(ao.e.FEEDBACK,e)}})}function eaI(e){let t=e.parentNode;for(;t;){if(t.getSharedPluginData("jsx","isDone"))return!0;t=t.parentNode}return!1}function eaA(e){return"true"===e.getSharedPluginData("jsx","isDone")||eaI(e)}function eaP(e){let t=new Set;for(let n of("INSTANCE"===e.type&&eaA(e)&&t.add(e.guid),(0,eas.Au)(e.guid,["INSTANCE"])))eaA(n)&&t.add(n.guid);return Array.from(t)}function eaO(e,t){cU.l7.ai("first-draft-detach-generation",()=>{"LIBRARY"===e.type&&t&&eU.XJn.detachGeneratedDesign(t)})}async function eaL(e){let t=tN.qo.instance,n=t.get(e);if(!n||!n.symbolId)return null;let a=t.get(n.symbolId);if(!a)return null;let r=(0,eal.Ye)(a.guid);if(!r)return null;let l=[];for(let i of r.parsedDefs)if("IMAGE"===i.def.type){let r=i.def.guidsByParentComponentId[a.guid];if(!r){(0,ar.xi)("first-draft","Could not find an image guid on the main component",{instanceNodeId:e,mainComponentId:a.guid,guidsByParentComponentId:i.def.guidsByParentComponentId});continue}let o=t.get(r);if(!o){(0,ar.xi)("first-draft","No component sublayer found for",{guidOnMainComponent:r});continue}let s=o.getSublayerIdForInstanceOfSymbol(n.guid);if(!s){(0,ar.xi)("first-draft","No image sublayer id found for",{guid:n.guid});continue}let c=t.get(s);if(!c){(0,ar.xi)("first-draft","No image node found for",{imageNodeId:s});continue}let d=i.rawProp,u=n.getSharedPluginData("jsx",d)??"";if(!u){(0,ar.xi)("first-draft","No alt text found for image",{rawProp:d});continue}let m={altText:u,stylePreset:"photographic",size:eaE(c.size.x,c.size.y)};try{l.push(new Promise(async(e,t)=>{try{await eaM(c,m)}catch(e){return(0,ar.$D)(ao.e.FEEDBACK,e),t(e)}finally{return e(c.guid)}}))}catch(e){(0,ar.$D)(ao.e.FEEDBACK,e)}}return await Promise.all(l)}let eaM=async(e,t)=>{let n=(0,eo.kc)().first_draft_use_firefly,a=(0,eo.kc)().first_draft_use_aws_titan,r="sdxl";n&&(r="firefly"),a&&(r="awsTitan");let l=await eaT(t,r);await (0,eas.RW)(e,l,t.altText)};async function eaD(e,t){if(!t){(0,ar.$D)(ao.e.FEEDBACK,Error("Need to supply a design system kit to replace icons from"),{extra:{nodeIds:e,dsKitKey:t}});return}let n=tN.qo.instance;for(let r of e){var a;let e=n.get(r);if(!e||"INSTANCE"!==e.type)continue;let l=e.componentPropertyReferences(),i=null==l?void 0:l.mainComponent;if(!i)continue;let o=e.parentNode;for(;o&&"INSTANCE"!==o.type;)o=o.parentNode;if(!o||!o.componentProperties()[i])continue;let s=o.getSharedPluginData("jsx",i);if(!s)continue;if("LIBRARY"===t.type){await eaR(e,s,t.key);continue}let{info:c}=(0,eal.oq)({rootNodes:{dsKitKey:t}}),d=(a=eao.C,eam(c)[(0,eao.PJ)(a)]??null);if(!d||"GROUP"!==d.type){(0,ar.xi)("first-draft","Could not find custom element for icon group",{componentInfo:c});return}let u=eU.XJn.getKitKey(t.pageId);if(!u)return;await eaF(e,d,s,u)}}async function eaR(e,t,n){let a,r;if(!e.symbolId)return;let l=tN.qo.instance,i=l.get(e.symbolId);if(!i||i.isState)return;if((0,eo.kc)().first_draft_native_routes){if(!(r=(await ear.G.getFirstDraftMatchGroup({kit_key:n,is_local:!1,group_name:eao.C,description:t})).data.meta.key)){(0,ar.$D)(ao.e.FEEDBACK,Error("first-draft: Grouped components: Could not find component key for grouped component"),{extra:{kitKey:n,iconDescription:t,mainComponentId:i.guid}});return}a=await lH.Eo.getCanvas({canvas_url:`/component/${r}/canvas`})}else{let e=eU.Egt.getAssetKeyForPublish(i.guid),{serialized:l,componentKey:o}=await enR.Ay.design.firstDraftExternalProxy({endpoint:"match-group/canvas",method:"POST",data:{kitKey:n,isLocal:!1,componentKey:e,description:t}},(0,eas.Lp)());a=(0,eaa.D4)(l),r=o}if(!a||!r)return;let o=eU.NfO.deserializeProductComponentFromBuffer(r,a),s=l.get(o);s&&"SYMBOL"===s.type&&cU.l7.ai("first-draft-swap-grouped-component",()=>{e.swapComponent(s)})}async function eaF(e,t,n,a){if("GROUP"!==t.type)return!1;let r=(await ear.G.getFirstDraftMatchGroup({kit_key:a,is_local:!0,group_name:eao.C,description:n})).data.meta.key;if(!r)return;let l=tN.qo.instance,i=t.typeInfoArr.find(e=>e.key===r);if(i){let t=l.get(i.defaultNodeId);t&&"SYMBOL"===t.type&&e.swapComponent(t)}}function eaB(e){if(!tN.qo.instance.get(e))throw Error("Node not found");let[t,n]=eU.XJn.updateFDSceneFromNode(e),a=new tN.qo(tN.ju.FIRST_DRAFT).get(n);if(!a)throw Error("Copied node not found");let r=[];for(let e=0;e<4;e++)r.push(eU.Vzr.generateThumbnailForNode(n,0,0,1,{inFirstDraftScene:!0,type:"UNCOMPRESSED",scale:184/a.size.x})),cU.l7.ai("first-draft-set-fill",()=>{for(let t of a.childrenNodes)t.fillPaints={data:[{type:"SOLID",color:{r:0===e?1:0,g:1===e?1:0,b:2===e?1:0,a:1},visible:!0,opacity:1,blendMode:"NORMAL"}],blobs:[]}});return a.removeSelfAndChildren(),r.map(e=>(0,lW.Pv)(e[1],new lB.Mi(e[0].width,e[0].height)))}var eaU=n(806817);let eaH=d5.M4.Query({fetch:async()=>(0,eo.kc)().first_draft_native_routes?(await ear.G.getFirstDraftAllKits()).data.meta.kits:(await enR.Ay.design.firstDraftExternalProxy({endpoint:"design-system-kits",method:"GET",data:{}},(0,eas.Lp)())).sets});var eaV=n(341408),eaG=n(671521),eaK=n(897459);let eaW=/^\[(?:([a-z-]+):)?(.+)\]$/i;function eaz(e){let t=eaW.exec(e);if(t&&t[2].endsWith("px")){let e=t[2].slice(0,t[2].length-2);return eaK.y$.isInteger(e)?Number(e):null}return null}let eaj=/\s+/;function eaY(e){return eaZ(`${e}${e}`)}function eaZ(e){return Math.min(Math.max(parseInt(e,16)/255,0),1)}function eaX(e,t,n,a=1){return isNaN(e)||isNaN(t)||isNaN(n)||isNaN(a)?null:{r:e,g:t,b:n,a}}function eaq(e){let t=e.a??1,n=Math.round(255*e.r).toString(16),a=Math.round(255*e.g).toString(16),r=Math.round(255*e.b).toString(16),l=Math.round(255*t).toString(16);return 1===n.length&&(n="0"+n),1===a.length&&(a="0"+a),1===r.length&&(r="0"+r),1===l.length&&(l="0"+l),"#"+n+a+r+(1!==t?l:"")}async function eaJ(e,t,n){var a;if(!t||"LOCAL"===t.type)throw Error("Can only insert library components");if(!(0,eo.kc)().first_draft_native_routes){let n={kitKey:t.key,componentJSXName:e},{serialized:a,componentKey:r}=await enR.Ay.design.firstDraftExternalProxy({endpoint:"component/canvas?"+Object.keys(n).map(e=>encodeURIComponent(e)+"="+encodeURIComponent(n[e])).join("&"),method:"GET",data:{}},(0,eas.Lp)()),l=(0,eaa.D4)(a);return eU.NfO.deserializeProductComponentFromBuffer(r,l),r}let r=tN.qo.instance,l=(null==(a=el.D)?void 0:a.getState().fileVersion)||0;if(!(0,eo.kc)().first_draft_new_insert_api)return await eaQ(e,t.key,r,l);if(!n)return(0,ar.$D)(ao.e.FEEDBACK,Error("[First Draft] Attempted to insert component without kitContents")),{status:"error"};let i=function(e,t){let n=t.toLowerCase();if(e.components[n]){let t=e.components[n];return{assetType:"component",key:t.key,version:t.version}}if(e.state_groups[n]){let t=e.state_groups[n];return{assetType:"state_group",key:t.key,version:t.version}}return null}(n,e);if(!i)return{status:"error"};let{assetType:o,key:s,version:c}=i;try{let e=await (0,i1.GD)(`/api/file_proxy/${o}/${s}/version/${c}/canvas`,{fv:l.toString()},{responseType:"arraybuffer"}),t=new Uint8Array(e.response),n=eU.NfO.deserializeProductComponentFromBuffer(s,t),a=r.get(n);if(!a)throw Error("Deserialized component not found in scene graph");return{status:"success",key:s,jsxName:(0,eai.WG)(a.name)}}catch(e){if(e instanceof i1.Dr&&e.status>=400)return{status:"error"};throw e}}async function eaQ(e,t,n,a){var r,l;try{let[i,o]=await Promise.all([(0,i1.GD)(`/api/assets/first_draft/${t}/jsx/${e}/status`),(0,i1.GD)(`/api/file_proxy/first_draft/${t}/jsx/${e}/canvas`,{fv:a.toString()},{responseType:"arraybuffer"})]),s=null==(l=null==(r=null==i?void 0:i.data)?void 0:r.meta)?void 0:l.asset_key,c=new Uint8Array(o.response),d=eU.NfO.deserializeProductComponentFromBuffer(s,c),u=n.get(d);if(!u)throw Error("Deserialized component not found in scene graph");return{status:"success",key:s,jsxName:(0,eai.WG)(u.name)}}catch(e){if(e instanceof i1.Dr&&e.status>=400)return{status:"error"};throw e}}async function ea$(e){await new Promise(t=>{setTimeout(()=>{t()},e)})}async function ea0(e,t,n,a=()=>!0){let r=(await enR.Ay.design.firstDraftExternalProxyStream({endpoint:e,data:t},(0,eas.Lp)())).getReader(),l=[];try{for(;;){let e=r.read(),{done:t,value:i}=await e;if(t)break;l.push(i||"");let o=l.join("");if(!a())break;n(o)}}finally{r.releaseLock()}}async function ea1(e,t,n=()=>!0){let a=(await enR.Ay.design.firstDraftGenerateStream(e,(0,eas.Lp)())).getReader(),r=[];try{for(;;){let e=a.read(),{done:l,value:i}=await e;if(l)break;r.push(i||"");let o=r.join("");if(!n())break;t(o)}}finally{a.releaseLock()}}async function ea2(e){if((0,eo.kc)().first_draft_theme_v5){let t=e.themeProperties;if(!t)throw Error("themeProperties is required");return(await ear.G.postFirstDraftGenerateThemeV5({userPrompt:e.userPrompt,themeProperties:t})).data.meta}return await enR.Ay.design.firstDraftGenerateThemeV2(e,(0,eas.Lp)())}function ea5(e){return Object.keys(e).reduce((t,n)=>(t[n.toLowerCase()]=e[n],t),{})}function ea4(e){return Object.fromEntries(Object.entries(e).map(([e,t])=>[t,e]))}let ea3={none:1,tight:1.25,snug:1.375,normal:1.2,relaxed:1.625,loose:2},ea6={3:12,4:16,5:20,6:24,7:28,8:32,9:36,10:40},ea7={px:1,0:0,"0.5":2,1:4,"1.5":6,2:8,"2.5":10,3:12,"3.5":14,4:16,5:20,6:24,7:28,8:32,9:36,10:40,11:44,12:48,14:56,16:64,20:80,24:96,28:112,32:128,36:144,40:160,44:176,48:192,52:208,56:224,60:240,64:256,72:288,80:320,96:384},ea8={0:0,xs:320,sm:384,md:448,lg:512,xl:576,"2xl":672,"3xl":768,"4xl":896,"5xl":1024,"6xl":1152,"7xl":1280},ea9={none:0,"":4,sm:2,md:6,lg:8,xl:12,"2xl":16,"3xl":24,full:9999},ere={black:"#000000",white:"#ffffff","slate-50":"#f8fafc","slate-100":"#f1f5f9","slate-200":"#e2e8f0","slate-300":"#cbd5e1","slate-400":"#94a3b8","slate-500":"#64748b","slate-600":"#475569","slate-700":"#334155","slate-800":"#1e293b","slate-900":"#0f172a","slate-950":"#020617","gray-50":"#f9fafb","gray-100":"#f3f4f6","gray-200":"#e5e7eb","gray-300":"#d1d5db","gray-400":"#9ca3af","gray-500":"#6b7280","gray-600":"#4b5563","gray-700":"#374151","gray-800":"#1f2937","gray-900":"#111827","gray-950":"#030712","neutral-50":"#fafafa","zinc-100":"#f4f4f5","zinc-200":"#e4e4e7","zinc-300":"#d4d4d8","zinc-400":"#a1a1aa","zinc-500":"#71717a","zinc-600":"#52525b","zinc-700":"#3f3f46","zinc-800":"#27272a","zinc-900":"#18181b","zinc-950":"#09090b","neutral-100":"#f5f5f5","neutral-200":"#e5e5e5","neutral-300":"#d4d4d4","neutral-400":"#a3a3a3","neutral-500":"#737373","neutral-600":"#525252","neutral-700":"#404040","neutral-800":"#262626","neutral-900":"#171717","neutral-950":"#0a0a0a","stone-50":"#fafaf9","stone-100":"#f5f5f4","stone-200":"#e7e5e4","stone-300":"#d6d3d1","stone-400":"#a8a29e","stone-500":"#78716c","stone-600":"#57534e","stone-700":"#44403c","stone-800":"#292524","stone-900":"#1c1917","stone-950":"#0c0a09","red-50":"#fef2f2","red-100":"#fee2e2","red-200":"#fecaca","red-300":"#fca5a5","red-400":"#f87171","red-500":"#ef4444","red-600":"#dc2626","red-700":"#b91c1c","red-800":"#991b1b","red-900":"#7f1d1d","red-950":"#450a0a","orange-50":"#fff7ed","orange-100":"#ffedd5","orange-200":"#fed7aa","orange-300":"#fdba74","orange-400":"#fb923c","orange-500":"#f97316","orange-600":"#ea580c","orange-700":"#c2410c","orange-800":"#9a3412","orange-900":"#7c2d12","orange-950":"#431407","amber-50":"#fffbeb","amber-100":"#fef3c7","amber-200":"#fde68a","amber-300":"#fcd34d","amber-400":"#fbbf24","amber-500":"#f59e0b","amber-600":"#d97706","amber-700":"#b45309","amber-800":"#92400e","amber-900":"#78350f","amber-950":"#451a03","yellow-50":"#fefce8","yellow-100":"#fef9c3","yellow-200":"#fef08a","yellow-300":"#fde047","yellow-400":"#facc15","yellow-500":"#eab308","yellow-600":"#ca8a04","yellow-700":"#a16207","yellow-800":"#854d0e","yellow-900":"#713f12","yellow-950":"#422006","lime-50":"#f7fee7","lime-100":"#ecfccb","lime-200":"#d9f99d","lime-300":"#bef264","lime-400":"#a3e635","lime-500":"#84cc16","lime-600":"#65a30d","lime-700":"#4d7c0f","lime-800":"#3f6212","lime-900":"#365314","lime-950":"#1a2e05","green-50":"#f0fdf4","green-100":"#dcfce7","green-200":"#bbf7d0","green-300":"#86efac","green-400":"#4ade80","green-500":"#22c55e","green-600":"#16a34a","green-700":"#15803d","green-800":"#166534","green-900":"#14532d","green-950":"#052e16","emerald-50":"#ecfdf5","emerald-100":"#d1fae5","emerald-200":"#a7f3d0","emerald-300":"#6ee7b7","emerald-400":"#34d399","emerald-500":"#10b981","emerald-600":"#059669","emerald-700":"#047857","emerald-800":"#065f46","emerald-900":"#064e3b","emerald-950":"#022c22","teal-50":"#f0fdfa","teal-100":"#ccfbf1","teal-200":"#99f6e4","teal-300":"#5eead4","teal-400":"#2dd4bf","teal-500":"#14b8a6","teal-600":"#0d9488","teal-700":"#0f766e","teal-800":"#115e59","teal-900":"#134e4a","teal-950":"#042f2e","cyan-50":"#ecfeff","cyan-100":"#cffafe","cyan-200":"#a5f3fc","cyan-300":"#67e8f9","cyan-400":"#22d3ee","cyan-500":"#06b6d4","cyan-600":"#0891b2","cyan-700":"#0e7490","cyan-800":"#155e75","cyan-900":"#164e63","cyan-950":"#083344","sky-50":"#f0f9ff","sky-100":"#e0f2fe","sky-200":"#bae6fd","sky-300":"#7dd3fc","sky-400":"#38bdf8","sky-500":"#0ea5e9","sky-600":"#0284c7","sky-700":"#0369a1","sky-800":"#075985","sky-900":"#0c4a6e","sky-950":"#082f49","blue-50":"#eff6ff","blue-100":"#dbeafe","blue-200":"#bfdbfe","blue-300":"#93c5fd","blue-400":"#60a5fa","blue-500":"#3b82f6","blue-600":"#2563eb","blue-700":"#1d4ed8","blue-800":"#1e40af","blue-900":"#1e3a8a","blue-950":"#172554","indigo-50":"#eef2ff","indigo-100":"#e0e7ff","indigo-200":"#c7d2fe","indigo-300":"#a5b4fc","indigo-400":"#818cf8","indigo-500":"#6366f1","indigo-600":"#4f46e5","indigo-700":"#4338ca","indigo-800":"#3730a3","indigo-900":"#312e81","indigo-950":"#1e1b4b","violet-50":"#f5f3ff","violet-100":"#ede9fe","violet-200":"#ddd6fe","violet-300":"#c4b5fd","violet-400":"#a78bfa","violet-500":"#8b5cf6","violet-600":"#7c3aed","violet-700":"#6d28d9","violet-800":"#5b21b6","violet-900":"#4c1d95","violet-950":"#2e1065","purple-50":"#faf5ff","purple-100":"#f3e8ff","purple-200":"#e9d5ff","purple-300":"#d8b4fe","purple-400":"#c084fc","purple-500":"#a855f7","purple-600":"#9333ea","purple-700":"#7e22ce","purple-800":"#6b21a8","purple-900":"#581c87","purple-950":"#3b0764","fuchsia-50":"#fdf4ff","fuchsia-100":"#fae8ff","fuchsia-200":"#f5d0fe","fuchsia-300":"#f0abfc","fuchsia-400":"#e879f9","fuchsia-500":"#d946ef","fuchsia-600":"#c026d3","fuchsia-700":"#a21caf","fuchsia-800":"#86198f","fuchsia-900":"#701a75","fuchsia-950":"#4a044e","pink-50":"#fdf2f8","pink-100":"#fce7f3","pink-200":"#fbcfe8","pink-300":"#f9a8d4","pink-400":"#f472b6","pink-500":"#ec4899","pink-600":"#db2777","pink-700":"#be185d","pink-800":"#9d174d","pink-900":"#831843","pink-950":"#500724","rose-50":"#fff1f2","rose-100":"#ffe4e6","rose-200":"#fecdd3","rose-300":"#fda4af","rose-400":"#fb7185","rose-500":"#f43f5e","rose-600":"#e11d48","rose-700":"#be123c","rose-800":"#9f1239","rose-900":"#881337","rose-950":"#4c0519"},ert={0:0,5:.05,10:.1,20:.2,25:.25,30:.3,40:.4,50:.5,60:.6,70:.7,75:.75,80:.8,90:.9,95:.95,100:1},ern={thin:100,extralight:200,light:300,normal:400,medium:500,semibold:600,bold:700,extrabold:800,black:900},era={xs:12,sm:14,base:16,lg:18,xl:20,"2xl":24,"3xl":30,"4xl":36,"5xl":48,"6xl":60,"7xl":72,"8xl":96,"9xl":128};function err(e){let t=e.slice(1).join("-");if("transparent"===t)return[];let n=t.split("/"),a=n[0],r=n[1]??"",l=ere[a]??function(e){let t=eaW.exec(e);return t&&t[2].startsWith("#")?t[2]:null}(a);if(!l||!l.match(/^#?[0-9a-f]{3,8}$/i))return null;if(!r||!ert[r])return l;let i=function(e,t=!1,n=1){let a=/[^0-9a-f]*([0-9a-f]*)/i.exec(e.trim());if(!a)return null;let r=a[1];if(r.length>=8&&t)return eaX(eaZ(r.substring(0,2)),eaZ(r.substring(2,4)),eaZ(r.substring(4,6)),eaZ(r.substring(6,8)));if(7===r.length&&t)return eaX(eaZ(r.substring(0,2)),eaZ(r.substring(2,4)),eaZ(r.substring(4,6)),eaY(r[6]));if(r.length>=6)return eaX(eaZ(r.substring(0,2)),eaZ(r.substring(2,4)),eaZ(r.substring(4,6)),n);if(5===r.length&&t)return eaX(eaY(r[0]),eaY(r[1]),eaY(r[2]),eaZ(r.substring(3,5)));if(4===r.length&&t)return eaX(eaY(r[0]),eaY(r[1]),eaY(r[2]),eaY(r[3]));if(r.length>=3)return eaX(eaY(r[0]),eaY(r[1]),eaY(r[2]),n);if(2===r.length){let e=eaZ(r);return eaX(e,e,e,n)}else if(1===r.length){let e=eaY(r);return eaX(e,e,e,n)}return null}(l);return i&&ert[r]&&(i.a=ert[r]??1),i}function erl(...e){return(0,eaK.QP)(e.join(" "))}ea4(ea7),ea4(era),ea4(ea9),ea4(ern),ea4(ere),ea4(ea6);let eri={Unhandled:function({className:e,msg:t=""}){return{type:"AutoLayout",props:{className:`flex justify-center items-center ${e} border bg-red-100 border-red-100 `},children:[{type:"Text",props:{},children:[t]}]}},VStack:function({children:e,className:t=""}){return{type:"AutoLayout",props:{className:erl("flex flex-col items-start w-fit h-fit",t)},children:e}},HStack:function({children:e,className:t=""}){return{type:"AutoLayout",props:{className:erl("flex flex-row items-start w-full h-fit",t)},children:e}},Box:erm,div:erm,p:({children:e,...t})=>({type:"Text",props:{width:"fill-parent",...t},children:e})},ero=new Set(["AutoLayout","Frame","Rectangle","Ellipse","Text","SVG","Image","Line","Fragment","Span","Instance"]);async function ers(e,t,n){if((null==t?void 0:t.type)==="Text"||(null==t?void 0:t.type)==="Span")return e.trim();let a=(null==t?void 0:t.props)??{};return await eru({type:"Text",props:{width:"hug-contents",height:"hug-contents",...a},children:[e]},t,n)}async function erc(e,t,n){let{type:a,props:r,children:l}=e;if(r&&"class"in r&&!("className"in r)&&(r.className=r.class,delete r.class),(""===a||"React.Fragment"===a)&&(a="VStack"),a=n.normalizeElementType(a),(null==r?void 0:r.children)&&(l=Array.isArray(null==r?void 0:r.children)?null==r?void 0:r.children:[null==r?void 0:r.children],delete r.children),l=(l??[]).flat(10),a in eri){let e=eri[a]({...r,children:l});return await eru(e,t,n)}let i=await Promise.all((l??[]).flat(10).map(t=>eru(t,e,n)));if("Instance"===a&&n.getCustomElementOrNull(r.component)&&(a=r.component,delete r.component),n.getCustomElementOrNull(a)){let e=await n.renderCustomJSXElementOrNull({type:a,props:r,children:i});if(e)return e}if(!ero.has(a))return((0,ar.$D)(ao.e.FEEDBACK,Error("Encountered unknown node type in JSX"),{extra:{node:e}}),(0,eo.kc)().first_draft_show_unhandled)?await eru({type:"Unhandled",props:{type:a,msg:`Unknown node type: ${a}`,className:(null==r?void 0:r.className)??""},children:[]},t,n):null;let{className:o,margin:s,...c}=r??{};if(o)for(let[e,t]of Object.entries(function(e,t){let n={},a=(0,eaK.QP)(e),r=a.includes("flex-col")?"vertical":"horizontal";for(let e of a.split(eaj)){let{classParts:a,isNegative:l}=function(e){let t=!1,n=e.split("-");return""===n[0]&&1!==n.length&&(t=!0,n.shift()),{classParts:n,isNegative:t}}(e);!function(e,t,n){let a=()=>{let n=ea7[e[1]]??eaz(e[1])??0;return t?-1*n:n};switch(e[0]){case"p":n.padding={top:a(),bottom:a(),left:a(),right:a()};break;case"pt":n.padding=n.padding||{},n.padding.top=a();break;case"pb":n.padding=n.padding||{},n.padding.bottom=a();break;case"pl":n.padding=n.padding||{},n.padding.left=a();break;case"pr":n.padding=n.padding||{},n.padding.right=a();break;case"py":n.padding=n.padding||{},n.padding.top=a(),n.padding.bottom=a();break;case"px":n.padding=n.padding||{},n.padding.left=a(),n.padding.right=a()}}(a,l,n),function(e,t,n){let a=()=>{let n=ea7[e[1]]??eaz(e[1])??0;return t?-1*n:n};switch(e[0]){case"m":n.margin={top:a(),bottom:a(),left:a(),right:a()};break;case"mt":n.margin=n.margin||{},n.margin.top=a();break;case"mb":n.margin=n.margin||{},n.margin.bottom=a();break;case"ml":n.margin=n.padding||{},n.margin.left=a();break;case"mr":n.margin=n.margin||{},n.margin.right=a();break;case"my":n.margin=n.margin||{},n.margin.top=a(),n.margin.bottom=a();break;case"mx":n.margin=n.margin||{},n.margin.left=a(),n.margin.right=a()}}(a,l,n),function(e,t){if("rounded"!==e[0])return;let n=()=>{let t=e.length-1;return ea9[e[t]]??eaz(e[t])??0};if(1===e.length){t.cornerRadius={topLeft:4,topRight:4,bottomLeft:4,bottomRight:4};return}if(2===e.length){t.cornerRadius={topLeft:n(),topRight:n(),bottomLeft:n(),bottomRight:n()};return}switch(t.cornerRadius=t.cornerRadius||{},e[1]){case"t":t.cornerRadius.topLeft=n(),t.cornerRadius.topRight=n();break;case"e":case"r":t.cornerRadius.bottomRight=n(),t.cornerRadius.topRight=n();break;case"b":t.cornerRadius.bottomRight=n(),t.cornerRadius.bottomLeft=n();break;case"s":case"l":t.cornerRadius.bottomLeft=n(),t.cornerRadius.topLeft=n();break;case"ss":case"tl":t.cornerRadius.topLeft=n();break;case"se":case"tr":t.cornerRadius.topRight=n();break;case"es":case"bl":t.cornerRadius.bottomLeft=n();break;case"ee":case"br":t.cornerRadius.bottomRight=n()}}(a,n),function(e,t,n){if("bg"!==e[0]&&"text"!==e[0]||n&&("bg"===e[0]&&"Text"===n||"text"===e[0]&&"Text"!==n))return;let a=err(e);a&&(t.fill=a)}(a,n,t??""),"opacity"===a[0]&&(n.opacity=ert[a[1]]??function(e){let t=eaW.exec(e);if(t&&t[2]){let e=t[2];return eaK.y$.isNumber(e)?Number(e):null}return null}(a[1])??1),function(e,t){if("flex"===e[0])switch(e[1]){case"nowrap":t.wrap=!1;break;case"wrap":t.wrap=!0;break;case"row":case"row-reverse":t.direction="horizontal";break;case"col":case"col-reverse":t.direction="vertical"}}(a,n),function(e,t){if("leading"===e[0]){let n=(()=>{let t=e.length-1,n=ea3[e[t]];if("normal"===e[t])return"auto";if(n)return`${(100*n).toFixed(0)}%`;let a=ea6[e[t]];if(a)return a;let r=eaz(e[t]);if(r)return r;let l=function(e){let t=eaW.exec(e);if(t&&t[2].endsWith("%")){let e=t[2].slice(0,t[2].length-1);return eaK.y$.isInteger(e)?Number(e):null}return null}(e[t]);return l?`${l.toFixed(0)}%`:null})();n&&(t.lineHeight=n)}}(a,n),function(e,t,n){if("justify"===e[0]){let a="vertical"===t?"verticalAlignItems":"horizontalAlignItems";switch(e[1]){case"start":n[a]="start";break;case"end":n[a]="end";break;case"center":n[a]="center";break;case"between":n.spacing="auto"}}if("items"===e[0]){let a="vertical"===t?"horizontalAlignItems":"verticalAlignItems";switch(e[1]){case"start":n[a]="start";break;case"end":n[a]="end";break;case"center":n[a]="center";break;case"baseline":"horizontal"===t&&(n[a]="baseline")}}}(a,r,n),function(e,t,n){let a=()=>"full"===e[1]?"fill-parent":"fit"===e[1]?"hug-contents":ea7[e[1]]??eaz(e[1])??void 0;if("w"===e[0]){let e=a();void 0!==e&&("Line"===n?t.length=e:t.width=e);return}if("h"===e[0]){let e=a();void 0!==e&&(t.height=e)}}(a,n,t??""),function(e,t){let n=()=>{let t=e.length-1;return"max"===e[0]&&"w"===e[1]&&ea8[e[t]]?ea8[e[t]]:ea7[e[t]]??eaz(e[t])??void 0};if("min"===e[0]){if("w"===e[1]){let e=n();void 0!==e&&(t.minWidth=e);return}if("h"===e[1]){let e=n();void 0!==e&&(t.minHeight=e);return}}if("max"===e[0]){if("w"===e[1]){let e=n();void 0!==e&&(t.maxWidth=e);return}if("h"===e[1]){let e=n();void 0!==e&&(t.maxHeight=e)}}}(a,n),function(e,t,n){if("Text"===n||"border"!==e[0])return;let a=()=>{"stroke"in t||(t.stroke="#000000")};if(1===e.length){t.strokeWidth=1,a();return}if(2===e.length&&eaK.y$.isInteger(e[1])){switch(e[1]){case"0":t.strokeWidth=0,a();break;case"2":t.strokeWidth=2,a();break;case"4":t.strokeWidth=4,a();break;case"6":t.strokeWidth=6,a();break;case"8":t.strokeWidth=8,a()}return}let r=err(e);r&&(t.stroke=r)}(a,n,t??""),function(e,t){if("text"===e[0]){let n=(()=>{let t=e.length-1;return era[e[t]]??eaz(e[t])})();n&&(t.fontSize=n)}}(a,n),function(e,t){if("font"===e[0]){let n=(()=>{let t=e.length-1;return ern[e[t]]})();n&&(t.fontWeight=n)}}(a,n),function(e,t){switch(e){case"italic":t.italic=!0;break;case"not-italic":t.italic=!1;break;case"underline":t.textDecoration="underline";break;case"linethrough":t.textDecoration="strikethrough";break;case"uppercase":t.textCase="upper";break;case"lowercase":t.textCase="lower";break;case"capitalize":t.textCase="title";break;case"normal-case":t.textCase="original"}}(e,n),function(e,t){if(e.startsWith("text-"))switch(e){case"text-left":t.horizontalAlignText="left";break;case"text-center":t.horizontalAlignText="center";break;case"text-right":t.horizontalAlignText="right";break;case"text-justify":t.horizontalAlignText="justified"}if(e.startsWith("align-"))switch(e){case"align-top":t.verticalAlignText="top";break;case"align-middle":t.verticalAlignText="center";break;case"align-bottom":t.verticalAlignText="bottom"}}(e,n),function(e,t,n){if("gap"!==e[0])return;let a=(()=>{let n=e.length-1,a=ea7[e[n]]??eaz(e[n])??void 0;return t?-1*a:a})();if(void 0!==a){if(2===e.length){n.spacing={horizontal:a,vertical:a};return}switch(n.spacing=n.spacing||{},e[1]){case"x":n.spacing.horizontal=a;break;case"y":n.spacing.vertical=a}}}(a,l,n),function(e,t,n){let a=()=>{let n=e.length-1,a=ea7[e[n]]??eaz(e[n])??0;return t?-1*a:a};switch(e[0]){case"top":n.y={type:"top",offset:a()};break;case"left":n.x={type:"left",offset:a()};break;case"bottom":n.y={type:"bottom",offset:a()};break;case"right":n.x={type:"right",offset:a()}}}(a,l,n)}return n}(o,a)))c[e]=t;return{type:a,props:c,children:i}}async function erd(e,t){return await Promise.all(e.map(e=>eru(e,null,t)))}function eru(e,t,n){return"string"==typeof e?ers(e,t,n):erc(e,t,n)}function erm({className:e,children:t,...n}){return{type:"AutoLayout",props:{direction:"vertical",...n,className:e},children:t}}var erp=n(127124),er_=n(230255),erf=n(994152);function erh(e,t,n){if(n<100)return(0,erf.z_)(e,t);let a=(0,erf.jA)(e,n)||{r:0,g:0,b:0,a:1};return{...(0,erf.f9)(a),a:t.a}}function erg(e){let t=(0,erf.Wn)(e);return null===t?0:(0,xL.qE)(t,0,1e3)}let erE={spacing:"number",cornerRadius:"number",fontFamily:"string",color:"color"};function erv(e){return{type:"SOLID",color:e,visible:!0,opacity:e.a,blendMode:"NORMAL"}}function ery(e,t,n,a){return t.map(t=>{var r,l,i,o,s,c,d;if("SOLID"===t.type&&(null==(l=null==(r=t.colorVar)?void 0:r.value)?void 0:l.alias)){if(!n)return t;let r=null==(i=t.colorVar.value)?void 0:i.alias;if(!r)return t;let l=(0,er_.dI)(r),u=e.resolveVariable(l);if(!u||u.resolvedType!==eU.rXF.COLOR)return t;let m=function(e){if(!("object"==typeof e&&"r"in e&&"g"in e&&"b"in e&&"a"in e))throw Error(`Unexpected VariableValue: Expected type RGBA, got value=${JSON.stringify(e)}`);if(!(0,ty.YR)(e))throw Error(`Invalid color value: ${JSON.stringify(e)}`);return e}(u.value);if(!((null==(o=n.variableMaps)?void 0:o.colorVariableMap)||n.accentColor||n.darkMode||a))return erv(m);let p=(s=eU.XJn.getCustomizableVariableName(e.guid,l)??null,(0,eo.kc)().first_draft_theme_v5?s?null==(d=null==(c=n.variableMaps)?void 0:c.colorVariableMap)?void 0:d[s]:void 0:n.accentColor);if(a&&"non-solid"!==a&&(!(0,eo.kc)().first_draft_theme_v5||!p)){let e=(0,ty.HD)(a)?ty.UE:ty.Uv;return erv(erh(a,{...e,a:m.a},erg(e)))}return"non-solid"===a?erv(m):erv(function(e,t,n){let a=(void 0===n.darkMode?e&&(0,ty.HD)(t)!==(0,ty.HD)(e):n.darkMode)?function(e){let t=erg(e),n=(0,erf.jA)(e,Math.abs(1e3-Math.min(1e3,t)))||{r:0,g:0,b:0,a:1};return(0,ty.tK)(eaq({...n,a:e.a}))}(t):t,r=erg(a);return(0,eo.kc)().first_draft_theme_v5?e?erh(e,a,r):a:e&&n.accentColor&&n.accentColor?erh(n.accentColor,a,r):a}(p,m,n))}return t})}function erb(e,t,n){let a=eU.XJn.getCustomizableVariableName(n.guid,e.id);if(a)return t[a]}function erC(e,t){if(!(0,eo.kc)().first_draft_theme_v5||!t||!e.boundVariables)return;let n=e.boundVariables.bottomLeftRadius||e.boundVariables.bottomRightRadius||e.boundVariables.topLeftRadius||e.boundVariables.topRightRadius;if(n){let a=e.resolveVariable(n.id);a&&a.resolvedType===eU.rXF.FLOAT&&cU.l7.ai("first-draft-override-radius",()=>{var a;!function(e){switch(e.type){case"FRAME":case"INSTANCE":case"SYMBOL":case"RECTANGLE":e.setBoundVariable("topLeftRadius",null),e.setBoundVariable("topRightRadius",null),e.setBoundVariable("bottomRightRadius",null),e.setBoundVariable("bottomRightRadius",null)}}(e);let r=e.cornerRadius;(null==(a=t.variableMaps)?void 0:a.numberVariableMap)&&(r=erb(n,t.variableMaps.numberVariableMap,e)??e.cornerRadius),function(e,t){switch(e.type){case"FRAME":case"INSTANCE":case"SYMBOL":case"RECTANGLE":e.rectangleTopLeftCornerRadius=t,e.rectangleTopRightCornerRadius=t,e.rectangleBottomRightCornerRadius=t,e.rectangleBottomLeftCornerRadius=t;break;case"ELLIPSE":case"REGULAR_POLYGON":case"STAR":e.cornerRadius=t}}(e,r)})}}function erw(e,t,n){cU.l7.ai("first-draft-override-paints",()=>{let a=e.fillPaintsOrMixed,r="mixed"===a?"mixed":a.data;if(r instanceof Array){let a=ery(e,r,t,n);e.fills=a,"TEXT"===e.type&&e.characters.length>0&&e.setRangeFillPaints(0,e.characters.length,{data:a,blobs:[]})}if(e.strokePaints.data instanceof Array){let a=ery(e,e.strokePaints.data,t,n);e.strokePaints={data:a.map(e=>e),blobs:[]}}})}let erT={itemSpacing:"stackSpacing",paddingTop:"stackTopPadding",paddingBottom:"stackBottomPadding",paddingLeft:"stackLeftPadding",paddingRight:"stackRightPadding"};async function erx(e,t){let n=eU.XJn.inheritedTextStyleGuid(e.guid);if(null===n)return;let a=tN.qo.instance.get(n);if(a&&t){cU.l7.ai("first-draft-set-font-family",()=>{e.setBoundVariable("fontFamily",null)});let n=function(e,t,n){var a;let r=null==(a=n.variableMaps)?void 0:a.stringVariableMap;if(!r)return null;if("fontFamily"in t.boundVariablesForStyle){let n=t.boundVariablesForStyle.fontFamily;if(!n)return null;let a=eU.XJn.getCustomizableVariableName(e.guid,n.id);return a?r[a]:null}return null}(e,a,t);if(n){let t={family:n,style:a.fontName.style,postscript:a.fontName.postscript};try{await (0,erp.EV)(t),cU.l7.ai("first-draft-set-font-name",()=>{e.fontName=t})}catch{let t={family:n,style:"Regular",postscript:a.fontName.postscript};await (0,erp.EV)(t),cU.l7.ai("first-draft-set-regular-font-name",()=>{e.fontName=t})}}}}function erN(e){if(e.fills instanceof Array){if(!e.fills.every(e=>"SOLID"===e.type))return"non-solid";let t=e.fills.filter(e=>"SOLID"===e.type);if(t.length>0)for(let e=t.length-1;e>=0;e--){let n=t[e];if(n.visible)return{a:n.opacity??1,...n.color}}}}async function erk(e,t,n){await Promise.all(e.childrenNodes.map(e=>erS(e,t,n)))}async function erS(e,t,n){switch(e.type){case"FRAME":case"INSTANCE":case"SYMBOL":!function(e,t){if((0,eo.kc)().first_draft_theme_v5&&("HORIZONTAL"===e.stackMode||"VERTICAL"===e.stackMode))for(let[n,a]of Object.entries(erT)){let r=e.boundVariables&&e.boundVariables[n];if(!r)return;let l=e.resolveVariable(r.id);l&&l.resolvedType===eU.rXF.FLOAT&&cU.l7.ai("first-draft-override-spacing",()=>{var l;if(e.setBoundVariable(n,null),null==(l=null==t?void 0:t.variableMaps)?void 0:l.numberVariableMap){let n=erb(r,t.variableMaps.numberVariableMap,e)??void 0;n&&(e[a]=n)}})}}(e,t),erC(e,t),erw(e,t),await erk(e,t,erN(e)??n);break;case"BOOLEAN_OPERATION":erw(e,t),await erk(e,t,erN(e)??n);break;case"RECTANGLE":case"ELLIPSE":case"REGULAR_POLYGON":case"STAR":erC(e,t),erw(e,t);break;case"TEXT":erw(e,t,n),erx(e,t);break;case"VECTOR":case"LINE":erw(e,t,n)}}let erI="Slot Parent";async function erA(e){var t;for(let e of(null==(t=tN.qo.instance.getCurrentPage())?void 0:t.reversedChildrenNodes)??[])if(e.name===erI)return e;return await e.createNodeFromJSX({type:"AutoLayout",props:{name:erI,className:"flex flex-col w-fit h-fit"},children:[]})}async function erP(e,t){return await erd(e,t)}async function erO(e,t){let n=(0,wh.D)();n.skipInvisibleInstanceChildren=!0;let a=tN.qo.instance;return await Promise.all(e.map(async e=>{let r=await n.createNodeFromJSXAsync(e),l=a.get(r.id);return l&&(null==t?void 0:t.autoFillParent)&&eaS(l),l}))}async function erL(e,t,n){for(let a of e)cU.l7.ai("first-draft-set-plugin-data",()=>{if(n.frameName&&a.name!==n.frameName&&(a.name=n.frameName),t&&a.setSharedPluginData("plugin_playground","jsx",t),n.sharedPluginData)for(let[e,t]of Object.entries(n.sharedPluginData))a.setSharedPluginData("plugin_playground",e,t)}),a&&(null==n?void 0:n.autoFillParent)&&eaS(a),await erS(a,n.theme),cU.l7.ai("first-draft-set-plugin-data",()=>{if(n.postInsertNodeChangeMap)for(let[e,t]of Object.entries(n.postInsertNodeChangeMap))try{a[e]=t}catch{}})}async function erM({prevJsxJSON:e,jsxStr:t,jsxJSON:n,options:a}){let r=tN.qo.instance,l=(0,wh.D)();l.skipInvisibleInstanceChildren=!0;let i=function(e){let{info:t}=(0,eal.oq)({rootNodes:{dsKitKey:e.dsKitKey},options:{reuseCache:!!e.prevNodeId}}),n=eam(t,e.componentNameToKey),a=Object.fromEntries(Object.keys(n).map(e=>[e.toLowerCase(),e])),r={normalizeElementType:e=>n[e]||!e.toLowerCase().startsWith("component")?e:a[e.toLowerCase()]??e,getCustomElementOrNull:e=>n[e]??null,renderCustomJSXElementOrNull:async e=>await eap(n[e.type],e,r),getOrCreateSlotParent:erA,createNodeFromJSX:async t=>{let n=await erP([t],r),[a]=await erO(n,e);return a}};return r}(a);if(!a.prevNodeId){if(0!==e.length)throw Error("prevJsxJSON should be null");let l=await erP(n,i),[o]=await erO(l,a);if(l.length>1)throw Error("Not implemented");return cU.l7.ai("first-draft-insert-jsx",()=>{if(a.parentNodeId){let e=r.get(a.parentNodeId);if(!e)throw(0,ar.x1)("first-draft","Could not find parent node with parentNodeId",{parentNodeId:a.parentNodeId}),Error("Could not find parent node with parentNodeId");let t=[o];for(let n of(t.reverse(),t))e.appendChild(n)}}),await erL([o],t,a),await eak(o,a),{insertNodeIds:[o.guid]}}let o=r.get(a.prevNodeId);if(!o)throw(0,ar.x1)("first-draft","Could not find node with prevNodeId",{prevNodeId:a.prevNodeId}),Error("Could not find node with prevNodeId");let[s,c]=await Promise.all([erP(e,i),erP(n,i)]);if(1!==s.length||1!==c.length)throw Error("Not implemented");let d=await l.reconcileNodeFromJSXAsync({id:o.guid},s[0],c[0]),u=r.get(d.id);return await erL([u],t,a),u.guid!==a.prevNodeId&&await eak(u,a),{insertNodeIds:[u.guid]}}let erD=(e,t)=>t(e).body.map(e=>erR(e)),erR=(e,t)=>{switch(e.type){case"JSXAttribute":if(null===e.value)return!0;return erR(e.value,t);case"JSXElement":case"JSXFragment":return erU(e,t);case"JSXExpressionContainer":return erR(e.expression,t);case"JSXText":return e.value.replace(/\s+/g," ").trim();case"JSXArrayExpression":return e.elements.map(e=>erR(e,t));case"JSXObject":let n={};for(let t of e.properties)t.key&&t.value&&(n[t.key.name||t.key.value]=erR(t.value));return n;case"ArrayExpression":return e.elements.map(e=>erR(e,t));case"BinaryExpression":switch(e.operator){case"-":return erR(e.left)-erR(e.right);case"!=":return erR(e.left)!=erR(e.right);case"!==":return erR(e.left)!==erR(e.right);case"*":return erR(e.left)*erR(e.right);case"**":return erR(e.left)**erR(e.right);case"/":return erR(e.left)/erR(e.right);case"%":return erR(e.left)%erR(e.right);case"+":return erR(e.left)+erR(e.right);case"<":return erR(e.left)<erR(e.right);case"<=":return erR(e.left)<=erR(e.right);case"==":return erR(e.left)==erR(e.right);case"===":return erR(e.left)===erR(e.right);case">":return erR(e.left)>erR(e.right);case">=":return erR(e.left)>=erR(e.right)}return;case"CallExpression":let a=erR(e.callee);if(void 0===a){(0,ar.$D)(ao.e.FEEDBACK,Error("The CallExpression could not be resolved, resulting in an undefined return value."),{extra:{expression:e}});return}return a(...e.arguments.map(t=>erR(t,e.callee)));case"ConditionalExpression":return erR(e.test)?erR(e.consequent):erR(e.alternate);case"ExpressionStatement":return erR(e.expression);case"Identifier":if(t&&e.name in t)return t[e.name];return({})[e.name];case"Literal":return e.value;case"LogicalExpression":let r=erR(e.left);if("||"===e.operator&&r)return r;if("&&"===e.operator&&r||"||"===e.operator&&!r)return erR(e.right);return!1;case"MemberExpression":return erF(e,t);case"ObjectExpression":let l={};return e.properties.forEach(e=>{l[e.key.name||e.key.value]=erR(e.value)}),l;case"TemplateElement":return e.value.cooked;case"TemplateLiteral":return[...e.expressions,...e.quasis].sort((e,t)=>e.start<t.start?-1:1).map(e=>erR(e)).join("");case"UnaryExpression":switch(e.operator){case"+":return e.argument.value;case"-":return-e.argument.value;case"!":return!e.argument.value}return;case"ArrowFunctionExpression":return(e.async||e.generator)&&(0,ar.$D)(ao.e.FEEDBACK,Error("Async and generator arrow functions are not supported.")),(...t)=>{let n={};return e.params.forEach((e,a)=>{n[e.name]=t[a]}),erR(e.body,n)}}},erF=(e,t)=>{var n,a;let{object:r}=e,l=[(null==(n=e.property)?void 0:n.name)??JSON.parse((null==(a=e.property)?void 0:a.raw)??'""')];if("Literal"!==e.object.type)for(;r&&["MemberExpression","Literal"].includes(null==r?void 0:r.type);){let{property:e}=r;r.computed?l.unshift(erR(e,t)):l.unshift((null==e?void 0:e.name)??JSON.parse((null==e?void 0:e.raw)??'""')),r=r.object}let i=erR(r,t);try{let e=i,t=l.reduce((t,n)=>(e=t,t[n]),i);if("function"==typeof t)return t.bind(e);return t}catch{let t=(null==r?void 0:r.name)||"unknown";(0,ar.$D)(ao.e.FEEDBACK,Error("Unable to parse member expression."),{extra:{target:i,name:t,path:l,expression:e}})}},erB=e=>"JSXIdentifier"===e.type?e.name:`${erB(e.object)}.${erB(e.property)}`,erU=(e,t)=>{let n;let{children:a=[]}=e,r="JSXElement"===e.type?e.openingElement:e.openingFragment,l=("JSXElement"===e.type?erB(r.name):"").trim();if(n=(n=a.map(e=>erR(e,t))).filter(e=>"string"==typeof e?""!==e.trim():!!e),"string"==typeof e)return e.trim();let i={};return r.attributes&&(i=r.attributes.reduce((e,t)=>{let n=t.name.name,a=erH(t);return e[n]=a,e},{})),{type:l,props:i,children:n}},erH=e=>{let t=e.value;return null===t||erR(t)};function erV(e){return e.split(/\/>|<\//).length}async function erG(e,t={}){var a,r;let l=function(e){let t=e.match(/```jsx([\s\S]*?)(```|$)/);return t?t[1].trim():""}(e.jsxStr),i=function(e,t){let n=e?erD(e,t):null;if(!n||0===n.length)return n;let a=function(e){let t=e.lastIndexOf(">");return -1!==t?e.substring(0,t+1):e}(e);if(!a||!a.endsWith(">"))return n;let r=a?erD(a,t):null;return r&&0!==r.length&&function e(t,n,a){let r=!0;for(let l=0;l<t.length;l++){let i=t[l],o=n[l];if(!o){r=!1;break}if("string"==typeof o){"string"!=typeof i&&(r=!1),r=i===o;continue}if("string"!=typeof i){if((null==i?void 0:i.type)!==o.type||!Gp()(null==i?void 0:i.props,o.props)||!e(null==i?void 0:i.children,o.children,a)){r=!1;continue}a(o)}}return r}(r,n,e=>{e.type.startsWith("Component")&&(e.props={...e.props,sharedPluginData:{...e.props.sharedPluginData,isDone:"true"}})}),n}(l,(await Promise.all([n.e(2510),n.e(6856)]).then(n.bind(n,257508))).parseLoose);if(!i||0===i.length||i.some(e=>!e)||!(void 0!==(r=i[0]).type&&""!==r.type)||!function({prevStr:e,currStr:t,shouldCheckClosingTagCount:n}){return e!==t&&(!n||erV(e)!==erV(t))}({prevStr:t.prevJsxStr??"",currStr:l,shouldCheckClosingTagCount:!1}))return{};await (null==(a=t.onBeforeInsertJSX)?void 0:a.call(t,i));let o={prevNodeId:t.prevNodeId,isIncomplete:!function(e){var t;let n=e.match(/<([^\/\s>]+)[^>]*>/),a=null==(t=e.match(/<\/([^>]+)>/g))?void 0:t.pop();return!!n&&!!a&&n[1]===a.replace("</","").replace(">","")}(l),autoFillParent:!0,insertBehavior:"viewport-ease",shouldGenerateImages:!0,...e.options},{insertNodeIds:s}=await erM({jsxStr:l,jsxJSON:i,options:o,prevJsxJSON:t.prevJsxJSON??[]});return{insertNodeIds:s,jsxStr:l,jsxJSON:i}}async function*erK(e,t={}){let{sleepTime:n=100,chunksPerYield:a=20,useWords:r=!0}=t;if(r){let t=e.split(" "),r=[];for(let e=0;e<t.length;e+=a)r.push(...t.slice(e,e+a)),await new Promise(e=>setTimeout(e,n)),yield r.join(" ")}else{let t=e.split(""),r=[];for(let e=0;e<t.length;e+=a)r.push(...t.slice(e,e+a)),await new Promise(e=>setTimeout(e,n)),yield r.join("")}}let erW={red:{r:.9490196108818054,g:.2823529541492462,b:.13333334028720856,a:1},orange:{r:1,g:.6509804129600525,b:.16078431904315948,a:1},yellow:{r:1,g:.8039215803146362,b:.16078431904315948,a:1},green:{r:.0784313753247261,g:.6823529601097107,b:.3607843220233917,a:1},teal:{r:0,g:.6352941393852234,b:.7607843279838562,a:1},blue:{r:.05098039284348488,g:.6000000238418579,b:1,a:1},purple:{r:.5921568870544434,g:.27843138575553894,b:1,a:1},pink:{r:1,g:.1411764770746231,b:.7411764860153198,a:1},grey:{r:.4588235318660736,g:.4588235318660736,b:.4588235318660736,a:1},brown:{r:.47843137254901963,g:.3411764705882353,b:.2,a:1},pale_red:{r:.8313725590705872,g:.3450980484485626,b:.23137255012989044,a:1},pale_yellow:{r:.6784313917160034,g:.49803921580314636,b:0,a:1},pale_green:{r:.40392157435417175,g:.5568627715110779,b:.4745098054409027,a:1},pale_blue:{r:.4000000059604645,g:.46666666865348816,b:.6000000238418579,a:1},pale_purple:{r:.49803921580314636,g:.4117647111415863,b:.6078431606292725,a:1},pale_pink:{r:.6705882549285889,g:.3490196168422699,b:.5960784554481506,a:1}};function erz(){return{loadingComponentType:"ComponentLoading",shouldGenerateImages:!0}}function erj({mockStreamOptions:e,onBeforeInsertJSX:t,onInsertJSXDone:n,onAfterInsertPartialJsx:a,shouldContinueStream:r}={}){let l=(0,t_.tS)(),i=(0,Q.useRef)({}),[o,s]=(0,ef.fp)(eaU.p),c=(0,Q.useRef)(null),{insertJSX:d,resetAsync:u,flushPending:m,nodeIdRef:p}=function({onBeforeInsertJSX:e,onAfterInsertPartialJsx:t,onReset:n}={}){let a=(0,Q.useRef)({}),r=(0,Q.useRef)(null),l=(0,Q.useRef)({}),i=(0,Q.useCallback)(async n=>{try{a.current.isRunning=!0,a.current.donePromise=(async()=>{var i;try{(0,ar.ED)("first-draft","Inserting Streamed JSX Updates",n);let{insertNodeIds:o,jsxJSON:s,jsxStr:c}=await erG(n,{prevNodeId:r.current,prevJsxStr:a.current.jsxStr,prevJsxJSON:a.current.jsxJSON,onBeforeInsertJSX:async t=>{await (null==e?void 0:e(t,l,n))}});if(!o){if(void 0===s)return;throw Error("Failed to insert any nodes")}if(o.length>1)throw Error("Expected at most one node to be inserted");(function(e){let t=tN.qo.instance.get(e);t&&cU.l7.ai("first-draft-lock-node",()=>{t.locked=!0})})(o[0]),r.current=o[0],a.current.jsxStr=c,a.current.jsxJSON=s,a.current.queuedEffects=a.current.queuedEffects||{},(null==(i=n.options)?void 0:i.shouldGenerateImages)&&function(e,t){let n=tN.qo.instance.get(e);if(!n){(0,ar.$D)(ao.e.FEEDBACK,Error("First Draft: Add Images: Could not find containing node with id=containingNodeId"),{extra:{containingNodeId:e}});return}let a=eaP(n).filter(e=>!t[`image-${e}`]);if(0!==a.length)for(let e of a)t[`image-${e}`]=eaL(e)}(r.current,a.current.queuedEffects),function(e,t,n){let a=tN.qo.instance.get(e);if(!a){(0,ar.$D)(ao.e.FEEDBACK,Error("first-draft: Icons: Could not find containing node with id=containingNodeId"),{extra:{containingNodeId:e,...n}});return}let r=(function(e){let t=eaP(e),n=tN.qo.instance,a=[];for(let e of t){let t=n.get(e);if(!t)continue;let r=t.componentPropertyReferences();if(!(null==r?void 0:r.mainComponent)||!t.symbolId)continue;let l=n.get(t.symbolId);if(l&&(null==l||!l.isState)){if(!eU.Egt.getAssetKeyForPublish(l.guid)){let e=(0,eal.Ye)((null==l?void 0:l.guid)??"");if(!e||(0,eao.vR)(e)!==eao.C)continue}eaI(t)&&a.push(t.guid)}}return a})(a).filter(e=>!t[`icon-${e}`]);if(0===r.length)return;let l=eaD(r,n.dsKitKey);for(let e of r)t[`icon-${e}`]=l}(r.current,a.current.queuedEffects,n.options),null==t||t(r.current)}catch(e){(0,ar.$D)(ao.e.FEEDBACK,e instanceof Error?e:Error(e)),r.current&&!tN.qo.instance.get(r.current)&&(r.current=null,a.current.jsxStr=void 0,a.current.jsxJSON=void 0)}})(),await a.current.donePromise,a.current.insertAgainWhenDone&&((0,ar.ED)("first-draft","Re-Inserting JSX Updates (Immediate)",a.current.lastArgs),a.current.insertAgainWhenDone=!1,await i(a.current.lastArgs))}finally{a.current.isRunning=!1}},[e,t]),o=(0,hs.A)(i,200,{leading:!0,maxWait:500}),s=(0,Q.useCallback)(async()=>{for(o.isPending()&&await o.flush();a.current.isRunning;)a.current.donePromise&&await a.current.donePromise,await ea$(10);let e=a.current.queuedEffects??{};await Promise.all(Array.from(Object.values(e)))},[o]),c=(0,Q.useCallback)(async()=>{try{await s()}finally{null==n||n(),function(e){if(!e)return;let t=tN.qo.instance.get(e);t&&cU.l7.ai("first-draft-unlock-node",()=>{t.locked=!1})}(r.current),r.current=null,a.current={},l.current={}}},[s,n]);return{insertJSX:(0,Q.useCallback)(e=>(a.current.lastArgs=e,a.current.isRunning)?(a.current.insertAgainWhenDone=!0,Promise.resolve()):(null==o?void 0:o(e))||Promise.resolve(),[o]),resetAsync:c,flushPending:s,nodeIdRef:r}}({onBeforeInsertJSX:async(e,n,a)=>{var r,l,o,s;await (null==t?void 0:t(e,n,a));let d=a.options.dsKitKey;if("LIBRARY"===d.type){if((0,eo.kc)().first_draft_new_insert_api&&null===c.current){let e=await (0,i1.GD)(`/api/first_draft/kit_contents/${d.key}`),t=ea5((null==(l=null==(r=null==e?void 0:e.data)?void 0:r.meta)?void 0:l.components)??{}),n=ea5((null==(s=null==(o=null==e?void 0:e.data)?void 0:o.meta)?void 0:s.state_groups)??{});c.current={components:t,state_groups:n}}let t=i.current,n=function(e){let t=new Set([]),n=[...e];for(;n.length;){let e=n.pop();if(e)for(let a of(e.type.startsWith(eai.FE)&&t.add(e.type),e.children))"string"!=typeof a&&n.push(a)}return t}(e),a=new Set;for(let e of n)e in t||a.add(e);await Promise.all(Array.from(a).map(async e=>{let n=await eaJ(e,d,c.current);return"success"===n.status&&(t[n.jsxName]=n),n}))}},onAfterInsertPartialJsx:a,onReset:()=>{i.current={},b.current=Promise.resolve(void 0)}}),{isRunning:_,promptOutput:f,runPromptPlayground:h,runPromptMocked:g}=function({onPromptOutput:e,onBeforeRunPrompt:t,onRunPromptSuccess:n,onRunPromptError:a,shouldContinueStream:r,mockStreamOptions:l}){let[i,o]=(0,Q.useState)(!1),[s,c]=(0,Q.useState)(""),d=(0,Q.useRef)(""),u=(0,Q.useCallback)(async(l,s)=>{if(!i){o(!0),d.current="",null==t||t(s);try{await l(t=>{c(t),null==e||e(t,s),d.current=t},r),await (null==n?void 0:n(d.current,s))}catch(e){null==a||a(e,d.current,s)}finally{o(!1)}}},[i,c,t,e,a,n,r]);return{isRunning:i,runPromptPlayground:(0,Q.useCallback)(async(e,t)=>{await u(async(t,n)=>{(0,eo.kc)().first_draft_native_routes?await ea1(e,t,n):await ea0("prompts",e,t,n)},t)},[u]),runPromptMocked:(0,Q.useCallback)(async(e,t)=>{await u(async t=>{for await(let n of erK(e,l))t(n)},t)},[u,l]),promptOutput:s}}({mockStreamOptions:e,shouldContinueStream:r,onBeforeRunPrompt:e=>{if(e.analyticsOptions){let t=e.insertJSXOptions.dsKitKey;(0,er.sx)("First Draft: Layout Generation Started",{input:e.analyticsOptions.input,file_key:l,generateId:o,clientLifecycleId:o,dsKitType:t.type,isLocal:"LOCAL"===t.type,kitKey:"key"in t?t.key:t.pageId},{forwardToDatadog:!0,batchRequest:!0})}},onRunPromptSuccess:async(e,t)=>{let a=t.insertJSXOptions.dsKitKey;if(await m(),null==n||n(p.current),eaO(a,p.current),t.analyticsOptions){let n={input:t.analyticsOptions.input,promptOutput:e,timeElapsedMs:Date.now()-t.analyticsOptions.startTime,dsKitType:a.type,isLocal:"LOCAL"===a.type,kitKey:"key"in a?a.key:a.pageId,file_key:l,generateId:o,clientLifecycleId:o};r&&!r()?(0,er.sx)("First Draft: Layout Generation Ended",{...n,status:"failed",reason:"stopped"},{forwardToDatadog:!0,batchRequest:!0}):p.current?(0,er.sx)("First Draft: Layout Generation Ended",{...n,status:"completed"},{forwardToDatadog:!0,batchRequest:!0}):(0,er.sx)("First Draft: Layout Generation Ended",{...n,status:"failed",reason:"empty generation"},{forwardToDatadog:!0,batchRequest:!0})}},onRunPromptError:(e,t,n)=>{var a,r;let i=n.insertJSXOptions.dsKitKey;eaO(i,p.current);let s={promptOutput:t,input:(null==(a=n.analyticsOptions)?void 0:a.input)??"",error:e.toString(),timeElapsedMs:Date.now()-((null==(r=n.analyticsOptions)?void 0:r.startTime)??0),dsKitType:i.type,isLocal:"LOCAL"===i.type,kitKey:"key"in i?i.key:i.pageId,file_key:l,generateId:o,clientLifecycleId:o},c=(0,ar.$D)(ao.e.FEEDBACK,e,{extra:s});(0,er.sx)("First Draft: Layout Generation Ended",{...s,status:"failed",reason:"error",sentryEventId:c})},onPromptOutput:(e,t)=>{b.current.then(n=>{d({jsxStr:e,options:{...t.insertJSXOptions,theme:n}})})}}),{getThemePromptResult:E,themePromptOutput:v}=function({themeByDefault:e,notifyStatus:t,themeProperties:n}){let a=(0,t_.tS)(),[r,l]=(0,Q.useState)(""),[i,o]=(0,ef.fp)(eaU.p),s=(0,$.wA)(),{isRunning:c,getRunPromptResult:d}=function({runPrompt:e,onBeforeRunPrompt:t,onRunPromptSuccess:n,onRunPromptError:a}){let[r,l]=(0,Q.useState)(!1),i=(0,Q.useCallback)(async(i,o)=>{if(r)return null;l(!0),null==t||t(o);try{let t=await e(i);return n(t,o),t}catch(e){return a(e,o),null}finally{l(!1)}},[r,e,t,n,a]);return{isRunning:r,getRunPromptResult:i}}({runPrompt:ea2,onBeforeRunPrompt:e=>{t&&s(eL.F.enqueue({message:(0,eO.t)("first_draft.running")})),(0,er.sx)("First Draft: Theme Generation Started",{input:e.analyticsOptions.input,file_key:a,generateId:i,clientLifecycleId:i},{forwardToDatadog:!0,batchRequest:!0})},onRunPromptSuccess:(e,t)=>{(0,er.sx)("First Draft: Theme Generation Ended",{input:t.analyticsOptions.input,promptOutput:e.content,timeElapsedMs:Date.now()-t.analyticsOptions.startTime,file_key:a,generateId:i,clientLifecycleId:i,status:"completed"},{forwardToDatadog:!0,batchRequest:!0}),l(e.content)},onRunPromptError:(e,n)=>{t&&s(eL.F.enqueue({message:"Failed to generate theme",error:!0}));let r={input:n.analyticsOptions.input,error:e.toString(),timeElapsedMs:Date.now()-n.analyticsOptions.startTime,file_key:a,generateId:i,clientLifecycleId:i},l=(0,ar.$D)(ao.e.FEEDBACK,e,{extra:r});(0,er.sx)("First Draft: Theme Generation Ended",{...r,sentryEventId:l,status:"failed",reason:"error"},{forwardToDatadog:!0,batchRequest:!0})}});function u(e){if((0,eo.kc)().first_draft_theme_v5){let t={},n={},a={};for(let[r,l]of Object.entries(e||{})){let e=r.split("/");if(e[0]!==eai.lS||e.length<2)continue;let i=e[1];if("number"===erE[i])t[r]=l;else if("color"===erE[i]){let e=(0,eek.E2)(l);e&&(n[r]=e)}else"string"===erE[i]&&(a[r]=l)}return{variableMaps:{numberVariableMap:t,colorVariableMap:n,stringVariableMap:a}}}if(e.backgroundColor&&e.accentColor){let t=m(e.backgroundColor),n=(0,ty.HD)(t,.2);return{accentColor:t,darkMode:n}}if(e.color&&e.mode)return{accentColor:m(e.color),darkMode:"dark"===e.mode};throw Error(`Invalid JSON properties returned from theme prompt. Expected properties 'backgroundColor' & 'accentColor' OR 'color' & 'mode'. Got: ${JSON.stringify(e)} `)}function m(e){if(!e.name||!e.rgb)throw Error(`Color does not contain required properties 'name' & 'rgb': ${JSON.stringify(e)} `);let t=erW[e.name.toLowerCase().split(" ").join("_")]??(0,ty.mx)(e.rgb||"");if(!t)throw Error(`Failed to parse color from 'rgb': ${JSON.stringify(e.rgb)}`);return t}return{isRunning:c,getThemePromptResult:async function(a){let r=await d({themeByDefault:e,userPrompt:a,themeProperties:n},{analyticsOptions:{input:a,startTime:Date.now(),clientLifecycleId:i}});if(r&&r.content)try{if((0,eo.kc)().first_draft_theme_v5)return u(r.content);return u(JSON.parse(r.content))}catch(e){t&&s(eL.F.enqueue({message:"Failed to generate theme",error:!0})),e instanceof Error&&(0,ar.$D)(ao.e.FEEDBACK,Error(`[First Draft theme] Error parsing theme from output: ${e.message}`),{extra:{input:a,promptOutput:r.content,generateId:i,clientLifecycleId:i,error:e}});return}},themePromptOutput:r}}({themeByDefault:!0,notifyStatus:!1,themeProperties:function(){let e={},t=(0,ia.yp)().filter(e=>(0,eas.n6)(e.name,eai.i2))[0],n=t?t.defaultModeID:null,a=(0,ia.rW)((null==t?void 0:t.node_id)||null),r=a.filter(e=>e.name.startsWith(eai.lS+"/")).map(e=>e.node_id),l=(0,ia.qd)(r,n??void 0);return(0,eo.kc)().first_draft_theme_v5&&a.forEach(t=>{if(!t.node_id)return;let n=l[t.node_id];if(n&&"MIXED"!==n)switch(n.resolvedType){case eU.rXF.STRING:case eU.rXF.FLOAT:e[t.name]={value:n.value,rule:t.description};break;case eU.rXF.COLOR:e[t.name]={value:eaq(n.value),rule:t.description}}}),e}()}),y=(0,Q.useCallback)(async e=>{if("LOCAL"!==e.dsKitKey.type)return;if(!(0,eo.kc)().first_draft_local_kits)throw Error("Need to have first_draft_local_kits flag to publish local kits");let t=await (0,eaV.H)(e.dsKitKey.pageId,e.name,{publishType:eaG.t.LOCAL_GENERATION});if(!t)throw Error("Failed to get first draft publish data for local kit");(0,eaV.a)(t)&&await ear.G.postFirstDraftPublishLocalKit({fileKey:l,publishMetadata:t})},[l]),b=(0,Q.useRef)(Promise.resolve(void 0)),C=(0,Q.useCallback)(async(e,t,n)=>{if(_)return{nodeId:null};await u(),t.shouldGenerateTheme&&(b.current=E(e));let{designSystem:a}=t,r=function(e,t){if("LOCAL"!==t.dsKitKey.type)return{userPrompt:e,kitKey:t.dsKitKey.key,isLocal:!1};let{systemPromptTemplate:n}=function(e){let t=tN.qo.instance.get(e.pageId);if(!t||"CANVAS"!==t.type)return{};for(let e of(0,eas.Au)(t.guid,["SECTION"]))if("SECTION"===e.type&&(0,eas.n6)(e.name,"System Prompt"))return{systemPromptTemplate:e.childrenNodes.filter(e=>"TEXT"===e.type&&e.characters.length>0).sort((e,t)=>e.relativeTransform.m12-t.relativeTransform.m12).map(e=>e.characters).join("\n")};return{}}({pageId:t.dsKitKey.pageId}),a=eU.XJn.getKitKey(t.dsKitKey.pageId);if(!a)throw Error("Failed to get a kitKey for local kit");return{userPrompt:e,kitKey:a,isLocal:!0,systemPromptTemplate:n}}(e,a);try{await y(a)}catch(e){return(0,ar.$D)(ao.e.FEEDBACK,e),{nodeId:null}}await h(r,{insertJSXOptions:{frameName:e,...erz(),...n,sharedPluginData:{userPrompt:e,...n.sharedPluginData},dsKitKey:a.dsKitKey,componentNameToKey:i.current},analyticsOptions:{startTime:Date.now(),input:e,clientLifecycleId:o}});let l=p.current;if(await u(),l&&!tN.qo.instance.get(l))throw Error("Failed to insert node");return{nodeId:l}},[_,E,u,h,p,o,y]);return{submitPromptMocked:(0,Q.useCallback)(async(e,t)=>{_||(await u(),await g(e,{insertJSXOptions:{...erz(),...t,componentNameToKey:i.current},analyticsOptions:null}),await u())},[_,u,g]),submitPrompt:C,promptOutput:f,themePromptOutput:v,isRunning:_}}function erY(e){return Q.createElement("div",{className:tw.cx.flex.itemsCenter.colorTextTertiary.selectNone.font11.lh16.$},Q.createElement("span",{style:{"--color-icon":"var(--color-text-tertiary)"}},e.icon),Q.createElement("div",{className:tw.cx.flex1.minW0.$},e.children))}function erZ(e){return Q.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},Q.createElement("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M9.8 9.752c.178-.103.36-.24.536-.416.47-.47.664-.986.664-1.336a2 2 0 1 1 4 0c0 .341-.034.676-.098 1a5.6 5.6 0 0 1-.297 1h2.174a2 2 0 0 1 1.91 2.597l-1.055 3.373a2.5 2.5 0 0 1-2.74 1.73l-4.975-.712A1.5 1.5 0 0 1 8.5 18h-1A1.5 1.5 0 0 1 6 16.5v-6A1.5 1.5 0 0 1 7.5 9h1a1.5 1.5 0 0 1 1.3.752Zm.2 1.019v5.219l5.036.72a1.5 1.5 0 0 0 1.644-1.038l1.054-3.374A1 1 0 0 0 16.78 11h-3.652l.548-1.371A4.382 4.382 0 0 0 14 8a1 1 0 1 0-2 0c0 .672-.345 1.43-.957 2.043A3.517 3.517 0 0 1 10 10.77ZM9 10.5a.5.5 0 0 0-.5-.5h-1a.5.5 0 0 0-.5.5v6a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-6Z",clipRule:"evenodd"}))}function erX(e){return Q.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},Q.createElement("g",{clipPath:"url(#fpl-icon-24-thumb-down-small-a)"},Q.createElement("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M9.8 14.248c.178.103.36.24.536.416.47.47.664.986.664 1.336a2 2 0 1 0 4 0 5.17 5.17 0 0 0-.098-1 5.599 5.599 0 0 0-.297-1h2.174a2 2 0 0 0 1.91-2.597L17.634 8.03a2.5 2.5 0 0 0-2.74-1.73l-4.975.712A1.5 1.5 0 0 0 8.5 6h-1A1.5 1.5 0 0 0 6 7.5v6A1.5 1.5 0 0 0 7.5 15h1a1.5 1.5 0 0 0 1.3-.752Zm.2-1.019V8.01l5.036-.72a1.5 1.5 0 0 1 1.644 1.038l1.054 3.374A1 1 0 0 1 16.78 13h-3.652l.548 1.371c.207.516.324 1.064.324 1.629a1 1 0 1 1-2 0c0-.672-.345-1.43-.957-2.043A3.517 3.517 0 0 0 10 13.23ZM9 13.5a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.5-.5v-6a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v6Z",clipRule:"evenodd"})),Q.createElement("defs",null,Q.createElement("clipPath",{id:"fpl-icon-24-thumb-down-small-a"},Q.createElement("path",{fill:"#fff",d:"M0 0h24v24H0z"}))))}let erq=function({close:e}){var t;let n;let[a]=(0,ef.fp)(eaU.p),r=(0,enQ.WO)(a),l=(0,enQ.uf)(),i=(0,t_.tS)();(t=n||(n={})).Positive="positive",t.Negative="negative";let o=e=>{(0,er.sx)("First Draft: Feedback",{clientLifecycleId:a,intent:e,fileKey:i},{batchRequest:!0})};return Q.createElement(Q.Fragment,null,Q.createElement(dN.K,{"aria-label":(0,eO.t)("first_draft.thumbs_up"),variant:"secondary",onClick:()=>{l(),o("positive"),e()}},Q.createElement(erZ,null)),Q.createElement(dN.K,{"aria-label":(0,eO.t)("first_draft.thumbs_down"),variant:"secondary",onClick:()=>{r(a),o("negative"),e()}},Q.createElement(erX,null)))};function erJ({selectedKit:e,showDebugSection:t,toggleDebug:n}){let[a,r]=Q.useState(""),l=(0,$.wA)(),{submitPromptMocked:i}=erj({mockStreamOptions:{sleepTime:100,chunksPerYield:1e6,useWords:!1}}),{submitPromptMocked:o}=erj({mockStreamOptions:{sleepTime:100,chunksPerYield:10,useWords:!1}}),s=Q.useCallback(async()=>{await o("```jsx\n"+a,{dsKitKey:e.dsKitKey,shouldGenerateImages:!0}),l(eL.F.enqueue({message:"Finished insert"}))},[a,o,e,l]),c=Q.useCallback(async()=>{await i("```jsx\n"+a,{dsKitKey:e.dsKitKey,shouldGenerateImages:!0}),l(eL.F.enqueue({message:"Finished insert"}))},[a,i,e,l]);return Q.createElement(nk.Y,{padding:{vertical:12},direction:"vertical"},Q.createElement("button",{onClick:n,className:tw.cx.cursorPointer.flex.itemsCenter.wFull.$},t?Q.createElement(co.O,null):Q.createElement(cs.k,null),Q.createElement(aL.E,{fontSize:11,fontWeight:"medium"},"Debug")),t&&Q.createElement(Q.Fragment,null,Q.createElement("textarea",{className:tw.cx.resizeNone.wFull.colorBgSecondary.px12.py8.bRadius5.$,rows:3,value:a,placeholder:"Enter JSX to insert directly",onChange:e=>r(e.target.value)}),Q.createElement(nk.Y,null,Q.createElement(Y4.$n,{variant:"secondary",onClick:s},"Insert streaming"),Q.createElement(Y4.$n,{variant:"secondary",onClick:c},"Insert all"))))}var erQ=n(169566),er$=n.n(erQ);let er0={fileKey:"",name:"Loading kits...",dsKitKey:{pageId:"",type:"LOCAL"}};var er1=((Y=er1||{})[Y.READY_FOR_PROMPT=0]="READY_FOR_PROMPT",Y[Y.RUNNING=1]="RUNNING",Y[Y.FINISHED=2]="FINISHED",Y[Y.ERROR=3]="ERROR",Y);let er2=(0,ef.E3)("draft_prompt_history",[]);function er5(){let e=(0,enQ.GE)(enL.JT.FIRST_DRAFT),[t,n]=Q.useState(""),[a,r]=Q.useState(er0),[l,i]=Q.useState(!1),[o,s]=Q.useState([]),c=Q.useRef(!0),[d,u]=Q.useState(function(e=5){let t=[{label:(0,eO.t)("first_draft.prompts.movie_reviews.label"),prompt:(0,eO.t)("first_draft.prompts.movie_reviews.prompt")},{label:(0,eO.t)("first_draft.prompts.ecommerce.label"),prompt:(0,eO.t)("first_draft.prompts.ecommerce.prompt")},{label:(0,eO.t)("first_draft.prompts.food_delivery.label"),prompt:(0,eO.t)("first_draft.prompts.food_delivery.prompt")},{label:(0,eO.t)("first_draft.prompts.real_estate.label"),prompt:(0,eO.t)("first_draft.prompts.real_estate.prompt")},{label:(0,eO.t)("first_draft.prompts.news_app.label"),prompt:(0,eO.t)("first_draft.prompts.news_app.prompt")},{label:(0,eO.t)("first_draft.prompts.job_search.label"),prompt:(0,eO.t)("first_draft.prompts.job_search.prompt")},{label:(0,eO.t)("first_draft.prompts.ebooks.label"),prompt:(0,eO.t)("first_draft.prompts.ebooks.prompt")},{label:(0,eO.t)("first_draft.prompts.fitness.label"),prompt:(0,eO.t)("first_draft.prompts.fitness.prompt")},{label:(0,eO.t)("first_draft.prompts.plant_care.label"),prompt:(0,eO.t)("first_draft.prompts.plant_care.prompt")},{label:(0,eO.t)("first_draft.prompts.cocktail_recipes.label"),prompt:(0,eO.t)("first_draft.prompts.cocktail_recipes.prompt")},{label:(0,eO.t)("first_draft.prompts.learning.label"),prompt:(0,eO.t)("first_draft.prompts.learning.prompt")},{label:(0,eO.t)("first_draft.prompts.event_planner.label"),prompt:(0,eO.t)("first_draft.prompts.event_planner.prompt")},{label:(0,eO.t)("first_draft.prompts.tickets_booking.label"),prompt:(0,eO.t)("first_draft.prompts.tickets_booking.prompt")},{label:(0,eO.t)("first_draft.prompts.travel_planner.label"),prompt:(0,eO.t)("first_draft.prompts.travel_planner.prompt")},{label:(0,eO.t)("first_draft.prompts.fashion_inspiration.label"),prompt:(0,eO.t)("first_draft.prompts.fashion_inspiration.prompt")},{label:(0,eO.t)("first_draft.prompts.art_gallery.label"),prompt:(0,eO.t)("first_draft.prompts.art_gallery.prompt")},{label:(0,eO.t)("first_draft.prompts.podcasts.label"),prompt:(0,eO.t)("first_draft.prompts.podcasts.prompt")},{label:(0,eO.t)("first_draft.prompts.gaming.label"),prompt:(0,eO.t)("first_draft.prompts.gaming.prompt")}];return er$()(t).slice(0,e)}(6)),{libraryKitsQueryStatus:m,libraryKits:p,localKits:_}=function(){let e=(0,t_.tS)(),[t]=(0,d5.IT)(eaH(null)),n=[];if("loaded"===t.status)for(let a of t.data)a.fileKey!==e&&n.push({fileKey:a.fileKey,name:a.name,dsKitKey:{key:a.key,type:"LIBRARY"}});n.sort((e,t)=>e.name.localeCompare(t.name));let a=eU.XJn.getLocalDesignSystemKits(),r=[];if(e)for(let t of a)r.push({fileKey:e,name:t.name,dsKitKey:{pageId:t.pageId,type:"LOCAL"}});return{libraryKitsQueryStatus:t.status,localKits:r,libraryKits:n}}(),{replace:f,close:h}=(0,enp.c)(),[g,E]=(0,ef.fp)(er2),v=Q.useCallback(e=>{E([e,...g].slice(0,5))},[g,E]);Q.useEffect(()=>{p.length&&Gp()(a,er0)&&r(p[0])},[p,a]);let y=Q.useMemo(()=>{let e=[];return p.length>0&&(e.push({type:"header",text:(0,eO.t)("first_draft.made_by_figma")}),e.push(...p.map(e=>({type:"checkableOption",value:e,text:e.name})))),(0,eo.kc)().first_draft_explore_community&&(e.push({type:"separator"}),e.push({type:"header",text:(0,eO.t)("first_draft.community")}),e.push({type:"option",text:(0,eO.t)("first_draft.explore_community"),onSelectOverride:()=>console.warn("Not implemented!")})),(0,eo.kc)().first_draft_local_kits&&_.length>0&&(e.push({type:"separator"}),e.push({type:"header",text:(0,eO.t)("first_draft.current_file")}),e.push(..._.map(e=>({type:"checkableOption",value:e,text:e.name})))),e},[p,_]),[b,C]=Q.useState(0),[w,T]=(0,ef.fp)(eaU.p),[x,N]=(0,ef.fp)(WU.ZG),[k,S]=Q.useState((0,eO.t)("first_draft.something_went_wrong")),I=t.length>0||l||(0,eo.kc)().first_draft_rm_ai_warning,A=e=>Q.createElement("div",{className:ea()(tw.cx.flex.flexRow.$)},Q.createElement(eae,{style:{marginLeft:-2}})," ",Q.createElement("span",{className:ea()(tw.cx.pl4.$)},e)),P=()=>(0,eo.kc)().first_draft_thumbnails?Q.createElement(nk.Y,{width:"fill-parent",height:112,padding:{bottom:8},spacing:8,verticalAlignItems:"stretch",strokeColor:"default",strokeWidth:{bottom:1}},[,,,,].fill(0).map((e,t)=>Q.createElement("button",{key:t,className:tw.cx.bRadius5.flexGrow1.flexBasis0.colorBgSecondary.overflowHidden.$},o[t]?Q.createElement("img",{src:o[t],alt:"",className:tw.cx.maxW100.$}):Q.createElement("div",{className:tw.cx.colorBgSecondary.$})))):null,{submitPrompt:O}=erj({shouldContinueStream:Q.useCallback(()=>c.current,[c]),onAfterInsertPartialJsx:Q.useCallback(e=>{(0,eo.kc)().first_draft_thumbnails&&e&&s(eaB(e))},[])}),L=Q.useCallback(async()=>{let n=null;T((0,ean.MZ)()),C(1),N(!0);try{v(t),n=await O(t,{shouldGenerateTheme:!!(0,eo.kc)().first_draft_generate_theme,designSystem:a},{shouldGenerateImages:!0})}catch(e){c.current=!0,C(3),N(!1),eU.XJn.clearFDScene();return}N(!1),(null==n?void 0:n.nodeId)||!c.current?((0,eo.kc)().first_draft_thumbnails&&(null==n?void 0:n.nodeId)&&s(eaB(n.nodeId)),e(),C(2)):(S((0,eO.t)("first_draft.no_design_generated")),C(3)),c.current=!0,eU.XJn.clearFDScene()},[O,e,a,t,T,N,v]),M=Q.useCallback(()=>{c.current=!1},[]),D=Q.useCallback(()=>i(e=>!e),[]);switch(b){case 0:return Q.createElement("div",{className:tw.cx.p8.borderBox.$},Q.createElement(enX,{value:t,onChange:n,suggestion:(0,eO.t)("first_draft.placeholder_prompt"),suggestionPills:d,promptHistory:g}),(0,eo.kc)().first_draft_debug&&Q.createElement(erJ,{selectedKit:a,showDebugSection:l,toggleDebug:D}),Q.createElement(enH.B,{fullWidth:!0,justify:"space-between"},!I&&Q.createElement(erY,{icon:Q.createElement(eat.b,null)},Q.createElement(eO.Tx,{id:"whiteboard.ai_modal.disclaimer"})),I&&Q.createElement(enK.ms,{selected:a,onSelectedChange:e=>r(e),placeholder:A((0,eO.t)("first_draft.library_placeholder")),labelForSelectedItem:e=>A(e.name),displayAboveTarget:!0,lean:"right",items:y,disabled:"loaded"!==m}),Q.createElement(enU.r,{shortcuts:[{key:es.Uz.ENTER,modifier:[es.xH.META]}],onAction:L,disabled:0===t.length},Q.createElement(eO.Tx,{id:"first_draft.generate"}))));case 1:return Q.createElement(en6.y,null,P(),Q.createElement(enH.B,{justify:"space-between",align:"center",fullWidth:!0},Q.createElement(en3.R,null,Q.createElement(eO.Tx,{id:"first_draft.running"})),Q.createElement(enU.r,{variant:"secondary",onAction:M,shortcuts:[{key:es.Uz.ESCAPE}]},Q.createElement(eO.Tx,{id:"first_draft.stop"}))));case 2:return Q.createElement(en6.y,null,P(),Q.createElement(enH.B,{justify:"space-between",align:"center",fullWidth:!0},Q.createElement(enH.B,{gap:4,align:"center"},Q.createElement(OE.g,null),Q.createElement("span",{className:tw.cx.textBodyMediumStrong.$},Q.createElement(eO.Tx,{id:"first_draft.done"}))),Q.createElement(enH.B,null,(0,eo.kc)().first_draft_user_feedback&&Q.createElement(erq,{close:h}),(0,eo.kc)().first_draft_make_changes&&Q.createElement(enU.r,{onAction:()=>{f(Q.createElement(en9,null))},variant:"secondary"},Q.createElement(eO.Tx,{id:"first_draft.make_changes"})),Q.createElement(enU.r,{onAction:h,shortcuts:[{key:es.Uz.ENTER,modifier:[es.xH.META]}]},Q.createElement(eO.Tx,{id:"first_draft.keep_it"})))));case 3:return Q.createElement(en6.y,null,Q.createElement(enH.B,{justify:"space-between",align:"center",fullWidth:!0},Q.createElement(enH.B,{gap:4,align:"center"},Q.createElement(cc.Z,null),Q.createElement("span",{className:tw.cx.textBodyMediumStrong.$},k)),Q.createElement(enH.B,null,Q.createElement(enU.r,{onAction:h,shortcuts:[{key:es.Uz.ENTER,modifier:[es.xH.META]}]},Q.createElement(eO.Tx,{id:"first_draft.ok"})))));default:(0,re.xb)(b)}}var er4=n(705420),er3=n(528114),er6=n(636716),er7=n(145351),er8=((Z=er8||{}).READY_FOR_PROMPT="READY_FOR_PROMPT",Z.RUNNING="RUNNING",Z.FINISHED="FINISHED",Z.FAILED="FAILED",Z),er9=((X=er9||{}).SDXL="SDXL",X.FIREFLY="Firefly",X.AWSTITAN="AWS Titan",X),ele=n(453063);function elt({children:e}){let{close:t}=(0,enp.c)();return Q.createElement(en6.y,null,Q.createElement(enH.B,{justify:"space-between",align:"center",fullWidth:!0},Q.createElement("span",{className:tw.cx.textBodyMediumStrong.ml8.$},e),Q.createElement(fU.A,{onClick:t})))}var eln=n(301243);let ela=[{callback:ey.lQ,action:enL.JT.TRANSLATE_TEXT,flags:["edit","design"],featureFlags:["qa_v2","qa_text_features"],tags:[enI.$.AI],quickAction:{module:Q.createElement(function(){let e=[{name:(0,eO.t)("ai_text_tools.translate.english")},{name:(0,eO.t)("ai_text_tools.translate.spanish")},{name:(0,eO.t)("ai_text_tools.translate.french")},{name:(0,eO.t)("ai_text_tools.translate.german")},{name:(0,eO.t)("ai_text_tools.translate.italian")},{name:(0,eO.t)("ai_text_tools.translate.japanese")},{name:(0,eO.t)("ai_text_tools.translate.korean")},{name:(0,eO.t)("ai_text_tools.translate.portuguese")},{name:(0,eO.t)("ai_text_tools.translate.russian")},{name:(0,eO.t)("ai_text_tools.translate.chinese")}];return Q.createElement(en5,{featureType:enL.JT.TRANSLATE_TEXT,parameters:[{key:"language",name:"Language",allowFreeform:!1}],handleInputEvent:({currentParameter:t,currentSearchQuery:n,onSuggestions:a})=>{if("language"===t.key){let t=n.toLowerCase();a({type:"SUGGESTIONS",suggestions:e.filter(e=>e.name.toLowerCase().includes(t)).map(e=>({name:e.name}))})}},parseRunEvent:e=>e&&"parameters"===e.command&&e.parameters?{language:e.parameters.language.name}:null,makeCortexRequest:(e,t,n)=>enR.Ay.shared.adjustText({text:e,action:{type:"TRANSLATE",language:t.language}},n),runningText:(0,eO.t)("ai_text_tools.translate.running")})},null)},iconType:Q.createElement(enw.Y,null),searchSynonyms:["change language"]},{callback:ey.lQ,action:enL.JT.REWRITE_TEXT,flags:["edit","design"],featureFlags:["qa_v2","qa_text_features"],quickAction:{module:Q.createElement(function(){let[e,t]=Q.useState(""),{step:n,setStep:a,onRun:r}=en0({makeCortexRequest:(e,t,n)=>enR.Ay.shared.adjustText({text:e,action:{type:"REWRITE_TEXT",prompt:t.prompt}},n),featureType:enL.JT.REWRITE_TEXT});switch(n.type){case en$.RUNNING:return Q.createElement(enJ.F,null,Q.createElement(eO.Tx,{id:"ai_text_tools.rewrite.running"}));case en$.PARAMETERS:return Q.createElement(enq,{prompt:e,onChangePrompt:t,onRun:()=>r({prompt:e}),suggestion:(0,eO.t)("ai_text_tools.rewrite.suggestion"),submitLabel:Q.createElement(eO.Tx,{id:"ai_text_tools.rewrite.run"})});case en$.ERROR:return Q.createElement(enF.Eb,{error:n.error,buttons:[{type:enF.ft.TRY_AGAIN,callback:()=>{r({prompt:e})}}],messageOverrides:{[enF.BQ.CONTENT_LENGTH_LIMIT]:Q.createElement(eO.Tx,{id:"ai_text_tools.rewrite.content_length_exceeded"})}});case en$.ITERATE:return Q.createElement(enB.O,{iterateOptions:[{type:enB.i.MAKE_CHANGES,callback:()=>{a({type:en$.PARAMETERS})}}]});default:(0,re.xb)(n)}},null)},iconType:Q.createElement(enT.A,null),tags:[enI.$.AI],searchSynonyms:["revise this","modify this","adjust tone"]},{callback:ey.lQ,action:enL.JT.SHORTEN_TEXT,flags:["edit","design"],featureFlags:["qa_v2","qa_text_features"],quickAction:{module:Q.createElement(function(){let[e,t]=Q.useState(!1),{step:n,cleanUp:a,lastParameters:r,onRun:l}=en0({initialStep:{type:en$.RUNNING},makeCortexRequest:(e,t,n)=>enR.Ay.shared.adjustText({text:e,action:{type:"SHORTEN"}},n),featureType:enL.JT.SHORTEN_TEXT}),[,i]=(0,ef.fp)(WU.Q8);switch((0,Q.useEffect)(()=>{e||(t(!0),l(null))},[e,l]),(0,Q.useEffect)(()=>()=>{a()},[a]),n.type){case en$.RUNNING:return Q.createElement(enJ.F,null,Q.createElement(eO.Tx,{id:"ai_text_tools.shorten.running"}));case en$.ERROR:return Q.createElement(enF.Eb,{buttons:[{type:enF.ft.TRY_AGAIN,callback:()=>l(r)}],error:n.error,messageOverrides:{[enF.BQ.CONTENT_LENGTH_LIMIT]:Q.createElement(eO.Tx,{id:"ai_text_tools.shorten.content_length_exceeded"})}});case en$.ITERATE:return Q.createElement(enB.O,{iterateOptions:[{type:enB.i.TRY_AGAIN,callback:()=>{i(""),l(r)}}]});case en$.PARAMETERS:return null;default:(0,re.xb)(n)}},null)},iconType:Q.createElement(enx.X,null),tags:[enI.$.AI],searchSynonyms:["make concise","condense","reduce","abbreviate"]},{callback:ey.lQ,action:enL.JT.FIRST_DRAFT,flags:["edit","design"],featureFlags:["qa_v2","first_draft_native"],quickAction:{module:Q.createElement(function(){return Q.createElement(eP.tH,{boundaryKey:"FirstDraft",fallback:eP.H4.NONE_I_KNOW_WHAT_IM_DOING},Q.createElement(er5,null))},null)},iconType:Q.createElement(enN,null),tags:[enI.$.AI],searchSynonyms:["first draft","generate design","create design","make design"]},{callback:ey.lQ,action:enL.JT.FIRST_DRAFT_MAKE_CHANGES,flags:["edit","design"],featureFlags:["qa_v2","first_draft_native","first_draft_make_changes"],quickAction:{module:Q.createElement(en9,null)},iconType:Q.createElement(enN,null),tags:[enI.$.AI]},{name:enL.JT.FIND_INSPIRATION,action:enL.JT.FIND_INSPIRATION,args:{},tags:[enI.$.AI],flags:["design"],featureFlags:["qa_v2","asset_suggestions"],callback:ey.lQ,quickAction:{module:(0,eo.kc)().dse_quick_action_comp_search?Q.createElement(er3.W,null):Q.createElement(er4.g,null),beforeModuleOpen:e=>{(0,er4.u)({type:"selection"},e)}},iconType:(0,eo.kc)().dse_quick_action_comp_search?Q.createElement(enk.T,null):Q.createElement(eM.B,{svg:eln.A,className:tw.cx.colorIcon.$})},{action:enL.JT.REMOVE_BACKGROUND,featureFlags:["qa_v2","eai_image_tools"],tags:[enI.$.AI],flags:["edit","design"],iconType:Q.createElement(enS.$,null),quickAction:{module:Q.createElement(er6.A,null),beforeModuleOpen:()=>{(0,enM.Ag)(enL.JT.REMOVE_BACKGROUND,enP.JY,{source:"quick-actions"},{})}},callback:ey.lQ,searchSynonyms:["clean up image","cleaup up picture","make transparent","delete background","erase background","eliminate background"]},{callback:ey.lQ,action:enL.JT.AUTO_RENAME_LAYERS,featureFlags:["qa_v2","eai_auto_rename_layers"],tags:[enI.$.AI],flags:["edit","design"],iconType:Q.createElement(function(e){return Q.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},Q.createElement("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M11 5.5a.5.5 0 0 1 .5-.5h4a.5.5 0 0 1 0 1H14v12h1.5a.5.5 0 0 1 0 1h-4a.5.5 0 0 1 0-1H13V6h-1.5a.5.5 0 0 1-.5-.5Zm7 4a.5.5 0 0 0-.5-.5h-2a.5.5 0 0 1 0-1h2A1.5 1.5 0 0 1 19 9.5v5a1.5 1.5 0 0 1-1.5 1.5h-2a.5.5 0 0 1 0-1h2a.5.5 0 0 0 .5-.5v-5ZM6 11a.5.5 0 0 0-1 0v3.5A1.5 1.5 0 0 0 6.5 16h5a.5.5 0 0 0 0-1h-5a.5.5 0 0 1-.5-.5V11Zm2.015-4.56L7.7 7.7l-1.26.315c-.505.126-.505.844 0 .97L7.7 9.3l.315 1.26c.126.505.844.505.97 0L9.3 9.3l1.26-.315c.505-.126.505-.844 0-.97L9.3 7.7l-.315-1.26c-.126-.505-.844-.505-.97 0Z",clipRule:"evenodd"}))},null),quickAction:{module:Q.createElement(function({}){let e=(0,enM.RL)(enL.JT.AUTO_RENAME_LAYERS,QN.Ay),{start:t,stop:n,state:a}=e,r=(0,enQ._I)(),{close:l}=(0,enp.c)();switch((0,Q.useEffect)(()=>{a===enM.qy.DONE&&r(enL.JT.AUTO_RENAME_LAYERS)},[a,r]),a){case enM.qy.RUNNING:return Q.createElement(enJ.F,{secondaryMessage:Q.createElement(eO.Tx,{id:"auto_rename_layers.progress",completed:e.progress.complete,total:e.progress.total}),onCancel:()=>{n(),l()}},Q.createElement(eO.Tx,{id:"auto_rename_layers.running"}));case enM.qy.ERROR:{if(e.error instanceof QN.BT)return Q.createElement(elt,null,Q.createElement(eO.Tx,{id:"auto_rename_layers.error.no_nameable_items"}));if(e.error instanceof QN.tS)return Q.createElement(elt,null,Q.createElement(eO.Tx,{id:"ai.error.no_layers_selected"}));let n=null;return e.error instanceof QN.eJ&&(n=Q.createElement(eO.Tx,{id:"auto_rename_layers.error.layer_limit_exceeded"})),Q.createElement(enF.Eb,{error:e.error,buttons:[{type:enF.ft.TRY_AGAIN,callback:()=>{t({source:"quick_actions"},{complete:0,total:0})}}],customMessage:n})}case enM.qy.DONE:return Q.createElement(enB.O,{iterateOptions:[{type:enB.i.UNDO,callback:()=>{eU.glU.triggerActionInUserEditScope("undo",{}),l()}}]});case enM.qy.CANCELLED:case enM.qy.INITIAL:return null;default:(0,re.xb)(a)}},{source:"quick-actions"}),beforeModuleOpen:()=>{(0,enM.Ag)(enL.JT.AUTO_RENAME_LAYERS,QN.Ay,{source:"quick_actions"},{complete:0,total:0})}},searchSynonyms:["rename all layers","rename layers"]},{callback:ey.lQ,action:enL.JT.GENERATE_IMAGE,featureFlags:["qa_v2","eai_generate_image"],tags:[enI.$.AI],flags:["edit","design"],iconType:Q.createElement(function(e){return Q.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},Q.createElement("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M15.534 5.363 15.1 7.1l-1.737.434c-.485.121-.485.81 0 .932L15.1 8.9l.434 1.737c.121.485.81.485.932 0L16.9 8.9l1.737-.434c.485-.122.485-.81 0-.932L16.9 7.1l-.434-1.737c-.122-.485-.81-.485-.932 0ZM6 7.5A1.5 1.5 0 0 1 7.5 6h5a.5.5 0 0 1 0 1h-5a.5.5 0 0 0-.5.5v6.293l2.646-2.646a.5.5 0 0 1 .708 0L16.207 17h.293a.5.5 0 0 0 .5-.5v-5a.5.5 0 0 1 1 0v5a1.5 1.5 0 0 1-1.5 1.5h-9A1.5 1.5 0 0 1 6 16.5v-9Zm1 9v-1.293l3-3L14.793 17H7.5a.5.5 0 0 1-.5-.5Z",clipRule:"evenodd"}))},null),quickAction:{module:Q.createElement(function(){let e=(0,enQ._I)(),[t,n]=Q.useState({type:"READY_FOR_PROMPT"}),[a,r]=Q.useState(""),[l,i]=Q.useState(localStorage.getItem("ai_image_gen_provider")??"AWS Titan"),o=async()=>{let t,r="";try{if(cU.l7.user("generate image",()=>{var e;let n=tN.qo.instance,r=n.getCurrentPage();if(!r)throw Error("Something went wrong");let l=lT.Y5.getViewportInfo();1===r.directlySelectedNodes.length&&(t=r.directlySelectedNodes[0],!function(e,t){let n=t.width/t.zoomScale,a=t.height/t.zoomScale,r=t.offsetX-n/2,l=t.offsetX+n/2,i=t.offsetY-a/2,o=t.offsetY+a/2;return!(e.x>l)&&!(e.y>o)&&!(e.x+e.size.x<r)&&!(e.y+e.size.y<i)}(t,l)&&(t=void 0),t&&!["FRAME","RECTANGLE"].includes(t.type)&&(t=void 0)),t||((t=n.createNode("RECTANGLE")).size={x:512,y:512},t.x=l.offsetX-t.size.x/2,t.y=l.offsetY-t.size.y/2,null==(e=n.getCurrentPage())||e.appendChild(t),r.setSelectionToSingleNode(t.guid)),t.name=`Prompt: ${a}`}),!t)throw Error("Something went wrong");r=t.setOpacityWithAnimation(t.opacity,er7._E.forOpacityOscillation(1e3,.25,t.opacity,1500)).toString(),n({type:"RUNNING"});let i={size:eaE(t.size.x,t.size.y),altText:a,stylePreset:"photographic"},o="";switch(l){case"Firefly":o=await eaT(i,"firefly");break;case"AWS Titan":o=await eaw(i,!1);break;default:o=await eaT(i)}let s=(0,wh.D)(),c=await s.createImage((0,lA.Vs)(o.split(",")[1])),d=s.getNodeById(t.guid);if(!d||!("fills"in d))return;d.fills=[{type:"IMAGE",imageHash:c.hash,scaleMode:"FILL"}],e(enL.JT.GENERATE_IMAGE),n({type:"FINISHED"})}catch(e){throw n({type:"FAILED",error:e}),e}finally{eU.zuo.cancelAnimation(r)}};if("FAILED"===t.type)return Q.createElement(enF.Eb,{error:t.error,buttons:[{type:enF.ft.TRY_AGAIN,callback:()=>{n({type:"READY_FOR_PROMPT"})}}]});if("RUNNING"===t.type)return Q.createElement(enJ.F,null,Q.createElement(eO.Tx,{id:"ai.working"}));if("FINISHED"===t.type)return Q.createElement(enB.O,{iterateOptions:[{type:enB.i.MAKE_CHANGES,callback:()=>n({type:"READY_FOR_PROMPT"})}]});let s=`Using ${l}`;return Q.createElement(enq,{prompt:a,onChangePrompt:r,onRun:o,suggestion:"Moody image of a bottle of olive oil",submitLabel:"Generate",extraFooter:Q.createElement(enU.r,{variant:"secondary",onAction:()=>{"SDXL"===l?(i("Firefly"),localStorage.setItem("ai_image_gen_provider","Firefly")):"Firefly"===l?(i("AWS Titan"),localStorage.setItem("ai_image_gen_provider","AWS Titan")):(i("SDXL"),localStorage.setItem("ai_image_gen_provider","SDXL"))}},s)})},null)},searchSynonyms:["generate image","make an image","generate graphic","generate picture","generate illustration","create image"]},{action:enL.JT.MAGIC_LINK,flags:["edit","design"],featureFlags:["qa_v2","prototype_ai_magic_link"],tags:[enI.$.AI],quickAction:{module:Q.createElement(ele.p,null),beforeModuleOpen:()=>{el.D.dispatch((0,TT.Zh)({name:"prototype.ai_magic_link_entry_clicked",params:{source:"quick_actions"}})),(0,enM.Ag)(enL.JT.MAGIC_LINK,enO.e,{},{})}},iconType:Q.createElement(function(e){return Q.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},Q.createElement("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"m17.854 8.354-2 2a.5.5 0 0 1-.708-.708L16.293 8.5H14.5A1.5 1.5 0 0 0 13 10v4a2.5 2.5 0 0 1-2.5 2.5H10a.508.508 0 0 1-.062-.004 2 2 0 1 1 0-.992A.508.508 0 0 1 10 15.5h.5A1.5 1.5 0 0 0 12 14v-4a2.5 2.5 0 0 1 2.5-2.5h1.793l-1.147-1.146a.5.5 0 0 1 .708-.708l2 2a.5.5 0 0 1 0 .708ZM9 16a1 1 0 1 1-2 0 1 1 0 0 1 2 0Zm6.4-.6.28-1.12c.083-.333.557-.333.64 0l.28 1.12 1.12.28c.333.083.333.557 0 .64l-1.12.28-.28 1.12c-.083.333-.557.333-.64 0l-.28-1.12-1.12-.28c-.333-.083-.333-.557 0-.64l1.12-.28ZM7.515 5.94 7.2 7.2l-1.26.315c-.505.126-.505.844 0 .97L7.2 8.8l.315 1.26c.126.505.844.505.97 0L8.8 8.8l1.26-.315c.505-.126.505-.844 0-.97L8.8 7.2l-.315-1.26c-.126-.505-.844-.505-.97 0Z",clipRule:"evenodd"}))},null),searchSynonyms:["magic link","add prototype links","add prototype connections","connect prototype"]},{action:enL.JT.CONTENT_FILL,featureFlags:["qa_v2","ce_auto_content","ce_auto_content_gen_bfs"],tags:[enI.$.AI],flags:["edit","design"],iconType:Q.createElement(function(e){return Q.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},Q.createElement("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"m6.953 5.91-.315 1.26-1.26.315c-.504.126-.504.844 0 .97l1.26.315.315 1.26c.127.504.844.504.97 0l.315-1.26 1.26-.315c.505-.126.505-.844 0-.97l-1.26-.315-.314-1.26c-.127-.505-.844-.505-.97 0Zm7.84.09a1 1 0 0 1 1.414 0L18 7.793a1 1 0 0 1 0 1.414l-1.646 1.646L9.5 17.707a1 1 0 0 1-.707.293H7a1 1 0 0 1-1-1v-1.793a1 1 0 0 1 .293-.707l6.853-6.854L14.793 6Zm-.586 2L16 9.793 17.293 8.5 15.5 6.707 14.207 8Zm1.086 2.5L13.5 8.707l-6.5 6.5V17h1.793l6.5-6.5Zm.546 5.37.28-1.12c.083-.333.556-.333.64 0l.28 1.12 1.119.28c.333.083.333.557 0 .64l-1.12.28-.28 1.12c-.083.332-.556.332-.64 0l-.28-1.12-1.119-.28c-.333-.083-.333-.557 0-.64l1.12-.28Z",clipRule:"evenodd"}))},null),quickAction:{module:Q.createElement(enD.X,{guids:[]}),beforeModuleOpen:()=>{(0,enM.Ag)(enL.JT.CONTENT_FILL,enA.cU,{guids:[],showToasts:!1},{})}},searchSynonyms:["fill content","lorem ipsum","rewrite placeholder text","replace duplicates"]}];function elr(){let e=(0,SF.yT)(),t=ela.filter(e=>{for(let t of e.featureFlags||[])if(!(0,eo.kc)()[t])return!1;return!0});return e?t.map(e=>({...e,disabled:!0})):t}function ell(){return!!("design"===(0,mD.my)()&&(0,eo.kc)().dse_quick_action_comp_search)}var eli=n(797490),elo=n(224654),els=n(83212);let elc=(0,nf.eU)({searchSessionId:null,currentSearch:null});async function eld(e,t,n){var a,r;let l=el.D.getState(),i=(0,t_.tB)(l),o=(0,uL.vx)(l),s=(0,lS.eD)(l);if(!i||null==o)return;let c=(0,i0.g)(),d=ef.zl.get(elc).searchSessionId,u={type:"text",query:e,assetTypeOption:{type:t,fileKey:i.key},openFile:i,inDesignEditor:(0,mD.AU)((0,c$.hK)(l))===dV._Y.DESIGN,hasCommunityLibrariesInEditor:n,fileVersion:o,currentOrgId:s,fileByKey:(0,uL.t_)(l),libraryByLibraryKey:ef.zl.get(fm.qp)};ef.zl.set(elc,()=>({searchSessionId:d,currentSearch:{queryId:c,input:u,result:els.Qw.loading()}}));try{let e=1;for(;!(0,cq.Wg)(el.D.getState())&&e<=10;)await new Promise(t=>setTimeout(t,200*e)),e++;if(!(0,cq.Wg)(el.D.getState()))throw Error("Failed to initialize assets");let t=await function(e,t){let{query:n,assetTypeOption:a,openFile:r,inDesignEditor:l,hasCommunityLibrariesInEditor:i,fileVersion:o,currentOrgId:s,fileByKey:c,libraryByLibraryKey:d}=e;switch(a.type){case dT.I.LOCAL:return cq.YG.computeLocalResultsPromise(n,null==r?void 0:r.key);case dT.I.FILE:return cq.YG.computeFileResultsPromise(n,a.fileKey,l,()=>Promise.resolve(i()),t);case dT.I.RECENT:case dT.I.ALL:return cq.YG.computeAllResultsPromise(n,l,o,s,r,c,d,()=>Promise.resolve(i()),t);default:return(0,re.xb)(a,"Unknown search type")}}(u,d),n=(0,cq.Ow)(t.normalizedSearchResults);if((null==(a=ef.zl.get(elc).currentSearch)?void 0:a.queryId)!==c)return;ef.zl.set(elc,()=>({searchSessionId:d,currentSearch:{queryId:c,input:u,result:els.Qw.loaded(n)}}))}catch(e){if((null==(r=ef.zl.get(elc).currentSearch)?void 0:r.queryId)!==c)return;ef.zl.set(elc,()=>({searchSessionId:d,currentSearch:{queryId:c,input:u,result:els.Qw.error(e)}}))}}function elu(){tW.sn.tryStop(en_.gc),tW.sn.start(en_.gc)}function elm(){let e=(0,ef.md)(t_.ze)||"",t=(0,$.d4)(e=>e.selectedView),n=(0,ef.md)(WU.rE),a=(null==n?void 0:n.source)||"";return(0,Q.useCallback)(({quickActionsSessionId:n,quickActionsQueryId:r,searchQuery:l,numSearchResults:i,currentSelection:o,module:s,moduleFilters:c,qaVersion:d,searchQueryResults:u})=>{let m=tW.sn.tryStop(en_.gc);(0,er.sx)(en_.RA,{quickActionsSessionId:n,quickActionsQueryId:r,searchQuery:l,numSearchResults:i,currentSelection:o,module:s,moduleFilters:c,qaVersion:d,fileKey:e,searchLatencyMs:m,searchQueryResults:u,source:a,rankingAlgorithm:elp(s),productType:(0,cB.v5)(t,null)},{forwardToDatadog:!0})},[e,t,a])}function elp(e){switch(e){case WU.Jc.ALL:return(0,eo.kc)().qa_search_frecency?en_.Nv:en_.NP;case WU.Jc.EXTENSIONS:return en_.uP;case WU.Jc.ASSETS:return en_.tq;default:(0,re.xb)(e)}}function el_(e){let t={},n=0;for(let a of e)for(let{key:e,isDisabled:r,resultType:l}of a.actions)n+=1,e in t||(t[e]={rank:n,section:a.name,executable:!r,resultType:l});return JSON.stringify(t)}function elf(e,t){return{name:e,actions:t.map(e=>({key:e.key,isDisabled:!1,resultType:en_.l4.EXTENSION}))}}function elh(e){var t;return e.action||e.pluginId||(null==(t=e.args)?void 0:t.labName)||e.name||""}var elg=n(207567),elE=n(421727),elv=n(79358),ely=n(893177),elb=n(369487),elC=n(450562),elw=n(49455),elT=n(963110),elx=n(454616),elN=n(151615),elk=n(436672),elS=n(598907),elI=n(802454),elA=n(774419),elP=n(377849);let elO="Loading suggestions...";function elL(e){let t=0,n=0,a=0,r=0;return e.parameters.forEach(e=>{let l=!!e.optional,i=!l,o=!!e.allowFreeform;t+=i?1:0,a+=l?1:0,n+=i&&o?1:0,r+=l&&o?1:0}),{pluginId:e.pluginId,pluginLocalFileId:e.pluginLocalFileId,command:e.command,source:e.pluginId?"imported":"development",displayName:e.displayName,paramCount:t+a,freeformParamCount:n+r,requiredParamCount:t,requiredFreeformParamCount:n,optionalParamCount:a,optionalFreeformParamCount:r,parameterOnly:e.parameterOnly,pluginRunID:(0,aR.fD)(),triggeredFrom:e.triggeredFrom}}function elM(e){(0,re.vA)(null!==e,"We should never be in the middle state if there are no optional parameters")}class elD extends nh.o6{constructor(e){let t;if(super(e),this.searchInputRef=Q.createRef(),this.scrollContainerRef=Q.createRef(),this.searchBarRef=Q.createRef(),this.primaryPlaceholderTextRef=Q.createRef(),this.ranWithParameters=!1,this.runArgs=null,this.loadingTimerID=null,this.pendingLoadingMessage=null,this.firstOptionalIndex=null,this.eventID=0,this.onSuggestions=e=>{switch(e.type){case"SUGGESTIONS":{let t=this.getDropdownItems(e.suggestions,this.state.searchQuery,this.state.activeParameterIndex),n=t.findIndex(e=>(function(e){return"freeform"!==e&&"skip"!==e})(e)),a=n>=0?n:this.state.activeItemIndex,r=t.length||!this.state.searchQuery?null:(0,eO.t)("fullscreen_actions.no_matches");this.clearLoadingMessage(),this.setState({activeItemIndex:a,items:t,errorMessage:r});break}case"ERROR":this.clearLoadingMessage(),this.setState({items:this.getDropdownItems([],this.state.searchQuery,this.state.activeParameterIndex),errorMessage:e.message||(0,eO.t)("fullscreen_actions.no_matches")});break;case"LOADING":this.setLoadingMessage(e.message)}},this.onBackspace=()=>{var e;let t=this.state.activeParameterIndex,n=null;if("middle"===t){if(elM(this.firstOptionalIndex),0===this.firstOptionalIndex){this.props.onExitParameterEntry();return}n=this.firstOptionalIndex-1}else if("final"===t)n=this.props.parameters.length-1;else{if(0===t){this.props.onExitParameterEntry();return}n=t-1}let a={...this.state.parameterValues},r=null==(e=this.getParameterForIndex(n))?void 0:e.key;r&&delete a[r],this.setParameterIndex(n,a)},this.onTextChange=e=>{let t;let n=this.state.activeParameterIndex;if("middle"===n)elM(this.firstOptionalIndex),t=this.firstOptionalIndex;else{if("final"===n)return;t=n}let a=this.props.parameters[t];this.triggerInputEvent({parameterValues:this.state.parameterValues,currentParameter:a,currentSearchQuery:e}),this.setLoadingMessage(elO),this.setState({searchQuery:e,items:this.getDropdownItems([],e,t),activeItemIndex:0,activeParameterIndex:t,mouseMoved:!1,errorMessage:""})},this.onSelectItem=(e,t)=>{let n;let a=this.state.activeParameterIndex;if("final"===a){"enter"===t&&this.launchPluginWithParameters(this.state.parameterValues);return}let r={...this.state.parameterValues};if("middle"!==a){if(0===this.state.items.length)return;let n=this.props.parameters[a];if(e<0||e>=this.state.items.length){let r="Trying to select suggestion at invalid index";console.error(r),(0,ar.Lo)("PluginParameterEntry","invalid index",{index:e,items:this.state.items.length,currentIndex:a,parameter:n.name,keyPress:t}),(0,ar.$D)(ao.e.EXTENSIBILITY,Error(r));return}let l=this.state.items[e];"skip"===l||("freeform"===l?r[n.key]={name:this.state.searchQuery}:((0,re.KF)(!this.state.loadingMessage,"Selected item while loading"),r[n.key]=l))}let l=this.firstOptionalIndex;if("middle"===a){if(elM(this.firstOptionalIndex),"enter"===t){this.launchPluginWithParameters(r);return}n=this.firstOptionalIndex}else if(a===this.props.parameters.length-1){if("enter"===t){this.launchPluginWithParameters(r);return}n="final"}else n=null!==l&&a===l-1?"tab"===t?l:"middle":a+1;this.setParameterIndex(n,r),this.searchInputRef.current.focus()},this.onKeyDown=nh.C0(this,"keydown",e=>{var t,n;let a=e=>{let t=this.state.activeItemIndex+e;return t<0?this.state.items.length-1:t%this.state.items.length},r=ec.Ay.mac?(0,es.vN)(e,es.xH.META):(0,es.vN)(e,es.xH.CONTROL);switch(e.keyCode){case es.Uz.ENTER:e.preventDefault(),this.onSelectItem(this.state.activeItemIndex,"enter");break;case es.Uz.TAB:e.preventDefault(),this.onSelectItem(this.state.activeItemIndex,"tab");break;case es.Uz.DOWN_ARROW:if(e.preventDefault(),this.state.items.length>0){let e=a(1);this.setState({activeItemIndex:e}),null==(t=this.scrollContainerRef.current)||t.scrollElementAtIndexIntoView(e)}break;case es.Uz.UP_ARROW:if(e.preventDefault(),this.state.items.length>0){let e=a(-1);this.setState({activeItemIndex:e}),null==(n=this.scrollContainerRef.current)||n.scrollElementAtIndexIntoView(e)}break;case es.Uz.BACKSPACE:0===this.state.searchQuery.length?(e.preventDefault(),this.onBackspace(),e.stopPropagation()):("final"===this.state.activeParameterIndex||"middle"===this.state.activeParameterIndex)&&e.preventDefault();break;case es.Uz.ESCAPE:e.preventDefault(),this.props.dispatch(nP.oB());break;case es.Uz.P:case es.Uz.FORWARD_SLASH:r&&(e.preventDefault(),this.props.dispatch(nP.oB()));break;case es.Uz.EQUALS:case es.Uz.DASH:r&&(e.preventDefault(),"-"===e.key?lT.Y5.triggerAction("zoom-out"):lT.Y5.triggerAction("zoom-in"));break;case es.Uz.R:case es.Uz.S:case es.Uz.D:case es.Uz.E:case es.Uz.F:case es.Uz.O:if(r){e.preventDefault();let t=this.state.searchQuery+e.key;this.onTextChange(t)}}}),this.onSearchChange=nh.Z7(this,"change",e=>{let t=e.currentTarget.value;this.onTextChange(t)}),this.renderResult=(e,t,n)=>{let a,r="",l="";return"skip"===t?(r=`Skip "${e.name}"`,l="skip"):"freeform"===t?(r=this.state.searchQuery,l="skip"):(r=t.name,l=t.name,a=elV(t,elI.ZR)),Q.createElement(elH,{recordingKey:nh.Pt(this.props,"suggestion",l),active:n===this.state.activeItemIndex,key:n,suggestion:r,onClick:e=>this.onSelectItem(n,"enter"),onMouseMove:()=>{this.state.mouseMoved||this.setState({mouseMoved:!0,activeItemIndex:n})},icon:a,onMouseEnter:()=>{this.state.mouseMoved&&this.setState({activeItemIndex:n})}})},(0,ar.Lo)("PluginParameterEntry","Starting parameter entry for plugin",{parameters:e.parameters,displayName:e.displayName,parameterOnly:e.parameterOnly,pluginId:e.pluginId,pluginLocalFileId:e.pluginLocalFileId,command:e.command}),0===e.parameters.length)throw Error("Must specify at least one parameter");let n=e.parameters.findIndex(e=>e.optional);this.firstOptionalIndex=n<0?null:n,t=e.initialParameterValues?"final":e.parameters[0].optional?"middle":0,this.handler=this.runPlugin();let a=this.getParameterForIndex(t);a&&this.triggerInputEvent({parameterValues:{},currentParameter:a,currentSearchQuery:""}),this.setLoadingMessage("Loading plugin..."),this.state={searchQuery:"",items:[],errorMessage:null,loadingMessage:null,activeItemIndex:0,parameterValues:e.initialParameterValues||{},activeParameterIndex:t,mouseMoved:!1,hidePluginName:!1}}getParameterForIndex(e){return"middle"===e||"final"===e?null:this.props.parameters[e]}getCurrentParameter(){return this.getParameterForIndex(this.state.activeParameterIndex)}runPlugin(){var e;let t=null;if(this.props.pluginId?this.props.allSavedPlugins[this.props.pluginId]?t=this.props.allSavedPlugins[this.props.pluginId]:this.props.publishedPlugins[this.props.pluginId]&&(t=(0,iE.uF)(this.props.publishedPlugins[this.props.pluginId])):this.props.pluginLocalFileId&&(t=this.props.localExtensions[this.props.pluginLocalFileId]),!t)throw Error("Plugin not runnable");let{canRun:n}=(0,iE.JT)({plugin:t,editorType:this.props.editorType});if(!n)throw Error("Plugin not runnable");this.runArgs={plugin:t,command:this.props.command||"",queryMode:!0,runMode:"default",triggeredFrom:"parameter-entry",openFileKey:(null==(e=this.props.openFile)?void 0:e.key)||"",deferRunEvent:!0,isWidget:!1};let a=(0,iv.D)();return ra.R.instance.enqueue({mode:"run-forever",runPluginArgs:this.runArgs}),a}async triggerInputEvent(e){this.eventID++;let t=this.eventID,n=await this.handler;this.eventID===t&&n.triggerParameterInputEvent({...e,onSuggestions:e=>{this.eventID===t&&this.onSuggestions(e)}})}updateLayout(){let e=0===this.state.activeParameterIndex&&!this.props.parameters[0].optional;if(void 0===this.state.placeholderWidth&&!e){if(this.primaryPlaceholderTextRef.current){let e=this.primaryPlaceholderTextRef.current.offsetWidth;this.setState({placeholderWidth:Math.min(250,Math.max(e,120))})}else this.setState({placeholderWidth:0})}let t=this.searchBarRef.current,n=t.offsetWidth<t.scrollWidth;e||!n||this.state.hidePluginName||this.setState({hidePluginName:!0}),t.scrollLeft=t.scrollWidth}componentDidMount(){super.componentDidMount(),(0,er.sx)("Parameter Entry Started",elL(this.props)),this.searchInputRef.current.focus(),this.updateLayout()}componentDidUpdate(e,t){super.componentDidUpdate(e,t),this.updateLayout()}componentWillUnmount(){var e,t;super.componentWillUnmount(),this.ranWithParameters||(0,aR.wY)();let n=(e=this.props.parameters,t=this.state.parameterValues,e.reduce((e,n)=>(function(e,t,n){var a;let r=!!n[t.key],l=!!t.optional,i=!l;return a={requiredCount:i?1:0,optionalCount:l?1:0,requiredEntered:r&&i?1:0,optionalEntered:r&&l?1:0,entered:r?1:0},{requiredCount:e.requiredCount+a.requiredCount,optionalCount:e.optionalCount+a.optionalCount,requiredEntered:e.requiredEntered+a.requiredEntered,optionalEntered:e.optionalEntered+a.optionalEntered,entered:e.entered+a.entered}})(e,n,t),{requiredCount:0,optionalCount:0,requiredEntered:0,optionalEntered:0,entered:0}));this.ranWithParameters&&n.requiredEntered!==n.requiredCount&&((0,ar.Lo)("PluginParameterEntry","Parameter entry mismatch",{requiredParameters:this.props.parameters,parameterValues:this.state.parameterValues}),(0,ar.$D)(ao.e.EXTENSIBILITY,Error("Plugin ran successfully with parameters, but not all parameters were recorded")));let a=elL(this.props);(0,er.sx)("Parameter Entry Finished",{...a,success:this.ranWithParameters,parametersEntered:n.entered,requiredParametersEntered:n.requiredEntered,optionalParametersEntered:n.optionalEntered})}getDropdownItems(e,t,n){if("middle"===n||"final"===n)return[];let a=e.slice(),r=this.props.parameters[n];t.length>0&&r.allowFreeform&&a.unshift("freeform");let l=this.props.parameters[n];return 0===t.length&&l.optional&&a.unshift("skip"),a}setLoadingMessage(e){if(this.loadingTimerID){this.pendingLoadingMessage=e;return}this.pendingLoadingMessage=e,this.loadingTimerID=setTimeout(()=>{this.setState({loadingMessage:this.pendingLoadingMessage}),this.loadingTimerID=null,this.pendingLoadingMessage=null},300)}clearLoadingMessage(){this.loadingTimerID&&(clearTimeout(this.loadingTimerID),this.loadingTimerID=null),this.setState({loadingMessage:null})}setParameterIndex(e,t){let n=this.getParameterForIndex(e);n&&((0,ar.Lo)("PluginParameterEntry","setParameterIndex",{nextParameter:n.name}),this.triggerInputEvent({parameterValues:t,currentParameter:n,currentSearchQuery:""}));let a=!(0===e&&!this.props.parameters[0].optional)&&this.state.hidePluginName;this.searchInputRef.current.focus(),this.setLoadingMessage(elO),this.setState({searchQuery:"",items:this.getDropdownItems([],"",e),activeItemIndex:0,activeParameterIndex:e,parameterValues:t,mouseMoved:!1,errorMessage:null,placeholderWidth:void 0,hidePluginName:a})}launchPluginWithParameters(e){if(this.setState({parameterValues:e}),this.handler.then(async t=>{let{isCancelled:n}=await (0,elN.y)(this.runArgs);n||t.triggerRunEvent({command:"parameters",parameters:e})}),this.runArgs){let t=this.runArgs;if(this.runArgs=null,t.queryMode=!1,t.deferRunEvent=!1,t.parameterValues=e,this.props.recentlyUsedCommandName){let e=this.props.recentlyUsedCommandName;this.props.dispatch(cM.Rw({currentDisplayName:e,newCommand:{displayName:e,runPluginArgs:t}}))}(0,wO.C3)(t)}this.ranWithParameters=!0,this.props.dispatch(nP.oB())}renderResults(){if("middle"===this.state.activeParameterIndex)return Q.createElement("div",{className:elS.wM},Q.createElement("div",{className:elS.FV},Q.createElement("div",{className:elS.h8},Q.createElement(eO.Tx,{id:"fullscreen_actions.plugin_parameters.tab"})),Q.createElement("div",{className:elS.w8},Q.createElement(eO.Tx,{id:"fullscreen_actions.plugin_parameters.to_enter_optional_parameters"}))),Q.createElement("div",{className:elS.FV},Q.createElement("div",{className:elS.h8},Q.createElement(eO.Tx,{id:"fullscreen_actions.plugin_parameters.enter"})),Q.createElement("div",{className:elS.w8},Q.createElement(eO.Tx,{id:"fullscreen_actions.plugin_parameters.to_run_plugin"}))));if("final"===this.state.activeParameterIndex)return null;let e=this.props.parameters[this.state.activeParameterIndex],t=null;if(this.state.errorMessage?t=Q.createElement("div",{className:elI.Tk},this.state.errorMessage):this.state.loadingMessage&&(t=Q.createElement("div",{className:elI.Tk},this.state.loadingMessage)),0===this.state.items.length)return t;let n=t?this.state.items.length+1:this.state.items.length;return Q.createElement(elk.h,{ref:this.scrollContainerRef,resultCount:n},this.state.items.map((t,n)=>this.renderResult(e,t,n)),t)}renderCurrentParameters(){var e;let t=null==(e=this.getCurrentParameter())?void 0:e.key,n=elB(this.props.parameters,this.state.parameterValues,t);return Q.createElement(Q.Fragment,null,Q.createElement(elF,{key:"plugin-name",value:this.state.hidePluginName?void 0:this.props.displayName,icon:elU(this.props.allSavedPlugins,this.props.publishedPlugins,this.props.pluginId)}),n)}placeholderElement(){let e=this.state.activeParameterIndex,t=this.state.searchQuery.length>0;if("final"===e)return Q.createElement(Q.Fragment,null);if("middle"===e){let e=(0,n_.WI)(this.props.parameters.map(e=>e.optional?e.name:null)).join(", ");return Q.createElement("span",{ref:this.primaryPlaceholderTextRef},Q.createElement(eO.Tx,{id:"fullscreen_actions.plugin_parameters.optional_optional_names",optionalNames:e}))}{let n=this.props.parameters[e],a=this.props.parameters.slice(e);if(n.optional){let e=a.map(e=>e.name);return t&&(e[0]=""),Q.createElement("span",{ref:this.primaryPlaceholderTextRef},e.join(", "))}{let e=(0,n_.WI)(a.map(e=>e.optional?null:e.name)),n=(0,n_.WI)(a.map(e=>e.optional?e.name:null));return t&&(e[0]=""),Q.createElement("span",null,Q.createElement("span",{ref:this.primaryPlaceholderTextRef},e.join(", ")),n.length>0&&Q.createElement(Q.Fragment,null,Q.createElement("span",{className:elS.yL,key:"divider"},"|"),Q.createElement("span",{key:"optionalParams"},Q.createElement(eO.Tx,{id:"fullscreen_actions.plugin_parameters.optional_optional_names",optionalNames:n.join(", ")}))))}}}render(){let e=this.getCurrentParameter(),t=null==e?void 0:e.description,n=this.placeholderElement(),a="final"===this.state.activeParameterIndex?elS.ed:elS.Kf,r={minWidth:this.state.placeholderWidth?`${this.state.placeholderWidth}px`:void 0},l=this.renderResults();return Q.createElement(elk.H,{recordingKey:this.props.recordingKey||"",onKeyDown:this.onKeyDown},Q.createElement("div",{className:elI.$P},Q.createElement(eM.B,{svg:elP.A,className:elI.qc}),Q.createElement("div",{className:elS.ON,ref:this.searchBarRef},this.renderCurrentParameters(),Q.createElement("div",{className:a},Q.createElement("input",{ref:this.searchInputRef,className:elS.t6,onChange:this.onSearchChange,value:this.state.searchQuery,maxLength:150,spellCheck:!1,style:r}),Q.createElement("div",{className:elS.l4},Q.createElement("div",{className:elS.qf},Q.createElement("span",{className:elS.CZ},this.state.searchQuery),n))))),!!t&&Q.createElement("div",{className:ea()({[elS.WL]:!0,[elS.$8]:!l})},t),l)}}elD.displayName="PluginParameterEntry";let elR=(0,$.Ng)(function(e){let t=e.selectedView.editorType;return{openFile:e.openFile,publishedPlugins:e.publishedPlugins,publishedWidgets:e.publishedWidgets,allSavedPlugins:e.installedPluginVersions.plugins,localExtensions:e.localPlugins,orgEntity:(0,wP.Jl)(e),org:e.currentUserOrgId?e.orgById[e.currentUserOrgId]:null,editorType:t,userCanRunPlugins:(0,rt.GP)(e),activeTextReviewPlugin:e.mirror.appModel.activeTextReviewPlugin}},function(e){return{dispatch:e}})(elD);function elF(e){return Q.createElement("div",{className:elS.Io},e.icon&&Q.createElement("span",null,e.icon),e.value&&Q.createElement("span",null,e.value))}function elB(e,t,n){return e.filter(e=>t[e.key]&&e.key!==n).map(e=>t[e.key]&&Q.createElement(elF,{icon:elV(t[e.key],elS.nW),key:e.key,value:t[e.key].name}))}function elU(e,t,n){if(!n)return Q.createElement(eM.B,{className:elS.nW,svg:elA.A,ariaLabel:"plugin icon"});{let a=e[n];return a||(a=t[n]&&(0,iE.uF)(t[n])),Q.createElement(aU.V,{className:elS.nW,plugin:a,alt:"plugin icon"})}}class elH extends nh.o6{constructor(){super(...arguments),this.onClick=nh.cZ(this,"click",e=>{if(!this.props.onClick)return nh.aH;this.props.onClick(e)})}render(){let e=`${this.props.active?elI.ix:elI.Ke}`;return Q.createElement("div",{className:e,onClick:this.onClick,onMouseMove:this.props.onMouseMove,onMouseEnter:this.props.onMouseEnter},Q.createElement("div",{className:elI.EA},this.props.icon),Q.createElement("div",{className:elS.iu},Q.createElement("div",{className:elI.D6},this.props.suggestion)))}}function elV(e,t){let n="";if(e.iconUrl)n=e.iconUrl;else if(e.icon&&"string"==typeof e.icon)n="data:image/svg+xml;base64,"+eaa.aj(e.icon);else{if(!e.icon||"string"==typeof e.icon)return;n="data:application/octet-stream;base64,"+eaa.lF(e.icon)}return Q.createElement(elG,{className:t,src:n})}elH.displayName="ParameterSuggestion";class elG extends nh.o6{render(){let e=new URL(this.props.src);return e.hostname===window.location.hostname?((0,ar.$D)(ao.e.EXTENSIBILITY,Error("same-origin URL blocked in UntrustedImage")),Q.createElement(Q.Fragment,null)):["https:","http:","data:","blob:"].includes(e.protocol)?Q.createElement("img",{src:this.props.src,className:this.props.className,crossOrigin:"anonymous",alt:""}):((0,ar.$D)(ao.e.EXTENSIBILITY,Error("Unexpected protocol blocked in UntrustedImage")),Q.createElement(Q.Fragment,null))}}function elK({itemPath:e}){let t=Q.useRef(null),n=Q.useRef(null),a=Q.useRef(null),r=Q.useRef(null),[l,i]=Q.useState("full"),o=(0,ue.Z)(e);Q.useEffect(()=>{e!==o&&"full"!==l&&i("full"),"full"===l&&s()},[o,e,l]);let s=()=>{var e,l,o,s,c;let d=null==(e=n.current)?void 0:e.offsetWidth,u=null==(l=r.current)?void 0:l.offsetWidth,m=null==(o=a.current)?void 0:o.offsetWidth,p=null==(s=t.current)?void 0:s.scrollWidth,_=null==(c=t.current)?void 0:c.clientWidth;void 0!==d&&void 0!==u&&void 0!==m&&p&&_&&_<p&&(d+u>_?i("plugin"):i("path"))};if(1===e.length)return Q.createElement("span",{ref:r},e[0]);let c=e.slice(1,e.length-1),d=Q.createElement(eM.B,{svg:Cf.A,className:elI.VU}),u=Q.createElement("span",{ref:n},"plugin"===l?"...":e[0],d),m=Q.createElement("span",{ref:a},"plugin"!==l&&Q.createElement(Q.Fragment,null,"path"===l?Q.createElement(Q.Fragment,null,"...",d):c.map((e,t)=>Q.createElement("span",{key:t},e," ",d))));return Q.createElement("div",{ref:t,className:elI.D6},u,m,Q.createElement("span",{ref:r},e[e.length-1]))}function elW({runPluginArgs:e,itemParameterArgs:t,allSavedPlugins:n,publishedPlugins:a,pluginId:r}){let[l,i]=Q.useState(!1),o=Q.useRef(null);Q.useEffect(()=>{let e=o.current;e.offsetWidth<e.scrollWidth&&!l&&i(!0)},[l]);let s=e.parameterValues;if(s){let e=elB(t.parameters,s);return Q.createElement("div",{className:elS.ON,ref:o},Q.createElement(elF,{key:"plugin-name",value:l?void 0:t.displayName,icon:elU(n,a,r)}),e)}return Q.createElement(Q.Fragment,null)}function elz(){let e=Q.useRef(Date.now()),t=Q.useRef(0),n=Q.useRef(!1),a=Q.useCallback(()=>{!n.current&&t.current++},[]),r=Q.useCallback(()=>{if(n.current)return;n.current=!0;let a=Date.now()-e.current,r=t.current;return e.current=Date.now(),t.current=0,{durationMs:a,numKeyStrokes:r}},[]);return(0,Q.useEffect)(()=>(document.addEventListener("keydown",a),()=>{document.removeEventListener("keydown",a)})),{createMetrics:r}}function elj({item:e,searchQuery:t,qaVersion:n,numSearchResults:a,searchPosition:r,moduleFilters:l,numKeyStrokes:i,durationMs:o}){var s;let c="plugins-menu-item"===e.name&&e.args&&e.args.plugin_search_string;elY({action:elh(e),searchQuery:t,numSearchResults:a,rankingAlgorithm:elp(WU.Jc.ALL),searchPosition:r,module:WU.Jc.ALL,qaVersion:n,isAi:(null==(s=e.tags)?void 0:s.includes(enI.$.AI))??!1,isPlugin:c,moduleFilters:l,numKeyStrokes:i,durationMs:o})}function elY(e){let{quickActionsSessionId:t,quickActionsQueryId:n,currentSelection:a,fileKey:r,productType:l,source:i}=function(){var e,t;let n=el.D.getState(),a=(0,elb.l)(n),r=(null==(e=n.openFile)?void 0:e.key)??"",l=(0,cB.v5)(n.selectedView,null),i=ef.zl.get(WU.dd)??"";i||(0,ar.$D)(ao.e.EXTENSIBILITY,Error(`No quick actions session ID found when logging ${en_.OW}`));let o=ef.zl.get(WU.Rt);return{currentSelection:a,fileKey:r,productType:l,source:(null==(t=ef.zl.get(WU.rE))?void 0:t.source)??"",quickActionsSessionId:i,quickActionsQueryId:o}}(),o={...e,quickActionsSessionId:t,currentSelection:a,fileKey:r,productType:l,quickActionsQueryId:n,source:i};(0,er.sx)(en_.OW,o,{forwardToDatadog:!0})}elG.displayName="UntrustedImage";var elZ=n(758271),elX=n.n(elZ);function elq(e){return Q.createElement("svg",{width:"16",height:"16",fill:"none",viewBox:"0 0 16 16",...e},Q.createElement("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"m3.5 3.5.257-1.03c.064-.252.422-.252.486 0L4.5 3.5l1.03.257c.252.064.252.422 0 .486L4.5 4.5l-.257 1.03c-.064.252-.422.252-.486 0L3.5 4.5l-1.03-.257c-.252-.064-.252-.422 0-.486L3.5 3.5Zm1.562 3.985L7 7l.485-1.938.058-.233.105-.422.042-.165c.08-.323.54-.323.62 0l.042.165.105.422.058.233L9 7l1.938.485.233.058.422.105.165.042c.323.08.323.54 0 .62l-.165.042-.422.105-.232.058L9 9l-.485 1.938-.058.233-.105.422-.042.165c-.08.323-.54.323-.62 0l-.042-.165-.105-.422-.058-.232L7 9l-1.938-.485-.233-.058-.422-.105-.165-.042c-.323-.08-.323-.54 0-.62l.165-.042.422-.105.233-.058Zm1.113 2.34L4 9.28c-1.333-.334-1.333-2.228 0-2.562l2.176-.544L6.72 4c.334-1.333 2.228-1.333 2.562 0l.544 2.176L12 6.72c1.333.334 1.333 2.228 0 2.562l-2.176.544L9.28 12c-.334 1.333-2.228 1.333-2.562 0l-.544-2.176Zm5.583.645L11.5 11.5l-1.03.258c-.252.063-.252.421 0 .485l1.03.257.258 1.03c.063.252.421.252.485 0l.257-1.03 1.03-.258c.252-.063.252-.421 0-.485L12.5 11.5l-.258-1.03c-.063-.252-.421-.252-.485 0Z",clipRule:"evenodd"}))}var elJ=n(989598),elQ=n(455140),el$=n(285295),el0=n(965399),el1=n(560802),el2=n(686063),el5=n(254882),el4=n(863767);function el3({size:e="1/1",rounded:t=!0,...n}){return Q.createElement("div",{className:tw.cx.colorBgSecondary.wFull.flex.alignCenter.justifyCenter.p16.$,style:tT.sx.if(t,{borderRadius:"8px"}).case([["fill"===e,{height:"100%"}],["1/1"===e,{aspectRatio:"1/1"}]]).add({animationFillMode:"backwards"}).$},Q.createElement(ug.M,{item:n.asset,className:tw.cx.maxWFull.$,style:tT.sx.add({objectFit:"scale-down"}).$,alt:n.asset.name,shouldGenerateLocalThumbnail:!0,draggable:!1}))}let el6="Quick Actions Component Search";function el7({numberOfGridColumns:e=4,maxResults:t,sectionHeader:n=null}){var a;let{currentSearch:r}=(0,ef.md)(elc),l=(0,$.d4)(t_.tB),i=(0,$.d4)(e=>e.dropdownShown),o=(0,$.d4)(uL.u0),s=(0,ef.md)(fm.oE),c=(null==i?void 0:i.type)===yu.Ee?null==(a=i.data)?void 0:a.entryPoint:void 0;return r&&"disabled"!==r.result.status?"loading"===r.result.status?Q.createElement(Q.Fragment,null,n,Q.createElement(el5.V,{columns:e,padding:8,gap:12},Array.from({length:e}).map((e,t)=>Q.createElement(el5.V.Item,{key:t},Q.createElement("div",{className:tw.cx.wFull.flex.itemsCenter.justifyCenter.radiusMedium.$},Q.createElement(el4.V,{variant:"skeleton",animationDelay:150*t})),Q.createElement("div",{className:tw.cx.wFull.pt8.$},Q.createElement(el2.O.Container,null,Q.createElement(el2.O.SkeletonLine,null),Q.createElement(el2.O.SkeletonLine,null))))))):"errors"===r.result.status?Q.createElement(Q.Fragment,null,n,Q.createElement(eO.Tx,{id:"design_systems.assets_panel.error"})):0===r.result.data.length?Q.createElement(Q.Fragment,null,n,Q.createElement(eO.Tx,{id:"fullscreen_actions.quick_actions_component_search.no-results",searchQuery:r.input.query})):Q.createElement(Q.Fragment,null,n,Q.createElement(el1.x,{primary:!0,columns:e,padding:8,gap:12},r.result.data.slice(0,t??r.result.data.length).map((e,t)=>Q.createElement(el9,{key:t,afterSuccessfulInsert:close,asset:e,fileNameByKey:o,fileNameByLibraryKey:s,assetTypeDropdownSelection:dT.I.ALL,searchQuery:r.input.query,searchSessionId:"",entryPoint:c,openFileKey:(null==l?void 0:l.key)??"",sectionPosition:t})))):null}var el8=((q=el8||{}).KEYBOARD_OR_CLICK="Keyboard navigation or click",q.DRAG_AND_DROP="Drag and drop",q);function el9({asset:e,fileNameByKey:t,fileNameByLibraryKey:n,assetTypeDropdownSelection:a,searchQuery:r,searchSessionId:l,afterSuccessfulInsert:i,entryPoint:o,openFileKey:s,sectionPosition:c}){let d=(0,lV.Hu)(e.file_key),u=(0,lV.GZ)(e.file_key,d),m=Q.useMemo(()=>({assetKey:(0,lV.u2)(e),assetFileKey:(0,fu.hH)(e),assetLibraryKey:e.library_key,sectionPosition:c,assetTypeDropdownSelection:a,libraryType:d,viewMode:"GRID",searchQuery:r,searchSessionId:l,source:el6,sourceSection:el6,type:e.type===lz.PW.COMPONENT?"component":"state_group",subscriptionLevel:u}),[e,a,d,r,l,u,c]),p=(0,pH.u)({canSwap:!1,openFileKey:s,sourceForTracking:el6,insertAsChildOfCanvas:!0,insertLogArgsOverride:{...m,entryPoint:o,insertionAction:"Keyboard navigation or click"}}),_=(0,Q.useCallback)(()=>{p({altKey:!1},e),i()},[i,e,p]),f=(0,fu.hH)(e),h=f?null==t?void 0:t[f]:void 0,g=e.library_key?null==n?void 0:n[e.library_key]:void 0,E=(0,eo.u4)("ds_use_lib_keys",g,h),v={text:"Insert",shortcuts:[{key:es.Uz.ENTER}],onAction:_};return Q.createElement(el1.x.Item,{primaryAction:v},Q.createElement(el1.x.GridItemHighlight,null,Q.createElement(el3,{asset:e})),Q.createElement(el1.x.ItemFooter,null,Q.createElement("div",{className:tw.cx.pt8.flex.flexColumn.gap2.alignLeft.$},Q.createElement("span",{className:tw.cx.textBodyMedium.colorText.truncate.$},e.name),Q.createElement("span",{className:tw.cx.textBodyMedium.colorTextSecondary.truncate.$},E))))}var eie=n(74723),eit=n(858423),ein=n(490301),eia=n(210018),eir=n(839475),eil=n(401619);function eii({focusHandle:e,numberOfGridColumns:t=3,maxResults:n,primary:a=!1,initialState:r=null,sectionHeader:l=null}){let i=(0,ef.md)(elJ.hO.currentSearchAtom),o=(0,ef.md)(elJ.hO.sortByAtom),s=(0,eit.O)(),c=(0,eie.r)(e),{currentSearch:d}=(0,ef.md)(elc);if(!i||"disabled"===i.result.status)return Q.createElement(Q.Fragment,null,r);if("loading"===i.result.status||(null==d?void 0:d.result.status)==="loading")return Q.createElement(Q.Fragment,null,l,Q.createElement(el5.V,{columns:t,padding:8,gap:12},Array.from({length:t}).map((e,t)=>Q.createElement(el5.V.Item,{key:t},Q.createElement("div",{className:tw.cx.wFull.flex.itemsCenter.justifyCenter.radiusMedium.$},Q.createElement(el4.V,{variant:"skeleton",animationDelay:150*t})),Q.createElement("div",{className:tw.cx.wFull.pt8.$},Q.createElement(el2.O.Container,null,Q.createElement(el2.O.SkeletonLine,null),Q.createElement(el2.O.SkeletonLine,null)))))));if("errors"===i.result.status)return Q.createElement(Q.Fragment,null,l,Q.createElement(ein.I,{icon:eil.A,title:(0,eO.t)("asset_suggestions.modal_error_title"),subtitle:(0,eO.t)("asset_suggestions.modal_error_description"),variant:"danger"}));if(0===i.result.data.length)return Q.createElement(Q.Fragment,null,l,Q.createElement(ein.I,{icon:eir.A,title:(0,eO.t)("asset_suggestions.modal_no_results_title"),subtitle:(0,eO.t)("asset_suggestions.modal_no_results_description")}));let u=(0,eia.t)(i.result.data,o);return Q.createElement(Q.Fragment,null,l,Q.createElement(el1.x,{primary:a,columns:t,padding:8,gap:12},u.slice(0,n??u.length).map((e,t)=>{let n=Q.createElement(el2.O.Container,null,Q.createElement(el2.O.Title,{badge:s(e)?Q.createElement(el2.O.Badge,null,Q.createElement(eO.Tx,{id:"asset_suggestions.top_match_label"})):null},e.file_name),Q.createElement(el2.O.EditInfo,{editor:{name:e.editor_name,imageUrl:e.editor_img_url},lastEditedAt:e.last_edited_at})),{primaryAction:a,secondaryAction:r,tertiaryAction:l}=c(e,t,i,u);return Q.createElement(el1.x.Item,{key:`${e.file_key}-${e.node_id}`,primaryAction:a,secondaryAction:r,tertiaryAction:l},Q.createElement(el1.x.GridItemHighlight,null,Q.createElement(el4.V,{variant:"default",src:e.thumbnail_url??"",alt:"A fragment"})),Q.createElement(el1.x.ItemFooter,null,Q.createElement("div",{className:tw.cx.pt8.$},n)))})))}function eio({children:e,paddingHorizontal:t}){return Q.createElement("div",{className:tw.cx.flex.itemsCenter.gap4.pt4.pb8.$,style:tT.sx.add({paddingRight:`${t}px`,paddingLeft:`${t}px`}).$},e)}async function eis(e,t){let n=ef.zl.get(WU.dd);if(n){if(e){let t;(0,er4.u)({type:"text"},{sessionId:n,canvasSelection:void 0,searchQuery:e});try{t=await ef.zl.get(dq.ce)}catch{t=()=>!1}eld(e,dT.I.ALL,t)}t()}}function eic({searchHandle:e}){let{currentSearch:t}=(0,ef.md)(elc),n=(0,ef.md)(elJ.hO.currentSearchAtom),a=(0,y1.yy)(),{push:r}=(0,enp.c)();if(!t||!n||"disabled"===t.result.status||"disabled"===n.result.status)return Q.createElement("div",{className:tw.cx.flex.flexColumn.itemsCenter.colorTextSecondary.$,style:tT.sx.add({paddingTop:"96px"}).$,"data-testid":"assets-tab"},Q.createElement(eO.Tx,{id:"design_systems.assets_panel.search"}));let l=Q.createElement(eio,{paddingHorizontal:8},Q.createElement(eio.Icon,null,Q.createElement(elq,null)),Q.createElement(eio.Title,{onSeeAll:()=>r(Q.createElement(eid,null))},Q.createElement(eO.Tx,{id:"assets_in_actions.fragments_section_title",org:(null==a?void 0:a.name)??"your organization"}))),i=Q.createElement(eio,{paddingHorizontal:8},Q.createElement(eio.Title,{onSeeAll:()=>r(Q.createElement(eiu,null))},Q.createElement(eO.Tx,{id:"assets_in_actions.assets_section_title"})));return Q.createElement(el0.f,{key:null==t?void 0:t.queryId},Q.createElement("div",{className:ea()(tw.cx.flex.flexColumn.gap4.$,"assets_tab--bodyFontMedium--lfA3l text--fontPos11--2LvXf text--_fontBase--QdLsd"),"data-testid":"assets-tab"},Q.createElement(el7,{numberOfGridColumns:4,maxResults:4,sectionHeader:i}),Q.createElement(eii,{numberOfGridColumns:3,maxResults:3,focusHandle:e,sectionHeader:l,primary:(null==t?void 0:t.result.status)!=="loaded"||(null==t?void 0:t.result.data.length)===0})))}function eid(){let e=Q.useRef(null),t=(0,ef.md)(elJ.hO.currentSearchAtom);return Q.createElement(elE.n,{width:(0,rT.jz)(eng.X),height:480,bodyFontMedium:!0},Q.createElement(el$.t,{ref:e}),Q.createElement(elE.n.Header,null,Q.createElement(eim,null)),Q.createElement(elE.n.Body,null,Q.createElement(el0.f,{key:null==t?void 0:t.searchId},Q.createElement(eii,{focusHandle:e,primary:!0}))))}function eiu(){let e=Q.useRef(null),{currentSearch:t}=(0,ef.md)(elc);return Q.createElement(elE.n,{width:(0,rT.jz)(eng.X),height:480,bodyFontMedium:!0},Q.createElement(el$.t,{ref:e}),Q.createElement(elE.n.Header,null,Q.createElement(eim,null)),Q.createElement(elE.n.Body,null,Q.createElement(el0.f,{key:null==t?void 0:t.queryId},Q.createElement(el7,{numberOfGridColumns:6}))))}function eim({beforeBack:e}){return Q.createElement("div",{className:tw.cx.flex.itemsCenter.gap8.px8.py12.$},Q.createElement(elQ.o,{beforeBack:e}))}function eip(){return(0,ep.R)(e=>({...Object.keys(e.mirror.appModel).filter(yu.vg).reduce((t,n)=>(t[n]=e.mirror.appModel[n],t),{}),isReadOnly:e.mirror.appModel.isReadOnly}))}(e=>{e.Icon=function({children:e}){return Q.createElement("div",{style:{"--color-icon":"var(--color-icon-secondary)"}},e)},e.Title=function({children:e,onSeeAll:t}){return Q.createElement("div",{className:tw.cx.flex1.flex.itemsBaseline.justifyBetween.$},Q.createElement("span",{className:tw.cx.textBodyMediumStrong.colorTextSecondary.$},e),Q.createElement("button",{className:tw.cx.textBodyMedium.colorTextSecondary.$,onClick:t},Q.createElement(eO.Tx,{id:"assets_in_actions.section_see_more_button"})))}})(eio||(eio={}));var ei_=n(310951);let eif=()=>{let e=(0,$.d4)(e=>{var t;return null==(t=e.mirror)?void 0:t.appModel});return(t,n,a=!1)=>{let r=t[n];if(r&&(a||!r.disabled&&(!r.action||(0,yu.Yh)(e,n))))return r}};function eih(e){if("plugins-menu-item"===e.name)return e.args.plugin_search_string;let t=(0,TS.Dz)(e);return(0,TC.A)("displayForQuickCommand"in e&&e.displayForQuickCommand?e.displayForQuickCommand:t,e.args)}function eig(e){let t=eip(),n=(0,$.d4)(e=>e.selectedView),a=(0,$.d4)(e=>{var t;return null==(t=e.user)?void 0:t.locale});return Q.useMemo(()=>new TM.x(t,n,e,{includeDisabled:!0,acceptsUnicode:"ja"===a}),[e,t,n,a])}var eiE=n(50607),eiv=n(765406),eiy=n(575126),eib=n(229755);let eiC=e=>(0,TS.Zj)(e)&&!e.hideCheckForQuickCommand,eiw=()=>{};function eiT({item:e,searchQuery:t,searchIndex:n,createCommonMetrics:a}){var r;let{push:l}=(0,enp.c)(),i=(0,ig.Be)(),o=(0,ig.cW)(),{addFrecencyUsage:s}=(0,elw.fJ)(),c=(0,$.d4)(e=>e.recentlyUsedQuickCommands),d=(0,ig.fG)({searchSavedPlugins:!0,searchRecentPlugins:!0,searchLocalPlugins:!1,searchPublishedPlugins:!0}),u=(0,TS.Dz)(e),m=(0,$.d4)(e=>e.mirror.appModel),p=(0,$.wA)(),{close:_}=(0,enp.c)(),f=(0,eG.J2)((0,eH.UK)().showQuickCommandRankDebug),h=(0,ae.p8)("keyboardShortcuts"),g=(0,enQ.uf)(),E=(0,Q.useCallback)(()=>{_()},[_]),v=(0,hs.A)(E,300);(0,Q.useEffect)(()=>()=>{v.cancel()},[v]);let y=(0,Q.useCallback)((e,t)=>{let a=TI(e),r=c.filter(e=>e.displayName!==a&&!!n.getItem(m,e.displayName));r.length>=3&&r.pop(),r.unshift({displayName:a,runPluginArgs:t}),p(cM.PQ(r))},[m,p,c,n]),b=(0,Q.useCallback)((e,n)=>{var r;if(v.isPending()&&v.cancel(),e.disabled)return;function i(){elj(a()),y(e,e.runPluginArgs),s(e,t)}let o=!!(null==(r=e.args)?void 0:r.itemParameterArgs);if(!(o||"enter"===n))return;let c=null;if(e.quickAction){let t={};if("find-fragments-matching"===e.name&&(t.shouldResetSearchQuery=!1),e.quickAction.beforeModuleOpen){let t=(0,enu._V)();e.quickAction.beforeModuleOpen(t)}l(e.quickAction.module,t),i();return}if(o)switch(g(),n){case"enter":if(e.runPluginArgs&&!t)c=async()=>{await ra.R.instance.enqueue({mode:"run-forever",runPluginArgs:e.runPluginArgs})};else if(e.parametersRequired){let t=e.args.itemParameterArgs;l(Q.createElement(eiE.r,{onExitParameterEntry:ey.lQ,triggeredFrom:"quick-actions",parameters:t.parameters,displayName:t.displayName,parameterOnly:t.parameterOnly,pluginId:t.pluginId})),i();return}break;case"tab":if(e.args&&e.args.itemParameterArgs){let t=e.args.itemParameterArgs;l(Q.createElement(eiE.r,{onExitParameterEntry:ey.lQ,triggeredFrom:"quick-actions",parameters:t.parameters,displayName:t.displayName,parameterOnly:t.parameterOnly,pluginId:t.pluginId})),i();return}break;default:(0,re.xb)(n)}e.callback&&!c?c=async()=>{e.callback&&await e.callback((0,TS.Dz)(e),e.args,p)}:e.action&&(c=async()=>{if(!e.action)return;let t=eiw();if(t)return await t();oy.VU.get(e.action,"quick-actions",e.args)()}),eiC(e)&&!(0,pF.PN)()?v():e.keepMenuOpen||E(),c?c().then(g).catch(t=>{(0,ar.$D)(ao.e.EXTENSIBILITY,t,{extra:{item:e}})}):(0,ar.$D)(ao.e.EXTENSIBILITY,Error("No valid action triggered from quick actions"),{extra:{item:e}}),i()},[s,y,E,v,a,p,l,t,g]),C=e.shortcutText||(0,yu.c1)(h,u),w=void 0!==e.runPluginArgs,T="plugins-menu-item"===e.name&&!!e.args.itemParameterArgs&&e.args.itemParameterArgs.parameters.length>0,x=e.args&&e.menuActionType&&"run-local-plugin"===e.menuActionType,N=(()=>{let n=e.args;if(n&&n.itemParameterArgs&&e.runPluginArgs&&!t)return Q.createElement(elW,{runPluginArgs:e.runPluginArgs,itemParameterArgs:n.itemParameterArgs,pluginId:e.pluginId,allSavedPlugins:i.plugins,publishedPlugins:o});if(n&&n.itemPath){let e=n.itemPath;return Q.createElement(elK,{itemPath:e})}return TI(e)})(),k=eiC(e)?(0,TS.WJ)(m,e):void 0,S=e.name||e.action;return Q.createElement(eiv.B.Item,{key:S,primaryAction:{text:"Perform",shortcuts:[{key:es.Uz.ENTER},{key:es.Uz.TAB}],onAction:({shortcut:t})=>b(e,(null==t?void 0:t.key)===es.Uz.TAB?"tab":"enter")},actionLabel:!1,recordingKey:S},Q.createElement(elx._,{checked:k,disabled:e.disabled,label:N,icon:function(e){if(e.runPluginArgs&&!t)return Q.createElement(eM.B,{svg:eib.A,className:tw.cx.colorIcon.$});if("plugins-menu-item"===e.name){let t;return(e.pluginId&&(t=d(e.pluginId)),t&&!(0,rr.ZQ)(t))?Q.createElement(aU.V,{className:enh.ZR,plugin:t,role:"presentation"}):Q.createElement(eM.B,{className:tw.cx.colorIcon.w20.h20.bRadius4.$,svg:Sa.A,ariaLabel:`${e.name} icon`,autosize:!0})}let n=TI(e);return e.iconType&&"external_link"===e.iconType?Q.createElement(eM.B,{svg:eiy.A,className:tw.cx.colorIcon.$}):c.filter(e=>e.displayName===n).length>0?Q.createElement(eM.B,{svg:eib.A,className:tw.cx.colorIcon.$}):e.iconType&&"string"!=typeof e.iconType?e.iconType:void 0}(e),badge:x?Q.createElement(enz,null,Q.createElement(eO.Tx,{id:"fullscreen_actions.development"})):f?(()=>{let n=[],a=(0,eo.kc)().qa_search_frecency?(0,elT.y)(t,(0,elC.n)(e),(0,elw.x0)()):void 0;void 0!==a&&n.push(`F:${a}`),void 0!==e.stringMatchScore&&n.push(`M:${e.stringMatchScore}`),void 0!==e.popularityScore&&n.push(`P:${e.popularityScore}`);let r="";return e.searchSynonyms&&(r+=`Synonyms: ${e.searchSynonyms.join(", ")}`),Q.createElement("div",{className:tw.cx.ml8.colorTextSecondary.noWrap.$,"data-tooltip":r,"data-tooltip-type":nO.Ib.TEXT},n.join(" "))})():e.isRepairCommand&&(0,eo.kc)().internal_only_debug_tools?Q.createElement(enz,null,"REPAIR"):void 0,tags:e.tags,keyboardShortcut:(null==(r=e.tags)?void 0:r.includes(enI.$.AI))?Q.createElement(enj,null):C||(T?Q.createElement(Q.Fragment,null,Q.createElement("div",{className:enh.Hq},Q.createElement(eO.Tx,{id:"fullscreen_actions.tab"})),w&&Q.createElement("div",{className:enh.w8},Q.createElement(eO.Tx,{id:"fullscreen_actions.to_edit"})),Q.createElement(eM.B,{svg:I$.A,className:tw.cx.colorIcon.$})):void 0)}))}function eix({items:e,tabManager:t}){let n=elm(),a=(0,ef.md)(WU.Lk),r=(0,ef.md)(WU.dd),l=(0,$.d4)(elb.l),i=(0,ef.md)(WU.Rt),o=(0,Q.useRef)(i),s=(0,ef.md)(WU.Q8),c=(0,Q.useDeferredValue)(s);(0,Q.useEffect)(()=>{o.current=i},[i]);let d=eig(e),u=function(e,t,n,a){let r=(0,$.d4)(e=>e.recentlyUsedQuickCommands),l=eip(),{isRoot:i}=(0,enp.c)(),o=function(e,t){let n=(0,$.d4)(e=>{var t;return null==(t=e.mirror)?void 0:t.appModel}),a=eif(),{frecencyByAction:r,frecencyByQuery:l}=(0,elw.fJ)(),i=(0,eF.Tv)();if(t)return[];let o=e.map(n),s=[];if(0===i.length)return[...s=[enL.JT.FIRST_DRAFT,enL.JT.AUTO_RENAME_LAYERS,enL.JT.MAGIC_LINK,enL.JT.FIND_INSPIRATION,enL.JT.REMOVE_BACKGROUND,enL.JT.REWRITE_TEXT]].map(e=>a(o,e,!0)).filter(e=>!!e);{let e,t;let i=new ei_.J({actions:r,queries:l});s.push(...[enL.JT.CONTENT_FILL,enL.JT.TRANSLATE_TEXT,enL.JT.REWRITE_TEXT,enL.JT.SHORTEN_TEXT,enL.JT.REMOVE_BACKGROUND,enL.JT.FIRST_DRAFT_MAKE_CHANGES,enL.JT.AUTO_RENAME_LAYERS,enL.JT.MAGIC_LINK,enL.JT.FIND_INSPIRATION,enL.JT.GENERATE_IMAGE,enL.JT.FIRST_DRAFT]);let c=[...s].map(e=>a(o,e)).filter(e=>!!e),d=c.sort((e,t)=>i.compareActions("",e,t)),u=Object.values(o).filter(e=>(0,yu.Yh)(n,e.name||e.action||"")&&!c.includes(e)&&(0,elT.y)("",(0,elC.n)(e),{actions:r,queries:l})>0).sort((e,t)=>i.compareActions("",e,t));return u.length<3?(e=6-u.length,t=u.length):d.length<3?(e=d.length,t=6-d.length):(e=3,t=3),[...d.slice(0,e),...u.slice(0,t)]}}(t,n),s=""!==n,c=(0,n_.WI)(r.map(e=>{let n=t.getItem(l,e.displayName);return n&&e.runPluginArgs&&(n.runPluginArgs=e.runPluginArgs),n})),d=(0,Q.useMemo)(()=>""!==n?t.search(l,n).slice(0,25):i?[]:t.list(l),[l,i,t,n]),u=(0,Q.useMemo)(()=>s&&i?[]:o,[s,o,i]),m=(0,Q.useMemo)(()=>s||!i?[]:c,[c,s,i]),p=(0,Q.useMemo)(()=>i||s?[]:e,[e,i,s]),_="design"===(0,mD.my)(),f=ell(),h=(0,Q.useMemo)(()=>i&&s?[{name:"find-extensions-matching",args:{searchQuery:n},callback:()=>{a.tabManager.setActiveTab("extensions")},keepMenuOpen:!0,disabled:!_},{name:"find-fragments-matching",args:{searchQuery:n},callback:()=>{},quickAction:{module:Q.createElement(er4.g,null),beforeModuleOpen:e=>{(0,er4.u)({type:"text"},e)}},disabled:!_||!(0,eo.kc)().asset_suggestions||(0,eo.kc)().dse_quick_action_comp_search},{name:"find-assets-matching",args:{searchQuery:n},callback:()=>{eis(n,()=>a.tabManager.setActiveTab("assets"))},keepMenuOpen:!0,disabled:!f}]:[],[a.tabManager,i,n,s,_,f]);return(0,Q.useMemo)(()=>{let e=[...m,...u,...d,...p,...h.filter(e=>!e.disabled)];return elX()(e,eih)},[d,m,p,u,h])}(e,d,c,{tabManager:t}),m=el_([{name:"",actions:u.map(e=>({key:elh(e),isDisabled:!!e.disabled,resultType:e.pluginId?en_.l4.EXTENSION:en_.l4.ACTION}))}]);(0,Q.useEffect)(()=>{a===WU.Jc.ALL&&r&&n({quickActionsSessionId:r,quickActionsQueryId:o.current,searchQuery:c,numSearchResults:u.length,currentSelection:l,module:a,moduleFilters:null,qaVersion:en_.$L,searchQueryResults:m})},[n,a,r,c,u.length,l,m]);let{createMetrics:p}=elz();return Q.createElement(eiv.B,{primary:!0,resultCount:u.length},u.map((e,t)=>Q.createElement(eiT,{key:eih(e),item:e,searchQuery:c,searchIndex:d,createCommonMetrics:()=>({numSearchResults:u.length,qaVersion:en_.$L,searchQuery:c,searchPosition:t,item:e,moduleFilters:null,...p()})})))}var eiN=n(352444);function eik(e){return Q.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},Q.createElement("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M8 6a2 2 0 0 0-2 2v8a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V9.5a.5.5 0 0 0-1 0V16a1 1 0 0 1-1 1H8a1 1 0 0 1-1-1V8a1 1 0 0 1 1-1h3a.5.5 0 0 0 0-1H8Zm9 0a5.5 5.5 0 0 0-5.5 5.5v1.793l-1.646-1.647a.5.5 0 0 0-.708.708l2.5 2.5a.5.5 0 0 0 .708 0l2.5-2.5a.5.5 0 0 0-.708-.708L12.5 13.293V11.5A4.5 4.5 0 0 1 17 7h.5a.5.5 0 0 0 0-1H17Z",clipRule:"evenodd"}))}var eiS=n(796087),eiI=n(747936);function eiA({extension:e}){let t=(0,k1.R_)(e),n=(0,k1.JB)(e);return Q.createElement("div",{className:tw.cx.ml4.mr4.mb4.px8.py4.bRadius8.flex.gap4.colorBgInfo.$,"data-testid":"extension-invite-row"},Q.createElement(k1.e2,{resource:e}),Q.createElement(Y4.$n,{"data-testid":"accept-invite-button",onClick:e=>{e.stopPropagation(),t()}},Q.createElement(eO.Tx,{id:"community.detail_view.accept"})),Q.createElement(aO.Jn,{dataTestId:"decline-invite-button",onClick:e=>{e.stopPropagation(),n()}}))}function eiP({invitedPlugins:e,invitedWidgets:t,selectedFilter:n}){let a=function({invitedPlugins:e,invitedWidgets:t,selectedFilter:n}){switch(n){case eiN.BY.PLUGINS:return e;case eiN.BY.WIDGETS:return t;case eiN.BY.ALL:case eiN.BY.DEVELOPMENT:return[...e,...t];case eiN.BY.FROM_ORG:return[];default:(0,re.xb)(n)}}({invitedPlugins:e,invitedWidgets:t,selectedFilter:n});return Q.createElement(Q.Fragment,null,a.map(e=>Q.createElement(eiA,{key:e.id,extension:e})))}var eiO=n(841368),eiL=n(904779),eiM=n(904863),eiD=n(102068),eiR=n(202677);let eiF="EXTENSION_SUBMENU_DROPDOWN";function eiB({extension:e}){let t=(0,aX.U)(),n=eiU(e),a=(0,TP.c4)();if(!n||!e||!e.manifest||!e.manifest.menu)return null;let r=(0,rr.ZQ)(e)?{localFileId:e.localFileId}:{pluginId:e.plugin_id},l=(0,wS.z9)(e.manifest.menu,r).map(e=>(0,AJ.aS)(e,e=>()=>{(0,AJ.Im)(a,"quick-actions",e)}));return Q.createElement(k5.ms,{parentRect:null==t?void 0:t.data.targetRect,lean:"left",minWidth:64,items:l})}function eiU(e){let t=(0,aX.U)();return(0,rr.ZQ)(e)?(null==t?void 0:t.type)===eiF&&(null==t?void 0:t.data.extensionId)===e.plugin_id&&(null==t?void 0:t.data.localFileId)===e.localFileId:(null==t?void 0:t.type)===eiF&&(null==t?void 0:t.data.extensionId)===e.plugin_id&&(null==t?void 0:t.data.localFileId)===null}function eiH({augmentedExtension:e}){let{extension:t,canRun:n}=e,a=(0,$.wA)(),r=eiU(t),l=Q.useCallback(e=>{if(r)a(nP.oB());else{let n=e.currentTarget.getBoundingClientRect();a(nP.j7({type:eiF,data:{extensionId:t.plugin_id,localFileId:(0,rr.ZQ)(t)?t.localFileId:null,targetRect:n}}))}},[a,r,t]);return t.manifest.menu&&t.manifest.menu.length>0&&n?Q.createElement("button",{onClick:e=>{e.stopPropagation(),l(e)},onPointerUp:e=>{e.stopPropagation()},className:tw.cx.bgTransparent.h24.$,"data-testid":"submenu-button"},Q.createElement("div",{style:tT.sx.add({marginLeft:"-8px"}).$},Q.createElement(co.O,null))):null}var eiV=n(187953),eiG=n(602577);function eiK({augmentedExtension:e}){let{extension:t,publishedExtension:n}=e;if(!(0,rr.ZQ)(t))return Q.createElement(aU.V,{plugin:t,className:tw.cx.colorIcon.w20.h20.bRadius4.$});let a=n&&(0,iE.Ar)(n);return a&&a.redirect_icon_url?Q.createElement(aU.V,{plugin:a,className:tw.cx.colorIcon.w20.h20.bRadius4.$}):Q.createElement(eM.B,{svg:Sa.A,className:tw.cx.colorIcon.w20.h20.bRadius4.$,dataTestId:"qa2-dev-plugin-icon",autosize:!0})}let eiW=Q.createContext(null);function eiz({numResults:e,moduleFilters:t,children:n}){return Q.createElement(eiW.Provider,{value:{numResults:e,moduleFilters:t}},n)}function eij(){let e=Q.useContext(eiW),t=(0,ef.md)(WU.Q8);if(!e)throw Error("useExtensionMetrics must be used within a ExtensionMetricsProvider");return{...e,searchQuery:t}}function eiY({children:e,onPrimaryAction:t,onSecondaryAction:n,setActive:a,augmentedExtensionForLogging:r}){let l=eij();return Q.createElement(eiv.B.Item,{primaryAction:{shortcuts:[eli.Hz],onAction:e=>{var n;r&&function({searchQuery:e,extensionId:t,moduleFilters:n,searchPosition:a,numSearchResults:r}){elY({action:t,searchQuery:e,numSearchResults:r,rankingAlgorithm:elp(WU.Jc.EXTENSIONS),searchPosition:a,module:WU.Jc.EXTENSIONS,qaVersion:en_.$L,isAi:!1,isPlugin:!0,moduleFilters:n})}({extensionId:r.extension.plugin_id,searchPosition:(null==(n=e.target)?void 0:n.index)??0,numSearchResults:l.numResults,searchQuery:l.searchQuery,moduleFilters:l.moduleFilters}),t(e)}},secondaryAction:{shortcuts:[eli.r7],onAction:n},setActive:a,actionLabel:!1,recordingKey:"extension-list-item"},e)}let eiZ="EXTENSION_OPTIONS_DROPDOWN";function eiX(e){let{augmentedExtension:t}=e,{extension:n,publishedExtension:a}=t,r=(0,aX.U)(),l=(0,eiD.NV)(n,a),i=(0,eiD.OX)(a),o=(0,eiD.x2)(n,a),s=(0,eiD.qu)(n),c=function(e){let t=(0,$.wA)(),n=(0,wJ.U_)(),a=(0,$.d4)(e=>{var t;return(0,wP.T9)({authedProfilesById:e.authedProfilesById,userId:null==(t=e.user)?void 0:t.id})});return(0,Q.useCallback)(()=>{let{extension:r,types:l}=e;if(l.has(eli.Ag.RECENT)){if(!n)return;t(((0,rr.k0)(r)?wo.Kq:wo.lD)({storeInRecentsKey:n,resourceId:r.plugin_id}))}if(l.has(eli.Ag.USER_SAVED)){let e=(0,rr.k0)(r)?NK.vt.WIDGET:NK.vt.PLUGIN;t((0,wi.s1)({id:r.plugin_id,resourceType:e,communityProfile:a||void 0,source:wi.uR.INSERTS_MODAL}))}l.has(eli.Ag.LOCAL)&&(0,rr.ZQ)(r)&&t(wl.qR(r.localFileId))},[t,n,e,a])}(t),d=!!((0,rr.ZQ)(n)&&a),u=(0,eiD.qi)(d,c),m=(0,eiG.Ok)(t);if(!r)return null;let p=[],_=[],f=!!a;(0,rr.ZQ)(n)||(f?p.push({displayText:(0,eO.t)("qa.extensions.view_details"),callback:m}):(0,ar.$D)(ao.e.EXTENSIBILITY,Error("[Quick Actions] Published extension is missing publishedExtension from Redux state"),{extra:{extensionId:n.plugin_id,isWidget:(0,rr.k0)(n),types:Array.from(t.types).toString()}})),(t.types.has(eli.Ag.RECENT)||t.types.has(eli.Ag.USER_SAVED)||t.types.has(eli.Ag.LOCAL))&&_.push(u),(0,rr.ZQ)(n)&&(l&&p.unshift(l),a&&o&&p.push(o),!n.error&&s&&p.push(s),i&&_.push(i));let h=p.some(Boolean)&&_.some(Boolean)?{displayText:"",separator:!0}:null;return Q.createElement(k5.ms,{parentRect:null==r?void 0:r.data.targetRect,lean:"left",minWidth:64,items:[...p,h,..._].filter(e=>!!e)})}function eiq({augmentedExtension:e}){var t;let{extension:n,publishedExtension:a,canRequest:r,canRun:l}=e,i=(0,d0.sZ)(),o=(0,NB.RW)(),s=(0,eiR.a)(null==i?void 0:i.id,n.plugin_id,o.loaded?null==(t=o.data)?void 0:t.workspaceId:void 0);if((0,rr.bH)(n)&&i&&i.name)return Q.createElement(enz,null,i.name);if((0,rr.ZQ)(n)&&a&&(0,kL.AC)(a))return Q.createElement(enz,{variant:enW.BRAND},Q.createElement(eO.Tx,{id:"qa.extensions.in_review"}));if((0,rr.ZQ)(n))return Q.createElement(enz,null,Q.createElement(eO.Tx,{id:"qa.extensions.development"}));if(l);else if(s)return Q.createElement(enz,null,Q.createElement(eO.Tx,{id:"qa.extensions.approval_pending"}));else if(r)return Q.createElement(enz,null,Q.createElement(eO.Tx,{id:"qa.extensions.needs_approval"}));return null}function eiJ({augmentedExtension:e,onOptionsClick:t,active:n}){let{extension:a}=e,r=(0,rr.k0)(a)?Q.createElement(aL.E,{color:"tertiary",i18nId:"qa.extensions.widget",fontSize:11}):Q.createElement(aL.E,{color:"tertiary",i18nId:"qa.extensions.plugin",fontSize:11}),l=Q.createElement("div",{className:tw.cx.flex.pl8.$},Q.createElement("button",{onClick:e=>{e.stopPropagation(),t(e)},onPointerUp:e=>{e.stopPropagation()},className:tw.cx.bgTransparent.h24.$},Q.createElement("div",null,Q.createElement(eiO.J,null))));return Q.createElement("div",{className:tw.cx.flex.itemsCenter.justifyBetween.wFull.$},Q.createElement("div",{className:tw.cx.flex.itemsCenter.$},Q.createElement(eiK,{augmentedExtension:e}),Q.createElement("div",{className:tw.cx.px8.$,style:tT.sx.add({maxWidth:"250px"}).$},Q.createElement(eiM.G,{text:a.name})),Q.createElement(eiH,{augmentedExtension:e}),Q.createElement("div",{style:tT.sx.add({maxWidth:"150px"}).$},Q.createElement(eiq,{augmentedExtension:e}))),Q.createElement("div",null,n?l:r))}let eiQ=e=>{(0,PB.j)({pluginID:e.plugin_id,widgetName:e.name,pluginVersionID:"",triggeredFrom:"quick-actions"})};function ei$({manifestError:e}){return Q.createElement("div",{className:tw.cx.alignLeft.font11.lh16.pl28.$},Q.createElement(aL.E,{color:"danger"},e.msg),Q.createElement("button",{onClick:t=>{t.stopPropagation(),e.action()},className:tw.cx.underline.bgTransparent.colorTextDanger.$},e.buttonText))}function ei0({extension:e}){return Q.createElement(eiL.R,{className:tw.cx.font11.alignLeft.colorTextSecondary.lh16.pl28.$,text:e.localFilePath.replace("/manifest.json","")})}function ei1({augmentedExtension:e}){var t;let{extension:n}=e,a=(0,$.wA)(),{close:r}=(0,enp.c)(),l=(0,enQ._I)(),i=(0,aX.U)(),o=(null==i?void 0:i.type)===eiZ&&(null==i?void 0:i.data.extensionId)===n.plugin_id&&(null==i?void 0:i.data.localFileId)===n.localFileId,s=Q.useCallback(e=>{if(o)a(nP.oB());else{let t=e.currentTarget.getBoundingClientRect();a(nP.j7({type:eiZ,data:{extensionId:n.plugin_id,localFileId:n.localFileId,targetRect:t}}))}},[a,o,n]),c=kH.dR(n.plugin_id,"quick-actions"),d=Q.useCallback(()=>{if(o){a(nP.oB());return}(0,rr.k0)(n)?eiQ(n):c(),l(enQ.Gb.RUN_LOCAL_EXTENSION),r()},[o,n,r,a,c,l]),[u,m]=Q.useState(!1),p=(0,eiD.Pt)(null==(t=n.error)?void 0:t.type,n);return Q.createElement(eiY,{onPrimaryAction:d,setActive:m,augmentedExtensionForLogging:e},Q.createElement("div",{className:tw.cx.flex.flexColumn.wFull.$},Q.createElement(eiJ,{augmentedExtension:e,onOptionsClick:s,active:u}),!p&&Q.createElement(ei0,{extension:n}),p&&Q.createElement(ei$,{manifestError:p})),o&&Q.createElement(eiX,{augmentedExtension:e}),Q.createElement(eiB,{extension:n}))}function ei2({augmentedExtension:e}){let{extension:t,canRun:n,canRequest:a}=e,r=(0,$.wA)(),l=(0,aX.U)(),i=(null==l?void 0:l.type)===eiZ&&(null==l?void 0:l.data.extensionId)===t.plugin_id&&(null==l?void 0:l.data.localFileId)===null,{onAction:o}=(0,eiV.m)(e),s=(0,eiG.Ok)(e),c=Q.useCallback(e=>{if(i)r(nP.oB());else{let n=e.currentTarget.getBoundingClientRect();r(nP.j7({type:eiZ,data:{extensionId:t.plugin_id,localFileId:null,targetRect:n}}))}},[r,i,t]),[d,u]=Q.useState(!1);return n||a?Q.createElement(eiY,{onPrimaryAction:()=>{if(i){r(nP.oB());return}o()},onSecondaryAction:s,setActive:u,augmentedExtensionForLogging:e},Q.createElement(eiJ,{augmentedExtension:e,onOptionsClick:c,active:d}),i&&Q.createElement(eiX,{augmentedExtension:e}),Q.createElement(eiB,{extension:t})):null}function ei5({key:e,text:t,svg:n,onAction:a}){let r=eij();return Q.createElement(eiY,{onPrimaryAction:({target:t})=>{elY({action:e,isAi:!1,module:WU.Jc.EXTENSIONS,qaVersion:en_.$L,rankingAlgorithm:elp(WU.Jc.EXTENSIONS),searchPosition:(null==t?void 0:t.index)??0,isPlugin:!1,numSearchResults:r.numResults,searchQuery:r.searchQuery,moduleFilters:r.moduleFilters}),a()},augmentedExtensionForLogging:null},Q.createElement("div",{className:tw.cx.flex.itemsCenter.alignLeft.wFull.justifyBetween.$},Q.createElement("div",{className:tw.cx.flex.$},Q.createElement(n,null),Q.createElement("div",{className:tw.cx.ml8.$},t))))}var ei4=n(225835),ei3=n(754283),ei6=n(794412),ei7=n(110354);function ei8({augmentedExtension:e}){let{extension:t,publishedExtension:n}=e,a=(0,rr.k0)(t)?Q.createElement(eO.Tx,{id:"qa.extensions.widget"}):Q.createElement(eO.Tx,{id:"qa.extensions.plugin"}),r=(null==n?void 0:n.unique_run_count)??0,l=(null==n?void 0:n.like_count)??0,i=n?Q.createElement(ei3.o,{publishedExtension:n,showTooltip:!1}):null,o=(0,ei3.g)(n);return Q.createElement("div",{className:tw.cx.flex.flexColumn.colorTextSecondary.textBodyMedium.$},Q.createElement("div",{className:tw.cx.flex.flexRow.$},a,Q.createElement(ei9,null),Q.createElement(eM.B,{svg:ei6.A,className:tw.cx.mx2.colorIconSecondary.$}),Q.createElement("div",{className:tw.cx.ml2.$},(0,eO.t)("qa.extensions.num_users",{numUsers:r,numUsersStr:(0,lA.$M)(r)})),Q.createElement(ei9,null),Q.createElement(eM.B,{svg:ei7.A,className:tw.cx.colorIconSecondary.$,style:tT.sx.add({margin:"3px"}).$}),Q.createElement("div",{className:tw.cx.ml2.$},(0,lA.$M)(l)),o&&Q.createElement(ei9,null),i))}function ei9(){return Q.createElement("div",{className:tw.cx.w1.hFull.mx6.$,style:tT.sx.add({backgroundColor:"var(--color-border-fs)"}).$,"data-testid":"divider"})}function eoe({augmentedExtension:e}){let{extension:t}=e,{onAction:n}=(0,eiV.m)(e),a=(0,eiG.Ok)(e),r=(0,kL.G8)(t,kI.$J);return Q.createElement(eiY,{onPrimaryAction:a,onSecondaryAction:n,augmentedExtensionForLogging:e},Q.createElement("div",{className:tw.cx.flex.alignLeft.wFull.$},Q.createElement(eiK,{augmentedExtension:e}),Q.createElement("div",{className:tw.cx.flex.flexColumn.ml8.overflowHidden.$},Q.createElement(eot,{augmentedExtension:e}),Q.createElement(eiM.G,{text:r,className:tw.cx.mb4.colorTextSecondary.textBodyMedium.$,showTooltip:ei4.i.NEVER}),Q.createElement(ei8,{augmentedExtension:e}))))}function eot({augmentedExtension:e}){let{extension:t}=e;return Q.createElement("div",{className:tw.cx.flex.itemsCenter.mb2.$},Q.createElement("div",{className:tw.cx.pr8.colorText.textBodyLarge.$,style:tT.sx.add({maxWidth:"250px"}).$},Q.createElement(eiM.G,{text:t.name})),Q.createElement(eiq,{augmentedExtension:e}))}function eon({augmentedExtensions:e,header:t,showExtensionDetails:n=!1,dataTestId:a}){let r=e.map(e=>{let{key:t}=e;return(0,elo.JT)(e)?Q.createElement(ei1,{augmentedExtension:e,key:t}):n?Q.createElement(eoe,{augmentedExtension:e,key:t}):Q.createElement(ei2,{augmentedExtension:e,key:t})});return Q.createElement("div",{"data-testid":a,className:tw.cx.flex.flexColumn.$},t&&Q.createElement(eiv.B.Section,{header:t},r),!t&&r)}function eoa({extensions:e}){let t=(0,Q.useMemo)(()=>[...e].sort(elo.bL),[e]);return 0===t.length?null:Q.createElement(eon,{augmentedExtensions:t,dataTestId:"my-extensions-section"})}function eor(){return Q.createElement("div",{className:tw.cx.flex.wFull.mt16.justifyCenter.alignCenter.colorTextSecondary.$,"data-testid":"no-extensions-found"},Q.createElement(eO.Tx,{id:"qa.no_plugins_widgets_found"}))}function eol({availableExtensions:e,selectedFilter:t}){let n=elm(),a=(0,ef.md)(WU.Lk),r=(0,ef.md)(WU.dd),l=(0,ef.md)(WU.Rt),i=(0,$.d4)(elb.l),o=(0,$.wA)(),s=(0,ig.f6)(),c=(0,ig.wW)(),{loaded:d,extensions:u}=eoc(e),{myExtensions:m,suggestedExtensions:p,otherExtensionsFromOrg:_}=eod(u,t),f=t===eiN.BY.DEVELOPMENT?eos(o):[],h=m.length+p.length+_.length+f.length,g=t===eiN.BY.DEVELOPMENT,E=t===eiN.BY.FROM_ORG,v=d||E||g,y=function({myExtensions:e,suggestedExtensions:t,otherExtensionsFromOrg:n,additionalItems:a}){let r=elf("My Extensions",e);return el_([r,elf("Suggested",t),elf("Other Extensions from Org",n),{name:"Additional items",actions:a.map(({key:e})=>({key:e,isDisabled:!1,resultType:en_.l4.ACTION}))}])}({myExtensions:m,suggestedExtensions:p,otherExtensionsFromOrg:_,additionalItems:f});return((0,Q.useEffect)(()=>{a===WU.Jc.EXTENSIONS&&r&&v&&n({quickActionsSessionId:r,quickActionsQueryId:l,searchQuery:"",numSearchResults:h,currentSelection:i,module:a,moduleFilters:t,qaVersion:en_.$L,searchQueryResults:y})},[n,a,r,v,l,h,i,t,y]),0===h)?Q.createElement(eor,null):Q.createElement(eiz,{numResults:h,moduleFilters:t},Q.createElement(eiv.B,{primary:!0,resultCount:h},Q.createElement(eiP,{invitedPlugins:s,invitedWidgets:c,selectedFilter:t}),Q.createElement(eoa,{extensions:m}),Q.createElement(eoi,{extensions:p,hasLoaded:v}),E&&Q.createElement(eoo,{extensions:_}),g&&f.map(({key:e,...t})=>Q.createElement(ei5,{key:e,...t}))))}function eoi({extensions:e,hasLoaded:t}){return t?0===e.length?null:Q.createElement(eon,{augmentedExtensions:e,header:(0,eO.t)("qa.suggested"),showExtensionDetails:!0}):Q.createElement(en3.R,null)}function eoo({extensions:e}){let t=(0,d0.sZ)();return t&&0!==e.length?Q.createElement(eon,{augmentedExtensions:e,header:(0,eO.t)("qa.other_extensions_from_org",{org_name:t.name}),showExtensionDetails:!0}):null}let eos=e=>[{key:"createNewPlugin",text:"Create new plugin",svg:zR.e,onAction:()=>{e(n9.Lo()),lT.Y5.dispatch((0,n9.to)({type:AO.h,data:{resourceType:NK.bD.PLUGIN}}))}},{key:"createNewWidget",text:"Create new widget",svg:zR.e,onAction:()=>{e(n9.Lo()),lT.Y5.dispatch((0,n9.to)({type:AO.h,data:{resourceType:NK.bD.WIDGET}}))}},{key:"importFromManifest",text:"Import from manifest",svg:eik,onAction:()=>e(wl.JZ({resourceType:"unknown"}))}],eoc=e=>{let t=(0,elo.Oy)(),{loaded:n,extensions:a}=function(){let e=(0,$.wA)(),[t,n]=(0,Q.useState)(!1),[a,r]=(0,Q.useState)([]);return(0,Q.useEffect)(()=>{let t={sort_by:LW.eg.POPULAR,editor_type:Pa.k.Editors.FIGMA};Promise.all([(0,eiS.n)().filter(t).browse(eiI.L.BrowseResourceTypes.PLUGINS),(0,eiS.n)().filter(t).browse(eiI.L.BrowseResourceTypes.WIDGETS)]).then(([t,a])=>{let l=t.data.meta.resources,i=a.data.meta.resources,o=(0,n_.k4)([...l.slice(0,10),...i.slice(0,5)]);e(NP.Qi({publishedPlugins:o,src:"Quick Actions V2 suggested extensions"}));let s=o.map(e=>(0,iE.Ar)(e)).filter(e=>null!==e);n(!0),r(s)}).catch(()=>{n(!1),r([])})},[e]),{loaded:t,extensions:a}}(),r=a.map(e=>t(e,eli.Ag.COMMUNITY));return{loaded:n,extensions:(0,elo.ZM)([...e,...r])}},eod=(e,t)=>{let n=(0,elo.m5)(t),a=[],r=[],l=[];return e.filter(e=>n(e)).forEach(e=>{(0,elo.wj)(e)?a.push(e):t===eiN.BY.FROM_ORG&&(0,elo.jb)(e)||t!==eiN.BY.FROM_ORG&&(0,elo.Nf)(e)?r.push(e):t===eiN.BY.FROM_ORG&&l.push(e)}),{myExtensions:a,suggestedExtensions:r,otherExtensionsFromOrg:l}};var eou=n(35645),eom=n.n(eou),eop=n(784839);let eo_=d5.M4.Query({fetch:async e=>(await eop.$W.getExtensions(e)).data.meta,enabled:e=>e.query.length>0,output:({data:e})=>e.results});function eof({availableExtensions:e,selectedFilter:t}){let n=elm(),a=(0,ef.md)(WU.Lk),r=(0,ef.md)(WU.dd),l=(0,ef.md)(WU.Q8),i=(0,ef.md)(WU.Rt),o=(0,$.d4)(elb.l),s=(0,$.wA)(),{loading:c,publicExtensions:d,privateExtensions:u,localExtensions:m}=function(e){let{status:t,results:n}=function(e){let t=function(e){switch(e){case"design":return Pa.k.Editors.FIGMA;case"whiteboard":return Pa.k.Editors.FIGJAM;case"dev_handoff":return Pa.k.Editors.DEV_MODE;default:return Pa.k.Editors.ALL}}((0,mD.my)()),n=(0,y1.U5)(),a=(0,d0.dq)()??void 0,[{status:r,data:l}]=(0,Nk.IT)(eo_({query:e,editorType:t,orgSearch:n,currentOrgId:a}));return{status:r,results:l||{public:[],private:[]}}}(e),a=function(e){let t=(0,ig.$1)(),n=(0,Q.useMemo)(()=>Object.values(t),[t]),a=(0,Q.useMemo)(()=>new Pl.Ef(n,wP.Ih),[n]);return(0,Q.useMemo)(()=>a.search(e),[a,e])}(e);return(0,Q.useMemo)(()=>{switch(t){case"loading":return{loading:!0,privateExtensions:[],publicExtensions:[],localExtensions:[]};case"loaded":let e=(null==n?void 0:n.public)??[],r=(null==n?void 0:n.private)??[];return{loading:!1,publicExtensions:e.map(e=>e.model),privateExtensions:r.map(e=>e.model),localExtensions:a};case"disabled":case"errors":return(0,ar.$D)(ao.e.EXTENSIBILITY,Error("[useSearchExtensions] Unable to fetch search results"),{tags:{status:t}}),{loading:!1,privateExtensions:[],publicExtensions:[],localExtensions:[]};default:(0,re.xb)(t)}},[null==n?void 0:n.private,null==n?void 0:n.public,a,t])}(l);(0,Q.useEffect)(()=>{let e=[...d,...u];0!==e.length&&s(NP.Qi({publishedPlugins:e,src:"Quick actions"}))},[s,u,d]);let{myExtensions:p,fromOrgExtensions:_,communityExtensions:f}=eoE(function({publicExtensions:e,privateExtensions:t,localExtensions:n}){let a=(0,elo.Oy)();return(0,Q.useMemo)(()=>{let r=(e,t)=>e.map(e=>(0,iE.Ar)(e)).filter(e=>!!e).map(e=>a(e,t)),l=r(e,eli.Ag.COMMUNITY),i=r(t,eli.Ag.ORG_PRIVATE);return[...n.map(e=>a(e,eli.Ag.LOCAL)),...i,...l]},[a,n,t,e])}({publicExtensions:d,privateExtensions:u,localExtensions:m}),e,t),h=p.length+_.length+f.length,g=function({myExtensions:e,fromOrgExtensions:t,communityExtensions:n}){return el_([elf("My Extensions",e),elf("From Org",t),elf("From Community",n)])}({myExtensions:p,fromOrgExtensions:_,communityExtensions:f});return((0,Q.useEffect)(()=>{a===WU.Jc.EXTENSIONS&&r&&!c&&n({quickActionsSessionId:r,quickActionsQueryId:i,searchQuery:l,numSearchResults:h,currentSelection:o,module:a,moduleFilters:t,qaVersion:en_.$L,searchQueryResults:g})},[o,n,a,h,r,l,i,t,c,g]),c)?Q.createElement(en3.R,null):0===h?Q.createElement(eor,null):Q.createElement(eiz,{numResults:h,moduleFilters:t},Q.createElement(eiv.B,{primary:!0,resultCount:h},Q.createElement(eoa,{extensions:p}),Q.createElement(eoh,{extensions:_}),Q.createElement(eog,{extensions:f})))}function eoh({extensions:e}){let t=(0,d0.sZ)();if(!t||0===e.length)return null;let[n,a]=eom()(e,e=>e.types.has(eli.Ag.ORG_SAVED)),r=[...n,...a];return Q.createElement(eon,{augmentedExtensions:r,header:(0,eO.t)("qa.from_org_name",{org_name:t.name}),showExtensionDetails:!0,dataTestId:"from-org-extensions-section"})}function eog({extensions:e}){return 0===e.length?null:Q.createElement(eon,{augmentedExtensions:e,header:(0,eO.t)("qa.from_community"),showExtensionDetails:!0,dataTestId:"community-extensions-section"})}let eoE=(e,t,n)=>{let a=(0,elo.m5)(n),r=(0,Q.useMemo)(()=>new Set(e.map(e=>e.key)),[e]),l=(0,Q.useMemo)(()=>{let n=[...e,...t];return(0,elo.ZM)(n)},[t,e]),i=[],o=[],s=[];return l.filter(e=>a(e)).filter(e=>r.has(e.key)).forEach(e=>{(0,elo.wj)(e)?i.push(e):(0,elo.C5)(e)?o.push(e):(0,elo.Nf)(e)&&s.push(e)}),{myExtensions:i,fromOrgExtensions:o,communityExtensions:s}};function eov({hasLoadedExtensions:e,extensions:t,selectedFilter:n}){let a=(0,ef.md)(WU.Q8),r=(0,WU.JB)();return((0,ts.h)(()=>()=>{r()}),e)?a?Q.createElement(eof,{availableExtensions:t,selectedFilter:n}):Q.createElement(eol,{availableExtensions:t,selectedFilter:n}):Q.createElement(en3.R,null)}var eoy=n(125024);let eob=(0,nf.eU)(eiN.BY.ALL);function eoC(){let e=(0,TP.uj)(),t=(0,$.d4)(e=>e.mirror.appModel),n=(0,TP.c4)(),a=Q.useMemo(()=>(0,TA.M)({appModel:t,extensionMenuProps:n,includeDisabled:!0}),[t,n]),r=elr(),l=[...e,...a,{name:"wand-menu",callback:ey.lQ,children:r}],[i,o]=(0,ef.fp)(WU.Q8),s=(0,e_.Xr)(WU.Rt),[c,d]=(0,ef.fp)(eob),[u,m]=(0,ef.fp)(WU.Lk),[p,_]=enb.t.useTabs({[WU.Jc.ALL]:!0,[WU.Jc.ASSETS]:!0,[WU.Jc.EXTENSIONS]:!0},{defaultActive:u});(0,Q.useEffect)(()=>{m(_.activeTab),elu()},[_.activeTab,m]);let f=(0,$.wA)();Q.useEffect(()=>f(yw.aq()),[f]);let{loaded:h,extensions:g}=function(){let e=(0,ig.Tg)(),t=(0,ig.qr)(),{loaded:n,userPlugins:a,userWidgets:r,orgPlugins:l,orgWidgets:i}=(0,ig.Be)(),o=(0,ig.ll)(),s=(0,ig.U6)(),c=(0,wA.BF)(),d=(0,wA.km)(),u=(0,ig.$1)(),m=(0,elo.Oy)(),p=[{extensions:e,extensionType:eli.Ag.RECENT},{extensions:t,extensionType:eli.Ag.RECENT},{extensions:Object.values(a),extensionType:eli.Ag.USER_SAVED},{extensions:Object.values(r),extensionType:eli.Ag.USER_SAVED},{extensions:Object.values(l),extensionType:eli.Ag.ORG_SAVED},{extensions:Object.values(i),extensionType:eli.Ag.ORG_SAVED},{extensions:Object.values(o),extensionType:eli.Ag.ALLOWLIST},{extensions:Object.values(s),extensionType:eli.Ag.ALLOWLIST},{extensions:c,extensionType:eli.Ag.ORG_PRIVATE},{extensions:d,extensionType:eli.Ag.ORG_PRIVATE},{extensions:Object.values(u),extensionType:eli.Ag.LOCAL}],_=n?p.map(({extensions:e,extensionType:t})=>e.map(e=>m(e,t))).flat():[];return{loaded:n,extensions:(0,elo.ZM)(_)}}(),E=ell();cq.YG.useInitSearch({disabled:!E});let v=u===p[WU.Jc.ASSETS].id,{debouncedAssetSearch:y,clearAssetSearchAndCancelDebounce:b}=function({debounceWait:e=300}){let t=(0,e_.Xr)(elc),n=(0,cZ.Ck)(),a=(0,hs.A)(eld,e),r=(0,Q.useCallback)(()=>{a.cancel(),t(e=>({searchSessionId:e.searchSessionId,currentSearch:null}))},[a,t]);return{debouncedAssetSearch:(0,Q.useCallback)((e,t)=>{e?a(e,t,n):r()},[a,r,n]),clearAssetSearchAndCancelDebounce:r}}({debounceWait:300}),{debouncedFragmentTextSearch:C,clearFragmentSearchAndCancelDebounce:w}=(0,eoy.S)({debounceWait:300,shouldUpdateQwandSearchQuery:!1}),T=Q.useCallback(e=>{o(e),s((0,i0.g)()),elu(),(E&&v||0===e.length)&&(y(e,dT.I.ALL),C(e))},[o,s,E,y,C,v]),x=Q.useCallback((e,t,n,a)=>{(0,enu.$I)(f,{module:Q.createElement(er4.g,null),beforeModuleOpen:r=>{(0,er4.u)({type:"image",imageBase64:t,width:n,height:a,imageName:e},r)}})},[f]),N=Q.useCallback(()=>{o(""),b(),w()},[o,b,w]),k=Q.useCallback(()=>{eis(i,()=>_.setActiveTab(p[WU.Jc.ASSETS].id))},[i,_,p]),S="design"===(0,mD.my)(),I=Q.useRef(null),A=Q.createElement(ely.fu,{value:u,onChange:e=>_.setActiveTab(e),numItems:E?3:2},Q.createElement(ely.oz,{tabId:WU.Jc.ALL,onAction:()=>_.setActiveTab(p[WU.Jc.ALL].id),navigatingShortcut:E?void 0:{key:es.Uz.LEFT_ARROW}},Q.createElement(eO.Tx,{id:"qa.all"})),E&&Q.createElement(ely.oz,{tabId:WU.Jc.ASSETS,onAction:k},Q.createElement(eO.Tx,{id:"qa.assets"})),Q.createElement(ely.oz,{tabId:WU.Jc.EXTENSIONS,onAction:()=>_.setActiveTab(p[WU.Jc.EXTENSIONS].id),navigatingShortcut:E?void 0:{key:es.Uz.RIGHT_ARROW}},Q.createElement(eO.Tx,{id:"qa.plugins_widgets"}))),P=(0,eo.kc)().asset_suggestions&&S?(0,eo.kc)().dse_quick_action_comp_search?Q.createElement("div",{className:tw.cx.flex.$},Q.createElement(dN.K,{"aria-label":(0,eO.t)("asset_suggestions.visual_search_icon_button_tooltip"),onClick:()=>{(0,enu.$I)(f,{module:Q.createElement(er3.W,null),beforeModuleOpen:e=>{(0,er4.u)({type:"selection"},e)}})},"data-tooltip":(0,eO.t)("asset_suggestions.visual_search_icon_button_tooltip"),"data-tooltip-type":nO.Ib.TEXT,"data-tooltip-show-above":!0},Q.createElement(enC.A,null))):Q.createElement("div",{className:tw.cx.colorIcon.$},Q.createElement(elg.B,{onUpload:x,recordingKey:(0,nh.Pt)("quickActions","imageUpload")})):void 0;return Q.createElement(elE.n,{height:enL.wC,recordingKey:"defaultView"},Q.createElement(elv.v,{searchQuery:i,onSearchChange:T,onClear:N,endEnhancer:P,ref:I}),Q.createElement("div",{className:tw.cx.px8.pb8.$},Q.createElement(enH.b,{primary:!1,gap:8,fullWidth:!0,justify:"space-between"},S&&A,u===p[WU.Jc.EXTENSIONS].id&&Q.createElement(eiN.ox,{extensionFilter:c,setExtensionFilter:d}))),Q.createElement(elE.n.Body,null,Q.createElement(enb.t.TabPanel,{...p[WU.Jc.ALL]},Q.createElement(eix,{items:l,tabManager:_})),E&&Q.createElement(enb.t.TabPanel,{...p[WU.Jc.ASSETS]},Q.createElement(eic,{searchHandle:I})),Q.createElement(enb.t.TabPanel,{...p[WU.Jc.EXTENSIONS]},Q.createElement(eov,{extensions:g,hasLoadedExtensions:h,selectedFilter:c}))))}function eow(){let{current:e}=(0,enp.c)(),t=(0,WU.jh)();return((0,ts.h)(()=>()=>{t()}),e)?Q.createElement(Q.Fragment,null,e):Q.createElement(eoC,null)}let eoT=(e,t)=>{(0,er.sx)(en_.W3,{...t,qaVersion:en_.$L,quickActionsSessionId:e,timeToShowModal:tW.sn.tryStop(en_.mP)||0},{forwardToDatadog:!0})};function eox(){let e=(0,e_.Xr)(WU.Bu),t=(0,enQ.Zq)(),n=(0,ef.md)(WU.rE),a=(0,ef.md)(WU.dd);(0,ts.h)(()=>(e(!0),a&&eoT(a,n||void 0),()=>{t(),e(!1)}));let{close:r}=(0,enp.c)(),l=(0,ex.o3)(ex.nt.ui3),i=(0,ue.Z)(l);return(0,Q.useEffect)(()=>{i&&!l&&r()},[l,i,r]),Q.createElement(enm.s,null,Q.createElement(enf.s3,{name:"quickActions",recordingKey:"quickActions"},Q.createElement(env,null,Q.createElement(eow,null))))}function eoN(e){return Q.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},Q.createElement("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M18 7a2 2 0 1 1-4 0 2 2 0 0 1 4 0Zm-2 1a1 1 0 1 0 0-2 1 1 0 0 0 0 2Zm0 7a.5.5 0 0 1 .5.5v1h1a.5.5 0 0 1 0 1h-1v1a.5.5 0 0 1-1 0v-1h-1a.5.5 0 1 1 0-1h1v-1a.5.5 0 0 1 .5-.5ZM8.564 8.12l-.489 1.955-1.955.49c-1.495.373-1.495 2.497 0 2.87l1.955.49.49 1.955c.373 1.495 2.497 1.495 2.87 0l.49-1.955 1.955-.49c1.495-.373 1.495-2.497 0-2.87l-1.955-.49-.49-1.955c-.373-1.495-2.497-1.495-2.87 0Zm.97.243L8.9 10.9l-2.537.634c-.485.122-.485.81 0 .932L8.9 13.1l.634 2.537c.122.485.81.485.932 0L11.1 13.1l2.537-.634c.485-.121.485-.81 0-.932L11.1 10.9l-.634-2.537c-.121-.485-.81-.485-.932 0Z",clipRule:"evenodd"}))}function eok(e){let t=(0,hs.A)(enu.KY,e.timeoutMs),[n,a]=Q.useState(!1),r=Q.useRef(null);return Q.useEffect(()=>(n?t.cancel():t(),()=>{t.cancel()}),[t,n]),Q.createElement("div",{ref:r,onPointerEnter:()=>{a(!0)},onPointerLeave:()=>{a(!1)}},e.children)}function eoS(){var e,t;let n=el.D.getState(),a=(0,elb.l)(n),r=(null==(e=n.openFile)?void 0:e.key)??"",l=(0,cB.v5)(n.selectedView,null),i=(0,TP.uj)(),o=eig([...elr(),...i]),s=(0,enu.el)(),c=eip(),d=s?o.list(c).find(e=>e.action===s.action):null,u=null==d?void 0:d.action,m=d?TI(d):null,p=(0,Q.useCallback)(()=>{u&&(lT.Y5.triggerAction(u,null==s?void 0:s.payload),(0,enu.KY)())},[u,null==s?void 0:s.payload]),_={action:u,source:"toast",quickActionsSessionId:(0,ef.md)(WU.dd),currentSelection:a,qaVersion:en_.$L,fileKey:r,productType:l};return((0,ts.h)(()=>{u&&(0,er.sx)(en_.Sq,_,{forwardToDatadog:!0})}),d)?Q.createElement(enf.s3,{name:"quickActions",recordingKey:"quickActions"},Q.createElement(env,null,Q.createElement(elE.n,null,Q.createElement(eok,{timeoutMs:1e4},Q.createElement(en6.y,{onDismiss:enu.KY},Q.createElement(enH.B,{justify:"space-between",align:"center",fullWidth:!0},Q.createElement(enH.B,{gap:4,align:"center"},Q.createElement("span",{style:{"--color-icon":"var(--color-icon-brand)"}},Q.createElement(eoN,null)),Q.createElement(aL.E,{color:"brand"},Q.createElement(eO.Tx,{id:"qa.toast.suggestion"})),(null==(t=d.tags)?void 0:t.includes(enI.$.AI))&&Q.createElement(enj,null)),Q.createElement(enU.r,{variant:"secondary",shortcuts:[{key:es.Uz.ENTER,modifier:[es.xH.META]}],onAction:()=>{p(),u&&(0,er.sx)(en_.OW,{..._,isAi:!0},{forwardToDatadog:!0})},recordingKey:"SuggestionToast"},m))))))):(console.warn("No menu item found for suggested action."),null)}function eoI(){let e=(0,ef.md)(WU.Bu),t=(0,enu.el)();return e?Q.createElement(eox,null):t?Q.createElement(eoS,null):null}var eoA=n(664729),eoP=n(55330),eoO=n(31470),eoL=n(34904),eoM=n(539615),eoD=n(961803);let eoR=e=>(0,TS.Zj)(e)&&!e.hideCheckForQuickCommand;class eoF extends nh.o6{constructor(e){super(e),this.searchInputRef=Q.createRef(),this.scrollContainerRef=Q.createRef(),this.listboxId=(0,i0.g)(),this.resultPrefix=(0,i0.g)(),this.delayedCloseTimerID=0,this.updateQueryAndResults=e=>{let t;if(e){let n=this.searchIndex.search(this.props.appModel,e.trim());t=this.sortedByEnabledSearchResults(n)}else t=this.recentlyUsedItemsMenu();this.setState({searchQuery:e,searchResults:t,activeItemIndex:0,mouseMoved:!1})},this.cancelDelayedClose=()=>{0!==this.delayedCloseTimerID&&(clearTimeout(this.delayedCloseTimerID),this.delayedCloseTimerID=0)},this.onClick=nh.cZ(this,"click",e=>{(null==e?void 0:e.button)!==0||this.state.searchResults.length>0||this.setState({searchResults:this.searchIndex.list(this.props.appModel)})}),this.onKeyDown=nh.C0(this,"keydown",e=>{let t=e=>{if(this.state.searchResults.length>0){let t=this.state.activeItemIndex+e,n=t<0?this.state.searchResults.length-1:t%this.state.searchResults.length,a=1!==this.state.searchResults.length||!this.state.displayAriaActiveDescendant;this.setState({activeItemIndex:n,displayAriaActiveDescendant:a}),this.scrollContainerRef.current.scrollElementAtIndexIntoView(n)}},n=(0,es.vN)(e,es.xH.CONTROL),a=ec.Ay.mac?(0,es.vN)(e,es.xH.META):n,r=ec.Ay.mac&&n;switch(e.keyCode){case es.Uz.ENTER:{e.preventDefault();let t=this.state.searchResults[this.state.activeItemIndex];t&&cU.l7.user(`quick-actions-select-${t.name??t.action??"unknown"}`,()=>{this.onSelectItem(t)});break}case es.Uz.ESCAPE:e.preventDefault(),this.cancelDelayedClose(),this.props.dispatch(nP.oB());break;case es.Uz.N:case es.Uz.DOWN_ARROW:if(e.keyCode===es.Uz.N&&!r){(0,pf.jr)(e,pf.W0.NO);break}e.preventDefault(),this.cancelDelayedClose(),t(1);break;case es.Uz.P:case es.Uz.UP_ARROW:if(e.keyCode===es.Uz.P&&!r){(0,pf.jr)(e,pf.W0.NO);break}e.preventDefault(),this.cancelDelayedClose(),t(-1);break;case es.Uz.TAB:{e.preventDefault();let t=this.state.searchResults[this.state.activeItemIndex];t&&t.args&&t.args.itemParameterArgs&&(this.onStartParameterMode(t.args.itemParameterArgs,t,"tab"),this.logEvent(t));break}case es.Uz.R:case es.Uz.S:case es.Uz.D:case es.Uz.E:case es.Uz.F:case es.Uz.O:if(a){e.preventDefault();let t=this.state.searchQuery+e.key;this.updateQueryAndResults(t)}break;default:"Meta"!==e.key&&"Ctrl"!==e.key&&this.cancelDelayedClose(),(0,pf.jr)(e,pf.W0.NO)}}),this.onSearchChange=nh.Z7(this,"change",e=>{let t=e.currentTarget.value;this.updateQueryAndResults(t)}),this.onSearchKeyDown=e=>{e.currentTarget.value.trim().toLowerCase()===eoA.ai&&e.keyCode===es.Uz.TAB&&this.props.dispatch(nP.j7({type:yu.Ee,data:{entryPoint:eoA.sN.INSERT_TAB}}))},this.onSelectItem=(e,t)=>{var n;if(e.disabled)this.cancelDelayedClose();else{let a=!1;if(null==(n=e.args)?void 0:n.itemParameterArgs){if(e.runPluginArgs&&!this.state.searchQuery)ra.R.instance.enqueue({mode:"run-forever",runPluginArgs:e.runPluginArgs}),a=!0;else if(e.parametersRequired){this.onStartParameterMode(e.args.itemParameterArgs,e,(null==t?void 0:t.type)==="click"?"click":"enter"),this.logEvent(e);return}}if(e.callback&&!a&&(e.callback((0,TS.Dz)(e),e.args,this.props.dispatch),a=!0),e.action&&(oy.VU.get(e.action,"quick-actions",e.args)(t),a=!0),a&&this.addToRecentlyUsedCommands(e,e.runPluginArgs),this.logEvent(e),"toggle-publish"===e.action&&(0,uj.YQ)({id:"insert-component-onboarding-event"}),"component-search"===e.name){this.onEnterComponentSearch(e);return}if(eoR(e)&&!(0,pF.PN)()){this.cancelDelayedClose(),this.delayedCloseTimerID=setTimeout(()=>{this.props.dispatch(nP.oB())},300);return}this.props.dispatch(nP.oB())}},this.renderResult=(e,t)=>{let n=t===this.state.activeItemIndex;return Q.createElement(eoH,{role:"option",id:this.getResultId(t),key:e.action||t,recordingKey:nh.Pt(this.props,e.action||"searchResult"),active:n,disabled:!!e.disabled,appModel:this.props.appModel,item:e,isLastItem:t===this.state.searchResults.length-1,actionIcon:this.getActionIcon(e),onClick:t=>this.onSelectItem(e,t),onMouseMove:()=>{this.state.mouseMoved||this.setState({mouseMoved:!0,activeItemIndex:t})},onMouseEnter:()=>{this.state.mouseMoved&&this.setState({activeItemIndex:t})},allSavedPlugins:this.props.pluginAndWidgetMenuArgs.allSavedPlugins,publishedPlugins:this.props.pluginAndWidgetMenuArgs.publishedPlugins,searchQuery:this.state.searchQuery})},this.searchIndex=this.createSearchIndex(),this.state={searchQuery:"",searchResults:this.recentlyUsedItemsMenu(),activeItemIndex:0,displayAriaActiveDescendant:!0,mouseMoved:!1}}componentDidUpdate(e,t){super.componentDidUpdate(e,t),(0,an.c2)(this.props.pluginAndWidgetMenuArgs,e.pluginAndWidgetMenuArgs)||(this.searchIndex=this.createSearchIndex())}createSearchIndex(){let e=(0,TA.M)({extensionMenuProps:this.props.pluginAndWidgetMenuArgs,appModel:this.props.appModel,includeDisabled:!0});return new TM.x(this.props.appModel,this.props.selectedView,[...this.props.fullscreenMenuItems,...e],{includeDisabled:!0,acceptsUnicode:"ja"===this.props.locale})}componentDidMount(){super.componentDidMount(),this.searchInputRef.current.focus()}logEvent(e){let{createMetrics:t}=this.props.interactionMetrics;elj({item:e,searchQuery:this.state.searchQuery,qaVersion:en_.U3,numSearchResults:this.state.searchResults.length,searchPosition:this.state.activeItemIndex,moduleFilters:null,...t()})}recentlyUsedItemsMenu(){return(0,n_.WI)(this.props.recentlyUsedQuickCommands.map(e=>{let t=this.searchIndex.getItem(this.props.appModel,e.displayName);return t&&e.runPluginArgs&&(t.runPluginArgs=e.runPluginArgs),t}))}sortedByEnabledSearchResults(e){let t=e.filter(e=>!e.disabled),n=e.filter(e=>e.disabled);return t.concat(n)}addToRecentlyUsedCommands(e,t){let n=TI(e),a=this.props.recentlyUsedQuickCommands.filter(e=>e.displayName!==n&&!!this.searchIndex.getItem(this.props.appModel,e.displayName));a.length>=3&&a.pop(),a.unshift({displayName:n,runPluginArgs:t}),this.props.dispatch(cM.PQ(a)),this.props.updateFrecencyHistory(e,this.state.searchQuery)}getActionIcon(e){var t;if(e.runPluginArgs&&!this.state.searchQuery)return Q.createElement(eM.B,{svg:eib.A});if("plugins-menu-item"===e.name){let n;return(e.pluginId&&(n=this.props.pluginAndWidgetMenuArgs.allSavedPlugins[e.pluginId]||(null==(t=this.props.pluginAndWidgetMenuArgs.recentlyUsedPlugins)?void 0:t.find(t=>t.plugin_id===e.pluginId))),n)?Q.createElement(aU.V,{className:elI.ZR,plugin:n,role:"presentation"}):Q.createElement(eM.B,{className:elI.pB,svg:eoD.A,ariaLabel:`${e.name} icon`})}let n=TI(e);return e.iconType&&"external_link"===e.iconType?Q.createElement(eM.B,{svg:eiy.A}):this.props.recentlyUsedQuickCommands.filter(e=>e.displayName===n).length>0?Q.createElement(eM.B,{svg:eib.A}):void 0}onEnterComponentSearch(e){this.props.onEnterComponentSearch&&(this.addToRecentlyUsedCommands(e),this.props.onEnterComponentSearch())}onStartParameterMode(e,t,n){this.addToRecentlyUsedCommands(t),this.props.onStartParameterEntry(e,t,n)}getResultId(e){return this.resultPrefix+"-"+e}renderResults(){let e=this.state.searchResults;if(this.state.searchQuery){if(0===this.state.searchResults.length)return Q.createElement("div",{className:elI.Tk},Q.createElement(eO.Tx,{id:"fullscreen_actions.no_matches"}))}else if(0===this.state.searchResults.length)return null;return Q.createElement(elk.h,{id:this.listboxId,ref:this.scrollContainerRef,resultCount:e.length,role:"listbox"},e.map(this.renderResult))}render(){let e=this.state.searchQuery||this.state.searchResults.length;return Q.createElement(elk.H,{recordingKey:this.props.recordingKey||"",onKeyDown:this.onKeyDown,"data-testid":"quick-actions"},Q.createElement("div",{className:elI.$P},Q.createElement(eM.B,{svg:elP.A,className:elI.qc}),Q.createElement("input",{ref:this.searchInputRef,className:elI.Rt,placeholder:(0,TC.A)("quick-actions-modal-placeholder"),onChange:this.onSearchChange,onKeyDown:this.onSearchKeyDown,onClick:this.onClick,value:this.state.searchQuery,maxLength:150,spellCheck:!1,dir:"auto",role:"combobox","aria-autocomplete":"list","aria-owns":this.listboxId,"aria-controls":this.listboxId,"aria-expanded":e?"true":"false","aria-activedescendant":e&&(this.state.displayAriaActiveDescendant||this.state.searchResults.length>1)?this.getResultId(this.state.activeItemIndex):void 0})),this.renderResults())}}eoF.displayName="QuickActions";let eoB=(0,$.Ng)(function(e,t){var n;return{pluginAndWidgetMenuArgs:t.pluginAndWidgetMenuArgs,fullscreenMenuItems:t.fullscreenMenuItems,interactionMetrics:t.interactionMetrics,updateFrecencyHistory:t.updateFrecencyHistory,appModel:e.mirror.appModel,selectedView:e.selectedView,recentlyUsedQuickCommands:e.recentlyUsedQuickCommands,onStartParameterEntry:t.onStartParameterEntry,onEnterComponentSearch:t.onEnterComponentSearch,locale:null==(n=e.user)?void 0:n.locale}},function(e){return{dispatch:e}})(eoF);function eoU(e){let t=(0,TP.c4)(),n=(0,TP.uj)(),a=elz(),{addFrecencyUsage:r}=(0,elw.fJ)();return Q.createElement(eoB,{...e,pluginAndWidgetMenuArgs:t,fullscreenMenuItems:n,interactionMetrics:a,updateFrecencyHistory:r})}function eoH(e){let t=(0,eG.J2)((0,eH.UK)().showQuickCommandRankDebug);return Q.createElement(eoV,{...e,showQuickCommandRankDebug:t})}class eoV extends nh.o6{constructor(e){super(e),this.onClick=nh.cZ(this,"click",e=>{if(!this.props.onClick)return nh.aH;this.props.onClick(e)}),this.getDisplayText=()=>{let e=this.props.item,t=e.args;if(t&&t.itemParameterArgs&&e.runPluginArgs&&!this.props.searchQuery)return Q.createElement(elW,{runPluginArgs:e.runPluginArgs,itemParameterArgs:t.itemParameterArgs,pluginId:this.props.item.pluginId,allSavedPlugins:this.props.allSavedPlugins,publishedPlugins:this.props.publishedPlugins});if(t&&t.itemPath){let e=t.itemPath;return Q.createElement(elK,{itemPath:e})}let n=(this.props.showQuickCommandRankDebug&&void 0!==e.stringMatchScore&&void 0!==e.popularityScore?`M${e.stringMatchScore} P${e.popularityScore}: `:"")+TI(e);return Q.createElement("div",{className:elI.D6},n)},eoR(this.props.item)?this.state={itemIsChecked:(0,TS.WJ)(this.props.appModel,this.props.item)}:this.state={}}componentDidUpdate(e,t){super.componentDidUpdate(e,t),null!=this.state.itemIsChecked&&this.setState({itemIsChecked:(0,TS.WJ)(this.props.appModel,this.props.item)})}render(){let e=this.props.item,t=this.getDisplayText(),n=(0,TS.Dz)(e),a=e.shortcutText||(0,yu.c1)(this.props.appModel.keyboardShortcuts,n),r=void 0!==this.props.item.runPluginArgs,l=e.args&&e.menuActionType&&"run-local-plugin"===e.menuActionType&&(!e.runPluginArgs||this.props.searchQuery),i="plugins-menu-item"===e.name&&!!e.args.itemParameterArgs&&e.args.itemParameterArgs.parameters.length>0,o=null;void 0!==this.state.itemIsChecked?o=Q.createElement(eoG,{checked:this.state.itemIsChecked,disabled:this.props.disabled}):this.props.actionIcon&&(o=this.props.actionIcon);let s=`${this.props.active?elI.ix:elI.Ke} ${this.props.disabled?elI.wn:""}`;return Q.createElement("div",{className:s,onMouseMove:this.props.onMouseMove,onMouseEnter:this.props.onMouseEnter,onClick:this.onClick,id:this.props.id,role:this.props.role,"aria-disabled":this.props.disabled||void 0,"aria-checked":this.props.item.checked},Q.createElement("div",{className:elI.EA},o),Q.createElement("div",{className:elI.V4},t,l&&Q.createElement("div",{className:elI.Vu},Q.createElement(eO.Tx,{id:"fullscreen_actions.development"}))),a&&!i&&Q.createElement("div",{className:elI.LE},a),!a&&i&&Q.createElement("div",{className:elI.LE},Q.createElement("div",{className:elI.Hq},Q.createElement(eO.Tx,{id:"fullscreen_actions.tab"})),r&&Q.createElement("div",{className:elI.w8},Q.createElement(eO.Tx,{id:"fullscreen_actions.to_edit"})),Q.createElement(eM.B,{svg:I$.A})),!a&&e.isRepairCommand&&(0,eo.kc)().internal_only_debug_tools&&Q.createElement("div",{style:tT.sx.colorBgTertiary.p8.bRadius8.borderBox.flex.itemsCenter.justifyCenter.mr8.h16.add({fontSize:"8px"}).$},"REPAIR"))}}function eoG(e){return"ui3"===(0,et.DP)().version?Q.createElement("div",{className:elI.kv},Q.createElement(eoP.S,{checked:e.checked,disabled:e.disabled})):e.checked?e.disabled?Q.createElement(eM.B,{className:elI.pX,svg:eoM.A}):Q.createElement(eM.B,{className:elI.NL,svg:eoL.A}):Q.createElement(eM.B,{svg:eoO.A})}function eoK({parameterEntryArgs:e,fireTrackingEvent:t}){var n;let[a,r]=Q.useState(),[l,i]=Q.useState(!0),o=(0,e_.Xr)(WU.dd),s=(0,$.d4)(e=>e.dropdownShown),c=(0,$.wA)();if(Q.useEffect(()=>{if(l){i(!1);let n=(0,i0.g)();o(n),t(n),e&&r({args:e})}},[e,l,t,o]),(0,yu.Wo)(s))return Q.createElement(eoA._x,null);if(!a)return Q.createElement(eoU,{recordingKey:"quickActions",onStartParameterEntry:(e,t,n)=>{let a;switch(n){case"tab":a="quick-actions-tab";break;case"enter":a="quick-actions-enter";break;case"click":a="quick-actions-click";break;default:(0,re.xb)(n)}r({args:{...e,triggeredFrom:a},item:t})},onEnterComponentSearch:()=>{c(nP.j7({type:yu.Ee,data:{entryPoint:eoA.sN.MENU_OPTION}}))}});{let{args:e,item:t}=a,l=t?TI(t):void 0;return Q.createElement(elR,{recordingKey:"parameterEntry",parameters:e.parameters,displayName:e.displayName,pluginId:e.pluginId,pluginLocalFileId:e.pluginLocalFileId,command:e.command,triggeredFrom:e.triggeredFrom,parameterOnly:e.parameterOnly,onExitParameterEntry:()=>{r(void 0)},initialParameterValues:null==(n=null==t?void 0:t.runPluginArgs)?void 0:n.parameterValues,recentlyUsedCommandName:l})}}eoV.displayName="QuickActionsResult";var eoW=n(724109),eoz=n(152990);function eoj(){let[e,t]=(0,Q.useState)(null),[n,a]=(0,Q.useState)(!1),r=(0,Q.useRef)(null),l=(0,Q.useCallback)(()=>{r.current&&clearTimeout(r.current),a(!1)},[]),i=(0,Q.useCallback)(e=>{"reactive_guidance_tooltip--fadeout--qFmOg"===e.animationName&&t(null)},[]),o=(0,Q.useCallback)((e,n)=>{r.current&&(clearTimeout(r.current),t(null)),requestAnimationFrame(()=>{r.current=setTimeout(l,5e3),t({x:e,y:n}),a(!0)})},[l]);(0,Q.useEffect)(()=>(0,eoW.M)(o),[o]);let s=(0,ez._X)({subscribeToUpdates_expensive:!!e});if(!e)return null;let c={top:s.y,left:s.x,height:s.height,width:s.width},d=(0,ez.Z0)(s,{x:e.x+50/s.zoomScale,y:e.y}),u={transform:`translate3D(${d.x}px, ${d.y}px, 0) translate(0, -50%)`};return Q.createElement(t6.fu,{name:"Reactive Guidance Tooltip"},Q.createElement("div",{className:"reactive_guidance_tooltip--overflowContainer--RQWcR",style:c},Q.createElement("div",{className:ea()("reactive_guidance_tooltip--tooltip--YkN90",n?"reactive_guidance_tooltip--fadeIn--Sipdd":"reactive_guidance_tooltip--fadeOut--XaVTK"),style:u,onAnimationEnd:i},Q.createElement("div",{className:"reactive_guidance_tooltip--icon--NgSHS"},Q.createElement(eM.B,{svg:eoz.A})),Q.createElement("div",{className:"reactive_guidance_tooltip--text--Si0XF"},Q.createElement(eO.Tx,{id:"whiteboard.reactive_guidance.view_only",permission:Q.createElement("b",null,Q.createElement(eO.Tx,{id:"whiteboard.reactive_guidance.view_only_permission"}))})),Q.createElement(Un.RJ,{viewOnly:!0,variant:"link-onbrand",recordingKey:"reactiveGuidanceViewPermission",hideViewOnlyText:!0}),Q.createElement(aO.Jn,{className:"reactive_guidance_tooltip--closeButton--J4H60",onClick:l,trackingEventName:"reactive_guidance_tooltip_closed",recordingKey:"reactiveGuidanceTooltip"}))))}var eoY=n(704036);function eoZ(e){let t=(0,at.iZ)();return Q.createElement(t6.fu,{name:"Starter team edit confirmation modal",properties:{userId:null==t?void 0:t.id,userEmail:null==t?void 0:t.email}},Q.createElement(tS.Rw,{confirmationTitle:(0,eO.t)("fullscreen.starter_team_edit_modal.open_this_link"),confirmText:"Continue",onConfirm:()=>{(0,er.sx)("Starter File Edit Modal Confirm Clicked",{fileKey:e.fileKey}),jF.L.createStarterTeamFileRole({key:e.fileKey})},disableClickOutsideToHide:!0,hideOnConfirm:!1,size:"small",hideCancel:!1,hideClose:!0,onCancel:()=>{(0,er.sx)("Starter File Edit Modal Cancel Clicked",{fileKey:e.fileKey}),ei.Ay.redirect("/files/recents-and-sharing")}},Q.createElement("div",{className:ot.jE},Q.createElement(eO.Tx,{id:"fullscreen.starter_team_edit_modal.when_you_open_this_link_your_email_may_be_visible",email:null==t?void 0:t.email}))))}var eoX=n(77437);function eoq(e){return Q.createElement("svg",{width:"16",height:"16",fill:"none",viewBox:"0 0 16 16",...e},Q.createElement("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M8 3a1 1 0 0 1 .872.51l4.5 8A1 1 0 0 1 12.5 13h-9a1 1 0 0 1-.872-1.49l4.5-8A1 1 0 0 1 8 3Zm0 1-.574 1.02L4.062 11 3.5 12h9l-.563-1-3.363-5.98L8 4Z",clipRule:"evenodd"}))}var eoJ=n(583073),eoQ=n(380158);let eo$=(0,LS.D)(e=>{let t=(0,pn.Z)("figjam_summary_attribution");return Q.useCallback(()=>t((0,ez.QZ)({nodeId:e,alwaysPan:!1})),[t,e])});function eo0(){let[e]=(0,ef.fp)(eoQ.J);return 0===Object.keys(e).length?null:Q.createElement(Q.Fragment,null,Object.entries(e).map(([e,t])=>Q.createElement(eo1,{key:e,guid:e,data:t})))}function eo1({guid:e,data:t}){let[n,a]=(0,Q.useState)(null),r=(0,e_.Xr)(eoQ.J);(0,Q.useEffect)(()=>{var t;let n=`summary-overlay-${e}`,l=(null==(t=(0,xT.EE)(n,[e],t=>{null===t.position&&r({type:"STOP_SHOWING_ATTRIBUTION",summaryGuid:e}),a(t.position)}).currentNodePosition[e])?void 0:t.position)||null;return a(l),()=>{(0,xT.lB)(n)}},[e,r]);let l=(0,ez._X)({subscribeToUpdates_expensive:!0}),i=(0,Nd.Ii)(),o=(0,Q.useCallback)(()=>{r({type:"STOP_SHOWING_ATTRIBUTION",summaryGuid:e})},[e,r]),s=Q.useMemo(()=>{if(!n)return{};let e=(0,ez.Yb)(l,n),t=e.x+l.x,a=e.y+i;return{height:n.height,width:n.width,transformOrigin:"top left",position:"fixed",transform:`translate(${t}px, ${a}px) rotate(${n.angle}deg) scale(${l.zoomScale})`}},[l,n,i]);return Q.createElement("div",{style:s},Q.createElement(eo2,{data:t,onClose:o}))}function eo2({data:e,onClose:t}){var n;let a=`summary-content-attribution-source-dropdown-${e.guid}`,r=(0,$.wA)(),l=(0,e_.Xr)(eoQ.J),i=(0,$.d4)(e=>{var t;return(null==(t=e.dropdownShown)?void 0:t.type)===a?e.dropdownShown:null}),o=(0,Q.useCallback)(t=>{l({type:"SET_CURRENT_THEME",summaryGuid:e.guid,theme:t})},[e.guid,l]),s=(0,Q.useRef)(null),[c,d]=(0,Q.useState)(100);Q.useEffect(()=>{s.current&&d(s.current.clientHeight)},[d,null==(n=s.current)?void 0:n.clientHeight]);let u=e.content_attribution.map(e=>e.themeAttachedTo),m=e.current_theme,p=e.content_attribution.find(e=>e.themeAttachedTo===m),[_,f]=(0,Q.useState)(0),h=p?p.nodeIds:[],g=function({numNodes:e,heightAvailable:t}){let n=2*Math.max(Math.floor(t/106),1);return{nodesPerPage:n,pagesNeeded:Math.ceil(e/n)}}({numNodes:h.length,heightAvailable:c});return Q.createElement("div",{className:"summary_attribution_overlay--overlayFrame--72w72"},Q.createElement(eo9,{onClick:t}),Q.createElement("h1",{className:tw.cx.font18.fontSemiBold.lh24.mb4.$},Q.createElement(eO.Tx,{id:"whiteboard.ai_summary.summary_source_header"})),Q.createElement("p",{className:tw.cx.colorTextSecondary.pb16.$},Q.createElement(eO.Tx,{id:"whiteboard.ai_summary.summary_explanation"})," "),Q.createElement(aT.l6,{id:a,ariaLabel:(0,eO.t)("whiteboard.ai_summary_dropdown.aria_label"),"data-testid":"summary-content-attribution-source-dropdown",className:tw.cx.wFull.colorText.$,property:m,onChange:o,dropdownWidth:224,formatter:eo5,dispatch:r,dropdownShown:i,inputClassName:ea()(tw.cx.fontNormal.h16.p8.bRadius6.colorBgSecondary.fontMedium.$,"summary_attribution_overlay--dropdown--lZcAj"),neverConstrain:!0,hideDropdownWhenContainerMoves:!0,targetDomNode:document.body},u.map((e,t)=>Q.createElement(aT.c$,{value:e,key:t,formattedValue:eo5.format(e)}))),Q.createElement("div",{className:tw.cx.flexGrow1.$,ref:s},Q.createElement(eo4,{activePage:_,nodeGuids:h,resultsPerPage:g.nodesPerPage})),Q.createElement(eo7,{activePage:_,onPageChange:f,pageCount:g.pagesNeeded}))}let eo5={format:e=>e};function eo4({nodeGuids:e,activePage:t,resultsPerPage:n}){let a=n*t,r=n*(t+1)-1;return Q.createElement("div",{className:tw.cx.overflowAuto.$},Q.createElement("div",{className:"summary_attribution_overlay--attributionContentContainer--qdB1N"},e.filter((e,t)=>t>=a&&t<=r).map((e,n)=>Q.createElement(eo3,{key:n,guid:e,activePage:t}))))}function eo3({guid:e,activePage:t}){var n;let a=(0,c6.hr)(e=>e,e).get(e),r=Q.useRef(null),[l,i]=Q.useState(!1),o=eo$(e);if(Q.useEffect(()=>{r.current&&i(r.current.isTruncated)},[i,null==(n=r.current)?void 0:n.isTruncated,t]),!a)return null;let s=a.name,c=a.authorName;return Q.createElement("div",{className:tw.cx.flex.$},Q.createElement(eo6,{node:a}),Q.createElement("div",{"data-testid":"summary-attribution-node-text-preview",className:tw.cx.flex.flexColumn.itemsStart.overflowWrapAnywhere.$},Q.createElement(aL.E,{truncate:"line-clamp",lineClamp:3,ref:r},s),l&&Q.createElement(nc.CY,{trusted:!0,onClick:o},Q.createElement(eO.Tx,{id:"whiteboard.ai_summary.show_more"})),Q.createElement("p",{className:tw.cx.colorTextSecondary.mt8.$},c)))}function eo6({node:e}){let t=eo$(e.guid);return"TEXT"===e.type?Q.createElement("div",{className:tw.cx.mr4.mt2.$},Q.createElement("div",{"data-testid":"summary-attribution-node-text-preview-icon-button",role:"button",tabIndex:0,className:tw.cx.bRadius2.cursorPointer.colorBgSecondary.$,onClick:t},Q.createElement(eoX.I,null))):"STICKY"===e.type?Q.createElement("div",{className:tw.cx.mr8.mt2.$},Q.createElement("div",{"data-testid":"summary-attribution-node-text-preview-icon-button",role:"button",tabIndex:0,className:tw.cx.w12.h12.bRadius2.cursorPointer.$,style:{backgroundColor:XO.N.COLOR_TO_CSS.get(e.whiteboardColor)},onClick:t})):"SHAPE_WITH_TEXT"===e.type?Q.createElement("div",{className:tw.cx.mr4.mt2.$},Q.createElement("div",{"data-testid":"summary-attribution-node-text-preview-icon-button",role:"button",tabIndex:0,className:tw.cx.bRadius2.cursorPointer.colorBgSecondary.$,onClick:t},Q.createElement(eoq,null))):Q.createElement("div",{className:tw.cx.mr4.mt2.$},Q.createElement("div",{"data-testid":"summary-attribution-node-text-preview-icon-button",role:"button",tabIndex:0,className:tw.cx.bRadius2.cursorPointer.colorBgSecondary.$,onClick:t},Q.createElement(eoJ.a,null)))}function eo7({activePage:e,onPageChange:t,pageCount:n}){let a=function(e,t){if(t<=0)return[];let n=Array.from({length:t},(e,t)=>t);return t<=4?n:(n.forEach((a,r)=>{0!==r&&r!==t-1&&r!==e&&(r<e-1||r>e+1)&&(n[r]="...")}),n.filter((e,t)=>"..."!==e||"..."!==n[t-1]))}(e,n);return Q.createElement("div",{className:tw.cx.flex.flexRow.justifyCenter.contentCenter.$},a.map((n,a)=>"..."===n?Q.createElement("span",{key:a,className:tw.cx.px6.py2.justifyCenter.cursorDefault.w2.flex.$},"..."):Q.createElement(eo8,{key:a,page:n,activePage:e,onPageChange:()=>t(n)})))}function eo8({page:e,activePage:t,onPageChange:n}){let a=(0,Q.useCallback)(()=>n(e),[e,n]);return Q.createElement("button",{className:tw.cx.if(t===e,tw.cx.colorBgFigjam.colorTextOnbrand).cursorPointer.flex.w20.px6.py2.contentCenter.justifyCenter.bRadius3.fontSemiBold.$,onClick:a},e+1)}function eo9({onClick:e}){return Q.createElement("div",{className:tw.cx.mx8.mb20.$},Q.createElement("button",{className:tw.cx.itemsCenter.flex.colorText.cursorPointer.$,onClick:e},Q.createElement(EK.In,{icon:"chevron-left-32"}),Q.createElement(eO.Tx,{id:"whiteboard.ai_summary.back_to_summary"})))}var ese=n(183875),est=n(497035),esn=n(526518);function esa(){let e=(0,ef.md)(DV.UQ),t=(0,ef.md)(Mv.zN),n=1e3*parseFloat(esn.H)+300,[a,r]=(0,Q.useState)(!1);return((0,Q.useEffect)(()=>{let e=setTimeout(()=>{r(!0)},n);return()=>clearTimeout(e)},[n]),e&&"loaded"===t.status&&!1===t.data&&a)?Q.createElement(esr,null):null}function esr(){let{getConfig:e}=(0,eC.I7)("exp_fj_paywall_exposure"),t=(0,$.d4)(e=>e.userFlags),n=(0,$.d4)(e=>{var t;return null==(t=e.openFile)?void 0:t.teamId}),a=(0,$.d4)(e=>e.multiplayer.sessionID),r=(0,$.d4)(e=>{var t;return null==(t=e.openFile)?void 0:t.key}),l=(0,$.d4)(e=>{var t;return null==(t=e.userAnalyticsData)?void 0:t.first_figjam_at}),i=(0,ef.md)(ese.Zk);if(!e().getValue("showModal",!1)||!(0,Fk.mW)(t,"figjam_editor_onboarded"))return null;if(n)return Q.createElement(esl,{teamId:n,userFlags:t,currentFileKey:r,currentSessionId:a});{let e=(0,Fk.mW)(t,"seen_fj_upsell_draft_modal_1")?(0,Fk.mW)(t,"seen_fj_upsell_draft_modal_2")?(0,Fk.mW)(t,"seen_fj_upsell_draft_modal_3")?null:i.seen_fj_upsell_draft_modal_2.fileKey!==r||i.seen_fj_upsell_draft_modal_2.sessionId!==a?"seen_fj_upsell_draft_modal_3":null:i.seen_fj_upsell_draft_modal_1.fileKey!==r||i.seen_fj_upsell_draft_modal_1.sessionId!==a?"seen_fj_upsell_draft_modal_2":null:"seen_fj_upsell_draft_modal_1";return!e||(0,n5.A)(l).add(7,"day").isSameOrAfter((0,n5.A)())?null:Q.createElement(esi,{mainText:eso(e),userFlag:e,secondaryText:ess(e),upsellSource:my.b.FIGJAM_UPSELL_MODAL,gif:esc(e),teamId:"",currentSessionId:a,currentFileKey:r})}}function esl(e){var t,n,a,r;let{teamId:l,userFlags:i,currentSessionId:o,currentFileKey:s}=e,c=(0,eh.Rs)(tf.bel,{teamId:l});if("loaded"!==c.status)return null;let d=1!==(r=(null==(a=null==(n=null==(t=c.data)?void 0:t.team)?void 0:n.teamFileCounts)?void 0:a.whiteboardFileCount)??0)||(0,Fk.mW)(i,"seen_fj_upsell_team_modal_1")?2!==r||(0,Fk.mW)(i,"seen_fj_upsell_team_modal_2")?3!==r||(0,Fk.mW)(i,"seen_fj_upsell_team_modal_3")?null:"seen_fj_upsell_team_modal_3":"seen_fj_upsell_team_modal_2":"seen_fj_upsell_team_modal_1";return d?Q.createElement(esi,{mainText:eso(d),userFlag:d,secondaryText:ess(d),upsellSource:my.b.FIGJAM_UPSELL_MODAL,gif:esc(d),teamId:l,currentFileKey:s,currentSessionId:o}):null}function esi(e){let{mainText:t,secondaryText:n,userFlag:a,upsellSource:r,gif:l,teamId:i}=e,o=(0,e_.Xr)(ese.xw),s=(0,$.wA)(),c=(0,ef.md)(ese.Zk);Q.useEffect(()=>{o({showing:!0,userFlag:a})},[o,a]);let d=()=>{s(n9.Lo()),s(tB.b({[a]:!0})),c[a]={fileKey:e.currentFileKey,sessionId:e.currentSessionId},o({showing:!1})},u=(0,eo.mm)()[0],m="ja"===u?323-2*M4.uv:303-2*M4.uv;return Q.createElement(t6.fu,{name:"FigJamUpsellModal",properties:{}},Q.createElement(M4.CR,{targetKey:est.l,dismissModal:d,width:m,topPadding:12,shouldCenterArrow:DK.EL.FALLBACK,disableClickOutsideToHide:!0,additionalOnExplicitDismiss:d,className:"figjam_upsell_modal--modal--04mt-",closeButtonClassName:"figjam_upsell_modal--closeButton--MTKjp",shouldDismissWhenLostDOMTarget:!0},Q.createElement("div",{className:"figjam_upsell_modal--genericTopHalf--iECQZ"},Q.createElement("span",{className:"figjam_upsell_modal--mainText--pe9Vj text--fontNeg14--ARPWl text--_fontBase--QdLsd text--_negText--j9g-L",style:{width:"ja"===u?154:150}},t),Q.createElement("div",{className:"figjam_upsell_modal--gif--1VlR7"},l)),Q.createElement("div",{className:"figjam_upsell_modal--genericBottomHalf--ZGBjw"},Q.createElement("span",null,n),Q.createElement(tC.vd,{className:"figjam_upsell_modal--upgradeButton--4w7Fb",onClick:()=>{d(),s(n9.to({type:mv.V,data:{upsellSource:r,teamId:i,openCheckoutInNewTab:!0}}))}},Q.createElement(eO.Tx,{id:"upsell.history.upgrade_now"})))))}function eso(e){switch(e){case"seen_fj_upsell_draft_modal_1":return Q.createElement(eO.Tx,{id:"whiteboard.paywall_upsell.draft.first.main",purpleSection:esd(Q.createElement(eO.Tx,{id:"whiteboard.paywall_upsell.draft.first.main.purpleSection"}))});case"seen_fj_upsell_draft_modal_2":return Q.createElement(eO.Tx,{id:"whiteboard.paywall_upsell.draft.second.main",purpleSection:esd(Q.createElement(eO.Tx,{id:"whiteboard.paywall_upsell.draft.second.main.purpleSection"}))});case"seen_fj_upsell_draft_modal_3":return Q.createElement(eO.Tx,{id:"whiteboard.paywall_upsell.draft.third.main",purpleSection:esd(Q.createElement(eO.Tx,{id:"whiteboard.paywall_upsell.draft.third.main.purpleSection"}))});case"seen_fj_upsell_team_modal_1":return Q.createElement(eO.Tx,{id:"whiteboard.paywall_upsell.team.main",fileCount:esd(Q.createElement(eO.Tx,{id:"whiteboard.paywall_upsell.team.main.first"}))});case"seen_fj_upsell_team_modal_2":return Q.createElement(eO.Tx,{id:"whiteboard.paywall_upsell.team.main",fileCount:esd(Q.createElement(eO.Tx,{id:"whiteboard.paywall_upsell.team.main.second"}))});case"seen_fj_upsell_team_modal_3":return Q.createElement(eO.Tx,{id:"whiteboard.paywall_upsell.team.last.main",purpleSection:esd(Q.createElement(eO.Tx,{id:"whiteboard.paywall_upsell.team.last.main.purpleSection"}))});default:return Q.createElement(Q.Fragment,null)}}function ess(e){switch(e){case"seen_fj_upsell_draft_modal_1":return Q.createElement(eO.Tx,{id:"whiteboard.paywall_upsell.draft.first.secondary"});case"seen_fj_upsell_draft_modal_2":return Q.createElement(eO.Tx,{id:"whiteboard.paywall_upsell.draft.second.secondary"});case"seen_fj_upsell_draft_modal_3":return Q.createElement(eO.Tx,{id:"whiteboard.paywall_upsell.draft.third.secondary"});case"seen_fj_upsell_team_modal_1":case"seen_fj_upsell_team_modal_2":case"seen_fj_upsell_team_modal_3":return Q.createElement(eO.Tx,{id:"whiteboard.paywall_upsell.team.secondary"});default:return Q.createElement(Q.Fragment,null)}}function esc(e){switch(e){case"seen_fj_upsell_draft_modal_1":return Q.createElement("img",{src:"https://static.figma.com/uploads/2e5f8efd83d4a5faea78203c9c6d306d0d0b862b",alt:"stamping a sticky animation"});case"seen_fj_upsell_draft_modal_2":return Q.createElement("img",{src:"https://static.figma.com/uploads/7909d41489939d9259567eeb734d887eb67b95fc",alt:"voting wheel animation"});case"seen_fj_upsell_draft_modal_3":return Q.createElement("img",{src:"https://static.figma.com/uploads/c490e715dcc620fce0cff9c6cd11936b30dbe1bd",alt:"audio call animation"});case"seen_fj_upsell_team_modal_1":return Q.createElement("img",{src:"https://static.figma.com/uploads/fecccf2b6ed6c72a5269dea45f2f713bdef5b0cb",alt:"one file used animation"});case"seen_fj_upsell_team_modal_2":return Q.createElement("img",{src:"https://static.figma.com/uploads/1623cd399db275cf37f3360fbf774696660cd7e6",alt:"two files used animation"});case"seen_fj_upsell_team_modal_3":return Q.createElement("img",{src:"https://static.figma.com/uploads/cb781eb3d9a927a0bce7e246f2f8614e47d5ee1c",alt:"third file used animation"})}}function esd(e){return Q.createElement("span",{className:"figjam_upsell_modal--purpleText--gZ21M"},e)}var esu=n(748673),esm=n(971566),esp=n(166578),es_=n(211451),esf=n(275426),esh=n(775058);let esg=Q.createElement("svg",{width:"18",height:"16",viewBox:"0 0 18 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Q.createElement("g",{id:"ICON-templates"},Q.createElement("line",{id:"Line 2",x1:"5.5",y1:"1",x2:"5.5",y2:"15",stroke:"black",strokeOpacity:"0.9"}),Q.createElement("rect",{id:"Rectangle 2083",x:"0.5",y:"0.5",width:"17",height:"15",stroke:"black",strokeOpacity:"0.9"}),Q.createElement("rect",{id:"Rectangle 7984",x:"1",y:"1",width:"4",height:"14",fill:"black",fillOpacity:"0.3"}))),esE=Q.createElement("svg",{width:"18",height:"16",viewBox:"0 0 18 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Q.createElement("line",{x1:"5.5",y1:"1",x2:"5.5",y2:"15",stroke:"black",strokeOpacity:"0.9"}),Q.createElement("rect",{x:"0.5",y:"0.5",width:"17",height:"15",stroke:"black",strokeOpacity:"0.9"}));function esv(){let e=(0,cY.Gf)(),t="CLOSED"!==(0,ef.md)(esf.Tb).type,n=(0,e_.Xr)(esf.UT),a=(0,e_.Xr)(esf.Cx),r=(0,Ba.qU)();if(!e)return null;let l=()=>{t?a():(r(),n())};return Q.createElement("div",null,Q.createElement(ns.GG,{className:esh.gb,"data-tooltip-type":nO.Ib.TEXT,"data-tooltip":(0,eO.t)("whiteboard.mini_home.toggle_button"),onKeyDown:e=>(0,w_.hx)({e,onClickHandler:l}),onClick:l,tabIndex:0,"aria-label":(0,eO.t)("whiteboard.mini_home.toggle_button"),"data-onboarding-key":"in_editor_sidebar_toolbar"},t?esg:esE))}var esy=n(760591);function esb(){let e=(0,t_.q5)();return Q.createElement("div",{className:"extension_toolbar_left_items--leftToolbar--npGkc",tabIndex:0,onClick:()=>(0,a8._r)(),role:"button"},Q.createElement(aJ.K0,{svg:esy.A,"data-tooltip-type":nO.Ib.TEXT,"data-tooltip":(0,eO.t)("dev_handoff.vscode.toolbar.back_button"),className:"extension_toolbar_left_items--back--JwiF5",disabled:!0}),Q.createElement("div",{className:"extension_toolbar_left_items--fileNameText---u61D"},null==e?void 0:e.name))}var esC=n(720248),esw=n(671250);function esT({focusModeEnabled:e,onClick:t}){return Q.createElement("button",{"data-editor-theme":"dev-handoff",onClick:t,"data-tooltip":(0,eO.t)(e?"dev_handoff.vscode.exit_focus_mode":"dev_handoff.vscode.enter_focus_mode"),"data-tooltip-type":nO.Ib.TEXT},Q.createElement(eM.B,{svg:e?esw.A:esC.A,className:"dev_handoff_toolbar_focus_button--focusModeIcon--LMEyU"}))}var esx=n(197368),esN=n(699731);function esk(){let e=(0,$.wA)(),t=(0,eG.J2)(eU.Ez5.devHandoffState().focusMode);return Q.createElement("div",{className:"extension_toolbar_right_items--buttons--3pMn8"},t&&Q.createElement(ER.jX,null),Q.createElement(esT,{focusModeEnabled:t,onClick:()=>eU.w3z.setFocusModeEnabled(!t)}),Q.createElement("button",{"data-editor-theme":"dev-handoff",onClick:()=>e(nA.lW({stringToCopy:window.location.toString()})),"data-tooltip":(0,eO.t)("dev_handoff.copy_link"),"data-tooltip-type":nO.Ib.TEXT},Q.createElement(eM.B,{svg:esx.A})),Q.createElement("button",{"data-editor-theme":"dev-handoff",onClick:()=>a8.Qn(window.location.toString()),"data-tooltip":(0,eO.t)("dev_handoff.open_in_figma"),"data-tooltip-type":nO.Ib.TEXT},Q.createElement(eM.B,{svg:esN.A})))}function esS(){let e=(0,ef.md)(X7),t=(0,e_.Xr)(X8),n=(0,e_.Xr)(X9);return Q.createElement(RK,{tooltipText:(0,eO.t)("fullscreen.pages_panel.pages"),isActive:e,onClick:()=>{e?n():t()},addLeftMargin:!1,recordingKey:"figjamPagesToolbarItem"},Q.createElement("div",{className:tw.cx.mxAuto.$},e?Q.createElement(f6,{style:{"--color-icon":"var(--color-icon-toolbar-onselected)"}}):Q.createElement(f3,null)))}function esI(){let e=(0,ae.aV)(),t=(0,$.d4)(e=>e.mirror.appModel.topLevelMode===eU.lyf.HISTORY),n=!(0,SF.yT)()&&(0,LI.Uy)(),a=(0,eo.kc)().figjam_pages_in_figjam,r=ec.Ay.isMeetDevice;return t?null:Q.createElement(Q.Fragment,null,a&&Q.createElement(esS,null),Q.createElement(qh,null),n&&Q.createElement(qs,null),Q.createElement(RZ,null),!e&&!r&&Q.createElement(qa,null))}var esA=n(384305),esP=n(426615),esO=n(776221);let esL=(0,aE.Ju)(function(e){let t=(0,$.wA)(),[n,a]=Q.useState(""),[r,l]=Q.useState(!1),i=(0,t_.tS)(),o=(0,$.d4)(e=>i?e.loadingState[DT.loadingKeyForPayload({fileKey:i,emailAddress:n})]===Dh.r.LOADING:null);return Q.createElement(t6.fu,{name:"google_device_try_file_claim_modal"},Q.createElement(tS.aF,{disableKeyboardEventPropagation:!0,className:Dy.tQ,onHide:()=>(0,er.sx)("google_meet_claim_email_modal_closed",{fileKey:i})},Q.createElement("div",{className:Dy.FS},Q.createElement("h1",{className:Dy.DX},Q.createElement(eO.Tx,{id:"google_device_try_file_modal.enter_email"}))),Q.createElement(Dg.k0,{multiple:1}),Q.createElement("div",{className:Dy.FS},Q.createElement("div",{className:Dy.Kc},Q.createElement(eO.Tx,{id:"google_device_try_file_modal.enter_email.description"}))),Q.createElement(Dg.k0,{multiple:3}),Q.createElement(nc.il,{autoFocus:!0,type:"email",className:ea()(Dy._2,r&&Dy.cC),placeholder:(0,eO.t)("google_device_try_file_modal.enter_email.placeholder_email"),onChange:e=>{a(e.target.value)},value:n}),r&&Q.createElement("div",{className:Dy.mV},Q.createElement(eO.Tx,{id:"google_device_try_file_modal.enter_email.error_message"})),Q.createElement(Dg.k0,{multiple:2}),Q.createElement(nc.nD,{type:"submit",fullWidth:!0,onClick:a=>{if(a.preventDefault(),a.stopPropagation(),null==n||!1===(0,esA.xf)(n)||!i){l(!0);return}if(!i){t(Dv.s.error((0,eO.t)("google_device_try_file_modal.error_saving_board")));return}e.onSubmitEmail({fileKey:i,emailAddress:n})}},Q.createElement(DE.x,{isLoading:!!o,className:tw.cx.flex.justifyCenter.$},()=>Q.createElement(eO.Tx,{id:"google_device_try_file_modal.enter_email.button"}))),Q.createElement(Dg.k0,{multiple:3}),Q.createElement("div",{className:Dy.NJ},Q.createElement(eO.Tx,{id:"google_device_try_file_modal.disclaimer",tos:Q.createElement(esO.V,{url:ec.Ay.isMeetDevice?esP.A:esP.Uw,title:(0,eO.t)("google_device_try_file_modal.onboarding_disclaimer_tos")}),privacy_policy:Q.createElement(esO.V,{url:ec.Ay.isMeetDevice?esP.bO:esP.JD,title:(0,eO.t)("google_device_try_file_modal.onboarding_disclaimer_privacy_policy")})})),Q.createElement(Dg.k0,{multiple:1})))},"GOOGLE_DEVICE_TRY_FILE_CLAIM_MODAL"),esM=(0,aE.Ju)(function(e){let{email:t,onChangeEmail:n}=e,a=(0,$.wA)(),r=(0,t_.tS)();return Q.createElement(t6.fu,{name:"google_device_try_file_received_email_modal"},Q.createElement(tS.aF,{disableClickOutsideToHide:!0,disableKeyboardEventPropagation:!0,className:Dy.Kd},Q.createElement("img",{src:"https://static.figma.com/uploads/b0feff5e4abc5e66f99064463f2ad5d0a7f6c072.png",alt:"",className:Dy.ZQ}),Q.createElement(Dg.k0,{multiple:2}),Q.createElement("div",{className:Dy.FS},Q.createElement("h1",{className:Dy.DX},Q.createElement(eO.Tx,{id:"google_device_try_file_modal.got_mail"}))),Q.createElement(Dg.k0,{multiple:1}),Q.createElement("div",{className:Dy.FS},Q.createElement("div",{className:Dy.Kc},Q.createElement(eO.Tx,{id:"google_device_try_file_modal.got_mail.description",email:Q.createElement("p",{className:Dy.Fx},t)}))),Q.createElement(Dg.k0,{multiple:3}),Q.createElement(nc.nD,{type:"close",fullWidth:!0,onClick:e=>{e.preventDefault(),e.stopPropagation(),a(n9.Ce())}},Q.createElement(eO.Tx,{id:"google_device_try_file_modal.got_mail.close"})),Q.createElement(Dg.k0,{multiple:3}),Q.createElement("div",{className:Dy.NJ},Q.createElement(eO.Tx,{id:"google_device_try_file_modal.got_mail.email_not_received",send_again_link:Q.createElement(nc.Us,{className:Dy.jH,onClick:n=>{if(n.preventDefault(),n.stopPropagation(),!r){a(Dv.s.error((0,eO.t)("google_device_try_file_modal.error_saving_board")));return}e.onResendEmail({fileKey:r,emailAddress:t,isResentEmail:!0})},target:"_blank",trusted:!0},Q.createElement(eO.Tx,{id:"google_device_try_file_modal.got_mail.email_not_received.send_again"}))})),Q.createElement(Dg.k0,{multiple:2}),Q.createElement("div",{className:Dy.NJ},Q.createElement(eO.Tx,{id:"google_device_try_file_modal.got_mail.wrong_address",use_different_email_link:Q.createElement(nc.Us,{className:Dy.jH,onClick:e=>{e.preventDefault(),e.stopPropagation(),n()},target:"_blank",trusted:!0},Q.createElement(eO.Tx,{id:"google_device_try_file_modal.got_mail.wrong_address.use_different_email"}))}))))},"GOOGLE_DEVICE_TRY_FILE_RECEIVED_EMAIL_MODAL");var esD=n(589462);function esR(e){let t=(0,n5.A)(),n=Math.ceil((0,n5.A)(e).diff(t,"minutes",!0));return n>30?(0,eO.t)("figjam_try.timer_hours_left",{hoursLeft:Math.ceil(n/60)}):n>=10?(0,eO.t)("figjam_try.timer_minutes_left",{minutesLeft:10*Math.ceil(n/10)}):(0,eO.t)("figjam_try.timer_less_than_ten_minutes_left")}function esF({until:e,ctaText:t,onCtaClick:n,isFigjam:a,tooltipText:r,showAndHideTooltipImmediately:l,isLoading:i,onExpire:o,onboardingKey:s}){let[c,d]=(0,Q.useState)(esR(e));return(0,Q.useEffect)(()=>{let t=setInterval(()=>{d(esR(e)),(0,n5.A)().isAfter((0,n5.A)(e))&&o&&o()},6e4);return()=>{clearInterval(t)}},[e,o]),Q.createElement("div",{className:a?"countdown--figjamContainer--hlbVE countdown--container--WCLxZ":"countdown--designContainer--PVZIP countdown--container--WCLxZ","data-onboarding-key":s},Q.createElement("div",{className:"countdown--timerContainer--L3IFQ","data-tooltip-type":nO.Ib.TEXT,"data-tooltip":r,"data-tooltip-show-immediately":l,"data-tooltip-hide-immediately":l},Q.createElement(eM.B,{className:"countdown--icon--PREBw",svg:esD.A}),Q.createElement("span",{className:"countdown--text--kN4nf ellipsis--ellipsis--Tjyfa","data-testid":"countdown-time"},c)),Q.createElement(DE.x,{isLoading:!!i,className:"countdown--loading--DaaWQ"},()=>Q.createElement(t6.$z,{className:"countdown--cta--JhE8T ellipsis--ellipsis--Tjyfa",onClick:()=>n(),trackingProperties:{buttonContext:t}},t)))}function esB(e){let t=(0,n5.A)(),n=Math.ceil((0,n5.A)(e).diff(t,"minutes",!0));return n>30?(0,eO.t)("figjam_try.meet_hardware.timer_hours_left",{hoursLeft:Math.ceil(n/60)}):n>=10?(0,eO.t)("figjam_try.meet_hardware.timer_minutes_left",{minutesLeft:10*Math.ceil(n/10)}):(0,eO.t)("figjam_try.meet_hardware.timer_less_than_ten_minutes_left")}function esU({until:e,ctaText:t,onCtaClick:n,tooltipText:a,showAndHideTooltipImmediately:r,isLoading:l,onExpire:i,onboardingKey:o}){let[s,c]=(0,Q.useState)(esB(e));return(0,Q.useEffect)(()=>{let t=setInterval(()=>{c(esB(e)),(0,n5.A)().isAfter((0,n5.A)(e))&&i&&i()},6e4);return()=>{clearInterval(t)}},[e,i]),Q.createElement("div",{className:"countdown_meet_hardware--figjamContainer--libjf countdown_meet_hardware--container--gM5Hl","data-onboarding-key":o},Q.createElement("div",{className:"countdown_meet_hardware--timerContainer--JsqME","data-tooltip-type":nO.Ib.TEXT,"data-tooltip":a,"data-tooltip-show-immediately":r,"data-tooltip-hide-immediately":r},Q.createElement("img",{src:"https://static.figma.com/uploads/d2458a35e4543003186712a5c44448bc0949f82b",alt:"Wave hand icon",className:"countdown_meet_hardware--waveIcon--Lc-LT"}),Q.createElement("span",{className:"countdown_meet_hardware--countdownText--Igbr2 ellipsis--ellipsis--Tjyfa","data-testid":"countdown-time"},s),Q.createElement("span",{className:"countdown_meet_hardware--text--Ahn7z ellipsis--ellipsis--Tjyfa","data-testid":"countdown-time-text"},(0,eO.t)("figjam_try.meet_hardware.board_deletion_disclaimer"))),Q.createElement(DE.x,{isLoading:!!l,className:"countdown_meet_hardware--loading--s6qrq"},()=>Q.createElement(t6.$z,{className:"countdown_meet_hardware--cta--H8MOo ellipsis--ellipsis--Tjyfa",onClick:()=>n(),trackingProperties:{buttonContext:t}},t)))}let esH="figjam-try-countdown",esV="figjam-try-timed-tooltip-shown",esG=(0,aE.Ju)(function(){let e=(0,$.wA)(),t=(0,Y2.B)(),n=()=>{e(n9.ES({type:esG.type}))};return Q.createElement(t6.fu,{name:"FigJam Try - Timed Tooltip"},Q.createElement(M4.OA,{targetKey:esH,shouldCenterArrow:dn.EL.FALLBACK,title:(0,eO.t)("figjam_try.timed_tooltip_headline"),topPadding:8,dismissModal:n,width:300-2*M4.uv,ctaText:(0,eO.t)("figjam_try.timed_tooltip_cta"),onClickPrimaryCta:()=>{n(),t({origin:"figjam_try_timed_tooltip",formState:GU.qB.SIGN_UP})},buttonContext:"Create account"},Q.createElement("p",null,Q.createElement(eO.Tx,{id:"figjam_try.timed_tooltip_body"}))))},"FigjamTryTimedTooltip");function esK(){let e=(0,wu.nF)(),t=(0,$.wA)(),n=(0,$.d4)(e=>!e.user),a=(0,$.d4)(e=>{var t;return null==(t=e.openFile)?void 0:t.key}),r=ec.Ay.isMeetDevice,l=(0,$.d4)(e=>!!a&&e.loadingState[LG.Q.loadingKeyForPayload({file_key:a})]===Dh.r.LOADING),i=(0,Y2.B)(),o=(0,$.d4)(e=>!!e.modalShown),s=(0,Q.useRef)((0,n5.A)().add(5,"minutes")),c=(0,Nj.Kx)(),[d,u]=(0,Q.useState)(!!(0,ew.DN)().get(esV));(0,Q.useEffect)(()=>{if(!d&&n&&!o&&!(null==c?void 0:c.shouldOptimizeForIpadApp)&&!r){let e=setInterval(()=>{(0,n5.A)().isSameOrAfter(s.current)&&(u(!0),(0,ew.DN)().set(esV,1),t(n9.to({type:esG})))},6e4);return()=>{clearInterval(e)}}},[d,n,o,t,null==c?void 0:c.shouldOptimizeForIpadApp,r]);let m=(0,Nj.pt)();if((0,Q.useEffect)(()=>{m&&(m._claim_fig_jam_try_file=e=>{t(LG.Q({file_key:e}))})},[m,t]),(0,Q.useEffect)(()=>{(null==c?void 0:c.updateFigJamTryExpiration)&&e.enabled&&e.until&&c.updateFigJamTryExpiration(e.until)},[c,e]),!e.enabled||!a)return null;let p=()=>{t(n9.to({type:esL,data:{onSubmitEmail:({fileKey:e,emailAddress:n})=>{t(DT({fileKey:e,emailAddress:n,onSuccess:f}))}}}))},_=({fileKey:e,emailAddress:n,isResentEmail:a})=>{t(DT({fileKey:e,emailAddress:n,isResentEmail:a}))},f=e=>{t(n9.to({type:esM,data:{email:e,onChangeEmail:p,onResendEmail:_}}))};return Q.createElement(t6.fu,{name:"FigJam Try Countdown Timer"},r?Q.createElement(esU,{until:e.until,ctaText:(0,eO.t)("figjam_try.save_board"),onCtaClick:()=>{t(n9.to({type:esL,data:{onSubmitEmail:({fileKey:e,emailAddress:n})=>{t(DT({fileKey:e,emailAddress:n,onSuccess:f}))}}}))},tooltipText:n?(0,eO.t)("figjam_try.timer_tooltip_anonymous"):(0,eO.t)("figjam_try.timer_tooltip_logged_in"),showAndHideTooltipImmediately:!0,isLoading:l,onboardingKey:esH}):Q.createElement(esF,{until:e.until,ctaText:(0,eO.t)("figjam_try.save_board"),onCtaClick:()=>{n?i({origin:"figjam_try_countdown_timer",formState:GU.qB.SIGN_UP}):t(LG.Q({file_key:a}))},isFigjam:!0,tooltipText:n?(0,eO.t)("figjam_try.timer_tooltip_anonymous"):(0,eO.t)("figjam_try.timer_tooltip_logged_in"),showAndHideTooltipImmediately:!0,isLoading:l,onboardingKey:esH}))}function esW({variant:e}){switch(e){case"design":return Q.createElement("div",{className:tw.cx.px8.$},Q.createElement("div",{className:tw.cx.h16.px4.bRadius3.$,style:tT.sx.add({border:"1px solid var(--color-bg-design)",color:"var(--color-bg-design)"}).$},Q.createElement(aL.E,{i18nId:"fullscreen.toolbar.integ_zoom.beta",fontSize:9})));case"figjam":return Q.createElement("div",{className:tw.cx.px8.$},Q.createElement(iZ.Ex,{text:(0,eO.t)("fullscreen.toolbar.integ_zoom.beta"),color:iZ.zE.FIGJAM,subtle:!0}))}}let esz="libraries-toolbar-button-key",esj="seen_libraries_toolbar_nudge",esY=(0,tc.r1)(esj);function esZ(){let e=(0,ef.md)(esY),t=(0,ef.md)(dA.Lc),{show:n,isShowing:a,complete:r}=(0,tp.e)({overlay:tv.tAp,priority:th.N.SECONDARY_MODAL},[e]);return Q.useEffect(()=>n({canShow:e=>!e&&t}),[t,n]),Q.createElement(c9.rq,{isShowing:a,emphasized:!0,targetKey:esz,trackingContextName:"updates_toast_deprecation_callout",title:Q.createElement(eO.Tx,{id:"fullscreen.toolbar.libraries_button.nudge.title"}),description:Q.createElement(eO.Tx,{id:"fullscreen.toolbar.libraries_button.nudge.description"}),userFlagOnShow:esj,onClose:r})}var esX=n(99231);function esq(){let e=(0,ti.U4)(),t=(0,ti.R_)(),n=(0,ef.md)(esX.a),a=(0,ef.md)(esX.d),{show:r,isShowing:l,complete:i}=(0,tp.e)({overlay:tv.hQM,priority:th.N.HIGH_PRIORITY_MODAL},[n,a]),o=(0,tm.bZ)(),s=(0,$.wA)(),c=(0,Q.useCallback)(()=>{e&&!t&&r({canShow:(e,t)=>!!e&&!t})},[e,t,r]);(0,ts.h)(()=>{c()});let d=Q.useCallback(()=>{i(),s(tB.b({dev_mode_seen_paywall_reminder:!0,dev_mode_should_see_paywall_reminder:!1}))},[i,s]);return(0,Q.useEffect)(()=>{l&&t&&d()},[l,d,t]),Q.createElement(c9.rq,{isShowing:l,targetKey:(0,aD.GS)()?mM.ON:z5.e,shouldCenterArrow:dn.EL.BEST_EFFORT,trackingContextName:"Dev Mode Paywall Closed Design Mode Reminder Hint",trackingProperties:o,trackingEnabled:(null==o?void 0:o.gracePeriod)!==void 0,description:Q.createElement(eO.Tx,{id:"dev_handoff.paywall.hint_in_design_mode"}),onClose:d,emphasized:!0,forceEditorTheme:"dev-handoff"})}let esJ="mode_switcher_toggle--toggled---c0DA";var esQ=n(320735);function es$({disabled:e,extraPadding:t,toggled:n,handleOnPointerDown:a,handleOnKeyDown:r,recordingKey:l}){return Q.createElement("div",{className:ea()("mode_switcher_toggle--switchWithButtonBase--EtDrb",(0,eo.kc)().ds_updates_toast_deprecation&&"mode_switcher_toggle--dsUpdatesToastDeprecationSwitchWithButtonBase---Q2OY",t&&"mode_switcher_toggle--extraPadding--slSfm",e&&"mode_switcher_toggle--disabled--y1Es8",n&&esJ),role:"button",onPointerDown:a},Q.createElement(nc.u4,{disabled:e,defaultClass:ea()("mode_switcher_toggle--switchButton--i3ZP2",n&&esJ),"data-onboarding-key":z5.e,"data-fullscreen-intercept":!0,onKeyDown:r},Q.createElement(eM.B,{svg:esQ.A})))}function es0({disabled:e,extraPadding:t,isDevHandoff:n,recordingKey:a,tooltip:r,tooltipType:l}){let i=(0,tm.HV)(),o=(0,t8.U)("toggle"),s=(0,ae.aV)(),c=(0,at.iZ)(),d=(0,t_.q5)(),u=(0,nh.BV)(nh.Pt(a,"switchToDevModeButton"),"pointerdown",t=>{e||0!==t.button||(t.preventDefault(),o(n?"design":"handoff"))}),m=(0,nh.v_)(nh.Pt(a,"switchToDevModeToggle"),"keydown",e=>{("Enter"===e.code||"Space"===e.code)&&o(n?"design":"handoff")}),p=!!d&&(null==c?void 0:c.id)===d.creatorId;return Q.createElement(Q.Fragment,null,Q.createElement("div",{className:ea()("mode_switcher_toggle--toggleWrapper--kHykz",n?esJ:""),role:"button","aria-pressed":n,"data-tooltip-type":l??nO.Ib.TEXT,"data-tooltip":r??(0,eO.t)("general.dev_mode"),"data-tooltip-shortcut-key":r?void 0:n?"enter-design-mode":"enter-inspect-mode","data-tooltip-offset-y":4,"data-tooltip-interactive":l===nO.Ib.SPECIAL,"data-tooltip-is-current-user-file-owner":JSON.stringify(p),"data-onboarding-key":mM.ON},Q.createElement(es$,{disabled:e,extraPadding:t,toggled:n,handleOnPointerDown:u,handleOnKeyDown:m})),Q.createElement(Ei.p,null,!s&&Q.createElement(z8,null),!s&&Q.createElement(z4,null),!s&&i&&!n&&Q.createElement(esq,null)))}function es1({recordingKey:e,extraPadding:t}){let n=(0,sZ.ks)(),a=(0,$.wA)(),r=(0,t_.tS)(),l=(0,t_.q5)(),i=(0,$.d4)(e=>{var t;return null==(t=e.openFile)?void 0:t.canEdit}),o=(0,$.d4)(e=>e.selectedView),s=(0,ti.U4)(),c=!(0,at.iZ)(),d=n?"handoff":"design";(0,Q.useEffect)(()=>{c&&"handoff"===d&&a(nP.$T({...o,view:"fullscreen",editorType:"design"}))},[c,d,a,o]);let u="handoff"===d,m=(0,Q.useRef)(u);if((0,Q.useEffect)(()=>{if(m.current!==u){let e=u?(0,eO.t)("dev_handoff.inspect_mode.switched_to_inspect"):(0,eO.t)("dev_handoff.inspect_mode.switched_to_design");a(eL.F.dequeue({matchType:"switched_editor_mode"})),a(eL.F.enqueue({type:"switched_editor_mode",message:e,delay:200,timeoutOverride:1200}))}m.current=u},[u,a]),c)return null;let p=!u&&!s&&!(0,pF.nl)(),_=!!l&&!l.parentOrgId&&!l.teamId;return Q.createElement(es0,{canEdit:i,disabled:!r||p,extraPadding:t,tooltip:p?_?nO.MW.DEVMODE_TOGGLE_DISABLED_PERSONAL_DRAFT:nO.MW.DEVMODE_TOGGLE_DISABLED_TRACKED_TOOLTIP:void 0,tooltipType:p?nO.Ib.SPECIAL:nO.Ib.TEXT,isDevHandoff:u,recordingKey:e})}var es2=n(887130),es5=n(447798);function es4(){var e,t;let n=(0,$.d4)(sY.ao),a=(0,ef.md)(dA.Lc),r=(0,$.d4)(es2.c9),l=(0,ef.md)(t_.yV),i=(0,ef.md)(DV.p9),o=r.file_key,s=null==(e=null==l?void 0:l.parentOrgId)?void 0:e.toString(),c=null==(t=r.file_team_id)?void 0:t.toString(),d=null==i?void 0:i.id,{isLibraryModalShown:u,onToggleLibraryModal:m}=dI({entrypoint:dd.r6.TOOLBAR_BUTTON,modalType:"editor",hasUpdatesToAccept:a}),p=Q.useRef(!1),_=a?(0,eO.t)("fullscreen.libraries_button.tooltip.updates_to_pull"):n?(0,eO.t)("fullscreen.libraries_button.tooltip.updates_to_push"):(0,eO.t)("fullscreen.libraries_button.tooltip.no_updates"),f=a||n,h=(0,ue.Z)(f),g=Q.useCallback(e=>{er.az.trackDefinedEvent("design_systems_analytics.update_notification_displayed",{userId:d,fileKey:o,fileParentOrgId:s,fileTeamId:c,onFileOpen:e,hasChangesToPull:a})},[d,o,s,c,a]),{start:E}=(0,f_.Z)(()=>{f&&g(!0),p.current=!0});return(0,ts.h)(()=>{E(1e3)}),Q.useEffect(()=>{p.current&&f!==h&&(f?g(!1):er.az.trackDefinedEvent("design_systems_analytics.update_notification_undisplayed",{userId:d,fileKey:o,fileParentOrgId:s,fileTeamId:c}))},[g,f,h,p,d,o,s,c]),Q.createElement("span",{className:ea()(es5.WT,(0,RV.M)(!0,u))},Q.createElement(nu.t,{svg:dE.A,fallbackSvg:dv.A,recordingKey:"actionLibraryButton",className:ea()(es5.gb),onMouseDown:m,"data-tooltip-type":nO.Ib.TEXT,"data-tooltip":_,"data-tooltip-submenu-open":u,"data-onboarding-key":esz}),f&&Q.createElement("span",{className:ea()(RV.I.updatesBadge)}))}var es3=n(232117);function es6(){let[e,t]=Q.useState(!1),n=Q.useRef(null),a=Q.useRef(null),[r,l]=Q.useState(null),i=(0,$.d4)(e=>e.mirror.appModel.pagesList),o=(0,$.d4)(e=>e.mirror.appModel.currentPage),s=i.find(e=>e.nodeId===o),c=(0,ez.RU)({subscribeToUpdates_expensive:!1})-(0,rT.hG)(uT.YI7)-((null==r?void 0:r.top)??0);if((0,CN.L)(n,()=>{e&&t(!1)}),!i)return null;async function d(e){await tN.qo.instance.setCurrentPageFromNodeAsync(e),t(!1)}return Q.createElement("div",{className:"toolbar_page_picker--pagePicker--GVgi5",ref:n},Q.createElement("button",{className:"toolbar_page_picker--pagePickerButton--5Hmqt",ref:a,onClick:function(){var n;if(e)t(!1);else{let e=null==(n=a.current)?void 0:n.getBoundingClientRect();e&&(l(e),t(!0))}},"data-tooltip":(0,eO.t)("dev_handoff.pages_list"),"data-tooltip-type":nO.Ib.TEXT},Q.createElement(gr,{pageGuid:o,margin:"marginRight",fallback:Q.createElement(eM.B,{svg:es3.A,className:"toolbar_page_picker--pagePickerIcon--BvSvj"})}),Q.createElement("span",{className:"toolbar_page_picker--pagePickerButtonContent--Sr4lK"},(null==s?void 0:s.name)||""),Q.createElement(eM.B,{svg:hK.A,className:"toolbar_page_picker--pagePickerButtonChevron--MiHhI"})),e&&r&&Q.createElement(ho.Cf,{targetRect:r,maxHeight:c,propagateCloseClick:!0},i.map(e=>Q.createElement(_O.W.CheckableOption,{key:e.nodeId,checked:o===e.nodeId,onClick:()=>d(e.nodeId)},Q.createElement(gr,{pageGuid:e.nodeId,margin:"marginRight"}),Q.createElement("span",{className:"toolbar_page_picker--dropdownOptionContent--7gcmF"},e.name)))))}let es7="toolbar_vscode_frame_stepper--stepperButton--eRoSc",es8="toolbar_vscode_frame_stepper--stepperButtonDisabled--XSjQQ";function es9(){let e=(0,eG.J2)(eU.Ez5.devHandoffState().focusNodeId),t=(0,eG.J2)(eU.Ez5.devHandoffState().nodeIds),n=(0,ae.eY)(),a=e?t.indexOf(e):-1,r=null==n?void 0:n.get(e);if(!r||-1===a)return null;let l=0===a,i=a===t.length-1;return Q.createElement("div",{className:"toolbar_vscode_frame_stepper--stepperContainer--ux6kR"},Q.createElement(aJ.K0,{svg:esy.A,"data-tooltip-type":nO.Ib.TEXT,"data-tooltip":(0,eO.t)("dev_handoff.vscode.toolbar.previous_frame"),onClick:()=>eU.glU.triggerActionInUserEditScope("dev-handoff-focus-previous",{}),className:l?es8:es7,disabled:l}),Q.createElement("span",{className:"toolbar_vscode_frame_stepper--stepperContent--hVi69"},(null==r?void 0:r.name)||""),Q.createElement(aJ.K0,{svg:j1.A,"data-tooltip-type":nO.Ib.TEXT,"data-tooltip":(0,eO.t)("dev_handoff.vscode.toolbar.next_frame"),onClick:()=>eU.glU.triggerActionInUserEditScope("dev-handoff-focus-next",{}),className:i?es8:es7,disabled:i}))}var ece=n(448204);let ect=(0,wC.ck)(),ecn=Q.memo(function({item:e}){let t=(0,$.d4)(t=>(0,TC.A)(e.label));return Q.createElement("div",{key:`label-${e.label}`,className:es5.Pf},t)}),eca=Q.memo(function({item:e,recordingKey:t}){let n=(0,$.d4)(t=>(0,yu.Yh)(t.mirror.appModel,e.action)),a=(0,$.d4)(t=>(0,TC.A)(e.action));return Q.createElement(ER.QW,{key:`text-button-${e.action}`,action:e.action,isEnabled:n,text:a,recordingKey:t})}),ecr=Q.memo(function({item:e,disabled:t,recordingKey:n}){let a=e.children.filter(e=>!(0,tz.Zk)(e)||!e.featureFlags||e.featureFlags.every(e=>(0,eo.kc)()[e])),r=(0,ep.R)(e=>a.filter(t=>(0,tz.Zk)(t)&&(0,yu.Yh)(e.mirror.appModel,t.action))),l=(0,$.d4)(e=>r.length>0&&ecl(r[0],e));if(0===r.length)return null;if(e.flyoutHideOptionsIfSingleEnabledAction&&1===r.length){var i;return Q.createElement(ER.rA,{key:`action-button-${r[0].action}`,item:(i=r[0],{type:tz.ZU.ACTION,...i}),isEnabled:!0,isActive:l,recordingKey:n})}return 1===r.length&&"flatten-selection"===r[0].action?null:Q.createElement(esm.xn,{key:`flyout-${e.name}`,item:{...e,children:a},disabled:t,recordingKey:n,styleActiveItem:!e.flyoutDoNotStyleActiveItem})});function ecl(e,t){return"isActive"in e&&e.isActive?e.isActive(t):"propertyValue"in e&&void 0!==e.propertyValue&&t.mirror.appModel[e.property]===e.propertyValue}let eci=Q.memo(function({item:e,recordingKey:t}){let{featureFlags:n=[]}=e,a=(0,$.d4)(t=>ecl(e,t)),r=(0,$.d4)(t=>(0,yu.Yh)(t.mirror.appModel,e.action)&&n.every(e=>(0,eo.kc)()[e])&&(!e.isAvailable||e.isAvailable(t)));return Q.createElement(ER.rA,{key:`action-button-${e.action}`,item:e,isEnabled:r,isActive:a,recordingKey:t})}),eco=Q.memo(function({item:e,numUnreadComments:t,recordingKey:n,canEdit:a}){let r=(0,$.d4)(t=>(0,yu.Yh)(t.mirror.appModel,e.action)),l=(0,aX.U)(),i=(0,$.d4)(t=>e.tool!==cl.NLJ.NONE&&e.tool===t.mirror.appModel.currentTool&&!(0,yu.TY)(l)),o=(0,$.d4)(e=>e.mirror.appModel.topLevelMode);return e.featureFlags&&!e.featureFlags.every(e=>(0,eo.kc)()[e])?null:Q.createElement(ER.T0,{key:`tool-button-${e.tool}`,dropdownShown:l,isEnabled:r,isActive:i,item:e,numUnreadComments:t,recordingKey:n,topLevelMode:o,isWide:e.isWideForEditors&&a})}),ecs=Q.memo(function({item:e,numUnreadComments:t,recordingKey:n}){let a=(0,$.d4)(e=>e.mirror.appModel.activeCanvasEditModeType),r=(0,$.d4)(e=>e.mirror.appModel.currentTool),l=(0,$.d4)(e=>e.openFile),i=(0,$.d4)(e=>e.progressBarState.mode),o=(0,GH.T)(i),s=(0,$.d4)(e=>o?!(null==l?void 0:l.canEdit):e.mirror.appModel.isReadOnly),c=(0,$.d4)(e=>e.mirror.appModel.isSceneReadOnly),d=(0,$.d4)(e=>!!e.user);if(!e||c&&!e.nonEditorsAllowed||e.onlyShowInReadOnly&&!(s&&i!==cl.Oin.HIDE_UI)||e.hideInExtension&&aZ.z4.getIsExtension()||!l&&e.newFileDisabled||!d&&!e.loggedOutAllowed||e.editModes&&-1===e.editModes.indexOf(a)||e.showForTools&&-1===e.showForTools.indexOf(r))return null;let u=e.dontChainRecordingKeys?e.recordingKey:nh.Pt(n,e.recordingKey);switch(e.type){case tz.ZU.LABEL:return Q.createElement(ecn,{item:e});case tz.ZU.TEXT_BUTTON:return Q.createElement(eca,{item:e,recordingKey:u});case tz.ZU.FLYOUT:return Q.createElement(ecr,{item:e,disabled:o,recordingKey:u});case tz.ZU.ACTION:return Q.createElement(eci,{item:e,recordingKey:u});case tz.ZU.TOOL:return Q.createElement(eco,{item:e,numUnreadComments:t,recordingKey:u,canEdit:(null==l?void 0:l.canEdit)||!1});default:(0,re.xb)(e)}}),ecc=()=>{let e=(0,$.wA)(),t=(0,ae.p8)("activeCanvasEditModeType"),n=(0,$.d4)(e=>{var t;return null==(t=e.openFile)?void 0:t.canEdit});return()=>{if((0,rw.Ah)(t)){e((0,ag.Eg)());return}if(!n){e(Ct.Fm({id:ag.V_})),lT.Y5.triggerAction("enter-preview-mode");return}e(Ct.Fm({id:ag.V_})),lT.Y5.triggerAction("enter-layout-mode")}};function ecd(e){let{recordingKey:t}=e,n=(0,$.d4)(e=>e.userStateLoaded),a=(0,ae.p8)("topLevelMode"),r=(0,$.d4)(e=>e.mirror.appModel.activeCanvasEditModeType),l=(0,$.d4)(e=>e.selectedView),i=(0,$.d4)(e=>{var t;return null==(t=e.openFile)?void 0:t.canEdit}),o=ecc();return n&&(!(0,eo.kc)().version_diffing||r!==cl.m1T.COMPARE_CHANGES)&&((0,rw.Ah)(r)||a===cl.lyf.BRANCHING)&&("design"===l.editorType||"dev_handoff"===l.editorType)?Q.createElement("div",{className:es5.dM},Q.createElement(nc.$$,{key:i?"back-to-editing-btn":"back-to-viewing-btn",className:es5.uX,recordingKey:nh.Pt(t,"backToEditing"),onClick:o},Q.createElement(eO.Tx,{id:"fullscreen.toolbar.done"}))):null}function ecu(e){let t=Q.useRef(null),n=Q.useCallback(()=>{requestAnimationFrame(()=>{let e=t.current;e&&e.clientWidth!==innerWidth&&(e.style.width="99.999%",requestAnimationFrame(()=>{e.style.width=""}))})},[]),{multiplayer:a,dispatch:r}=e,l=Q.useCallback(e=>{eU.h3O.observeUser(e),a&&a.observingSessionID!==e&&a.sessionID!==e&&r(tB.b({aware_of_observation_mode:!0}))},[a,r]);return(Q.useEffect(()=>{addEventListener("resize",n),(0,w_.QP)("main_toolbar",null==t?void 0:t.current);let a=window.FigmaMobile;a&&(a._open_timer=()=>{ef.zl.set(RF.Qs,{type:"OPEN"}),(0,er.sx)(Ba.Fn.OPEN,{source:Ba.OO.IPAD_MENU})},a._close_timer=()=>{ef.zl.set(RF.Qs,{type:"CLOSE"})});let r=window.FigmaMobile;return r&&(r._set_allow_draw_with_touch=e=>{eU.glU.setAllowDrawWithTouch(e)},r._unlock_all_objects=()=>{lT.Y5.triggerActionInUserEditScope("unlock-all")},r._zoom_reset=()=>{lT.Y5.triggerActionInUserEditScope("zoom-reset")},r._zoom_to_fit=()=>{lT.Y5.triggerActionInUserEditScope("zoom-to-fit")},r._present=()=>{eU.h3O.startPresenting()},r._observe_user=e=>{l(e)},r._find_in_file=()=>{lT.Y5.triggerActionInUserEditScope("canvas-search")},r._copy=()=>{lT.Y5.triggerActionInUserEditScope("copy")},r._cut=()=>{lT.Y5.triggerActionInUserEditScope("cut")},r._paste=()=>{lT.Y5.triggerActionInUserEditScope("paste")},r._select_page=async e=>{await tN.qo.instance.setCurrentPageAsync(e)},r._add_media=e=>{let t=e.map(e=>{let{encoded_data:t,mime_type:n}=e;return new Blob([(0,lA.Vs)(t)],{type:n})}),n=lT.Y5.fileArrayToString(t);eU.glU.handleOpenFromJsonString(n,esp.wu.MOBILE_NATIVE_NAVBAR)},r._get_zoom_scale=()=>eU.glU.getViewportZoomScale(),r._get_prototype_status=()=>{let t=eU.X3B.currentPagePrototypeStatus(),n="";if(t!==eU.bOM.VALID)switch(t){case eU.bOM.NO_FRAMES:n="slides"===e.selectedView.editorType?(0,eO.t)("proto.status_messages.a_presentation_needs_to_have_at_least_one_slide"):(0,eO.t)("proto.status_messages.a_prototype_needs_to_have_at_least_one_frame");break;case eU.bOM.INVALID_START_NODE:n=(0,eO.t)("proto.status_messages.a_prototype_with_connections_needs_a_valid_top_level_frame_as_the_origin");break;default:(0,re.xb)(t)}return{status:t,message:n}}),()=>{(0,w_.QP)("main_toolbar",null),removeEventListener("resize",n)}},[l,e.selectedView.editorType,n]),"fullscreen"===e.selectedView.view&&"whiteboard"===e.selectedView.editorType)?Q.createElement(ech,{dropdownShown:e.dropdownShown,isInitialized:e.isInitialized,multiplayer:e.multiplayer,numUnreadComments:e.numUnreadComments,openFile:e.openFile,progressBarMode:e.progressBarMode,recordingKey:e.recordingKey,showUi:e.showUi,user:e.user,ref:t}):Q.createElement(ecg,{devHandoffFocusMode:e.devHandoffFocusMode,dropdownShown:e.dropdownShown,isFreeUser:e.isFreeUser,isInitialized:e.isInitialized,multiplayer:e.multiplayer,numUnreadComments:e.numUnreadComments,openFile:e.openFile,progressBarMode:e.progressBarMode,recordingKey:e.recordingKey,selectedView:e.selectedView,showMissingFontsButton:e.showMissingFontsButton,showUi:e.showUi,user:e.user,ref:t})}function ecm(e){return{openFile:e.openFile,dropdownShown:e.dropdownShown,modalShown:e.modalShown,loadingState:e.loadingState,user:e.user,userFlags:e.userFlags,multiplayer:e.multiplayer,userStateLoaded:e.userStateLoaded,topLevelMode:e.mirror.appModel.topLevelMode,isInitialized:e.mirror.appModel.isInitialized,progressBarMode:e.progressBarState.mode,activeVoiceCallExists:!!e.openFile&&e.openFile.key in e.voice.activeCall,showUi:e.mirror.appModel.showUi,isFreeUser:e.isFreeUser}}function ecp(e){let t=(0,ep.R)(ecm),n=(0,$.d4)(e=>e.openFile),a=(0,$.d4)(e=>e.orgById),r=(0,$.d4)(e=>e.teams),l=(0,wQ.YL)({openFile:n,teams:r,orgById:a}),i=(0,wu.$D)(),o=(0,eG.J2)(eU.Ez5.uiState().showMissingFontsButton),s=(0,eG.J2)(eU.Ez5.devHandoffState().focusMode),c=(0,ae.p8)("showUi"),d=(0,$.wA)();return Q.createElement(ecu,{...(0,eb.d)(t),...e,dispatch:d,voiceEligibility:l,isWorkshopFile:i,showMissingFontsButton:o,devHandoffFocusMode:s,showUi:c})}function ec_({numUnreadComments:e,recordingKey:t}){let n=(0,mD.E3)(),a=(0,Lp.oV)(),r=(0,Lp.rD)(),l=(0,ti._I)();if((0,c_.l7)())return null;let i=(()=>{switch(n){case"whiteboard":return tz.FW.filter(e=>"whiteboard"!==n||!a&&!r||e.type!==tz.ZU.TOOL||e.tool!==cl.NLJ.SELECT&&e.tool!==cl.NLJ.HAND);case"dev_handoff":return tz._8.filter(e=>e.type!==tz.ZU.TOOL||e.tool!==cl.NLJ.ANNOTATE&&e.tool!==cl.NLJ.MEASURE||l);default:return tz.XU}})();return Q.createElement(Q.Fragment,null,i.map((n,a)=>Q.createElement(ecs,{key:a,item:n,numUnreadComments:e,recordingKey:t})))}function ecf({renderDesignMiddleItems:e,renderFileName:t,renderFigjamTryCountdown:n}){let a=(0,eG.J2)(eU.Ez5.editorState().selectionEmpty),r=(0,n3.s)(!1),{topLevelMode:l,editMode:i}=(0,ep.R)(e=>({topLevelMode:e.mirror.appModel.topLevelMode,editMode:e.mirror.appModel.activeCanvasEditModeType})),o=(0,$.d4)(e=>{let t=e.modalShown;return(null==t?void 0:t.type)===GW.e}),s=(0,t_.q5)(),c=(0,ae.aV)(),d=(0,wC.ck)(),u=i===cl.m1T.COMMENTS||i===cl.m1T.PREVIEW||i===cl.m1T.BRANCHING||l===cl.lyf.HISTORY||l===cl.lyf.PREVIEW||l===cl.lyf.DEV_HANDOFF||l===cl.lyf.BRANCHING,m=(0,mD.ow)(),p=(0,c_.l7)(),_=!!(null==s?void 0:s.isTryFile)&&!o&&!c&&d,f=l===cl.lyf.DEV_HANDOFF&&r,h=!o&&(m||a||u||c)&&!f&&!p,g=c||m?void 0:Q.createElement(G$,null);return Q.createElement("div",{key:"center-group","data-onboarding-key":mM.lm,className:`${es5.GC} ${es5.V3}`},g,t(h&&!_),n(_),e(!h&&!m&&!_&&!p))}let ech=Q.forwardRef(function(e,t){var n,a,r;let{loadingClassName:l,hideToolsClassName:i}=ecE(e.progressBarMode,e.openFile,e.isInitialized),o=(0,cY.NC)((null==(n=e.user)?void 0:n.id)??null),s=!e.user&&!ec.Ay.isMeetDevice,c=ecv(e.recordingKey),d=(a=e.numUnreadComments,r=e.recordingKey,Q.useMemo(()=>new esu.H4(()=>{let e=[];return tz.D4.forEach((t,n)=>{let l=Q.createElement(ecs,{key:n,item:t,numUnreadComments:a,recordingKey:r});l&&e.push(l)}),e}),[a,r]));return Q.createElement(t6.fu,{name:Ex.e0.EDITOR_TOOLBAR,trackingTargets:uY.K.RCS},Q.createElement("div",{onFocus:w_.FT,tabIndex:0}),Q.createElement(cu.V,null,Q.createElement("div",{className:ea()(es5.KE,eK.Dm,l,es5.Jg,{[es5.R]:!e.showUi}),ref:t,role:"region","aria-label":(0,eO.t)("fullscreen.accessibility_dom.primary_toolbar_label")},Q.createElement("div",{key:"left-group",className:`${es5.GC} ${es5.l3} ${i}`},o&&Q.createElement(esv,null),Q.createElement(ER.xG,{hideToolsClassName:i,recordingKey:e.recordingKey}),Q.createElement(ec_,{numUnreadComments:e.numUnreadComments,recordingKey:e.recordingKey}),!wk.eD&&!o&&Q.createElement(es_.Z,null),Q.createElement(esI,null),Q.createElement(ecd,{recordingKey:e.recordingKey})),Q.createElement(ecf,{renderFileName:e=>c.render(e,es5.Xs),renderFigjamTryCountdown:e=>e&&Q.createElement(esK,null),renderDesignMiddleItems:e=>d.render(e)}),Q.createElement("div",{key:"right-group",className:`${es5.GC} ${es5.gt} ${i}`},(0,eo.kc)().internal_only_debug_tools&&Q.createElement(ER.bu,null),Q.createElement(ER.n8,null),e.multiplayer&&e.openFile&&Q.createElement(Q.Fragment,null,Q.createElement(jj.Cv,{dropdownShown:e.dropdownShown,multiplayer:e.multiplayer,user:e.user}),e.user&&Q.createElement(ER.bG,{user:e.user,editingFile:e.openFile})),s&&Q.createElement(ER.tO,null),(0,Eg.MP)()&&Q.createElement(esW,{variant:"figjam"})))))}),ecg=Q.forwardRef(function(e,t){let n=(0,eo.kc)().ds_updates_toast_deprecation??!1,a=(0,sZ.$A)(e.selectedView),r=(0,c_.l7)(),l=a&&aZ.z4.getIsExtension(),i=!ect&&!e.selectedView.isRecoveryMode&&!r,{devHandoffFocusMode:o,openFile:s,user:c,isFreeUser:d}=e,{loadingClassName:u,hideToolsClassName:m}=ecE(e.progressBarMode,e.openFile,e.isInitialized),p=((null==s?void 0:s.canEdit)??!1)&&!!c&&!d&&n,_=ecv(e.recordingKey),f=Q.useMemo(()=>new esu.H4(()=>{let t=[];return tz.D4.forEach((n,a)=>{let r=Q.createElement(ecs,{key:a,item:n,numUnreadComments:e.numUnreadComments,recordingKey:e.recordingKey});r&&t.push(r)}),t}),[e.numUnreadComments,e.recordingKey]);return Q.createElement(t6.fu,{name:Ex.e0.EDITOR_TOOLBAR,trackingTargets:uY.K.RCS},Q.createElement("div",{onFocus:w_.FT,tabIndex:0}),Q.createElement(cu.V,null,Q.createElement("div",{className:ea()(es5.KE,eK.Dm,u,{[es5.R]:!e.showUi}),ref:t,role:"region","aria-label":(0,eO.t)("fullscreen.accessibility_dom.primary_toolbar_label")},Q.createElement("div",{key:"left-group",className:`${es5.GC} ${es5.l3} ${m}`},!l&&Q.createElement(ER.xG,{hideToolsClassName:m,recordingKey:e.recordingKey}),l&&o?Q.createElement(esb,null):Q.createElement(Q.Fragment,null,Q.createElement(ec_,{numUnreadComments:e.numUnreadComments,recordingKey:e.recordingKey}),Q.createElement(ecd,{recordingKey:e.recordingKey}))),l?o?Q.createElement(es9,null):Q.createElement(es6,null):Q.createElement(ecf,{renderFileName:e=>{var t,n;return e&&(null==(n=(t=tz.mb).isActive)?void 0:n.call(t,{}))?Q.createElement(ecs,{item:tz.mb,numUnreadComments:0}):_.render(e,es5.Xs)},renderFigjamTryCountdown:e=>e&&Q.createElement(esK,null),renderDesignMiddleItems:e=>f.render(e)}),Q.createElement("div",{key:"right-group",className:`${es5.GC} ${es5.gt} ${m}`},l?Q.createElement(esk,null):r&&e.multiplayer&&e.openFile?Q.createElement("div",{className:es5.XA},Q.createElement(jj.Cv,{dropdownShown:e.dropdownShown,multiplayer:e.multiplayer,user:e.user}),e.user&&Q.createElement(ER.bG,{user:e.user,editingFile:e.openFile})):Q.createElement(Q.Fragment,null,Q.createElement(ER.n8,null),e.multiplayer&&e.openFile&&Q.createElement(Q.Fragment,null,Q.createElement(jj.Cv,{dropdownShown:e.dropdownShown,multiplayer:e.multiplayer,user:e.user}),e.user&&Q.createElement(ER.bG,{user:e.user,editingFile:e.openFile})),!e.user&&Q.createElement(ER.tO,null),i&&Q.createElement(es1,{recordingKey:e.recordingKey,extraPadding:p}),p&&Q.createElement(Q.Fragment,null,Q.createElement(Ei.p,{featureFlag:"ds_libraries_toolbar_btn_nudge"},Q.createElement(esZ,null)),Q.createElement(es4,null)),!ect&&Q.createElement(ecs,{item:tz.Fz,recordingKey:e.recordingKey,numUnreadComments:0}),e.showMissingFontsButton&&Q.createElement(ER.w8,{recordingKey:e.recordingKey}),Q.createElement(ece.HT,{recordingKey:nh.Pt(e,"zoomMenu")}),(0,Eg.MP)()&&Q.createElement(esW,{variant:"design"}))))))});function ecE(e,t,n){let a=(0,GH.T)(e);return{loadingClassName:a?es5.Lq:"",hideToolsClassName:!a||(null==t?void 0:t.canEdit)&&n?"":es5.yM}}function ecv(e){return Q.useMemo(()=>new esu.H4(()=>Q.createElement(Eh.fH,{recordingKey:nh.Pt(e,"filenameView")})),[e])}function ecy(e){return(0,aD.GS)()?null:Q.createElement(ecp,{...e})}function ecb(){let e=(0,eo.b5)()?"https://www.notion.so/figma/UI3-Editor-Hub-76ca762f1cd54870b806251767808b06":"https://paper.dropbox.com/doc/Figma-Redesign-AI-Private-Beta-FAQ-Guide--CL4l1jSC5HUFFpLj6d4C~j8RAg-zRjmsnDB4XVwpMCPifjj6",t=(0,eo.b5)()?"https://figma.slack.com/archives/C069V5CESM6":"https://a.sprig.com/WVd3eUN5R3lxZ35zaWQ6OTllM2VkMDUtY2UxYS00NjUxLTg0YzItNTdjYTZmZGZkNjhj";return Q.createElement("div",{className:"ui3_confidentiality_banner--bannerButtonGroup--hJvTv"},Q.createElement(A3.N,{href:e,target:"_blank",trusted:!0},Q.createElement(lP.$,null,Q.createElement(eO.Tx,{id:"fullscreen.toolbar.ui3_confidentiality_banner.learn_more_button"}))),Q.createElement(A3.N,{href:t,target:"_blank",trusted:!0},Q.createElement(lP.$,null,Q.createElement(eO.Tx,{id:"fullscreen.toolbar.ui3_confidentiality_banner.share_feedback_button"}))))}let ecC="dismissed_ui3_confidentiality_banner_2024_04_26";function ecw(){let e="ui3"===(0,et.DP)().version,t=(0,ae.aV)(),n=(0,$.wA)(),a=(0,t_.OG)(),r=!!(0,fQ.f)(ecC),l=Q.useCallback(()=>{r||n(tB.b({[ecC]:!0}))},[r,n]);return r||t||!e||a?Q.createElement(Q.Fragment,null):Q.createElement(LM.C,{content:{id:LX.om.UI3ConfidentialityBanner,bannerType:LX.x1.CONFIDENTIALITY,mainText:(0,eO.t)("fullscreen.toolbar.ui3_confidentiality_banner.banner_header"),description:(0,eO.t)("fullscreen.toolbar.ui3_confidentiality_banner.banner_description"),button:{type:LX.MA.CUSTOM,element:Q.createElement(ecb,null)},dismissible:!0},onDismiss:l,editorType:dV._Y.DESIGN})}var ecT=n(633410);let ecx=()=>{let e=(0,$.Pj)();return Q.useCallback(t=>{let n=e.getState().mirror.sceneGraph;return(0,eW.M1)(n,t)},[e])},ecN=()=>{var e;null==(e=eU.h3O)||e.detach();let t=document.getElementById("fullscreen-root");null==t||t.remove()};function eck(e,t){let{openFile:n,wasInWorkshop:a,previousCanEdit:r,previousCanView:l,wasInUnclaimedTryFile:i,previousFileKey:o}=e;if(null==n){a||(ecN(),(0,wC.A7)((0,eO.t)("404.file_no_access.title"),t));return}let s=i&&!n.isTryFile;if((null!==r&&n.canEdit!==r||null!==l&&n.canView!==l)&&!s&&n.key===o){let e=new URLSearchParams(ei.Ay.location.search);e.set("perms-refresh","1"),ei.Ay.replace(`${ei.Ay.location.pathname}?${e.toString()}`,ei.Ay.location.state),ei.Ay.reload("file access changed")}}let ecS=()=>{var e;"hidden"===document.visibilityState&&(null==(e=ew.x4)||e.clear(),w1.L.cleanupSession())};function ecI(){!function(){let e=(0,t_.tS)()??"";(0,eh.Rs)(tf.ErZ,{key:e}),(0,eh.Rs)(tf.HdA,{key:e}),(0,eh.Rs)(tf.oBY,{key:e}),(0,eh.Rs)(tf.D2i,{key:e}),(0,eh.Rs)(tf.Fol,{key:e}),(0,eh.Rs)(tf.oMw,{key:e})}();let e=(0,eo.kc)().ds_updates_toast_deprecation,t=(0,$.wA)(),n=(0,$.d4)(e=>e.openFile);d5.M4.Folder.useValue(null==n?void 0:n.folderId);let a=(0,$.d4)(e=>e.selectedView.editorType),r=(0,Lp.FF)(),[l,i]=(0,Q.useState)(!1),o=(0,et.DP)(),s=(0,ED.s)(),c=(0,Q.useCallback)(()=>{ecN(),i(!0)},[]),d=(0,$.d4)(e=>e.mergingStatus);(0,Q.useEffect)(()=>{if((0,eo.kc)().ce_suppress_browser_keys)return document.addEventListener("keydown",em,!0),()=>void document.removeEventListener("keydown",em,!0)},[]),(0,w_.LD)(),function(){let e=(0,Q.useRef)(),t=(0,Q.useRef)(),n=(0,$.wA)(),a=(0,$.d4)(e=>e.userFlags),r=(0,$.d4)(e=>!!e.user),l=function(e,t){let n=(0,$.d4)(e=>e.mirror.appModel.showKeyboardShortcuts),a=(0,$.d4)(e=>{var t;return null==(t=e.user)?void 0:t.created_at}),r=(0,Q.useMemo)(()=>{let e=new Date("2022-11-14").getTime();return null!=a&&new Date(a).getTime()>=e},[a]);return(0,Q.useCallback)((a,l,i,o)=>{t.keyboard_user_first_detection||o||!r?a!==eU.aTn.US_QWERTY||o||l!==eU.aTn.UNKNOWN?a&&l!==eU.aTn.UNKNOWN?t.keyboard_manual_supported_bell||wG(e,a,l,n):a&&l===eU.aTn.UNKNOWN?t.keyboard_generic_supported_first_bell||wK(e,a,n):(0,wR.CZ)({layout:l,detectedLayoutStr:i??void 0,eventName:"keyboard_change_no_bell"}):(0,wR.CZ)({layout:a,eventName:"ignore_us_qwerty"}):(e(tB.b({keyboard_user_first_detection:!0})),a&&((0,wR.rd)({layout:a}),(0,wR.CZ)({layout:a,eventName:"auto_set_new_user_layout"})))},[e,t,n,r])}(n,a),i=(0,Q.useCallback)(async()=>{if(r){if(wk.eD){let t=await wW(l,e.current??null);e.current=t}else{let e=await wz(l,t.current??null);t.current=e}}},[l,r]);(0,Q.useEffect)(()=>{lT.Y5.isReady()?i():lT.Y5.onReady().then(()=>setTimeout(i,500))},[])}(),(0,uI.XS)(),function(){let e=(0,$.Pj)(),t=(0,$.d4)(wY.d1),n=(0,$.d4)(wZ.m0),a=(0,$.d4)(wZ.No),r=(0,$.d4)(e=>e.library.published),l=(0,$.d4)(e=>e.openFile),i=(0,$.d4)(e=>e.fileVersion),o=(0,$.d4)(e=>e.loadingState),s=(0,$.d4)(e=>e.library.local),c=(0,$.d4)(e=>e.library.assetsPanelSearch.shouldSearchDefaultLibraries),d=(0,fp.ud)(),u=(0,$.d4)(e=>e.folders),m=(0,c7.l6)(),p=(0,$.d4)(e=>e.library.assetsPanelSearch.query),_=(0,$.d4)(e=>e.library.assetsPanelSearch.searchOptions),f=(0,dj.M)()&&(0,eo.kc)().dse_new_asset_panel_fetch;(0,Q.useEffect)(()=>{t&&cq.YG.sourcesDidChange()},[t,n,a,r,s,c,d,u]),(0,Q.useEffect)(()=>{(0,cq.Wg)(e.getState(),{ignoreLoadingState:f})&&cq.YG.queryDidChange(e)},[e,p,f]),(0,Q.useEffect)(()=>{(0,cq.Wg)(e.getState(),{ignoreLoadingState:f})&&cq.YG.searchOptionsDidChange(e)},[e,_,f]),(0,Q.useEffect)(()=>{(0,cq.Wg)(e.getState(),{ignoreLoadingState:f})&&cq.YG.subscriptionsDidChange(e,m)},[e,m,l,i,o,f])}(),(0,wO.gN)(),wk.eD&&function(){let e=(0,ig.JI)(),t=(0,$.d4)(e=>e.mirror.appModel.isReadOnly),n=(0,wP.Yo)(),a=(0,$.d4)(e=>e.openFile),r=(0,$.d4)(e=>e.localPlugins),l=(0,mD.E3)(),i=(0,ig.op)(),o=(0,$.d4)(e=>e.installedPluginVersions.plugins),s=(0,$.d4)(e=>{var t;return null==(t=e.mirror.selectedStyleProperties)?void 0:t.selectedWidgetInfo}),c=(0,$.d4)(e=>e.mirror.appModel.activeTextReviewPlugin),d=(0,$.d4)(e=>e.publishedPlugins),u=(0,$.d4)(e=>e.currentUserOrgId?e.orgById[e.currentUserOrgId]:null),m=(0,ig.Be)(),p=m.orgPlugins,_=m.orgWidgets,f=(0,wA.BF)(),h=(0,wA.km)(),g=(0,ig.NU)(),E=(0,ig.qr)(),v=(0,ig.ZT)(),y=null!=(0,wO.SH)(),b=(0,ig.ll)();Q.useEffect(()=>{let m={isReadOnly:t,userCanRunPlugins:e,openFile:a,publishedPlugins:d,localExtensions:r,orgEntity:n,allSavedPlugins:o,recentlyUsedPlugins:i,org:u,editorType:l,widgetSelectionInfo:s,hideRecentsHeader:!0,activeTextReviewPlugin:c,orgSavedPlugins:p,orgSavedWidgets:_,orgPrivatePlugins:f,orgPrivateWidgets:h,savedWidgetVersions:g,recentlyUsedWidgets:E,publishedWidgets:v,pluginAllowlist:b};wL(wS.$0(m),wI.wX(m))},[t,e,a,d,o,i,r,n,u,l,s,c,m,p,_,f,h,g,E,v,b,y])}(),function(){let e=(0,mD.E3)(),t=(0,Q.useCallback)(()=>{(0,er.sx)("display_redline",{source:"keyboard_shortcut",mode:e})},[e]),n=(0,hs.A)(t,1e3,{leading:!0,trailing:!1}),a=(0,$.d4)(e=>e.usedKeyboardShortcuts["measure-to-selection"]||0),r=(0,Q.useRef)(a);(0,Q.useEffect)(()=>{r.current!==a&&(r.current=a,n())},[a,n])}(),(0,eC.I7)("exp_aa_test_fullscreen_view").getConfig(),function(){let e=(0,$.wA)(),t=(0,Lp.FF)(),n=(0,wD.Ld)(),a=(0,Nj.BI)(),[r,l]=(0,Q.useState)(!1),i=(0,$.d4)(e=>e.mirror.appModel.multiplayerSessionState===eU.kul.JOINED);Q.useEffect(()=>{var e;(t||n)&&!r&&(null==a?void 0:a.shouldOptimizeForIpadApp)&&i&&!(null==(e=eU.Ez5)?void 0:e.defaultToolIsHandSelect())&&(l(!0),lT.Y5.triggerAction("set-tool-hand",null))},[t,n,a,r,l,i]);let o=(0,$.d4)(({mirror:{appModel:e}})=>e.showUi);Q.useEffect(()=>{(null==a?void 0:a.updateUIVisible)&&a.updateUIVisible(o)},[a,o]);let s=(0,Nj.m0)();Q.useEffect(()=>{s&&(s._try_to_flush_autosave=async()=>{let e=(0,Lm.ZG)();if(e){let t=e.session();t&&await t.tryToFlushAutosave()}})},[s]);let c=(0,ER.Kd)();Q.useEffect(()=>{(null==a?void 0:a.updateSaveStatus)&&(c?i?a.updateSaveStatus(Lf.av.SAVING):a.updateSaveStatus(Lf.av.PAUSED):a.updateSaveStatus(Lf.av.SAVED))},[a,c,i]);let d=(0,$.d4)(e=>(0,yu.Yh)(e.mirror.appModel,"undo")),u=(0,$.d4)(e=>(0,yu.Yh)(e.mirror.appModel,"redo"));Q.useEffect(()=>{if((null==a?void 0:a.updateUndoEnabled)&&a.updateUndoEnabled(d),(null==a?void 0:a.updateRedoEnabled)&&a.updateRedoEnabled(u),s){let t=t=>{e(eL.F.dequeue({matchType:"undo_redo_gesture"})),e(eL.F.enqueue({message:t,type:"undo_redo_gesture",timeoutOverride:750}))};s._trigger_undo=()=>{d&&(lT.Y5.triggerActionInUserEditScope("undo"),t((0,eO.t)("fullscreen_actions.undo")))},s._trigger_redo=()=>{u&&(lT.Y5.triggerActionInUserEditScope("redo"),t((0,eO.t)("fullscreen_actions.redo")))}}},[a,e,d,u,s]);let m=(0,Nj.pt)();Q.useEffect(()=>{m&&(m._set_ui_visibility=e=>{e!==o&&lT.Y5.triggerAction("toggle-ui")})},[m,o]);let p=(0,Nd.Yk)();Q.useEffect(()=>{(null==a?void 0:a.updateDLTHeight)&&a.updateDLTHeight(p)},[p,a]);let _=(0,ae.dH)(),f=(0,PA.pK)(_),h=(0,Nj.Ef)();Q.useEffect(()=>{var e,t;f&&(null==(e=null==h?void 0:h.nativeToolbarUpdateActiveTool)||e.call(h,f),null==(t=null==h?void 0:h.nativeToolbarUpdateMultiselectActive)||t.call(h,"MULTISELECT"===f))},[h,f]);let[g,E]=Q.useState("ERASER"),[v,y]=Q.useState("PENCIL");Q.useEffect(()=>{f&&(0,PA.S0)(f)&&f!==g&&(y(g),E(f))},[f,g,E,y]),Q.useEffect(()=>{m&&(m._switch_to_eraser=function(){if("ERASER"!==g)return(0,PA.Jm)("set-tool-eraser"),{success:!0,error:null,currentTool:"ERASER"};{let e=PA.Jh.get(v);return e&&(0,PA.Jm)(e),{success:!0,error:null,currentTool:v}}},m._switch_to_previous_drawing_tool=function(){let e=PA.Jh.get(v);return e&&(0,PA.Jm)(e),{success:!0,error:null,currentTool:v}})},[f,v,g,m]),s&&(s._update_context_menu_visibility=e=>{eU.glU.updateNativeContextMenuVisibility(e)},s._override_document_visibility_state=L_.R),m&&(m._activate_multiselect_mode=()=>{(0,PA.Jm)("set-tool-multiselect")},m._deactivate_multiselect_mode=()=>{(0,PA.Jm)("set-tool-default")})}(),(0,wq.a4)(),Q.useEffect(()=>_o.Bc,[]);let u=(0,eC.I7)("exp_test_exposure_data_loss",!1,!0).getConfig(),m=!!(0,fQ.f)("exp_test_exposure_data_loss_has_checked");Q.useEffect(()=>{let e=u.getValue("should_expose_once",null);null===e||e&&m||((0,eC.hW)("exp_test_exposure_data_loss"),e&&t(tB.b({exp_test_exposure_data_loss_has_checked:!0})))},[u,m,t]),Q.useEffect(()=>("whiteboard"===a&&ec.Ay.isMeetDevice&&"undefined"!=typeof document&&document.addEventListener("visibilitychange",ecS),()=>{document.removeEventListener("visibilitychange",ecS)}),[a]);let p=(0,wm.o)();Q.useEffect(()=>{if(p)return t(wo.HQ({storeInRecentsKey:p})),"whiteboard"===a&&(t(wo.gr({storeInRecentsKey:p})),t(wo.vZ({storeInRecentsKey:p}))),"dev_handoff"!==a&&t(wo.aF({storeInRecentsKey:p})),window.addEventListener("storage",e,!1),()=>{window.removeEventListener("storage",e,!1)};function e(e){switch(e.key){case wJ.vY:case wJ.S7:t(wo.HQ({storeInRecentsKey:p}));break;case wJ.YN:case wJ.xk:t(wo.aF({storeInRecentsKey:p}));break;case wJ.SO:t(wo.gr({storeInRecentsKey:p}));break;case wJ.JG:t(wo.vZ({storeInRecentsKey:p}))}}},[t,a,p]);let _=(0,at.TA)();Q.useEffect(()=>{_&&t(wn.oQ())},[t,_]),function(){let e=(0,e_.Xr)(w6);(0,Q.useEffect)(()=>{let t;let n=()=>{clearTimeout(t),t=setTimeout(()=>{e(w2.IDLE_DUE_TO_INACTIVITY)},6e4)},a=()=>{n(),e(w2.ACTIVE_AFTER_IDLE)},r=vq()(a,500,{trailing:!1,leading:!0}),l=()=>{"visible"===document.visibilityState?a():e(w2.IDLE_DUE_TO_TAB_SWITCH)};return e(w2.ACTIVE_FIRST_TIME),w7.forEach(e=>{document.addEventListener(e,r)}),document.addEventListener("visibilitychange",l),n(),()=>{w7.forEach(e=>{document.removeEventListener(e,r)}),document.removeEventListener("visibilitychange",l),clearTimeout(t)}},[e,6e4])}(),Q.useEffect(()=>{let e=e=>{if(d===ee.y.MERGING)return e.returnValue="A merge operation is in progress. Closing the window could result in data loss or corruption; please wait until the operation completes.",e.preventDefault(),t(cM.sx({name:"Unload During Merge Warning Shown"})),!1},n=()=>{d===ee.y.MERGING&&t(cM.sx({name:"Page Closed During Merge"}))};return window.addEventListener("beforeunload",e),window.addEventListener("unload",n),()=>{window.removeEventListener("beforeunload",e),window.removeEventListener("unload",n)}},[d,t]);let f=(0,wD.Ld)(),[h,g]=(0,PA.H_)(a),E=function(){var e,t;let n=Lv(),a=void 0!==n,r=(0,Nj.ap)(),l=Ly(n);return l?null==(e=null==r?void 0:r.nativePropertiesPanelAcceptConfiguration)||e.call(r,l):null==(t=null==r?void 0:r.nativePropertiesPanelRejected)||t.call(r),a}(),v=Q.createElement(Q.Fragment,null,Q.createElement(ecA,{file:n,onCanvasExpired:c}),f&&h&&g&&E&&Q.createElement($T.d,null,Q.createElement(PA.vW,{editorType:a}),Q.createElement(LC,null)),r&&Q.createElement($T.d,null,h?g&&Q.createElement(PA.vW,{editorType:a}):Q.createElement(LO.aT,null)));return Q.createElement(eI,{name:"editor",alsoTrack:()=>({editorType:a,productType:(0,cB.Dc)(a),uiVersion:o.version,fileKey:(null==n?void 0:n.key)||"",slideView:s?LN():void 0})},Q.createElement(wb.wG,null,Q.createElement(Q.Fragment,null,!l&&v,!l&&Q.createElement(Gj,{onWorkshopExpired:c}),!e&&Q.createElement(wX.a,null),Q.createElement(jC.K,null))))}function ecA({file:e,onCanvasExpired:t}){var n;let a=(0,$.d4)(e=>e.userStateLoaded),r=(0,$.d4)(e=>e.mirror.appModel.isInitialized),l=(0,ep.R)(e=>e.comments),{anchorPositions:i,boundingBoxPositions:o,DEPRECATED_updateWatchedNodeIds:s,updateWatchedStablePaths:c}=(0,wp.Cn)(),d=ecx(),u=(0,at.TA)();(0,Gf.ox)({file:e,onCanvasExpired:t});let m=(0,t6.T8)(Q.createElement(wd.NX,{userId:u,file:e,orgId:(null==e?void 0:e.parentOrgId)??null,activeId:(null==(n=l.activeThread)?void 0:n.id)||null,anchorPositions:i,boundingBoxPositions:o,DEPRECATED_updateWatchedNodeIds:s,updateWatchedStablePaths:c,getPageIdsForNodes:d},Q.createElement(ecH,null)),Ex.e0.EDITOR,null!=e?(0,cB.oP)(e):{},null!=e&&a&&r);return Q.createElement(Q.Fragment,null,m)}function ecP(){return(0,wj.o)(),Q.createElement(Q.Fragment,null)}function ecO(){return(0,wT.co)(),null}function ecL(e){var t;let n=(0,$.wA)(),a=(0,$.d4)(e=>e.showEditButton),r=(0,$.d4)(e=>e.fileByKey),l=(0,$.d4)(e=>e.userAnalyticsData),i=(0,$.d4)(e=>e.user),o=(0,$.d4)(e=>{var t;return null==(t=e.openFile)?void 0:t.canEdit}),s=(0,$.d4)(e=>null!=e.openFile),{fileKey:c,orgId:d}=e,u=null!=c&&!!(null==(t=r[c])?void 0:t.is_favorited),m=(0,eh.Rs)(tf.jJU,{fileKey:c||""});Q.useEffect(()=>{var e;if("loaded"===m.status){let t=null==(e=m.data.file)?void 0:e.developerRelatedLinks,n=null==t?void 0:t.reduce((e,t)=>{let n=e.get(t.nodeId)??[];return n.push(t),e.set(t.nodeId,n),e},new Map);if(!n)return;try{eU.glU.setDeveloperRelatedLinks(n)}catch{}}},[m]);let p=Q.useRef(!1),_=(0,e_.Xr)(wu.Kc),f=(0,eh.Rs)(tf.JKh,{fileKey:c||""},{enabled:!!c});Q.useLayoutEffect(()=>{if("loaded"!==f.status)return;let e=f.data.figFileWorkshopMode;_(e?e.expiresAt:null),e&&e.expiresAt>new Date&&(p.current=!0),n(ws.lX(e?{id:e.id,until:e.expiresAt,loaded:!0}:{loaded:!0}))},[f,n,_]);let h=Q.useRef(null),g=Q.useRef(!1),E=Q.useRef(null),v=Q.useRef(null),y=(0,eh.Rs)(tf.ehp,{fileKey:c||""},{enabled:!!c});Q.useLayoutEffect(()=>{var e,t;if("loaded"!==y.status)return;let r=y.data.file;if(null===h.current){let t=(0,eo.Ay)().editing_file;null!==r&&t&&r.key===t.key&&!!t.can_edit!==r.canEdit&&((0,er.sx)("open_file_inconsistent_permission",{file_key:r.key,lg_can_edit:r.canEdit,sinatra_can_edit:t.can_edit,user:null==(e=el.D.getState().user)?void 0:e.id},{batchRequest:!0}),(0,eE.Rh)("open_file.inconsistent_permissions",{lg_can_edit:r.canEdit,sinatra_can_edit:t.can_edit}))}if(eck({openFile:r,wasInWorkshop:p.current,previousCanEdit:h.current,wasInUnclaimedTryFile:g.current,previousCanView:v.current,previousFileKey:(null==(t=E.current)?void 0:t.key)||null},n),null==r)return;v.current=r.canView,h.current=r.canEdit,p.current&&r.isTryFile&&(g.current=!0);let l=el.D.getState().selectedView;"fullscreen"===l.view&&l.fileKey===(null==r?void 0:r.key)&&E.current!==r&&(n(cM.UC({openFile:{...r,showEditButton:a,isFavorited:u}})),E.current=r)},[y,n,a,u,s]);let b=(0,ig.Be)();return Q.useLayoutEffect(()=>{let e=el.D.getState().selectedView;if(!b.loaded||"fullscreen"!==e.view)return;let{plugins:t,widgets:a,orgPlugins:r,orgWidgets:l}=(0,eo.kc)().plugins_remove_fs_filter?b:(0,ig.cd)(b,{editorType:e.editorType}),i={...t,...r},o={...a,...l};n(wi.g3(i)),n(wi.zI(o))},[n,d,b]),(0,dB.rB)(),o&&(0,wj.n)(l,null==i?void 0:i.email)?Q.createElement(ecP,null):Q.createElement(Q.Fragment,null)}function ecM({fileKey:e}){let t=(0,$.wA)(),n=(0,$.Pj)(),a=(0,$.d4)(e=>e.isFullscreenDocumentLoaded),r=(0,LA.jz)(),l=(0,LP.e_)()===LP.$_.ELIGIBLE,i=(0,c6.Fk)(e=>{var t;return null==(t=e.getCurrentPage())?void 0:t.guid});return Q.useLayoutEffect(()=>{if(!a||!l)return;let o=n.getState(),s=null==r?void 0:r.find(e=>e.inProgress),c=o.mirror.appModel.votingSessionInfo,d=c.sessionId&&r?r.find(e=>e.id===c.sessionId):null;if(s){if(s.id!==c.sessionId){t(wc.au({}));let n=(0,m_.VP)(o.loadingState,wc.$c(e))||o.voting.lastInitiatedVotingSessionId===s.id;t(wc.H1({votingStage:n?eU.W8Y.JOINED:eU.W8Y.NOT_JOINED}))}}else c.sessionId&&!d?t(wc.H1({votingStage:eU.W8Y.NO_SESSION})):!s&&c.sessionId&&c.votingStage!==eU.W8Y.ENDED&&(t(((null==d?void 0:d.pageNodeId)&&(0,eh.oA)(d.pageNodeId))===i?wc.H1({sessionId:c.sessionId,votingStage:eU.W8Y.ENDED}):wc.H1({votingStage:eU.W8Y.NO_SESSION})),t(wc.D6("")))},[e,t,r,a,l,n,i]),null}function ecD(){let e=(0,$.d4)(e=>e.isFullscreenDocumentLoaded),t=Q.useRef(!1);return Q.useEffect(()=>{e&&!t.current&&((0,ev.Z1)(),t.current=!0)},[e,t]),null}let ecR=(0,eg.xx)((e,t,n)=>{e(yw.gI()),e(wr.mV({}))}),ecF=(0,LS.n)(()=>{}),ecB=class extends Q.Component{constructor(){super(...arguments),this.pointerDownLogged=!1,this.state={migratingFile:!1,commentsDetailContainer:null},this._migrationTimer=null,this.focusOutEventListener=()=>{window.scrollTo({left:document.body.scrollLeft,top:document.body.scrollTop,behavior:"smooth"})},this.fetchHubFileMetadata=()=>{var e;(null==(e=this.props.openFile)?void 0:e.canEdit)&&this.props.dispatch(wa.rH({fileKey:this.props.openFile.key}))},this.handleMultiplayerConnect=()=>{this.clearMigrationTimer(),this._migrationTimer=setTimeout(()=>{this.setState({migratingFile:!0}),this.props.needsUpgrade&&this.props.progressBarState.mode!==cl.Oin.OFF&&this.props.dispatch((0,n9.to)({type:PW}))},2e4)},this.clearMigrationTimer=()=>{this._migrationTimer&&(clearTimeout(this._migrationTimer),this._migrationTimer=null)},this.handleMultiplayerGotSchema=()=>{this.state.migratingFile&&this.hide(),this.setState({migratingFile:!1}),this.clearMigrationTimer()},this.fullscreenContainerRef=e=>{lT.Y5.reparentRootElement(e),e&&e.addEventListener("drop",this.handleDrop)},this.commentsDetailContainerRef=e=>{this.setState({commentsDetailContainer:e})},this.handleDrop=e=>{this.props.dispatch(dk.eM({dataTransfer:e.dataTransfer,clientX:e.clientX,clientY:e.clientY}))},this.hide=()=>{this.props.dispatch(n9.Ce())},this.onPointerDown=e=>{!this.pointerDownLogged&&("whiteboard"!==this.props.selectedView.editorType?this.pointerDownLogged=!0:function(e,t){if(t===cl.NLJ.VECTOR_PENCIL||t===cl.NLJ.ERASER||t===cl.NLJ.HIGHLIGHTER){var n;return n="figjam",(0,cB.uE)("Pointer Input",el.D.getState(),{inputSource:e.pointerType,tool:function(e){switch(e){case cl.NLJ.VECTOR_PENCIL:return"VECTOR_PENCIL";case cl.NLJ.ERASER:return"ERASER";case cl.NLJ.HIGHLIGHTER:return"HIGHLIGHTER"}}(t),productType:n}),!0}return!1}(e,this.props.store.getState().mirror.appModel.currentTool)&&(this.pointerDownLogged=!0))}}componentDidMount(){var e;window.scrollTo(0,0),ec.XN&&document.addEventListener("focusout",this.focusOutEventListener),document.documentElement.classList.add(ecT.FC),document.body.classList.add(ecT.Wc),this.props.dispatch(wl._J()),ecR(this.props.dispatch,null==(e=this.props.openFile)?void 0:e.key,this.props.currentUserOrgId),this.props.openFile&&(this.props.dispatch(dk.Yx({})),this.props.dispatch(dk.x4())),lT.Y5.fromFullscreen.on("multiplayerConnect",this.handleMultiplayerConnect),lT.Y5.fromFullscreen.on("multiplayerDisconnect",this.clearMigrationTimer),lT.Y5.fromFullscreen.on("multiplayerGotSchema",this.handleMultiplayerGotSchema),this.props.openFile&&!this.props.isReadOnly?this.fetchHubFileMetadata():(0,eo.kc)().ce_new_missing_fonts_logging&&(0,wN.DI)();let t=window.FigmaMobile;t&&(t._get_memory_stats=()=>{var e,t,n,a,r,l,i;let o=(null==(e=eU.P2e)?void 0:e.getImageMemory())||{};return{metadata:JSON.parse(JSON.stringify({coreJsBufferMemory:(null==(t=eU.hMR)?void 0:t.getJsBufferMemory())||0,coreLocalMaxUsedHeapMemory:(null==(n=eU.hMR)?void 0:n.getLocalMaxUsedHeapMemory())||0,coreMaxUsedHeapMemory:(null==(a=eU.hMR)?void 0:a.getMaxUsedHeapMemory())||0,coreTotalUsedHeapMemory:(null==(r=eU.hMR)?void 0:r.getTotalUsedHeapMemory())||0,fullscreenCompressedImages:o.compressedImages||0,fullscreenUncompressedImagesArrayBuffers:o.uncompressedArrayBuffer||0,fullscreenUncompressedImagesImageBitmap:o.uncompressedImageBitmap||0})),reservedWasmMemory:(0,wx.le)()||0,rendererGpuMemory:(null==(l=eU.P2e)?void 0:l.getRendererGpuMemory())||0,rendererBreakdown:(null==(i=eU.P2e)?void 0:i.getRendererMemoryBreakdown())||{}}})}componentDidUpdate(e,t){var n;(e.openFile&&this.props.openFile&&e.openFile.key!==this.props.openFile.key||e.selectedView.editorType&&this.props.selectedView.editorType&&e.selectedView.editorType!==this.props.selectedView.editorType)&&(this.props.dispatch(dk.x4()),ecR(this.props.dispatch,null==(n=this.props.openFile)?void 0:n.key,this.props.currentUserOrgId)),!e.openFile&&this.props.openFile&&(this.props.dispatch(dk.Yx({})),this.props.dispatch(dk.x4()))}componentWillUnmount(){ec.XN&&document.removeEventListener("focusout",this.focusOutEventListener),lT.Y5.fromFullscreen.removeListener("multiplayerConnect",this.handleMultiplayerConnect),lT.Y5.fromFullscreen.removeListener("multiplayerDisconnect",this.clearMigrationTimer),lT.Y5.fromFullscreen.removeListener("multiplayerGotSchema",this.handleMultiplayerGotSchema),this.clearMigrationTimer(),document.body.classList.remove(ecT.Wc),document.documentElement.classList.remove(ecT.FC)}renderOnCanvasNameEditor(){switch(this.props.onCanvasNameEditorInfo.mode){case eU.nzw.FRAME_NAME:return Q.createElement($6,null);case eU.nzw.FLOW_STARTING_POINT_NAME:return Q.createElement($7,null);case eU.nzw.SECTION_NAME:return Q.createElement($8,null);default:return null}}renderOpenDesktopAppModal(){if(this.props.progressBarState.mode===cl.Oin.OFF)switch(this.props.showingOpenDesktopAppModal){case w0.kF.FOR_OPEN:return Q.createElement(xw.g,{dispatch:this.props.dispatch});case w0.kF.FOR_MENU:return Q.createElement(eet.s,{dispatch:this.props.dispatch})}}renderEditConfirmationModal(){if(this.props.showStartModal&&this.props.user&&this.props.openFile&&this.props.openFile.key)return Q.createElement(eoZ,{fileKey:this.props.openFile.key})}render(){var e,t,n,a,r,l,i,o,s,c,d;let u=this.props.isCommentsToolSelected,m=this.props.topLevelMode===cl.lyf.HISTORY,p="whiteboard"===this.props.selectedView.editorType,_="design"===this.props.selectedView.editorType||this.props.selectedView.editorType===w$.fy,f="slides"===this.props.selectedView.editorType,h=!this.props.isReadOnly,g="dev_handoff"===this.props.selectedView.editorType,E=(null==(e=this.props.openFile)?void 0:e.editorType)==="design",v=this.props.aiEnabled,y=(0,wM.T)(),b=(0,c_.Wl)(this.props.selectedView),C=!this.props.showUi&&(0,yu.TY)(this.props.dropdownShown),w=(null==(t=this.props.dropdownShown)?void 0:t.type)===yu.jv,T=(0,yu.Wo)(this.props.dropdownShown),x=w?null==(a=null==(n=this.props.dropdownShown)?void 0:n.data)?void 0:a.parameterEntryArgs:void 0,N=(null==(l=null==(r=this.props.dropdownShown)?void 0:r.data)?void 0:l.fireQuickActionsTrackingEvent)||ey.lQ,k=this.props.selectedView.editorType;k!==ecB.previousEditorType&&(this.props.dispatch(cM.PQ([])),ecB.previousEditorType=k);let S=this.props.user&&this.props.openFile&&!m&&!b,I=this.props.currentPage,A=(null==(i=this.props.comments.activeThread)?void 0:i.id)||null,P=this.props.comments.showOnlyParticipating,O=this.props.comments.showResolved,L=!this.props.fileIsLoading&&p&&(0,eoY.h)(this.props),M=!(0,Lw.ty)();return Q.createElement($T.d,null,Q.createElement("div",{"aria-hidden":!!this.props.modalShown,className:ea()(ecT.nP,y&&this.props.devHandoffFocusMode&&ecT.$J),onPointerDown:this.onPointerDown},Q.createElement(ecL,{fileKey:(null==(o=this.props.openFile)?void 0:o.key)||null,orgId:this.props.currentUserOrgId}),(_||g)&&Q.createElement(wb.ED,null),(0,eo.kc)().ee_color_management_debug?Q.createElement(wy,null):null,this.props.openFile&&Q.createElement(ecM,{fileKey:this.props.openFile.key}),!(ec.Ay.isIpad||ec.Ay.isIpadNative||ec.Ay.isMobileBrowser||ec.Ay.isMeetDevice)&&Q.createElement(ecD,null),Q.createElement("div",{className:ecT.MY,"data-forward-events-to-fullscreen":!0},Q.createElement(W9,null,(0,eo.kc)().cursor_bot&&E&&this.props.hasCursorBot&&Q.createElement($1,null),!b&&Q.createElement("div",{key:"fullscreen-container",ref:this.fullscreenContainerRef}),Q.createElement(eea,null),!f&&Q.createElement(ecw,null),this.props.showToolbar&&Q.createElement(ecy,{numUnreadComments:this.props.unreadCommentCount,selectedView:this.props.selectedView,recordingKey:"toolbarView"}),this.props.isUI3&&this.props.showUi&&!p&&!f&&Q.createElement(jb,null),f&&this.props.showUi&&Q.createElement(EM.Ah,null),!this.props.fileIsLoading&&Q.createElement(Mt,{context:{location:"editor",openFile:this.props.openFile}}),(null==(s=this.props.openFile)?void 0:s.template)&&Q.createElement(WW,null),C&&Q.createElement(Tb.e,{key:"fullscreen-menu",dropdown:this.props.dropdownShown,recordingKey:"mainMenu"}),(w||T)&&Q.createElement(eP.tH,{boundaryKey:"QuickActionsOuter",onError:()=>{this.props.dispatch(eL.F.enqueue({message:"Unable to open quick actions",type:"react-error"}))},fallback:eP.H4.NONE_I_KNOW_WHAT_IM_DOING},Q.createElement(eoK,{key:"quick-actions",parameterEntryArgs:x,fireTrackingEvent:N})),this.props.showQuickActionsV2&&Q.createElement(eP.tH,{boundaryKey:"QuickActionsV2",onError:()=>{this.props.dispatch(eL.F.enqueue({message:"Unable to open quick actions",type:"react-error"}))},fallback:eP.H4.NONE_I_KNOW_WHAT_IM_DOING},Q.createElement(eoI,null)),this.props.isUI3&&(0,eo.kc)().ce_al_drag_experiments&&this.props.showAutoLayoutHints&&Q.createElement(WH,null),!(ec.Ay.isIpad||ec.Ay.isIpadNative)&&!this.props.isReadOnly&&p&&Q.createElement(LO.Eb,null),p&&Q.createElement(Wj,null),this.props.progressBarState.mode!==cl.Oin.OFF&&Q.createElement("div",{className:ecT._q}),Q.createElement(ze.pO,{initialFilterState:{currentPage:(0,sZ.$A)(this.props.selectedView)}},this.props.loadingEmbeds.map(e=>Q.createElement(JW,{key:`loading-embed-${e}`,nodeId:e})),this.renderOnCanvasNameEditor(),Q.createElement(LT,null),g?this.props.canAccessDevMode&&Q.createElement(tl,null):this.props.showCanvasSearch&&Q.createElement(eee,null),_&&(0,eo.kc)().ce_al_drag_experiments&&Q.createElement(eee,null),Q.createElement(JF,null),Q.createElement(JR,null),Q.createElement(Nt,null),p&&(0,eo.kc)().figjam_summary_content_attrib&&Q.createElement(eo0,null),p&&Q.createElement(LO.Pn,null),g&&!b&&Q.createElement(WB,null),(0,Lx.i)()&&f?Q.createElement(Lk,null):null,S&&Q.createElement(w9.$2,{showOnlyParticipatingComments:P,showResolvedComments:O,pageId:I,activeId:A,renderDetailContainerInPortal:!0,detailContainerPortal:this.state.commentsDetailContainer}),Q.createElement($2.yL,null),Q.createElement($Q,null),(0,eo.kc)().cursor_bot&&E&&!g&&this.props.hasCursorBot&&Q.createElement(Gl,null),p&&Q.createElement(NN,null),p&&Q.createElement(JY.S4,{multiplayerEmoji:this.props.multiplayerEmoji}),!(0,eo.kc)().figjam_generate_handbrake&&v&&p&&!m&&Q.createElement(LO.AU,null),v&&p&&Q.createElement(LO.Ic,null),p&&(0,eo.kc)().figjam_mindmaps_behavior_enable&&Q.createElement(LO.Eu,null),p&&!u&&!m&&Q.createElement(LO.Me,null),p&&!u&&!m&&Q.createElement(LO.fJ,null),!p&&!g&&Q.createElement($K,null),(p||_||f)&&Q.createElement(jI,null),p&&Q.createElement(jH,null),Q.createElement(V_.Nz,null),p&&Q.createElement(LO.q,null),p&&this.props.showUi&&Q.createElement(esa,null),Q.createElement("div",{ref:this.commentsDetailContainerRef}),Q.createElement(ecV,null),E&&_&&h&&Q.createElement(eno,null),Q.createElement(Jb,null)),Q.createElement(GP,{isFigjamEditor:p,isDesignEditor:_,openFile:this.props.openFile}),this.props.showUi&&!p&&m&&!this.props.isUI3&&Q.createElement("div",{className:ecT.yL},Q.createElement(rw.yU,{recordingKey:"versionHistoryView"})),this.props.hyperlinkLocation&&Q.createElement($x.c,{hyperlink:this.props.hyperlinkLocation,editorType:(0,w$.oD)(this.props.selectedView.editorType),dispatch:this.props.dispatch,recordingKey:"hyperlinkEditor"}),Q.createElement(w8.yq,null),this.props.progressBarState.mode!==cl.Oin.OFF&&Q.createElement(Pz.z2,{editorType:(0,w$.oD)(this.props.selectedView.editorType),progressBarMode:this.props.progressBarState.mode,progressBarType:this.props.progressBarState.type,left:0}),this.props.showingReconnectingModal&&Q.createElement(Pj.z,{clientType:"fullscreen"}),this.renderOpenDesktopAppModal(),this.renderEditConfirmationModal(),this.props.universalInsertModal.showing&&Q.createElement(eP.tH,{boundaryKey:p?"FigJamBrowseAllResourcesModal":"FdBrowseResourceModal ",onError:()=>{this.props.dispatch(eL.F.enqueue({message:"Unable to open inserts menu",type:"react-error"}))},fallback:eP.H4.NONE_I_KNOW_WHAT_IM_DOING},p?Q.createElement(PV,null):Q.createElement(GR,null)),this.props.dropdownShown&&!M&&!ec.Ay.isMeetDevice&&Q.createElement(eP.tH,{boundaryKey:"FullscreenContextMenu",onError:()=>{this.props.dispatch(eL.F.enqueue({message:"Unable to open context menu",type:"react-error"}))},fallback:eP.H4.NONE_I_KNOW_WHAT_IM_DOING},Q.createElement($w,{dropdownShown:this.props.dropdownShown,selectedView:this.props.selectedView,ariaLabelledBy:(0,eO.t)("fullscreen.fullscreen_view.context_menu.aria_label")})),(null==(c=this.props.pickerShown)?void 0:c.id)===eK.C9&&Q.createElement(Tg,null),this.props.exportSettingsPickerShown.isShown&&Q.createElement(Qu,null),(null==(d=this.props.pickerShown)?void 0:d.id)===xC.O&&Q.createElement(xC.S,{recordingKey:"nudgeAmountPicker"}),this.props.eyedropper&&Q.createElement(JX,null),L&&Q.createElement(eoj,null))),Q.createElement(GM.EmbeddedFigmaScopeView,null),!1,!1,this.props.showKeyboardShortcuts&&Q.createElement(xp,{recordingKey:"keyboardShortcutPanel"}),this.props.voiceEnabled&&("design"===k||"dev_handoff"===k)&&Q.createElement($5,{className:ecT.PA},Q.createElement(Lu,null)),p&&Q.createElement(LO.Qf,null),p&&Q.createElement(LO.Ru,null),Q.createElement(Kt,{editorType:k,currentPage:this.props.currentPage}),Q.createElement(LL.G,null),Q.createElement(ecO,null)))}};function ecU(e){return{selectedView:e.selectedView,user:e.user,currentUserOrgId:e.currentUserOrgId,comments:e.comments,dropdownShown:e.dropdownShown,modalShown:e.modalShown,pickerShown:e.pickerShown,multiplayerEmoji:e.multiplayerEmoji,eyedropper:e.eyedropper,needsUpgrade:e.needsUpgrade,progressBarState:e.progressBarState,showingReconnectingModal:e.showingReconnectingModal,showingOpenDesktopAppModal:e.showingOpenDesktopAppModal,openFile:e.openFile,exportSettingsPickerShown:e.exportSettingsPickerShown,pagesList:e.mirror.appModel.pagesList,timerModalState:e.timer.modalState,timerTime:e.timer.time,universalInsertModal:e.universalInsertModal,isCommentsToolSelected:e.mirror.appModel.currentTool===cl.NLJ.COMMENTS,loadingBackgroundColor:e.desktopNewTab.loadingBackgroundColor,isReadOnly:e.mirror.appModel.isReadOnly,currentPage:e.mirror.appModel.currentPage,hyperlinkLocation:e.mirror.appModel.hyperlinkLocation,onCanvasNameEditorInfo:e.mirror.appModel.onCanvasNameEditorInfo,topLevelMode:e.mirror.appModel.topLevelMode,showUi:e.mirror.appModel.showUi,showToolbar:!0,showKeyboardShortcuts:e.mirror.appModel.showKeyboardShortcuts,loadingEmbeds:e.mirror.appModel.loadingEmbeds,fileIsLoading:e.progressBarState.mode===cl.Oin.HIDE_UI||e.progressBarState.mode===cl.Oin.ON_AND_LOCKED,hasCursorBot:!!(0,eo.kc)().internal_only_debug_tools||!!e.userFlags.has_cursor_bot_onboarding_v2}}ecB.displayName="FullscreenViewInner",ecB.previousEditorType="design";let ecH=Q.memo(function(){var e,t,n,a,r,l,i,o,s;let c=(0,ep.R)(ecU),d=(0,gI.n6)(),u=(0,wQ.Lk)(),m=(0,eG.ut)(null==(e=eU.Ez5)?void 0:e.uiState().showCanvasSearch,!1),p=!(0,SF.yT)()&&(0,LI.Uy)(),_=(0,$.wA)(),f=(0,at.TA)(),h=c.openFile?c.openFile.key:"",g=(0,eG.J2)(null==(t=eU.Ez5)?void 0:t.devHandoffState().focusMode),E=function(){let e=(0,ef.md)(WU.Bu),t=(0,enu.el)();return e||!!t}(),v=!!(0,ti._I)(),y=(0,eG.J2)(null==(n=eU.Ez5)?void 0:n.editorPreferences().renderALUHints),b=(0,eG.J2)(null==(a=eU.Ez5)?void 0:a.uiState().shouldShowAutoLayoutHintsIfExist),C=(0,eG.J2)(null==(r=eU.Ez5)?void 0:r.uiState().autoLayoutShortcutHints),w=(0,eh.Rs)(tf.Jpz,{key:h}),T=!1;if(w&&"loaded"===w.status&&c.openFile){let e=w.data.file;if(e&&f){let t=e.linkAccess,n=null==(l=e.team)?void 0:l.isStarterTeam,a=(null==(o=null==(i=e.team)?void 0:i.isStudentTeam)?void 0:o.status)==="loaded"&&(0,eh.oA)(null==(s=e.team)?void 0:s.isStudentTeam),r=!!e.roles.find(e=>e.userId===f);c.openFile.canEdit&&t===dV.PQ.EDIT&&(n||a)&&!r&&(T=!0)}}let x=(0,$.Pj)();dk.nz(),dk.Gb(h),(0,ww.N)();let N=(0,zK.Rt)();return"ok"!==(0,ef.md)(wf.h)?null:Q.createElement(ecB,{...(0,eb.d)(c),store:x,dispatch:_,unreadCommentCount:d,voiceEnabled:u,showCanvasSearch:m,aiEnabled:p,showStartModal:T,devHandoffFocusMode:g,canAccessDevMode:v,isUI3:N,showQuickActionsV2:E,showAutoLayoutHints:y&&b&&C.size>0})});function ecV(){let e=(0,lx._6)(),t="design"===e.editorType,n=e.editorType===w$.fy,a="whiteboard"===e.editorType,r="slides"===e.editorType,l=(0,aD.GS)();return t?Q.createElement(xf,null):n?Q.createElement(xv,null):r?Q.createElement(xy,null):a&&l?Q.createElement(xE,null):null}},531747:(e,t,n)=>{n.d(t,{A:()=>r});var a=n(411855);function r(e){return a.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},a.createElement("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M18 12a6 6 0 1 1-12 0 6 6 0 0 1 12 0Zm1 0a7 7 0 1 1-14 0 7 7 0 0 1 14 0ZM8.837 13a.5.5 0 0 0-.452.714 4 4 0 0 0 7.23 0 .5.5 0 0 0-.452-.714H8.837ZM12 15a2.993 2.993 0 0 1-2.236-1h4.472c-.55.614-1.348 1-2.236 1Zm-1-5a1 1 0 1 1-2 0 1 1 0 0 1 2 0Zm3 1a1 1 0 1 0 0-2 1 1 0 0 0 0 2Z",clipRule:"evenodd"}))}}}]);

//# debugId=2ad8cfc2-58d5-5fc3-a2f5-d6d820a6427f

//# sourceMappingURL=https://admin.figma.com/admin/webpack-artifacts/305304d211b22df3c1e4d37eef1cab3b70e4dcef/fullscreen-f7a78800b8b05b25.min.js.map