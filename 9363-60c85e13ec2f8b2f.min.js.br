"use strict";
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="775a5a5b-e085-5a4d-af7c-b934551a71e3")}catch(e){}}();
(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([[9363],{315072:(e,t,l)=>{l.d(t,{NI:()=>c,_Z:()=>a,h$:()=>n,hF:()=>r,mL:()=>o,pL:()=>i});let n="variable_create_modal--staticTitle--HS1IC",a="variable_create_modal--textInput--234SQ raw_components--textInput--t9D8g raw_components--base--T7G0z raw_components--input--JB4Ix raw_components--singleRowHeight--dKM4t raw_components--border--SKh2u",r="variable_create_modal--input--d-tVA",i="variable_create_modal--tabGroup--WI9w0",o="variable_create_modal--variableSetSelectChevron--larcU",c="variable_create_modal--variableSetSelectInput--YUE3H"},241723:(e,t,l)=>{l.d(t,{E:()=>i});var n=l(664080);function a(e,t){let l={},i=e.getVariableConsumptionMap();if(Object.keys(i).length>0)for(let[a,o]of Object.entries(i))if((null==o?void 0:o.isMixed)||(null==o?void 0:o.type)!==n.Z_n.ALIAS){if(!(null==o?void 0:o.isMixed)&&(null==o?void 0:o.type)===n.Z_n.EXPRESSION)for(let i of function e(t){let l=[];for(let a of t.value.expressionArguments)a.type===n.Z_n.ALIAS?l.push(a.value):a.type===n.Z_n.EXPRESSION&&l.push(...e(a));return l}(o))r(i,a,e,t,l)}else{let n=null==o?void 0:o.value;l[n]||r(n,a,e,t,l)}for(let n of e.childrenNodes)Object.assign(l,a(n,t));return l}function r(e,t,l,n,a){var r,i,o;if(!a[e]){a[e]={nodesUsed:{}};let t=null==(r=n.get(e))?void 0:r.name;t&&(a[e].name=t);let l=null==(i=n.get(e))?void 0:i.description;l&&(a[e].description=l);let c=null==(o=n.get(e))?void 0:o.resolvedType;c&&(a[e].resolvedType=c)}return a[e].nodesUsed[l.guid]||(a[e].nodesUsed[l.guid]=[]),a[e].nodesUsed[l.guid].push(t),a}function i(e,t){return function(e){let t="";for(let[l,n]of Object.entries(e)){if(t+=`${l} has name "${n.name}", resolvedType "${n.resolvedType}"`,n.description&&(t+=`, description "${n.description.slice(0,100)}"`),Object.keys(n.nodesUsed).length>0)for(let[e,l]of(t+=", and is used in ",Object.entries(n.nodesUsed)))t+=`node ${e} with fields ${l.join(", ")}`;t+="\n"}return t}(function(e,t=new Map,l=!1){if(l)return a(e.getRoot(),t);let n=e.getCurrentPage();return null===n?{}:a(n,t)}(e,t))}},50779:(e,t,l)=>{l.d(t,{f:()=>p});var n=l(411855),a=l(829826),r=l(42910),i=l(480201),o=l(487644),c=l(113420),u=l(757358),d=l(339652),s=l(449660),m=l(732223),v=l(50275),b=l(501191);function p({resolvedTypes:e,recordingKey:t}){let{showing:l,toggle:i,hide:s}=(0,c.B)("expression-builder-create-variable"),m=n.useRef(null),p=a.rf(a.Pt(t,"createVariableDropdown"),"click",n.useCallback(()=>{1===e.length?E(e[0]):i()},[e,i])),[g,h]=n.useState(!1),_=n.useRef(null),E=e=>{var t;let l=null==(t=m.current)?void 0:t.getBoundingClientRect();l&&(_.current={initialPosition:new r.Mi(l.left,l.top),resolvedType:e},h(!0))},C=()=>{h(!1)};return n.createElement(n.Fragment,null,n.createElement("button",{ref:m,className:v.ZS,onClick:p},n.createElement(o.B,{svg:b.A})),g&&(g&&_.current?n.createElement(d.IU,{initialPosition:_.current.initialPosition,resolvedType:_.current.resolvedType,onCreateVariable:C,onClose:C}):null),l&&m.current&&n.createElement(u.Cf,{arrowOffsetFromRectLeft:14,leanPadding:0,lean:"right",targetRect:m.current.getBoundingClientRect()},e.map(e=>n.createElement(f,{key:e,resolvedType:e,onClose:s,showCreationModal:E,recordingKey:t}))))}function f({resolvedType:e,onClose:t,showCreationModal:l,recordingKey:r}){let o=(0,m.F)(e),c=a.rf(a.Pt(r,"createVariableOption",o.name),"click",n.useCallback(()=>{l(e),t()},[t,e,l]));return n.createElement(i.W.Option,{className:v.Fs,onClick:c},n.createElement(s.i,{type:e,showTooltip:!1}),o.name)}},339652:(e,t,l)=>{l.d(t,{C_:()=>F,IU:()=>Z,Ty:()=>B,iG:()=>M});var n=l(411855),a=l(188507),r=l(89865),i=l.n(r),o=l(794307),c=l(499200),u=l(868879),d=l(695614),s=l(829826),m=l(785341),v=l(507776),b=l(304913),p=l(838320),f=l(402791),g=l(162122),h=l(92158),_=l(664080),E=l(797811),C=l(725396),y=l(113420),I=l(772990),S=l(579038),L=l(455399),T=l(816665),V=l(460486),w=l(120550),A=l(31844),x=l(51431),N=l(208332),R=l(214710),U=l(627878),k=l(860168),O=l(315072),P=l(424148);let $=2*(0,c.jz)(k.dGl),M=304;function Z({initialPosition:e,initialValue:t,resolvedType:l,onCreateVariable:a,onClose:r}){(0,V.NF)({resolvedType:l});let{onCreateVariableSubmit:i}=F({onCreateVariable:a,onClose:r});return n.createElement(W,{initialPosition:e,initialValue:t,resolvedType:l,onCreateVariableSubmit:i,onClose:r,recordingKey:"createVariableModal"})}function F({onCreateVariable:e,onClose:t}){return{onCreateVariableSubmit:function({varSetID:l,varName:n,varValue:a}){if(!_.CWU.isValidVariableName(n,l)){(0,m.x1)("variables","Attempted to submit variable name that is invalid",{varName:n,_varSetID:l});return}E.l7.user("create-variable",()=>{let t=l??_.CWU.createVariableSet((0,f.t)("variables.variable_collection"),_.G6k.AUTOMATIC_FIRST_COLLECTION),r=_.CWU.createVariable(n,t,a,_.HS4.VARIABLE_PICKER),i=_.CWU.getLocalVariableInfo(r);(0,o.B1)(i,`variable with id ${r} not found`),e((0,I.kz)(i))}),t()}}}function W({initialPosition:e,initialValue:t,resolvedType:l,recordingKey:a,onCreateVariableSubmit:r,onClose:i}){return n.createElement(w.vx,{title:n.createElement("div",{className:O.h$},n.createElement(f.Tx,{id:"variables.create_modal.title"})),initialPosition:e,initialWidth:M,onClose:i},n.createElement(B,{resolvedType:l,initialValue:t,recordingKey:s.Pt(a,"createVariableForm"),onSubmit:r}))}function B({resolvedType:e,initialValue:t,recordingKey:l,onSubmit:r}){let i=(0,a.wA)(),o=(0,C.yp)(),m=(0,n.useRef)(null),[E,y]=(0,v.Vc)("last-used-variable-set-bottoms-up",o.length>0?o[0].node_id:null),I=(0,n.useMemo)(()=>{let e=o.find(e=>e.node_id===E);return!e&&o.length>0?o[0]:e},[o,E]),T=(0,C.rW)((null==I?void 0:I.node_id)??null),[V,w]=(0,n.useState)((0,R.Wc)(T,e)),M=(0,n.useRef)(null);(0,u.h)(()=>{var e;null==(e=M.current)||e.select()});let[Z,F]=(0,n.useState)(()=>t??(0,R.WI)(e)),W=function(e){let t=(0,C.BQ)(e.type===_.Z_n.ALIAS?e.value:void 0);return(0,d.Vq)(t)&&"MIXED"!==t?t:null}(Z),B=(0,n.useMemo)(()=>_.CWU.isValidVariableName(V,(null==I?void 0:I.node_id)??null),[V,null==I?void 0:I.node_id]);async function K(t){if(t){let l=await i((0,h.Oe)(t));F((0,N.y$)(e,l))}else Z.type===_.Z_n.ALIAS&&F((0,R.WI)(e))}(0,n.useEffect)(()=>{let e=m.current;if(!e)return;let t=e=>e.preventDefault();return e.addEventListener("contextmenu",t),()=>{e.removeEventListener("contextmenu",t)}},[m]);let z=s.of(l,"submit",()=>{r({varName:V,varValue:Z,varSetID:(null==I?void 0:I.node_id)??null})});function D({label:e,input:t}){return n.createElement(g.Y,{spacing:0,horizontalAlignItems:"space-between",height:"hug-contents",padding:{horizontal:$}},n.createElement(L.JU,null,e),t)}return n.createElement("form",{onSubmit:z},n.createElement(g.Y,{direction:"vertical",spacing:0,height:"hug-contents",ref:m},n.createElement(g.Y,{direction:"vertical",spacing:`${(0,c.jz)(k.dGl)}px`,padding:{top:$},height:"hug-contents"},o.length>0&&!!I&&D({label:n.createElement(f.Tx,{id:"variables.create_modal.collection_label"}),input:n.createElement("div",{className:O.hF},n.createElement(j,{selectedVariableSetID:I.node_id,variableSets:o,onChange:y}))}),D({label:n.createElement(f.Tx,{id:"variables.create_modal.name_label"}),input:n.createElement(p.L,{className:O._Z,name:"variableName",value:V,onChange:e=>{w(e.target.value)},ref:M,recordingKey:s.Pt(l,"variableNameInput"),delay:50,autoFocus:!0})}),D({label:n.createElement(f.Tx,{id:"variables.create_modal.value_label"}),input:n.createElement("div",{className:O.hF},n.createElement(x.Cr,{resolvedType:e,variableValue:Z,onVariableValueChange:e=>F(e),onVariableSelected:K},n.createElement(U.g,{variableValue:Z,contextType:A.$.FORM,onChange:e=>F(e),recordingKey:s.Pt(l,"variableValueInput")}),W&&n.createElement(L.K0,{svg:P.A,type:"button","data-tooltip-type":S.Ib.TEXT,"data-tooltip":(0,f.t)("variables.authoring_modal.table.detach_alias"),onClick:()=>F(W),recordingKey:s.Pt(l,"detachVariableButton")})))}))),n.createElement(g.Y,{horizontalAlignItems:"end",verticalAlignItems:"center",padding:16},n.createElement(b.$$,{style:{justifySelf:"right"},tabIndex:0,type:"submit",disabled:!B,recordingKey:s.Pt(l,"createButton"),"data-tooltip-type":B?void 0:S.Ib.TEXT,"data-tooltip":(0,f.t)("variables.create_modal.invalid_variable_name")},n.createElement("span",null,n.createElement(f.Tx,{id:"variables.create_modal.create_button"})))))}function j({selectedVariableSetID:e,variableSets:t,onChange:l}){let r=(0,a.wA)(),o=(0,y.U)(),c=(0,n.useMemo)(()=>i()(t,e=>e.node_id),[t]);return n.createElement(T.l6,{id:"variable-create-modal-variable-set-select",property:c[e],formatter:{format:e=>(null==e?void 0:e.name)??""},dispatch:r,chevronClassName:O.mL,inputClassName:O.NI,dropdownShown:o,onChange:e=>l(e.node_id)},t.map(function(e){return n.createElement(T.c$,{key:e.node_id,value:e})}))}},293775:(e,t,l)=>{l.d(t,{C:()=>a});var n=l(411855);function a(e){return n.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},n.createElement("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"m4.7 4.7.315-1.26c.126-.505.844-.505.97 0L6.3 4.7l1.26.315c.505.126.505.844 0 .97L6.3 6.3l-.315 1.26c-.126.505-.844.505-.97 0L4.7 6.3l-1.26-.315c-.505-.126-.505-.844 0-.97L4.7 4.7Zm4.49 4.491 1.117-3.908c.486-1.702 2.898-1.702 3.384 0L14.81 9.19l3.908 1.117c1.702.486 1.702 2.898 0 3.384L14.81 14.81l-1.117 3.908c-.486 1.702-2.898 1.702-3.384 0L9.19 14.81l-3.908-1.117c-1.702-.486-1.702-2.898 0-3.384L9.19 9.19ZM10 10l1.27-4.442c.21-.735 1.25-.735 1.46 0L14 10l4.442 1.27c.735.21.735 1.25 0 1.46L14 14l-1.27 4.442c-.21.735-1.25.735-1.46 0L10 14l-4.442-1.27c-.735-.21-.735-1.25 0-1.46L10 10Zm8.015 6.44L17.7 17.7l-1.26.315c-.505.126-.505.844 0 .97l1.26.315.315 1.26c.126.505.844.505.97 0l.315-1.26 1.26-.315c.505-.126.505-.844 0-.97L19.3 17.7l-.315-1.26c-.126-.505-.844-.505-.97 0Z",clipRule:"evenodd"}))}}}]);

//# debugId=775a5a5b-e085-5a4d-af7c-b934551a71e3

//# sourceMappingURL=https://admin.figma.com/admin/webpack-artifacts/fa184f5100ce15675e258d8263fa2422b4c1c3f6/9363-60c85e13ec2f8b2f.min.js.map